(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Rw={exports:{}},zp={},Mw={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bf=Symbol.for("react.element"),hb=Symbol.for("react.portal"),fb=Symbol.for("react.fragment"),db=Symbol.for("react.strict_mode"),pb=Symbol.for("react.profiler"),mb=Symbol.for("react.provider"),gb=Symbol.for("react.context"),vb=Symbol.for("react.forward_ref"),yb=Symbol.for("react.suspense"),_b=Symbol.for("react.memo"),wb=Symbol.for("react.lazy"),I_=Symbol.iterator;function xb(t){return t===null||typeof t!="object"?null:(t=I_&&t[I_]||t["@@iterator"],typeof t=="function"?t:null)}var Dw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fw=Object.assign,Ow={};function Gc(t,e,n){this.props=t,this.context=e,this.refs=Ow,this.updater=n||Dw}Gc.prototype.isReactComponent={};Gc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vw(){}Vw.prototype=Gc.prototype;function Ev(t,e,n){this.props=t,this.context=e,this.refs=Ow,this.updater=n||Dw}var Av=Ev.prototype=new Vw;Av.constructor=Ev;Fw(Av,Gc.prototype);Av.isPureReactComponent=!0;var P_=Array.isArray,Bw=Object.prototype.hasOwnProperty,bv={current:null},Uw={key:!0,ref:!0,__self:!0,__source:!0};function zw(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Bw.call(e,i)&&!Uw.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:bf,type:t,key:o,ref:s,props:r,_owner:bv.current}}function Sb(t,e){return{$$typeof:bf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cv(t){return typeof t=="object"&&t!==null&&t.$$typeof===bf}function Tb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N_=/\/+/g;function Um(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tb(""+t.key):e.toString(36)}function Ld(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case bf:case hb:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+Um(s,0):i,P_(r)?(n="",t!=null&&(n=t.replace(N_,"$&/")+"/"),Ld(r,e,n,"",function(c){return c})):r!=null&&(Cv(r)&&(r=Sb(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(N_,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",P_(t))for(var l=0;l<t.length;l++){o=t[l];var u=i+Um(o,l);s+=Ld(o,e,n,u,r)}else if(u=xb(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=i+Um(o,l++),s+=Ld(o,e,n,u,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ed(t,e,n){if(t==null)return t;var i=[],r=0;return Ld(t,i,"","",function(o){return e.call(n,o,r++)}),i}function Eb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qr={current:null},Rd={transition:null},Ab={ReactCurrentDispatcher:qr,ReactCurrentBatchConfig:Rd,ReactCurrentOwner:bv};function qw(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:ed,forEach:function(t,e,n){ed(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ed(t,function(){e++}),e},toArray:function(t){return ed(t,function(e){return e})||[]},only:function(t){if(!Cv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Yt.Component=Gc;Yt.Fragment=fb;Yt.Profiler=pb;Yt.PureComponent=Ev;Yt.StrictMode=db;Yt.Suspense=yb;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ab;Yt.act=qw;Yt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Fw({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=bv.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Bw.call(e,u)&&!Uw.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:bf,type:t.type,key:r,ref:o,props:i,_owner:s}};Yt.createContext=function(t){return t={$$typeof:gb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mb,_context:t},t.Consumer=t};Yt.createElement=zw;Yt.createFactory=function(t){var e=zw.bind(null,t);return e.type=t,e};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(t){return{$$typeof:vb,render:t}};Yt.isValidElement=Cv;Yt.lazy=function(t){return{$$typeof:wb,_payload:{_status:-1,_result:t},_init:Eb}};Yt.memo=function(t,e){return{$$typeof:_b,type:t,compare:e===void 0?null:e}};Yt.startTransition=function(t){var e=Rd.transition;Rd.transition={};try{t()}finally{Rd.transition=e}};Yt.unstable_act=qw;Yt.useCallback=function(t,e){return qr.current.useCallback(t,e)};Yt.useContext=function(t){return qr.current.useContext(t)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(t){return qr.current.useDeferredValue(t)};Yt.useEffect=function(t,e){return qr.current.useEffect(t,e)};Yt.useId=function(){return qr.current.useId()};Yt.useImperativeHandle=function(t,e,n){return qr.current.useImperativeHandle(t,e,n)};Yt.useInsertionEffect=function(t,e){return qr.current.useInsertionEffect(t,e)};Yt.useLayoutEffect=function(t,e){return qr.current.useLayoutEffect(t,e)};Yt.useMemo=function(t,e){return qr.current.useMemo(t,e)};Yt.useReducer=function(t,e,n){return qr.current.useReducer(t,e,n)};Yt.useRef=function(t){return qr.current.useRef(t)};Yt.useState=function(t){return qr.current.useState(t)};Yt.useSyncExternalStore=function(t,e,n){return qr.current.useSyncExternalStore(t,e,n)};Yt.useTransition=function(){return qr.current.useTransition()};Yt.version="18.3.1";Mw.exports=Yt;var kt=Mw.exports;const bb=Tv(kt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb=kt,Ib=Symbol.for("react.element"),Pb=Symbol.for("react.fragment"),Nb=Object.prototype.hasOwnProperty,kb=Cb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lb={key:!0,ref:!0,__self:!0,__source:!0};function Hw(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)Nb.call(e,i)&&!Lb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Ib,type:t,key:o,ref:s,props:r,_owner:kb.current}}zp.Fragment=Pb;zp.jsx=Hw;zp.jsxs=Hw;Rw.exports=zp;var B=Rw.exports,Lg={},Gw={exports:{}},Co={},jw={exports:{}},Ww={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,oe){var fe=W.length;W.push(oe);e:for(;0<fe;){var xe=fe-1>>>1,j=W[xe];if(0<r(j,oe))W[xe]=oe,W[fe]=j,fe=xe;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var oe=W[0],fe=W.pop();if(fe!==oe){W[0]=fe;e:for(var xe=0,j=W.length,ee=j>>>1;xe<ee;){var ae=2*(xe+1)-1,ue=W[ae],he=ae+1,Te=W[he];if(0>r(ue,fe))he<j&&0>r(Te,ue)?(W[xe]=Te,W[he]=fe,xe=he):(W[xe]=ue,W[ae]=fe,xe=ae);else if(he<j&&0>r(Te,fe))W[xe]=Te,W[he]=fe,xe=he;else break e}}return oe}function r(W,oe){var fe=W.sortIndex-oe.sortIndex;return fe!==0?fe:W.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,g=null,y=3,w=!1,N=!1,R=!1,F=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var oe=n(c);oe!==null;){if(oe.callback===null)i(c);else if(oe.startTime<=W)i(c),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=n(c)}}function G(W){if(R=!1,P(W),!N)if(n(u)!==null)N=!0,le(J);else{var oe=n(c);oe!==null&&se(G,oe.startTime-W)}}function J(W,oe){N=!1,R&&(R=!1,T(C),C=-1),w=!0;var fe=y;try{for(P(oe),g=n(u);g!==null&&(!(g.expirationTime>oe)||W&&!k());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,y=g.priorityLevel;var j=xe(g.expirationTime<=oe);oe=t.unstable_now(),typeof j=="function"?g.callback=j:g===n(u)&&i(u),P(oe)}else i(u);g=n(u)}if(g!==null)var ee=!0;else{var ae=n(c);ae!==null&&se(G,ae.startTime-oe),ee=!1}return ee}finally{g=null,y=fe,w=!1}}var Q=!1,D=null,C=-1,O=5,H=-1;function k(){return!(t.unstable_now()-H<O)}function b(){if(D!==null){var W=t.unstable_now();H=W;var oe=!0;try{oe=D(!0,W)}finally{oe?V():(Q=!1,D=null)}}else Q=!1}var V;if(typeof I=="function")V=function(){I(b)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,_e=ie.port2;ie.port1.onmessage=b,V=function(){_e.postMessage(null)}}else V=function(){F(b,0)};function le(W){D=W,Q||(Q=!0,V())}function se(W,oe){C=F(function(){W(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,le(J))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var fe=y;y=oe;try{return W()}finally{y=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var fe=y;y=W;try{return oe()}finally{y=fe}},t.unstable_scheduleCallback=function(W,oe,fe){var xe=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?xe+fe:xe):fe=xe,W){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=fe+j,W={id:f++,callback:oe,priorityLevel:W,startTime:fe,expirationTime:j,sortIndex:-1},fe>xe?(W.sortIndex=fe,e(c,W),n(u)===null&&W===n(c)&&(R?(T(C),C=-1):R=!0,se(G,fe-xe))):(W.sortIndex=j,e(u,W),N||w||(N=!0,le(J))),W},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(W){var oe=y;return function(){var fe=y;y=oe;try{return W.apply(this,arguments)}finally{y=fe}}}})(Ww);jw.exports=Ww;var Rb=jw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb=kt,bo=Rb;function Ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $w=new Set,Jh={};function Nu(t,e){Pc(t,e),Pc(t+"Capture",e)}function Pc(t,e){for(Jh[t]=e,t=0;t<e.length;t++)$w.add(e[t])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,Db=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k_={},L_={};function Fb(t){return Rg.call(L_,t)?!0:Rg.call(k_,t)?!1:Db.test(t)?L_[t]=!0:(k_[t]=!0,!1)}function Ob(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vb(t,e,n,i){if(e===null||typeof e>"u"||Ob(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hr(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sr[t]=new Hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sr[e]=new Hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){sr[t]=new Hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sr[t]=new Hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sr[t]=new Hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){sr[t]=new Hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){sr[t]=new Hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){sr[t]=new Hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){sr[t]=new Hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iv=/[\-:]([a-z])/g;function Pv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iv,Pv);sr[e]=new Hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iv,Pv);sr[e]=new Hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iv,Pv);sr[e]=new Hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){sr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!1,!1)});sr.xlinkHref=new Hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){sr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nv(t,e,n,i){var r=sr.hasOwnProperty(e)?sr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vb(e,n,r,i)&&(n=null),i||r===null?Fb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Qa=Mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,td=Symbol.for("react.element"),ic=Symbol.for("react.portal"),rc=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),Kw=Symbol.for("react.provider"),Jw=Symbol.for("react.context"),Lv=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Fg=Symbol.for("react.suspense_list"),Rv=Symbol.for("react.memo"),vl=Symbol.for("react.lazy"),Yw=Symbol.for("react.offscreen"),R_=Symbol.iterator;function ch(t){return t===null||typeof t!="object"?null:(t=R_&&t[R_]||t["@@iterator"],typeof t=="function"?t:null)}var Zn=Object.assign,zm;function Th(t){if(zm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zm=e&&e[1]||""}return`
`+zm+t}var qm=!1;function Hm(t,e){if(!t||qm)return"";qm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,l=o.length-1;1<=s&&0<=l&&r[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==o[l]){var u=`
`+r[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{qm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Th(t):""}function Bb(t){switch(t.tag){case 5:return Th(t.type);case 16:return Th("Lazy");case 13:return Th("Suspense");case 19:return Th("SuspenseList");case 0:case 2:case 15:return t=Hm(t.type,!1),t;case 11:return t=Hm(t.type.render,!1),t;case 1:return t=Hm(t.type,!0),t;default:return""}}function Og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rc:return"Fragment";case ic:return"Portal";case Mg:return"Profiler";case kv:return"StrictMode";case Dg:return"Suspense";case Fg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jw:return(t.displayName||"Context")+".Consumer";case Kw:return(t._context.displayName||"Context")+".Provider";case Lv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rv:return e=t.displayName||null,e!==null?e:Og(t.type)||"Memo";case vl:e=t._payload,t=t._init;try{return Og(t(e))}catch{}}return null}function Ub(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Og(e);case 8:return e===kv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ul(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zb(t){var e=Zw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nd(t){t._valueTracker||(t._valueTracker=zb(t))}function Qw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Zw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Zd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vg(t,e){var n=e.checked;return Zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ul(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xw(t,e){e=e.checked,e!=null&&Nv(t,"checked",e,!1)}function Bg(t,e){Xw(t,e);var n=Ul(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ug(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ug(t,e.type,Ul(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ug(t,e,n){(e!=="number"||Zd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eh=Array.isArray;function yc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ul(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function zg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return Zn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function F_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ke(92));if(Eh(n)){if(1<n.length)throw Error(Ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ul(n)}}function ex(t,e){var n=Ul(e.value),i=Ul(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function O_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var id,nx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(id=id||document.createElement("div"),id.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=id.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(kh).forEach(function(t){qb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kh[e]=kh[t]})});function ix(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kh.hasOwnProperty(t)&&kh[t]?(""+e).trim():e+"px"}function rx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=ix(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Hb=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(t,e){if(e){if(Hb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ke(62))}}function Gg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jg=null;function Mv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wg=null,_c=null,wc=null;function V_(t){if(t=Pf(t)){if(typeof Wg!="function")throw Error(Ke(280));var e=t.stateNode;e&&(e=Wp(e),Wg(t.stateNode,t.type,e))}}function ox(t){_c?wc?wc.push(t):wc=[t]:_c=t}function sx(){if(_c){var t=_c,e=wc;if(wc=_c=null,V_(t),e)for(t=0;t<e.length;t++)V_(e[t])}}function ax(t,e){return t(e)}function lx(){}var Gm=!1;function ux(t,e,n){if(Gm)return t(e,n);Gm=!0;try{return ax(t,e,n)}finally{Gm=!1,(_c!==null||wc!==null)&&(lx(),sx())}}function Zh(t,e){var n=t.stateNode;if(n===null)return null;var i=Wp(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ke(231,e,typeof n));return n}var $g=!1;if(Ga)try{var hh={};Object.defineProperty(hh,"passive",{get:function(){$g=!0}}),window.addEventListener("test",hh,hh),window.removeEventListener("test",hh,hh)}catch{$g=!1}function Gb(t,e,n,i,r,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Lh=!1,Qd=null,Xd=!1,Kg=null,jb={onError:function(t){Lh=!0,Qd=t}};function Wb(t,e,n,i,r,o,s,l,u){Lh=!1,Qd=null,Gb.apply(jb,arguments)}function $b(t,e,n,i,r,o,s,l,u){if(Wb.apply(this,arguments),Lh){if(Lh){var c=Qd;Lh=!1,Qd=null}else throw Error(Ke(198));Xd||(Xd=!0,Kg=c)}}function ku(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B_(t){if(ku(t)!==t)throw Error(Ke(188))}function Kb(t){var e=t.alternate;if(!e){if(e=ku(t),e===null)throw Error(Ke(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return B_(r),t;if(o===i)return B_(r),e;o=o.sibling}throw Error(Ke(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(Ke(189))}}if(n.alternate!==i)throw Error(Ke(190))}if(n.tag!==3)throw Error(Ke(188));return n.stateNode.current===n?t:e}function hx(t){return t=Kb(t),t!==null?fx(t):null}function fx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fx(t);if(e!==null)return e;t=t.sibling}return null}var dx=bo.unstable_scheduleCallback,U_=bo.unstable_cancelCallback,Jb=bo.unstable_shouldYield,Yb=bo.unstable_requestPaint,ci=bo.unstable_now,Zb=bo.unstable_getCurrentPriorityLevel,Dv=bo.unstable_ImmediatePriority,px=bo.unstable_UserBlockingPriority,ep=bo.unstable_NormalPriority,Qb=bo.unstable_LowPriority,mx=bo.unstable_IdlePriority,qp=null,ga=null;function Xb(t){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(qp,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:nC,eC=Math.log,tC=Math.LN2;function nC(t){return t>>>=0,t===0?32:31-(eC(t)/tC|0)|0}var rd=64,od=4194304;function Ah(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tp(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~r;l!==0?i=Ah(l):(o&=s,o!==0&&(i=Ah(o)))}else s=n&~r,s!==0?i=Ah(s):o!==0&&(i=Ah(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Bs(e),r=1<<n,i|=t[n],e&=~r;return i}function iC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Bs(o),l=1<<s,u=r[s];u===-1?(!(l&n)||l&i)&&(r[s]=iC(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Jg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gx(){var t=rd;return rd<<=1,!(rd&4194240)&&(rd=64),t}function jm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bs(e),t[e]=n}function oC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Bs(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Fv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Bs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var An=0;function vx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yx,Ov,_x,wx,xx,Yg=!1,sd=[],Cl=null,Il=null,Pl=null,Qh=new Map,Xh=new Map,_l=[],sC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z_(t,e){switch(t){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Pl=null;break;case"pointerover":case"pointerout":Qh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xh.delete(e.pointerId)}}function fh(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Pf(e),e!==null&&Ov(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function aC(t,e,n,i,r){switch(e){case"focusin":return Cl=fh(Cl,t,e,n,i,r),!0;case"dragenter":return Il=fh(Il,t,e,n,i,r),!0;case"mouseover":return Pl=fh(Pl,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Qh.set(o,fh(Qh.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Xh.set(o,fh(Xh.get(o)||null,t,e,n,i,r)),!0}return!1}function Sx(t){var e=cu(t.target);if(e!==null){var n=ku(e);if(n!==null){if(e=n.tag,e===13){if(e=cx(n),e!==null){t.blockedOn=e,xx(t.priority,function(){_x(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Md(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);jg=i,n.target.dispatchEvent(i),jg=null}else return e=Pf(n),e!==null&&Ov(e),t.blockedOn=n,!1;e.shift()}return!0}function q_(t,e,n){Md(t)&&n.delete(e)}function lC(){Yg=!1,Cl!==null&&Md(Cl)&&(Cl=null),Il!==null&&Md(Il)&&(Il=null),Pl!==null&&Md(Pl)&&(Pl=null),Qh.forEach(q_),Xh.forEach(q_)}function dh(t,e){t.blockedOn===e&&(t.blockedOn=null,Yg||(Yg=!0,bo.unstable_scheduleCallback(bo.unstable_NormalPriority,lC)))}function ef(t){function e(r){return dh(r,t)}if(0<sd.length){dh(sd[0],t);for(var n=1;n<sd.length;n++){var i=sd[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Cl!==null&&dh(Cl,t),Il!==null&&dh(Il,t),Pl!==null&&dh(Pl,t),Qh.forEach(e),Xh.forEach(e),n=0;n<_l.length;n++)i=_l[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<_l.length&&(n=_l[0],n.blockedOn===null);)Sx(n),n.blockedOn===null&&_l.shift()}var xc=Qa.ReactCurrentBatchConfig,np=!0;function uC(t,e,n,i){var r=An,o=xc.transition;xc.transition=null;try{An=1,Vv(t,e,n,i)}finally{An=r,xc.transition=o}}function cC(t,e,n,i){var r=An,o=xc.transition;xc.transition=null;try{An=4,Vv(t,e,n,i)}finally{An=r,xc.transition=o}}function Vv(t,e,n,i){if(np){var r=Zg(t,e,n,i);if(r===null)tg(t,e,i,ip,n),z_(t,i);else if(aC(r,t,e,n,i))i.stopPropagation();else if(z_(t,i),e&4&&-1<sC.indexOf(t)){for(;r!==null;){var o=Pf(r);if(o!==null&&yx(o),o=Zg(t,e,n,i),o===null&&tg(t,e,i,ip,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else tg(t,e,i,null,n)}}var ip=null;function Zg(t,e,n,i){if(ip=null,t=Mv(i),t=cu(t),t!==null)if(e=ku(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ip=t,null}function Tx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zb()){case Dv:return 1;case px:return 4;case ep:case Qb:return 16;case mx:return 536870912;default:return 16}default:return 16}}var Sl=null,Bv=null,Dd=null;function Ex(){if(Dd)return Dd;var t,e=Bv,n=e.length,i,r="value"in Sl?Sl.value:Sl.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return Dd=r.slice(t,1<i?1-i:void 0)}function Fd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ad(){return!0}function H_(){return!1}function Io(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ad:H_,this.isPropagationStopped=H_,this}return Zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),e}var jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uv=Io(jc),If=Zn({},jc,{view:0,detail:0}),hC=Io(If),Wm,$m,ph,Hp=Zn({},If,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ph&&(ph&&t.type==="mousemove"?(Wm=t.screenX-ph.screenX,$m=t.screenY-ph.screenY):$m=Wm=0,ph=t),Wm)},movementY:function(t){return"movementY"in t?t.movementY:$m}}),G_=Io(Hp),fC=Zn({},Hp,{dataTransfer:0}),dC=Io(fC),pC=Zn({},If,{relatedTarget:0}),Km=Io(pC),mC=Zn({},jc,{animationName:0,elapsedTime:0,pseudoElement:0}),gC=Io(mC),vC=Zn({},jc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yC=Io(vC),_C=Zn({},jc,{data:0}),j_=Io(_C),wC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SC[t])?!!e[t]:!1}function zv(){return TC}var EC=Zn({},If,{key:function(t){if(t.key){var e=wC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zv,charCode:function(t){return t.type==="keypress"?Fd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AC=Io(EC),bC=Zn({},Hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W_=Io(bC),CC=Zn({},If,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zv}),IC=Io(CC),PC=Zn({},jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),NC=Io(PC),kC=Zn({},Hp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LC=Io(kC),RC=[9,13,27,32],qv=Ga&&"CompositionEvent"in window,Rh=null;Ga&&"documentMode"in document&&(Rh=document.documentMode);var MC=Ga&&"TextEvent"in window&&!Rh,Ax=Ga&&(!qv||Rh&&8<Rh&&11>=Rh),$_=" ",K_=!1;function bx(t,e){switch(t){case"keyup":return RC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oc=!1;function DC(t,e){switch(t){case"compositionend":return Cx(e);case"keypress":return e.which!==32?null:(K_=!0,$_);case"textInput":return t=e.data,t===$_&&K_?null:t;default:return null}}function FC(t,e){if(oc)return t==="compositionend"||!qv&&bx(t,e)?(t=Ex(),Dd=Bv=Sl=null,oc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ax&&e.locale!=="ko"?null:e.data;default:return null}}var OC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OC[t.type]:e==="textarea"}function Ix(t,e,n,i){ox(i),e=rp(e,"onChange"),0<e.length&&(n=new Uv("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Mh=null,tf=null;function VC(t){Bx(t,0)}function Gp(t){var e=lc(t);if(Qw(e))return t}function BC(t,e){if(t==="change")return e}var Px=!1;if(Ga){var Jm;if(Ga){var Ym="oninput"in document;if(!Ym){var Y_=document.createElement("div");Y_.setAttribute("oninput","return;"),Ym=typeof Y_.oninput=="function"}Jm=Ym}else Jm=!1;Px=Jm&&(!document.documentMode||9<document.documentMode)}function Z_(){Mh&&(Mh.detachEvent("onpropertychange",Nx),tf=Mh=null)}function Nx(t){if(t.propertyName==="value"&&Gp(tf)){var e=[];Ix(e,tf,t,Mv(t)),ux(VC,e)}}function UC(t,e,n){t==="focusin"?(Z_(),Mh=e,tf=n,Mh.attachEvent("onpropertychange",Nx)):t==="focusout"&&Z_()}function zC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gp(tf)}function qC(t,e){if(t==="click")return Gp(e)}function HC(t,e){if(t==="input"||t==="change")return Gp(e)}function GC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hs=typeof Object.is=="function"?Object.is:GC;function nf(t,e){if(Hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Rg.call(e,r)||!Hs(t[r],e[r]))return!1}return!0}function Q_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X_(t,e){var n=Q_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q_(n)}}function kx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lx(){for(var t=window,e=Zd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zd(t.document)}return e}function Hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jC(t){var e=Lx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kx(n.ownerDocument.documentElement,n)){if(i!==null&&Hv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=X_(n,o);var s=X_(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WC=Ga&&"documentMode"in document&&11>=document.documentMode,sc=null,Qg=null,Dh=null,Xg=!1;function e1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xg||sc==null||sc!==Zd(i)||(i=sc,"selectionStart"in i&&Hv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Dh&&nf(Dh,i)||(Dh=i,i=rp(Qg,"onSelect"),0<i.length&&(e=new Uv("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=sc)))}function ld(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ac={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},Zm={},Rx={};Ga&&(Rx=document.createElement("div").style,"AnimationEvent"in window||(delete ac.animationend.animation,delete ac.animationiteration.animation,delete ac.animationstart.animation),"TransitionEvent"in window||delete ac.transitionend.transition);function jp(t){if(Zm[t])return Zm[t];if(!ac[t])return t;var e=ac[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rx)return Zm[t]=e[n];return t}var Mx=jp("animationend"),Dx=jp("animationiteration"),Fx=jp("animationstart"),Ox=jp("transitionend"),Vx=new Map,t1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $l(t,e){Vx.set(t,e),Nu(e,[t])}for(var Qm=0;Qm<t1.length;Qm++){var Xm=t1[Qm],$C=Xm.toLowerCase(),KC=Xm[0].toUpperCase()+Xm.slice(1);$l($C,"on"+KC)}$l(Mx,"onAnimationEnd");$l(Dx,"onAnimationIteration");$l(Fx,"onAnimationStart");$l("dblclick","onDoubleClick");$l("focusin","onFocus");$l("focusout","onBlur");$l(Ox,"onTransitionEnd");Pc("onMouseEnter",["mouseout","mouseover"]);Pc("onMouseLeave",["mouseout","mouseover"]);Pc("onPointerEnter",["pointerout","pointerover"]);Pc("onPointerLeave",["pointerout","pointerover"]);Nu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JC=new Set("cancel close invalid load scroll toggle".split(" ").concat(bh));function n1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,$b(i,e,void 0,t),t.currentTarget=null}function Bx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&r.isPropagationStopped())break e;n1(r,l,c),o=u}else for(s=0;s<i.length;s++){if(l=i[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&r.isPropagationStopped())break e;n1(r,l,c),o=u}}}if(Xd)throw t=Kg,Xd=!1,Kg=null,t}function Bn(t,e){var n=e[r0];n===void 0&&(n=e[r0]=new Set);var i=t+"__bubble";n.has(i)||(Ux(e,t,2,!1),n.add(i))}function eg(t,e,n){var i=0;e&&(i|=4),Ux(n,t,i,e)}var ud="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[ud]){t[ud]=!0,$w.forEach(function(n){n!=="selectionchange"&&(JC.has(n)||eg(n,!1,t),eg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ud]||(e[ud]=!0,eg("selectionchange",!1,e))}}function Ux(t,e,n,i){switch(Tx(e)){case 1:var r=uC;break;case 4:r=cC;break;default:r=Vv}n=r.bind(null,e,n,t),r=void 0,!$g||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function tg(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;l!==null;){if(s=cu(l),s===null)return;if(u=s.tag,u===5||u===6){i=o=s;continue e}l=l.parentNode}}i=i.return}ux(function(){var c=o,f=Mv(n),g=[];e:{var y=Vx.get(t);if(y!==void 0){var w=Uv,N=t;switch(t){case"keypress":if(Fd(n)===0)break e;case"keydown":case"keyup":w=AC;break;case"focusin":N="focus",w=Km;break;case"focusout":N="blur",w=Km;break;case"beforeblur":case"afterblur":w=Km;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=G_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=dC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=IC;break;case Mx:case Dx:case Fx:w=gC;break;case Ox:w=NC;break;case"scroll":w=hC;break;case"wheel":w=LC;break;case"copy":case"cut":case"paste":w=yC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=W_}var R=(e&4)!==0,F=!R&&t==="scroll",T=R?y!==null?y+"Capture":null:y;R=[];for(var I=c,P;I!==null;){P=I;var G=P.stateNode;if(P.tag===5&&G!==null&&(P=G,T!==null&&(G=Zh(I,T),G!=null&&R.push(of(I,G,P)))),F)break;I=I.return}0<R.length&&(y=new w(y,N,null,n,f),g.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&n!==jg&&(N=n.relatedTarget||n.fromElement)&&(cu(N)||N[ja]))break e;if((w||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,w?(N=n.relatedTarget||n.toElement,w=c,N=N?cu(N):null,N!==null&&(F=ku(N),N!==F||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=c),w!==N)){if(R=G_,G="onMouseLeave",T="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(R=W_,G="onPointerLeave",T="onPointerEnter",I="pointer"),F=w==null?y:lc(w),P=N==null?y:lc(N),y=new R(G,I+"leave",w,n,f),y.target=F,y.relatedTarget=P,G=null,cu(f)===c&&(R=new R(T,I+"enter",N,n,f),R.target=P,R.relatedTarget=F,G=R),F=G,w&&N)t:{for(R=w,T=N,I=0,P=R;P;P=Ku(P))I++;for(P=0,G=T;G;G=Ku(G))P++;for(;0<I-P;)R=Ku(R),I--;for(;0<P-I;)T=Ku(T),P--;for(;I--;){if(R===T||T!==null&&R===T.alternate)break t;R=Ku(R),T=Ku(T)}R=null}else R=null;w!==null&&i1(g,y,w,R,!1),N!==null&&F!==null&&i1(g,F,N,R,!0)}}e:{if(y=c?lc(c):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var J=BC;else if(J_(y))if(Px)J=HC;else{J=zC;var Q=UC}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(J=qC);if(J&&(J=J(t,c))){Ix(g,J,n,f);break e}Q&&Q(t,y,c),t==="focusout"&&(Q=y._wrapperState)&&Q.controlled&&y.type==="number"&&Ug(y,"number",y.value)}switch(Q=c?lc(c):window,t){case"focusin":(J_(Q)||Q.contentEditable==="true")&&(sc=Q,Qg=c,Dh=null);break;case"focusout":Dh=Qg=sc=null;break;case"mousedown":Xg=!0;break;case"contextmenu":case"mouseup":case"dragend":Xg=!1,e1(g,n,f);break;case"selectionchange":if(WC)break;case"keydown":case"keyup":e1(g,n,f)}var D;if(qv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else oc?bx(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Ax&&n.locale!=="ko"&&(oc||C!=="onCompositionStart"?C==="onCompositionEnd"&&oc&&(D=Ex()):(Sl=f,Bv="value"in Sl?Sl.value:Sl.textContent,oc=!0)),Q=rp(c,C),0<Q.length&&(C=new j_(C,t,null,n,f),g.push({event:C,listeners:Q}),D?C.data=D:(D=Cx(n),D!==null&&(C.data=D)))),(D=MC?DC(t,n):FC(t,n))&&(c=rp(c,"onBeforeInput"),0<c.length&&(f=new j_("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:c}),f.data=D))}Bx(g,e)})}function of(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rp(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Zh(t,n),o!=null&&i.unshift(of(t,o,r)),o=Zh(t,e),o!=null&&i.push(of(t,o,r))),t=t.return}return i}function Ku(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i1(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,r?(u=Zh(n,o),u!=null&&s.unshift(of(n,u,l))):r||(u=Zh(n,o),u!=null&&s.push(of(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var YC=/\r\n?/g,ZC=/\u0000|\uFFFD/g;function r1(t){return(typeof t=="string"?t:""+t).replace(YC,`
`).replace(ZC,"")}function cd(t,e,n){if(e=r1(e),r1(t)!==e&&n)throw Error(Ke(425))}function op(){}var e0=null,t0=null;function n0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var i0=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,XC=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(t){return o1.resolve(null).then(t).catch(eI)}:i0;function eI(t){setTimeout(function(){throw t})}function ng(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ef(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ef(e)}function Nl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),pa="__reactFiber$"+Wc,sf="__reactProps$"+Wc,ja="__reactContainer$"+Wc,r0="__reactEvents$"+Wc,tI="__reactListeners$"+Wc,nI="__reactHandles$"+Wc;function cu(t){var e=t[pa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ja]||n[pa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s1(t);t!==null;){if(n=t[pa])return n;t=s1(t)}return e}t=n,n=t.parentNode}return null}function Pf(t){return t=t[pa]||t[ja],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ke(33))}function Wp(t){return t[sf]||null}var o0=[],uc=-1;function Kl(t){return{current:t}}function zn(t){0>uc||(t.current=o0[uc],o0[uc]=null,uc--)}function Fn(t,e){uc++,o0[uc]=t.current,t.current=e}var zl={},Cr=Kl(zl),oo=Kl(!1),Su=zl;function Nc(t,e){var n=t.type.contextTypes;if(!n)return zl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function so(t){return t=t.childContextTypes,t!=null}function sp(){zn(oo),zn(Cr)}function a1(t,e,n){if(Cr.current!==zl)throw Error(Ke(168));Fn(Cr,e),Fn(oo,n)}function zx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ke(108,Ub(t)||"Unknown",r));return Zn({},n,i)}function ap(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zl,Su=Cr.current,Fn(Cr,t),Fn(oo,oo.current),!0}function l1(t,e,n){var i=t.stateNode;if(!i)throw Error(Ke(169));n?(t=zx(t,e,Su),i.__reactInternalMemoizedMergedChildContext=t,zn(oo),zn(Cr),Fn(Cr,t)):zn(oo),Fn(oo,n)}var Ba=null,$p=!1,ig=!1;function qx(t){Ba===null?Ba=[t]:Ba.push(t)}function iI(t){$p=!0,qx(t)}function Jl(){if(!ig&&Ba!==null){ig=!0;var t=0,e=An;try{var n=Ba;for(An=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ba=null,$p=!1}catch(r){throw Ba!==null&&(Ba=Ba.slice(t+1)),dx(Dv,Jl),r}finally{An=e,ig=!1}}return null}var cc=[],hc=0,lp=null,up=0,is=[],rs=0,Tu=null,Ua=1,za="";function ou(t,e){cc[hc++]=up,cc[hc++]=lp,lp=t,up=e}function Hx(t,e,n){is[rs++]=Ua,is[rs++]=za,is[rs++]=Tu,Tu=t;var i=Ua;t=za;var r=32-Bs(i)-1;i&=~(1<<r),n+=1;var o=32-Bs(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Ua=1<<32-Bs(e)+r|n<<r|i,za=o+t}else Ua=1<<o|n<<r|i,za=t}function Gv(t){t.return!==null&&(ou(t,1),Hx(t,1,0))}function jv(t){for(;t===lp;)lp=cc[--hc],cc[hc]=null,up=cc[--hc],cc[hc]=null;for(;t===Tu;)Tu=is[--rs],is[rs]=null,za=is[--rs],is[rs]=null,Ua=is[--rs],is[rs]=null}var Ao=null,To=null,Gn=!1,Os=null;function Gx(t,e){var n=ss(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function u1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ao=t,To=Nl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ao=t,To=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tu!==null?{id:Ua,overflow:za}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ss(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ao=t,To=null,!0):!1;default:return!1}}function s0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function a0(t){if(Gn){var e=To;if(e){var n=e;if(!u1(t,e)){if(s0(t))throw Error(Ke(418));e=Nl(n.nextSibling);var i=Ao;e&&u1(t,e)?Gx(i,n):(t.flags=t.flags&-4097|2,Gn=!1,Ao=t)}}else{if(s0(t))throw Error(Ke(418));t.flags=t.flags&-4097|2,Gn=!1,Ao=t}}}function c1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ao=t}function hd(t){if(t!==Ao)return!1;if(!Gn)return c1(t),Gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!n0(t.type,t.memoizedProps)),e&&(e=To)){if(s0(t))throw jx(),Error(Ke(418));for(;e;)Gx(t,e),e=Nl(e.nextSibling)}if(c1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){To=Nl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}To=null}}else To=Ao?Nl(t.stateNode.nextSibling):null;return!0}function jx(){for(var t=To;t;)t=Nl(t.nextSibling)}function kc(){To=Ao=null,Gn=!1}function Wv(t){Os===null?Os=[t]:Os.push(t)}var rI=Qa.ReactCurrentBatchConfig;function mh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ke(309));var i=n.stateNode}if(!i)throw Error(Ke(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=r.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ke(284));if(!n._owner)throw Error(Ke(290,t))}return t}function fd(t,e){throw t=Object.prototype.toString.call(e),Error(Ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function h1(t){var e=t._init;return e(t._payload)}function Wx(t){function e(T,I){if(t){var P=T.deletions;P===null?(T.deletions=[I],T.flags|=16):P.push(I)}}function n(T,I){if(!t)return null;for(;I!==null;)e(T,I),I=I.sibling;return null}function i(T,I){for(T=new Map;I!==null;)I.key!==null?T.set(I.key,I):T.set(I.index,I),I=I.sibling;return T}function r(T,I){return T=Ml(T,I),T.index=0,T.sibling=null,T}function o(T,I,P){return T.index=P,t?(P=T.alternate,P!==null?(P=P.index,P<I?(T.flags|=2,I):P):(T.flags|=2,I)):(T.flags|=1048576,I)}function s(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,I,P,G){return I===null||I.tag!==6?(I=cg(P,T.mode,G),I.return=T,I):(I=r(I,P),I.return=T,I)}function u(T,I,P,G){var J=P.type;return J===rc?f(T,I,P.props.children,G,P.key):I!==null&&(I.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===vl&&h1(J)===I.type)?(G=r(I,P.props),G.ref=mh(T,I,P),G.return=T,G):(G=Hd(P.type,P.key,P.props,null,T.mode,G),G.ref=mh(T,I,P),G.return=T,G)}function c(T,I,P,G){return I===null||I.tag!==4||I.stateNode.containerInfo!==P.containerInfo||I.stateNode.implementation!==P.implementation?(I=hg(P,T.mode,G),I.return=T,I):(I=r(I,P.children||[]),I.return=T,I)}function f(T,I,P,G,J){return I===null||I.tag!==7?(I=gu(P,T.mode,G,J),I.return=T,I):(I=r(I,P),I.return=T,I)}function g(T,I,P){if(typeof I=="string"&&I!==""||typeof I=="number")return I=cg(""+I,T.mode,P),I.return=T,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case td:return P=Hd(I.type,I.key,I.props,null,T.mode,P),P.ref=mh(T,null,I),P.return=T,P;case ic:return I=hg(I,T.mode,P),I.return=T,I;case vl:var G=I._init;return g(T,G(I._payload),P)}if(Eh(I)||ch(I))return I=gu(I,T.mode,P,null),I.return=T,I;fd(T,I)}return null}function y(T,I,P,G){var J=I!==null?I.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return J!==null?null:l(T,I,""+P,G);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case td:return P.key===J?u(T,I,P,G):null;case ic:return P.key===J?c(T,I,P,G):null;case vl:return J=P._init,y(T,I,J(P._payload),G)}if(Eh(P)||ch(P))return J!==null?null:f(T,I,P,G,null);fd(T,P)}return null}function w(T,I,P,G,J){if(typeof G=="string"&&G!==""||typeof G=="number")return T=T.get(P)||null,l(I,T,""+G,J);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case td:return T=T.get(G.key===null?P:G.key)||null,u(I,T,G,J);case ic:return T=T.get(G.key===null?P:G.key)||null,c(I,T,G,J);case vl:var Q=G._init;return w(T,I,P,Q(G._payload),J)}if(Eh(G)||ch(G))return T=T.get(P)||null,f(I,T,G,J,null);fd(I,G)}return null}function N(T,I,P,G){for(var J=null,Q=null,D=I,C=I=0,O=null;D!==null&&C<P.length;C++){D.index>C?(O=D,D=null):O=D.sibling;var H=y(T,D,P[C],G);if(H===null){D===null&&(D=O);break}t&&D&&H.alternate===null&&e(T,D),I=o(H,I,C),Q===null?J=H:Q.sibling=H,Q=H,D=O}if(C===P.length)return n(T,D),Gn&&ou(T,C),J;if(D===null){for(;C<P.length;C++)D=g(T,P[C],G),D!==null&&(I=o(D,I,C),Q===null?J=D:Q.sibling=D,Q=D);return Gn&&ou(T,C),J}for(D=i(T,D);C<P.length;C++)O=w(D,T,C,P[C],G),O!==null&&(t&&O.alternate!==null&&D.delete(O.key===null?C:O.key),I=o(O,I,C),Q===null?J=O:Q.sibling=O,Q=O);return t&&D.forEach(function(k){return e(T,k)}),Gn&&ou(T,C),J}function R(T,I,P,G){var J=ch(P);if(typeof J!="function")throw Error(Ke(150));if(P=J.call(P),P==null)throw Error(Ke(151));for(var Q=J=null,D=I,C=I=0,O=null,H=P.next();D!==null&&!H.done;C++,H=P.next()){D.index>C?(O=D,D=null):O=D.sibling;var k=y(T,D,H.value,G);if(k===null){D===null&&(D=O);break}t&&D&&k.alternate===null&&e(T,D),I=o(k,I,C),Q===null?J=k:Q.sibling=k,Q=k,D=O}if(H.done)return n(T,D),Gn&&ou(T,C),J;if(D===null){for(;!H.done;C++,H=P.next())H=g(T,H.value,G),H!==null&&(I=o(H,I,C),Q===null?J=H:Q.sibling=H,Q=H);return Gn&&ou(T,C),J}for(D=i(T,D);!H.done;C++,H=P.next())H=w(D,T,C,H.value,G),H!==null&&(t&&H.alternate!==null&&D.delete(H.key===null?C:H.key),I=o(H,I,C),Q===null?J=H:Q.sibling=H,Q=H);return t&&D.forEach(function(b){return e(T,b)}),Gn&&ou(T,C),J}function F(T,I,P,G){if(typeof P=="object"&&P!==null&&P.type===rc&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case td:e:{for(var J=P.key,Q=I;Q!==null;){if(Q.key===J){if(J=P.type,J===rc){if(Q.tag===7){n(T,Q.sibling),I=r(Q,P.props.children),I.return=T,T=I;break e}}else if(Q.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===vl&&h1(J)===Q.type){n(T,Q.sibling),I=r(Q,P.props),I.ref=mh(T,Q,P),I.return=T,T=I;break e}n(T,Q);break}else e(T,Q);Q=Q.sibling}P.type===rc?(I=gu(P.props.children,T.mode,G,P.key),I.return=T,T=I):(G=Hd(P.type,P.key,P.props,null,T.mode,G),G.ref=mh(T,I,P),G.return=T,T=G)}return s(T);case ic:e:{for(Q=P.key;I!==null;){if(I.key===Q)if(I.tag===4&&I.stateNode.containerInfo===P.containerInfo&&I.stateNode.implementation===P.implementation){n(T,I.sibling),I=r(I,P.children||[]),I.return=T,T=I;break e}else{n(T,I);break}else e(T,I);I=I.sibling}I=hg(P,T.mode,G),I.return=T,T=I}return s(T);case vl:return Q=P._init,F(T,I,Q(P._payload),G)}if(Eh(P))return N(T,I,P,G);if(ch(P))return R(T,I,P,G);fd(T,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,I!==null&&I.tag===6?(n(T,I.sibling),I=r(I,P),I.return=T,T=I):(n(T,I),I=cg(P,T.mode,G),I.return=T,T=I),s(T)):n(T,I)}return F}var Lc=Wx(!0),$x=Wx(!1),cp=Kl(null),hp=null,fc=null,$v=null;function Kv(){$v=fc=hp=null}function Jv(t){var e=cp.current;zn(cp),t._currentValue=e}function l0(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Sc(t,e){hp=t,$v=fc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ro=!0),t.firstContext=null)}function cs(t){var e=t._currentValue;if($v!==t)if(t={context:t,memoizedValue:e,next:null},fc===null){if(hp===null)throw Error(Ke(308));fc=t,hp.dependencies={lanes:0,firstContext:t}}else fc=fc.next=t;return e}var hu=null;function Yv(t){hu===null?hu=[t]:hu.push(t)}function Kx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Yv(e)):(n.next=r.next,r.next=n),e.interleaved=n,Wa(t,i)}function Wa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yl=!1;function Zv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,un&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Wa(t,n)}return r=i.interleaved,r===null?(e.next=e,Yv(i)):(e.next=r.next,r.next=e),i.interleaved=e,Wa(t,n)}function Od(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Fv(t,n)}}function f1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fp(t,e,n,i){var r=t.updateQueue;yl=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var g=r.baseState;s=0,f=c=u=null,l=o;do{var y=l.lane,w=l.eventTime;if((i&y)===y){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,R=l;switch(y=e,w=n,R.tag){case 1:if(N=R.payload,typeof N=="function"){g=N.call(w,g,y);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=R.payload,y=typeof N=="function"?N.call(w,g,y):N,y==null)break e;g=Zn({},g,y);break e;case 2:yl=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[l]:y.push(l))}else w={eventTime:w,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=w,u=g):f=f.next=w,s|=y;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);if(f===null&&(u=g),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Au|=s,t.lanes=s,t.memoizedState=g}}function d1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ke(191,r));r.call(i)}}}var Nf={},va=Kl(Nf),af=Kl(Nf),lf=Kl(Nf);function fu(t){if(t===Nf)throw Error(Ke(174));return t}function Qv(t,e){switch(Fn(lf,e),Fn(af,t),Fn(va,Nf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qg(e,t)}zn(va),Fn(va,e)}function Rc(){zn(va),zn(af),zn(lf)}function Yx(t){fu(lf.current);var e=fu(va.current),n=qg(e,t.type);e!==n&&(Fn(af,t),Fn(va,n))}function Xv(t){af.current===t&&(zn(va),zn(af))}var Jn=Kl(0);function dp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rg=[];function ey(){for(var t=0;t<rg.length;t++)rg[t]._workInProgressVersionPrimary=null;rg.length=0}var Vd=Qa.ReactCurrentDispatcher,og=Qa.ReactCurrentBatchConfig,Eu=0,Yn=null,Ai=null,qi=null,pp=!1,Fh=!1,uf=0,oI=0;function mr(){throw Error(Ke(321))}function ty(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hs(t[n],e[n]))return!1;return!0}function ny(t,e,n,i,r,o){if(Eu=o,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vd.current=t===null||t.memoizedState===null?uI:cI,t=n(i,r),Fh){o=0;do{if(Fh=!1,uf=0,25<=o)throw Error(Ke(301));o+=1,qi=Ai=null,e.updateQueue=null,Vd.current=hI,t=n(i,r)}while(Fh)}if(Vd.current=mp,e=Ai!==null&&Ai.next!==null,Eu=0,qi=Ai=Yn=null,pp=!1,e)throw Error(Ke(300));return t}function iy(){var t=uf!==0;return uf=0,t}function fa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?Yn.memoizedState=qi=t:qi=qi.next=t,qi}function hs(){if(Ai===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=Ai.next;var e=qi===null?Yn.memoizedState:qi.next;if(e!==null)qi=e,Ai=t;else{if(t===null)throw Error(Ke(310));Ai=t,t={memoizedState:Ai.memoizedState,baseState:Ai.baseState,baseQueue:Ai.baseQueue,queue:Ai.queue,next:null},qi===null?Yn.memoizedState=qi=t:qi=qi.next=t}return qi}function cf(t,e){return typeof e=="function"?e(t):e}function sg(t){var e=hs(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var i=Ai,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((Eu&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var g={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=g,s=i):u=u.next=g,Yn.lanes|=f,Au|=f}c=c.next}while(c!==null&&c!==o);u===null?s=i:u.next=l,Hs(i,e.memoizedState)||(ro=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Yn.lanes|=o,Au|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ag(t){var e=hs(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);Hs(o,e.memoizedState)||(ro=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Zx(){}function Qx(t,e){var n=Yn,i=hs(),r=e(),o=!Hs(i.memoizedState,r);if(o&&(i.memoizedState=r,ro=!0),i=i.queue,ry(tS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||qi!==null&&qi.memoizedState.tag&1){if(n.flags|=2048,hf(9,eS.bind(null,n,i,r,e),void 0,null),Hi===null)throw Error(Ke(349));Eu&30||Xx(n,e,r)}return r}function Xx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eS(t,e,n,i){e.value=n,e.getSnapshot=i,nS(e)&&iS(t)}function tS(t,e,n){return n(function(){nS(e)&&iS(t)})}function nS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hs(t,n)}catch{return!0}}function iS(t){var e=Wa(t,1);e!==null&&Us(e,t,1,-1)}function p1(t){var e=fa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:t},e.queue=t,t=t.dispatch=lI.bind(null,Yn,t),[e.memoizedState,t]}function hf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function rS(){return hs().memoizedState}function Bd(t,e,n,i){var r=fa();Yn.flags|=t,r.memoizedState=hf(1|e,n,void 0,i===void 0?null:i)}function Kp(t,e,n,i){var r=hs();i=i===void 0?null:i;var o=void 0;if(Ai!==null){var s=Ai.memoizedState;if(o=s.destroy,i!==null&&ty(i,s.deps)){r.memoizedState=hf(e,n,o,i);return}}Yn.flags|=t,r.memoizedState=hf(1|e,n,o,i)}function m1(t,e){return Bd(8390656,8,t,e)}function ry(t,e){return Kp(2048,8,t,e)}function oS(t,e){return Kp(4,2,t,e)}function sS(t,e){return Kp(4,4,t,e)}function aS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lS(t,e,n){return n=n!=null?n.concat([t]):null,Kp(4,4,aS.bind(null,e,t),n)}function oy(){}function uS(t,e){var n=hs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ty(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function cS(t,e){var n=hs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ty(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function hS(t,e,n){return Eu&21?(Hs(n,e)||(n=gx(),Yn.lanes|=n,Au|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ro=!0),t.memoizedState=n)}function sI(t,e){var n=An;An=n!==0&&4>n?n:4,t(!0);var i=og.transition;og.transition={};try{t(!1),e()}finally{An=n,og.transition=i}}function fS(){return hs().memoizedState}function aI(t,e,n){var i=Rl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},dS(t))pS(e,n);else if(n=Kx(t,e,n,i),n!==null){var r=Ur();Us(n,t,i,r),mS(n,e,i)}}function lI(t,e,n){var i=Rl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(dS(t))pS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(r.hasEagerState=!0,r.eagerState=l,Hs(l,s)){var u=e.interleaved;u===null?(r.next=r,Yv(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=Kx(t,e,r,i),n!==null&&(r=Ur(),Us(n,t,i,r),mS(n,e,i))}}function dS(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function pS(t,e){Fh=pp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Fv(t,n)}}var mp={readContext:cs,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},uI={readContext:cs,useCallback:function(t,e){return fa().memoizedState=[t,e===void 0?null:e],t},useContext:cs,useEffect:m1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4194308,4,aS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bd(4,2,t,e)},useMemo:function(t,e){var n=fa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=fa();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=aI.bind(null,Yn,t),[i.memoizedState,t]},useRef:function(t){var e=fa();return t={current:t},e.memoizedState=t},useState:p1,useDebugValue:oy,useDeferredValue:function(t){return fa().memoizedState=t},useTransition:function(){var t=p1(!1),e=t[0];return t=sI.bind(null,t[1]),fa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Yn,r=fa();if(Gn){if(n===void 0)throw Error(Ke(407));n=n()}else{if(n=e(),Hi===null)throw Error(Ke(349));Eu&30||Xx(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,m1(tS.bind(null,i,o,t),[t]),i.flags|=2048,hf(9,eS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=fa(),e=Hi.identifierPrefix;if(Gn){var n=za,i=Ua;n=(i&~(1<<32-Bs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=uf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cI={readContext:cs,useCallback:uS,useContext:cs,useEffect:ry,useImperativeHandle:lS,useInsertionEffect:oS,useLayoutEffect:sS,useMemo:cS,useReducer:sg,useRef:rS,useState:function(){return sg(cf)},useDebugValue:oy,useDeferredValue:function(t){var e=hs();return hS(e,Ai.memoizedState,t)},useTransition:function(){var t=sg(cf)[0],e=hs().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:Qx,useId:fS,unstable_isNewReconciler:!1},hI={readContext:cs,useCallback:uS,useContext:cs,useEffect:ry,useImperativeHandle:lS,useInsertionEffect:oS,useLayoutEffect:sS,useMemo:cS,useReducer:ag,useRef:rS,useState:function(){return ag(cf)},useDebugValue:oy,useDeferredValue:function(t){var e=hs();return Ai===null?e.memoizedState=t:hS(e,Ai.memoizedState,t)},useTransition:function(){var t=ag(cf)[0],e=hs().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:Qx,useId:fS,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=Zn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function u0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Zn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jp={isMounted:function(t){return(t=t._reactInternals)?ku(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ur(),r=Rl(t),o=qa(i,r);o.payload=e,n!=null&&(o.callback=n),e=kl(t,o,r),e!==null&&(Us(e,t,r,i),Od(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ur(),r=Rl(t),o=qa(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=kl(t,o,r),e!==null&&(Us(e,t,r,i),Od(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ur(),i=Rl(t),r=qa(n,i);r.tag=2,e!=null&&(r.callback=e),e=kl(t,r,i),e!==null&&(Us(e,t,i,n),Od(e,t,i))}};function g1(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!nf(n,i)||!nf(r,o):!0}function gS(t,e,n){var i=!1,r=zl,o=e.contextType;return typeof o=="object"&&o!==null?o=cs(o):(r=so(e)?Su:Cr.current,i=e.contextTypes,o=(i=i!=null)?Nc(t,r):zl),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function v1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Jp.enqueueReplaceState(e,e.state,null)}function c0(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Zv(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=cs(o):(o=so(e)?Su:Cr.current,r.context=Nc(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(u0(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jp.enqueueReplaceState(r,r.state,null),fp(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Mc(t,e){try{var n="",i=e;do n+=Bb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function lg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function h0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fI=typeof WeakMap=="function"?WeakMap:Map;function vS(t,e,n){n=qa(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){vp||(vp=!0,x0=i),h0(t,e)},n}function yS(t,e,n){n=qa(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){h0(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){h0(t,e),typeof i!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function y1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new fI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=bI.bind(null,t,e,n),e.then(t,t))}function _1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w1(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qa(-1,1),e.tag=2,kl(n,e,1))),n.lanes|=1),t)}var dI=Qa.ReactCurrentOwner,ro=!1;function Br(t,e,n,i){e.child=t===null?$x(e,null,n,i):Lc(e,t.child,n,i)}function x1(t,e,n,i,r){n=n.render;var o=e.ref;return Sc(e,r),i=ny(t,e,n,i,o,r),n=iy(),t!==null&&!ro?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$a(t,e,r)):(Gn&&n&&Gv(e),e.flags|=1,Br(t,e,i,r),e.child)}function S1(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!dy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,_S(t,e,o,i,r)):(t=Hd(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:nf,n(s,i)&&t.ref===e.ref)return $a(t,e,r)}return e.flags|=1,t=Ml(o,i),t.ref=e.ref,t.return=e,e.child=t}function _S(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(nf(o,i)&&t.ref===e.ref)if(ro=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(ro=!0);else return e.lanes=t.lanes,$a(t,e,r)}return f0(t,e,n,i,r)}function wS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(pc,So),So|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fn(pc,So),So|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Fn(pc,So),So|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Fn(pc,So),So|=i;return Br(t,e,r,n),e.child}function xS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function f0(t,e,n,i,r){var o=so(n)?Su:Cr.current;return o=Nc(e,o),Sc(e,r),n=ny(t,e,n,i,o,r),i=iy(),t!==null&&!ro?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$a(t,e,r)):(Gn&&i&&Gv(e),e.flags|=1,Br(t,e,n,r),e.child)}function T1(t,e,n,i,r){if(so(n)){var o=!0;ap(e)}else o=!1;if(Sc(e,r),e.stateNode===null)Ud(t,e),gS(e,n,i),c0(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=cs(c):(c=so(n)?Su:Cr.current,c=Nc(e,c));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";g||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==i||u!==c)&&v1(e,s,i,c),yl=!1;var y=e.memoizedState;s.state=y,fp(e,i,s,r),u=e.memoizedState,l!==i||y!==u||oo.current||yl?(typeof f=="function"&&(u0(e,n,f,i),u=e.memoizedState),(l=yl||g1(e,n,l,i,y,u,c))?(g||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),s.props=i,s.state=u,s.context=c,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Jx(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Ms(e.type,l),s.props=c,g=e.pendingProps,y=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=cs(u):(u=so(n)?Su:Cr.current,u=Nc(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==g||y!==u)&&v1(e,s,i,u),yl=!1,y=e.memoizedState,s.state=y,fp(e,i,s,r);var N=e.memoizedState;l!==g||y!==N||oo.current||yl?(typeof w=="function"&&(u0(e,n,w,i),N=e.memoizedState),(c=yl||g1(e,n,c,i,y,N,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,N,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,N,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=N),s.props=i,s.state=N,s.context=u,i=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return d0(t,e,n,i,o,r)}function d0(t,e,n,i,r,o){xS(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&l1(e,n,!1),$a(t,e,o);i=e.stateNode,dI.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=Lc(e,t.child,null,o),e.child=Lc(e,null,l,o)):Br(t,e,l,o),e.memoizedState=i.state,r&&l1(e,n,!0),e.child}function SS(t){var e=t.stateNode;e.pendingContext?a1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a1(t,e.context,!1),Qv(t,e.containerInfo)}function E1(t,e,n,i,r){return kc(),Wv(r),e.flags|=256,Br(t,e,n,i),e.child}var p0={dehydrated:null,treeContext:null,retryLane:0};function m0(t){return{baseLanes:t,cachePool:null,transitions:null}}function TS(t,e,n){var i=e.pendingProps,r=Jn.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Fn(Jn,r&1),t===null)return a0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Qp(s,i,0,null),t=gu(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=m0(n),e.memoizedState=p0,t):sy(e,s));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return pI(t,e,s,i,l,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=Ml(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=Ml(l,o):(o=gu(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?m0(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=p0,i}return o=t.child,t=o.sibling,i=Ml(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function sy(t,e){return e=Qp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dd(t,e,n,i){return i!==null&&Wv(i),Lc(e,t.child,null,n),t=sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pI(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=lg(Error(Ke(422))),dd(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Qp({mode:"visible",children:i.children},r,0,null),o=gu(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Lc(e,t.child,null,s),e.child.memoizedState=m0(s),e.memoizedState=p0,o);if(!(e.mode&1))return dd(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(Ke(419)),i=lg(o,i,void 0),dd(t,e,s,i)}if(l=(s&t.childLanes)!==0,ro||l){if(i=Hi,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Wa(t,r),Us(i,t,r,-1))}return fy(),i=lg(Error(Ke(421))),dd(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=CI.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,To=Nl(r.nextSibling),Ao=e,Gn=!0,Os=null,t!==null&&(is[rs++]=Ua,is[rs++]=za,is[rs++]=Tu,Ua=t.id,za=t.overflow,Tu=e),e=sy(e,i.children),e.flags|=4096,e)}function A1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),l0(t.return,e,n)}function ug(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function ES(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Br(t,e,i.children,n),i=Jn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A1(t,n,e);else if(t.tag===19)A1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fn(Jn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&dp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ug(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&dp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ug(e,!0,n,null,o);break;case"together":ug(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $a(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Au|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ke(153));if(e.child!==null){for(t=e.child,n=Ml(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ml(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mI(t,e,n){switch(e.tag){case 3:SS(e),kc();break;case 5:Yx(e);break;case 1:so(e.type)&&ap(e);break;case 4:Qv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Fn(cp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fn(Jn,Jn.current&1),e.flags|=128,null):n&e.child.childLanes?TS(t,e,n):(Fn(Jn,Jn.current&1),t=$a(t,e,n),t!==null?t.sibling:null);Fn(Jn,Jn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ES(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Fn(Jn,Jn.current),i)break;return null;case 22:case 23:return e.lanes=0,wS(t,e,n)}return $a(t,e,n)}var AS,g0,bS,CS;AS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};g0=function(){};bS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fu(va.current);var o=null;switch(n){case"input":r=Vg(t,r),i=Vg(t,i),o=[];break;case"select":r=Zn({},r,{value:void 0}),i=Zn({},i,{value:void 0}),o=[];break;case"textarea":r=zg(t,r),i=zg(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=op)}Hg(n,i);var s;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jh.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jh.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Bn("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};CS=function(t,e,n,i){n!==i&&(e.flags|=4)};function gh(t,e){if(!Gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function gr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function gI(t,e,n){var i=e.pendingProps;switch(jv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(e),null;case 1:return so(e.type)&&sp(),gr(e),null;case 3:return i=e.stateNode,Rc(),zn(oo),zn(Cr),ey(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(hd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Os!==null&&(E0(Os),Os=null))),g0(t,e),gr(e),null;case 5:Xv(e);var r=fu(lf.current);if(n=e.type,t!==null&&e.stateNode!=null)bS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ke(166));return gr(e),null}if(t=fu(va.current),hd(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[pa]=e,i[sf]=o,t=(e.mode&1)!==0,n){case"dialog":Bn("cancel",i),Bn("close",i);break;case"iframe":case"object":case"embed":Bn("load",i);break;case"video":case"audio":for(r=0;r<bh.length;r++)Bn(bh[r],i);break;case"source":Bn("error",i);break;case"img":case"image":case"link":Bn("error",i),Bn("load",i);break;case"details":Bn("toggle",i);break;case"input":M_(i,o),Bn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bn("invalid",i);break;case"textarea":F_(i,o),Bn("invalid",i)}Hg(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&cd(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&cd(i.textContent,l,t),r=["children",""+l]):Jh.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Bn("scroll",i)}switch(n){case"input":nd(i),D_(i,o,!0);break;case"textarea":nd(i),O_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=op)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[pa]=e,t[sf]=i,AS(t,e,!1,!1),e.stateNode=t;e:{switch(s=Gg(n,i),n){case"dialog":Bn("cancel",t),Bn("close",t),r=i;break;case"iframe":case"object":case"embed":Bn("load",t),r=i;break;case"video":case"audio":for(r=0;r<bh.length;r++)Bn(bh[r],t);r=i;break;case"source":Bn("error",t),r=i;break;case"img":case"image":case"link":Bn("error",t),Bn("load",t),r=i;break;case"details":Bn("toggle",t),r=i;break;case"input":M_(t,i),r=Vg(t,i),Bn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Zn({},i,{value:void 0}),Bn("invalid",t);break;case"textarea":F_(t,i),r=zg(t,i),Bn("invalid",t);break;default:r=i}Hg(n,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?rx(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nx(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Yh(t,u):typeof u=="number"&&Yh(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jh.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Bn("scroll",t):u!=null&&Nv(t,o,u,s))}switch(n){case"input":nd(t),D_(t,i,!1);break;case"textarea":nd(t),O_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ul(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?yc(t,!!i.multiple,o,!1):i.defaultValue!=null&&yc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=op)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gr(e),null;case 6:if(t&&e.stateNode!=null)CS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ke(166));if(n=fu(lf.current),fu(va.current),hd(e)){if(i=e.stateNode,n=e.memoizedProps,i[pa]=e,(o=i.nodeValue!==n)&&(t=Ao,t!==null))switch(t.tag){case 3:cd(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cd(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[pa]=e,e.stateNode=i}return gr(e),null;case 13:if(zn(Jn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gn&&To!==null&&e.mode&1&&!(e.flags&128))jx(),kc(),e.flags|=98560,o=!1;else if(o=hd(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Ke(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ke(317));o[pa]=e}else kc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gr(e),o=!1}else Os!==null&&(E0(Os),Os=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Jn.current&1?Ii===0&&(Ii=3):fy())),e.updateQueue!==null&&(e.flags|=4),gr(e),null);case 4:return Rc(),g0(t,e),t===null&&rf(e.stateNode.containerInfo),gr(e),null;case 10:return Jv(e.type._context),gr(e),null;case 17:return so(e.type)&&sp(),gr(e),null;case 19:if(zn(Jn),o=e.memoizedState,o===null)return gr(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)gh(o,!1);else{if(Ii!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=dp(t),s!==null){for(e.flags|=128,gh(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fn(Jn,Jn.current&1|2),e.child}t=t.sibling}o.tail!==null&&ci()>Dc&&(e.flags|=128,i=!0,gh(o,!1),e.lanes=4194304)}else{if(!i)if(t=dp(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Gn)return gr(e),null}else 2*ci()-o.renderingStartTime>Dc&&n!==1073741824&&(e.flags|=128,i=!0,gh(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ci(),e.sibling=null,n=Jn.current,Fn(Jn,i?n&1|2:n&1),e):(gr(e),null);case 22:case 23:return hy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?So&1073741824&&(gr(e),e.subtreeFlags&6&&(e.flags|=8192)):gr(e),null;case 24:return null;case 25:return null}throw Error(Ke(156,e.tag))}function vI(t,e){switch(jv(e),e.tag){case 1:return so(e.type)&&sp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rc(),zn(oo),zn(Cr),ey(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xv(e),null;case 13:if(zn(Jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ke(340));kc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zn(Jn),null;case 4:return Rc(),null;case 10:return Jv(e.type._context),null;case 22:case 23:return hy(),null;case 24:return null;default:return null}}var pd=!1,Tr=!1,yI=typeof WeakSet=="function"?WeakSet:Set,ct=null;function dc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){oi(t,e,i)}else n.current=null}function v0(t,e,n){try{n()}catch(i){oi(t,e,i)}}var b1=!1;function _I(t,e){if(e0=np,t=Lx(),Hv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,g=t,y=null;t:for(;;){for(var w;g!==n||r!==0&&g.nodeType!==3||(l=s+r),g!==o||i!==0&&g.nodeType!==3||(u=s+i),g.nodeType===3&&(s+=g.nodeValue.length),(w=g.firstChild)!==null;)y=g,g=w;for(;;){if(g===t)break t;if(y===n&&++c===r&&(l=s),y===o&&++f===i&&(u=s),(w=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(t0={focusedElem:t,selectionRange:n},np=!1,ct=e;ct!==null;)if(e=ct,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ct=t;else for(;ct!==null;){e=ct;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,F=N.memoizedState,T=e.stateNode,I=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:Ms(e.type,R),F);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(G){oi(e,e.return,G)}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}return N=b1,b1=!1,N}function Oh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&v0(e,n,o)}r=r.next}while(r!==i)}}function Yp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function y0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IS(t){var e=t.alternate;e!==null&&(t.alternate=null,IS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pa],delete e[sf],delete e[r0],delete e[tI],delete e[nI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PS(t){return t.tag===5||t.tag===3||t.tag===4}function C1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=op));else if(i!==4&&(t=t.child,t!==null))for(_0(t,e,n),t=t.sibling;t!==null;)_0(t,e,n),t=t.sibling}function w0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(w0(t,e,n),t=t.sibling;t!==null;)w0(t,e,n),t=t.sibling}var tr=null,Fs=!1;function pl(t,e,n){for(n=n.child;n!==null;)NS(t,e,n),n=n.sibling}function NS(t,e,n){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(qp,n)}catch{}switch(n.tag){case 5:Tr||dc(n,e);case 6:var i=tr,r=Fs;tr=null,pl(t,e,n),tr=i,Fs=r,tr!==null&&(Fs?(t=tr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tr.removeChild(n.stateNode));break;case 18:tr!==null&&(Fs?(t=tr,n=n.stateNode,t.nodeType===8?ng(t.parentNode,n):t.nodeType===1&&ng(t,n),ef(t)):ng(tr,n.stateNode));break;case 4:i=tr,r=Fs,tr=n.stateNode.containerInfo,Fs=!0,pl(t,e,n),tr=i,Fs=r;break;case 0:case 11:case 14:case 15:if(!Tr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&v0(n,e,s),r=r.next}while(r!==i)}pl(t,e,n);break;case 1:if(!Tr&&(dc(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){oi(n,e,l)}pl(t,e,n);break;case 21:pl(t,e,n);break;case 22:n.mode&1?(Tr=(i=Tr)||n.memoizedState!==null,pl(t,e,n),Tr=i):pl(t,e,n);break;default:pl(t,e,n)}}function I1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yI),e.forEach(function(i){var r=II.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ks(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:tr=l.stateNode,Fs=!1;break e;case 3:tr=l.stateNode.containerInfo,Fs=!0;break e;case 4:tr=l.stateNode.containerInfo,Fs=!0;break e}l=l.return}if(tr===null)throw Error(Ke(160));NS(o,s,r),tr=null,Fs=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(c){oi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kS(e,t),e=e.sibling}function kS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ks(e,t),ca(t),i&4){try{Oh(3,t,t.return),Yp(3,t)}catch(R){oi(t,t.return,R)}try{Oh(5,t,t.return)}catch(R){oi(t,t.return,R)}}break;case 1:ks(e,t),ca(t),i&512&&n!==null&&dc(n,n.return);break;case 5:if(ks(e,t),ca(t),i&512&&n!==null&&dc(n,n.return),t.flags&32){var r=t.stateNode;try{Yh(r,"")}catch(R){oi(t,t.return,R)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Xw(r,o),Gg(l,s);var c=Gg(l,o);for(s=0;s<u.length;s+=2){var f=u[s],g=u[s+1];f==="style"?rx(r,g):f==="dangerouslySetInnerHTML"?nx(r,g):f==="children"?Yh(r,g):Nv(r,f,g,c)}switch(l){case"input":Bg(r,o);break;case"textarea":ex(r,o);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?yc(r,!!o.multiple,w,!1):y!==!!o.multiple&&(o.defaultValue!=null?yc(r,!!o.multiple,o.defaultValue,!0):yc(r,!!o.multiple,o.multiple?[]:"",!1))}r[sf]=o}catch(R){oi(t,t.return,R)}}break;case 6:if(ks(e,t),ca(t),i&4){if(t.stateNode===null)throw Error(Ke(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(R){oi(t,t.return,R)}}break;case 3:if(ks(e,t),ca(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ef(e.containerInfo)}catch(R){oi(t,t.return,R)}break;case 4:ks(e,t),ca(t);break;case 13:ks(e,t),ca(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(uy=ci())),i&4&&I1(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Tr=(c=Tr)||f,ks(e,t),Tr=c):ks(e,t),ca(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(ct=t,f=t.child;f!==null;){for(g=ct=f;ct!==null;){switch(y=ct,w=y.child,y.tag){case 0:case 11:case 14:case 15:Oh(4,y,y.return);break;case 1:dc(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(R){oi(i,n,R)}}break;case 5:dc(y,y.return);break;case 22:if(y.memoizedState!==null){N1(g);continue}}w!==null?(w.return=y,ct=w):N1(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{r=g.stateNode,c?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=g.stateNode,u=g.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ix("display",s))}catch(R){oi(t,t.return,R)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(R){oi(t,t.return,R)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ks(e,t),ca(t),i&4&&I1(t);break;case 21:break;default:ks(e,t),ca(t)}}function ca(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(PS(n)){var i=n;break e}n=n.return}throw Error(Ke(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Yh(r,""),i.flags&=-33);var o=C1(t);w0(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,l=C1(t);_0(t,l,s);break;default:throw Error(Ke(161))}}catch(u){oi(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wI(t,e,n){ct=t,LS(t)}function LS(t,e,n){for(var i=(t.mode&1)!==0;ct!==null;){var r=ct,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||pd;if(!s){var l=r.alternate,u=l!==null&&l.memoizedState!==null||Tr;l=pd;var c=Tr;if(pd=s,(Tr=u)&&!c)for(ct=r;ct!==null;)s=ct,u=s.child,s.tag===22&&s.memoizedState!==null?k1(r):u!==null?(u.return=s,ct=u):k1(r);for(;o!==null;)ct=o,LS(o),o=o.sibling;ct=r,pd=l,Tr=c}P1(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ct=o):P1(t)}}function P1(t){for(;ct!==null;){var e=ct;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tr||Yp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Tr)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ms(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&d1(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d1(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&ef(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}Tr||e.flags&512&&y0(e)}catch(y){oi(e,e.return,y)}}if(e===t){ct=null;break}if(n=e.sibling,n!==null){n.return=e.return,ct=n;break}ct=e.return}}function N1(t){for(;ct!==null;){var e=ct;if(e===t){ct=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ct=n;break}ct=e.return}}function k1(t){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yp(4,e)}catch(u){oi(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){oi(e,r,u)}}var o=e.return;try{y0(e)}catch(u){oi(e,o,u)}break;case 5:var s=e.return;try{y0(e)}catch(u){oi(e,s,u)}}}catch(u){oi(e,e.return,u)}if(e===t){ct=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ct=l;break}ct=e.return}}var xI=Math.ceil,gp=Qa.ReactCurrentDispatcher,ay=Qa.ReactCurrentOwner,as=Qa.ReactCurrentBatchConfig,un=0,Hi=null,yi=null,rr=0,So=0,pc=Kl(0),Ii=0,ff=null,Au=0,Zp=0,ly=0,Vh=null,io=null,uy=0,Dc=1/0,Va=null,vp=!1,x0=null,Ll=null,md=!1,Tl=null,yp=0,Bh=0,S0=null,zd=-1,qd=0;function Ur(){return un&6?ci():zd!==-1?zd:zd=ci()}function Rl(t){return t.mode&1?un&2&&rr!==0?rr&-rr:rI.transition!==null?(qd===0&&(qd=gx()),qd):(t=An,t!==0||(t=window.event,t=t===void 0?16:Tx(t.type)),t):1}function Us(t,e,n,i){if(50<Bh)throw Bh=0,S0=null,Error(Ke(185));Cf(t,n,i),(!(un&2)||t!==Hi)&&(t===Hi&&(!(un&2)&&(Zp|=n),Ii===4&&wl(t,rr)),ao(t,i),n===1&&un===0&&!(e.mode&1)&&(Dc=ci()+500,$p&&Jl()))}function ao(t,e){var n=t.callbackNode;rC(t,e);var i=tp(t,t===Hi?rr:0);if(i===0)n!==null&&U_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&U_(n),e===1)t.tag===0?iI(L1.bind(null,t)):qx(L1.bind(null,t)),XC(function(){!(un&6)&&Jl()}),n=null;else{switch(vx(i)){case 1:n=Dv;break;case 4:n=px;break;case 16:n=ep;break;case 536870912:n=mx;break;default:n=ep}n=US(n,RS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RS(t,e){if(zd=-1,qd=0,un&6)throw Error(Ke(327));var n=t.callbackNode;if(Tc()&&t.callbackNode!==n)return null;var i=tp(t,t===Hi?rr:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=_p(t,i);else{e=i;var r=un;un|=2;var o=DS();(Hi!==t||rr!==e)&&(Va=null,Dc=ci()+500,mu(t,e));do try{EI();break}catch(l){MS(t,l)}while(!0);Kv(),gp.current=o,un=r,yi!==null?e=0:(Hi=null,rr=0,e=Ii)}if(e!==0){if(e===2&&(r=Jg(t),r!==0&&(i=r,e=T0(t,r))),e===1)throw n=ff,mu(t,0),wl(t,i),ao(t,ci()),n;if(e===6)wl(t,i);else{if(r=t.current.alternate,!(i&30)&&!SI(r)&&(e=_p(t,i),e===2&&(o=Jg(t),o!==0&&(i=o,e=T0(t,o))),e===1))throw n=ff,mu(t,0),wl(t,i),ao(t,ci()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Ke(345));case 2:su(t,io,Va);break;case 3:if(wl(t,i),(i&130023424)===i&&(e=uy+500-ci(),10<e)){if(tp(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ur(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=i0(su.bind(null,t,io,Va),e);break}su(t,io,Va);break;case 4:if(wl(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-Bs(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=ci()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xI(i/1960))-i,10<i){t.timeoutHandle=i0(su.bind(null,t,io,Va),i);break}su(t,io,Va);break;case 5:su(t,io,Va);break;default:throw Error(Ke(329))}}}return ao(t,ci()),t.callbackNode===n?RS.bind(null,t):null}function T0(t,e){var n=Vh;return t.current.memoizedState.isDehydrated&&(mu(t,e).flags|=256),t=_p(t,e),t!==2&&(e=io,io=n,e!==null&&E0(e)),t}function E0(t){io===null?io=t:io.push.apply(io,t)}function SI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Hs(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wl(t,e){for(e&=~ly,e&=~Zp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bs(e),i=1<<n;t[n]=-1,e&=~i}}function L1(t){if(un&6)throw Error(Ke(327));Tc();var e=tp(t,0);if(!(e&1))return ao(t,ci()),null;var n=_p(t,e);if(t.tag!==0&&n===2){var i=Jg(t);i!==0&&(e=i,n=T0(t,i))}if(n===1)throw n=ff,mu(t,0),wl(t,e),ao(t,ci()),n;if(n===6)throw Error(Ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,su(t,io,Va),ao(t,ci()),null}function cy(t,e){var n=un;un|=1;try{return t(e)}finally{un=n,un===0&&(Dc=ci()+500,$p&&Jl())}}function bu(t){Tl!==null&&Tl.tag===0&&!(un&6)&&Tc();var e=un;un|=1;var n=as.transition,i=An;try{if(as.transition=null,An=1,t)return t()}finally{An=i,as.transition=n,un=e,!(un&6)&&Jl()}}function hy(){So=pc.current,zn(pc)}function mu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QC(n)),yi!==null)for(n=yi.return;n!==null;){var i=n;switch(jv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&sp();break;case 3:Rc(),zn(oo),zn(Cr),ey();break;case 5:Xv(i);break;case 4:Rc();break;case 13:zn(Jn);break;case 19:zn(Jn);break;case 10:Jv(i.type._context);break;case 22:case 23:hy()}n=n.return}if(Hi=t,yi=t=Ml(t.current,null),rr=So=e,Ii=0,ff=null,ly=Zp=Au=0,io=Vh=null,hu!==null){for(e=0;e<hu.length;e++)if(n=hu[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}hu=null}return t}function MS(t,e){do{var n=yi;try{if(Kv(),Vd.current=mp,pp){for(var i=Yn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}pp=!1}if(Eu=0,qi=Ai=Yn=null,Fh=!1,uf=0,ay.current=null,n===null||n.return===null){Ii=1,ff=e,yi=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=rr,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=_1(s);if(w!==null){w.flags&=-257,w1(w,s,l,o,e),w.mode&1&&y1(o,c,e),e=w,u=c;var N=e.updateQueue;if(N===null){var R=new Set;R.add(u),e.updateQueue=R}else N.add(u);break e}else{if(!(e&1)){y1(o,c,e),fy();break e}u=Error(Ke(426))}}else if(Gn&&l.mode&1){var F=_1(s);if(F!==null){!(F.flags&65536)&&(F.flags|=256),w1(F,s,l,o,e),Wv(Mc(u,l));break e}}o=u=Mc(u,l),Ii!==4&&(Ii=2),Vh===null?Vh=[o]:Vh.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var T=vS(o,u,e);f1(o,T);break e;case 1:l=u;var I=o.type,P=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Ll===null||!Ll.has(P)))){o.flags|=65536,e&=-e,o.lanes|=e;var G=yS(o,l,e);f1(o,G);break e}}o=o.return}while(o!==null)}OS(n)}catch(J){e=J,yi===n&&n!==null&&(yi=n=n.return);continue}break}while(!0)}function DS(){var t=gp.current;return gp.current=mp,t===null?mp:t}function fy(){(Ii===0||Ii===3||Ii===2)&&(Ii=4),Hi===null||!(Au&268435455)&&!(Zp&268435455)||wl(Hi,rr)}function _p(t,e){var n=un;un|=2;var i=DS();(Hi!==t||rr!==e)&&(Va=null,mu(t,e));do try{TI();break}catch(r){MS(t,r)}while(!0);if(Kv(),un=n,gp.current=i,yi!==null)throw Error(Ke(261));return Hi=null,rr=0,Ii}function TI(){for(;yi!==null;)FS(yi)}function EI(){for(;yi!==null&&!Jb();)FS(yi)}function FS(t){var e=BS(t.alternate,t,So);t.memoizedProps=t.pendingProps,e===null?OS(t):yi=e,ay.current=null}function OS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vI(n,e),n!==null){n.flags&=32767,yi=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ii=6,yi=null;return}}else if(n=gI(n,e,So),n!==null){yi=n;return}if(e=e.sibling,e!==null){yi=e;return}yi=e=t}while(e!==null);Ii===0&&(Ii=5)}function su(t,e,n){var i=An,r=as.transition;try{as.transition=null,An=1,AI(t,e,n,i)}finally{as.transition=r,An=i}return null}function AI(t,e,n,i){do Tc();while(Tl!==null);if(un&6)throw Error(Ke(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ke(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(oC(t,o),t===Hi&&(yi=Hi=null,rr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||md||(md=!0,US(ep,function(){return Tc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=as.transition,as.transition=null;var s=An;An=1;var l=un;un|=4,ay.current=null,_I(t,n),kS(n,t),jC(t0),np=!!e0,t0=e0=null,t.current=n,wI(n),Yb(),un=l,An=s,as.transition=o}else t.current=n;if(md&&(md=!1,Tl=t,yp=r),o=t.pendingLanes,o===0&&(Ll=null),Xb(n.stateNode),ao(t,ci()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(vp)throw vp=!1,t=x0,x0=null,t;return yp&1&&t.tag!==0&&Tc(),o=t.pendingLanes,o&1?t===S0?Bh++:(Bh=0,S0=t):Bh=0,Jl(),null}function Tc(){if(Tl!==null){var t=vx(yp),e=as.transition,n=An;try{if(as.transition=null,An=16>t?16:t,Tl===null)var i=!1;else{if(t=Tl,Tl=null,yp=0,un&6)throw Error(Ke(331));var r=un;for(un|=4,ct=t.current;ct!==null;){var o=ct,s=o.child;if(ct.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(ct=c;ct!==null;){var f=ct;switch(f.tag){case 0:case 11:case 15:Oh(8,f,o)}var g=f.child;if(g!==null)g.return=f,ct=g;else for(;ct!==null;){f=ct;var y=f.sibling,w=f.return;if(IS(f),f===c){ct=null;break}if(y!==null){y.return=w,ct=y;break}ct=w}}}var N=o.alternate;if(N!==null){var R=N.child;if(R!==null){N.child=null;do{var F=R.sibling;R.sibling=null,R=F}while(R!==null)}}ct=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ct=s;else e:for(;ct!==null;){if(o=ct,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Oh(9,o,o.return)}var T=o.sibling;if(T!==null){T.return=o.return,ct=T;break e}ct=o.return}}var I=t.current;for(ct=I;ct!==null;){s=ct;var P=s.child;if(s.subtreeFlags&2064&&P!==null)P.return=s,ct=P;else e:for(s=I;ct!==null;){if(l=ct,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yp(9,l)}}catch(J){oi(l,l.return,J)}if(l===s){ct=null;break e}var G=l.sibling;if(G!==null){G.return=l.return,ct=G;break e}ct=l.return}}if(un=r,Jl(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(qp,t)}catch{}i=!0}return i}finally{An=n,as.transition=e}}return!1}function R1(t,e,n){e=Mc(n,e),e=vS(t,e,1),t=kl(t,e,1),e=Ur(),t!==null&&(Cf(t,1,e),ao(t,e))}function oi(t,e,n){if(t.tag===3)R1(t,t,n);else for(;e!==null;){if(e.tag===3){R1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ll===null||!Ll.has(i))){t=Mc(n,t),t=yS(e,t,1),e=kl(e,t,1),t=Ur(),e!==null&&(Cf(e,1,t),ao(e,t));break}}e=e.return}}function bI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ur(),t.pingedLanes|=t.suspendedLanes&n,Hi===t&&(rr&n)===n&&(Ii===4||Ii===3&&(rr&130023424)===rr&&500>ci()-uy?mu(t,0):ly|=n),ao(t,e)}function VS(t,e){e===0&&(t.mode&1?(e=od,od<<=1,!(od&130023424)&&(od=4194304)):e=1);var n=Ur();t=Wa(t,e),t!==null&&(Cf(t,e,n),ao(t,n))}function CI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VS(t,n)}function II(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ke(314))}i!==null&&i.delete(e),VS(t,n)}var BS;BS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||oo.current)ro=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ro=!1,mI(t,e,n);ro=!!(t.flags&131072)}else ro=!1,Gn&&e.flags&1048576&&Hx(e,up,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ud(t,e),t=e.pendingProps;var r=Nc(e,Cr.current);Sc(e,n),r=ny(null,e,i,t,r,n);var o=iy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,so(i)?(o=!0,ap(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Zv(e),r.updater=Jp,e.stateNode=r,r._reactInternals=e,c0(e,i,t,n),e=d0(null,e,i,!0,o,n)):(e.tag=0,Gn&&o&&Gv(e),Br(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ud(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=NI(i),t=Ms(i,t),r){case 0:e=f0(null,e,i,t,n);break e;case 1:e=T1(null,e,i,t,n);break e;case 11:e=x1(null,e,i,t,n);break e;case 14:e=S1(null,e,i,Ms(i.type,t),n);break e}throw Error(Ke(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ms(i,r),f0(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ms(i,r),T1(t,e,i,r,n);case 3:e:{if(SS(e),t===null)throw Error(Ke(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Jx(t,e),fp(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Mc(Error(Ke(423)),e),e=E1(t,e,i,n,r);break e}else if(i!==r){r=Mc(Error(Ke(424)),e),e=E1(t,e,i,n,r);break e}else for(To=Nl(e.stateNode.containerInfo.firstChild),Ao=e,Gn=!0,Os=null,n=$x(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kc(),i===r){e=$a(t,e,n);break e}Br(t,e,i,n)}e=e.child}return e;case 5:return Yx(e),t===null&&a0(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,n0(i,r)?s=null:o!==null&&n0(i,o)&&(e.flags|=32),xS(t,e),Br(t,e,s,n),e.child;case 6:return t===null&&a0(e),null;case 13:return TS(t,e,n);case 4:return Qv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Lc(e,null,i,n):Br(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ms(i,r),x1(t,e,i,r,n);case 7:return Br(t,e,e.pendingProps,n),e.child;case 8:return Br(t,e,e.pendingProps.children,n),e.child;case 12:return Br(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,Fn(cp,i._currentValue),i._currentValue=s,o!==null)if(Hs(o.value,s)){if(o.children===r.children&&!oo.current){e=$a(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=qa(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),l0(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Ke(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),l0(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Br(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Sc(e,n),r=cs(r),i=i(r),e.flags|=1,Br(t,e,i,n),e.child;case 14:return i=e.type,r=Ms(i,e.pendingProps),r=Ms(i.type,r),S1(t,e,i,r,n);case 15:return _S(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ms(i,r),Ud(t,e),e.tag=1,so(i)?(t=!0,ap(e)):t=!1,Sc(e,n),gS(e,i,r),c0(e,i,r,n),d0(null,e,i,!0,t,n);case 19:return ES(t,e,n);case 22:return wS(t,e,n)}throw Error(Ke(156,e.tag))};function US(t,e){return dx(t,e)}function PI(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(t,e,n,i){return new PI(t,e,n,i)}function dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NI(t){if(typeof t=="function")return dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lv)return 11;if(t===Rv)return 14}return 2}function Ml(t,e){var n=t.alternate;return n===null?(n=ss(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hd(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")dy(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case rc:return gu(n.children,r,o,e);case kv:s=8,r|=8;break;case Mg:return t=ss(12,n,e,r|2),t.elementType=Mg,t.lanes=o,t;case Dg:return t=ss(13,n,e,r),t.elementType=Dg,t.lanes=o,t;case Fg:return t=ss(19,n,e,r),t.elementType=Fg,t.lanes=o,t;case Yw:return Qp(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kw:s=10;break e;case Jw:s=9;break e;case Lv:s=11;break e;case Rv:s=14;break e;case vl:s=16,i=null;break e}throw Error(Ke(130,t==null?t:typeof t,""))}return e=ss(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function gu(t,e,n,i){return t=ss(7,t,i,e),t.lanes=n,t}function Qp(t,e,n,i){return t=ss(22,t,i,e),t.elementType=Yw,t.lanes=n,t.stateNode={isHidden:!1},t}function cg(t,e,n){return t=ss(6,t,null,e),t.lanes=n,t}function hg(t,e,n){return e=ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kI(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function py(t,e,n,i,r,o,s,l,u){return t=new kI(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ss(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zv(o),t}function LI(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ic,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function zS(t){if(!t)return zl;t=t._reactInternals;e:{if(ku(t)!==t||t.tag!==1)throw Error(Ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(so(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ke(171))}if(t.tag===1){var n=t.type;if(so(n))return zx(t,n,e)}return e}function qS(t,e,n,i,r,o,s,l,u){return t=py(n,i,!0,t,r,o,s,l,u),t.context=zS(null),n=t.current,i=Ur(),r=Rl(n),o=qa(i,r),o.callback=e??null,kl(n,o,r),t.current.lanes=r,Cf(t,r,i),ao(t,i),t}function Xp(t,e,n,i){var r=e.current,o=Ur(),s=Rl(r);return n=zS(n),e.context===null?e.context=n:e.pendingContext=n,e=qa(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=kl(r,e,s),t!==null&&(Us(t,r,s,o),Od(t,r,s)),s}function wp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function M1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function my(t,e){M1(t,e),(t=t.alternate)&&M1(t,e)}function RI(){return null}var HS=typeof reportError=="function"?reportError:function(t){console.error(t)};function gy(t){this._internalRoot=t}em.prototype.render=gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ke(409));Xp(t,e,null,null)};em.prototype.unmount=gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bu(function(){Xp(null,t,null,null)}),e[ja]=null}};function em(t){this._internalRoot=t}em.prototype.unstable_scheduleHydration=function(t){if(t){var e=wx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_l.length&&e!==0&&e<_l[n].priority;n++);_l.splice(n,0,t),n===0&&Sx(t)}};function vy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D1(){}function MI(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var c=wp(s);o.call(c)}}var s=qS(e,i,t,0,null,!1,!1,"",D1);return t._reactRootContainer=s,t[ja]=s.current,rf(t.nodeType===8?t.parentNode:t),bu(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var c=wp(u);l.call(c)}}var u=py(t,0,!1,null,null,!1,!1,"",D1);return t._reactRootContainer=u,t[ja]=u.current,rf(t.nodeType===8?t.parentNode:t),bu(function(){Xp(e,u,n,i)}),u}function nm(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var l=r;r=function(){var u=wp(s);l.call(u)}}Xp(e,s,t,r)}else s=MI(n,e,t,r,i);return wp(s)}yx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ah(e.pendingLanes);n!==0&&(Fv(e,n|1),ao(e,ci()),!(un&6)&&(Dc=ci()+500,Jl()))}break;case 13:bu(function(){var i=Wa(t,1);if(i!==null){var r=Ur();Us(i,t,1,r)}}),my(t,1)}};Ov=function(t){if(t.tag===13){var e=Wa(t,134217728);if(e!==null){var n=Ur();Us(e,t,134217728,n)}my(t,134217728)}};_x=function(t){if(t.tag===13){var e=Rl(t),n=Wa(t,e);if(n!==null){var i=Ur();Us(n,t,e,i)}my(t,e)}};wx=function(){return An};xx=function(t,e){var n=An;try{return An=t,e()}finally{An=n}};Wg=function(t,e,n){switch(e){case"input":if(Bg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Wp(i);if(!r)throw Error(Ke(90));Qw(i),Bg(i,r)}}}break;case"textarea":ex(t,n);break;case"select":e=n.value,e!=null&&yc(t,!!n.multiple,e,!1)}};ax=cy;lx=bu;var DI={usingClientEntryPoint:!1,Events:[Pf,lc,Wp,ox,sx,cy]},vh={findFiberByHostInstance:cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FI={bundleType:vh.bundleType,version:vh.version,rendererPackageName:vh.rendererPackageName,rendererConfig:vh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hx(t),t===null?null:t.stateNode},findFiberByHostInstance:vh.findFiberByHostInstance||RI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{qp=gd.inject(FI),ga=gd}catch{}}Co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DI;Co.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vy(e))throw Error(Ke(200));return LI(t,e,null,n)};Co.createRoot=function(t,e){if(!vy(t))throw Error(Ke(299));var n=!1,i="",r=HS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=py(t,1,!1,null,null,n,!1,i,r),t[ja]=e.current,rf(t.nodeType===8?t.parentNode:t),new gy(e)};Co.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ke(188)):(t=Object.keys(t).join(","),Error(Ke(268,t)));return t=hx(e),t=t===null?null:t.stateNode,t};Co.flushSync=function(t){return bu(t)};Co.hydrate=function(t,e,n){if(!tm(e))throw Error(Ke(200));return nm(null,t,e,!0,n)};Co.hydrateRoot=function(t,e,n){if(!vy(t))throw Error(Ke(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=HS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=qS(e,null,t,1,n??null,r,!1,o,s),t[ja]=e.current,rf(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new em(e)};Co.render=function(t,e,n){if(!tm(e))throw Error(Ke(200));return nm(null,t,e,!1,n)};Co.unmountComponentAtNode=function(t){if(!tm(t))throw Error(Ke(40));return t._reactRootContainer?(bu(function(){nm(null,null,t,!1,function(){t._reactRootContainer=null,t[ja]=null})}),!0):!1};Co.unstable_batchedUpdates=cy;Co.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!tm(n))throw Error(Ke(200));if(t==null||t._reactInternals===void 0)throw Error(Ke(38));return nm(t,e,n,!1,i)};Co.version="18.3.1-next-f1338f8080-20240426";function GS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GS)}catch(t){console.error(t)}}GS(),Gw.exports=Co;var OI=Gw.exports,F1=OI;Lg.createRoot=F1.createRoot,Lg.hydrateRoot=F1.hydrateRoot;var O1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},VI=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],s=t[n++],l=t[n++],u=((r&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},WS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],s=r+1<t.length,l=s?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,f=o>>2,g=(o&3)<<4|l>>4;let y=(l&15)<<2|c>>6,w=c&63;u||(w=64,s||(y=64)),i.push(n[f],n[g],n[y],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||l==null||c==null||g==null)throw new BI;const y=o<<2|l>>4;if(i.push(y),c!==64){const w=l<<4&240|c>>2;if(i.push(w),g!==64){const N=c<<6&192|g;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(t){const e=jS(t);return WS.encodeByteArray(e,!0)},xp=function(t){return UI(t).replace(/\./g,"")},zI=function(t){try{return WS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=()=>qI().__FIREBASE_DEFAULTS__,GI=()=>{if(typeof process>"u"||typeof O1>"u")return;const t=O1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zI(t[1]);return e&&JSON.parse(e)},yy=()=>{try{return HI()||GI()||jI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WI=t=>{var e,n;return(n=(e=yy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$I=t=>{const e=WI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},$S=()=>{var t;return(t=yy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xp(JSON.stringify(n)),xp(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZI(){var t;const e=(t=yy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return!ZI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XI(){try{return typeof indexedDB=="object"}catch{return!1}}function eP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="FirebaseError";class $c extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tP,Object.setPrototypeOf(this,$c.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,KS.prototype.create)}}class KS{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?nP(o,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new $c(r,l,i)}}function nP(t,e){return t.replace(iP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const iP=/\{\$([^}]+)}/g;function A0(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],s=e[r];if(V1(o)&&V1(s)){if(!A0(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function V1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){return t&&t._delegate?t._delegate:t}class pf{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new KI;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sP(e))try{this.getOrInitializeService({instanceIdentifier:au})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=au){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=au){return this.instances.has(e)}getOptions(e=au){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&s.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=au){return this.component?this.component.multipleInstances?e:au:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oP(t){return t===au?void 0:t}function sP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ln||(ln={}));const lP={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},uP=ln.INFO,cP={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},hP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=cP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class JS{constructor(e){this.name=e,this._logLevel=uP,this._logHandler=hP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...e),this._logHandler(this,ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...e),this._logHandler(this,ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ln.INFO,...e),this._logHandler(this,ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ln.WARN,...e),this._logHandler(this,ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...e),this._logHandler(this,ln.ERROR,...e)}}const fP=(t,e)=>e.some(n=>t instanceof n);let B1,U1;function dP(){return B1||(B1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pP(){return U1||(U1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YS=new WeakMap,b0=new WeakMap,ZS=new WeakMap,fg=new WeakMap,_y=new WeakMap;function mP(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Dl(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&YS.set(n,t)}).catch(()=>{}),_y.set(e,t),e}function gP(t){if(b0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});b0.set(t,e)}let C0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return b0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vP(t){C0=t(C0)}function yP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(dg(this),e,...n);return ZS.set(i,e.sort?e.sort():[e]),Dl(i)}:pP().includes(t)?function(...e){return t.apply(dg(this),e),Dl(YS.get(this))}:function(...e){return Dl(t.apply(dg(this),e))}}function _P(t){return typeof t=="function"?yP(t):(t instanceof IDBTransaction&&gP(t),fP(t,dP())?new Proxy(t,C0):t)}function Dl(t){if(t instanceof IDBRequest)return mP(t);if(fg.has(t))return fg.get(t);const e=_P(t);return e!==t&&(fg.set(t,e),_y.set(e,t)),e}const dg=t=>_y.get(t);function wP(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),l=Dl(s);return i&&s.addEventListener("upgradeneeded",u=>{i(Dl(s.result),u.oldVersion,u.newVersion,Dl(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const xP=["get","getKey","getAll","getAllKeys","count"],SP=["put","add","delete","clear"],pg=new Map;function z1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pg.get(e))return pg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=SP.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xP.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,r?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return pg.set(e,o),o}vP(t=>({...t,get:(e,n,i)=>z1(e,n)||t.get(e,n,i),has:(e,n)=>!!z1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EP(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function EP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const I0="@firebase/app",q1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new JS("@firebase/app"),AP="@firebase/app-compat",bP="@firebase/analytics-compat",CP="@firebase/analytics",IP="@firebase/app-check-compat",PP="@firebase/app-check",NP="@firebase/auth",kP="@firebase/auth-compat",LP="@firebase/database",RP="@firebase/data-connect",MP="@firebase/database-compat",DP="@firebase/functions",FP="@firebase/functions-compat",OP="@firebase/installations",VP="@firebase/installations-compat",BP="@firebase/messaging",UP="@firebase/messaging-compat",zP="@firebase/performance",qP="@firebase/performance-compat",HP="@firebase/remote-config",GP="@firebase/remote-config-compat",jP="@firebase/storage",WP="@firebase/storage-compat",$P="@firebase/firestore",KP="@firebase/vertexai-preview",JP="@firebase/firestore-compat",YP="firebase",ZP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="[DEFAULT]",QP={[I0]:"fire-core",[AP]:"fire-core-compat",[CP]:"fire-analytics",[bP]:"fire-analytics-compat",[PP]:"fire-app-check",[IP]:"fire-app-check-compat",[NP]:"fire-auth",[kP]:"fire-auth-compat",[LP]:"fire-rtdb",[RP]:"fire-data-connect",[MP]:"fire-rtdb-compat",[DP]:"fire-fn",[FP]:"fire-fn-compat",[OP]:"fire-iid",[VP]:"fire-iid-compat",[BP]:"fire-fcm",[UP]:"fire-fcm-compat",[zP]:"fire-perf",[qP]:"fire-perf-compat",[HP]:"fire-rc",[GP]:"fire-rc-compat",[jP]:"fire-gcs",[WP]:"fire-gcs-compat",[$P]:"fire-fst",[JP]:"fire-fst-compat",[KP]:"fire-vertex","fire-js":"fire-js",[YP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Map,XP=new Map,N0=new Map;function H1(t,e){try{t.container.addComponent(e)}catch(n){Ka.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sp(t){const e=t.name;if(N0.has(e))return Ka.debug(`There were multiple attempts to register component ${e}.`),!1;N0.set(e,t);for(const n of mf.values())H1(n,t);for(const n of XP.values())H1(n,t);return!0}function eN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fl=new KS("app","Firebase",tN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=ZP;function QS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:P0,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Fl.create("bad-app-name",{appName:String(r)});if(n||(n=$S()),!n)throw Fl.create("no-options");const o=mf.get(r);if(o){if(A0(n,o.options)&&A0(i,o.config))return o;throw Fl.create("duplicate-app",{appName:r})}const s=new aP(r);for(const u of N0.values())s.addComponent(u);const l=new nN(n,i,s);return mf.set(r,l),l}function rN(t=P0){const e=mf.get(t);if(!e&&t===P0&&$S())return QS();if(!e)throw Fl.create("no-app",{appName:t});return e}function oN(){return Array.from(mf.values())}function Ec(t,e,n){var i;let r=(i=QP[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ka.warn(l.join(" "));return}Sp(new pf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="firebase-heartbeat-database",aN=1,gf="firebase-heartbeat-store";let mg=null;function XS(){return mg||(mg=wP(sN,aN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fl.create("idb-open",{originalErrorMessage:t.message})})),mg}async function lN(t){try{const n=(await XS()).transaction(gf),i=await n.objectStore(gf).get(eT(t));return await n.done,i}catch(e){if(e instanceof $c)Ka.warn(e.message);else{const n=Fl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ka.warn(n.message)}}}async function G1(t,e){try{const i=(await XS()).transaction(gf,"readwrite");await i.objectStore(gf).put(e,eT(t)),await i.done}catch(n){if(n instanceof $c)Ka.warn(n.message);else{const i=Fl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ka.warn(i.message)}}}function eT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=1024,cN=30*24*60*60*1e3;class hN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=j1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=cN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ka.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j1(),{heartbeatsToSend:i,unsentEntries:r}=fN(this._heartbeatsCache.heartbeats),o=xp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ka.warn(n),""}}}function j1(){return new Date().toISOString().substring(0,10)}function fN(t,e=uN){const n=[];let i=t.slice();for(const r of t){const o=n.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),W1(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),W1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XI()?eP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return G1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return G1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function W1(t){return xp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){Sp(new pf("platform-logger",e=>new TP(e),"PRIVATE")),Sp(new pf("heartbeat",e=>new hN(e),"PRIVATE")),Ec(I0,q1,t),Ec(I0,q1,"esm2017"),Ec("fire-js","")}pN("");var mN="firebase",gN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ec(mN,gN,"app");var $1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vu,tT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,C){function O(){}O.prototype=C.prototype,D.D=C.prototype,D.prototype=new O,D.prototype.constructor=D,D.C=function(H,k,b){for(var V=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)V[ie-2]=arguments[ie];return C.prototype[k].apply(H,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,C,O){O||(O=0);var H=Array(16);if(typeof C=="string")for(var k=0;16>k;++k)H[k]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(k=0;16>k;++k)H[k]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=D.g[0],O=D.g[1],k=D.g[2];var b=D.g[3],V=C+(b^O&(k^b))+H[0]+3614090360&4294967295;C=O+(V<<7&4294967295|V>>>25),V=b+(k^C&(O^k))+H[1]+3905402710&4294967295,b=C+(V<<12&4294967295|V>>>20),V=k+(O^b&(C^O))+H[2]+606105819&4294967295,k=b+(V<<17&4294967295|V>>>15),V=O+(C^k&(b^C))+H[3]+3250441966&4294967295,O=k+(V<<22&4294967295|V>>>10),V=C+(b^O&(k^b))+H[4]+4118548399&4294967295,C=O+(V<<7&4294967295|V>>>25),V=b+(k^C&(O^k))+H[5]+1200080426&4294967295,b=C+(V<<12&4294967295|V>>>20),V=k+(O^b&(C^O))+H[6]+2821735955&4294967295,k=b+(V<<17&4294967295|V>>>15),V=O+(C^k&(b^C))+H[7]+4249261313&4294967295,O=k+(V<<22&4294967295|V>>>10),V=C+(b^O&(k^b))+H[8]+1770035416&4294967295,C=O+(V<<7&4294967295|V>>>25),V=b+(k^C&(O^k))+H[9]+2336552879&4294967295,b=C+(V<<12&4294967295|V>>>20),V=k+(O^b&(C^O))+H[10]+4294925233&4294967295,k=b+(V<<17&4294967295|V>>>15),V=O+(C^k&(b^C))+H[11]+2304563134&4294967295,O=k+(V<<22&4294967295|V>>>10),V=C+(b^O&(k^b))+H[12]+1804603682&4294967295,C=O+(V<<7&4294967295|V>>>25),V=b+(k^C&(O^k))+H[13]+4254626195&4294967295,b=C+(V<<12&4294967295|V>>>20),V=k+(O^b&(C^O))+H[14]+2792965006&4294967295,k=b+(V<<17&4294967295|V>>>15),V=O+(C^k&(b^C))+H[15]+1236535329&4294967295,O=k+(V<<22&4294967295|V>>>10),V=C+(k^b&(O^k))+H[1]+4129170786&4294967295,C=O+(V<<5&4294967295|V>>>27),V=b+(O^k&(C^O))+H[6]+3225465664&4294967295,b=C+(V<<9&4294967295|V>>>23),V=k+(C^O&(b^C))+H[11]+643717713&4294967295,k=b+(V<<14&4294967295|V>>>18),V=O+(b^C&(k^b))+H[0]+3921069994&4294967295,O=k+(V<<20&4294967295|V>>>12),V=C+(k^b&(O^k))+H[5]+3593408605&4294967295,C=O+(V<<5&4294967295|V>>>27),V=b+(O^k&(C^O))+H[10]+38016083&4294967295,b=C+(V<<9&4294967295|V>>>23),V=k+(C^O&(b^C))+H[15]+3634488961&4294967295,k=b+(V<<14&4294967295|V>>>18),V=O+(b^C&(k^b))+H[4]+3889429448&4294967295,O=k+(V<<20&4294967295|V>>>12),V=C+(k^b&(O^k))+H[9]+568446438&4294967295,C=O+(V<<5&4294967295|V>>>27),V=b+(O^k&(C^O))+H[14]+3275163606&4294967295,b=C+(V<<9&4294967295|V>>>23),V=k+(C^O&(b^C))+H[3]+4107603335&4294967295,k=b+(V<<14&4294967295|V>>>18),V=O+(b^C&(k^b))+H[8]+1163531501&4294967295,O=k+(V<<20&4294967295|V>>>12),V=C+(k^b&(O^k))+H[13]+2850285829&4294967295,C=O+(V<<5&4294967295|V>>>27),V=b+(O^k&(C^O))+H[2]+4243563512&4294967295,b=C+(V<<9&4294967295|V>>>23),V=k+(C^O&(b^C))+H[7]+1735328473&4294967295,k=b+(V<<14&4294967295|V>>>18),V=O+(b^C&(k^b))+H[12]+2368359562&4294967295,O=k+(V<<20&4294967295|V>>>12),V=C+(O^k^b)+H[5]+4294588738&4294967295,C=O+(V<<4&4294967295|V>>>28),V=b+(C^O^k)+H[8]+2272392833&4294967295,b=C+(V<<11&4294967295|V>>>21),V=k+(b^C^O)+H[11]+1839030562&4294967295,k=b+(V<<16&4294967295|V>>>16),V=O+(k^b^C)+H[14]+4259657740&4294967295,O=k+(V<<23&4294967295|V>>>9),V=C+(O^k^b)+H[1]+2763975236&4294967295,C=O+(V<<4&4294967295|V>>>28),V=b+(C^O^k)+H[4]+1272893353&4294967295,b=C+(V<<11&4294967295|V>>>21),V=k+(b^C^O)+H[7]+4139469664&4294967295,k=b+(V<<16&4294967295|V>>>16),V=O+(k^b^C)+H[10]+3200236656&4294967295,O=k+(V<<23&4294967295|V>>>9),V=C+(O^k^b)+H[13]+681279174&4294967295,C=O+(V<<4&4294967295|V>>>28),V=b+(C^O^k)+H[0]+3936430074&4294967295,b=C+(V<<11&4294967295|V>>>21),V=k+(b^C^O)+H[3]+3572445317&4294967295,k=b+(V<<16&4294967295|V>>>16),V=O+(k^b^C)+H[6]+76029189&4294967295,O=k+(V<<23&4294967295|V>>>9),V=C+(O^k^b)+H[9]+3654602809&4294967295,C=O+(V<<4&4294967295|V>>>28),V=b+(C^O^k)+H[12]+3873151461&4294967295,b=C+(V<<11&4294967295|V>>>21),V=k+(b^C^O)+H[15]+530742520&4294967295,k=b+(V<<16&4294967295|V>>>16),V=O+(k^b^C)+H[2]+3299628645&4294967295,O=k+(V<<23&4294967295|V>>>9),V=C+(k^(O|~b))+H[0]+4096336452&4294967295,C=O+(V<<6&4294967295|V>>>26),V=b+(O^(C|~k))+H[7]+1126891415&4294967295,b=C+(V<<10&4294967295|V>>>22),V=k+(C^(b|~O))+H[14]+2878612391&4294967295,k=b+(V<<15&4294967295|V>>>17),V=O+(b^(k|~C))+H[5]+4237533241&4294967295,O=k+(V<<21&4294967295|V>>>11),V=C+(k^(O|~b))+H[12]+1700485571&4294967295,C=O+(V<<6&4294967295|V>>>26),V=b+(O^(C|~k))+H[3]+2399980690&4294967295,b=C+(V<<10&4294967295|V>>>22),V=k+(C^(b|~O))+H[10]+4293915773&4294967295,k=b+(V<<15&4294967295|V>>>17),V=O+(b^(k|~C))+H[1]+2240044497&4294967295,O=k+(V<<21&4294967295|V>>>11),V=C+(k^(O|~b))+H[8]+1873313359&4294967295,C=O+(V<<6&4294967295|V>>>26),V=b+(O^(C|~k))+H[15]+4264355552&4294967295,b=C+(V<<10&4294967295|V>>>22),V=k+(C^(b|~O))+H[6]+2734768916&4294967295,k=b+(V<<15&4294967295|V>>>17),V=O+(b^(k|~C))+H[13]+1309151649&4294967295,O=k+(V<<21&4294967295|V>>>11),V=C+(k^(O|~b))+H[4]+4149444226&4294967295,C=O+(V<<6&4294967295|V>>>26),V=b+(O^(C|~k))+H[11]+3174756917&4294967295,b=C+(V<<10&4294967295|V>>>22),V=k+(C^(b|~O))+H[2]+718787259&4294967295,k=b+(V<<15&4294967295|V>>>17),V=O+(b^(k|~C))+H[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+b&4294967295}i.prototype.u=function(D,C){C===void 0&&(C=D.length);for(var O=C-this.blockSize,H=this.B,k=this.h,b=0;b<C;){if(k==0)for(;b<=O;)r(this,D,b),b+=this.blockSize;if(typeof D=="string"){for(;b<C;)if(H[k++]=D.charCodeAt(b++),k==this.blockSize){r(this,H),k=0;break}}else for(;b<C;)if(H[k++]=D[b++],k==this.blockSize){r(this,H),k=0;break}}this.h=k,this.o+=C},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;var O=8*this.o;for(C=D.length-8;C<D.length;++C)D[C]=O&255,O/=256;for(this.u(D),D=Array(16),C=O=0;4>C;++C)for(var H=0;32>H;H+=8)D[O++]=this.g[C]>>>H&255;return D};function o(D,C){var O=l;return Object.prototype.hasOwnProperty.call(O,D)?O[D]:O[D]=C(D)}function s(D,C){this.h=C;for(var O=[],H=!0,k=D.length-1;0<=k;k--){var b=D[k]|0;H&&b==C||(O[k]=b,H=!1)}this.g=O}var l={};function u(D){return-128<=D&&128>D?o(D,function(C){return new s([C|0],0>C?-1:0)}):new s([D|0],0>D?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return F(c(-D));for(var C=[],O=1,H=0;D>=O;H++)C[H]=D/O|0,O*=4294967296;return new s(C,0)}function f(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return F(f(D.substring(1),C));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=c(Math.pow(C,8)),H=g,k=0;k<D.length;k+=8){var b=Math.min(8,D.length-k),V=parseInt(D.substring(k,k+b),C);8>b?(b=c(Math.pow(C,b)),H=H.j(b).add(c(V))):(H=H.j(O),H=H.add(c(V)))}return H}var g=u(0),y=u(1),w=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-F(this).m();for(var D=0,C=1,O=0;O<this.g.length;O++){var H=this.i(O);D+=(0<=H?H:4294967296+H)*C,C*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(R(this))return"-"+F(this).toString(D);for(var C=c(Math.pow(D,6)),O=this,H="";;){var k=G(O,C).g;O=T(O,k.j(C));var b=((0<O.g.length?O.g[0]:O.h)>>>0).toString(D);if(O=k,N(O))return b+H;for(;6>b.length;)b="0"+b;H=b+H}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(var C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function R(D){return D.h==-1}t.l=function(D){return D=T(this,D),R(D)?-1:N(D)?0:1};function F(D){for(var C=D.g.length,O=[],H=0;H<C;H++)O[H]=~D.g[H];return new s(O,~D.h).add(y)}t.abs=function(){return R(this)?F(this):this},t.add=function(D){for(var C=Math.max(this.g.length,D.g.length),O=[],H=0,k=0;k<=C;k++){var b=H+(this.i(k)&65535)+(D.i(k)&65535),V=(b>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);H=V>>>16,b&=65535,V&=65535,O[k]=V<<16|b}return new s(O,O[O.length-1]&-2147483648?-1:0)};function T(D,C){return D.add(F(C))}t.j=function(D){if(N(this)||N(D))return g;if(R(this))return R(D)?F(this).j(F(D)):F(F(this).j(D));if(R(D))return F(this.j(F(D)));if(0>this.l(w)&&0>D.l(w))return c(this.m()*D.m());for(var C=this.g.length+D.g.length,O=[],H=0;H<2*C;H++)O[H]=0;for(H=0;H<this.g.length;H++)for(var k=0;k<D.g.length;k++){var b=this.i(H)>>>16,V=this.i(H)&65535,ie=D.i(k)>>>16,_e=D.i(k)&65535;O[2*H+2*k]+=V*_e,I(O,2*H+2*k),O[2*H+2*k+1]+=b*_e,I(O,2*H+2*k+1),O[2*H+2*k+1]+=V*ie,I(O,2*H+2*k+1),O[2*H+2*k+2]+=b*ie,I(O,2*H+2*k+2)}for(H=0;H<C;H++)O[H]=O[2*H+1]<<16|O[2*H];for(H=C;H<2*C;H++)O[H]=0;return new s(O,0)};function I(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function P(D,C){this.g=D,this.h=C}function G(D,C){if(N(C))throw Error("division by zero");if(N(D))return new P(g,g);if(R(D))return C=G(F(D),C),new P(F(C.g),F(C.h));if(R(C))return C=G(D,F(C)),new P(F(C.g),C.h);if(30<D.g.length){if(R(D)||R(C))throw Error("slowDivide_ only works with positive integers.");for(var O=y,H=C;0>=H.l(D);)O=J(O),H=J(H);var k=Q(O,1),b=Q(H,1);for(H=Q(H,2),O=Q(O,2);!N(H);){var V=b.add(H);0>=V.l(D)&&(k=k.add(O),b=V),H=Q(H,1),O=Q(O,1)}return C=T(D,k.j(C)),new P(k,C)}for(k=g;0<=D.l(C);){for(O=Math.max(1,Math.floor(D.m()/C.m())),H=Math.ceil(Math.log(O)/Math.LN2),H=48>=H?1:Math.pow(2,H-48),b=c(O),V=b.j(C);R(V)||0<V.l(D);)O-=H,b=c(O),V=b.j(C);N(b)&&(b=y),k=k.add(b),D=T(D,V)}return new P(k,D)}t.A=function(D){return G(this,D).h},t.and=function(D){for(var C=Math.max(this.g.length,D.g.length),O=[],H=0;H<C;H++)O[H]=this.i(H)&D.i(H);return new s(O,this.h&D.h)},t.or=function(D){for(var C=Math.max(this.g.length,D.g.length),O=[],H=0;H<C;H++)O[H]=this.i(H)|D.i(H);return new s(O,this.h|D.h)},t.xor=function(D){for(var C=Math.max(this.g.length,D.g.length),O=[],H=0;H<C;H++)O[H]=this.i(H)^D.i(H);return new s(O,this.h^D.h)};function J(D){for(var C=D.g.length+1,O=[],H=0;H<C;H++)O[H]=D.i(H)<<1|D.i(H-1)>>>31;return new s(O,D.h)}function Q(D,C){var O=C>>5;C%=32;for(var H=D.g.length-O,k=[],b=0;b<H;b++)k[b]=0<C?D.i(b+O)>>>C|D.i(b+O+1)<<32-C:D.i(b+O);return new s(k,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tT=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=f,vu=s}).apply(typeof $1<"u"?$1:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nT,Ch,iT,Gd,k0,rT,oT,sT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,M,q){return m==Array.prototype||m==Object.prototype||(m[M]=q.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var M=0;M<m.length;++M){var q=m[M];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var i=n(this);function r(m,M){if(M)e:{var q=i;m=m.split(".");for(var te=0;te<m.length-1;te++){var we=m[te];if(!(we in q))break e;q=q[we]}m=m[m.length-1],te=q[m],M=M(te),M!=te&&M!=null&&e(q,m,{configurable:!0,writable:!0,value:M})}}function o(m,M){m instanceof String&&(m+="");var q=0,te=!1,we={next:function(){if(!te&&q<m.length){var Ie=q++;return{value:M(Ie,m[Ie]),done:!1}}return te=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}r("Array.prototype.values",function(m){return m||function(){return o(this,function(M,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(m){var M=typeof m;return M=M!="object"?M:m?Array.isArray(m)?"array":M:"null",M=="array"||M=="object"&&typeof m.length=="number"}function c(m){var M=typeof m;return M=="object"&&m!=null||M=="function"}function f(m,M,q){return m.call.apply(m.bind,arguments)}function g(m,M,q){if(!m)throw Error();if(2<arguments.length){var te=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,te),m.apply(M,we)}}return function(){return m.apply(M,arguments)}}function y(m,M,q){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,y.apply(null,arguments)}function w(m,M){var q=Array.prototype.slice.call(arguments,1);return function(){var te=q.slice();return te.push.apply(te,arguments),m.apply(this,te)}}function N(m,M){function q(){}q.prototype=M.prototype,m.aa=M.prototype,m.prototype=new q,m.prototype.constructor=m,m.Qb=function(te,we,Ie){for(var He=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)He[Mt-2]=arguments[Mt];return M.prototype[we].apply(te,He)}}function R(m){const M=m.length;if(0<M){const q=Array(M);for(let te=0;te<M;te++)q[te]=m[te];return q}return[]}function F(m,M){for(let q=1;q<arguments.length;q++){const te=arguments[q];if(u(te)){const we=m.length||0,Ie=te.length||0;m.length=we+Ie;for(let He=0;He<Ie;He++)m[we+He]=te[He]}else m.push(te)}}class T{constructor(M,q){this.i=M,this.j=q,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function I(m){return/^[\s\xa0]*$/.test(m)}function P(){var m=l.navigator;return m&&(m=m.userAgent)?m:""}function G(m){return G[" "](m),m}G[" "]=function(){};var J=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function Q(m,M,q){for(const te in m)M.call(q,m[te],te,m)}function D(m,M){for(const q in m)M.call(void 0,m[q],q,m)}function C(m){const M={};for(const q in m)M[q]=m[q];return M}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(m,M){let q,te;for(let we=1;we<arguments.length;we++){te=arguments[we];for(q in te)m[q]=te[q];for(let Ie=0;Ie<O.length;Ie++)q=O[Ie],Object.prototype.hasOwnProperty.call(te,q)&&(m[q]=te[q])}}function k(m){var M=1;m=m.split(":");const q=[];for(;0<M&&m.length;)q.push(m.shift()),M--;return m.length&&q.push(m.join(":")),q}function b(m){l.setTimeout(()=>{throw m},0)}function V(){var m=oe;let M=null;return m.g&&(M=m.g,m.g=m.g.next,m.g||(m.h=null),M.next=null),M}class ie{constructor(){this.h=this.g=null}add(M,q){const te=_e.get();te.set(M,q),this.h?this.h.next=te:this.g=te,this.h=te}}var _e=new T(()=>new le,m=>m.reset());class le{constructor(){this.next=this.g=this.h=null}set(M,q){this.h=M,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let se,W=!1,oe=new ie,fe=()=>{const m=l.Promise.resolve(void 0);se=()=>{m.then(xe)}};var xe=()=>{for(var m;m=V();){try{m.h.call(m.g)}catch(q){b(q)}var M=_e;M.j(m),100>M.h&&(M.h++,m.next=M.g,M.g=m)}W=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(m,M){this.type=m,this.g=this.target=M,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,M=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const q=()=>{};l.addEventListener("test",q,M),l.removeEventListener("test",q,M)}catch{}return m}();function ue(m,M){if(ee.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var q=this.type=m.type,te=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=M,M=m.relatedTarget){if(J){e:{try{G(M.nodeName);var we=!0;break e}catch{}we=!1}we||(M=null)}}else q=="mouseover"?M=m.fromElement:q=="mouseout"&&(M=m.toElement);this.relatedTarget=M,te?(this.clientX=te.clientX!==void 0?te.clientX:te.pageX,this.clientY=te.clientY!==void 0?te.clientY:te.pageY,this.screenX=te.screenX||0,this.screenY=te.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:he[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ue.aa.h.call(this)}}N(ue,ee);var he={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),be=0;function ke(m,M,q,te,we){this.listener=m,this.proxy=null,this.src=M,this.type=q,this.capture=!!te,this.ha=we,this.key=++be,this.da=this.fa=!1}function Ge(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function qe(m){this.src=m,this.g={},this.h=0}qe.prototype.add=function(m,M,q,te,we){var Ie=m.toString();m=this.g[Ie],m||(m=this.g[Ie]=[],this.h++);var He=Ze(m,M,te,we);return-1<He?(M=m[He],q||(M.fa=!1)):(M=new ke(M,this.src,Ie,!!te,we),M.fa=q,m.push(M)),M};function Je(m,M){var q=M.type;if(q in m.g){var te=m.g[q],we=Array.prototype.indexOf.call(te,M,void 0),Ie;(Ie=0<=we)&&Array.prototype.splice.call(te,we,1),Ie&&(Ge(M),m.g[q].length==0&&(delete m.g[q],m.h--))}}function Ze(m,M,q,te){for(var we=0;we<m.length;++we){var Ie=m[we];if(!Ie.da&&Ie.listener==M&&Ie.capture==!!q&&Ie.ha==te)return we}return-1}var mt="closure_lm_"+(1e6*Math.random()|0),De={};function pe(m,M,q,te,we){if(Array.isArray(M)){for(var Ie=0;Ie<M.length;Ie++)pe(m,M[Ie],q,te,we);return null}return q=Rt(q),m&&m[Te]?m.K(M,q,c(te)?!!te.capture:!1,we):It(m,M,q,!1,te,we)}function It(m,M,q,te,we,Ie){if(!M)throw Error("Invalid event type");var He=c(we)?!!we.capture:!!we,Mt=ft(m);if(Mt||(m[mt]=Mt=new qe(m)),q=Mt.add(M,q,te,He,Ie),q.proxy)return q;if(te=ut(),q.proxy=te,te.src=m,te.listener=q,m.addEventListener)ae||(we=He),we===void 0&&(we=!1),m.addEventListener(M.toString(),te,we);else if(m.attachEvent)m.attachEvent(et(M.toString()),te);else if(m.addListener&&m.removeListener)m.addListener(te);else throw Error("addEventListener and attachEvent are unavailable.");return q}function ut(){function m(q){return M.call(m.src,m.listener,q)}const M=Xe;return m}function We(m,M,q,te,we){if(Array.isArray(M))for(var Ie=0;Ie<M.length;Ie++)We(m,M[Ie],q,te,we);else te=c(te)?!!te.capture:!!te,q=Rt(q),m&&m[Te]?(m=m.i,M=String(M).toString(),M in m.g&&(Ie=m.g[M],q=Ze(Ie,q,te,we),-1<q&&(Ge(Ie[q]),Array.prototype.splice.call(Ie,q,1),Ie.length==0&&(delete m.g[M],m.h--)))):m&&(m=ft(m))&&(M=m.g[M.toString()],m=-1,M&&(m=Ze(M,q,te,we)),(q=-1<m?M[m]:null)&&Ye(q))}function Ye(m){if(typeof m!="number"&&m&&!m.da){var M=m.src;if(M&&M[Te])Je(M.i,m);else{var q=m.type,te=m.proxy;M.removeEventListener?M.removeEventListener(q,te,m.capture):M.detachEvent?M.detachEvent(et(q),te):M.addListener&&M.removeListener&&M.removeListener(te),(q=ft(M))?(Je(q,m),q.h==0&&(q.src=null,M[mt]=null)):Ge(m)}}}function et(m){return m in De?De[m]:De[m]="on"+m}function Xe(m,M){if(m.da)m=!0;else{M=new ue(M,this);var q=m.listener,te=m.ha||m.src;m.fa&&Ye(m),m=q.call(te,M)}return m}function ft(m){return m=m[mt],m instanceof qe?m:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(m){return typeof m=="function"?m:(m[At]||(m[At]=function(M){return m.handleEvent(M)}),m[At])}function pt(){j.call(this),this.i=new qe(this),this.M=this,this.F=null}N(pt,j),pt.prototype[Te]=!0,pt.prototype.removeEventListener=function(m,M,q,te){We(this,m,M,q,te)};function xt(m,M){var q,te=m.F;if(te)for(q=[];te;te=te.F)q.push(te);if(m=m.M,te=M.type||M,typeof M=="string")M=new ee(M,m);else if(M instanceof ee)M.target=M.target||m;else{var we=M;M=new ee(te,m),H(M,we)}if(we=!0,q)for(var Ie=q.length-1;0<=Ie;Ie--){var He=M.g=q[Ie];we=Zt(He,te,!0,M)&&we}if(He=M.g=m,we=Zt(He,te,!0,M)&&we,we=Zt(He,te,!1,M)&&we,q)for(Ie=0;Ie<q.length;Ie++)He=M.g=q[Ie],we=Zt(He,te,!1,M)&&we}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var m=this.i,M;for(M in m.g){for(var q=m.g[M],te=0;te<q.length;te++)Ge(q[te]);delete m.g[M],m.h--}}this.F=null},pt.prototype.K=function(m,M,q,te){return this.i.add(String(m),M,!1,q,te)},pt.prototype.L=function(m,M,q,te){return this.i.add(String(m),M,!0,q,te)};function Zt(m,M,q,te){if(M=m.i.g[String(M)],!M)return!0;M=M.concat();for(var we=!0,Ie=0;Ie<M.length;++Ie){var He=M[Ie];if(He&&!He.da&&He.capture==q){var Mt=He.listener,Kt=He.ha||He.src;He.fa&&Je(m.i,He),we=Mt.call(Kt,te)!==!1&&we}}return we&&!te.defaultPrevented}function St(m,M,q){if(typeof m=="function")q&&(m=y(m,q));else if(m&&typeof m.handleEvent=="function")m=y(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:l.setTimeout(m,M||0)}function zt(m){m.g=St(()=>{m.g=null,m.i&&(m.i=!1,zt(m))},m.l);const M=m.h;m.h=null,m.m.apply(null,M)}class it extends j{constructor(M,q){super(),this.m=M,this.l=q,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:zt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qn(m){j.call(this),this.h=m,this.g={}}N(qn,j);var Jt=[];function Ni(m){Q(m.g,function(M,q){this.g.hasOwnProperty(q)&&Ye(M)},m),m.g={}}qn.prototype.N=function(){qn.aa.N.call(this),Ni(this)},qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rn=l.JSON.stringify,Cn=l.JSON.parse,ki=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Qt(){}Qt.prototype.h=null;function Po(m){return m.h||(m.h=m.i())}function In(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lr(){ee.call(this,"d")}N(lr,ee);function Pn(){ee.call(this,"c")}N(Pn,ee);var vt={},nn=null;function Gr(){return nn=nn||new pt}vt.La="serverreachability";function Xn(m){ee.call(this,vt.La,m)}N(Xn,ee);function Li(m){const M=Gr();xt(M,new Xn(M))}vt.STAT_EVENT="statevent";function ji(m,M){ee.call(this,vt.STAT_EVENT,m),this.stat=M}N(ji,ee);function lt(m){const M=Gr();xt(M,new ji(M,m))}vt.Ma="timingevent";function ur(m,M){ee.call(this,vt.Ma,m),this.size=M}N(ur,ee);function Ri(m,M){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},M)}function ei(){this.g=!0}ei.prototype.xa=function(){this.g=!1};function hn(m,M,q,te,we,Ie){m.info(function(){if(m.g)if(Ie)for(var He="",Mt=Ie.split("&"),Kt=0;Kt<Mt.length;Kt++){var Dt=Mt[Kt].split("=");if(1<Dt.length){var Ht=Dt[0];Dt=Dt[1];var on=Ht.split("_");He=2<=on.length&&on[1]=="type"?He+(Ht+"="+Dt+"&"):He+(Ht+"=redacted&")}}else He=null;else He=Ie;return"XMLHTTP REQ ("+te+") [attempt "+we+"]: "+M+`
`+q+`
`+He})}function tt(m,M,q,te,we,Ie,He){m.info(function(){return"XMLHTTP RESP ("+te+") [ attempt "+we+"]: "+M+`
`+q+`
`+Ie+" "+He})}function Wn(m,M,q,te){m.info(function(){return"XMLHTTP TEXT ("+M+"): "+jr(m,q)+(te?" "+te:"")})}function ds(m,M){m.info(function(){return"TIMEOUT: "+M})}ei.prototype.info=function(){};function jr(m,M){if(!m.g)return M;if(!M)return null;try{var q=JSON.parse(M);if(q){for(m=0;m<q.length;m++)if(Array.isArray(q[m])){var te=q[m];if(!(2>te.length)){var we=te[1];if(Array.isArray(we)&&!(1>we.length)){var Ie=we[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var He=1;He<we.length;He++)we[He]=""}}}}return rn(q)}catch{return M}}var _i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function ti(){}N(ti,Qt),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Di=new ti;function Hn(m,M,q,te){this.j=m,this.i=M,this.l=q,this.R=te||1,this.U=new qn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ir}function Ir(){this.i=null,this.g="",this.h=!1}var No={},ko={};function Lo(m,M,q){m.L=1,m.v=Wi(Nn(M)),m.m=q,m.P=!0,Ro(m,null)}function Ro(m,M){m.F=Date.now(),$s(m),m.A=Nn(m.v);var q=m.A,te=m.R;Array.isArray(te)||(te=[String(te)]),Ct(q.i,"t",te),m.C=0,q=m.j.J,m.h=new Ir,m.g=$(m.j,q?M:null,!m.m),0<m.O&&(m.M=new it(y(m.Y,m,m.g),m.O)),M=m.U,q=m.g,te=m.ca;var we="readystatechange";Array.isArray(we)||(we&&(Jt[0]=we.toString()),we=Jt);for(var Ie=0;Ie<we.length;Ie++){var He=pe(q,we[Ie],te||M.handleEvent,!1,M.h||M);if(!He)break;M.g[He.key]=He}M=m.H?C(m.H):{},m.m?(m.u||(m.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,M)):(m.u="GET",m.g.ea(m.A,m.u,null,M)),Li(),hn(m.i,m.u,m.A,m.l,m.R,m.m)}Hn.prototype.ca=function(m){m=m.target;const M=this.M;M&&Vn(m)==3?M.j():this.Y(m)},Hn.prototype.Y=function(m){try{if(m==this.g)e:{const on=Vn(this.g);var M=this.g.Ba();const vo=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||ka(this.g)))){this.J||on!=4||M==7||(M==8||0>=vo?Li(3):Li(2)),Mo(this);var q=this.g.Z();this.X=q;t:if(ps(this)){var te=ka(this.g);m="";var we=te.length,Ie=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uo(this),Do(this);var He="";break t}this.h.i=new l.TextDecoder}for(M=0;M<we;M++)this.h.h=!0,m+=this.h.i.decode(te[M],{stream:!(Ie&&M==we-1)});te.length=0,this.h.g+=m,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=q==200,tt(this.i,this.u,this.A,this.l,this.R,on,q),this.o){if(this.T&&!this.K){t:{if(this.g){var Mt,Kt=this.g;if((Mt=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Mt)){var Dt=Mt;break t}}Dt=null}if(q=Dt)Wn(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,q);else{this.o=!1,this.s=3,lt(12),uo(this),Do(this);break e}}if(this.P){q=!0;let Rn;for(;!this.J&&this.C<He.length;)if(Rn=ms(this,He),Rn==ko){on==4&&(this.s=4,lt(14),q=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==No){this.s=4,lt(15),Wn(this.i,this.l,He,"[Invalid Chunk]"),q=!1;break}else Wn(this.i,this.l,Rn,null),co(this,Rn);if(ps(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||He.length!=0||this.h.h||(this.s=1,lt(16),q=!1),this.o=this.o&&q,!q)Wn(this.i,this.l,He,"[Invalid Chunked Response]"),uo(this),Do(this);else if(0<He.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),Ts(Ht),Ht.M=!0,lt(11))}}else Wn(this.i,this.l,He,null),co(this,He);on==4&&uo(this),this.o&&!this.J&&(on==4?go(this.j,this):(this.o=!1,$s(this)))}else Go(this.g),q==400&&0<He.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),uo(this),Do(this)}}}catch{}finally{}};function ps(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ms(m,M){var q=m.C,te=M.indexOf(`
`,q);return te==-1?ko:(q=Number(M.substring(q,te)),isNaN(q)?No:(te+=1,te+q>M.length?ko:(M=M.slice(te,te+q),m.C=te+q,M)))}Hn.prototype.cancel=function(){this.J=!0,uo(this)};function $s(m){m.S=Date.now()+m.I,tl(m,m.I)}function tl(m,M){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ri(y(m.ba,m),M)}function Mo(m){m.B&&(l.clearTimeout(m.B),m.B=null)}Hn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(ds(this.i,this.A),this.L!=2&&(Li(),lt(17)),uo(this),this.s=2,Do(this)):tl(this,this.S-m)};function Do(m){m.j.G==0||m.J||go(m.j,m)}function uo(m){Mo(m);var M=m.M;M&&typeof M.ma=="function"&&M.ma(),m.M=null,Ni(m.U),m.g&&(M=m.g,m.g=null,M.abort(),M.ma())}function co(m,M){try{var q=m.j;if(q.G!=0&&(q.g==m||jt(q.h,m))){if(!m.K&&jt(q.h,m)&&q.G==3){try{var te=q.Da.g.parse(M)}catch{te=null}if(Array.isArray(te)&&te.length==3){var we=te;if(we[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<m.F)mo(q),Xs(q);else break e;Ko(q),lt(18)}}else q.za=we[1],0<q.za-q.T&&37500>we[2]&&q.F&&q.v==0&&!q.C&&(q.C=Ri(y(q.Za,q),6e3));if(1>=Pr(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else Fi(q,11)}else if((m.K||q.g==m)&&mo(q),!I(M))for(we=q.Da.g.parse(M),M=0;M<we.length;M++){let Dt=we[M];if(q.T=Dt[0],Dt=Dt[1],q.G==2)if(Dt[0]=="c"){q.K=Dt[1],q.ia=Dt[2];const Ht=Dt[3];Ht!=null&&(q.la=Ht,q.j.info("VER="+q.la));const on=Dt[4];on!=null&&(q.Aa=on,q.j.info("SVER="+q.Aa));const vo=Dt[5];vo!=null&&typeof vo=="number"&&0<vo&&(te=1.5*vo,q.L=te,q.j.info("backChannelRequestTimeoutMs_="+te)),te=q;const Rn=m.g;if(Rn){const Jo=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var Ie=te.h;Ie.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Pt(Ie,Ie.h),Ie.h=null))}if(te.D){const Yi=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yi&&(te.ya=Yi,bt(te.I,te.D,Yi))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-m.F,q.j.info("Handshake RTT: "+q.R+"ms")),te=q;var He=m;if(te.qa=S(te,te.J?te.ia:null,te.W),He.K){Fo(te.h,He);var Mt=He,Kt=te.L;Kt&&(Mt.I=Kt),Mt.B&&(Mo(Mt),$s(Mt)),te.g=He}else Ji(te);0<q.i.length&&jo(q)}else Dt[0]!="stop"&&Dt[0]!="close"||Fi(q,7);else q.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Fi(q,7):Jr(q):Dt[0]!="noop"&&q.l&&q.l.ta(Dt),q.v=0)}}Li(4)}catch{}}var gs=class{constructor(m,M){this.g=m,this.map=M}};function Ks(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Pr(m){return m.h?1:m.g?m.g.size:0}function jt(m,M){return m.h?m.h==M:m.g?m.g.has(M):!1}function Pt(m,M){m.g?m.g.add(M):m.h=M}function Fo(m,M){m.h&&m.h==M?m.h=null:m.g&&m.g.has(M)&&m.g.delete(M)}Ks.prototype.cancel=function(){if(this.i=Wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Wr(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let M=m.i;for(const q of m.g.values())M=M.concat(q.D);return M}return R(m.i)}function ho(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var M=[],q=m.length,te=0;te<q;te++)M.push(m[te]);return M}M=[],q=0;for(te in m)M[q++]=m[te];return M}function vs(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var M=[];m=m.length;for(var q=0;q<m;q++)M.push(q);return M}M=[],q=0;for(const te in m)M[q++]=te;return M}}}function Lt(m,M){if(m.forEach&&typeof m.forEach=="function")m.forEach(M,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,M,void 0);else for(var q=vs(m),te=ho(m),we=te.length,Ie=0;Ie<we;Ie++)M.call(void 0,te[Ie],q&&q[Ie],m)}var Xt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oo(m,M){if(m){m=m.split("&");for(var q=0;q<m.length;q++){var te=m[q].indexOf("="),we=null;if(0<=te){var Ie=m[q].substring(0,te);we=m[q].substring(te+1)}else Ie=m[q];M(Ie,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function Ln(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ln){this.h=m.h,ys(this,m.j),this.o=m.o,this.g=m.g,fo(this,m.s),this.l=m.l;var M=m.i,q=new $r;q.i=M.i,M.g&&(q.g=new Map(M.g),q.h=M.h),Nr(this,q),this.m=m.m}else m&&(M=String(m).match(Xt))?(this.h=!1,ys(this,M[1]||"",!0),this.o=kr(M[2]||""),this.g=kr(M[3]||"",!0),fo(this,M[4]),this.l=kr(M[5]||"",!0),Nr(this,M[6]||"",!0),this.m=kr(M[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}Ln.prototype.toString=function(){var m=[],M=this.j;M&&m.push($i(M,Vo,!0),":");var q=this.g;return(q||M=="file")&&(m.push("//"),(M=this.o)&&m.push($i(M,Vo,!0),"@"),m.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&m.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&m.push("/"),m.push($i(q,q.charAt(0)=="/"?Lr:Ca,!0))),(q=this.i.toString())&&m.push("?",q),(q=this.m)&&m.push("#",$i(q,Bo)),m.join("")};function Nn(m){return new Ln(m)}function ys(m,M,q){m.j=q?kr(M,!0):M,m.j&&(m.j=m.j.replace(/:$/,""))}function fo(m,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);m.s=M}else m.s=null}function Nr(m,M,q){M instanceof $r?(m.i=M,cr(m.i,m.h)):(q||(M=$i(M,po)),m.i=new $r(M,m.h))}function bt(m,M,q){m.i.set(M,q)}function Wi(m){return bt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function kr(m,M){return m?M?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function $i(m,M,q){return typeof m=="string"?(m=encodeURI(m).replace(M,ba),q&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ba(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Vo=/[#\/\?@]/g,Ca=/[#\?:]/g,Lr=/[#\?]/g,po=/[#\?@]/g,Bo=/#/g;function $r(m,M){this.h=this.g=null,this.i=m||null,this.j=!!M}function gn(m){m.g||(m.g=new Map,m.h=0,m.i&&Oo(m.i,function(M,q){m.add(decodeURIComponent(M.replace(/\+/g," ")),q)}))}t=$r.prototype,t.add=function(m,M){gn(this),this.i=null,m=_t(this,m);var q=this.g.get(m);return q||this.g.set(m,q=[]),q.push(M),this.h+=1,this};function Ia(m,M){gn(m),M=_t(m,M),m.g.has(M)&&(m.i=null,m.h-=m.g.get(M).length,m.g.delete(M))}function _s(m,M){return gn(m),M=_t(m,M),m.g.has(M)}t.forEach=function(m,M){gn(this),this.g.forEach(function(q,te){q.forEach(function(we){m.call(M,we,te,this)},this)},this)},t.na=function(){gn(this);const m=Array.from(this.g.values()),M=Array.from(this.g.keys()),q=[];for(let te=0;te<M.length;te++){const we=m[te];for(let Ie=0;Ie<we.length;Ie++)q.push(M[te])}return q},t.V=function(m){gn(this);let M=[];if(typeof m=="string")_s(this,m)&&(M=M.concat(this.g.get(_t(this,m))));else{m=Array.from(this.g.values());for(let q=0;q<m.length;q++)M=M.concat(m[q])}return M},t.set=function(m,M){return gn(this),this.i=null,m=_t(this,m),_s(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[M]),this.h+=1,this},t.get=function(m,M){return m?(m=this.V(m),0<m.length?String(m[0]):M):M};function Ct(m,M,q){Ia(m,M),0<q.length&&(m.i=null,m.g.set(_t(m,M),R(q)),m.h+=q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],M=Array.from(this.g.keys());for(var q=0;q<M.length;q++){var te=M[q];const Ie=encodeURIComponent(String(te)),He=this.V(te);for(te=0;te<He.length;te++){var we=Ie;He[te]!==""&&(we+="="+encodeURIComponent(String(He[te]))),m.push(we)}}return this.i=m.join("&")};function _t(m,M){return M=String(M),m.j&&(M=M.toLowerCase()),M}function cr(m,M){M&&!m.j&&(gn(m),m.i=null,m.g.forEach(function(q,te){var we=te.toLowerCase();te!=we&&(Ia(this,te),Ct(this,we,q))},m)),m.j=M}function $t(m,M){const q=new ei;if(l.Image){const te=new Image;te.onload=w(Ki,q,"TestLoadImage: loaded",!0,M,te),te.onerror=w(Ki,q,"TestLoadImage: error",!1,M,te),te.onabort=w(Ki,q,"TestLoadImage: abort",!1,M,te),te.ontimeout=w(Ki,q,"TestLoadImage: timeout",!1,M,te),l.setTimeout(function(){te.ontimeout&&te.ontimeout()},1e4),te.src=m}else M(!1)}function Pa(m,M){const q=new ei,te=new AbortController,we=setTimeout(()=>{te.abort(),Ki(q,"TestPingServer: timeout",!1,M)},1e4);fetch(m,{signal:te.signal}).then(Ie=>{clearTimeout(we),Ie.ok?Ki(q,"TestPingServer: ok",!0,M):Ki(q,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(we),Ki(q,"TestPingServer: error",!1,M)})}function Ki(m,M,q,te,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),te(q)}catch{}}function Uo(){this.g=new ki}function ws(m,M,q){const te=q||"";try{Lt(m,function(we,Ie){let He=we;c(we)&&(He=rn(we)),M.push(te+Ie+"="+encodeURIComponent(He))})}catch(we){throw M.push(te+"type="+encodeURIComponent("_badmap")),we}}function hr(m){this.l=m.Ub||null,this.j=m.eb||!1}N(hr,Qt),hr.prototype.g=function(){return new zo(this.l,this.j)},hr.prototype.i=function(m){return function(){return m}}({});function zo(m,M){pt.call(this),this.D=m,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(zo,pt),t=zo.prototype,t.open=function(m,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=M,this.readyState=1,si(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(M.body=m),(this.D||l).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qo(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function qo(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var M=m.value?m.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!m.done}))&&(this.response=this.responseText+=M)}m.done?vn(this):si(this),this.readyState==3&&qo(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,vn(this))},t.Qa=function(m){this.g&&(this.response=m,vn(this))},t.ga=function(){this.g&&vn(this)};function vn(m){m.readyState=4,m.l=null,m.j=null,m.v=null,si(m)}t.setRequestHeader=function(m,M){this.u.append(m,M)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],M=this.h.entries();for(var q=M.next();!q.done;)q=q.value,m.push(q[0]+": "+q[1]),q=M.next();return m.join(`\r
`)};function si(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Kr(m){let M="";return Q(m,function(q,te){M+=te,M+=":",M+=q,M+=`\r
`}),M}function Js(m,M,q){e:{for(te in q){var te=!1;break e}te=!0}te||(q=Kr(q),typeof m=="string"?q!=null&&encodeURIComponent(String(q)):bt(m,M,q))}function fn(m){pt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(fn,pt);var Ys=/^https?$/i,Ho=["POST","PUT"];t=fn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,M,q,te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);M=M?M.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?Po(this.o):Po(Di),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(M,String(m),!0),this.B=!1}catch(Ie){Na(this,Ie);return}if(m=q||"",q=new Map(this.headers),te)if(Object.getPrototypeOf(te)===Object.prototype)for(var we in te)q.set(we,te[we]);else if(typeof te.keys=="function"&&typeof te.get=="function")for(const Ie of te.keys())q.set(Ie,te.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(te));te=Array.from(q.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),we=l.FormData&&m instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ho,M,void 0))||te||we||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,He]of q)this.g.setRequestHeader(Ie,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{On(this),this.u=!0,this.g.send(m),this.u=!1}catch(Ie){Na(this,Ie)}};function Na(m,M){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=M,m.m=5,Zs(m),xs(m)}function Zs(m){m.A||(m.A=!0,xt(m,"complete"),xt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,xt(this,"complete"),xt(this,"abort"),xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),fn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},t.bb=function(){qt(this)};function qt(m){if(m.h&&typeof s<"u"&&(!m.v[1]||Vn(m)!=4||m.Z()!=2)){if(m.u&&Vn(m)==4)St(m.Ea,0,m);else if(xt(m,"readystatechange"),Vn(m)==4){m.h=!1;try{const He=m.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var q;if(!(q=M)){var te;if(te=He===0){var we=String(m.D).match(Xt)[1]||null;!we&&l.self&&l.self.location&&(we=l.self.location.protocol.slice(0,-1)),te=!Ys.test(we?we.toLowerCase():"")}q=te}if(q)xt(m,"complete"),xt(m,"success");else{m.m=6;try{var Ie=2<Vn(m)?m.g.statusText:""}catch{Ie=""}m.l=Ie+" ["+m.Z()+"]",Zs(m)}}finally{xs(m)}}}}function xs(m,M){if(m.g){On(m);const q=m.g,te=m.v[0]?()=>{}:null;m.g=null,m.v=null,M||xt(m,"ready");try{q.onreadystatechange=te}catch{}}}function On(m){m.I&&(l.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Vn(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var M=this.g.responseText;return m&&M.indexOf(m)==0&&(M=M.substring(m.length)),Cn(M)}};function ka(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Go(m){const M={};m=(m.g&&2<=Vn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let te=0;te<m.length;te++){if(I(m[te]))continue;var q=k(m[te]);const we=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Ie=M[we]||[];M[we]=Ie,Ie.push(q)}D(M,function(te){return te.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(m,M,q){return q&&q.internalChannelParams&&q.internalChannelParams[m]||M}function Qs(m){this.Aa=0,this.i=[],this.j=new ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,m),this.cb=ai("retryDelaySeedMs",1e4,m),this.Wa=ai("forwardChannelMaxRetries",2,m),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ks(m&&m.concurrentRequestLimit),this.Da=new Uo,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qs.prototype,t.la=8,t.G=1,t.connect=function(m,M,q,te){lt(0),this.W=m,this.H=M||{},q&&te!==void 0&&(this.H.OSID=q,this.H.OAID=te),this.F=this.X,this.I=S(this,null,this.W),jo(this)};function Jr(m){if(Ss(m),m.G==3){var M=m.U++,q=Nn(m.I);if(bt(q,"SID",m.K),bt(q,"RID",M),bt(q,"TYPE","terminate"),Wo(m,q),M=new Hn(m,m.j,M),M.L=2,M.v=Wi(Nn(q)),q=!1,l.navigator&&l.navigator.sendBeacon)try{q=l.navigator.sendBeacon(M.v.toString(),"")}catch{}!q&&l.Image&&(new Image().src=M.v,q=!0),q||(M.g=$(M.j,null),M.g.ea(M.v)),M.F=Date.now(),$s(M)}ta(m)}function Xs(m){m.g&&(Ts(m),m.g.cancel(),m.g=null)}function Ss(m){Xs(m),m.u&&(l.clearTimeout(m.u),m.u=null),mo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&l.clearTimeout(m.s),m.s=null)}function jo(m){if(!Aa(m.h)&&!m.s){m.s=!0;var M=m.Ga;se||fe(),W||(se(),W=!0),oe.add(M,m),m.B=0}}function La(m,M){return Pr(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=M.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ri(y(m.Ga,m,M),Es(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const we=new Hn(this,this.j,m);let Ie=this.o;if(this.S&&(Ie?(Ie=C(Ie),H(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(we.H=Ie,Ie=null),this.P)e:{for(var M=0,q=0;q<this.i.length;q++){t:{var te=this.i[q];if("__data__"in te.map&&(te=te.map.__data__,typeof te=="string")){te=te.length;break t}te=void 0}if(te===void 0)break;if(M+=te,4096<M){M=q;break e}if(M===4096||q===this.i.length-1){M=q+1;break e}}M=1e3}else M=1e3;M=$o(this,we,M),q=Nn(this.I),bt(q,"RID",m),bt(q,"CVER",22),this.D&&bt(q,"X-HTTP-Session-Id",this.D),Wo(this,q),Ie&&(this.O?M="headers="+encodeURIComponent(String(Kr(Ie)))+"&"+M:this.m&&Js(q,this.m,Ie)),Pt(this.h,we),this.Ua&&bt(q,"TYPE","init"),this.P?(bt(q,"$req",M),bt(q,"SID","null"),we.T=!0,Lo(we,q,null)):Lo(we,q,M),this.G=2}}else this.G==3&&(m?wi(this,m):this.i.length==0||Aa(this.h)||wi(this))};function wi(m,M){var q;M?q=M.l:q=m.U++;const te=Nn(m.I);bt(te,"SID",m.K),bt(te,"RID",q),bt(te,"AID",m.T),Wo(m,te),m.m&&m.o&&Js(te,m.m,m.o),q=new Hn(m,m.j,q,m.B+1),m.m===null&&(q.H=m.o),M&&(m.i=M.D.concat(m.i)),M=$o(m,q,1e3),q.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Pt(m.h,q),Lo(q,te,M)}function Wo(m,M){m.H&&Q(m.H,function(q,te){bt(M,te,q)}),m.l&&Lt({},function(q,te){bt(M,te,q)})}function $o(m,M,q){q=Math.min(m.i.length,q);var te=m.l?y(m.l.Na,m.l,m):null;e:{var we=m.i;let Ie=-1;for(;;){const He=["count="+q];Ie==-1?0<q?(Ie=we[0].g,He.push("ofs="+Ie)):Ie=0:He.push("ofs="+Ie);let Mt=!0;for(let Kt=0;Kt<q;Kt++){let Dt=we[Kt].g;const Ht=we[Kt].map;if(Dt-=Ie,0>Dt)Ie=Math.max(0,we[Kt].g-100),Mt=!1;else try{ws(Ht,He,"req"+Dt+"_")}catch{te&&te(Ht)}}if(Mt){te=He.join("&");break e}}}return m=m.i.splice(0,q),M.D=m,te}function Ji(m){if(!m.g&&!m.u){m.Y=1;var M=m.Fa;se||fe(),W||(se(),W=!0),oe.add(M,m),m.v=0}}function Ko(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ri(y(m.Fa,m),Es(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,ea(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ri(y(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Xs(this),ea(this))};function Ts(m){m.A!=null&&(l.clearTimeout(m.A),m.A=null)}function ea(m){m.g=new Hn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var M=Nn(m.qa);bt(M,"RID","rpc"),bt(M,"SID",m.K),bt(M,"AID",m.T),bt(M,"CI",m.F?"0":"1"),!m.F&&m.ja&&bt(M,"TO",m.ja),bt(M,"TYPE","xmlhttp"),Wo(m,M),m.m&&m.o&&Js(M,m.m,m.o),m.L&&(m.g.I=m.L);var q=m.g;m=m.ia,q.L=1,q.v=Wi(Nn(M)),q.m=null,q.P=!0,Ro(q,m)}t.Za=function(){this.C!=null&&(this.C=null,Xs(this),Ko(this),lt(19))};function mo(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function go(m,M){var q=null;if(m.g==M){mo(m),Ts(m),m.g=null;var te=2}else if(jt(m.h,M))q=M.D,Fo(m.h,M),te=1;else return;if(m.G!=0){if(M.o)if(te==1){q=M.m?M.m.length:0,M=Date.now()-M.F;var we=m.B;te=Gr(),xt(te,new ur(te,q)),jo(m)}else Ji(m);else if(we=M.s,we==3||we==0&&0<M.X||!(te==1&&La(m,M)||te==2&&Ko(m)))switch(q&&0<q.length&&(M=m.h,M.i=M.i.concat(q)),we){case 1:Fi(m,5);break;case 4:Fi(m,10);break;case 3:Fi(m,6);break;default:Fi(m,2)}}}function Es(m,M){let q=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(q*=2),q*M}function Fi(m,M){if(m.j.info("Error code "+M),M==2){var q=y(m.fb,m),te=m.Xa;const we=!te;te=new Ln(te||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ys(te,"https"),Wi(te),we?$t(te.toString(),q):Pa(te.toString(),q)}else lt(2);m.G=0,m.l&&m.l.sa(M),ta(m),Ss(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function ta(m){if(m.G=0,m.ka=[],m.l){const M=Wr(m.h);(M.length!=0||m.i.length!=0)&&(F(m.ka,M),F(m.ka,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.ra()}}function S(m,M,q){var te=q instanceof Ln?Nn(q):new Ln(q);if(te.g!="")M&&(te.g=M+"."+te.g),fo(te,te.s);else{var we=l.location;te=we.protocol,M=M?M+"."+we.hostname:we.hostname,we=+we.port;var Ie=new Ln(null);te&&ys(Ie,te),M&&(Ie.g=M),we&&fo(Ie,we),q&&(Ie.l=q),te=Ie}return q=m.D,M=m.ya,q&&M&&bt(te,q,M),bt(te,"VER",m.la),Wo(m,te),te}function $(m,M,q){if(M&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=m.Ca&&!m.pa?new fn(new hr({eb:q})):new fn(m.pa),M.Ha(m.J),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function de(){}t=de.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ge(){}ge.prototype.g=function(m,M){return new Ee(m,M)};function Ee(m,M){pt.call(this),this.g=new Qs(M),this.l=m,this.h=M&&M.messageUrlParams||null,m=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(m?m["X-WebChannel-Content-Type"]=M.messageContentType:m={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(m?m["X-WebChannel-Client-Profile"]=M.va:m={"X-WebChannel-Client-Profile":M.va}),this.g.S=m,(m=M&&M.Sb)&&!I(m)&&(this.g.m=m),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!I(M)&&(this.g.D=M,m=this.h,m!==null&&M in m&&(m=this.h,M in m&&delete m[M])),this.j=new Qe(this)}N(Ee,pt),Ee.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ee.prototype.close=function(){Jr(this.g)},Ee.prototype.o=function(m){var M=this.g;if(typeof m=="string"){var q={};q.__data__=m,m=q}else this.u&&(q={},q.__data__=rn(m),m=q);M.i.push(new gs(M.Ya++,m)),M.G==3&&jo(M)},Ee.prototype.N=function(){this.g.l=null,delete this.j,Jr(this.g),delete this.g,Ee.aa.N.call(this)};function Re(m){lr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var M=m.__sm__;if(M){e:{for(const q in M){m=q;break e}m=void 0}(this.i=m)&&(m=this.i,M=M!==null&&m in M?M[m]:void 0),this.data=M}else this.data=m}N(Re,lr);function Ue(){Pn.call(this),this.status=1}N(Ue,Pn);function Qe(m){this.g=m}N(Qe,de),Qe.prototype.ua=function(){xt(this.g,"a")},Qe.prototype.ta=function(m){xt(this.g,new Re(m))},Qe.prototype.sa=function(m){xt(this.g,new Ue)},Qe.prototype.ra=function(){xt(this.g,"b")},ge.prototype.createWebChannel=ge.prototype.g,Ee.prototype.send=Ee.prototype.o,Ee.prototype.open=Ee.prototype.m,Ee.prototype.close=Ee.prototype.close,sT=function(){return new ge},oT=function(){return Gr()},rT=vt,k0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,Gd=_i,Mi.COMPLETE="complete",iT=Mi,In.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ch=In,fn.prototype.listenOnce=fn.prototype.L,fn.prototype.getLastError=fn.prototype.Ka,fn.prototype.getLastErrorCode=fn.prototype.Ba,fn.prototype.getStatus=fn.prototype.Z,fn.prototype.getResponseJson=fn.prototype.Oa,fn.prototype.getResponseText=fn.prototype.oa,fn.prototype.send=fn.prototype.ea,fn.prototype.setWithCredentials=fn.prototype.Ha,nT=fn}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const K1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new JS("@firebase/firestore");function yh(){return Cu.logLevel}function dt(t,...e){if(Cu.logLevel<=ln.DEBUG){const n=e.map(wy);Cu.debug(`Firestore (${Kc}): ${t}`,...n)}}function Ja(t,...e){if(Cu.logLevel<=ln.ERROR){const n=e.map(wy);Cu.error(`Firestore (${Kc}): ${t}`,...n)}}function Fc(t,...e){if(Cu.logLevel<=ln.WARN){const n=e.map(wy);Cu.warn(`Firestore (${Kc}): ${t}`,...n)}}function wy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t="Unexpected state"){const e=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: `+t;throw Ja(e),new Error(e)}function bn(t,e){t||Ft()}function Ut(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends $c{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Sr.UNAUTHENTICATED))}shutdown(){}}class yN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _N{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bn(this.o===void 0);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let o=new Ol;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ol,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ol)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bn(typeof i.accessToken=="string"),new aT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bn(e===null||typeof e=="string"),new Sr(e)}}class wN{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xN{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new wN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){bn(this.o===void 0);const i=o=>{o.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,dt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(bn(typeof n.token=="string"),this.R=n.token,new SN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=EN(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function dn(t,e){return t<e?-1:t>e?1:0}function Oc(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new yt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new yt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pi.fromMillis(Date.now())}static fromDate(e){return Pi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Pi(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?dn(this.nanoseconds,e.nanoseconds):dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new Pi(0,0))}static max(){return new Bt(new Pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ft(),i===void 0?i=e.length-n:i>e.length-n&&Ft(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vf?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class jn extends vf{construct(e,n,i){return new jn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new yt($e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new jn(n)}static emptyPath(){return new jn([])}}const AN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends vf{construct(e,n,i){return new ir(e,n,i)}static isValidIdentifier(e){return AN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new yt($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let s=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new yt($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new yt($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(o(),r++)}if(o(),s)throw new yt($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.path=e}static fromPath(e){return new Et(jn.fromString(e))}static fromName(e){return new Et(jn.fromString(e).popFirst(5))}static empty(){return new Et(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return jn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new jn(e.slice()))}}function bN(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Bt.fromTimestamp(i===1e9?new Pi(n+1,0):new Pi(n,i));return new ql(r,Et.empty(),e)}function CN(t){return new ql(t.readTime,t.key,-1)}class ql{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ql(Bt.min(),Et.empty(),-1)}static max(){return new ql(Bt.max(),Et.empty(),-1)}}function IN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Et.comparator(t.documentKey,e.documentKey),n!==0?n:dn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(t){if(t.code!==$e.FAILED_PRECONDITION||t.message!==PN)throw t;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):je.reject(n)}static resolve(e){return new je((n,i)=>{n(e)})}static reject(e){return new je((n,i)=>{i(e)})}static waitFor(e){return new je((n,i)=>{let r=0,o=0,s=!1;e.forEach(l=>{++r,l.next(()=>{++o,s&&o===r&&n()},u=>i(u))}),s=!0,o===r&&n()})}static or(e){let n=je.resolve(!1);for(const i of e)n=n.next(r=>r?je.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new je((i,r)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next(f=>{s[c]=f,++l,l===o&&i(s)},f=>r(f))}})}static doWhile(e,n){return new je((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function kN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xy.oe=-1;function im(t){return t==null}function Tp(t){return t===0&&1/t==-1/0}function LN(t){return typeof t=="number"&&Number.isInteger(t)&&!Tp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new Qn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??nr.RED,this.left=r??nr.EMPTY,this.right=o??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new nr(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return nr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ft();const e=this.left.check();if(e!==this.right.check())throw Ft();return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft()}get value(){throw Ft()}get color(){throw Ft()}get left(){throw Ft()}get right(){throw Ft()}copy(e,n,i,r,o){return this}insert(e,n,i){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y1(this.data.getIterator())}getIteratorFrom(e){return new Y1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new or(this.comparator);return n.data=e,n}}class Y1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new Vs([])}unionWith(e){let n=new or(ir.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Vs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oc(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cT("Invalid base64 string: "+o):o}}(e);return new ar(n)}static fromUint8Array(e){const n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new ar(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const RN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(t){if(bn(!!t),typeof t=="string"){let e=0;const n=RN.exec(t);if(bn(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ui(t.seconds),nanos:ui(t.nanos)}}function ui(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Iu(t){return typeof t=="string"?ar.fromBase64String(t):ar.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ty(t){const e=t.mapValue.fields.__previous_value__;return Sy(e)?Ty(e):e}function yf(t){const e=Hl(t.mapValue.fields.__local_write_time__.timestampValue);return new Pi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,i,r,o,s,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class _f{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _f("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _f&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d={mapValue:{}};function Pu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sy(t)?4:FN(t)?9007199254740991:DN(t)?10:11:Ft()}function Sa(t,e){if(t===e)return!0;const n=Pu(t);if(n!==Pu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yf(t).isEqual(yf(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const s=Hl(r.timestampValue),l=Hl(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Iu(r.bytesValue).isEqual(Iu(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ui(r.geoPointValue.latitude)===ui(o.geoPointValue.latitude)&&ui(r.geoPointValue.longitude)===ui(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ui(r.integerValue)===ui(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const s=ui(r.doubleValue),l=ui(o.doubleValue);return s===l?Tp(s)===Tp(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Oc(t.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:case 11:return function(r,o){const s=r.mapValue.fields||{},l=o.mapValue.fields||{};if(J1(s)!==J1(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Sa(s[u],l[u])))return!1;return!0}(t,e);default:return Ft()}}function wf(t,e){return(t.values||[]).find(n=>Sa(n,e))!==void 0}function Vc(t,e){if(t===e)return 0;const n=Pu(t),i=Pu(e);if(n!==i)return dn(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return dn(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=ui(o.integerValue||o.doubleValue),u=ui(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Z1(t.timestampValue,e.timestampValue);case 4:return Z1(yf(t),yf(e));case 5:return dn(t.stringValue,e.stringValue);case 6:return function(o,s){const l=Iu(o),u=Iu(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=dn(l[c],u[c]);if(f!==0)return f}return dn(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=dn(ui(o.latitude),ui(s.latitude));return l!==0?l:dn(ui(o.longitude),ui(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q1(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,c,f;const g=o.fields||{},y=s.fields||{},w=(l=g.value)===null||l===void 0?void 0:l.arrayValue,N=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=dn(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Q1(w,N)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===_d.mapValue&&s===_d.mapValue)return 0;if(o===_d.mapValue)return 1;if(s===_d.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=s.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const y=dn(u[g],f[g]);if(y!==0)return y;const w=Vc(l[u[g]],c[f[g]]);if(w!==0)return w}return dn(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Ft()}}function Z1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dn(t,e);const n=Hl(t),i=Hl(e),r=dn(n.seconds,i.seconds);return r!==0?r:dn(n.nanos,i.nanos)}function Q1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Vc(n[r],i[r]);if(o)return o}return dn(n.length,i.length)}function Bc(t){return L0(t)}function L0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Hl(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Iu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Et.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=L0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const s of i)o?o=!1:r+=",",r+=`${s}:${L0(n.fields[s])}`;return r+"}"}(t.mapValue):Ft()}function R0(t){return!!t&&"integerValue"in t}function Ey(t){return!!t&&"arrayValue"in t}function X1(t){return!!t&&"nullValue"in t}function e2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jd(t){return!!t&&"mapValue"in t}function DN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Uh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jc(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Uh(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uh(n)}setAll(e){let n=ir.emptyPath(),i={},r=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}s?i[l.lastSegment()]=Uh(s):r.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());jd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];jd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Jc(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new os(Uh(this.value))}}function hT(t){const e=[];return Jc(t.fields,(n,i)=>{const r=new ir([n]);if(jd(i)){const o=hT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const s of o)e.push(r.child(s))}else e.push(r)}),new Vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,i,r,o,s,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Er(e,0,Bt.min(),Bt.min(),Bt.min(),os.empty(),0)}static newFoundDocument(e,n,i,r){return new Er(e,1,n,Bt.min(),i,r,0)}static newNoDocument(e,n){return new Er(e,2,n,Bt.min(),Bt.min(),os.empty(),0)}static newUnknownDocument(e,n){return new Er(e,3,n,Bt.min(),Bt.min(),os.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.position=e,this.inclusive=n}}function t2(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],s=t.position[r];if(o.field.isKeyField()?i=Et.comparator(Et.fromName(s.referenceValue),n.key):i=Vc(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function n2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n="asc"){this.field=e,this.dir=n}}function ON(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{}class Ci extends fT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new BN(e,n,i):n==="array-contains"?new qN(e,i):n==="in"?new HN(e,i):n==="not-in"?new GN(e,i):n==="array-contains-any"?new jN(e,i):new Ci(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new UN(e,i):new zN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vc(n,this.value)):n!==null&&Pu(this.value)===Pu(n)&&this.matchesComparison(Vc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ta extends fT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ta(e,n)}matches(e){return dT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dT(t){return t.op==="and"}function pT(t){return VN(t)&&dT(t)}function VN(t){for(const e of t.filters)if(e instanceof Ta)return!1;return!0}function M0(t){if(t instanceof Ci)return t.field.canonicalString()+t.op.toString()+Bc(t.value);if(pT(t))return t.filters.map(e=>M0(e)).join(",");{const e=t.filters.map(n=>M0(n)).join(",");return`${t.op}(${e})`}}function mT(t,e){return t instanceof Ci?function(i,r){return r instanceof Ci&&i.op===r.op&&i.field.isEqual(r.field)&&Sa(i.value,r.value)}(t,e):t instanceof Ta?function(i,r){return r instanceof Ta&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,l)=>o&&mT(s,r.filters[l]),!0):!1}(t,e):void Ft()}function gT(t){return t instanceof Ci?function(n){return`${n.field.canonicalString()} ${n.op} ${Bc(n.value)}`}(t):t instanceof Ta?function(n){return n.op.toString()+" {"+n.getFilters().map(gT).join(" ,")+"}"}(t):"Filter"}class BN extends Ci{constructor(e,n,i){super(e,n,i),this.key=Et.fromName(i.referenceValue)}matches(e){const n=Et.comparator(e.key,this.key);return this.matchesComparison(n)}}class UN extends Ci{constructor(e,n){super(e,"in",n),this.keys=vT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zN extends Ci{constructor(e,n){super(e,"not-in",n),this.keys=vT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Et.fromName(i.referenceValue))}class qN extends Ci{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ey(n)&&wf(n.arrayValue,this.value)}}class HN extends Ci{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wf(this.value.arrayValue,n)}}class GN extends Ci{constructor(e,n){super(e,"not-in",n)}matches(e){if(wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wf(this.value.arrayValue,n)}}class jN extends Ci{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>wf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n=null,i=[],r=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function i2(t,e=null,n=[],i=[],r=null,o=null,s=null){return new WN(t,e,n,i,r,o,s)}function Ay(t){const e=Ut(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>M0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),im(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Bc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Bc(i)).join(",")),e.ue=n}return e.ue}function by(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ON(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!n2(t.startAt,e.startAt)&&n2(t.endAt,e.endAt)}function D0(t){return Et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n=null,i=[],r=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $N(t,e,n,i,r,o,s,l){return new rm(t,e,n,i,r,o,s,l)}function yT(t){return new rm(t)}function r2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KN(t){return t.collectionGroup!==null}function zh(t){const e=Ut(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new or(ir.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ap(o,i))}),n.has(ir.keyField().canonicalString())||e.ce.push(new Ap(ir.keyField(),i))}return e.ce}function ya(t){const e=Ut(t);return e.le||(e.le=JN(e,zh(t))),e.le}function JN(t,e){if(t.limitType==="F")return i2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Ap(r.field,o)});const n=t.endAt?new Ep(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ep(t.startAt.position,t.startAt.inclusive):null;return i2(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function F0(t,e,n){return new rm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function om(t,e){return by(ya(t),ya(e))&&t.limitType===e.limitType}function _T(t){return`${Ay(ya(t))}|lt:${t.limitType}`}function Zu(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>gT(r)).join(", ")}]`),im(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Bc(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Bc(r)).join(",")),`Target(${i})`}(ya(t))}; limitType=${t.limitType})`}function sm(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Et.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of zh(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,l,u){const c=t2(s,l,u);return s.inclusive?c<=0:c<0}(i.startAt,zh(i),r)||i.endAt&&!function(s,l,u){const c=t2(s,l,u);return s.inclusive?c>=0:c>0}(i.endAt,zh(i),r))}(t,e)}function YN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wT(t){return(e,n)=>{let i=!1;for(const r of zh(t)){const o=ZN(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function ZN(t,e,n){const i=t.field.isKeyField()?Et.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Vc(u,c):Ft()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ft()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jc(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Qn(Et.comparator);function Ya(){return QN}const xT=new Qn(Et.comparator);function Ih(...t){let e=xT;for(const n of t)e=e.insert(n.key,n);return e}function ST(t){let e=xT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function du(){return qh()}function TT(){return qh()}function qh(){return new Yc(t=>t.toString(),(t,e)=>t.isEqual(e))}const XN=new Qn(Et.comparator),e4=new or(Et.comparator);function tn(...t){let e=e4;for(const n of t)e=e.add(n);return e}const t4=new or(dn);function n4(){return t4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tp(e)?"-0":e}}function ET(t){return{integerValue:""+t}}function i4(t,e){return LN(e)?ET(e):Cy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this._=void 0}}function r4(t,e,n){return t instanceof bp?function(r,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Sy(o)&&(o=Ty(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof xf?bT(t,e):t instanceof Sf?CT(t,e):function(r,o){const s=AT(r,o),l=o2(s)+o2(r.Pe);return R0(s)&&R0(r.Pe)?ET(l):Cy(r.serializer,l)}(t,e)}function o4(t,e,n){return t instanceof xf?bT(t,e):t instanceof Sf?CT(t,e):n}function AT(t,e){return t instanceof Cp?function(i){return R0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class bp extends am{}class xf extends am{constructor(e){super(),this.elements=e}}function bT(t,e){const n=IT(e);for(const i of t.elements)n.some(r=>Sa(r,i))||n.push(i);return{arrayValue:{values:n}}}class Sf extends am{constructor(e){super(),this.elements=e}}function CT(t,e){let n=IT(e);for(const i of t.elements)n=n.filter(r=>!Sa(r,i));return{arrayValue:{values:n}}}class Cp extends am{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function o2(t){return ui(t.integerValue||t.doubleValue)}function IT(t){return Ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function s4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof xf&&r instanceof xf||i instanceof Sf&&r instanceof Sf?Oc(i.elements,r.elements,Sa):i instanceof Cp&&r instanceof Cp?Sa(i.Pe,r.Pe):i instanceof bp&&r instanceof bp}(t.transform,e.transform)}class a4{constructor(e,n){this.version=e,this.transformResults=n}}class _a{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _a}static exists(e){return new _a(void 0,e)}static updateTime(e){return new _a(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function PT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Iy(t.key,_a.none()):new Rf(t.key,t.data,_a.none());{const n=t.data,i=os.empty();let r=new or(ir.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Lu(t.key,i,new Vs(r.toArray()),_a.none())}}function l4(t,e,n){t instanceof Rf?function(r,o,s){const l=r.value.clone(),u=a2(r.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Lu?function(r,o,s){if(!Wd(r.precondition,o))return void o.convertToUnknownDocument(s.version);const l=a2(r.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(NT(r)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Hh(t,e,n,i){return t instanceof Rf?function(o,s,l,u){if(!Wd(o.precondition,s))return l;const c=o.value.clone(),f=l2(o.fieldTransforms,u,s);return c.setAll(f),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Lu?function(o,s,l,u){if(!Wd(o.precondition,s))return l;const c=l2(o.fieldTransforms,u,s),f=s.data;return f.setAll(NT(o)),f.setAll(c),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,s,l){return Wd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function u4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=AT(i.transform,r||null);o!=null&&(n===null&&(n=os.empty()),n.set(i.field,o))}return n||null}function s2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Oc(i,r,(o,s)=>s4(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rf extends lm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lu extends lm{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function NT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function a2(t,e,n){const i=new Map;bn(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],s=o.transform,l=e.data.field(o.field);i.set(o.field,o4(s,l,n[r]))}return i}function l2(t,e,n){const i=new Map;for(const r of t){const o=r.transform,s=n.data.field(r.field);i.set(r.field,r4(o,s,e))}return i}class Iy extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c4 extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&l4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Hh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Hh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=TT();return this.mutations.forEach(r=>{const o=e.get(r.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(r.key)?null:l;const u=PT(s,l);u!==null&&i.set(r.key,u),s.isValidDocument()||s.convertToNoDocument(Bt.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),tn())}isEqual(e){return this.batchId===e.batchId&&Oc(this.mutations,e.mutations,(n,i)=>s2(n,i))&&Oc(this.baseMutations,e.baseMutations,(n,i)=>s2(n,i))}}class Py{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){bn(e.mutations.length===i.length);let r=function(){return XN}();const o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new Py(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vi,sn;function p4(t){switch(t){default:return Ft();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function kT(t){if(t===void 0)return Ja("GRPC error has no .code"),$e.UNKNOWN;switch(t){case vi.OK:return $e.OK;case vi.CANCELLED:return $e.CANCELLED;case vi.UNKNOWN:return $e.UNKNOWN;case vi.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case vi.INTERNAL:return $e.INTERNAL;case vi.UNAVAILABLE:return $e.UNAVAILABLE;case vi.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case vi.NOT_FOUND:return $e.NOT_FOUND;case vi.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case vi.ABORTED:return $e.ABORTED;case vi.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case vi.DATA_LOSS:return $e.DATA_LOSS;default:return Ft()}}(sn=vi||(vi={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new vu([4294967295,4294967295],0);function u2(t){const e=m4().encode(t),n=new tT;return n.update(e),new Uint8Array(n.digest())}function c2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vu([n,i],0),new vu([r,o],0)]}class Ny{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ph(`Invalid padding: ${n}`);if(i<0)throw new Ph(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ph(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ph(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vu.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(vu.fromNumber(i)));return r.compare(g4)===1&&(r=new vu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=u2(e),[i,r]=c2(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Ny(o,r,n);return i.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;const n=u2(e),[i,r]=c2(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ph extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Mf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new um(Bt.min(),r,new Qn(dn),Ya(),tn())}}class Mf{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Mf(i,n,tn(),tn(),tn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class LT{constructor(e,n){this.targetId=e,this.me=n}}class RT{constructor(e,n,i=ar.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class h2{constructor(){this.fe=0,this.ge=d2(),this.pe=ar.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=tn(),n=tn(),i=tn();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ft()}}),new Mf(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=d2()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class v4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ya(),this.qe=f2(),this.Qe=new Qn(dn)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ft()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(D0(o))if(i===0){const s=new Et(o.path);this.Ue(n,s,Er.newNoDocument(s,Bt.min()))}else bn(i===1);else{const s=this.Ye(n);if(s!==i){const l=this.Ze(e),u=l?this.Xe(l,e,s):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let s,l;try{s=Iu(i).toUint8Array()}catch(u){if(u instanceof cT)return Fc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ny(s,r,o)}catch(u){return Fc(u instanceof Ph?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&D0(l.target)){const u=new Et(l.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Er.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let i=tn();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const r=new um(e,n,this.Qe,this.ke,i);return this.ke=Ya(),this.qe=f2(),this.Qe=new Qn(dn),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new h2,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new or(dn),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||dt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new h2),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function f2(){return new Qn(Et.comparator)}function d2(){return new Qn(Et.comparator)}const y4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w4={and:"AND",or:"OR"};class x4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function O0(t,e){return t.useProto3Json||im(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S4(t,e){return Ip(t,e.toTimestamp())}function wa(t){return bn(!!t),Bt.fromTimestamp(function(n){const i=Hl(n);return new Pi(i.seconds,i.nanos)}(t))}function ky(t,e){return V0(t,e).canonicalString()}function V0(t,e){const n=function(r){return new jn(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DT(t){const e=jn.fromString(t);return bn(UT(e)),e}function B0(t,e){return ky(t.databaseId,e.path)}function gg(t,e){const n=DT(e);if(n.get(1)!==t.databaseId.projectId)throw new yt($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new yt($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Et(OT(n))}function FT(t,e){return ky(t.databaseId,e)}function T4(t){const e=DT(t);return e.length===4?jn.emptyPath():OT(e)}function U0(t){return new jn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OT(t){return bn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function p2(t,e,n){return{name:B0(t,e),fields:n.value.mapValue.fields}}function E4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ft()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(c,f){return c.useProto3Json?(bn(f===void 0||typeof f=="string"),ar.fromBase64String(f||"")):(bn(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ar.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(c){const f=c.code===void 0?$e.UNKNOWN:kT(c.code);return new yt(f,c.message||"")}(s);n=new RT(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=gg(t,i.document.name),o=wa(i.document.updateTime),s=i.document.createTime?wa(i.document.createTime):Bt.min(),l=new os({mapValue:{fields:i.document.fields}}),u=Er.newFoundDocument(r,o,s,l),c=i.targetIds||[],f=i.removedTargetIds||[];n=new $d(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=gg(t,i.document),o=i.readTime?wa(i.readTime):Bt.min(),s=Er.newNoDocument(r,o),l=i.removedTargetIds||[];n=new $d([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=gg(t,i.document),o=i.removedTargetIds||[];n=new $d([],o,r,null)}else{if(!("filter"in e))return Ft();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,s=new d4(r,o),l=i.targetId;n=new LT(l,s)}}return n}function A4(t,e){let n;if(e instanceof Rf)n={update:p2(t,e.key,e.value)};else if(e instanceof Iy)n={delete:B0(t,e.key)};else if(e instanceof Lu)n={update:p2(t,e.key,e.data),updateMask:M4(e.fieldMask)};else{if(!(e instanceof c4))return Ft();n={verify:B0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){const l=s.transform;if(l instanceof bp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Sf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cp)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw Ft()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:S4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ft()}(t,e.precondition)),n}function b4(t,e){return t&&t.length>0?(bn(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?wa(r.updateTime):wa(o);return s.isEqual(Bt.min())&&(s=wa(o)),new a4(s,r.transformResults||[])}(n,e))):[]}function C4(t,e){return{documents:[FT(t,e.path)]}}function I4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=FT(t,r);const o=function(c){if(c.length!==0)return BT(Ta.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(f=>function(y){return{field:Qu(y.field),direction:k4(y.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=O0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function P4(t){let e=T4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){bn(i===1);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(g){const y=VT(g);return y instanceof Ta&&pT(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(g){return g.map(y=>function(N){return new Ap(Xu(N.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,im(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,w=g.values||[];return new Ep(w,y)}(n.startAt));let c=null;return n.endAt&&(c=function(g){const y=!g.before,w=g.values||[];return new Ep(w,y)}(n.endAt)),$N(e,r,s,o,l,"F",u,c)}function N4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Xu(n.unaryFilter.field);return Ci.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Xu(n.unaryFilter.field);return Ci.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xu(n.unaryFilter.field);return Ci.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xu(n.unaryFilter.field);return Ci.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ft()}}(t):t.fieldFilter!==void 0?function(n){return Ci.create(Xu(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ft()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ta.create(n.compositeFilter.filters.map(i=>VT(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ft()}}(n.compositeFilter.op))}(t):Ft()}function k4(t){return y4[t]}function L4(t){return _4[t]}function R4(t){return w4[t]}function Qu(t){return{fieldPath:t.canonicalString()}}function Xu(t){return ir.fromServerFormat(t.fieldPath)}function BT(t){return t instanceof Ci?function(n){if(n.op==="=="){if(e2(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NAN"}};if(X1(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e2(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NOT_NAN"}};if(X1(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(n.field),op:L4(n.op),value:n.value}}}(t):t instanceof Ta?function(n){const i=n.getFilters().map(r=>BT(r));return i.length===1?i[0]:{compositeFilter:{op:R4(n.op),filters:i}}}(t):Ft()}function M4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,i,r,o=Bt.min(),s=Bt.min(),l=ar.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new El(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.ct=e}}function F4(t){const e=P4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?F0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.un=new V4}addToCollectionParentIndex(e,n){return this.un.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(ql.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(ql.min())}updateCollectionGroup(e,n,i){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class V4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new or(jn.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new or(jn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Uc(0)}static kn(){return new Uc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.changes=new Yc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?je.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Hh(i.mutation,r,Vs.empty(),Pi.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,tn()).next(()=>i))}getLocalViewOfDocuments(e,n,i=tn()){const r=du();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Ih();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const i=du();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,tn()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,i,r){let o=Ya();const s=qh(),l=function(){return qh()}();return n.forEach((u,c)=>{const f=i.get(c.key);r.has(c.key)&&(f===void 0||f.mutation instanceof Lu)?o=o.insert(c.key,c):f!==void 0?(s.set(c.key,f.mutation.getFieldMask()),Hh(f.mutation,c,f.mutation.getFieldMask(),Pi.now())):s.set(c.key,Vs.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,f)=>s.set(c,f)),n.forEach((c,f)=>{var g;return l.set(c,new U4(f,(g=s.get(c))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const i=qh();let r=new Qn((s,l)=>s-l),o=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=i.get(u)||Vs.empty();f=l.applyToLocalView(c,f),i.set(u,f);const g=(r.get(l.batchId)||tn()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const s=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,g=TT();f.forEach(y=>{if(!o.has(y)){const w=PT(n.get(y),i.get(y));w!==null&&g.set(y,w),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,g))}return je.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return Et.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):je.resolve(du());let l=-1,u=o;return s.next(c=>je.forEach(c,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),o.get(f)?je.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,tn())).next(f=>({batchId:l,changes:ST(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Et(n)).next(i=>{let r=Ih();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let s=Ih();return this.indexManager.getCollectionParents(e,o).next(l=>je.forEach(l,u=>{const c=function(g,y){return new rm(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(f=>{f.forEach((g,y)=>{s=s.insert(g,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((u,c)=>{const f=c.getKey();s.get(f)===null&&(s=s.insert(f,Er.newInvalidDocument(f)))});let l=Ih();return s.forEach((u,c)=>{const f=o.get(u);f!==void 0&&Hh(f.mutation,c,Vs.empty(),Pi.now()),sm(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return je.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:wa(r.createTime)}}(n)),je.resolve()}getNamedQuery(e,n){return je.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:F4(r.bundledQuery),readTime:wa(r.readTime)}}(n)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.overlays=new Qn(Et.comparator),this.Ir=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const i=du();return je.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),je.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),je.resolve()}getOverlaysForCollection(e,n,i){const r=du(),o=n.length+1,s=new Et(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return je.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Qn((c,f)=>c-f);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let f=o.get(c.largestBatchId);f===null&&(f=du(),o=o.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=du(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=r)););return je.resolve(l)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new f4(n,i));let o=this.Ir.get(n);o===void 0&&(o=tn(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(){this.Tr=new or(zi.Er),this.dr=new or(zi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new zi(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new zi(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Et(new jn([])),i=new zi(n,e),r=new zi(n,e+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Et(new jn([])),i=new zi(n,e),r=new zi(n,e+1);let o=tn();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new zi(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class zi{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Et.comparator(e.key,n.key)||dn(e.wr,n.wr)}static Ar(e,n){return dn(e.wr,n.wr)||Et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new or(zi.Er)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new h4(o,n,i,r);this.mutationQueue.push(s);for(const l of r)this.br=this.br.add(new zi(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return je.resolve(s)}lookupMutationBatch(e,n){return je.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return je.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new zi(n,0),r=new zi(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{const l=this.Dr(s.wr);o.push(l)}),je.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new or(dn);return n.forEach(r=>{const o=new zi(r,0),s=new zi(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{i=i.add(l.wr)})}),je.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;Et.isDocumentKey(o)||(o=o.child(""));const s=new zi(new Et(o),0);let l=new or(dn);return this.br.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.wr)),!0)},s),je.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){bn(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return je.forEach(n.mutations,r=>{const o=new zi(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new zi(n,0),r=this.br.firstAfterOrEqual(i);return je.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.Mr=e,this.docs=function(){return new Qn(Et.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return je.resolve(i?i.document.mutableCopy():Er.newInvalidDocument(n))}getEntries(e,n){let i=Ya();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Er.newInvalidDocument(r))}),je.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ya();const s=n.path,l=new Et(s.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||IN(CN(f),i)<=0||(r.has(f.key)||sm(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return je.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Ft()}Or(e,n){return je.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new $4(this)}getSize(e){return je.resolve(this.size)}}class $4 extends B4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),je.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.persistence=e,this.Nr=new Yc(n=>Ay(n),by),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ly,this.targetCount=0,this.kr=Uc.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),je.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Uc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.Kn(n),je.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),je.waitFor(o).next(()=>r)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return je.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),je.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),je.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return je.resolve(i)}containsKey(e,n){return je.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new xy(0),this.Kr=!1,this.Kr=!0,this.$r=new G4,this.referenceDelegate=e(this),this.Ur=new K4(this),this.indexManager=new O4,this.remoteDocumentCache=function(r){return new W4(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new D4(n),this.Gr=new q4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new j4(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){dt("MemoryPersistence","Starting transaction:",e);const r=new Y4(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return je.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Y4 extends NN{constructor(e){super(),this.currentSequenceNumber=e}}class Ry{constructor(e){this.persistence=e,this.Jr=new Ly,this.Yr=null}static Zr(e){return new Ry(e)}get Xr(){if(this.Yr)return this.Yr;throw Ft()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),je.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),je.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Xr,i=>{const r=Et.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,Bt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return je.or([()=>je.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=tn(),r=tn();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new My(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QI()?8:kN(YI())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Z4;return this.Xi(e,n,s).next(l=>{if(o.result=l,this.zi)return this.es(e,n,s,l.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(yh()<=ln.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",Zu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),je.resolve()):(yh()<=ln.DEBUG&&dt("QueryEngine","Query:",Zu(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(yh()<=ln.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",Zu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ya(n))):je.resolve())}Yi(e,n){if(r2(n))return je.resolve(null);let i=ya(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=F0(n,null,"F"),i=ya(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const s=tn(...o);return this.Ji.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.ts(n,l);return this.ns(n,c,s,u.readTime)?this.Yi(e,F0(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,i,r){return r2(n)||r.isEqual(Bt.min())?je.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const s=this.ts(n,o);return this.ns(n,s,i,r)?je.resolve(null):(yh()<=ln.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zu(n)),this.rs(e,s,n,bN(r,-1)).next(l=>l))})}ts(e,n){let i=new or(wT(e));return n.forEach((r,o)=>{sm(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return yh()<=ln.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",Zu(n)),this.Ji.getDocumentsMatchingQuery(e,n,ql.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Qn(dn),this._s=new Yc(o=>Ay(o),by),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function e3(t,e,n,i){return new X4(t,e,n,i)}async function zT(t,e){const n=Ut(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const s=[],l=[];let u=tn();for(const c of r){s.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of o){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:l}))})})}function t3(t,e){const n=Ut(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const g=c.batch,y=g.keys();let w=je.resolve();return y.forEach(N=>{w=w.next(()=>f.getEntry(u,N)).next(R=>{const F=c.docVersions.get(N);bn(F!==null),R.version.compareTo(F)<0&&(g.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),f.addEntry(R)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=tn();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function qT(t){const e=Ut(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function n3(t,e){const n=Ut(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const y=r.get(g);if(!y)return;l.push(n.Ur.removeMatchingKeys(o,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(o,f.addedDocuments,g)));let w=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(ar.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,i)),r=r.insert(g,w),function(R,F,T){return R.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(y,w,f)&&l.push(n.Ur.updateTargetData(o,w))});let u=Ya(),c=tn();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(i3(o,s,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!i.isEqual(Bt.min())){const f=n.Ur.getLastRemoteSnapshotVersion(o).next(g=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(f)}return je.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.os=r,o))}function i3(t,e,n){let i=tn(),r=tn();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=Ya();return n.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Bt.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):dt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:s,Is:r}})}function r3(t,e){const n=Ut(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function o3(t,e){const n=Ut(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,je.resolve(r)):n.Ur.allocateTargetId(i).next(s=>(r=new El(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function z0(t,e,n){const i=Ut(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r))}catch(s){if(!Lf(s))throw s;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function m2(t,e,n){const i=Ut(t);let r=Bt.min(),o=tn();return i.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,f){const g=Ut(u),y=g._s.get(f);return y!==void 0?je.resolve(g.os.get(y)):g.Ur.getTargetData(c,f)}(i,s,ya(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>i.ss.getDocumentsMatchingQuery(s,e,n?r:Bt.min(),n?o:tn())).next(l=>(s3(i,YN(e),l),{documents:l,Ts:o})))}function s3(t,e,n){let i=t.us.get(e)||Bt.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class g2{constructor(){this.activeTargetIds=n4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a3{constructor(){this.so=new g2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new g2,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function vg(){return wd===null?wd=function(){return 268435456+Math.round(2147483648*Math.random())}():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="WebChannelConnection";class h3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,s){const l=vg(),u=this.xo(n,i.toUriEncodedString());dt("RestConnection",`Sending RPC '${n}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,u,c,r).then(f=>(dt("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Fc("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",r),f})}Lo(n,i,r,o,s,l){return this.Mo(n,i,r,o,s)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}xo(n,i){const r=u3[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=vg();return new Promise((s,l)=>{const u=new nT;u.setWithCredentials(!0),u.listenOnce(iT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gd.NO_ERROR:const f=u.getResponseJson();dt(vr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Gd.TIMEOUT:dt(vr,`RPC '${e}' ${o} timed out`),l(new yt($e.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const g=u.getStatus();if(dt(vr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const N=function(F){const T=F.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(T)>=0?T:$e.UNKNOWN}(w.status);l(new yt(N,w.message))}else l(new yt($e.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new yt($e.UNAVAILABLE,"Connection failed."));break;default:Ft()}}finally{dt(vr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(r);dt(vr,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=vg(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sT(),l=oT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=o.join("");dt(vr,`Creating RPC '${e}' stream ${r}: ${f}`,u);const g=s.createWebChannel(f,u);let y=!1,w=!1;const N=new c3({Io:F=>{w?dt(vr,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(y||(dt(vr,`Opening RPC '${e}' stream ${r} transport.`),g.open(),y=!0),dt(vr,`RPC '${e}' stream ${r} sending:`,F),g.send(F))},To:()=>g.close()}),R=(F,T,I)=>{F.listen(T,P=>{try{I(P)}catch(G){setTimeout(()=>{throw G},0)}})};return R(g,Ch.EventType.OPEN,()=>{w||(dt(vr,`RPC '${e}' stream ${r} transport opened.`),N.yo())}),R(g,Ch.EventType.CLOSE,()=>{w||(w=!0,dt(vr,`RPC '${e}' stream ${r} transport closed`),N.So())}),R(g,Ch.EventType.ERROR,F=>{w||(w=!0,Fc(vr,`RPC '${e}' stream ${r} transport errored:`,F),N.So(new yt($e.UNAVAILABLE,"The operation could not be completed")))}),R(g,Ch.EventType.MESSAGE,F=>{var T;if(!w){const I=F.data[0];bn(!!I);const P=I,G=P.error||((T=P[0])===null||T===void 0?void 0:T.error);if(G){dt(vr,`RPC '${e}' stream ${r} received error:`,G);const J=G.status;let Q=function(O){const H=vi[O];if(H!==void 0)return kT(H)}(J),D=G.message;Q===void 0&&(Q=$e.INTERNAL,D="Unknown error status: "+J+" with message "+G.message),w=!0,N.So(new yt(Q,D)),g.close()}else dt(vr,`RPC '${e}' stream ${r} received:`,I),N.bo(I)}}),R(l,rT.STAT_EVENT,F=>{F.stat===k0.PROXY?dt(vr,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===k0.NOPROXY&&dt(vr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function yg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){return new x4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&dt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n,i,r,o,s,l,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new HT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$e.RESOURCE_EXHAUSTED?(Ja(n.toString()),Ja("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new yt($e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f3 extends GT{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=E4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Bt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?wa(s.readTime):Bt.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=U0(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=D0(u)?{documents:C4(o,u)}:{query:I4(o,u)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=MT(o,s.resumeToken);const c=O0(o,s.expectedCount);c!==null&&(l.expectedCount=c)}else if(s.snapshotVersion.compareTo(Bt.min())>0){l.readTime=Ip(o,s.snapshotVersion.toTimestamp());const c=O0(o,s.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=N4(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=U0(this.serializer),n.removeTarget=e,this.a_(n)}}class d3 extends GT{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return bn(!!e.streamToken),this.lastStreamToken=e.streamToken,bn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=b4(e.writeResults,e.commitTime),i=wa(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=U0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>A4(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new yt($e.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,V0(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new yt($e.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(e,V0(n,i),r,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new yt($e.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class m3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ja(n),this.D_=!1):dt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(async()=>{Ru(this)&&(dt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Ut(u);c.L_.add(4),await Df(c),c.q_.set("Unknown"),c.L_.delete(4),await hm(c)}(this))})}),this.q_=new m3(i,r)}}async function hm(t){if(Ru(t))for(const e of t.B_)await e(!0)}async function Df(t){for(const e of t.B_)await e(!1)}function jT(t,e){const n=Ut(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vy(n)?Oy(n):Zc(n).r_()&&Fy(n,e))}function Dy(t,e){const n=Ut(t),i=Zc(n);n.N_.delete(e),i.r_()&&WT(n,e),n.N_.size===0&&(i.r_()?i.o_():Ru(n)&&n.q_.set("Unknown"))}function Fy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zc(t).A_(e)}function WT(t,e){t.Q_.xe(e),Zc(t).R_(e)}function Oy(t){t.Q_=new v4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zc(t).start(),t.q_.v_()}function Vy(t){return Ru(t)&&!Zc(t).n_()&&t.N_.size>0}function Ru(t){return Ut(t).L_.size===0}function $T(t){t.Q_=void 0}async function v3(t){t.q_.set("Online")}async function y3(t){t.N_.forEach((e,n)=>{Fy(t,e)})}async function _3(t,e){$T(t),Vy(t)?(t.q_.M_(e),Oy(t)):t.q_.set("Unknown")}async function w3(t,e,n){if(t.q_.set("Online"),e instanceof RT&&e.state===2&&e.cause)try{await async function(r,o){const s=o.cause;for(const l of o.targetIds)r.N_.has(l)&&(await r.remoteSyncer.rejectListen(l,s),r.N_.delete(l),r.Q_.removeTarget(l))}(t,e)}catch(i){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pp(t,i)}else if(e instanceof $d?t.Q_.Ke(e):e instanceof LT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Bt.min()))try{const i=await qT(t.localStore);n.compareTo(i)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.N_.get(c);f&&o.N_.set(c,f.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,c)=>{const f=o.N_.get(u);if(!f)return;o.N_.set(u,f.withResumeToken(ar.EMPTY_BYTE_STRING,f.snapshotVersion)),WT(o,u);const g=new El(f.target,u,c,f.sequenceNumber);Fy(o,g)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){dt("RemoteStore","Failed to raise snapshot:",i),await Pp(t,i)}}async function Pp(t,e,n){if(!Lf(e))throw e;t.L_.add(1),await Df(t),t.q_.set("Offline"),n||(n=()=>qT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{dt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hm(t)})}function KT(t,e){return e().catch(n=>Pp(t,n,e))}async function fm(t){const e=Ut(t),n=Gl(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;x3(e);)try{const r=await r3(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,S3(e,r)}catch(r){await Pp(e,r)}JT(e)&&YT(e)}function x3(t){return Ru(t)&&t.O_.length<10}function S3(t,e){t.O_.push(e);const n=Gl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function JT(t){return Ru(t)&&!Gl(t).n_()&&t.O_.length>0}function YT(t){Gl(t).start()}async function T3(t){Gl(t).p_()}async function E3(t){const e=Gl(t);for(const n of t.O_)e.m_(n.mutations)}async function A3(t,e,n){const i=t.O_.shift(),r=Py.from(i,e,n);await KT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await fm(t)}async function b3(t,e){e&&Gl(t).V_&&await async function(i,r){if(function(s){return p4(s)&&s!==$e.ABORTED}(r.code)){const o=i.O_.shift();Gl(i).s_(),await KT(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await fm(i)}}(t,e),JT(t)&&YT(t)}async function y2(t,e){const n=Ut(t);n.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const i=Ru(n);n.L_.add(3),await Df(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hm(n)}async function C3(t,e){const n=Ut(t);e?(n.L_.delete(2),await hm(n)):e||(n.L_.add(2),await Df(n),n.q_.set("Unknown"))}function Zc(t){return t.K_||(t.K_=function(n,i,r){const o=Ut(n);return o.w_(),new f3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:v3.bind(null,t),Ro:y3.bind(null,t),mo:_3.bind(null,t),d_:w3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Vy(t)?Oy(t):t.q_.set("Unknown")):(await t.K_.stop(),$T(t))})),t.K_}function Gl(t){return t.U_||(t.U_=function(n,i,r){const o=Ut(n);return o.w_(),new d3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:T3.bind(null,t),mo:b3.bind(null,t),f_:E3.bind(null,t),g_:A3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fm(t)):(await t.U_.stop(),t.O_.length>0&&(dt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ol,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const s=Date.now()+i,l=new By(e,n,s,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uy(t,e){if(Ja("AsyncQueue",`${e}: ${t}`),Lf(t))return new yt($e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Et.comparator(n.key,i.key):(n,i)=>Et.comparator(n.key,i.key),this.keyedMap=Ih(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new Ac(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ac)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ac;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.W_=new Qn(Et.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ft():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class zc{constructor(e,n,i,r,o,s,l,u,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new zc(e,n,Ac.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class P3{constructor(){this.queries=w2(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ut(n),o=r.queries;r.queries=w2(),o.forEach((s,l)=>{for(const u of l.j_)u.onError(i)})})(this,new yt($e.ABORTED,"Firestore shutting down"))}}function w2(){return new Yc(t=>_T(t),om)}async function N3(t,e){const n=Ut(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new I3,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(s){const l=Uy(s,`Initialization of query '${Zu(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&zy(n)}async function k3(t,e){const n=Ut(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function L3(t,e){const n=Ut(t);let i=!1;for(const r of e){const o=r.query,s=n.queries.get(o);if(s){for(const l of s.j_)l.X_(r)&&(i=!0);s.z_=r}}i&&zy(n)}function R3(t,e,n){const i=Ut(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function zy(t){t.Y_.forEach(e=>{e.next()})}var q0,x2;(x2=q0||(q0={})).ea="default",x2.Cache="cache";class M3{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new zc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=zc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==q0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.key=e}}class QT{constructor(e){this.key=e}}class D3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=tn(),this.mutatedKeys=tn(),this.Aa=wT(e),this.Ra=new Ac(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new _2,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,g)=>{const y=r.get(f),w=sm(this.query,g)?g:null,N=!!y&&this.mutatedKeys.has(y.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;y&&w?y.data.isEqual(w.data)?N!==R&&(i.track({type:3,doc:w}),F=!0):this.ga(y,w)||(i.track({type:2,doc:w}),F=!0,(u&&this.Aa(w,u)>0||c&&this.Aa(w,c)<0)&&(l=!0)):!y&&w?(i.track({type:0,doc:w}),F=!0):y&&!w&&(i.track({type:1,doc:y}),F=!0,(u||c)&&(l=!0)),F&&(w?(s=s.add(w),o=R?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),i.track({type:1,doc:f})}return{Ra:s,fa:i,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((f,g)=>function(w,N){const R=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft()}};return R(w)-R(N)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(i),r=r!=null&&r;const l=n&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,c=u!==this.Ea;return this.Ea=u,s.length!==0||c?{snapshot:new zc(this.query,e.Ra,o,s,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _2,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=tn(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new QT(i))}),this.da.forEach(i=>{e.has(i)||n.push(new ZT(i))}),n}ba(e){this.Ta=e.Ts,this.da=tn();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return zc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class F3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class O3{constructor(e){this.key=e,this.va=!1}}class V3{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Yc(l=>_T(l),om),this.Ma=new Map,this.xa=new Set,this.Oa=new Qn(Et.comparator),this.Na=new Map,this.La=new Ly,this.Ba={},this.ka=new Map,this.qa=Uc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function B3(t,e,n=!0){const i=rE(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await XT(i,e,n,!0),r}async function U3(t,e){const n=rE(t);await XT(n,e,!0,!1)}async function XT(t,e,n,i){const r=await o3(t.localStore,ya(e)),o=r.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return i&&(l=await z3(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&jT(t.remoteStore,r),l}async function z3(t,e,n,i,r){t.Ka=(g,y,w)=>async function(R,F,T,I){let P=F.view.ma(T);P.ns&&(P=await m2(R.localStore,F.query,!1).then(({documents:D})=>F.view.ma(D,P)));const G=I&&I.targetChanges.get(F.targetId),J=I&&I.targetMismatches.get(F.targetId)!=null,Q=F.view.applyChanges(P,R.isPrimaryClient,G,J);return T2(R,F.targetId,Q.wa),Q.snapshot}(t,g,y,w);const o=await m2(t.localStore,e,!0),s=new D3(e,o.Ts),l=s.ma(o.documents),u=Mf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=s.applyChanges(l,t.isPrimaryClient,u);T2(t,n,c.wa);const f=new F3(e,n,s);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function q3(t,e,n){const i=Ut(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!om(s,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await z0(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Dy(i.remoteStore,r.targetId),H0(i,r.targetId)}).catch(kf)):(H0(i,r.targetId),await z0(i.localStore,r.targetId,!0))}async function H3(t,e){const n=Ut(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dy(n.remoteStore,i.targetId))}async function G3(t,e,n){const i=Z3(t);try{const r=await function(s,l){const u=Ut(s),c=Pi.now(),f=l.reduce((w,N)=>w.add(N.key),tn());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Ya(),R=tn();return u.cs.getEntries(w,f).next(F=>{N=F,N.forEach((T,I)=>{I.isValidDocument()||(R=R.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,N)).next(F=>{g=F;const T=[];for(const I of l){const P=u4(I,g.get(I.key).overlayedDocument);P!=null&&T.push(new Lu(I.key,P,hT(P.value.mapValue),_a.exists(!0)))}return u.mutationQueue.addMutationBatch(w,c,T,l)}).next(F=>{y=F;const T=F.applyToLocalDocumentSet(g,R);return u.documentOverlayCache.saveOverlays(w,F.batchId,T)})}).then(()=>({batchId:y.batchId,changes:ST(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,u){let c=s.Ba[s.currentUser.toKey()];c||(c=new Qn(dn)),c=c.insert(l,u),s.Ba[s.currentUser.toKey()]=c}(i,r.batchId,n),await Ff(i,r.changes),await fm(i.remoteStore)}catch(r){const o=Uy(r,"Failed to persist write");n.reject(o)}}async function eE(t,e){const n=Ut(t);try{const i=await n3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const s=n.Na.get(o);s&&(bn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?bn(s.va):r.removedDocuments.size>0&&(bn(s.va),s.va=!1))}),await Ff(n,i,e)}catch(i){await kf(i)}}function S2(t,e,n){const i=Ut(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,s)=>{const l=s.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(s,l){const u=Ut(s);u.onlineState=l;let c=!1;u.queries.forEach((f,g)=>{for(const y of g.j_)y.Z_(l)&&(c=!0)}),c&&zy(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function j3(t,e,n){const i=Ut(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let s=new Qn(Et.comparator);s=s.insert(o,Er.newNoDocument(o,Bt.min()));const l=tn().add(o),u=new um(Bt.min(),new Map,new Qn(dn),s,l);await eE(i,u),i.Oa=i.Oa.remove(o),i.Na.delete(e),qy(i)}else await z0(i.localStore,e,!1).then(()=>H0(i,e,n)).catch(kf)}async function W3(t,e){const n=Ut(t),i=e.batch.batchId;try{const r=await t3(n.localStore,e);nE(n,i,null),tE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ff(n,r)}catch(r){await kf(r)}}async function $3(t,e,n){const i=Ut(t);try{const r=await function(s,l){const u=Ut(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(g=>(bn(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(c,g))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(i.localStore,e);nE(i,e,n),tE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ff(i,r)}catch(r){await kf(r)}}function tE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nE(t,e,n){const i=Ut(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function H0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||iE(t,i)})}function iE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),qy(t))}function T2(t,e,n){for(const i of n)i instanceof ZT?(t.La.addReference(i.key,e),K3(t,i)):i instanceof QT?(dt("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||iE(t,i.key)):Ft()}function K3(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(dt("SyncEngine","New document in limbo: "+n),t.xa.add(i),qy(t))}function qy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Et(jn.fromString(e)),i=t.qa.next();t.Na.set(i,new O3(n)),t.Oa=t.Oa.insert(n,i),jT(t.remoteStore,new El(ya(yT(n.path)),i,"TargetPurposeLimboResolution",xy.oe))}}async function Ff(t,e,n){const i=Ut(t),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((l,u)=>{s.push(i.Ka(u,e,n).then(c=>{var f;if((c||n)&&i.isPrimaryClient){const g=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(c){r.push(c);const g=My.Wi(u.targetId,c);o.push(g)}}))}),await Promise.all(s),i.Ca.d_(r),await async function(u,c){const f=Ut(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>je.forEach(c,y=>je.forEach(y.$i,w=>f.persistence.referenceDelegate.addReference(g,y.targetId,w)).next(()=>je.forEach(y.Ui,w=>f.persistence.referenceDelegate.removeReference(g,y.targetId,w)))))}catch(g){if(!Lf(g))throw g;dt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of c){const y=g.targetId;if(!g.fromCache){const w=f.os.get(y),N=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(y,R)}}}(i.localStore,o))}async function J3(t,e){const n=Ut(t);if(!n.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const i=await zT(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new yt($e.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ff(n,i.hs)}}function Y3(t,e){const n=Ut(t),i=n.Na.get(e);if(i&&i.va)return tn().add(i.key);{let r=tn();const o=n.Ma.get(e);if(!o)return r;for(const s of o){const l=n.Fa.get(s);r=r.unionWith(l.view.Va)}return r}}function rE(t){const e=Ut(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j3.bind(null,e),e.Ca.d_=L3.bind(null,e.eventManager),e.Ca.$a=R3.bind(null,e.eventManager),e}function Z3(t){const e=Ut(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$3.bind(null,e),e}class Np{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return e3(this.persistence,new Q4,e.initialUser,this.serializer)}Ga(e){return new J4(Ry.Zr,this.serializer)}Wa(e){return new a3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Np.provider={build:()=>new Np};class G0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>S2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=J3.bind(null,this.syncEngine),await C3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P3}()}createDatastore(e){const n=cm(e.databaseInfo.databaseId),i=function(o){return new h3(o)}(e.databaseInfo);return function(o,s,l,u){return new p3(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,l){return new g3(i,r,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>S2(this.syncEngine,n,0),function(){return v2.D()?new v2:new l3}())}createSyncEngine(e,n){return function(r,o,s,l,u,c,f){const g=new V3(r,o,s,l,u,c);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ut(r);dt("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Df(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}G0.provider={build:()=>new G0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ja("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Sr.UNAUTHENTICATED,this.clientId=lT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async s=>{dt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(dt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ol;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Uy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function _g(t,e){t.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await zT(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function E2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ek(t);dt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>y2(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>y2(e.remoteStore,r)),t._onlineComponents=e}async function ek(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){dt("FirestoreClient","Using user provided OfflineComponentProvider");try{await _g(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===$e.FAILED_PRECONDITION||r.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Fc("Error using user provided cache. Falling back to memory cache: "+n),await _g(t,new Np)}}else dt("FirestoreClient","Using default OfflineComponentProvider"),await _g(t,new Np);return t._offlineComponents}async function oE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(dt("FirestoreClient","Using user provided OnlineComponentProvider"),await E2(t,t._uninitializedComponentsProvider._online)):(dt("FirestoreClient","Using default OnlineComponentProvider"),await E2(t,new G0))),t._onlineComponents}function tk(t){return oE(t).then(e=>e.syncEngine)}async function nk(t){const e=await oE(t),n=e.eventManager;return n.onListen=B3.bind(null,e.syncEngine),n.onUnlisten=q3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H3.bind(null,e.syncEngine),n}function ik(t,e,n={}){const i=new Ol;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,c){const f=new Q3({next:y=>{f.Za(),s.enqueueAndForget(()=>k3(o,g)),y.fromCache&&u.source==="server"?c.reject(new yt($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new M3(l,f,{includeMetadataChanges:!0,_a:!0});return N3(o,g)}(await nk(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e,n){if(!n)throw new yt($e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rk(t,e,n,i){if(e===!0&&i===!0)throw new yt($e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b2(t){if(!Et.isDocumentKey(t))throw new yt($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function C2(t){if(Et.isDocumentKey(t))throw new yt($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ft()}function qc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new yt($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hy(t);throw new yt($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new yt($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new yt($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new yt($e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new yt($e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new yt($e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I2({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new yt($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I2(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new vN;switch(i.type){case"firstParty":return new xN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new yt($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=A2.get(n);i&&(dt("ComponentProvider","Removing Datastore"),A2.delete(n),i.terminate())}(this),Promise.resolve()}}function ok(t,e,n,i={}){var r;const o=(t=qc(t,dm))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Fc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=Sr.MOCK_USER;else{l=JI(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new yt($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Sr(c)}t._authCredentials=new yN(new aT(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new pm(this.firestore,e,this._query)}}class ls{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ls(this.firestore,e,this._key)}}class Vl extends pm{constructor(e,n,i){super(e,n,yT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ls(this.firestore,null,new Et(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function sk(t,e,...n){if(t=df(t),aE("collection","path",e),t instanceof dm){const i=jn.fromString(e,...n);return C2(i),new Vl(t,null,i)}{if(!(t instanceof ls||t instanceof Vl))throw new yt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(jn.fromString(e,...n));return C2(i),new Vl(t.firestore,null,i)}}function lE(t,e,...n){if(t=df(t),arguments.length===1&&(e=lT.newId()),aE("doc","path",e),t instanceof dm){const i=jn.fromString(e,...n);return b2(i),new ls(t,null,new Et(i))}{if(!(t instanceof ls||t instanceof Vl))throw new yt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(jn.fromString(e,...n));return b2(i),new ls(t.firestore,t instanceof Vl?t.converter:null,new Et(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new HT(this,"async_queue_retry"),this.Vu=()=>{const i=yg();i&&dt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=yg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=yg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ol;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lf(e))throw e;dt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(i);throw Ja("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=By.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Ft()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class mm extends dm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new P2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P2(e),this._firestoreClient=void 0,await e}}}function ak(t,e){const n=typeof t=="object"?t:rN(),i=typeof t=="string"?t:"(default)",r=eN(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=$I("firestore");o&&ok(r,...o)}return r}function uE(t){if(t._terminated)throw new yt($e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lk(t),t._firestoreClient}function lk(t){var e,n,i;const r=t._freezeSettings(),o=function(l,u,c,f){return new MN(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,sE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new X3(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hc(ar.fromBase64String(e))}catch(n){throw new yt($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hc(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new yt($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new yt($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new yt($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dn(this._lat,e._lat)||dn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=/^__.*__$/;class ck{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Lu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rf(e,this.data,n,this.fieldTransforms)}}function hE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft()}}class $y{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $y(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hE(this.Cu)&&uk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hk{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||cm(e)}Qu(e,n,i,r=!1){return new $y({Cu:e,methodName:n,qu:i,path:ir.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fk(t){const e=t._freezeSettings(),n=cm(t._databaseId);return new hk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dk(t,e,n,i,r,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);mE("Data must be an object, but it was:",s,i);const l=dE(i,s);let u,c;if(o.merge)u=new Vs(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const g of o.mergeFields){const y=pk(e,g,n);if(!s.contains(y))throw new yt($e.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);gk(f,y)||f.push(y)}u=new Vs(f),c=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,c=s.fieldTransforms;return new ck(new os(l),u,c)}function fE(t,e){if(pE(t=df(t)))return mE("Unsupported field value:",e,t),dE(t,e);if(t instanceof cE)return function(i,r){if(!hE(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let s=0;for(const l of i){let u=fE(l,r.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=df(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return i4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Pi.fromDate(i);return{timestampValue:Ip(r.serializer,o)}}if(i instanceof Pi){const o=new Pi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ip(r.serializer,o)}}if(i instanceof jy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hc)return{bytesValue:MT(r.serializer,i._byteString)};if(i instanceof ls){const o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ky(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Wy)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Cy(l.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Hy(i)}`)}(t,e)}function dE(t,e){const n={};return uT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jc(t,(i,r)=>{const o=fE(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function pE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pi||t instanceof jy||t instanceof Hc||t instanceof ls||t instanceof cE||t instanceof Wy)}function mE(t,e,n){if(!pE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Hy(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function pk(t,e,n){if((e=df(e))instanceof Gy)return e._internalPath;if(typeof e=="string")return gE(t,e);throw kp("Field path arguments must be of type string or ",t,!1,void 0,n)}const mk=new RegExp("[~\\*/\\[\\]]");function gE(t,e,n){if(e.search(mk)>=0)throw kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gy(...e.split("."))._internalPath}catch{throw kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kp(t,e,n,i,r){const o=i&&!i.isEmpty(),s=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${i}`),s&&(u+=` in document ${r}`),u+=")"),new yt($e.INVALID_ARGUMENT,l+t+u)}function gk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ls(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vk extends vE{data(){return super.data()}}function yE(t,e){return typeof e=="string"?gE(t,e):e instanceof Gy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new yt($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _k{convertValue(e,n="none"){switch(Pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Iu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ft()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Jc(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>ui(s.doubleValue));return new Wy(o)}convertGeoPoint(e){return new jy(ui(e.latitude),ui(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ty(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(yf(e));default:return null}}convertTimestamp(e){const n=Hl(e);return new Pi(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=jn.fromString(e);bn(UT(i));const r=new _f(i.get(1),i.get(3)),o=new Et(i.popFirst(5));return r.isEqual(n)||Ja(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xk extends vE{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(yE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Kd extends xk{data(e={}){return super.data(e)}}class Sk{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new xd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Kd(this._firestore,this._userDataWriter,i.key,i,new xd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new yt($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>{const u=new Kd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Kd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,f=-1;return l.type!==0&&(c=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:Tk(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Tk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft()}}class Ek extends _k{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ls(this.firestore,null,n)}}function Ak(t){t=qc(t,pm);const e=qc(t.firestore,mm),n=uE(e),i=new Ek(e);return yk(t._query),ik(n,t._query).then(r=>new Sk(e,i,t,r))}function bk(t,e,n){t=qc(t,ls);const i=qc(t.firestore,mm),r=wk(t.converter,e);return _E(i,[dk(fk(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,_a.none())])}function Ck(t){return _E(qc(t.firestore,mm),[new Iy(t._key,_a.none())])}function _E(t,e){return function(i,r){const o=new Ol;return i.asyncQueue.enqueueAndForget(async()=>G3(await tk(i),r,o)),o.promise}(uE(t),e)}(function(e,n=!0){(function(r){Kc=r})(iN),Sp(new pf("firestore",(i,{instanceIdentifier:r,options:o})=>{const s=i.getProvider("app").getImmediate(),l=new mm(new _N(i.getProvider("auth-internal")),new TN(i.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new yt($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(c.options.projectId,f)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Ec(K1,"4.7.3",e),Ec(K1,"4.7.3","esm2017")})();const wE={apiKey:"AIzaSyCAdwbA5u0oLe0m6oKryKwHx1XBiDEWnrk",authDomain:"izbb-taxi-management.firebaseapp.com",projectId:"izbb-taxi-management",storageBucket:"izbb-taxi-management.firebasestorage.app",messagingSenderId:"956551883987",appId:"1:956551883987:web:3f6bc14aad0c026f357826"},xE=!!wE.apiKey;let wg,SE;if(xE)try{const t=oN();t.length===0?wg=QS(wE):wg=t[0],SE=ak(wg),console.log("Firebase baaryla balatld.")}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn("Firebase yaplandrmas yaplmam. Ltfen .env dosyasn oluturun.");const N2=SE,Ky="taxi_stands",Jy=()=>{if(!xE)throw new Error("Ltfen 'services/firebaseConfig.ts' dosyasn ap Firebase ayarlarnz giriniz. (apiKey, projectId vb.)");if(!N2)throw new Error("Firebase veritaban balants balatlamad. API anahtarlarnz ve internet balantnz kontrol edin.");return N2},Ik=async()=>{const t=Jy();try{const e=await Ak(sk(t,Ky)),n=[];return e.forEach(i=>{n.push(i.data())}),n}catch(e){throw console.error("getStands Error:",e),e}},Lp=async t=>{const e=Jy(),n=lE(e,Ky,t.id);await bk(n,t)},Pk=async t=>{const e=Jy();await Ck(lE(e,Ky,t))},j0=(t,e)=>{var s,l,u,c;const n=[];if(["name","phone","city","district","neighborhood","street","address","capacity","ukomeDecisionNo","ukomeDate","ukomeSummary","status","officeType","responsibility","notes"].forEach(f=>{const g=String(t[f]||"").trim(),y=String(e[f]||"").trim();if(g!==y){if(!t[f]&&!e[f])return;n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:f,oldValue:g||"(Bo)",newValue:y||"(Bo)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}}),((s=t.location)==null?void 0:s.lat)!==((l=e.location)==null?void 0:l.lat)||((u=t.location)==null?void 0:u.lng)!==((c=e.location)==null?void 0:c.lng)){const f=t.location?`${t.location.lat}, ${t.location.lng}`:"(Konum Yok)",g=e.location?`${e.location.lat}, ${e.location.lng}`:"(Konum Yok)";f!==g&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"location",oldValue:f,newValue:g,changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}const r=(t.plates||[]).sort().join(", "),o=(e.plates||[]).sort().join(", ");return r!==o&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"plates",oldValue:r||"(Plaka Yok)",newValue:o||"(Plaka Yok)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate}),n};var W0=(t=>(t.ACTIVE="Aktif",t.PASSIVE="Pasif",t.PENDING="Onay Bekliyor",t))(W0||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),cn=(t,e)=>{const n=kt.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:u,...c},f)=>kt.createElement("svg",{ref:f,...Nk,width:r,height:r,stroke:i,strokeWidth:s?Number(o)*24/Number(r):o,className:["lucide",`lucide-${kk(t)}`,l].join(" "),...c},[...e.map(([g,y])=>kt.createElement(g,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=cn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=cn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=cn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=cn("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=cn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=cn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=cn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=cn("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=cn("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=cn("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=cn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=cn("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=cn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=cn("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=cn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=cn("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=cn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=cn("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=cn("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=cn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=cn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=cn("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=cn("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=cn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=cn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=cn("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=cn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=cn("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=cn("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=cn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=cn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=cn("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=cn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Yk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Zk,Qk;function Xk(){return{geminiUrl:Zk,vertexUrl:Qk}}function eL(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const s=Xk();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(o=s.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xa{}function st(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function v(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let c=0;c<u.length;c++){const f=u[c];v(f,e.slice(o+1),n[c])}else for(const c of u)v(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];v(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>d(l,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function tL(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),s=new Set;let l=-1;for(let u=0;u<r.length;u++)if(r[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const c=o[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}J0(t,r,o,0,s)}}function J0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])J0(u,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),u={};for(const c of l)u[c]=s[c];for(const[c,f]of Object.entries(u)){const g=[];for(const y of n.slice(i))y==="*"?g.push(c):g.push(y);v(s,g,f)}for(const c of l)delete s[c]}}else{const s=t;o in s&&J0(s[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zy(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nL(t){const e={},n=d(t,["operationName"]);n!=null&&v(e,["operationName"],n);const i=d(t,["resourceName"]);return i!=null&&v(e,["_url","resourceName"],i),e}function iL(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response","generateVideoResponse"]);return s!=null&&v(e,["response"],oL(s)),e}function rL(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response"]);return s!=null&&v(e,["response"],sL(s)),e}function oL(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>aL(s))),v(e,["generatedVideos"],o)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function sL(t){const e={},n=d(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>lL(s))),v(e,["generatedVideos"],o)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function aL(t){const e={},n=d(t,["video"]);return n!=null&&v(e,["video"],pL(n)),e}function lL(t){const e={},n=d(t,["_self"]);return n!=null&&v(e,["video"],mL(n)),e}function uL(t){const e={},n=d(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function cL(t){const e={},n=d(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function hL(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response"]);return s!=null&&v(e,["response"],fL(s)),e}function fL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&v(e,["parent"],i);const r=d(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function IE(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response"]);return s!=null&&v(e,["response"],dL(s)),e}function dL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&v(e,["parent"],i);const r=d(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function pL(t){const e={},n=d(t,["uri"]);n!=null&&v(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],Zy(i));const r=d(t,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function mL(t){const e={},n=d(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],Zy(i));const r=d(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var R2;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(R2||(R2={}));var M2;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(M2||(M2={}));var D2;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(D2||(D2={}));var Al;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Al||(Al={}));var F2;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(F2||(F2={}));var O2;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(O2||(O2={}));var V2;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(V2||(V2={}));var B2;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(B2||(B2={}));var U2;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(U2||(U2={}));var z2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(z2||(z2={}));var q2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(q2||(q2={}));var H2;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(H2||(H2={}));var G2;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(G2||(G2={}));var j2;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(j2||(j2={}));var W2;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(W2||(W2={}));var $2;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})($2||($2={}));var K2;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(K2||(K2={}));var J2;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(J2||(J2={}));var Y2;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Y2||(Y2={}));var Z2;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Z2||(Z2={}));var Q2;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Q2||(Q2={}));var Mp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Mp||(Mp={}));var X2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(X2||(X2={}));var e5;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(e5||(e5={}));var t5;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(t5||(t5={}));var Y0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Y0||(Y0={}));var n5;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(n5||(n5={}));var i5;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(i5||(i5={}));var Z0;(function(t){t.COLLECTION="COLLECTION"})(Z0||(Z0={}));var r5;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(r5||(r5={}));var o5;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(o5||(o5={}));var s5;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(s5||(s5={}));var a5;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(a5||(a5={}));var l5;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(l5||(l5={}));var u5;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(u5||(u5={}));var c5;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(c5||(c5={}));var h5;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(h5||(h5={}));var f5;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(f5||(f5={}));var d5;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(d5||(d5={}));var p5;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(p5||(p5={}));var m5;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(m5||(m5={}));var g5;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(g5||(g5={}));var v5;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(v5||(v5={}));var y5;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(y5||(y5={}));var _5;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_5||(_5={}));var w5;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(w5||(w5={}));var x5;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(x5||(x5={}));var S5;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(S5||(S5={}));var T5;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(T5||(T5={}));var E5;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(E5||(E5={}));var A5;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(A5||(A5={}));var b5;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(b5||(b5={}));var C5;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(C5||(C5={}));var I5;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(I5||(I5={}));var P5;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(P5||(P5={}));var N5;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(N5||(N5={}));var mc;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(mc||(mc={}));class Q0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class _h{get text(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const g=[];for(const y of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[w,N]of Object.entries(y))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(N!==null||N!==void 0)&&g.push(w);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;f=!0,c+=y.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const g of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[y,w]of Object.entries(g))y!=="inlineData"&&(w!==null||w!==void 0)&&f.push(y);g.inlineData&&typeof g.inlineData.data=="string"&&(c+=atob(g.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,r,o,s,l,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,r,o,s,l,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class k5{}class L5{}class gL{}class vL{}class yL{}class _L{}class R5{}class M5{}class D5{}class wL{}class Dp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Dp;let r;const o=e;return n?r=rL(o):r=iL(o),Object.assign(i,r),i}}class F5{}class O5{}class V5{}class B5{}class xL{}class SL{}class TL{}class Qy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Qy,o=hL(e);return Object.assign(i,o),i}}class EL{}class AL{}class bL{}class U5{}class CL{get text(){var e,n,i;let r="",o=!1;const s=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(l))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const s of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class IL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Xy,o=IE(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function PE(t,e){const n=pn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function NE(t){return Array.isArray(t)?t.map(e=>Fp(e)):[Fp(t)]}function Fp(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function kE(t){const e=Fp(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LE(t){const e=Fp(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function z5(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function RE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>z5(e)):[z5(t)]}function X0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function q5(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function H5(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function br(t){if(t==null)throw new Error("ContentUnion is required");return X0(t)?t:{role:"user",parts:RE(t)}}function e_(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=br(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=br(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>br(n)):[br(e)]}function us(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(q5(t)||H5(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[br(t)]}const e=[],n=[],i=X0(t[0]);for(const r of t){const o=X0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(q5(r)||H5(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:RE(n)}),e}function PL(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Al).includes(n[0].toUpperCase())?n[0].toUpperCase():Al.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Al).includes(i.toUpperCase())?i.toUpperCase():Al.TYPE_UNSPECIFIED})}}function Cc(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&PL(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Al).includes(l.toUpperCase())?l.toUpperCase():Al.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Cc(l);else if(i.includes(s)){const u=[];for(const c of l){if(c.type=="null"){e.nullable=!0;continue}u.push(Cc(c))}e[s]=u}else if(r.includes(s)){const u={};for(const[c,f]of Object.entries(l))u[c]=Cc(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function t_(t){return Cc(t)}function n_(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function i_(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Qc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Cc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Cc(e.response));return t}function Xc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function NL(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function el(t,e){if(typeof e!="string")throw new Error("name must be a string");return NL(t,e,"cachedContents")}function ME(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Yl(t){return Zy(t)}function kL(t){return t!=null&&typeof t=="object"&&"name"in t}function LL(t){return t!=null&&typeof t=="object"&&"video"in t}function RL(t){return t!=null&&typeof t=="object"&&"uri"in t}function DE(t){var e;let n;if(kL(t)&&(n=t.name),!(RL(t)&&(n=t.uri,n===void 0))&&!(LL(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function FE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function OE(t){for(const e of["models","tunedModels","publisherModels"])if(ML(t,e))return t[e];return[]}function ML(t,e){return t!==null&&typeof t=="object"&&e in t}function DL(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function FL(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const s=DL(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function VE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function OL(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function BE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function eh(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function UE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VL(t){const e={},n=d(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);const i=d(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>yR(s))),v(e,["inlinedResponses"],o)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["inlinedEmbedContentResponses"],o)}return e}function BL(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);const i=d(t,["gcsDestination","outputUriPrefix"]);i!=null&&v(e,["gcsUri"],i);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function UL(t){const e={},n=d(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);const i=d(t,["gcsUri"]);i!=null&&v(e,["gcsDestination","outputUriPrefix"],i);const r=d(t,["bigqueryUri"]);if(r!=null&&v(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jd(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata","displayName"]);i!=null&&v(e,["displayName"],i);const r=d(t,["metadata","state"]);r!=null&&v(e,["state"],UE(r));const o=d(t,["metadata","createTime"]);o!=null&&v(e,["createTime"],o);const s=d(t,["metadata","endTime"]);s!=null&&v(e,["endTime"],s);const l=d(t,["metadata","updateTime"]);l!=null&&v(e,["updateTime"],l);const u=d(t,["metadata","model"]);u!=null&&v(e,["model"],u);const c=d(t,["metadata","output"]);return c!=null&&v(e,["dest"],VL(BE(c))),e}function ev(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["displayName"]);i!=null&&v(e,["displayName"],i);const r=d(t,["state"]);r!=null&&v(e,["state"],UE(r));const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["createTime"]);s!=null&&v(e,["createTime"],s);const l=d(t,["startTime"]);l!=null&&v(e,["startTime"],l);const u=d(t,["endTime"]);u!=null&&v(e,["endTime"],u);const c=d(t,["updateTime"]);c!=null&&v(e,["updateTime"],c);const f=d(t,["model"]);f!=null&&v(e,["model"],f);const g=d(t,["inputConfig"]);g!=null&&v(e,["src"],zL(g));const y=d(t,["outputConfig"]);y!=null&&v(e,["dest"],BL(BE(y)));const w=d(t,["completionStats"]);return w!=null&&v(e,["completionStats"],w),e}function zL(t){const e={},n=d(t,["instancesFormat"]);n!=null&&v(e,["format"],n);const i=d(t,["gcsSource","uris"]);i!=null&&v(e,["gcsUri"],i);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function qL(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&v(n,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>vR(t,s))),v(n,["requests","requests"],o)}return n}function HL(t){const e={},n=d(t,["format"]);n!=null&&v(e,["instancesFormat"],n);const i=d(t,["gcsUri"]);i!=null&&v(e,["gcsSource","uris"],i);const r=d(t,["bigqueryUri"]);if(r!=null&&v(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function GL(t){const e={},n=d(t,["data"]);if(n!=null&&v(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function jL(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],eh(t,i)),n}function WL(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],eh(t,i)),n}function $L(t){const e={},n=d(t,["content"]);n!=null&&v(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],KL(i));const r=d(t,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);const o=d(t,["finishReason"]);o!=null&&v(e,["finishReason"],o);const s=d(t,["avgLogprobs"]);s!=null&&v(e,["avgLogprobs"],s);const l=d(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=d(t,["index"]);u!=null&&v(e,["index"],u);const c=d(t,["logprobsResult"]);c!=null&&v(e,["logprobsResult"],c);const f=d(t,["safetyRatings"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>w)),v(e,["safetyRatings"],y)}const g=d(t,["urlContextMetadata"]);return g!=null&&v(e,["urlContextMetadata"],g),e}function KL(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function zE(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>AR(o))),v(e,["parts"],r)}const i=d(t,["role"]);return i!=null&&v(e,["role"],i),e}function JL(t,e){const n={},i=d(t,["displayName"]);if(e!==void 0&&i!=null&&v(e,["batch","displayName"],i),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function YL(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=d(t,["dest"]);return e!==void 0&&r!=null&&v(e,["outputConfig"],UL(OL(r))),n}function G5(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["src"]);r!=null&&v(n,["batch","inputConfig"],qL(t,VE(t,r)));const o=d(e,["config"]);return o!=null&&JL(o,n),n}function ZL(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["model"],pn(t,i));const r=d(e,["src"]);r!=null&&v(n,["inputConfig"],HL(VE(t,r)));const o=d(e,["config"]);return o!=null&&YL(o,n),n}function QL(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["batch","displayName"],i),n}function XL(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["src"]);r!=null&&v(n,["batch","inputConfig"],sR(t,r));const o=d(e,["config"]);return o!=null&&QL(o,n),n}function eR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],eh(t,i)),n}function tR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],eh(t,i)),n}function nR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&v(e,["name"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);return o!=null&&v(e,["error"],o),e}function iR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&v(e,["name"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);return o!=null&&v(e,["error"],o),e}function rR(t,e){const n={},i=d(e,["contents"]);if(i!=null){let o=e_(t,i);Array.isArray(o)&&(o=o.map(s=>s)),v(n,["requests[]","request","content"],o)}const r=d(e,["config"]);return r!=null&&(v(n,["_self"],oR(r,n)),tL(n,{"requests[].*":"requests[].request.*"})),n}function oR(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const r=d(t,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);const o=d(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&v(e,["requests[]","outputDimensionality"],o),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sR(t,e){const n={},i=d(e,["fileName"]);i!=null&&v(n,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&v(n,["requests"],rR(t,r)),n}function aR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function lR(t){const e={},n=d(t,["id"]);n!=null&&v(e,["id"],n);const i=d(t,["args"]);i!=null&&v(e,["args"],i);const r=d(t,["name"]);if(r!=null&&v(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uR(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&v(e,["allowedFunctionNames"],n);const i=d(t,["mode"]);if(i!=null&&v(e,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cR(t,e,n){const i={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],zE(br(r)));const o=d(e,["temperature"]);o!=null&&v(i,["temperature"],o);const s=d(e,["topP"]);s!=null&&v(i,["topP"],s);const l=d(e,["topK"]);l!=null&&v(i,["topK"],l);const u=d(e,["candidateCount"]);u!=null&&v(i,["candidateCount"],u);const c=d(e,["maxOutputTokens"]);c!=null&&v(i,["maxOutputTokens"],c);const f=d(e,["stopSequences"]);f!=null&&v(i,["stopSequences"],f);const g=d(e,["responseLogprobs"]);g!=null&&v(i,["responseLogprobs"],g);const y=d(e,["logprobs"]);y!=null&&v(i,["logprobs"],y);const w=d(e,["presencePenalty"]);w!=null&&v(i,["presencePenalty"],w);const N=d(e,["frequencyPenalty"]);N!=null&&v(i,["frequencyPenalty"],N);const R=d(e,["seed"]);R!=null&&v(i,["seed"],R);const F=d(e,["responseMimeType"]);F!=null&&v(i,["responseMimeType"],F);const T=d(e,["responseSchema"]);T!=null&&v(i,["responseSchema"],t_(T));const I=d(e,["responseJsonSchema"]);if(I!=null&&v(i,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(n!==void 0&&P!=null){let V=P;Array.isArray(V)&&(V=V.map(ie=>bR(ie))),v(n,["safetySettings"],V)}const G=d(e,["tools"]);if(n!==void 0&&G!=null){let V=Xc(G);Array.isArray(V)&&(V=V.map(ie=>IR(Qc(ie)))),v(n,["tools"],V)}const J=d(e,["toolConfig"]);if(n!==void 0&&J!=null&&v(n,["toolConfig"],CR(J)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=d(e,["cachedContent"]);n!==void 0&&Q!=null&&v(n,["cachedContent"],el(t,Q));const D=d(e,["responseModalities"]);D!=null&&v(i,["responseModalities"],D);const C=d(e,["mediaResolution"]);C!=null&&v(i,["mediaResolution"],C);const O=d(e,["speechConfig"]);if(O!=null&&v(i,["speechConfig"],n_(O)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=d(e,["thinkingConfig"]);H!=null&&v(i,["thinkingConfig"],H);const k=d(e,["imageConfig"]);k!=null&&v(i,["imageConfig"],gR(k));const b=d(e,["enableEnhancedCivicAnswers"]);if(b!=null&&v(i,["enableEnhancedCivicAnswers"],b),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function hR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>$L(c))),v(e,["candidates"],u)}const r=d(t,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);const o=d(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const s=d(t,["responseId"]);s!=null&&v(e,["responseId"],s);const l=d(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function fR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],eh(t,i)),n}function dR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],eh(t,i)),n}function pR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function mR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function gR(t){const e={},n=d(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&v(e,["imageSize"],i),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vR(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["request","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let l=us(r);Array.isArray(l)&&(l=l.map(u=>zE(u))),v(n,["request","contents"],l)}const o=d(e,["metadata"]);o!=null&&v(n,["metadata"],o);const s=d(e,["config"]);return s!=null&&v(n,["request","generationConfig"],cR(t,s,d(n,["request"],{}))),n}function yR(t){const e={},n=d(t,["response"]);n!=null&&v(e,["response"],hR(n));const i=d(t,["error"]);return i!=null&&v(e,["error"],i),e}function _R(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function wR(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&v(e,["_query","pageToken"],r);const o=d(t,["filter"]);return e!==void 0&&o!=null&&v(e,["_query","filter"],o),n}function xR(t){const e={},n=d(t,["config"]);return n!=null&&_R(n,e),e}function SR(t){const e={},n=d(t,["config"]);return n!=null&&wR(n,e),e}function TR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Jd(s))),v(e,["batchJobs"],o)}return e}function ER(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ev(s))),v(e,["batchJobs"],o)}return e}function AR(t){const e={},n=d(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=d(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=d(t,["fileData"]);o!=null&&v(e,["fileData"],aR(o));const s=d(t,["functionCall"]);s!=null&&v(e,["functionCall"],lR(s));const l=d(t,["functionResponse"]);l!=null&&v(e,["functionResponse"],l);const u=d(t,["inlineData"]);u!=null&&v(e,["inlineData"],GL(u));const c=d(t,["text"]);c!=null&&v(e,["text"],c);const f=d(t,["thought"]);f!=null&&v(e,["thought"],f);const g=d(t,["thoughtSignature"]);g!=null&&v(e,["thoughtSignature"],g);const y=d(t,["videoMetadata"]);return y!=null&&v(e,["videoMetadata"],y),e}function bR(t){const e={},n=d(t,["category"]);if(n!=null&&v(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function CR(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&v(e,["retrievalConfig"],n);const i=d(t,["functionCallingConfig"]);return i!=null&&v(e,["functionCallingConfig"],uR(i)),e}function IR(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);const r=d(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>g)),v(e,["functionDeclarations"],f)}const s=d(t,["googleMaps"]);s!=null&&v(e,["googleMaps"],pR(s));const l=d(t,["googleSearch"]);l!=null&&v(e,["googleSearch"],mR(l));const u=d(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);const c=d(t,["urlContext"]);return c!=null&&v(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Za;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Za||(Za={}));class Mu{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PR extends Xa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mu(Za.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=G5(this.apiClient,e),i=n._url,r=st("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,u=l.requests,c=[];for(const f of u){const g=Object.assign({},f);if(g.systemInstruction){const y=g.systemInstruction;delete g.systemInstruction;const w=g.request;w.systemInstruction=y,g.request=w}c.push(g)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(s)i.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=ZL(this.apiClient,e);return l=st("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ev(f))}else{const c=G5(this.apiClient,e);return l=st("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Jd(f))}}async createEmbeddingsInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=XL(this.apiClient,e);return o=st("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Jd(u))}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=dR(this.apiClient,e);return l=st("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ev(f))}else{const c=fR(this.apiClient,e);return l=st("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Jd(f))}}async cancel(e){var n,i,r,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=WL(this.apiClient,e);s=st("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=jL(this.apiClient,e);s=st("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=SR(e);return l=st("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=ER(f),y=new U5;return Object.assign(y,g),y})}else{const c=xR(e);return l=st("batches",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=TR(f),y=new U5;return Object.assign(y,g),y})}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=tR(this.apiClient,e);return l=st("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>iR(f))}else{const c=eR(this.apiClient,e);return l=st("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>nR(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NR(t){const e={},n=d(t,["data"]);if(n!=null&&v(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function j5(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>XR(o))),v(e,["parts"],r)}const i=d(t,["role"]);return i!=null&&v(e,["role"],i),e}function kR(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);const o=d(t,["displayName"]);e!==void 0&&o!=null&&v(e,["displayName"],o);const s=d(t,["contents"]);if(e!==void 0&&s!=null){let f=us(s);Array.isArray(f)&&(f=f.map(g=>j5(g))),v(e,["contents"],f)}const l=d(t,["systemInstruction"]);e!==void 0&&l!=null&&v(e,["systemInstruction"],j5(br(l)));const u=d(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(g=>t6(g))),v(e,["tools"],f)}const c=d(t,["toolConfig"]);if(e!==void 0&&c!=null&&v(e,["toolConfig"],e6(c)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function LR(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);const o=d(t,["displayName"]);e!==void 0&&o!=null&&v(e,["displayName"],o);const s=d(t,["contents"]);if(e!==void 0&&s!=null){let g=us(s);Array.isArray(g)&&(g=g.map(y=>y)),v(e,["contents"],g)}const l=d(t,["systemInstruction"]);e!==void 0&&l!=null&&v(e,["systemInstruction"],br(l));const u=d(t,["tools"]);if(e!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>n6(y))),v(e,["tools"],g)}const c=d(t,["toolConfig"]);e!==void 0&&c!=null&&v(e,["toolConfig"],c);const f=d(t,["kmsKeyName"]);return e!==void 0&&f!=null&&v(e,["encryption_spec","kmsKeyName"],f),n}function RR(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["model"],PE(t,i));const r=d(e,["config"]);return r!=null&&kR(r,n),n}function MR(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["model"],PE(t,i));const r=d(e,["config"]);return r!=null&&LR(r,n),n}function DR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],el(t,i)),n}function FR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],el(t,i)),n}function OR(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function VR(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function BR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function UR(t){const e={},n=d(t,["id"]);n!=null&&v(e,["id"],n);const i=d(t,["args"]);i!=null&&v(e,["args"],i);const r=d(t,["name"]);if(r!=null&&v(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zR(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&v(e,["allowedFunctionNames"],n);const i=d(t,["mode"]);if(i!=null&&v(e,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qR(t){const e={},n=d(t,["description"]);n!=null&&v(e,["description"],n);const i=d(t,["name"]);i!=null&&v(e,["name"],i);const r=d(t,["parameters"]);r!=null&&v(e,["parameters"],r);const o=d(t,["parametersJsonSchema"]);o!=null&&v(e,["parametersJsonSchema"],o);const s=d(t,["response"]);s!=null&&v(e,["response"],s);const l=d(t,["responseJsonSchema"]);if(l!=null&&v(e,["responseJsonSchema"],l),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function HR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],el(t,i)),n}function GR(t,e){const n={},i=d(e,["name"]);return i!=null&&v(n,["_url","name"],el(t,i)),n}function jR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function WR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function $R(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function KR(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function JR(t){const e={},n=d(t,["config"]);return n!=null&&$R(n,e),e}function YR(t){const e={},n=d(t,["config"]);return n!=null&&KR(n,e),e}function ZR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["cachedContents"],o)}return e}function QR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["cachedContents"],o)}return e}function XR(t){const e={},n=d(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=d(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=d(t,["fileData"]);o!=null&&v(e,["fileData"],BR(o));const s=d(t,["functionCall"]);s!=null&&v(e,["functionCall"],UR(s));const l=d(t,["functionResponse"]);l!=null&&v(e,["functionResponse"],l);const u=d(t,["inlineData"]);u!=null&&v(e,["inlineData"],NR(u));const c=d(t,["text"]);c!=null&&v(e,["text"],c);const f=d(t,["thought"]);f!=null&&v(e,["thought"],f);const g=d(t,["thoughtSignature"]);g!=null&&v(e,["thoughtSignature"],g);const y=d(t,["videoMetadata"]);return y!=null&&v(e,["videoMetadata"],y),e}function e6(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&v(e,["retrievalConfig"],n);const i=d(t,["functionCallingConfig"]);return i!=null&&v(e,["functionCallingConfig"],zR(i)),e}function t6(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);const r=d(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>g)),v(e,["functionDeclarations"],f)}const s=d(t,["googleMaps"]);s!=null&&v(e,["googleMaps"],jR(s));const l=d(t,["googleSearch"]);l!=null&&v(e,["googleSearch"],WR(l));const u=d(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);const c=d(t,["urlContext"]);return c!=null&&v(e,["urlContext"],c),e}function n6(t){const e={},n=d(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const i=d(t,["computerUse"]);if(i!=null&&v(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&v(e,["codeExecution"],r);const o=d(t,["enterpriseWebSearch"]);o!=null&&v(e,["enterpriseWebSearch"],o);const s=d(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(y=>qR(y))),v(e,["functionDeclarations"],g)}const l=d(t,["googleMaps"]);l!=null&&v(e,["googleMaps"],l);const u=d(t,["googleSearch"]);u!=null&&v(e,["googleSearch"],u);const c=d(t,["googleSearchRetrieval"]);c!=null&&v(e,["googleSearchRetrieval"],c);const f=d(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}function i6(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),n}function r6(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),n}function o6(t,e){const n={},i=d(e,["name"]);i!=null&&v(n,["_url","name"],el(t,i));const r=d(e,["config"]);return r!=null&&i6(r,n),n}function s6(t,e){const n={},i=d(e,["name"]);i!=null&&v(n,["_url","name"],el(t,i));const r=d(e,["config"]);return r!=null&&r6(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a6 extends Xa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mu(Za.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=MR(this.apiClient,e);return l=st("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=RR(this.apiClient,e);return l=st("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=GR(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=HR(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=FR(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=VR(f),y=new V5;return Object.assign(y,g),y})}else{const c=DR(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=OR(f),y=new V5;return Object.assign(y,g),y})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=s6(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=o6(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=YR(e);return l=st("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=QR(f),y=new B5;return Object.assign(y,g),y})}else{const c=JR(e);return l=st("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=ZR(f),y=new B5;return Object.assign(y,g),y})}}}function Op(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function W5(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ot(t){return this instanceof Ot?(this.v=t,this):new Ot(t)}function zs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(w){return function(N){return Promise.resolve(N).then(w,g)}}function l(w,N){i[w]&&(r[w]=function(R){return new Promise(function(F,T){o.push([w,R,F,T])>1||u(w,R)})},N&&(r[w]=N(r[w])))}function u(w,N){try{c(i[w](N))}catch(R){y(o[0][3],R)}}function c(w){w.value instanceof Ot?Promise.resolve(w.value.v).then(f,g):y(o[0][2],w)}function f(w){u("next",w)}function g(w){u("throw",w)}function y(w,N){w(N),o.shift(),o.length&&u(o[0][0],o[0][1])}}function qs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof W5=="function"?W5(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),r(l,u,s.done,s.value)})}}function r(o,s,l,u){Promise.resolve(u).then(function(c){o({value:c,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l6(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:qE(n)}function qE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function u6(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $5(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!qE(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class c6{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new h6(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class h6{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),u6(o)}async sendMessage(e){var n;await this.sendPromise;const i=br(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await r,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let y=[];f!=null&&(y=(l=f.slice(g))!==null&&l!==void 0?l:[]);const w=c?[c]:[];this.recordHistory(i,w,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=br(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?$5(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return zs(this,arguments,function*(){var r,o,s,l,u,c;const f=[];try{for(var g=!0,y=qs(e),w;w=yield Ot(y.next()),r=w.done,!r;g=!0){l=w.value,g=!1;const N=l;if(l6(N)){const R=(c=(u=N.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;R!==void 0&&f.push(R)}yield yield Ot(N)}}catch(N){o={error:N}}finally{try{!g&&!r&&(s=y.return)&&(yield Ot(s.call(y)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...$5(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Tf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f6(t){const e={},n=d(t,["file"]);return n!=null&&v(e,["file"],n),e}function d6(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function p6(t){const e={},n=d(t,["name"]);return n!=null&&v(e,["_url","file"],DE(n)),e}function m6(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function g6(t){const e={},n=d(t,["name"]);return n!=null&&v(e,["_url","file"],DE(n)),e}function v6(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function y6(t){const e={},n=d(t,["config"]);return n!=null&&v6(n,e),e}function _6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w6 extends Xa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mu(Za.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=y6(e);return o=st("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=_6(u),f=new EL;return Object.assign(f,c),f})}}async createInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=f6(e);return o=st("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=d6(u),f=new AL;return Object.assign(f,c),f})}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=g6(e);return o=st("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=p6(e);return o=st("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=m6(u),f=new bL;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yd(t){const e={},n=d(t,["data"]);if(n!=null&&v(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function x6(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>O6(o))),v(e,["parts"],r)}const i=d(t,["role"]);return i!=null&&v(e,["role"],i),e}function S6(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function T6(t){const e={},n=d(t,["id"]);n!=null&&v(e,["id"],n);const i=d(t,["args"]);i!=null&&v(e,["args"],i);const r=d(t,["name"]);if(r!=null&&v(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function E6(t){const e={},n=d(t,["description"]);n!=null&&v(e,["description"],n);const i=d(t,["name"]);i!=null&&v(e,["name"],i);const r=d(t,["parameters"]);r!=null&&v(e,["parameters"],r);const o=d(t,["parametersJsonSchema"]);o!=null&&v(e,["parametersJsonSchema"],o);const s=d(t,["response"]);s!=null&&v(e,["response"],s);const l=d(t,["responseJsonSchema"]);if(l!=null&&v(e,["responseJsonSchema"],l),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function A6(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&v(e,["responseJsonSchema"],i);const r=d(t,["audioTimestamp"]);r!=null&&v(e,["audioTimestamp"],r);const o=d(t,["candidateCount"]);o!=null&&v(e,["candidateCount"],o);const s=d(t,["enableAffectiveDialog"]);s!=null&&v(e,["enableAffectiveDialog"],s);const l=d(t,["frequencyPenalty"]);l!=null&&v(e,["frequencyPenalty"],l);const u=d(t,["logprobs"]);u!=null&&v(e,["logprobs"],u);const c=d(t,["maxOutputTokens"]);c!=null&&v(e,["maxOutputTokens"],c);const f=d(t,["mediaResolution"]);f!=null&&v(e,["mediaResolution"],f);const g=d(t,["presencePenalty"]);g!=null&&v(e,["presencePenalty"],g);const y=d(t,["responseLogprobs"]);y!=null&&v(e,["responseLogprobs"],y);const w=d(t,["responseMimeType"]);w!=null&&v(e,["responseMimeType"],w);const N=d(t,["responseModalities"]);N!=null&&v(e,["responseModalities"],N);const R=d(t,["responseSchema"]);R!=null&&v(e,["responseSchema"],R);const F=d(t,["routingConfig"]);F!=null&&v(e,["routingConfig"],F);const T=d(t,["seed"]);T!=null&&v(e,["seed"],T);const I=d(t,["speechConfig"]);I!=null&&v(e,["speechConfig"],I);const P=d(t,["stopSequences"]);P!=null&&v(e,["stopSequences"],P);const G=d(t,["temperature"]);G!=null&&v(e,["temperature"],G);const J=d(t,["thinkingConfig"]);J!=null&&v(e,["thinkingConfig"],J);const Q=d(t,["topK"]);Q!=null&&v(e,["topK"],Q);const D=d(t,["topP"]);if(D!=null&&v(e,["topP"],D),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function b6(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function C6(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function I6(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const o=d(t,["temperature"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","temperature"],o);const s=d(t,["topP"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","topP"],s);const l=d(t,["topK"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topK"],l);const u=d(t,["maxOutputTokens"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","maxOutputTokens"],u);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","mediaResolution"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","seed"],f);const g=d(t,["speechConfig"]);e!==void 0&&g!=null&&v(e,["setup","generationConfig","speechConfig"],i_(g));const y=d(t,["thinkingConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","thinkingConfig"],y);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&v(e,["setup","systemInstruction"],x6(br(N)));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let Q=Xc(R);Array.isArray(Q)&&(Q=Q.map(D=>B6(Qc(D)))),v(e,["setup","tools"],Q)}const F=d(t,["sessionResumption"]);e!==void 0&&F!=null&&v(e,["setup","sessionResumption"],V6(F));const T=d(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","inputAudioTranscription"],T);const I=d(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&v(e,["setup","outputAudioTranscription"],I);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&v(e,["setup","realtimeInputConfig"],P);const G=d(t,["contextWindowCompression"]);e!==void 0&&G!=null&&v(e,["setup","contextWindowCompression"],G);const J=d(t,["proactivity"]);if(e!==void 0&&J!=null&&v(e,["setup","proactivity"],J),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function P6(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],A6(i));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const o=d(t,["temperature"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","temperature"],o);const s=d(t,["topP"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","topP"],s);const l=d(t,["topK"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topK"],l);const u=d(t,["maxOutputTokens"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","maxOutputTokens"],u);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","mediaResolution"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","seed"],f);const g=d(t,["speechConfig"]);e!==void 0&&g!=null&&v(e,["setup","generationConfig","speechConfig"],i_(g));const y=d(t,["thinkingConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","thinkingConfig"],y);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&v(e,["setup","systemInstruction"],br(N));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let D=Xc(R);Array.isArray(D)&&(D=D.map(C=>U6(Qc(C)))),v(e,["setup","tools"],D)}const F=d(t,["sessionResumption"]);e!==void 0&&F!=null&&v(e,["setup","sessionResumption"],F);const T=d(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","inputAudioTranscription"],T);const I=d(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&v(e,["setup","outputAudioTranscription"],I);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&v(e,["setup","realtimeInputConfig"],P);const G=d(t,["contextWindowCompression"]);e!==void 0&&G!=null&&v(e,["setup","contextWindowCompression"],G);const J=d(t,["proactivity"]);e!==void 0&&J!=null&&v(e,["setup","proactivity"],J);const Q=d(t,["explicitVadSignal"]);return e!==void 0&&Q!=null&&v(e,["setup","explicitVadSignal"],Q),n}function N6(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["setup","model"],pn(t,i));const r=d(e,["config"]);return r!=null&&v(n,["config"],I6(r,n)),n}function k6(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["setup","model"],pn(t,i));const r=d(e,["config"]);return r!=null&&v(n,["config"],P6(r,n)),n}function L6(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],n),e}function R6(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["weightedPrompts"],i)}return e}function M6(t){const e={},n=d(t,["media"]);if(n!=null){let c=NE(n);Array.isArray(c)&&(c=c.map(f=>Yd(f))),v(e,["mediaChunks"],c)}const i=d(t,["audio"]);i!=null&&v(e,["audio"],Yd(LE(i)));const r=d(t,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);const o=d(t,["video"]);o!=null&&v(e,["video"],Yd(kE(o)));const s=d(t,["text"]);s!=null&&v(e,["text"],s);const l=d(t,["activityStart"]);l!=null&&v(e,["activityStart"],l);const u=d(t,["activityEnd"]);return u!=null&&v(e,["activityEnd"],u),e}function D6(t){const e={},n=d(t,["media"]);if(n!=null){let c=NE(n);Array.isArray(c)&&(c=c.map(f=>f)),v(e,["mediaChunks"],c)}const i=d(t,["audio"]);i!=null&&v(e,["audio"],LE(i));const r=d(t,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);const o=d(t,["video"]);o!=null&&v(e,["video"],kE(o));const s=d(t,["text"]);s!=null&&v(e,["text"],s);const l=d(t,["activityStart"]);l!=null&&v(e,["activityStart"],l);const u=d(t,["activityEnd"]);return u!=null&&v(e,["activityEnd"],u),e}function F6(t){const e={},n=d(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],n);const i=d(t,["serverContent"]);i!=null&&v(e,["serverContent"],i);const r=d(t,["toolCall"]);r!=null&&v(e,["toolCall"],r);const o=d(t,["toolCallCancellation"]);o!=null&&v(e,["toolCallCancellation"],o);const s=d(t,["usageMetadata"]);s!=null&&v(e,["usageMetadata"],z6(s));const l=d(t,["goAway"]);l!=null&&v(e,["goAway"],l);const u=d(t,["sessionResumptionUpdate"]);u!=null&&v(e,["sessionResumptionUpdate"],u);const c=d(t,["voiceActivityDetectionSignal"]);c!=null&&v(e,["voiceActivityDetectionSignal"],c);const f=d(t,["voiceActivity"]);return f!=null&&v(e,["voiceActivity"],q6(f)),e}function O6(t){const e={},n=d(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=d(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=d(t,["fileData"]);o!=null&&v(e,["fileData"],S6(o));const s=d(t,["functionCall"]);s!=null&&v(e,["functionCall"],T6(s));const l=d(t,["functionResponse"]);l!=null&&v(e,["functionResponse"],l);const u=d(t,["inlineData"]);u!=null&&v(e,["inlineData"],Yd(u));const c=d(t,["text"]);c!=null&&v(e,["text"],c);const f=d(t,["thought"]);f!=null&&v(e,["thought"],f);const g=d(t,["thoughtSignature"]);g!=null&&v(e,["thoughtSignature"],g);const y=d(t,["videoMetadata"]);return y!=null&&v(e,["videoMetadata"],y),e}function V6(t){const e={},n=d(t,["handle"]);if(n!=null&&v(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function B6(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);const r=d(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>g)),v(e,["functionDeclarations"],f)}const s=d(t,["googleMaps"]);s!=null&&v(e,["googleMaps"],b6(s));const l=d(t,["googleSearch"]);l!=null&&v(e,["googleSearch"],C6(l));const u=d(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);const c=d(t,["urlContext"]);return c!=null&&v(e,["urlContext"],c),e}function U6(t){const e={},n=d(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const i=d(t,["computerUse"]);if(i!=null&&v(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&v(e,["codeExecution"],r);const o=d(t,["enterpriseWebSearch"]);o!=null&&v(e,["enterpriseWebSearch"],o);const s=d(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(y=>E6(y))),v(e,["functionDeclarations"],g)}const l=d(t,["googleMaps"]);l!=null&&v(e,["googleMaps"],l);const u=d(t,["googleSearch"]);u!=null&&v(e,["googleSearch"],u);const c=d(t,["googleSearchRetrieval"]);c!=null&&v(e,["googleSearchRetrieval"],c);const f=d(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}function z6(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const i=d(t,["cachedContentTokenCount"]);i!=null&&v(e,["cachedContentTokenCount"],i);const r=d(t,["candidatesTokenCount"]);r!=null&&v(e,["responseTokenCount"],r);const o=d(t,["toolUsePromptTokenCount"]);o!=null&&v(e,["toolUsePromptTokenCount"],o);const s=d(t,["thoughtsTokenCount"]);s!=null&&v(e,["thoughtsTokenCount"],s);const l=d(t,["totalTokenCount"]);l!=null&&v(e,["totalTokenCount"],l);const u=d(t,["promptTokensDetails"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(N=>N)),v(e,["promptTokensDetails"],w)}const c=d(t,["cacheTokensDetails"]);if(c!=null){let w=c;Array.isArray(w)&&(w=w.map(N=>N)),v(e,["cacheTokensDetails"],w)}const f=d(t,["candidatesTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(N=>N)),v(e,["responseTokensDetails"],w)}const g=d(t,["toolUsePromptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(N=>N)),v(e,["toolUsePromptTokensDetails"],w)}const y=d(t,["trafficType"]);return y!=null&&v(e,["trafficType"],y),e}function q6(t){const e={},n=d(t,["type"]);return n!=null&&v(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H6(t){const e={},n=d(t,["data"]);if(n!=null&&v(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function G6(t){const e={},n=d(t,["content"]);n!=null&&v(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],j6(i));const r=d(t,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);const o=d(t,["finishReason"]);o!=null&&v(e,["finishReason"],o);const s=d(t,["avgLogprobs"]);s!=null&&v(e,["avgLogprobs"],s);const l=d(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=d(t,["index"]);u!=null&&v(e,["index"],u);const c=d(t,["logprobsResult"]);c!=null&&v(e,["logprobsResult"],c);const f=d(t,["safetyRatings"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>w)),v(e,["safetyRatings"],y)}const g=d(t,["urlContextMetadata"]);return g!=null&&v(e,["urlContextMetadata"],g),e}function j6(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function W6(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let o=us(r);Array.isArray(o)&&(o=o.map(s=>s)),v(n,["contents"],o)}return n}function $6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),v(e,["tokensInfo"],r)}return e}function K6(t){const e={},n=d(t,["values"]);n!=null&&v(e,["values"],n);const i=d(t,["statistics"]);return i!=null&&v(e,["statistics"],J6(i)),e}function J6(t){const e={},n=d(t,["truncated"]);n!=null&&v(e,["truncated"],n);const i=d(t,["token_count"]);return i!=null&&v(e,["tokenCount"],i),e}function vm(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>rD(o))),v(e,["parts"],r)}const i=d(t,["role"]);return i!=null&&v(e,["role"],i),e}function Y6(t){const e={},n=d(t,["controlType"]);n!=null&&v(e,["controlType"],n);const i=d(t,["enableControlImageComputation"]);return i!=null&&v(e,["computeControl"],i),e}function Z6(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Q6(t,e){const n={},i=d(t,["systemInstruction"]);e!==void 0&&i!=null&&v(e,["systemInstruction"],br(i));const r=d(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>WE(l))),v(e,["tools"],s)}const o=d(t,["generationConfig"]);return e!==void 0&&o!=null&&v(e,["generationConfig"],HM(o)),n}function X6(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let s=us(r);Array.isArray(s)&&(s=s.map(l=>vm(l))),v(n,["contents"],s)}const o=d(e,["config"]);return o!=null&&Z6(o),n}function eM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let s=us(r);Array.isArray(s)&&(s=s.map(l=>l)),v(n,["contents"],s)}const o=d(e,["config"]);return o!=null&&Q6(o,n),n}function tM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);i!=null&&v(e,["totalTokens"],i);const r=d(t,["cachedContentTokenCount"]);return r!=null&&v(e,["cachedContentTokenCount"],r),e}function nM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);return i!=null&&v(e,["totalTokens"],i),e}function iM(t,e){const n={},i=d(e,["model"]);return i!=null&&v(n,["_url","name"],pn(t,i)),n}function rM(t,e){const n={},i=d(e,["model"]);return i!=null&&v(n,["_url","name"],pn(t,i)),n}function oM(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function sM(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function aM(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&v(e,["parameters","sampleCount"],o);const s=d(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const l=d(t,["guidanceScale"]);e!==void 0&&l!=null&&v(e,["parameters","guidanceScale"],l);const u=d(t,["seed"]);e!==void 0&&u!=null&&v(e,["parameters","seed"],u);const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&v(e,["parameters","safetySetting"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&v(e,["parameters","includeSafetyAttributes"],g);const y=d(t,["includeRaiReason"]);e!==void 0&&y!=null&&v(e,["parameters","includeRaiReason"],y);const w=d(t,["language"]);e!==void 0&&w!=null&&v(e,["parameters","language"],w);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&v(e,["parameters","outputOptions","mimeType"],N);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&v(e,["parameters","outputOptions","compressionQuality"],R);const F=d(t,["addWatermark"]);e!==void 0&&F!=null&&v(e,["parameters","addWatermark"],F);const T=d(t,["labels"]);e!==void 0&&T!=null&&v(e,["labels"],T);const I=d(t,["editMode"]);e!==void 0&&I!=null&&v(e,["parameters","editMode"],I);const P=d(t,["baseSteps"]);return e!==void 0&&P!=null&&v(e,["parameters","editConfig","baseSteps"],P),n}function lM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=d(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>cD(u))),v(n,["instances[0]","referenceImages"],l)}const s=d(e,["config"]);return s!=null&&aM(s,n),n}function uM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>ym(o))),v(e,["generatedImages"],r)}return e}function cM(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const r=d(t,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);const o=d(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&v(e,["requests[]","outputDimensionality"],o),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hM(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&v(e,["instances[]","task_type"],i);const r=d(t,["title"]);e!==void 0&&r!=null&&v(e,["instances[]","title"],r);const o=d(t,["outputDimensionality"]);e!==void 0&&o!=null&&v(e,["parameters","outputDimensionality"],o);const s=d(t,["mimeType"]);e!==void 0&&s!=null&&v(e,["instances[]","mimeType"],s);const l=d(t,["autoTruncate"]);return e!==void 0&&l!=null&&v(e,["parameters","autoTruncate"],l),n}function fM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let l=e_(t,r);Array.isArray(l)&&(l=l.map(u=>u)),v(n,["requests[]","content"],l)}const o=d(e,["config"]);o!=null&&cM(o,n);const s=d(e,["model"]);return s!==void 0&&v(n,["requests[]","model"],pn(t,s)),n}function dM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let s=e_(t,r);Array.isArray(s)&&(s=s.map(l=>l)),v(n,["instances[]","content"],s)}const o=d(e,["config"]);return o!=null&&hM(o,n),n}function pM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["embeddings"],o)}const r=d(t,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function mM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>K6(s))),v(e,["embeddings"],o)}const r=d(t,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function gM(t){const e={},n=d(t,["endpoint"]);n!=null&&v(e,["name"],n);const i=d(t,["deployedModelId"]);return i!=null&&v(e,["deployedModelId"],i),e}function vM(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function yM(t){const e={},n=d(t,["id"]);n!=null&&v(e,["id"],n);const i=d(t,["args"]);i!=null&&v(e,["args"],i);const r=d(t,["name"]);if(r!=null&&v(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _M(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&v(e,["allowedFunctionNames"],n);const i=d(t,["mode"]);if(i!=null&&v(e,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wM(t){const e={},n=d(t,["description"]);n!=null&&v(e,["description"],n);const i=d(t,["name"]);i!=null&&v(e,["name"],i);const r=d(t,["parameters"]);r!=null&&v(e,["parameters"],r);const o=d(t,["parametersJsonSchema"]);o!=null&&v(e,["parametersJsonSchema"],o);const s=d(t,["response"]);s!=null&&v(e,["response"],s);const l=d(t,["responseJsonSchema"]);if(l!=null&&v(e,["responseJsonSchema"],l),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function xM(t,e,n){const i={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],vm(br(r)));const o=d(e,["temperature"]);o!=null&&v(i,["temperature"],o);const s=d(e,["topP"]);s!=null&&v(i,["topP"],s);const l=d(e,["topK"]);l!=null&&v(i,["topK"],l);const u=d(e,["candidateCount"]);u!=null&&v(i,["candidateCount"],u);const c=d(e,["maxOutputTokens"]);c!=null&&v(i,["maxOutputTokens"],c);const f=d(e,["stopSequences"]);f!=null&&v(i,["stopSequences"],f);const g=d(e,["responseLogprobs"]);g!=null&&v(i,["responseLogprobs"],g);const y=d(e,["logprobs"]);y!=null&&v(i,["logprobs"],y);const w=d(e,["presencePenalty"]);w!=null&&v(i,["presencePenalty"],w);const N=d(e,["frequencyPenalty"]);N!=null&&v(i,["frequencyPenalty"],N);const R=d(e,["seed"]);R!=null&&v(i,["seed"],R);const F=d(e,["responseMimeType"]);F!=null&&v(i,["responseMimeType"],F);const T=d(e,["responseSchema"]);T!=null&&v(i,["responseSchema"],t_(T));const I=d(e,["responseJsonSchema"]);if(I!=null&&v(i,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(n!==void 0&&P!=null){let V=P;Array.isArray(V)&&(V=V.map(ie=>hD(ie))),v(n,["safetySettings"],V)}const G=d(e,["tools"]);if(n!==void 0&&G!=null){let V=Xc(G);Array.isArray(V)&&(V=V.map(ie=>yD(Qc(ie)))),v(n,["tools"],V)}const J=d(e,["toolConfig"]);if(n!==void 0&&J!=null&&v(n,["toolConfig"],vD(J)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=d(e,["cachedContent"]);n!==void 0&&Q!=null&&v(n,["cachedContent"],el(t,Q));const D=d(e,["responseModalities"]);D!=null&&v(i,["responseModalities"],D);const C=d(e,["mediaResolution"]);C!=null&&v(i,["mediaResolution"],C);const O=d(e,["speechConfig"]);if(O!=null&&v(i,["speechConfig"],n_(O)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=d(e,["thinkingConfig"]);H!=null&&v(i,["thinkingConfig"],H);const k=d(e,["imageConfig"]);k!=null&&v(i,["imageConfig"],KM(k));const b=d(e,["enableEnhancedCivicAnswers"]);if(b!=null&&v(i,["enableEnhancedCivicAnswers"],b),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function SM(t,e,n){const i={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],br(r));const o=d(e,["temperature"]);o!=null&&v(i,["temperature"],o);const s=d(e,["topP"]);s!=null&&v(i,["topP"],s);const l=d(e,["topK"]);l!=null&&v(i,["topK"],l);const u=d(e,["candidateCount"]);u!=null&&v(i,["candidateCount"],u);const c=d(e,["maxOutputTokens"]);c!=null&&v(i,["maxOutputTokens"],c);const f=d(e,["stopSequences"]);f!=null&&v(i,["stopSequences"],f);const g=d(e,["responseLogprobs"]);g!=null&&v(i,["responseLogprobs"],g);const y=d(e,["logprobs"]);y!=null&&v(i,["logprobs"],y);const w=d(e,["presencePenalty"]);w!=null&&v(i,["presencePenalty"],w);const N=d(e,["frequencyPenalty"]);N!=null&&v(i,["frequencyPenalty"],N);const R=d(e,["seed"]);R!=null&&v(i,["seed"],R);const F=d(e,["responseMimeType"]);F!=null&&v(i,["responseMimeType"],F);const T=d(e,["responseSchema"]);T!=null&&v(i,["responseSchema"],t_(T));const I=d(e,["responseJsonSchema"]);I!=null&&v(i,["responseJsonSchema"],I);const P=d(e,["routingConfig"]);P!=null&&v(i,["routingConfig"],P);const G=d(e,["modelSelectionConfig"]);G!=null&&v(i,["modelConfig"],G);const J=d(e,["safetySettings"]);if(n!==void 0&&J!=null){let se=J;Array.isArray(se)&&(se=se.map(W=>W)),v(n,["safetySettings"],se)}const Q=d(e,["tools"]);if(n!==void 0&&Q!=null){let se=Xc(Q);Array.isArray(se)&&(se=se.map(W=>WE(Qc(W)))),v(n,["tools"],se)}const D=d(e,["toolConfig"]);n!==void 0&&D!=null&&v(n,["toolConfig"],D);const C=d(e,["labels"]);n!==void 0&&C!=null&&v(n,["labels"],C);const O=d(e,["cachedContent"]);n!==void 0&&O!=null&&v(n,["cachedContent"],el(t,O));const H=d(e,["responseModalities"]);H!=null&&v(i,["responseModalities"],H);const k=d(e,["mediaResolution"]);k!=null&&v(i,["mediaResolution"],k);const b=d(e,["speechConfig"]);b!=null&&v(i,["speechConfig"],n_(b));const V=d(e,["audioTimestamp"]);V!=null&&v(i,["audioTimestamp"],V);const ie=d(e,["thinkingConfig"]);ie!=null&&v(i,["thinkingConfig"],ie);const _e=d(e,["imageConfig"]);if(_e!=null&&v(i,["imageConfig"],JM(_e)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const le=d(e,["modelArmorConfig"]);return n!==void 0&&le!=null&&v(n,["modelArmorConfig"],le),i}function K5(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let s=us(r);Array.isArray(s)&&(s=s.map(l=>vm(l))),v(n,["contents"],s)}const o=d(e,["config"]);return o!=null&&v(n,["generationConfig"],xM(t,o,n)),n}function J5(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["contents"]);if(r!=null){let s=us(r);Array.isArray(s)&&(s=s.map(l=>l)),v(n,["contents"],s)}const o=d(e,["config"]);return o!=null&&v(n,["generationConfig"],SM(t,o,n)),n}function Y5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>G6(c))),v(e,["candidates"],u)}const r=d(t,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);const o=d(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const s=d(t,["responseId"]);s!=null&&v(e,["responseId"],s);const l=d(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function Z5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),v(e,["candidates"],c)}const r=d(t,["createTime"]);r!=null&&v(e,["createTime"],r);const o=d(t,["modelVersion"]);o!=null&&v(e,["modelVersion"],o);const s=d(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const l=d(t,["responseId"]);l!=null&&v(e,["responseId"],l);const u=d(t,["usageMetadata"]);return u!=null&&v(e,["usageMetadata"],u),e}function TM(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&v(e,["parameters","aspectRatio"],r);const o=d(t,["guidanceScale"]);if(e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=d(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&v(e,["parameters","safetySetting"],s);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&v(e,["parameters","personGeneration"],l);const u=d(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&v(e,["parameters","includeSafetyAttributes"],u);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&v(e,["parameters","includeRaiReason"],c);const f=d(t,["language"]);e!==void 0&&f!=null&&v(e,["parameters","language"],f);const g=d(t,["outputMimeType"]);e!==void 0&&g!=null&&v(e,["parameters","outputOptions","mimeType"],g);const y=d(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(t,["imageSize"]);if(e!==void 0&&w!=null&&v(e,["parameters","sampleImageSize"],w),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function EM(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&v(e,["parameters","sampleCount"],o);const s=d(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const l=d(t,["guidanceScale"]);e!==void 0&&l!=null&&v(e,["parameters","guidanceScale"],l);const u=d(t,["seed"]);e!==void 0&&u!=null&&v(e,["parameters","seed"],u);const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&v(e,["parameters","safetySetting"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&v(e,["parameters","includeSafetyAttributes"],g);const y=d(t,["includeRaiReason"]);e!==void 0&&y!=null&&v(e,["parameters","includeRaiReason"],y);const w=d(t,["language"]);e!==void 0&&w!=null&&v(e,["parameters","language"],w);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&v(e,["parameters","outputOptions","mimeType"],N);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&v(e,["parameters","outputOptions","compressionQuality"],R);const F=d(t,["addWatermark"]);e!==void 0&&F!=null&&v(e,["parameters","addWatermark"],F);const T=d(t,["labels"]);e!==void 0&&T!=null&&v(e,["labels"],T);const I=d(t,["imageSize"]);e!==void 0&&I!=null&&v(e,["parameters","sampleImageSize"],I);const P=d(t,["enhancePrompt"]);return e!==void 0&&P!=null&&v(e,["parameters","enhancePrompt"],P),n}function AM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=d(e,["config"]);return o!=null&&TM(o,n),n}function bM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=d(e,["config"]);return o!=null&&EM(o,n),n}function CM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>BM(s))),v(e,["generatedImages"],o)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],GE(r)),e}function IM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ym(s))),v(e,["generatedImages"],o)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],jE(r)),e}function PM(t,e){const n={},i=d(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(t,["durationSeconds"]);if(e!==void 0&&r!=null&&v(e,["parameters","durationSeconds"],r),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&v(e,["parameters","aspectRatio"],o);const s=d(t,["resolution"]);e!==void 0&&s!=null&&v(e,["parameters","resolution"],s);const l=d(t,["personGeneration"]);if(e!==void 0&&l!=null&&v(e,["parameters","personGeneration"],l),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=d(t,["negativePrompt"]);e!==void 0&&u!=null&&v(e,["parameters","negativePrompt"],u);const c=d(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&v(e,["parameters","enhancePrompt"],c),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=d(t,["lastFrame"]);e!==void 0&&f!=null&&v(e,["instances[0]","lastFrame"],_m(f));const g=d(t,["referenceImages"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(w=>kD(w))),v(e,["instances[0]","referenceImages"],y)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function NM(t,e){const n={},i=d(t,["numberOfVideos"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const o=d(t,["fps"]);e!==void 0&&o!=null&&v(e,["parameters","fps"],o);const s=d(t,["durationSeconds"]);e!==void 0&&s!=null&&v(e,["parameters","durationSeconds"],s);const l=d(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&v(e,["parameters","aspectRatio"],u);const c=d(t,["resolution"]);e!==void 0&&c!=null&&v(e,["parameters","resolution"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const g=d(t,["pubsubTopic"]);e!==void 0&&g!=null&&v(e,["parameters","pubsubTopic"],g);const y=d(t,["negativePrompt"]);e!==void 0&&y!=null&&v(e,["parameters","negativePrompt"],y);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&v(e,["parameters","enhancePrompt"],w);const N=d(t,["generateAudio"]);e!==void 0&&N!=null&&v(e,["parameters","generateAudio"],N);const R=d(t,["lastFrame"]);e!==void 0&&R!=null&&v(e,["instances[0]","lastFrame"],Gs(R));const F=d(t,["referenceImages"]);if(e!==void 0&&F!=null){let P=F;Array.isArray(P)&&(P=P.map(G=>LD(G))),v(e,["instances[0]","referenceImages"],P)}const T=d(t,["mask"]);e!==void 0&&T!=null&&v(e,["instances[0]","mask"],ND(T));const I=d(t,["compressionQuality"]);return e!==void 0&&I!=null&&v(e,["parameters","compressionQuality"],I),n}function kM(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response","generateVideoResponse"]);return s!=null&&v(e,["response"],DM(s)),e}function LM(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response"]);return s!=null&&v(e,["response"],FM(s)),e}function RM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=d(e,["image"]);o!=null&&v(n,["instances[0]","image"],_m(o));const s=d(e,["video"]);s!=null&&v(n,["instances[0]","video"],$E(s));const l=d(e,["source"]);l!=null&&OM(l,n);const u=d(e,["config"]);return u!=null&&PM(u,n),n}function MM(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=d(e,["image"]);o!=null&&v(n,["instances[0]","image"],Gs(o));const s=d(e,["video"]);s!=null&&v(n,["instances[0]","video"],KE(s));const l=d(e,["source"]);l!=null&&VM(l,n);const u=d(e,["config"]);return u!=null&&NM(u,n),n}function DM(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>zM(s))),v(e,["generatedVideos"],o)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function FM(t){const e={},n=d(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>qM(s))),v(e,["generatedVideos"],o)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function OM(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=d(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],_m(r));const o=d(t,["video"]);return e!==void 0&&o!=null&&v(e,["instances[0]","video"],$E(o)),n}function VM(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=d(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],Gs(r));const o=d(t,["video"]);return e!==void 0&&o!=null&&v(e,["instances[0]","video"],KE(o)),n}function BM(t){const e={},n=d(t,["_self"]);n!=null&&v(e,["image"],YM(n));const i=d(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const r=d(t,["_self"]);return r!=null&&v(e,["safetyAttributes"],GE(r)),e}function ym(t){const e={},n=d(t,["_self"]);n!=null&&v(e,["image"],HE(n));const i=d(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const r=d(t,["_self"]);r!=null&&v(e,["safetyAttributes"],jE(r));const o=d(t,["prompt"]);return o!=null&&v(e,["enhancedPrompt"],o),e}function UM(t){const e={},n=d(t,["_self"]);n!=null&&v(e,["mask"],HE(n));const i=d(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),v(e,["labels"],r)}return e}function zM(t){const e={},n=d(t,["video"]);return n!=null&&v(e,["video"],ID(n)),e}function qM(t){const e={},n=d(t,["_self"]);return n!=null&&v(e,["video"],PD(n)),e}function HM(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&v(e,["responseJsonSchema"],i);const r=d(t,["audioTimestamp"]);r!=null&&v(e,["audioTimestamp"],r);const o=d(t,["candidateCount"]);o!=null&&v(e,["candidateCount"],o);const s=d(t,["enableAffectiveDialog"]);s!=null&&v(e,["enableAffectiveDialog"],s);const l=d(t,["frequencyPenalty"]);l!=null&&v(e,["frequencyPenalty"],l);const u=d(t,["logprobs"]);u!=null&&v(e,["logprobs"],u);const c=d(t,["maxOutputTokens"]);c!=null&&v(e,["maxOutputTokens"],c);const f=d(t,["mediaResolution"]);f!=null&&v(e,["mediaResolution"],f);const g=d(t,["presencePenalty"]);g!=null&&v(e,["presencePenalty"],g);const y=d(t,["responseLogprobs"]);y!=null&&v(e,["responseLogprobs"],y);const w=d(t,["responseMimeType"]);w!=null&&v(e,["responseMimeType"],w);const N=d(t,["responseModalities"]);N!=null&&v(e,["responseModalities"],N);const R=d(t,["responseSchema"]);R!=null&&v(e,["responseSchema"],R);const F=d(t,["routingConfig"]);F!=null&&v(e,["routingConfig"],F);const T=d(t,["seed"]);T!=null&&v(e,["seed"],T);const I=d(t,["speechConfig"]);I!=null&&v(e,["speechConfig"],I);const P=d(t,["stopSequences"]);P!=null&&v(e,["stopSequences"],P);const G=d(t,["temperature"]);G!=null&&v(e,["temperature"],G);const J=d(t,["thinkingConfig"]);J!=null&&v(e,["thinkingConfig"],J);const Q=d(t,["topK"]);Q!=null&&v(e,["topK"],Q);const D=d(t,["topP"]);if(D!=null&&v(e,["topP"],D),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GM(t,e){const n={},i=d(e,["model"]);return i!=null&&v(n,["_url","name"],pn(t,i)),n}function jM(t,e){const n={},i=d(e,["model"]);return i!=null&&v(n,["_url","name"],pn(t,i)),n}function WM(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function $M(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function KM(t){const e={},n=d(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&v(e,["imageSize"],i),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JM(t){const e={},n=d(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);const i=d(t,["imageSize"]);i!=null&&v(e,["imageSize"],i);const r=d(t,["personGeneration"]);r!=null&&v(e,["personGeneration"],r);const o=d(t,["outputMimeType"]);o!=null&&v(e,["imageOutputOptions","mimeType"],o);const s=d(t,["outputCompressionQuality"]);return s!=null&&v(e,["imageOutputOptions","compressionQuality"],s),e}function YM(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Yl(n));const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function HE(t){const e={},n=d(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&v(e,["imageBytes"],Yl(i));const r=d(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function _m(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Yl(n));const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Gs(t){const e={},n=d(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const i=d(t,["imageBytes"]);i!=null&&v(e,["bytesBase64Encoded"],Yl(i));const r=d(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function ZM(t,e,n){const i={},r=d(e,["pageSize"]);n!==void 0&&r!=null&&v(n,["_query","pageSize"],r);const o=d(e,["pageToken"]);n!==void 0&&o!=null&&v(n,["_query","pageToken"],o);const s=d(e,["filter"]);n!==void 0&&s!=null&&v(n,["_query","filter"],s);const l=d(e,["queryBase"]);return n!==void 0&&l!=null&&v(n,["_url","models_url"],FE(t,l)),i}function QM(t,e,n){const i={},r=d(e,["pageSize"]);n!==void 0&&r!=null&&v(n,["_query","pageSize"],r);const o=d(e,["pageToken"]);n!==void 0&&o!=null&&v(n,["_query","pageToken"],o);const s=d(e,["filter"]);n!==void 0&&s!=null&&v(n,["_query","filter"],s);const l=d(e,["queryBase"]);return n!==void 0&&l!=null&&v(n,["_url","models_url"],FE(t,l)),i}function XM(t,e){const n={},i=d(e,["config"]);return i!=null&&ZM(t,i,n),n}function eD(t,e){const n={},i=d(e,["config"]);return i!=null&&QM(t,i,n),n}function tD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["_self"]);if(r!=null){let o=OE(r);Array.isArray(o)&&(o=o.map(s=>tv(s))),v(e,["models"],o)}return e}function nD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["_self"]);if(r!=null){let o=OE(r);Array.isArray(o)&&(o=o.map(s=>nv(s))),v(e,["models"],o)}return e}function iD(t){const e={},n=d(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);const i=d(t,["segmentationClasses"]);i!=null&&v(e,["maskClasses"],i);const r=d(t,["maskDilation"]);return r!=null&&v(e,["dilation"],r),e}function tv(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["displayName"]);i!=null&&v(e,["displayName"],i);const r=d(t,["description"]);r!=null&&v(e,["description"],r);const o=d(t,["version"]);o!=null&&v(e,["version"],o);const s=d(t,["_self"]);s!=null&&v(e,["tunedModelInfo"],_D(s));const l=d(t,["inputTokenLimit"]);l!=null&&v(e,["inputTokenLimit"],l);const u=d(t,["outputTokenLimit"]);u!=null&&v(e,["outputTokenLimit"],u);const c=d(t,["supportedGenerationMethods"]);c!=null&&v(e,["supportedActions"],c);const f=d(t,["temperature"]);f!=null&&v(e,["temperature"],f);const g=d(t,["maxTemperature"]);g!=null&&v(e,["maxTemperature"],g);const y=d(t,["topP"]);y!=null&&v(e,["topP"],y);const w=d(t,["topK"]);w!=null&&v(e,["topK"],w);const N=d(t,["thinking"]);return N!=null&&v(e,["thinking"],N),e}function nv(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["displayName"]);i!=null&&v(e,["displayName"],i);const r=d(t,["description"]);r!=null&&v(e,["description"],r);const o=d(t,["versionId"]);o!=null&&v(e,["version"],o);const s=d(t,["deployedModels"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(y=>gM(y))),v(e,["endpoints"],g)}const l=d(t,["labels"]);l!=null&&v(e,["labels"],l);const u=d(t,["_self"]);u!=null&&v(e,["tunedModelInfo"],wD(u));const c=d(t,["defaultCheckpointId"]);c!=null&&v(e,["defaultCheckpointId"],c);const f=d(t,["checkpoints"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),v(e,["checkpoints"],g)}return e}function rD(t){const e={},n=d(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=d(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=d(t,["fileData"]);o!=null&&v(e,["fileData"],vM(o));const s=d(t,["functionCall"]);s!=null&&v(e,["functionCall"],yM(s));const l=d(t,["functionResponse"]);l!=null&&v(e,["functionResponse"],l);const u=d(t,["inlineData"]);u!=null&&v(e,["inlineData"],H6(u));const c=d(t,["text"]);c!=null&&v(e,["text"],c);const f=d(t,["thought"]);f!=null&&v(e,["thought"],f);const g=d(t,["thoughtSignature"]);g!=null&&v(e,["thoughtSignature"],g);const y=d(t,["videoMetadata"]);return y!=null&&v(e,["videoMetadata"],y),e}function oD(t){const e={},n=d(t,["productImage"]);return n!=null&&v(e,["image"],Gs(n)),e}function sD(t,e){const n={},i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=d(t,["baseSteps"]);e!==void 0&&r!=null&&v(e,["parameters","baseSteps"],r);const o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&v(e,["parameters","storageUri"],o);const s=d(t,["seed"]);e!==void 0&&s!=null&&v(e,["parameters","seed"],s);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&v(e,["parameters","safetySetting"],l);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&v(e,["parameters","personGeneration"],u);const c=d(t,["addWatermark"]);e!==void 0&&c!=null&&v(e,["parameters","addWatermark"],c);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&v(e,["parameters","outputOptions","mimeType"],f);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&v(e,["parameters","outputOptions","compressionQuality"],g);const y=d(t,["enhancePrompt"]);e!==void 0&&y!=null&&v(e,["parameters","enhancePrompt"],y);const w=d(t,["labels"]);return e!==void 0&&w!=null&&v(e,["labels"],w),n}function aD(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["source"]);r!=null&&uD(r,n);const o=d(e,["config"]);return o!=null&&sD(o,n),n}function lD(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ym(r))),v(e,["generatedImages"],i)}return e}function uD(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=d(t,["personImage"]);e!==void 0&&r!=null&&v(e,["instances[0]","personImage","image"],Gs(r));const o=d(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>oD(l))),v(e,["instances[0]","productImages"],s)}return n}function cD(t){const e={},n=d(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],Gs(n));const i=d(t,["referenceId"]);i!=null&&v(e,["referenceId"],i);const r=d(t,["referenceType"]);r!=null&&v(e,["referenceType"],r);const o=d(t,["maskImageConfig"]);o!=null&&v(e,["maskImageConfig"],iD(o));const s=d(t,["controlImageConfig"]);s!=null&&v(e,["controlImageConfig"],Y6(s));const l=d(t,["styleImageConfig"]);l!=null&&v(e,["styleImageConfig"],l);const u=d(t,["subjectImageConfig"]);return u!=null&&v(e,["subjectImageConfig"],u),e}function GE(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const r=d(t,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function jE(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const r=d(t,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function hD(t){const e={},n=d(t,["category"]);if(n!=null&&v(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function fD(t){const e={},n=d(t,["image"]);return n!=null&&v(e,["image"],Gs(n)),e}function dD(t,e){const n={},i=d(t,["mode"]);e!==void 0&&i!=null&&v(e,["parameters","mode"],i);const r=d(t,["maxPredictions"]);e!==void 0&&r!=null&&v(e,["parameters","maxPredictions"],r);const o=d(t,["confidenceThreshold"]);e!==void 0&&o!=null&&v(e,["parameters","confidenceThreshold"],o);const s=d(t,["maskDilation"]);e!==void 0&&s!=null&&v(e,["parameters","maskDilation"],s);const l=d(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&v(e,["parameters","binaryColorThreshold"],l);const u=d(t,["labels"]);return e!==void 0&&u!=null&&v(e,["labels"],u),n}function pD(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["source"]);r!=null&&gD(r,n);const o=d(e,["config"]);return o!=null&&dD(o,n),n}function mD(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>UM(r))),v(e,["generatedMasks"],i)}return e}function gD(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=d(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],Gs(r));const o=d(t,["scribbleImage"]);return e!==void 0&&o!=null&&v(e,["instances[0]","scribble"],fD(o)),n}function vD(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&v(e,["retrievalConfig"],n);const i=d(t,["functionCallingConfig"]);return i!=null&&v(e,["functionCallingConfig"],_M(i)),e}function yD(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);const r=d(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>g)),v(e,["functionDeclarations"],f)}const s=d(t,["googleMaps"]);s!=null&&v(e,["googleMaps"],WM(s));const l=d(t,["googleSearch"]);l!=null&&v(e,["googleSearch"],$M(l));const u=d(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);const c=d(t,["urlContext"]);return c!=null&&v(e,["urlContext"],c),e}function WE(t){const e={},n=d(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const i=d(t,["computerUse"]);if(i!=null&&v(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&v(e,["codeExecution"],r);const o=d(t,["enterpriseWebSearch"]);o!=null&&v(e,["enterpriseWebSearch"],o);const s=d(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(y=>wM(y))),v(e,["functionDeclarations"],g)}const l=d(t,["googleMaps"]);l!=null&&v(e,["googleMaps"],l);const u=d(t,["googleSearch"]);u!=null&&v(e,["googleSearch"],u);const c=d(t,["googleSearchRetrieval"]);c!=null&&v(e,["googleSearchRetrieval"],c);const f=d(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}function _D(t){const e={},n=d(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&v(e,["createTime"],i);const r=d(t,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function wD(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&v(e,["createTime"],i);const r=d(t,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function xD(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=d(t,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);const o=d(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&v(e,["defaultCheckpointId"],o),n}function SD(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=d(t,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);const o=d(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&v(e,["defaultCheckpointId"],o),n}function TD(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","name"],pn(t,i));const r=d(e,["config"]);return r!=null&&xD(r,n),n}function ED(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["config"]);return r!=null&&SD(r,n),n}function AD(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=d(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&v(e,["parameters","safetySetting"],r);const o=d(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const s=d(t,["includeRaiReason"]);e!==void 0&&s!=null&&v(e,["parameters","includeRaiReason"],s);const l=d(t,["outputMimeType"]);e!==void 0&&l!=null&&v(e,["parameters","outputOptions","mimeType"],l);const u=d(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&v(e,["parameters","outputOptions","compressionQuality"],u);const c=d(t,["enhanceInputImage"]);e!==void 0&&c!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=d(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const g=d(t,["labels"]);e!==void 0&&g!=null&&v(e,["labels"],g);const y=d(t,["numberOfImages"]);e!==void 0&&y!=null&&v(e,["parameters","sampleCount"],y);const w=d(t,["mode"]);return e!==void 0&&w!=null&&v(e,["parameters","mode"],w),n}function bD(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["_url","model"],pn(t,i));const r=d(e,["image"]);r!=null&&v(n,["instances[0]","image"],Gs(r));const o=d(e,["upscaleFactor"]);o!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=d(e,["config"]);return s!=null&&AD(s,n),n}function CD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>ym(o))),v(e,["generatedImages"],r)}return e}function ID(t){const e={},n=d(t,["uri"]);n!=null&&v(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],Yl(i));const r=d(t,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function PD(t){const e={},n=d(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],Yl(i));const r=d(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function ND(t){const e={},n=d(t,["image"]);n!=null&&v(e,["_self"],Gs(n));const i=d(t,["maskMode"]);return i!=null&&v(e,["maskMode"],i),e}function kD(t){const e={},n=d(t,["image"]);n!=null&&v(e,["image"],_m(n));const i=d(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function LD(t){const e={},n=d(t,["image"]);n!=null&&v(e,["image"],Gs(n));const i=d(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function $E(t){const e={},n=d(t,["uri"]);n!=null&&v(e,["uri"],n);const i=d(t,["videoBytes"]);i!=null&&v(e,["encodedVideo"],Yl(i));const r=d(t,["mimeType"]);return r!=null&&v(e,["encoding"],r),e}function KE(t){const e={},n=d(t,["uri"]);n!=null&&v(e,["gcsUri"],n);const i=d(t,["videoBytes"]);i!=null&&v(e,["bytesBase64Encoded"],Yl(i));const r=d(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RD(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["displayName"],i),n}function MD(t){const e={},n=d(t,["config"]);return n!=null&&RD(n,e),e}function DD(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&v(e,["_query","force"],i),n}function FD(t){const e={},n=d(t,["name"]);n!=null&&v(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&DD(i,e),e}function OD(t){const e={},n=d(t,["name"]);return n!=null&&v(e,["_url","name"],n),e}function VD(t,e){const n={},i=d(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["customMetadata"],o)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&v(e,["chunkingConfig"],r),n}function BD(t){const e={},n=d(t,["name"]);n!=null&&v(e,["name"],n);const i=d(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=d(t,["done"]);r!=null&&v(e,["done"],r);const o=d(t,["error"]);o!=null&&v(e,["error"],o);const s=d(t,["response"]);return s!=null&&v(e,["response"],zD(s)),e}function UD(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&v(e,["_url","file_search_store_name"],n);const i=d(t,["fileName"]);i!=null&&v(e,["fileName"],i);const r=d(t,["config"]);return r!=null&&VD(r,e),e}function zD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&v(e,["parent"],i);const r=d(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function qD(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function HD(t){const e={},n=d(t,["config"]);return n!=null&&qD(n,e),e}function GD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["fileSearchStores"],o)}return e}function JE(t,e){const n={},i=d(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["mimeType"],i);const r=d(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),v(e,["customMetadata"],l)}const s=d(t,["chunkingConfig"]);return e!==void 0&&s!=null&&v(e,["chunkingConfig"],s),n}function jD(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&v(e,["_url","file_search_store_name"],n);const i=d(t,["config"]);return i!=null&&JE(i,e),e}function WD(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $D="Content-Type",KD="X-Server-Timeout",JD="User-Agent",iv="x-goog-api-client",YD="1.38.0",ZD=`google-genai-sdk/${YD}`,QD="v1beta1",XD="v1beta";class e8{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:QD}else{if(!this.clientOptions.apiKey)throw new Tf({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:XD,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Z0.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))r.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&t8(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Q5(r),new Q0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Q5(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return zs(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield Ot(r.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=o.decode(f,{stream:!0});try{const N=JSON.parse(g);if("error"in N){const R=JSON.parse(JSON.stringify(N.error)),F=R.status,T=R.code,I=`got status: ${F}. ${JSON.stringify(N)}`;if(T>=400&&T<600)throw new Tf({message:I,status:T})}}catch(N){if(N.name==="ApiError")throw N}s+=g;let y=-1,w=0;for(;;){y=-1,w=0;for(const F of u){const T=s.indexOf(F);T!==-1&&(y===-1||T<y)&&(y=T,w=F.length)}if(y===-1)break;const N=s.substring(0,y);s=s.substring(y+w);const R=N.trim();if(R.startsWith(l)){const F=R.substring(l.length).trim();try{const T=new Response(F,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ot(new Q0(T))}catch(T){throw new Error(`exception parsing stream chunk ${F}. ${T}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=ZD+" "+this.clientOptions.userAgentExtra;return e[JD]=n,e[iv]=n,e[$D]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(KD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const u={file:r},c=this.getFileName(e),f=st("upload/v1beta/files",u._url),g=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,c,u,n==null?void 0:n.httpOptions);return o.upload(e,g,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),g={};i!=null&&JE(i,g);const y=await this.fetchUploadUrl(c,l,u,f,g,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=c==null?void 0:c.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Q5(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Tf({message:r,status:n}):new Error(r)}}function t8(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],f=l[u];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=i(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),l[u]=c)}return l}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n8="mcp_used/unknown";let i8=!1;function YE(t){for(const e of t)if(r8(e)||typeof e=="object"&&"inputSchema"in e)return!0;return i8}function ZE(t){var e;const n=(e=t[iv])!==null&&e!==void 0?e:"";t[iv]=(n+` ${n8}`).trimStart()}function r8(t){return t!==null&&typeof t=="object"&&t instanceof r_}function o8(t){return zs(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const s=yield Ot(n.listTools({cursor:r}));for(const l of s.tools)yield yield Ot(l),o++;if(!s.nextCursor)break;r=s.nextCursor}})}class r_{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new r_(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,qs(o8(f))),c;c=await u.next(),e=c.done,!e;l=!0){r=c.value,l=!1;const g=r;s.push(g);const y=g.name;if(o[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);o[y]=f}}catch(g){n={error:g}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),FL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function s8(t,e,n){const i=new IL;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class a8{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=c8(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const f=new Promise(P=>{c=P}),g=e.callbacks,y=function(){c({})},w=this.apiClient,N={onopen:y,onmessage:P=>{s8(w,g.onmessage,P)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=g==null?void 0:g.onclose)!==null&&i!==void 0?i:function(P){}},R=this.webSocketFactory.create(u,u8(s),N);R.connect(),await f;const I={setup:{model:pn(this.apiClient,e.model)}};return R.send(JSON.stringify(I)),new l8(R,this.apiClient)}}class l8{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=R6(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=L6(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(mc.PLAY)}pause(){this.sendPlaybackControl(mc.PAUSE)}stop(){this.sendPlaybackControl(mc.STOP)}resetContext(){this.sendPlaybackControl(mc.RESET_CONTEXT)}close(){this.conn.close()}}function u8(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function c8(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h8="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function f8(t,e,n){const i=new CL;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const s=F6(o);Object.assign(i,s)}else Object.assign(i,o);e(i)}class d8{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new a8(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&YE(e.config.tools)&&ZE(g);const y=v8(g);if(this.apiClient.isVertexAI()){const O=this.apiClient.getProject(),H=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),b=!!O&&!!H||!!k;this.apiClient.getCustomBaseUrl()&&!b?f=u:(f=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,f))}else{const O=this.apiClient.getApiKey();let H="BidiGenerateContent",k="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",k="access_token"),f=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${H}?${k}=${O}`}let w=()=>{};const N=new Promise(O=>{w=O}),R=e.callbacks,F=function(){var O;(O=R==null?void 0:R.onopen)===null||O===void 0||O.call(R),w({})},T=this.apiClient,I={onopen:F,onmessage:O=>{f8(T,R.onmessage,O)},onerror:(n=R==null?void 0:R.onerror)!==null&&n!==void 0?n:function(O){},onclose:(i=R==null?void 0:R.onclose)!==null&&i!==void 0?i:function(O){}},P=this.webSocketFactory.create(f,g8(y),I);P.connect(),await N;let G=pn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const O=this.apiClient.getProject(),H=this.apiClient.getLocation();O&&H&&(G=`projects/${O}/locations/${H}/`+G)}let J={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mp.AUDIO]}:e.config.responseModalities=[Mp.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],D=[];for(const O of Q)if(this.isCallableTool(O)){const H=O;D.push(await H.tool())}else D.push(O);D.length>0&&(e.config.tools=D);const C={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=k6(this.apiClient,C):J=N6(this.apiClient,C),delete J.config,P.send(JSON.stringify(J)),new m8(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const p8={turnComplete:!0};class m8{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=us(n.turns),e.isVertexAI()||(i=i.map(r=>vm(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(h8)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},p8),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:D6(e)}:n={realtimeInput:M6(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function g8(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function v8(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X5=10;function ew(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ic(s)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ic(t){return"callTool"in t&&typeof t.callTool=="function"}function y8(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ic(r)))!==null&&i!==void 0?i:!1}function tw(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(Ic(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function nw(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _8 extends Xa{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!y8(n)||ew(n.config))return await this.generateContentInternal(u);const c=tw(n);if(c.length>0){const R=c.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${R}.`)}let f,g;const y=us(u.contents),w=(o=(r=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:X5;let N=0;for(;N<w&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const R=f.candidates[0].content,F=[];for(const T of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Ic(T)){const P=await T.callTool(f.functionCalls);F.push(...P)}N++,g={role:"user",parts:F},u.contents=us(u.contents),u.contents.push(R),u.contents.push(g),nw(u.config)&&(y.push(R),y.push(g))}return nw(u.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{var i,r,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),ew(n.config)){const g=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(g)}const u=tw(n);if(u.length>0){const g=u.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const s=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Mu(Za.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>Ic(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&YE(e.config.tools)){const u=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),ZE(c),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const s of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ic(s)){const l=s,u=await l.tool();for(const c of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,l)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:X5;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(c,f,g){return zs(this,arguments,function*(){for(var y,w,N,R,F,T;l<o;){s&&(l++,s=!1);const J=yield Ot(c.processParamsMaybeAddMcpUsage(g)),Q=yield Ot(c.generateContentStreamInternal(J)),D=[],C=[];try{for(var I=!0,P=(w=void 0,qs(Q)),G;G=yield Ot(P.next()),y=G.done,!y;I=!0){R=G.value,I=!1;const O=R;if(yield yield Ot(O),O.candidates&&(!((F=O.candidates[0])===null||F===void 0)&&F.content)){C.push(O.candidates[0].content);for(const H of(T=O.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(l<o&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(H.functionCall.name)){const k=yield Ot(f.get(H.functionCall.name).callTool([H.functionCall]));D.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(O){w={error:O}}finally{try{!I&&!y&&(N=P.return)&&(yield Ot(N.call(P)))}finally{if(w)throw w.error}}if(D.length>0){s=!0;const O=new _h;O.candidates=[{content:{role:"user",parts:D}}],yield yield Ot(O);const H=[];H.push(...C),H.push({role:"user",parts:D});const k=us(g.contents).concat(H);g.contents=k}else break}})}(this,u,e)}async generateContentInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=J5(this.apiClient,e);return l=st("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=Z5(f),y=new _h;return Object.assign(y,g),y})}else{const c=K5(this.apiClient,e);return l=st("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=Y5(f),y=new _h;return Object.assign(y,g),y})}}async generateContentStreamInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=J5(this.apiClient,e);return l=st("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(g){return zs(this,arguments,function*(){var y,w,N,R;try{for(var F=!0,T=qs(g),I;I=yield Ot(T.next()),y=I.done,!y;F=!0){R=I.value,F=!1;const P=R,G=Z5(yield Ot(P.json()));G.sdkHttpResponse={headers:P.headers};const J=new _h;Object.assign(J,G),yield yield Ot(J)}}catch(P){w={error:P}}finally{try{!F&&!y&&(N=T.return)&&(yield Ot(N.call(T)))}finally{if(w)throw w.error}}})})}else{const c=K5(this.apiClient,e);return l=st("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(g){return zs(this,arguments,function*(){var y,w,N,R;try{for(var F=!0,T=qs(g),I;I=yield Ot(T.next()),y=I.done,!y;F=!0){R=I.value,F=!1;const P=R,G=Y5(yield Ot(P.json()));G.sdkHttpResponse={headers:P.headers};const J=new _h;Object.assign(J,G),yield yield Ot(J)}}catch(P){w={error:P}}finally{try{!F&&!y&&(N=T.return)&&(yield Ot(N.call(T)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=dM(this.apiClient,e);return l=st("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=mM(f),y=new k5;return Object.assign(y,g),y})}else{const c=fM(this.apiClient,e);return l=st("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=pM(f),y=new k5;return Object.assign(y,g),y})}}async generateImagesInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=bM(this.apiClient,e);return l=st("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=IM(f),y=new L5;return Object.assign(y,g),y})}else{const c=AM(this.apiClient,e);return l=st("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=CM(f),y=new L5;return Object.assign(y,g),y})}}async editImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=lM(this.apiClient,e);return o=st("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=uM(u),f=new gL;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=bD(this.apiClient,e);return o=st("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=CD(u),f=new vL;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=aD(this.apiClient,e);return o=st("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=lD(u),f=new yL;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=pD(this.apiClient,e);return o=st("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=mD(u),f=new _L;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=jM(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>nv(f))}else{const c=GM(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>tv(f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=eD(this.apiClient,e);return l=st("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=nD(f),y=new R5;return Object.assign(y,g),y})}else{const c=XM(this.apiClient,e);return l=st("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=tD(f),y=new R5;return Object.assign(y,g),y})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=ED(this.apiClient,e);return l=st("{model}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>nv(f))}else{const c=TD(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>tv(f))}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=rM(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=sM(f),y=new M5;return Object.assign(y,g),y})}else{const c=iM(this.apiClient,e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=oM(f),y=new M5;return Object.assign(y,g),y})}}async countTokens(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=eM(this.apiClient,e);return l=st("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=nM(f),y=new D5;return Object.assign(y,g),y})}else{const c=X6(this.apiClient,e);return l=st("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=tM(f),y=new D5;return Object.assign(y,g),y})}}async computeTokens(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=W6(this.apiClient,e);return o=st("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=$6(u),f=new wL;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=MM(this.apiClient,e);return l=st("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const g=LM(f),y=new Dp;return Object.assign(y,g),y})}else{const c=RM(this.apiClient,e);return l=st("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const g=kM(f),y=new Dp;return Object.assign(y,g),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w8 extends Xa{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=cL(e);return l=st("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else{const c=uL(e);return l=st("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=nL(e);return o=st("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x8(t){const e={},n=d(t,["data"]);if(n!=null&&v(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function S8(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>k8(o))),v(e,["parts"],r)}const i=d(t,["role"]);return i!=null&&v(e,["role"],i),e}function T8(t,e,n){const i={},r=d(e,["expireTime"]);n!==void 0&&r!=null&&v(n,["expireTime"],r);const o=d(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&v(n,["newSessionExpireTime"],o);const s=d(e,["uses"]);n!==void 0&&s!=null&&v(n,["uses"],s);const l=d(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&v(n,["bidiGenerateContentSetup"],N8(t,l));const u=d(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&v(n,["fieldMask"],u),i}function E8(t,e){const n={},i=d(e,["config"]);return i!=null&&v(n,["config"],T8(t,i,n)),n}function A8(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function b8(t){const e={},n=d(t,["id"]);n!=null&&v(e,["id"],n);const i=d(t,["args"]);i!=null&&v(e,["args"],i);const r=d(t,["name"]);if(r!=null&&v(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C8(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function I8(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function P8(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const o=d(t,["temperature"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","temperature"],o);const s=d(t,["topP"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","topP"],s);const l=d(t,["topK"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topK"],l);const u=d(t,["maxOutputTokens"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","maxOutputTokens"],u);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","mediaResolution"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","seed"],f);const g=d(t,["speechConfig"]);e!==void 0&&g!=null&&v(e,["setup","generationConfig","speechConfig"],i_(g));const y=d(t,["thinkingConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","thinkingConfig"],y);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&v(e,["setup","systemInstruction"],S8(br(N)));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let Q=Xc(R);Array.isArray(Q)&&(Q=Q.map(D=>R8(Qc(D)))),v(e,["setup","tools"],Q)}const F=d(t,["sessionResumption"]);e!==void 0&&F!=null&&v(e,["setup","sessionResumption"],L8(F));const T=d(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","inputAudioTranscription"],T);const I=d(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&v(e,["setup","outputAudioTranscription"],I);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&v(e,["setup","realtimeInputConfig"],P);const G=d(t,["contextWindowCompression"]);e!==void 0&&G!=null&&v(e,["setup","contextWindowCompression"],G);const J=d(t,["proactivity"]);if(e!==void 0&&J!=null&&v(e,["setup","proactivity"],J),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function N8(t,e){const n={},i=d(e,["model"]);i!=null&&v(n,["setup","model"],pn(t,i));const r=d(e,["config"]);return r!=null&&v(n,["config"],P8(r,n)),n}function k8(t){const e={},n=d(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=d(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=d(t,["fileData"]);o!=null&&v(e,["fileData"],A8(o));const s=d(t,["functionCall"]);s!=null&&v(e,["functionCall"],b8(s));const l=d(t,["functionResponse"]);l!=null&&v(e,["functionResponse"],l);const u=d(t,["inlineData"]);u!=null&&v(e,["inlineData"],x8(u));const c=d(t,["text"]);c!=null&&v(e,["text"],c);const f=d(t,["thought"]);f!=null&&v(e,["thought"],f);const g=d(t,["thoughtSignature"]);g!=null&&v(e,["thoughtSignature"],g);const y=d(t,["videoMetadata"]);return y!=null&&v(e,["videoMetadata"],y),e}function L8(t){const e={},n=d(t,["handle"]);if(n!=null&&v(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function R8(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);const r=d(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>g)),v(e,["functionDeclarations"],f)}const s=d(t,["googleMaps"]);s!=null&&v(e,["googleMaps"],C8(s));const l=d(t,["googleSearch"]);l!=null&&v(e,["googleSearch"],I8(l));const u=d(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);const c=d(t,["urlContext"]);return c!=null&&v(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M8(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function D8(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=M8(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class F8 extends Xa{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=E8(this.apiClient,e);o=st("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=D8(l,e.config);return r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O8(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&v(e,["_query","force"],i),n}function V8(t){const e={},n=d(t,["name"]);n!=null&&v(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&O8(i,e),e}function B8(t){const e={},n=d(t,["name"]);return n!=null&&v(e,["_url","name"],n),e}function U8(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function z8(t){const e={},n=d(t,["parent"]);n!=null&&v(e,["_url","parent"],n);const i=d(t,["config"]);return i!=null&&U8(i,e),e}function q8(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=d(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),v(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H8 extends Xa{constructor(e){super(),this.apiClient=e,this.list=async n=>new Mu(Za.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=B8(e);return o=st("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=V8(e);r=st("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=z8(e);return o=st("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=q8(u),f=new xL;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G8 extends Xa{constructor(e,n=new H8(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Mu(Za.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=MD(e);return o=st("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=OD(e);return o=st("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=FD(e);r=st("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=HD(e);return o=st("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=GD(u),f=new SL;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=jD(e);return o=st("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=WD(u),f=new TL;return Object.assign(f,c),f})}}async importFile(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UD(e);return o=st("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=BD(u),f=new Qy;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return QE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const j8=()=>QE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ov=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fs extends Error{}class zr extends fs{constructor(e,n,i,r){super(`${zr.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new wm({message:i,cause:ov(n)});const o=n;return e===400?new eA(e,o,i,r):e===401?new tA(e,o,i,r):e===403?new nA(e,o,i,r):e===404?new iA(e,o,i,r):e===409?new rA(e,o,i,r):e===422?new oA(e,o,i,r):e===429?new sA(e,o,i,r):e>=500?new aA(e,o,i,r):new zr(e,o,i,r)}}class sv extends zr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class wm extends zr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class XE extends wm{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eA extends zr{}class tA extends zr{}class nA extends zr{}class iA extends zr{}class rA extends zr{}class oA extends zr{}class sA extends zr{}class aA extends zr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W8=/^[a-z][a-z0-9+.-]*:/i,$8=t=>W8.test(t);let av=t=>(av=Array.isArray,av(t));const K8=av;let J8=K8;const iw=J8;function Y8(t){if(!t)return!0;for(const e in t)return!1;return!0}function Z8(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Q8=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fs(`${t} must be an integer`);if(e<0)throw new fs(`${t} must be a positive integer`);return e},X8=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e7=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ec="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t7(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const n7=()=>{var t,e,n,i,r;const o=t7();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ec,"X-Stainless-OS":ow(Deno.build.os),"X-Stainless-Arch":rw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ec,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ec,"X-Stainless-OS":ow((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":rw((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=i7();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ec,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ec,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function i7(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,s=i[3]||0;return{browser:e,version:`${r}.${o}.${s}`}}}return null}const rw=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ow=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Sd;const r7=()=>Sd??(Sd=n7());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o7(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function s7(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return lA({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function uA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function a7(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l7=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cA=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function xg(t,e,n){return cA(),new File(t,e??"unknown_file",n)}function u7(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const c7=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",h7=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hA(t),f7=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function d7(t,e,n){if(cA(),t=await t,h7(t))return t instanceof File?t:xg([await t.arrayBuffer()],t.name);if(f7(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),xg(await lv(r),e,n)}const i=await lv(t);if(e||(e=u7(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return xg(i,e,n)}async function lv(t){var e,n,i,r,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(hA(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(c7(t))try{for(var l=!0,u=qs(t),c;c=await u.next(),e=c.done,!e;l=!0){r=c.value,l=!1;const f=r;s.push(...await lv(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{const f=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${p7(t)}`)}return s}function p7(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fA{constructor(e){this._client=e}}fA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const sw=Object.freeze(Object.create(null)),m7=(t=dA)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],s=n.reduce((f,g,y)=>{var w,N,R;/[?#]/.test(g)&&(r=!0);const F=i[y];let T=(r?encodeURIComponent:t)(""+F);return y!==i.length&&(F==null||typeof F=="object"&&F.toString===((R=Object.getPrototypeOf((N=Object.getPrototypeOf((w=F.hasOwnProperty)!==null&&w!==void 0?w:sw))!==null&&N!==void 0?N:sw))===null||R===void 0?void 0:R.toString))&&(T=F+"",o.push({start:f.length+g.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(F).slice(8,-1)} is not a valid path parameter`})),f+g+(y===i.length?"":T)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(l))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((f,g)=>f.start-g.start),o.length>0){let f=0;const g=o.reduce((y,w)=>{const N=" ".repeat(w.start-f),R="^".repeat(w.length);return f=w.start+w.length,y+N+R},"");throw new fs(`Path parameters result in path with invalid segments:
${o.map(y=>y.error).join(`
`)}
${s}
${g}`)}return s},Td=m7(dA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA extends fA{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=Op(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new fs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new fs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Td`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Td`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Td`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:s=this._client.apiVersion}=o,l=Op(o,["api_version"]);return this._client.get(Td`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}pA._key=Object.freeze(["interactions"]);class mA extends pA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g7(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Ed;function o_(t){let e;return(Ed??(e=new globalThis.TextEncoder,Ed=e.encode.bind(e)))(t)}let Ad;function aw(t){let e;return(Ad??(e=new globalThis.TextDecoder,Ad=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xm{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?o_(e):e;this.buffer=g7([this.buffer,n]);const i=[];let r;for(;(r=v7(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(aw(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=aw(this.buffer.subarray(0,o));i.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}xm.NEWLINE_CHARS=new Set([`
`,"\r"]);xm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function v7(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function y7(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vp={off:0,error:200,warn:300,info:400,debug:500},lw=(t,e,n)=>{if(t){if(Z8(Vp,t))return t;Vr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Vp))}`)}};function Nh(){}function bd(t,e,n){return!e||Vp[t]>Vp[n]?Nh:e[t].bind(e)}const _7={error:Nh,warn:Nh,info:Nh,debug:Nh};let uw=new WeakMap;function Vr(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return _7;const r=uw.get(n);if(r&&r[0]===i)return r[1];const o={error:bd("error",n,i),warn:bd("warn",n,i),info:bd("info",n,i),debug:bd("debug",n,i)};return uw.set(n,[i,o]),o}const lu=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gc{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Vr(i):console;function s(){return zs(this,arguments,function*(){var u,c,f,g;if(r)throw new fs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var w=!0,N=qs(w7(e,n)),R;R=yield Ot(N.next()),u=R.done,!u;w=!0){g=R.value,w=!1;const F=g;if(!y)if(F.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield Ot(JSON.parse(F.data))}catch(T){throw o.error("Could not parse message into JSON:",F.data),o.error("From chunk:",F.raw),T}}}catch(F){c={error:F}}finally{try{!w&&!u&&(f=N.return)&&(yield Ot(f.call(N)))}finally{if(c)throw c.error}}y=!0}catch(F){if(rv(F))return yield Ot(void 0);throw F}finally{y||n.abort()}})}return new gc(s,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return zs(this,arguments,function*(){var u,c,f,g;const y=new xm,w=uA(e);try{for(var N=!0,R=qs(w),F;F=yield Ot(R.next()),u=F.done,!u;N=!0){g=F.value,N=!1;const T=g;for(const I of y.decode(T))yield yield Ot(I)}}catch(T){c={error:T}}finally{try{!N&&!u&&(f=R.return)&&(yield Ot(f.call(R)))}finally{if(c)throw c.error}}for(const T of y.flush())yield yield Ot(T)})}function s(){return zs(this,arguments,function*(){var u,c,f,g;if(r)throw new fs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var w=!0,N=qs(o()),R;R=yield Ot(N.next()),u=R.done,!u;w=!0){g=R.value,w=!1;const F=g;y||F&&(yield yield Ot(JSON.parse(F)))}}catch(F){c={error:F}}finally{try{!w&&!u&&(f=N.return)&&(yield Ot(f.call(N)))}finally{if(c)throw c.error}}y=!0}catch(F){if(rv(F))return yield Ot(void 0);throw F}finally{y||n.abort()}})}return new gc(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const s=i.next();e.push(s),n.push(s)}return o.shift()}});return[new gc(()=>r(e),this.controller,this.client),new gc(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return lA({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const s=o_(JSON.stringify(r)+`
`);i.enqueue(s)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function w7(t,e){return zs(this,arguments,function*(){var i,r,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new fs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new fs("Attempted to iterate over a response with no body");const l=new S7,u=new xm,c=uA(t.body);try{for(var f=!0,g=qs(x7(c)),y;y=yield Ot(g.next()),i=y.done,!i;f=!0){s=y.value,f=!1;const w=s;for(const N of u.decode(w)){const R=l.decode(N);R&&(yield yield Ot(R))}}}catch(w){r={error:w}}finally{try{!f&&!i&&(o=g.return)&&(yield Ot(o.call(g)))}finally{if(r)throw r.error}}for(const w of u.flush()){const N=l.decode(w);N&&(yield yield Ot(N))}})}function x7(t){return zs(this,arguments,function*(){var n,i,r,o;let s=new Uint8Array;try{for(var l=!0,u=qs(t),c;c=yield Ot(u.next()),n=c.done,!n;l=!0){o=c.value,l=!1;const f=o;if(f==null)continue;const g=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?o_(f):f;let y=new Uint8Array(s.length+g.length);y.set(s),y.set(g,s.length),s=y;let w;for(;(w=y7(s))!==-1;)yield yield Ot(s.slice(0,w)),s=s.slice(w)}}catch(f){i={error:f}}finally{try{!l&&!n&&(r=u.return)&&(yield Ot(r.call(u)))}finally{if(i)throw i.error}}s.length>0&&(yield yield Ot(s))})}class S7{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=T7(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function T7(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function E7(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,s=await(async()=>{var l;if(e.options.stream)return Vr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):gc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Vr(t).debug(`[${i}] response parsed`,lu({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s_ extends Promise{constructor(e,n,i=E7){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new s_(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gA=Symbol("brand.privateNullableHeaders");function*A7(t){if(!t)return;if(gA in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():iw(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=iw(i[1])?i[1]:[i[1]];let s=!1;for(const l of o)l!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,l])}}const wh=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,s]of A7(i)){const l=o.toLowerCase();r.has(l)||(e.delete(o),r.add(l)),s===null?(e.delete(o),n.add(l)):(e.append(o,s),n.delete(l))}}return{[gA]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sg=t=>{var e,n,i,r,o,s;if(typeof globalThis.process<"u")return(i=(n=(e=Yk)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vA;class Sm{constructor(e){var n,i,r,o,s,l,u,{baseURL:c=Sg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Sg("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:g="v1beta"}=e,y=Op(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:f,apiVersion:g},y),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:Sm.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(s=(o=lw(w.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:lw(Sg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:N,this.fetchOptions=w.fetchOptions,this.maxRetries=(l=w.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=w.fetch)!==null&&u!==void 0?u:o7(),this.encoder=l7,this._options=w,this.apiKey=f,this.apiVersion=g,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=wh([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return wh([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return wh([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new fs(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ec}`}defaultIdempotencyKey(){return`stainless-node-retry-${j8()}`}makeStatusError(e,n,i,r){return zr.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=$8(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Y8(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new s_(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,s;const l=await e,u=(r=l.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:c,url:f,timeout:g}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(c,{url:f,options:l});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,N=Date.now();if(Vr(this).debug(`[${y}] sending request`,lu({retryOfRequestLogID:i,method:l.method,url:f,options:l,headers:c.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new sv;const R=new AbortController,F=await this.fetchWithTimeout(f,c,g,R).catch(ov),T=Date.now();if(F instanceof globalThis.Error){const P=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new sv;const G=rv(F)||/timed? ?out/i.test(String(F)+("cause"in F?String(F.cause):""));if(n)return Vr(this).info(`[${y}] connection ${G?"timed out":"failed"} - ${P}`),Vr(this).debug(`[${y}] connection ${G?"timed out":"failed"} (${P})`,lu({retryOfRequestLogID:i,url:f,durationMs:T-N,message:F.message})),this.retryRequest(l,n,i??y);throw Vr(this).info(`[${y}] connection ${G?"timed out":"failed"} - error; no more retries left`),Vr(this).debug(`[${y}] connection ${G?"timed out":"failed"} (error; no more retries left)`,lu({retryOfRequestLogID:i,url:f,durationMs:T-N,message:F.message})),G?new XE:new wm({cause:F})}const I=`[${y}${w}] ${c.method} ${f} ${F.ok?"succeeded":"failed"} with status ${F.status} in ${T-N}ms`;if(!F.ok){const P=await this.shouldRetry(F);if(n&&P){const O=`retrying, ${n} attempts remaining`;return await a7(F.body),Vr(this).info(`${I} - ${O}`),Vr(this).debug(`[${y}] response error (${O})`,lu({retryOfRequestLogID:i,url:F.url,status:F.status,headers:F.headers,durationMs:T-N})),this.retryRequest(l,n,i??y,F.headers)}const G=P?"error; no more retries left":"error; not retryable";Vr(this).info(`${I} - ${G}`);const J=await F.text().catch(O=>ov(O).message),Q=X8(J),D=Q?void 0:J;throw Vr(this).debug(`[${y}] response error (${G})`,lu({retryOfRequestLogID:i,url:F.url,status:F.status,headers:F.headers,message:D,durationMs:Date.now()-N})),this.makeStatusError(F.status,Q,D,F.headers)}return Vr(this).info(I),Vr(this).debug(`[${y}] response start`,lu({retryOfRequestLogID:i,url:F.url,status:F.status,headers:F.headers,durationMs:T-N})),{response:F,options:l,controller:R,requestLogID:y,retryOfRequestLogID:i,startTime:N}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:s,method:l}=o,u=Op(o,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),i),f=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,g=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),u);l&&(g.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let s;const l=r==null?void 0:r.get("retry-after-ms");if(l){const c=parseFloat(l);Number.isNaN(c)||(s=c)}const u=r==null?void 0:r.get("retry-after");if(u&&!s){const c=parseFloat(u);Number.isNaN(c)?s=Date.parse(u)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await e7(s),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const s=Object.assign({},e),{method:l,path:u,query:c,defaultBaseURL:f}=s,g=this.buildURL(u,c,f);"timeout"in s&&Q8("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:y,body:w}=this.buildBody({options:s}),N=await this.buildHeaders({options:e,method:l,bodyHeaders:y,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:N},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:g,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=wh([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),r7()),this._options.defaultHeaders,i,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=wh([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:s7(e)}:this.encoder({body:e,headers:i})}}Sm.DEFAULT_TIMEOUT=6e4;class Gi extends Sm{constructor(){super(...arguments),this.interactions=new mA(this)}}vA=Gi;Gi.GeminiNextGenAPIClient=vA;Gi.GeminiNextGenAPIClientError=fs;Gi.APIError=zr;Gi.APIConnectionError=wm;Gi.APIConnectionTimeoutError=XE;Gi.APIUserAbortError=sv;Gi.NotFoundError=iA;Gi.ConflictError=rA;Gi.RateLimitError=sA;Gi.BadRequestError=eA;Gi.AuthenticationError=tA;Gi.InternalServerError=aA;Gi.PermissionDeniedError=nA;Gi.UnprocessableEntityError=oA;Gi.toFile=d7;Gi.Interactions=mA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b7(t,e){const n={},i=d(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function C7(t,e){const n={},i=d(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function I7(t,e){const n={},i=d(t,["sdkHttpResponse"]);return i!=null&&v(n,["sdkHttpResponse"],i),n}function P7(t,e){const n={},i=d(t,["sdkHttpResponse"]);return i!=null&&v(n,["sdkHttpResponse"],i),n}function N7(t,e,n){const i={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=d(t,["epochCount"]);e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","epochCount"],o);const s=d(t,["learningRateMultiplier"]);if(s!=null&&v(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=d(t,["batchSize"]);e!==void 0&&l!=null&&v(e,["tuningTask","hyperparameters","batchSize"],l);const u=d(t,["learningRate"]);if(e!==void 0&&u!=null&&v(e,["tuningTask","hyperparameters","learningRate"],u),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function k7(t,e,n){const i={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&v(e,["supervisedTuningSpec"],cw(w))}else if(r==="PREFERENCE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&v(e,["preferenceOptimizationSpec"],cw(w))}const o=d(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&v(e,["tunedModelDisplayName"],o);const s=d(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(l==="PREFERENCE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let u=d(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(u==="PREFERENCE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let c=d(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(c==="PREFERENCE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&v(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=d(t,["labels"]);e!==void 0&&g!=null&&v(e,["labels"],g);const y=d(t,["beta"]);return e!==void 0&&y!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","beta"],y),i}function L7(t,e){const n={},i=d(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);const r=d(t,["preTunedModel"]);r!=null&&v(n,["preTunedModel"],r);const o=d(t,["trainingDataset"]);o!=null&&H7(o);const s=d(t,["config"]);return s!=null&&N7(s,n),n}function R7(t,e){const n={},i=d(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);const r=d(t,["preTunedModel"]);r!=null&&v(n,["preTunedModel"],r);const o=d(t,["trainingDataset"]);o!=null&&G7(o,n,e);const s=d(t,["config"]);return s!=null&&k7(s,n,e),n}function M7(t,e){const n={},i=d(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function D7(t,e){const n={},i=d(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function F7(t,e,n){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&v(e,["_query","pageToken"],o);const s=d(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),i}function O7(t,e,n){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&v(e,["_query","pageToken"],o);const s=d(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),i}function V7(t,e){const n={},i=d(t,["config"]);return i!=null&&F7(i,n),n}function B7(t,e){const n={},i=d(t,["config"]);return i!=null&&O7(i,n),n}function U7(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&v(n,["nextPageToken"],r);const o=d(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>yA(l))),v(n,["tuningJobs"],s)}return n}function z7(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&v(n,["nextPageToken"],r);const o=d(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>uv(l))),v(n,["tuningJobs"],s)}return n}function q7(t,e){const n={},i=d(t,["name"]);i!=null&&v(n,["model"],i);const r=d(t,["name"]);return r!=null&&v(n,["endpoint"],r),n}function H7(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),v(n,["examples","examples"],r)}return n}function G7(t,e,n){const i={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=d(t,["gcsUri"]);e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=d(t,["gcsUri"]);e!==void 0&&s!=null&&v(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=d(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=d(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&v(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function yA(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=d(t,["name"]);r!=null&&v(n,["name"],r);const o=d(t,["state"]);o!=null&&v(n,["state"],ME(o));const s=d(t,["createTime"]);s!=null&&v(n,["createTime"],s);const l=d(t,["tuningTask","startTime"]);l!=null&&v(n,["startTime"],l);const u=d(t,["tuningTask","completeTime"]);u!=null&&v(n,["endTime"],u);const c=d(t,["updateTime"]);c!=null&&v(n,["updateTime"],c);const f=d(t,["description"]);f!=null&&v(n,["description"],f);const g=d(t,["baseModel"]);g!=null&&v(n,["baseModel"],g);const y=d(t,["_self"]);return y!=null&&v(n,["tunedModel"],q7(y)),n}function uv(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=d(t,["name"]);r!=null&&v(n,["name"],r);const o=d(t,["state"]);o!=null&&v(n,["state"],ME(o));const s=d(t,["createTime"]);s!=null&&v(n,["createTime"],s);const l=d(t,["startTime"]);l!=null&&v(n,["startTime"],l);const u=d(t,["endTime"]);u!=null&&v(n,["endTime"],u);const c=d(t,["updateTime"]);c!=null&&v(n,["updateTime"],c);const f=d(t,["error"]);f!=null&&v(n,["error"],f);const g=d(t,["description"]);g!=null&&v(n,["description"],g);const y=d(t,["baseModel"]);y!=null&&v(n,["baseModel"],y);const w=d(t,["tunedModel"]);w!=null&&v(n,["tunedModel"],w);const N=d(t,["preTunedModel"]);N!=null&&v(n,["preTunedModel"],N);const R=d(t,["supervisedTuningSpec"]);R!=null&&v(n,["supervisedTuningSpec"],R);const F=d(t,["preferenceOptimizationSpec"]);F!=null&&v(n,["preferenceOptimizationSpec"],F);const T=d(t,["tuningDataStats"]);T!=null&&v(n,["tuningDataStats"],T);const I=d(t,["encryptionSpec"]);I!=null&&v(n,["encryptionSpec"],I);const P=d(t,["partnerModelTuningSpec"]);P!=null&&v(n,["partnerModelTuningSpec"],P);const G=d(t,["customBaseModel"]);G!=null&&v(n,["customBaseModel"],G);const J=d(t,["experiment"]);J!=null&&v(n,["experiment"],J);const Q=d(t,["labels"]);Q!=null&&v(n,["labels"],Q);const D=d(t,["outputUri"]);D!=null&&v(n,["outputUri"],D);const C=d(t,["pipelineJob"]);C!=null&&v(n,["pipelineJob"],C);const O=d(t,["serviceAccount"]);O!=null&&v(n,["serviceAccount"],O);const H=d(t,["tunedModelDisplayName"]);H!=null&&v(n,["tunedModelDisplayName"],H);const k=d(t,["veoTuningSpec"]);return k!=null&&v(n,["veoTuningSpec"],k),n}function j7(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=d(t,["name"]);r!=null&&v(n,["name"],r);const o=d(t,["metadata"]);o!=null&&v(n,["metadata"],o);const s=d(t,["done"]);s!=null&&v(n,["done"],s);const l=d(t,["error"]);return l!=null&&v(n,["error"],l),n}function cw(t,e){const n={},i=d(t,["gcsUri"]);i!=null&&v(n,["validationDatasetUri"],i);const r=d(t,["vertexDatasetResource"]);return r!=null&&v(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W7 extends Xa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mu(Za.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Y0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=D7(e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>uv(f))}else{const c=M7(e);return l=st("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>yA(f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=B7(e);return l=st("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=z7(f),y=new F5;return Object.assign(y,g),y})}else{const c=V7(e);return l=st("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=U7(f),y=new F5;return Object.assign(y,g),y})}}async cancel(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=C7(e);return l=st("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=P7(f),y=new O5;return Object.assign(y,g),y})}else{const c=b7(e);return l=st("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const g=I7(f),y=new O5;return Object.assign(y,g),y})}}async tuneInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=R7(e,e);return o=st("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>uv(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=L7(e);return o=st("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>j7(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const K7=1024*1024*8,J7=3,Y7=1e3,Z7=2,Bp="x-goog-upload-status";async function Q7(t,e,n){var i;const r=await _A(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Bp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function X7(t,e,n){var i;const r=await _A(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Bp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=IE(o),l=new Xy;return Object.assign(l,s),l}async function _A(t,e,n){var i,r;let o=0,s=0,l=new Q0(new Response),u="upload";for(o=t.size;s<o;){const c=Math.min(K7,o-s),f=t.slice(s,s+c);s+c>=o&&(u+=", finalize");let g=0,y=Y7;for(;g<J7&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[Bp]));)g++,await tF(y),y=y*Z7;if(s+=c,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[Bp])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function eF(t){return{size:t.size,type:t.type}}function tF(t){return new Promise(e=>setTimeout(e,t))}class nF{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Q7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eF(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iF{create(e,n,i){return new rF(e,n,i)}}class rF{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hw="x-goog-api-key";class oF{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(hw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sF="gl-node/";class aF{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Gi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=eL(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new oF(this.apiKey);this.apiClient=new e8({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:sF+"web",uploader:new nF,downloader:new $7}),this.models=new _8(this.apiClient),this.live=new d8(this.apiClient,r,new iF),this.batches=new PR(this.apiClient),this.chats=new c6(this.models,this.apiClient),this.caches=new a6(this.apiClient),this.files=new w6(this.apiClient),this.operations=new w8(this.apiClient),this.authTokens=new F8(this.apiClient),this.tunings=new W7(this.apiClient),this.fileSearchStores=new G8(this.apiClient)}}const lF=new aF({apiKey:"AIzaSy... (Gemini API Anahtarnz)"}),uF=async(t,e,n)=>{var i;try{const r=`${n} ilesindeki ${t} isimli, ${e} ara kapasiteli taksi dura iin ksa, resmi bir tantm/bilgi notu yaz. 1 cmleyi gemesin.`;return((i=(await lF.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text)==null?void 0:i.trim())||""}catch(r){return console.error("Gemini AI Error:",r),""}};var cv={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(kd,function(n){var i="1.9.4";function r(a){var h,_,E,z;for(_=1,E=arguments.length;_<E;_++){z=arguments[_];for(h in z)a[h]=z[h]}return a}var o=Object.create||function(){function a(){}return function(h){return a.prototype=h,new a}}();function s(a,h){var _=Array.prototype.slice;if(a.bind)return a.bind.apply(a,_.call(arguments,1));var E=_.call(arguments,2);return function(){return a.apply(h,E.length?E.concat(_.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function c(a,h,_){var E,z,X,me;return me=function(){E=!1,z&&(X.apply(_,z),z=!1)},X=function(){E?z=arguments:(a.apply(_,arguments),setTimeout(me,h),E=!0)},X}function f(a,h,_){var E=h[1],z=h[0],X=E-z;return a===E&&_?a:((a-z)%X+X)%X+z}function g(){return!1}function y(a,h){if(h===!1)return a;var _=Math.pow(10,h===void 0?6:h);return Math.round(a*_)/_}function w(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function N(a){return w(a).split(/\s+/)}function R(a,h){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?o(a.options):{});for(var _ in h)a.options[_]=h[_];return a.options}function F(a,h,_){var E=[];for(var z in a)E.push(encodeURIComponent(_?z.toUpperCase():z)+"="+encodeURIComponent(a[z]));return(!h||h.indexOf("?")===-1?"?":"&")+E.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function I(a,h){return a.replace(T,function(_,E){var z=h[E];if(z===void 0)throw new Error("No value provided for variable "+_);return typeof z=="function"&&(z=z(h)),z})}var P=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function G(a,h){for(var _=0;_<a.length;_++)if(a[_]===h)return _;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Q(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var D=0;function C(a){var h=+new Date,_=Math.max(0,16-(h-D));return D=h+_,window.setTimeout(a,_)}var O=window.requestAnimationFrame||Q("RequestAnimationFrame")||C,H=window.cancelAnimationFrame||Q("CancelAnimationFrame")||Q("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function k(a,h,_){if(_&&O===C)a.call(h);else return O.call(window,s(a,h))}function b(a){a&&H.call(window,a)}var V={__proto__:null,extend:r,create:o,bind:s,get lastId(){return l},stamp:u,throttle:c,wrapNum:f,falseFn:g,formatNum:y,trim:w,splitWords:N,setOptions:R,getParamString:F,template:I,isArray:P,indexOf:G,emptyImageUrl:J,requestFn:O,cancelFn:H,requestAnimFrame:k,cancelAnimFrame:b};function ie(){}ie.extend=function(a){var h=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,E=o(_);E.constructor=h,h.prototype=E;for(var z in this)Object.prototype.hasOwnProperty.call(this,z)&&z!=="prototype"&&z!=="__super__"&&(h[z]=this[z]);return a.statics&&r(h,a.statics),a.includes&&(_e(a.includes),r.apply(null,[E].concat(a.includes))),r(E,a),delete E.statics,delete E.includes,E.options&&(E.options=_.options?o(_.options):{},r(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var X=0,me=E._initHooks.length;X<me;X++)E._initHooks[X].call(this)}},h},ie.include=function(a){var h=this.prototype.options;return r(this.prototype,a),a.options&&(this.prototype.options=h,this.mergeOptions(a.options)),this},ie.mergeOptions=function(a){return r(this.prototype.options,a),this},ie.addInitHook=function(a){var h=Array.prototype.slice.call(arguments,1),_=typeof a=="function"?a:function(){this[a].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function _e(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=P(a)?a:[a];for(var h=0;h<a.length;h++)a[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(a,h,_){if(typeof a=="object")for(var E in a)this._on(E,a[E],h);else{a=N(a);for(var z=0,X=a.length;z<X;z++)this._on(a[z],h,_)}return this},off:function(a,h,_){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],h);else{a=N(a);for(var z=arguments.length===1,X=0,me=a.length;X<me;X++)z?this._off(a[X]):this._off(a[X],h,_)}return this},_on:function(a,h,_,E){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(a,h,_)===!1){_===this&&(_=void 0);var z={fn:h,ctx:_};E&&(z.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(z)}},_off:function(a,h,_){var E,z,X;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(z=0,X=E.length;z<X;z++)E[z].fn=g;delete this._events[a];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var me=this._listens(a,h,_);if(me!==!1){var Ce=E[me];this._firingCount&&(Ce.fn=g,this._events[a]=E=E.slice()),E.splice(me,1)}}},fire:function(a,h,_){if(!this.listens(a,_))return this;var E=r({},h,{type:a,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var z=this._events[a];if(z){this._firingCount=this._firingCount+1||1;for(var X=0,me=z.length;X<me;X++){var Ce=z[X],Le=Ce.fn;Ce.once&&this.off(a,Le,Ce.ctx),Le.call(Ce.ctx||this,E)}this._firingCount--}}return _&&this._propagateEvent(E),this},listens:function(a,h,_,E){typeof a!="string"&&console.warn('"string" type argument expected');var z=h;typeof h!="function"&&(E=!!h,z=void 0,_=void 0);var X=this._events&&this._events[a];if(X&&X.length&&this._listens(a,z,_)!==!1)return!0;if(E){for(var me in this._eventParents)if(this._eventParents[me].listens(a,h,_,E))return!0}return!1},_listens:function(a,h,_){if(!this._events)return!1;var E=this._events[a]||[];if(!h)return!!E.length;_===this&&(_=void 0);for(var z=0,X=E.length;z<X;z++)if(E[z].fn===h&&E[z].ctx===_)return z;return!1},once:function(a,h,_){if(typeof a=="object")for(var E in a)this._on(E,a[E],h,!0);else{a=N(a);for(var z=0,X=a.length;z<X;z++)this._on(a[z],h,_,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var h in this._eventParents)this._eventParents[h].fire(a.type,r({layer:a.target,propagatedFrom:a.target},a),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var se=ie.extend(le);function W(a,h,_){this.x=_?Math.round(a):a,this.y=_?Math.round(h):h}var oe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(a){return this.clone()._add(fe(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(fe(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new W(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new W(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(a){a=fe(a);var h=a.x-this.x,_=a.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(a){return a=fe(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=fe(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function fe(a,h,_){return a instanceof W?a:P(a)?new W(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new W(a.x,a.y):new W(a,h,_)}function xe(a,h){if(a)for(var _=h?[a,h]:a,E=0,z=_.length;E<z;E++)this.extend(_[E])}xe.prototype={extend:function(a){var h,_;if(!a)return this;if(a instanceof W||typeof a[0]=="number"||"x"in a)h=_=fe(a);else if(a=j(a),h=a.min,_=a.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(a){return fe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return fe(this.min.x,this.max.y)},getTopRight:function(){return fe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var h,_;return typeof a[0]=="number"||a instanceof W?a=fe(a):a=j(a),a instanceof xe?(h=a.min,_=a.max):h=_=a,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(a){a=j(a);var h=this.min,_=this.max,E=a.min,z=a.max,X=z.x>=h.x&&E.x<=_.x,me=z.y>=h.y&&E.y<=_.y;return X&&me},overlaps:function(a){a=j(a);var h=this.min,_=this.max,E=a.min,z=a.max,X=z.x>h.x&&E.x<_.x,me=z.y>h.y&&E.y<_.y;return X&&me},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var h=this.min,_=this.max,E=Math.abs(h.x-_.x)*a,z=Math.abs(h.y-_.y)*a;return j(fe(h.x-E,h.y-z),fe(_.x+E,_.y+z))},equals:function(a){return a?(a=j(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function j(a,h){return!a||a instanceof xe?a:new xe(a,h)}function ee(a,h){if(a)for(var _=h?[a,h]:a,E=0,z=_.length;E<z;E++)this.extend(_[E])}ee.prototype={extend:function(a){var h=this._southWest,_=this._northEast,E,z;if(a instanceof ue)E=a,z=a;else if(a instanceof ee){if(E=a._southWest,z=a._northEast,!E||!z)return this}else return a?this.extend(he(a)||ae(a)):this;return!h&&!_?(this._southWest=new ue(E.lat,E.lng),this._northEast=new ue(z.lat,z.lng)):(h.lat=Math.min(E.lat,h.lat),h.lng=Math.min(E.lng,h.lng),_.lat=Math.max(z.lat,_.lat),_.lng=Math.max(z.lng,_.lng)),this},pad:function(a){var h=this._southWest,_=this._northEast,E=Math.abs(h.lat-_.lat)*a,z=Math.abs(h.lng-_.lng)*a;return new ee(new ue(h.lat-E,h.lng-z),new ue(_.lat+E,_.lng+z))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ue||"lat"in a?a=he(a):a=ae(a);var h=this._southWest,_=this._northEast,E,z;return a instanceof ee?(E=a.getSouthWest(),z=a.getNorthEast()):E=z=a,E.lat>=h.lat&&z.lat<=_.lat&&E.lng>=h.lng&&z.lng<=_.lng},intersects:function(a){a=ae(a);var h=this._southWest,_=this._northEast,E=a.getSouthWest(),z=a.getNorthEast(),X=z.lat>=h.lat&&E.lat<=_.lat,me=z.lng>=h.lng&&E.lng<=_.lng;return X&&me},overlaps:function(a){a=ae(a);var h=this._southWest,_=this._northEast,E=a.getSouthWest(),z=a.getNorthEast(),X=z.lat>h.lat&&E.lat<_.lat,me=z.lng>h.lng&&E.lng<_.lng;return X&&me},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,h){return a?(a=ae(a),this._southWest.equals(a.getSouthWest(),h)&&this._northEast.equals(a.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ae(a,h){return a instanceof ee?a:new ee(a,h)}function ue(a,h,_){if(isNaN(a)||isNaN(h))throw new Error("Invalid LatLng object: ("+a+", "+h+")");this.lat=+a,this.lng=+h,_!==void 0&&(this.alt=+_)}ue.prototype={equals:function(a,h){if(!a)return!1;a=he(a);var _=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return _<=(h===void 0?1e-9:h)},toString:function(a){return"LatLng("+y(this.lat,a)+", "+y(this.lng,a)+")"},distanceTo:function(a){return be.distance(this,he(a))},wrap:function(){return be.wrapLatLng(this)},toBounds:function(a){var h=180*a/40075017,_=h/Math.cos(Math.PI/180*this.lat);return ae([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function he(a,h,_){return a instanceof ue?a:P(a)&&typeof a[0]!="object"?a.length===3?new ue(a[0],a[1],a[2]):a.length===2?new ue(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ue(a.lat,"lng"in a?a.lng:a.lon,a.alt):h===void 0?null:new ue(a,h,_)}var Te={latLngToPoint:function(a,h){var _=this.projection.project(a),E=this.scale(h);return this.transformation._transform(_,E)},pointToLatLng:function(a,h){var _=this.scale(h),E=this.transformation.untransform(a,_);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(a),E=this.transformation.transform(h.min,_),z=this.transformation.transform(h.max,_);return new xe(E,z)},infinite:!1,wrapLatLng:function(a){var h=this.wrapLng?f(a.lng,this.wrapLng,!0):a.lng,_=this.wrapLat?f(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new ue(_,h,E)},wrapLatLngBounds:function(a){var h=a.getCenter(),_=this.wrapLatLng(h),E=h.lat-_.lat,z=h.lng-_.lng;if(E===0&&z===0)return a;var X=a.getSouthWest(),me=a.getNorthEast(),Ce=new ue(X.lat-E,X.lng-z),Le=new ue(me.lat-E,me.lng-z);return new ee(Ce,Le)}},be=r({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(a,h){var _=Math.PI/180,E=a.lat*_,z=h.lat*_,X=Math.sin((h.lat-a.lat)*_/2),me=Math.sin((h.lng-a.lng)*_/2),Ce=X*X+Math.cos(E)*Math.cos(z)*me*me,Le=2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce));return this.R*Le}}),ke=6378137,Ge={R:ke,MAX_LATITUDE:85.0511287798,project:function(a){var h=Math.PI/180,_=this.MAX_LATITUDE,E=Math.max(Math.min(_,a.lat),-_),z=Math.sin(E*h);return new W(this.R*a.lng*h,this.R*Math.log((1+z)/(1-z))/2)},unproject:function(a){var h=180/Math.PI;return new ue((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*h,a.x*h/this.R)},bounds:function(){var a=ke*Math.PI;return new xe([-a,-a],[a,a])}()};function qe(a,h,_,E){if(P(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=h,this._c=_,this._d=E}qe.prototype={transform:function(a,h){return this._transform(a.clone(),h)},_transform:function(a,h){return h=h||1,a.x=h*(this._a*a.x+this._b),a.y=h*(this._c*a.y+this._d),a},untransform:function(a,h){return h=h||1,new W((a.x/h-this._b)/this._a,(a.y/h-this._d)/this._c)}};function Je(a,h,_,E){return new qe(a,h,_,E)}var Ze=r({},be,{code:"EPSG:3857",projection:Ge,transformation:function(){var a=.5/(Math.PI*Ge.R);return Je(a,.5,-a,.5)}()}),mt=r({},Ze,{code:"EPSG:900913"});function De(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function pe(a,h){var _="",E,z,X,me,Ce,Le;for(E=0,X=a.length;E<X;E++){for(Ce=a[E],z=0,me=Ce.length;z<me;z++)Le=Ce[z],_+=(z?"L":"M")+Le.x+" "+Le.y;_+=h?tt.svg?"z":"x":""}return _||"M0 0"}var It=document.documentElement.style,ut="ActiveXObject"in window,We=ut&&!document.addEventListener,Ye="msLaunchUri"in navigator&&!("documentMode"in document),et=hn("webkit"),Xe=hn("android"),ft=hn("android 2")||hn("android 3"),At=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Rt=Xe&&hn("Google")&&At<537&&!("AudioNode"in window),pt=!!window.opera,xt=!Ye&&hn("chrome"),Zt=hn("gecko")&&!et&&!pt&&!ut,St=!xt&&hn("safari"),zt=hn("phantom"),it="OTransition"in It,qn=navigator.platform.indexOf("Win")===0,Jt=ut&&"transition"in It,Ni="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ft,rn="MozPerspective"in It,Cn=!window.L_DISABLE_3D&&(Jt||Ni||rn)&&!it&&!zt,ki=typeof orientation<"u"||hn("mobile"),Qt=ki&&et,Po=ki&&Ni,In=!window.PointerEvent&&window.MSPointerEvent,pi=!!(window.PointerEvent||In),lr="ontouchstart"in window||!!window.TouchEvent,Pn=!window.L_NO_TOUCH&&(lr||pi),vt=ki&&pt,nn=ki&&Zt,Gr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xn=function(){var a=!1;try{var h=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",g,h),window.removeEventListener("testPassiveEventSupport",g,h)}catch{}return a}(),Li=function(){return!!document.createElement("canvas").getContext}(),ji=!!(document.createElementNS&&De("svg").createSVGRect),lt=!!ji&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ur=!ji&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var h=a.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Ri=navigator.platform.indexOf("Mac")===0,ei=navigator.platform.indexOf("Linux")===0;function hn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var tt={ie:ut,ielt9:We,edge:Ye,webkit:et,android:Xe,android23:ft,androidStock:Rt,opera:pt,chrome:xt,gecko:Zt,safari:St,phantom:zt,opera12:it,win:qn,ie3d:Jt,webkit3d:Ni,gecko3d:rn,any3d:Cn,mobile:ki,mobileWebkit:Qt,mobileWebkit3d:Po,msPointer:In,pointer:pi,touch:Pn,touchNative:lr,mobileOpera:vt,mobileGecko:nn,retina:Gr,passiveEvents:Xn,canvas:Li,svg:ji,vml:ur,inlineSvg:lt,mac:Ri,linux:ei},Wn=tt.msPointer?"MSPointerDown":"pointerdown",ds=tt.msPointer?"MSPointerMove":"pointermove",jr=tt.msPointer?"MSPointerUp":"pointerup",_i=tt.msPointer?"MSPointerCancel":"pointercancel",Mi={touchstart:Wn,touchmove:ds,touchend:jr,touchcancel:_i},Di={touchstart:$s,touchmove:ms,touchend:ms,touchcancel:ms},ti={},Hn=!1;function Ir(a,h,_){return h==="touchstart"&&ps(),Di[h]?(_=Di[h].bind(this,_),a.addEventListener(Mi[h],_,!1),_):(console.warn("wrong event specified:",h),g)}function No(a,h,_){if(!Mi[h]){console.warn("wrong event specified:",h);return}a.removeEventListener(Mi[h],_,!1)}function ko(a){ti[a.pointerId]=a}function Lo(a){ti[a.pointerId]&&(ti[a.pointerId]=a)}function Ro(a){delete ti[a.pointerId]}function ps(){Hn||(document.addEventListener(Wn,ko,!0),document.addEventListener(ds,Lo,!0),document.addEventListener(jr,Ro,!0),document.addEventListener(_i,Ro,!0),Hn=!0)}function ms(a,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in ti)h.touches.push(ti[_]);h.changedTouches=[h],a(h)}}function $s(a,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&vn(h),ms(a,h)}function tl(a){var h={},_,E;for(E in a)_=a[E],h[E]=_&&_.bind?_.bind(a):_;return a=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Mo=200;function Do(a,h){a.addEventListener("dblclick",h);var _=0,E;function z(X){if(X.detail!==1){E=X.detail;return}if(!(X.pointerType==="mouse"||X.sourceCapabilities&&!X.sourceCapabilities.firesTouchEvents)){var me=Kr(X);if(!(me.some(function(Le){return Le instanceof HTMLLabelElement&&Le.attributes.for})&&!me.some(function(Le){return Le instanceof HTMLInputElement||Le instanceof HTMLSelectElement}))){var Ce=Date.now();Ce-_<=Mo?(E++,E===2&&h(tl(X))):E=1,_=Ce}}}return a.addEventListener("click",z),{dblclick:h,simDblclick:z}}function uo(a,h){a.removeEventListener("dblclick",h.dblclick),a.removeEventListener("click",h.simDblclick)}var co=fo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gs=fo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ks=gs==="webkitTransition"||gs==="OTransition"?gs+"End":"transitionend";function Aa(a){return typeof a=="string"?document.getElementById(a):a}function Pr(a,h){var _=a.style[h]||a.currentStyle&&a.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);_=E?E[h]:null}return _==="auto"?null:_}function jt(a,h,_){var E=document.createElement(a);return E.className=h||"",_&&_.appendChild(E),E}function Pt(a){var h=a.parentNode;h&&h.removeChild(a)}function Fo(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Wr(a){var h=a.parentNode;h&&h.lastChild!==a&&h.appendChild(a)}function ho(a){var h=a.parentNode;h&&h.firstChild!==a&&h.insertBefore(a,h.firstChild)}function vs(a,h){if(a.classList!==void 0)return a.classList.contains(h);var _=Ln(a);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function Lt(a,h){if(a.classList!==void 0)for(var _=N(h),E=0,z=_.length;E<z;E++)a.classList.add(_[E]);else if(!vs(a,h)){var X=Ln(a);Oo(a,(X?X+" ":"")+h)}}function Xt(a,h){a.classList!==void 0?a.classList.remove(h):Oo(a,w((" "+Ln(a)+" ").replace(" "+h+" "," ")))}function Oo(a,h){a.className.baseVal===void 0?a.className=h:a.className.baseVal=h}function Ln(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Nn(a,h){"opacity"in a.style?a.style.opacity=h:"filter"in a.style&&ys(a,h)}function ys(a,h){var _=!1,E="DXImageTransform.Microsoft.Alpha";try{_=a.filters.item(E)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):a.style.filter+=" progid:"+E+"(opacity="+h+")"}function fo(a){for(var h=document.documentElement.style,_=0;_<a.length;_++)if(a[_]in h)return a[_];return!1}function Nr(a,h,_){var E=h||new W(0,0);a.style[co]=(tt.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(_?" scale("+_+")":"")}function bt(a,h){a._leaflet_pos=h,tt.any3d?Nr(a,h):(a.style.left=h.x+"px",a.style.top=h.y+"px")}function Wi(a){return a._leaflet_pos||new W(0,0)}var kr,$i,ba;if("onselectstart"in document)kr=function(){_t(window,"selectstart",vn)},$i=function(){$t(window,"selectstart",vn)};else{var Vo=fo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kr=function(){if(Vo){var a=document.documentElement.style;ba=a[Vo],a[Vo]="none"}},$i=function(){Vo&&(document.documentElement.style[Vo]=ba,ba=void 0)}}function Ca(){_t(window,"dragstart",vn)}function Lr(){$t(window,"dragstart",vn)}var po,Bo;function $r(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(gn(),po=a,Bo=a.style.outlineStyle,a.style.outlineStyle="none",_t(window,"keydown",gn))}function gn(){po&&(po.style.outlineStyle=Bo,po=void 0,Bo=void 0,$t(window,"keydown",gn))}function Ia(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function _s(a){var h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}var Ct={__proto__:null,TRANSFORM:co,TRANSITION:gs,TRANSITION_END:Ks,get:Aa,getStyle:Pr,create:jt,remove:Pt,empty:Fo,toFront:Wr,toBack:ho,hasClass:vs,addClass:Lt,removeClass:Xt,setClass:Oo,getClass:Ln,setOpacity:Nn,testProp:fo,setTransform:Nr,setPosition:bt,getPosition:Wi,get disableTextSelection(){return kr},get enableTextSelection(){return $i},disableImageDrag:Ca,enableImageDrag:Lr,preventOutline:$r,restoreOutline:gn,getSizedParentNode:Ia,getScale:_s};function _t(a,h,_,E){if(h&&typeof h=="object")for(var z in h)Uo(a,z,h[z],_);else{h=N(h);for(var X=0,me=h.length;X<me;X++)Uo(a,h[X],_,E)}return this}var cr="_leaflet_events";function $t(a,h,_,E){if(arguments.length===1)Pa(a),delete a[cr];else if(h&&typeof h=="object")for(var z in h)ws(a,z,h[z],_);else if(h=N(h),arguments.length===2)Pa(a,function(Ce){return G(h,Ce)!==-1});else for(var X=0,me=h.length;X<me;X++)ws(a,h[X],_,E);return this}function Pa(a,h){for(var _ in a[cr]){var E=_.split(/\d/)[0];(!h||h(E))&&ws(a,E,null,null,_)}}var Ki={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Uo(a,h,_,E){var z=h+u(_)+(E?"_"+u(E):"");if(a[cr]&&a[cr][z])return this;var X=function(Ce){return _.call(E||a,Ce||window.event)},me=X;!tt.touchNative&&tt.pointer&&h.indexOf("touch")===0?X=Ir(a,h,X):tt.touch&&h==="dblclick"?X=Do(a,X):"addEventListener"in a?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?a.addEventListener(Ki[h]||h,X,tt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(X=function(Ce){Ce=Ce||window.event,Ho(a,Ce)&&me(Ce)},a.addEventListener(Ki[h],X,!1)):a.addEventListener(h,me,!1):a.attachEvent("on"+h,X),a[cr]=a[cr]||{},a[cr][z]=X}function ws(a,h,_,E,z){z=z||h+u(_)+(E?"_"+u(E):"");var X=a[cr]&&a[cr][z];if(!X)return this;!tt.touchNative&&tt.pointer&&h.indexOf("touch")===0?No(a,h,X):tt.touch&&h==="dblclick"?uo(a,X):"removeEventListener"in a?a.removeEventListener(Ki[h]||h,X,!1):a.detachEvent("on"+h,X),a[cr][z]=null}function hr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function zo(a){return Uo(a,"wheel",hr),this}function qo(a){return _t(a,"mousedown touchstart dblclick contextmenu",hr),a._leaflet_disable_click=!0,this}function vn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function si(a){return vn(a),hr(a),this}function Kr(a){if(a.composedPath)return a.composedPath();for(var h=[],_=a.target;_;)h.push(_),_=_.parentNode;return h}function Js(a,h){if(!h)return new W(a.clientX,a.clientY);var _=_s(h),E=_.boundingClientRect;return new W((a.clientX-E.left)/_.x-h.clientLeft,(a.clientY-E.top)/_.y-h.clientTop)}var fn=tt.linux&&tt.chrome?window.devicePixelRatio:tt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ys(a){return tt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/fn:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ho(a,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==a;)_=_.parentNode}catch{return!1}return _!==a}var Na={__proto__:null,on:_t,off:$t,stopPropagation:hr,disableScrollPropagation:zo,disableClickPropagation:qo,preventDefault:vn,stop:si,getPropagationPath:Kr,getMousePosition:Js,getWheelDelta:Ys,isExternalTarget:Ho,addListener:_t,removeListener:$t},Zs=se.extend({run:function(a,h,_,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Wi(a),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(a){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),a):(this._runFrame(1),this._complete())},_runFrame:function(a,h){var _=this._startPos.add(this._offset.multiplyBy(a));h&&_._round(),bt(this._el,_),this.fire("step")},_complete:function(){b(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),qt=se.extend({options:{crs:Ze,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,h){h=R(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(he(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gs&&tt.any3d&&!tt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_t(this._proxy,Ks,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),a=this._limitCenter(he(a),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var E=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,h,_.zoom):this._tryAnimatedPan(a,_.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(a,h){return this._loaded?this.setView(this.getCenter(),a,{zoom:h}):(this._zoom=a,this)},zoomIn:function(a,h){return a=a||(tt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,h)},zoomOut:function(a,h){return a=a||(tt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,h)},setZoomAround:function(a,h,_){var E=this.getZoomScale(h),z=this.getSize().divideBy(2),X=a instanceof W?a:this.latLngToContainerPoint(a),me=X.subtract(z).multiplyBy(1-1/E),Ce=this.containerPointToLatLng(z.add(me));return this.setView(Ce,h,{zoom:_})},_getBoundsCenterZoom:function(a,h){h=h||{},a=a.getBounds?a.getBounds():ae(a);var _=fe(h.paddingTopLeft||h.padding||[0,0]),E=fe(h.paddingBottomRight||h.padding||[0,0]),z=this.getBoundsZoom(a,!1,_.add(E));if(z=typeof h.maxZoom=="number"?Math.min(h.maxZoom,z):z,z===1/0)return{center:a.getCenter(),zoom:z};var X=E.subtract(_).divideBy(2),me=this.project(a.getSouthWest(),z),Ce=this.project(a.getNorthEast(),z),Le=this.unproject(me.add(Ce).divideBy(2).add(X),z);return{center:Le,zoom:z}},fitBounds:function(a,h){if(a=ae(a),!a.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(a,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,h){return this.setView(a,this._zoom,{pan:h})},panBy:function(a,h){if(a=fe(a).round(),h=h||{},!a.x&&!a.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Lt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,h,_){if(_=_||{},_.animate===!1||!tt.any3d)return this.setView(a,h,_);this._stop();var E=this.project(this.getCenter()),z=this.project(a),X=this.getSize(),me=this._zoom;a=he(a),h=h===void 0?me:h;var Ce=Math.max(X.x,X.y),Le=Ce*this.getZoomScale(me,h),Be=z.distanceTo(E)||1,ot=1.42,gt=ot*ot;function Wt(xn){var Xi=xn?-1:1,Im=xn?Le:Ce,Pm=Le*Le-Ce*Ce+Xi*gt*gt*Be*Be,Bf=2*Im*gt*Be,Hu=Pm/Bf,rh=Math.sqrt(Hu*Hu+1)-Hu,Uf=rh<1e-9?-18:Math.log(rh);return Uf}function Qi(xn){return(Math.exp(xn)-Math.exp(-xn))/2}function li(xn){return(Math.exp(xn)+Math.exp(-xn))/2}function Xr(xn){return Qi(xn)/li(xn)}var pr=Wt(0);function ll(xn){return Ce*(li(pr)/li(pr+ot*xn))}function bm(xn){return Ce*(li(pr)*Xr(pr+ot*xn)-Qi(pr))/gt}function la(xn){return 1-Math.pow(1-xn,1.5)}var _o=Date.now(),ts=(Wt(1)-pr)/ot,Cm=_.duration?1e3*_.duration:1e3*ts*.8;function ih(){var xn=(Date.now()-_o)/Cm,Xi=la(xn)*ts;xn<=1?(this._flyToFrame=k(ih,this),this._move(this.unproject(E.add(z.subtract(E).multiplyBy(bm(Xi)/Be)),me),this.getScaleZoom(Ce/ll(Xi),me),{flyTo:!0})):this._move(a,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),ih.call(this),this},flyToBounds:function(a,h){var _=this._getBoundsCenterZoom(a,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(a){return a=ae(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var h=this.options.minZoom;return this.options.minZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var h=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,h){this._enforcingBounds=!0;var _=this.getCenter(),E=this._limitCenter(_,this._zoom,ae(a));return _.equals(E)||this.panTo(E,h),this._enforcingBounds=!1,this},panInside:function(a,h){h=h||{};var _=fe(h.paddingTopLeft||h.padding||[0,0]),E=fe(h.paddingBottomRight||h.padding||[0,0]),z=this.project(this.getCenter()),X=this.project(a),me=this.getPixelBounds(),Ce=j([me.min.add(_),me.max.subtract(E)]),Le=Ce.getSize();if(!Ce.contains(X)){this._enforcingBounds=!0;var Be=X.subtract(Ce.getCenter()),ot=Ce.extend(X).getSize().subtract(Le);z.x+=Be.x<0?-ot.x:ot.x,z.y+=Be.y<0?-ot.y:ot.y,this.panTo(this.unproject(z),h),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=r({animate:!1,pan:!0},a===!0?{animate:!0}:a);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),E=h.divideBy(2).round(),z=_.divideBy(2).round(),X=E.subtract(z);return!X.x&&!X.y?this:(a.animate&&a.pan?this.panBy(X):(a.pan&&this._rawPanBy(X),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=r({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=s(this._handleGeolocationResponse,this),_=s(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,a):navigator.geolocation.getCurrentPosition(h,_,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var h=a.code,_=a.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var h=a.coords.latitude,_=a.coords.longitude,E=new ue(h,_),z=E.toBounds(a.coords.accuracy*2),X=this._locateOptions;if(X.setView){var me=this.getBoundsZoom(z);this.setView(E,X.maxZoom?Math.min(me,X.maxZoom):me)}var Ce={latlng:E,bounds:z,timestamp:a.timestamp};for(var Le in a.coords)typeof a.coords[Le]=="number"&&(Ce[Le]=a.coords[Le]);this.fire("locationfound",Ce)}},addHandler:function(a,h){if(!h)return this;var _=this[a]=new h(this);return this._handlers.push(_),this.options[a]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(b(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Pt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,h){var _="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=jt("div",_,h||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),h=this.unproject(a.getBottomLeft()),_=this.unproject(a.getTopRight());return new ee(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,h,_){a=ae(a),_=fe(_||[0,0]);var E=this.getZoom()||0,z=this.getMinZoom(),X=this.getMaxZoom(),me=a.getNorthWest(),Ce=a.getSouthEast(),Le=this.getSize().subtract(_),Be=j(this.project(Ce,E),this.project(me,E)).getSize(),ot=tt.any3d?this.options.zoomSnap:1,gt=Le.x/Be.x,Wt=Le.y/Be.y,Qi=h?Math.max(gt,Wt):Math.min(gt,Wt);return E=this.getScaleZoom(Qi,E),ot&&(E=Math.round(E/(ot/100))*(ot/100),E=h?Math.ceil(E/ot)*ot:Math.floor(E/ot)*ot),Math.max(z,Math.min(X,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,h){var _=this._getTopLeftPoint(a,h);return new xe(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(a)/_.scale(h)},getScaleZoom:function(a,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var E=_.zoom(a*_.scale(h));return isNaN(E)?1/0:E},project:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(he(a),h)},unproject:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(fe(a),h)},layerPointToLatLng:function(a){var h=fe(a).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(a){var h=this.project(he(a))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(he(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ae(a))},distance:function(a,h){return this.options.crs.distance(he(a),he(h))},containerPointToLayerPoint:function(a){return fe(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return fe(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var h=this.containerPointToLayerPoint(fe(a));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(a)))},mouseEventToContainerPoint:function(a){return Js(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var h=this._container=Aa(a);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_t(h,"scroll",this._onScroll,this),this._containerId=u(h)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&tt.any3d,Lt(a,"leaflet-container"+(tt.touch?" leaflet-touch":"")+(tt.retina?" leaflet-retina":"")+(tt.ielt9?" leaflet-oldie":"")+(tt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Pr(a,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Lt(a.markerPane,"leaflet-zoom-hide"),Lt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,h,_){bt(this._mapPane,new W(0,0));var E=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var z=this._zoom!==h;this._moveStart(z,_)._move(a,h)._moveEnd(z),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,h){return a&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(a,h,_,E){h===void 0&&(h=this._zoom);var z=this._zoom!==h;return this._zoom=h,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?_&&_.pinch&&this.fire("zoom",_):((z||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return b(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){bt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var h=a?$t:_t;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),tt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){b(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,h){for(var _=[],E,z=h==="mouseout"||h==="mouseover",X=a.target||a.srcElement,me=!1;X;){if(E=this._targets[u(X)],E&&(h==="click"||h==="preclick")&&this._draggableMoved(E)){me=!0;break}if(E&&E.listens(h,!0)&&(z&&!Ho(X,a)||(_.push(E),z))||X===this._container)break;X=X.parentNode}return!_.length&&!me&&!z&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var h=a.target||a.srcElement;if(!(!this._loaded||h._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(h))){var _=a.type;_==="mousedown"&&$r(h),this._fireDOMEvent(a,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,h,_){if(a.type==="click"){var E=r({},a);E.type="preclick",this._fireDOMEvent(E,E.type,_)}var z=this._findEventTargets(a,h);if(_){for(var X=[],me=0;me<_.length;me++)_[me].listens(h,!0)&&X.push(_[me]);z=X.concat(z)}if(z.length){h==="contextmenu"&&vn(a);var Ce=z[0],Le={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Be=Ce.getLatLng&&(!Ce._radius||Ce._radius<=10);Le.containerPoint=Be?this.latLngToContainerPoint(Ce.getLatLng()):this.mouseEventToContainerPoint(a),Le.layerPoint=this.containerPointToLayerPoint(Le.containerPoint),Le.latlng=Be?Ce.getLatLng():this.layerPointToLatLng(Le.layerPoint)}for(me=0;me<z.length;me++)if(z[me].fire(h,Le,!0),Le.originalEvent._stopped||z[me].options.bubblingMouseEvents===!1&&G(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,h=this._handlers.length;a<h;a++)this._handlers[a].disable()},whenReady:function(a,h){return this._loaded?a.call(h||this,{target:this}):this.on("load",a,h),this},_getMapPanePos:function(){return Wi(this._mapPane)||new W(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,h){var _=a&&h!==void 0?this._getNewPixelOrigin(a,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,h){var _=this.getSize()._divideBy(2);return this.project(a,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,h,_){var E=this._getNewPixelOrigin(_,h);return this.project(a,h)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,h,_){var E=this._getNewPixelOrigin(_,h);return j([this.project(a.getSouthWest(),h)._subtract(E),this.project(a.getNorthWest(),h)._subtract(E),this.project(a.getSouthEast(),h)._subtract(E),this.project(a.getNorthEast(),h)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,h,_){if(!_)return a;var E=this.project(a,h),z=this.getSize().divideBy(2),X=new xe(E.subtract(z),E.add(z)),me=this._getBoundsOffset(X,_,h);return Math.abs(me.x)<=1&&Math.abs(me.y)<=1?a:this.unproject(E.add(me),h)},_limitOffset:function(a,h){if(!h)return a;var _=this.getPixelBounds(),E=new xe(_.min.add(a),_.max.add(a));return a.add(this._getBoundsOffset(E,h))},_getBoundsOffset:function(a,h,_){var E=j(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),z=E.min.subtract(a.min),X=E.max.subtract(a.max),me=this._rebound(z.x,-X.x),Ce=this._rebound(z.y,-X.y);return new W(me,Ce)},_rebound:function(a,h){return a+h>0?Math.round(a-h)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(h))},_limitZoom:function(a){var h=this.getMinZoom(),_=this.getMaxZoom(),E=tt.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(h,Math.min(_,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,h){var _=this._getCenterOffset(a)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var a=this._proxy=jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(h){var _=co,E=this._proxy.style[_];Nr(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),E===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),h=this.getZoom();Nr(this._proxy,this.project(a,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(h),z=this._getCenterOffset(a)._divideBy(1-1/E);return _.animate!==!0&&!this.getSize().contains(z)?!1:(k(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(a,h,!0)},this),!0)},_animateZoom:function(a,h,_,E){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=h,Lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:h,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xs(a,h){return new qt(a,h)}var On=ie.extend({options:{position:"topright"},initialize:function(a){R(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var h=this._map;return h&&h.removeControl(this),this.options.position=a,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var h=this._container=this.onAdd(a),_=this.getPosition(),E=a._controlCorners[_];return Lt(h,"leaflet-control"),_.indexOf("bottom")!==-1?E.insertBefore(h,E.firstChild):E.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Vn=function(a){return new On(a)};qt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},h="leaflet-",_=this._controlContainer=jt("div",h+"control-container",this._container);function E(z,X){var me=h+z+" "+h+X;a[z+X]=jt("div",me,_)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Pt(this._controlCorners[a]);Pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ka=On.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,h,_,E){return _<E?-1:E<_?1:0}},initialize:function(a,h,_){R(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in h)this._addLayer(h[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return On.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,h){return this._addLayer(a,h),this._map?this._update():this},addOverlay:function(a,h){return this._addLayer(a,h,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var h=this._getLayer(u(a));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",h=this._container=jt("div",a),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),qo(h),zo(h);var E=this._section=jt("section",a+"-list");_&&(this._map.on("click",this.collapse,this),_t(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var z=this._layersLink=jt("a",a+"-toggle",h);z.href="#",z.title="Layers",z.setAttribute("role","button"),_t(z,{keydown:function(X){X.keyCode===13&&this._expandSafely()},click:function(X){vn(X),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=jt("div",a+"-base",E),this._separator=jt("div",a+"-separator",E),this._overlaysList=jt("div",a+"-overlays",E),h.appendChild(E)},_getLayer:function(a){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&u(this._layers[h].layer)===a)return this._layers[h]},_addLayer:function(a,h,_){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(s(function(E,z){return this.options.sortFunction(E.layer,z.layer,E.name,z.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fo(this._baseLayersList),Fo(this._overlaysList),this._layerControlInputs=[];var a,h,_,E,z=0;for(_=0;_<this._layers.length;_++)E=this._layers[_],this._addItem(E),h=h||E.overlay,a=a||!E.overlay,z+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&z>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=h&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var h=this._getLayer(u(a.target)),_=h.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(a,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(h?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=_,E.firstChild},_addItem:function(a){var h=document.createElement("label"),_=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=_):E=this._createRadioElement("leaflet-base-layers_"+u(this),_),this._layerControlInputs.push(E),E.layerId=u(a.layer),_t(E,"click",this._onInputClick,this);var z=document.createElement("span");z.innerHTML=" "+a.name;var X=document.createElement("span");h.appendChild(X),X.appendChild(E),X.appendChild(z);var me=a.overlay?this._overlaysList:this._baseLayersList;return me.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,h,_,E=[],z=[];this._handlingClick=!0;for(var X=a.length-1;X>=0;X--)h=a[X],_=this._getLayer(h.layerId).layer,h.checked?E.push(_):h.checked||z.push(_);for(X=0;X<z.length;X++)this._map.hasLayer(z[X])&&this._map.removeLayer(z[X]);for(X=0;X<E.length;X++)this._map.hasLayer(E[X])||this._map.addLayer(E[X]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,h,_,E=this._map.getZoom(),z=a.length-1;z>=0;z--)h=a[z],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&E<_.options.minZoom||_.options.maxZoom!==void 0&&E>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,_t(a,"click",vn),this.expand();var h=this;setTimeout(function(){$t(a,"click",vn),h._preventClick=!1})}}),Go=function(a,h,_){return new ka(a,h,_)},ai=On.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var h="leaflet-control-zoom",_=jt("div",h+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,h,_,E,z){var X=jt("a",_,E);return X.innerHTML=a,X.href="#",X.title=h,X.setAttribute("role","button"),X.setAttribute("aria-label",h),qo(X),_t(X,"click",si),_t(X,"click",z,this),_t(X,"click",this._refocusOnMap,this),X},_updateDisabled:function(){var a=this._map,h="leaflet-disabled";Xt(this._zoomInButton,h),Xt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Lt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Lt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});qt.mergeOptions({zoomControl:!0}),qt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ai,this.addControl(this.zoomControl))});var Qs=function(a){return new ai(a)},Jr=On.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var h="leaflet-control-scale",_=jt("div",h),E=this.options;return this._addScales(E,h+"-line",_),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),_},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,h,_){a.metric&&(this._mScale=jt("div",h,_)),a.imperial&&(this._iScale=jt("div",h,_))},_update:function(){var a=this._map,h=a.getSize().y/2,_=a.distance(a.containerPointToLatLng([0,h]),a.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var h=this._getRoundNum(a),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/a)},_updateImperial:function(a){var h=a*3.2808399,_,E,z;h>5280?(_=h/5280,E=this._getRoundNum(_),this._updateScale(this._iScale,E+" mi",E/_)):(z=this._getRoundNum(h),this._updateScale(this._iScale,z+" ft",z/h))},_updateScale:function(a,h,_){a.style.width=Math.round(this.options.maxWidth*_)+"px",a.innerHTML=h},_getRoundNum:function(a){var h=Math.pow(10,(Math.floor(a)+"").length-1),_=a/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),Xs=function(a){return new Jr(a)},Ss='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',jo=On.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(tt.inlineSvg?Ss+" ":"")+"Leaflet</a>"},initialize:function(a){R(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=jt("div","leaflet-control-attribution"),qo(this._container);for(var h in a._layers)a._layers[h].getAttribution&&this.addAttribution(a._layers[h].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var h in this._attributions)this._attributions[h]&&a.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),a.length&&_.push(a.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});qt.mergeOptions({attributionControl:!0}),qt.addInitHook(function(){this.options.attributionControl&&new jo().addTo(this)});var La=function(a){return new jo(a)};On.Layers=ka,On.Zoom=ai,On.Scale=Jr,On.Attribution=jo,Vn.layers=Go,Vn.zoom=Qs,Vn.scale=Xs,Vn.attribution=La;var wi=ie.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});wi.addTo=function(a,h){return a.addHandler(h,this),this};var Wo={Events:le},$o=tt.touch?"touchstart mousedown":"mousedown",Ji=se.extend({options:{clickTolerance:3},initialize:function(a,h,_,E){R(this,E),this._element=a,this._dragStartTarget=h||a,this._preventOutline=_},enable:function(){this._enabled||(_t(this._dragStartTarget,$o,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ji._dragging===this&&this.finishDrag(!0),$t(this._dragStartTarget,$o,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!vs(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Ji._dragging===this&&this.finishDrag();return}if(!(Ji._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Ji._dragging=this,this._preventOutline&&$r(this._element),Ca(),kr(),!this._moving)){this.fire("down");var h=a.touches?a.touches[0]:a,_=Ia(this._element);this._startPoint=new W(h.clientX,h.clientY),this._startPos=Wi(this._element),this._parentScale=_s(_);var E=a.type==="mousedown";_t(document,E?"mousemove":"touchmove",this._onMove,this),_t(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var h=a.touches&&a.touches.length===1?a.touches[0]:a,_=new W(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,vn(a),this._moved||(this.fire("dragstart"),this._moved=!0,Lt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),bt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$t(document,"mousemove touchmove",this._onMove,this),$t(document,"mouseup touchend touchcancel",this._onUp,this),Lr(),$i();var h=this._moved&&this._moving;this._moving=!1,Ji._dragging=!1,h&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Ko(a,h,_){var E,z=[1,4,2,8],X,me,Ce,Le,Be,ot,gt,Wt;for(X=0,ot=a.length;X<ot;X++)a[X]._code=Re(a[X],h);for(Ce=0;Ce<4;Ce++){for(gt=z[Ce],E=[],X=0,ot=a.length,me=ot-1;X<ot;me=X++)Le=a[X],Be=a[me],Le._code&gt?Be._code&gt||(Wt=Ee(Be,Le,gt,h,_),Wt._code=Re(Wt,h),E.push(Wt)):(Be._code&gt&&(Wt=Ee(Be,Le,gt,h,_),Wt._code=Re(Wt,h),E.push(Wt)),E.push(Le));a=E}return a}function Ts(a,h){var _,E,z,X,me,Ce,Le,Be,ot;if(!a||a.length===0)throw new Error("latlngs not passed");m(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var gt=he([0,0]),Wt=ae(a),Qi=Wt.getNorthWest().distanceTo(Wt.getSouthWest())*Wt.getNorthEast().distanceTo(Wt.getNorthWest());Qi<1700&&(gt=ea(a));var li=a.length,Xr=[];for(_=0;_<li;_++){var pr=he(a[_]);Xr.push(h.project(he([pr.lat-gt.lat,pr.lng-gt.lng])))}for(Ce=Le=Be=0,_=0,E=li-1;_<li;E=_++)z=Xr[_],X=Xr[E],me=z.y*X.x-X.y*z.x,Le+=(z.x+X.x)*me,Be+=(z.y+X.y)*me,Ce+=me*3;Ce===0?ot=Xr[0]:ot=[Le/Ce,Be/Ce];var ll=h.unproject(fe(ot));return he([ll.lat+gt.lat,ll.lng+gt.lng])}function ea(a){for(var h=0,_=0,E=0,z=0;z<a.length;z++){var X=he(a[z]);h+=X.lat,_+=X.lng,E++}return he([h/E,_/E])}var mo={__proto__:null,clipPolygon:Ko,polygonCenter:Ts,centroid:ea};function go(a,h){if(!h||!a.length)return a.slice();var _=h*h;return a=$(a,_),a=ta(a,_),a}function Es(a,h,_){return Math.sqrt(Qe(a,h,_,!0))}function Fi(a,h,_){return Qe(a,h,_)}function ta(a,h){var _=a.length,E=typeof Uint8Array<"u"?Uint8Array:Array,z=new E(_);z[0]=z[_-1]=1,S(a,z,h,0,_-1);var X,me=[];for(X=0;X<_;X++)z[X]&&me.push(a[X]);return me}function S(a,h,_,E,z){var X=0,me,Ce,Le;for(Ce=E+1;Ce<=z-1;Ce++)Le=Qe(a[Ce],a[E],a[z],!0),Le>X&&(me=Ce,X=Le);X>_&&(h[me]=1,S(a,h,_,E,me),S(a,h,_,me,z))}function $(a,h){for(var _=[a[0]],E=1,z=0,X=a.length;E<X;E++)Ue(a[E],a[z])>h&&(_.push(a[E]),z=E);return z<X-1&&_.push(a[X-1]),_}var de;function ge(a,h,_,E,z){var X=E?de:Re(a,_),me=Re(h,_),Ce,Le,Be;for(de=me;;){if(!(X|me))return[a,h];if(X&me)return!1;Ce=X||me,Le=Ee(a,h,Ce,_,z),Be=Re(Le,_),Ce===X?(a=Le,X=Be):(h=Le,me=Be)}}function Ee(a,h,_,E,z){var X=h.x-a.x,me=h.y-a.y,Ce=E.min,Le=E.max,Be,ot;return _&8?(Be=a.x+X*(Le.y-a.y)/me,ot=Le.y):_&4?(Be=a.x+X*(Ce.y-a.y)/me,ot=Ce.y):_&2?(Be=Le.x,ot=a.y+me*(Le.x-a.x)/X):_&1&&(Be=Ce.x,ot=a.y+me*(Ce.x-a.x)/X),new W(Be,ot,z)}function Re(a,h){var _=0;return a.x<h.min.x?_|=1:a.x>h.max.x&&(_|=2),a.y<h.min.y?_|=4:a.y>h.max.y&&(_|=8),_}function Ue(a,h){var _=h.x-a.x,E=h.y-a.y;return _*_+E*E}function Qe(a,h,_,E){var z=h.x,X=h.y,me=_.x-z,Ce=_.y-X,Le=me*me+Ce*Ce,Be;return Le>0&&(Be=((a.x-z)*me+(a.y-X)*Ce)/Le,Be>1?(z=_.x,X=_.y):Be>0&&(z+=me*Be,X+=Ce*Be)),me=a.x-z,Ce=a.y-X,E?me*me+Ce*Ce:new W(z,X)}function m(a){return!P(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function M(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(a)}function q(a,h){var _,E,z,X,me,Ce,Le,Be;if(!a||a.length===0)throw new Error("latlngs not passed");m(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ot=he([0,0]),gt=ae(a),Wt=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Wt<1700&&(ot=ea(a));var Qi=a.length,li=[];for(_=0;_<Qi;_++){var Xr=he(a[_]);li.push(h.project(he([Xr.lat-ot.lat,Xr.lng-ot.lng])))}for(_=0,E=0;_<Qi-1;_++)E+=li[_].distanceTo(li[_+1])/2;if(E===0)Be=li[0];else for(_=0,X=0;_<Qi-1;_++)if(me=li[_],Ce=li[_+1],z=me.distanceTo(Ce),X+=z,X>E){Le=(X-E)/z,Be=[Ce.x-Le*(Ce.x-me.x),Ce.y-Le*(Ce.y-me.y)];break}var pr=h.unproject(fe(Be));return he([pr.lat+ot.lat,pr.lng+ot.lng])}var te={__proto__:null,simplify:go,pointToSegmentDistance:Es,closestPointOnSegment:Fi,clipSegment:ge,_getEdgeIntersection:Ee,_getBitCode:Re,_sqClosestPointOnSegment:Qe,isFlat:m,_flat:M,polylineCenter:q},we={project:function(a){return new W(a.lng,a.lat)},unproject:function(a){return new ue(a.y,a.x)},bounds:new xe([-180,-90],[180,90])},Ie={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var h=Math.PI/180,_=this.R,E=a.lat*h,z=this.R_MINOR/_,X=Math.sqrt(1-z*z),me=X*Math.sin(E),Ce=Math.tan(Math.PI/4-E/2)/Math.pow((1-me)/(1+me),X/2);return E=-_*Math.log(Math.max(Ce,1e-10)),new W(a.lng*h*_,E)},unproject:function(a){for(var h=180/Math.PI,_=this.R,E=this.R_MINOR/_,z=Math.sqrt(1-E*E),X=Math.exp(-a.y/_),me=Math.PI/2-2*Math.atan(X),Ce=0,Le=.1,Be;Ce<15&&Math.abs(Le)>1e-7;Ce++)Be=z*Math.sin(me),Be=Math.pow((1-Be)/(1+Be),z/2),Le=Math.PI/2-2*Math.atan(X*Be)-me,me+=Le;return new ue(me*h,a.x*h/_)}},He={__proto__:null,LonLat:we,Mercator:Ie,SphericalMercator:Ge},Mt=r({},be,{code:"EPSG:3395",projection:Ie,transformation:function(){var a=.5/(Math.PI*Ie.R);return Je(a,.5,-a,.5)}()}),Kt=r({},be,{code:"EPSG:4326",projection:we,transformation:Je(1/180,1,-1/180,.5)}),Dt=r({},Te,{projection:we,transformation:Je(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,h){var _=h.lng-a.lng,E=h.lat-a.lat;return Math.sqrt(_*_+E*E)},infinite:!0});Te.Earth=be,Te.EPSG3395=Mt,Te.EPSG3857=Ze,Te.EPSG900913=mt,Te.EPSG4326=Kt,Te.Simple=Dt;var Ht=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var h=a.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});qt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var h=u(a);return this._layers[h]?this:(this._layers[h]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var h=u(a);return this._layers[h]?(this._loaded&&a.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,h){for(var _ in this._layers)a.call(h,this._layers[_]);return this},_addLayers:function(a){a=a?P(a)?a:[a]:[];for(var h=0,_=a.length;h<_;h++)this.addLayer(a[h])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var h=u(a);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,h=-1/0,_=this._getZoomSpan();for(var E in this._zoomBoundLayers){var z=this._zoomBoundLayers[E].options;a=z.minZoom===void 0?a:Math.min(a,z.minZoom),h=z.maxZoom===void 0?h:Math.max(h,z.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=a===1/0?void 0:a,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var on=Ht.extend({initialize:function(a,h){R(this,h),this._layers={};var _,E;if(a)for(_=0,E=a.length;_<E;_++)this.addLayer(a[_])},addLayer:function(a){var h=this.getLayerId(a);return this._layers[h]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var h=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(a){var h=typeof a=="number"?a:this.getLayerId(a);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h=Array.prototype.slice.call(arguments,1),_,E;for(_ in this._layers)E=this._layers[_],E[a]&&E[a].apply(E,h);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,h){for(var _ in this._layers)a.call(h,this._layers[_]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),vo=function(a,h){return new on(a,h)},Rn=on.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),on.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),on.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ee;for(var h in this._layers){var _=this._layers[h];a.extend(_.getBounds?_.getBounds():_.getLatLng())}return a}}),Jo=function(a,h){return new Rn(a,h)},Yi=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){R(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,h){var _=this._getIconUrl(a);if(!_){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,h){var _=this.options,E=_[h+"Size"];typeof E=="number"&&(E=[E,E]);var z=fe(E),X=fe(h==="shadow"&&_.shadowAnchor||_.iconAnchor||z&&z.divideBy(2,!0));a.className="leaflet-marker-"+h+" "+(_.className||""),X&&(a.style.marginLeft=-X.x+"px",a.style.marginTop=-X.y+"px"),z&&(a.style.width=z.x+"px",a.style.height=z.y+"px")},_createImg:function(a,h){return h=h||document.createElement("img"),h.src=a,h},_getIconUrl:function(a){return tt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Zl(a){return new Yi(a)}var As=Yi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof As.imagePath!="string"&&(As.imagePath=this._detectIconPath()),(this.options.imagePath||As.imagePath)+Yi.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var h=function(_,E,z){var X=E.exec(_);return X&&X[z]};return a=h(a,/^url\((['"])?(.+)\1\)$/,2),a&&h(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=jt("div","leaflet-default-icon-path",document.body),h=Pr(a,"background-image")||Pr(a,"backgroundImage");if(document.body.removeChild(a),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),Ra=wi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ji(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Lt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var h=this._marker,_=h._map,E=this._marker.options.autoPanSpeed,z=this._marker.options.autoPanPadding,X=Wi(h._icon),me=_.getPixelBounds(),Ce=_.getPixelOrigin(),Le=j(me.min._subtract(Ce).add(z),me.max._subtract(Ce).subtract(z));if(!Le.contains(X)){var Be=fe((Math.max(Le.max.x,X.x)-Le.max.x)/(me.max.x-Le.max.x)-(Math.min(Le.min.x,X.x)-Le.min.x)/(me.min.x-Le.min.x),(Math.max(Le.max.y,X.y)-Le.max.y)/(me.max.y-Le.max.y)-(Math.min(Le.min.y,X.y)-Le.min.y)/(me.min.y-Le.min.y)).multiplyBy(E);_.panBy(Be,{animate:!1}),this._draggable._newPos._add(Be),this._draggable._startPos._add(Be),bt(h._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=k(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(b(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,a)))},_onDrag:function(a){var h=this._marker,_=h._shadow,E=Wi(h._icon),z=h._map.layerPointToLatLng(E);_&&bt(_,E),h._latlng=z,a.latlng=z,a.oldLatLng=this._oldLatLng,h.fire("move",a).fire("drag",a)},_onDragEnd:function(a){b(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),ni=Ht.extend({options:{icon:new As,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,h){R(this,h),this._latlng=he(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var h=this._latlng;return this._latlng=he(a),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=a.icon.createIcon(this._icon),E=!1;_!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(_.title=a.title),_.tagName==="IMG"&&(_.alt=a.alt||"")),Lt(_,h),a.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(_,"focus",this._panOnFocus,this);var z=a.icon.createShadow(this._shadow),X=!1;z!==this._shadow&&(this._removeShadow(),X=!0),z&&(Lt(z,h),z.alt=""),this._shadow=z,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),z&&X&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$t(this._icon,"focus",this._panOnFocus,this),Pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&bt(this._icon,a),this._shadow&&bt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ra)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ra(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Nn(this._icon,a),this._shadow&&Nn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var h=this.options.icon.options,_=h.iconSize?fe(h.iconSize):fe(0,0),E=h.iconAnchor?fe(h.iconAnchor):fe(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:_.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nl(a,h){return new ni(a,h)}var Rr=Ht.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return R(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bs=Rr.extend({options:{fill:!0,radius:10},initialize:function(a,h){R(this,h),this._latlng=he(a),this._radius=this.options.radius},setLatLng:function(a){var h=this._latlng;return this._latlng=he(a),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var h=a&&a.radius||this._radius;return Rr.prototype.setStyle.call(this,a),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,h=this._radiusY||a,_=this._clickTolerance(),E=[a+_,h+_];this._pxBounds=new xe(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ql(a,h){return new bs(a,h)}var Oi=bs.extend({initialize:function(a,h,_){if(typeof h=="number"&&(h=r({},_,{radius:h})),R(this,h),this._latlng=he(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ee(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Rr.prototype.setStyle,_project:function(){var a=this._latlng.lng,h=this._latlng.lat,_=this._map,E=_.options.crs;if(E.distance===be.distance){var z=Math.PI/180,X=this._mRadius/be.R/z,me=_.project([h+X,a]),Ce=_.project([h-X,a]),Le=me.add(Ce).divideBy(2),Be=_.unproject(Le).lat,ot=Math.acos((Math.cos(X*z)-Math.sin(h*z)*Math.sin(Be*z))/(Math.cos(h*z)*Math.cos(Be*z)))/z;(isNaN(ot)||ot===0)&&(ot=X/Math.cos(Math.PI/180*h)),this._point=Le.subtract(_.getPixelOrigin()),this._radius=isNaN(ot)?0:Le.x-_.project([Be,a-ot]).x,this._radiusY=Le.y-me.y}else{var gt=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(gt).x}this._updateBounds()}});function th(a,h,_){return new Oi(a,h,_)}var Mr=Rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,h){R(this,h),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var h=1/0,_=null,E=Qe,z,X,me=0,Ce=this._parts.length;me<Ce;me++)for(var Le=this._parts[me],Be=1,ot=Le.length;Be<ot;Be++){z=Le[Be-1],X=Le[Be];var gt=E(a,z,X,!0);gt<h&&(h=gt,_=E(a,z,X))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return q(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,h){return h=h||this._defaultShape(),a=he(a),h.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ee,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var h=[],_=m(a),E=0,z=a.length;E<z;E++)_?(h[E]=he(a[E]),this._bounds.extend(h[E])):h[E]=this._convertLatLngs(a[E]);return h},_project:function(){var a=new xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),h=new W(a,a);this._rawPxBounds&&(this._pxBounds=new xe([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(a,h,_){var E=a[0]instanceof ue,z=a.length,X,me;if(E){for(me=[],X=0;X<z;X++)me[X]=this._map.latLngToLayerPoint(a[X]),_.extend(me[X]);h.push(me)}else for(X=0;X<z;X++)this._projectLatlngs(a[X],h,_)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,E,z,X,me,Ce,Le;for(_=0,z=0,X=this._rings.length;_<X;_++)for(Le=this._rings[_],E=0,me=Le.length;E<me-1;E++)Ce=ge(Le[E],Le[E+1],a,E,!0),Ce&&(h[z]=h[z]||[],h[z].push(Ce[0]),(Ce[1]!==Le[E+1]||E===me-2)&&(h[z].push(Ce[1]),z++))}},_simplifyPoints:function(){for(var a=this._parts,h=this.options.smoothFactor,_=0,E=a.length;_<E;_++)a[_]=go(a[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,h){var _,E,z,X,me,Ce,Le=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(_=0,X=this._parts.length;_<X;_++)for(Ce=this._parts[_],E=0,me=Ce.length,z=me-1;E<me;z=E++)if(!(!h&&E===0)&&Es(a,Ce[z],Ce[E])<=Le)return!0;return!1}});function Fu(a,h){return new Mr(a,h)}Mr._flat=M;var xi=Mr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ts(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var h=Mr.prototype._convertLatLngs.call(this,a),_=h.length;return _>=2&&h[0]instanceof ue&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(a){Mr.prototype._setLatLngs.call(this,a),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,h=this.options.weight,_=new W(h,h);if(a=new xe(a.min.subtract(_),a.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,z=this._rings.length,X;E<z;E++)X=Ko(this._rings[E],a,!0),X.length&&this._parts.push(X)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h=!1,_,E,z,X,me,Ce,Le,Be;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(X=0,Le=this._parts.length;X<Le;X++)for(_=this._parts[X],me=0,Be=_.length,Ce=Be-1;me<Be;Ce=me++)E=_[me],z=_[Ce],E.y>a.y!=z.y>a.y&&a.x<(z.x-E.x)*(a.y-E.y)/(z.y-E.y)+E.x&&(h=!h);return h||Mr.prototype._containsPoint.call(this,a,!0)}});function il(a,h){return new xi(a,h)}var Yr=Rn.extend({initialize:function(a,h){R(this,h),this._layers={},a&&this.addData(a)},addData:function(a){var h=P(a)?a:a.features,_,E,z;if(h){for(_=0,E=h.length;_<E;_++)z=h[_],(z.geometries||z.geometry||z.features||z.coordinates)&&this.addData(z);return this}var X=this.options;if(X.filter&&!X.filter(a))return this;var me=Ma(a,X);return me?(me.feature=Zr(a),me.defaultOptions=me.options,this.resetStyle(me),X.onEachFeature&&X.onEachFeature(a,me),this.addLayer(me)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=r({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(h){this._setLayerStyle(h,a)},this)},_setLayerStyle:function(a,h){a.setStyle&&(typeof h=="function"&&(h=h(a.feature)),a.setStyle(h))}});function Ma(a,h){var _=a.type==="Feature"?a.geometry:a,E=_?_.coordinates:null,z=[],X=h&&h.pointToLayer,me=h&&h.coordsToLatLng||Is,Ce,Le,Be,ot;if(!E&&!_)return null;switch(_.type){case"Point":return Ce=me(E),Cs(X,a,Ce,h);case"MultiPoint":for(Be=0,ot=E.length;Be<ot;Be++)Ce=me(E[Be]),z.push(Cs(X,a,Ce,h));return new Rn(z);case"LineString":case"MultiLineString":return Le=Si(E,_.type==="LineString"?0:1,me),new Mr(Le,h);case"Polygon":case"MultiPolygon":return Le=Si(E,_.type==="Polygon"?1:2,me),new xi(Le,h);case"GeometryCollection":for(Be=0,ot=_.geometries.length;Be<ot;Be++){var gt=Ma({geometry:_.geometries[Be],type:"Feature",properties:a.properties},h);gt&&z.push(gt)}return new Rn(z);case"FeatureCollection":for(Be=0,ot=_.features.length;Be<ot;Be++){var Wt=Ma(_.features[Be],h);Wt&&z.push(Wt)}return new Rn(z);default:throw new Error("Invalid GeoJSON object.")}}function Cs(a,h,_,E){return a?a(h,_):new ni(_,E&&E.markersInheritOptions&&E)}function Is(a){return new ue(a[1],a[0],a[2])}function Si(a,h,_){for(var E=[],z=0,X=a.length,me;z<X;z++)me=h?Si(a[z],h-1,_):(_||Is)(a[z]),E.push(me);return E}function Ti(a,h){return a=he(a),a.alt!==void 0?[y(a.lng,h),y(a.lat,h),y(a.alt,h)]:[y(a.lng,h),y(a.lat,h)]}function yo(a,h,_,E){for(var z=[],X=0,me=a.length;X<me;X++)z.push(h?yo(a[X],m(a[X])?0:h-1,_,E):Ti(a[X],E));return!h&&_&&z.length>0&&z.push(z[0].slice()),z}function fr(a,h){return a.feature?r({},a.feature,{geometry:h}):Zr(h)}function Zr(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var na={toGeoJSON:function(a){return fr(this,{type:"Point",coordinates:Ti(this.getLatLng(),a)})}};ni.include(na),Oi.include(na),bs.include(na),Mr.include({toGeoJSON:function(a){var h=!m(this._latlngs),_=yo(this._latlngs,h?1:0,!1,a);return fr(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),xi.include({toGeoJSON:function(a){var h=!m(this._latlngs),_=h&&!m(this._latlngs[0]),E=yo(this._latlngs,_?2:h?1:0,!0,a);return h||(E=[E]),fr(this,{type:(_?"Multi":"")+"Polygon",coordinates:E})}}),on.include({toMultiPoint:function(a){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(a).geometry.coordinates)}),fr(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(a){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(a);var _=h==="GeometryCollection",E=[];return this.eachLayer(function(z){if(z.toGeoJSON){var X=z.toGeoJSON(a);if(_)E.push(X.geometry);else{var me=Zr(X);me.type==="FeatureCollection"?E.push.apply(E,me.features):E.push(me)}}}),_?fr(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function Yo(a,h){return new Yr(a,h)}var $n=Yo,ia=Ht.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,h,_){this._url=a,this._bounds=ae(h),R(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Wr(this._image),this},bringToBack:function(){return this._map&&ho(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ae(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",h=this._image=a?this._url:jt("img");if(Lt(h,"leaflet-image-layer"),this._zoomAnimated&&Lt(h,"leaflet-zoom-animated"),this.options.className&&Lt(h,this.options.className),h.onselectstart=g,h.onmousemove=g,h.onload=s(this.fire,this,"load"),h.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(a){var h=this._map.getZoomScale(a.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Nr(this._image,_,h)},_reset:function(){var a=this._image,h=new xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();bt(a,h.min),a.style.width=_.x+"px",a.style.height=_.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Zi=function(a,h,_){return new ia(a,h,_)},Dr=ia.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",h=this._image=a?this._url:jt("video");if(Lt(h,"leaflet-image-layer"),this._zoomAnimated&&Lt(h,"leaflet-zoom-animated"),this.options.className&&Lt(h,this.options.className),h.onselectstart=g,h.onmousemove=g,h.onloadeddata=s(this.fire,this,"load"),a){for(var _=h.getElementsByTagName("source"),E=[],z=0;z<_.length;z++)E.push(_[z].src);this._url=_.length>0?E:[h.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var X=0;X<this._url.length;X++){var me=jt("source");me.src=this._url[X],h.appendChild(me)}}});function rl(a,h,_){return new Dr(a,h,_)}var Xl=ia.extend({_initImage:function(){var a=this._image=this._url;Lt(a,"leaflet-image-layer"),this._zoomAnimated&&Lt(a,"leaflet-zoom-animated"),this.options.className&&Lt(a,this.options.className),a.onselectstart=g,a.onmousemove=g}});function eu(a,h,_){return new Xl(a,h,_)}var Vi=Ht.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,h){a&&(a instanceof ue||P(a))?(this._latlng=he(a),R(this,h)):(R(this,a),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(s(Pt,void 0,this._container),200)):Pt(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=he(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Wr(this._container),this},bringToBack:function(){return this._map&&ho(this._container),this},_prepareOpen:function(a){var h=this._source;if(!h._map)return!1;if(h instanceof Rn){h=null;var _=this._source._layers;for(var E in _)if(_[E]._map){h=_[E];break}if(!h)return!1;this._source=h}if(!a)if(h.getCenter)a=h.getCenter();else if(h.getLatLng)a=h.getLatLng();else if(h.getBounds)a=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")a.innerHTML=h;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),h=fe(this.options.offset),_=this._getAnchor();this._zoomAnimated?bt(this._container,a.add(_)):h=h.add(a).add(_);var E=this._containerBottom=-h.y,z=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=E+"px",this._container.style.left=z+"px"}},_getAnchor:function(){return[0,0]}});qt.include({_initOverlay:function(a,h,_,E){var z=h;return z instanceof a||(z=new a(E).setContent(h)),_&&z.setLatLng(_),z}}),Ht.include({_initOverlay:function(a,h,_,E){var z=_;return z instanceof a?(R(z,E),z._source=this):(z=h&&!E?h:new a(E,this),z.setContent(_)),z}});var Zo=Vi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Vi.prototype.openOn.call(this,a)},onAdd:function(a){Vi.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rr||this._source.on("preclick",hr))},onRemove:function(a){Vi.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rr||this._source.off("preclick",hr))},getEvents:function(){var a=Vi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",h=this._container=jt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=jt("div",a+"-content-wrapper",h);if(this._contentNode=jt("div",a+"-content",_),qo(h),zo(this._contentNode),_t(h,"contextmenu",hr),this._tipContainer=jt("div",a+"-tip-container",h),this._tip=jt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=jt("a",a+"-close-button",h);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',_t(E,"click",function(z){vn(z),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,h=a.style;h.width="",h.whiteSpace="nowrap";var _=a.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var E=a.offsetHeight,z=this.options.maxHeight,X="leaflet-popup-scrolled";z&&E>z?(h.height=z+"px",Lt(a,X)):Xt(a,X),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),_=this._getAnchor();bt(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,h=parseInt(Pr(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,E=this._containerWidth,z=new W(this._containerLeft,-_-this._containerBottom);z._add(Wi(this._container));var X=a.layerPointToContainerPoint(z),me=fe(this.options.autoPanPadding),Ce=fe(this.options.autoPanPaddingTopLeft||me),Le=fe(this.options.autoPanPaddingBottomRight||me),Be=a.getSize(),ot=0,gt=0;X.x+E+Le.x>Be.x&&(ot=X.x+E-Be.x+Le.x),X.x-ot-Ce.x<0&&(ot=X.x-Ce.x),X.y+_+Le.y>Be.y&&(gt=X.y+_-Be.y+Le.y),X.y-gt-Ce.y<0&&(gt=X.y-Ce.y),(ot||gt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([ot,gt]))}},_getAnchor:function(){return fe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ra=function(a,h){return new Zo(a,h)};qt.mergeOptions({closePopupOnClick:!0}),qt.include({openPopup:function(a,h,_){return this._initOverlay(Zo,a,h,_).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ht.include({bindPopup:function(a,h){return this._popup=this._initOverlay(Zo,this._popup,a,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Rn||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){si(a);var h=a.layer||a.target;if(this._popup._source===h&&!(h instanceof Rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=h,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Qo=Vi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Vi.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Vi.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Vi.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",h=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var h,_,E=this._map,z=this._container,X=E.latLngToContainerPoint(E.getCenter()),me=E.layerPointToContainerPoint(a),Ce=this.options.direction,Le=z.offsetWidth,Be=z.offsetHeight,ot=fe(this.options.offset),gt=this._getAnchor();Ce==="top"?(h=Le/2,_=Be):Ce==="bottom"?(h=Le/2,_=0):Ce==="center"?(h=Le/2,_=Be/2):Ce==="right"?(h=0,_=Be/2):Ce==="left"?(h=Le,_=Be/2):me.x<X.x?(Ce="right",h=0,_=Be/2):(Ce="left",h=Le+(ot.x+gt.x)*2,_=Be/2),a=a.subtract(fe(h,_,!0)).add(ot).add(gt),Xt(z,"leaflet-tooltip-right"),Xt(z,"leaflet-tooltip-left"),Xt(z,"leaflet-tooltip-top"),Xt(z,"leaflet-tooltip-bottom"),Lt(z,"leaflet-tooltip-"+Ce),bt(z,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Nn(this._container,a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(h)},_getAnchor:function(){return fe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ol=function(a,h){return new Qo(a,h)};qt.include({openTooltip:function(a,h,_){return this._initOverlay(Qo,a,h,_).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ht.include({bindTooltip:function(a,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qo,this._tooltip,a,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var h=a?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Rn||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var h=typeof a.getElement=="function"&&a.getElement();h&&(_t(h,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),_t(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var h=typeof a.getElement=="function"&&a.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var h=a.latlng,_,E;this._tooltip.options.sticky&&a.originalEvent&&(_=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(h)}});var oa=Yi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var h=a&&a.tagName==="DIV"?a:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Fo(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var E=fe(_.bgPos);h.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function sa(a){return new oa(a)}Yi.Default=As;var Ps=Ht.extend({options:{tileSize:256,opacity:1,updateWhenIdle:tt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){R(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Pt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Wr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ho(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof W?a:new W(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var h=this.getPane().children,_=-a(-1/0,1/0),E=0,z=h.length,X;E<z;E++)X=h[E].style.zIndex,h[E]!==this._container&&X&&(_=a(_,+X));isFinite(_)&&(this.options.zIndex=_+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt.ielt9){Nn(this._container,this.options.opacity);var a=+new Date,h=!1,_=!1;for(var E in this._tiles){var z=this._tiles[E];if(!(!z.current||!z.loaded)){var X=Math.min(1,(a-z.loaded)/200);Nn(z.el,X),X<1?h=!0:(z.active?_=!0:this._onOpaqueTile(z),z.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(b(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,h=this.options.maxZoom;if(a!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===a?(this._levels[_].el.style.zIndex=h-Math.abs(a-_),this._onUpdateLevel(_)):(Pt(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var E=this._levels[a],z=this._map;return E||(E=this._levels[a]={},E.el=jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=h,E.origin=z.project(z.unproject(z.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,z.getCenter(),z.getZoom()),g(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var a,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)h=this._tiles[a],h.retain=h.current;for(a in this._tiles)if(h=this._tiles[a],h.current&&!h.active){var E=h.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var h in this._tiles)this._tiles[h].coords.z===a&&this._removeTile(h)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Pt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,h,_,E){var z=Math.floor(a/2),X=Math.floor(h/2),me=_-1,Ce=new W(+z,+X);Ce.z=+me;var Le=this._tileCoordsToKey(Ce),Be=this._tiles[Le];return Be&&Be.active?(Be.retain=!0,!0):(Be&&Be.loaded&&(Be.retain=!0),me>E?this._retainParent(z,X,me,E):!1)},_retainChildren:function(a,h,_,E){for(var z=2*a;z<2*a+2;z++)for(var X=2*h;X<2*h+2;X++){var me=new W(z,X);me.z=_+1;var Ce=this._tileCoordsToKey(me),Le=this._tiles[Ce];if(Le&&Le.active){Le.retain=!0;continue}else Le&&Le.loaded&&(Le.retain=!0);_+1<E&&this._retainChildren(z,X,_+1,E)}},_resetView:function(a){var h=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var h=this.options;return h.minNativeZoom!==void 0&&a<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<a?h.maxNativeZoom:a},_setView:function(a,h,_,E){var z=Math.round(h);this.options.maxZoom!==void 0&&z>this.options.maxZoom||this.options.minZoom!==void 0&&z<this.options.minZoom?z=void 0:z=this._clampZoom(z);var X=this.options.updateWhenZooming&&z!==this._tileZoom;(!E||X)&&(this._tileZoom=z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),z!==void 0&&this._update(a),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(a,h)},_setZoomTransforms:function(a,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],a,h)},_setZoomTransform:function(a,h,_){var E=this._map.getZoomScale(_,a.zoom),z=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(h,_)).round();tt.any3d?Nr(a.el,z,E):bt(a.el,z)},_resetGrid:function(){var a=this._map,h=a.options.crs,_=this._tileSize=this.getTileSize(),E=this._tileZoom,z=this._map.getPixelWorldBounds(this._tileZoom);z&&(this._globalTileRange=this._pxBoundsToTileRange(z)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,h.wrapLng[0]],E).x/_.x),Math.ceil(a.project([0,h.wrapLng[1]],E).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([h.wrapLat[0],0],E).y/_.x),Math.ceil(a.project([h.wrapLat[1],0],E).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),E=h.getZoomScale(_,this._tileZoom),z=h.project(a,this._tileZoom).floor(),X=h.getSize().divideBy(E*2);return new xe(z.subtract(X),z.add(X))},_update:function(a){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(a===void 0&&(a=h.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),z=this._pxBoundsToTileRange(E),X=z.getCenter(),me=[],Ce=this.options.keepBuffer,Le=new xe(z.getBottomLeft().subtract([Ce,-Ce]),z.getTopRight().add([Ce,-Ce]));if(!(isFinite(z.min.x)&&isFinite(z.min.y)&&isFinite(z.max.x)&&isFinite(z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Be in this._tiles){var ot=this._tiles[Be].coords;(ot.z!==this._tileZoom||!Le.contains(new W(ot.x,ot.y)))&&(this._tiles[Be].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(a,_);return}for(var gt=z.min.y;gt<=z.max.y;gt++)for(var Wt=z.min.x;Wt<=z.max.x;Wt++){var Qi=new W(Wt,gt);if(Qi.z=this._tileZoom,!!this._isValidTile(Qi)){var li=this._tiles[this._tileCoordsToKey(Qi)];li?li.current=!0:me.push(Qi)}}if(me.sort(function(pr,ll){return pr.distanceTo(X)-ll.distanceTo(X)}),me.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xr=document.createDocumentFragment();for(Wt=0;Wt<me.length;Wt++)this._addTile(me[Wt],Xr);this._level.el.appendChild(Xr)}}}},_isValidTile:function(a){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(a.x<_.min.x||a.x>_.max.x)||!h.wrapLat&&(a.y<_.min.y||a.y>_.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return ae(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var h=this._map,_=this.getTileSize(),E=a.scaleBy(_),z=E.add(_),X=h.unproject(E,a.z),me=h.unproject(z,a.z);return[X,me]},_tileCoordsToBounds:function(a){var h=this._tileCoordsToNwSe(a),_=new ee(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var h=a.split(":"),_=new W(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(a){var h=this._tiles[a];h&&(Pt(h.el),delete this._tiles[a],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Lt(a,"leaflet-tile");var h=this.getTileSize();a.style.width=h.x+"px",a.style.height=h.y+"px",a.onselectstart=g,a.onmousemove=g,tt.ielt9&&this.options.opacity<1&&Nn(a,this.options.opacity)},_addTile:function(a,h){var _=this._getTilePos(a),E=this._tileCoordsToKey(a),z=this.createTile(this._wrapCoords(a),s(this._tileReady,this,a));this._initTile(z),this.createTile.length<2&&k(s(this._tileReady,this,a,null,z)),bt(z,_),this._tiles[E]={el:z,coords:a,current:!0},h.appendChild(z),this.fire("tileloadstart",{tile:z,coords:a})},_tileReady:function(a,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:a});var E=this._tileCoordsToKey(a);_=this._tiles[E],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Nn(_.el,0),b(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(Lt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var h=new W(this._wrapX?f(a.x,this._wrapX):a.x,this._wrapY?f(a.y,this._wrapY):a.y);return h.z=a.z,h},_pxBoundsToTileRange:function(a){var h=this.getTileSize();return new xe(a.min.unscaleBy(h).floor(),a.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Qr(a){return new Ps(a)}var Ei=Ps.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,h){this._url=a,h=R(this,h),h.detectRetina&&tt.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,h){return this._url===a&&h===void 0&&(h=!0),this._url=a,h||this.redraw(),this},createTile:function(a,h){var _=document.createElement("img");return _t(_,"load",s(this._tileOnLoad,this,h,_)),_t(_,"error",s(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(a),_},getTileUrl:function(a){var h={r:tt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-a.y;this.options.tms&&(h.y=_),h["-y"]=_}return I(this._url,r(h,this.options))},_tileOnLoad:function(a,h){tt.ielt9?setTimeout(s(a,this,null,h),0):a(null,h)},_tileOnError:function(a,h,_){var E=this.options.errorTileUrl;E&&h.getAttribute("src")!==E&&(h.src=E),a(_,h)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,E=this.options.zoomOffset;return _&&(a=h-a),a+E},_getSubdomain:function(a){var h=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var a,h;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(h=this._tiles[a].el,h.onload=g,h.onerror=g,!h.complete)){h.src=J;var _=this._tiles[a].coords;Pt(h),delete this._tiles[a],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(a){var h=this._tiles[a];if(h)return h.el.setAttribute("src",J),Ps.prototype._removeTile.call(this,a)},_tileReady:function(a,h,_){if(!(!this._map||_&&_.getAttribute("src")===J))return Ps.prototype._tileReady.call(this,a,h,_)}});function yn(a,h){return new Ei(a,h)}var _n=Ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,h){this._url=a;var _=r({},this.defaultWmsParams);for(var E in h)E in this.options||(_[E]=h[E]);h=R(this,h);var z=h.detectRetina&&tt.retina?2:1,X=this.getTileSize();_.width=X.x*z,_.height=X.y*z,this.wmsParams=_},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ei.prototype.onAdd.call(this,a)},getTileUrl:function(a){var h=this._tileCoordsToNwSe(a),_=this._crs,E=j(_.project(h[0]),_.project(h[1])),z=E.min,X=E.max,me=(this._wmsVersion>=1.3&&this._crs===Kt?[z.y,z.x,X.y,X.x]:[z.x,z.y,X.x,X.y]).join(","),Ce=Ei.prototype.getTileUrl.call(this,a);return Ce+F(this.wmsParams,Ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+me},setParams:function(a,h){return r(this.wmsParams,a),h||this.redraw(),this}});function Kn(a,h){return new _n(a,h)}Ei.WMS=_n,yn.wms=Kn;var wn=Ht.extend({options:{padding:.1},initialize:function(a){R(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,h){var _=this._map.getZoomScale(h,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),z=this._map.project(this._center,h),X=E.multiplyBy(-_).add(z).subtract(this._map._getNewPixelOrigin(a,h));tt.any3d?Nr(this._container,X,_):bt(this._container,X)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-a)).round();this._bounds=new xe(_,_.add(h.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xo=wn.extend({options:{tolerance:0},getEvents:function(){var a=wn.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");_t(a,"mousemove",this._onMouseMove,this),_t(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_t(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){b(this._redrawRequest),delete this._ctx,Pt(this._container),$t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var h in this._layers)a=this._layers[h],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var a=this._bounds,h=this._container,_=a.getSize(),E=tt.retina?2:1;bt(h,a.min),h.width=E*_.x,h.height=E*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",tt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var h=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var h=a._order,_=h.next,E=h.prev;_?_.prev=E:this._drawLast=E,E?E.next=_:this._drawFirst=_,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var h=a.options.dashArray.split(/[, ]+/),_=[],E,z;for(z=0;z<h.length;z++){if(E=Number(h[z]),isNaN(E))return;_.push(E)}a.options._dashArray=_}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var h=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xe,this._redrawBounds.extend(a._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(a._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var h=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!h||a._pxBounds&&a._pxBounds.intersects(h))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,h){if(this._drawing){var _,E,z,X,me=a._parts,Ce=me.length,Le=this._ctx;if(Ce){for(Le.beginPath(),_=0;_<Ce;_++){for(E=0,z=me[_].length;E<z;E++)X=me[_][E],Le[E?"lineTo":"moveTo"](X.x,X.y);h&&Le.closePath()}this._fillStroke(Le,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var h=a._point,_=this._ctx,E=Math.max(Math.round(a._radius),1),z=(Math.max(Math.round(a._radiusY),1)||E)/E;z!==1&&(_.save(),_.scale(1,z)),_.beginPath(),_.arc(h.x,h.y/z,E,0,Math.PI*2,!1),z!==1&&_.restore(),this._fillStroke(_,a)}},_fillStroke:function(a,h){var _=h.options;_.fill&&(a.globalAlpha=_.fillOpacity,a.fillStyle=_.fillColor||_.color,a.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(a.setLineDash&&a.setLineDash(h.options&&h.options._dashArray||[]),a.globalAlpha=_.opacity,a.lineWidth=_.weight,a.strokeStyle=_.color,a.lineCap=_.lineCap,a.lineJoin=_.lineJoin,a.stroke())},_onClick:function(a){for(var h=this._map.mouseEventToLayerPoint(a),_,E,z=this._drawFirst;z;z=z.next)_=z.layer,_.options.interactive&&_._containsPoint(h)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(_))&&(E=_);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,h)}},_handleMouseOut:function(a){var h=this._hoveredLayer;h&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([h],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,h){if(!this._mouseHoverThrottled){for(var _,E,z=this._drawFirst;z;z=z.next)_=z.layer,_.options.interactive&&_._containsPoint(h)&&(E=_);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,h,_){this._map._fireDOMEvent(h,_||h.type,a)},_bringToFront:function(a){var h=a._order;if(h){var _=h.next,E=h.prev;if(_)_.prev=E;else return;E?E.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(a)}},_bringToBack:function(a){var h=a._order;if(h){var _=h.next,E=h.prev;if(E)E.next=_;else return;_?_.prev=E:E&&(this._drawLast=E),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(a)}}});function sl(a){return tt.canvas?new Xo(a):null}var es=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ou={_initContainer:function(){this._container=jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wn.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var h=a._container=es("shape");Lt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",a._path=es("path"),h.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var h=a._container;this._container.appendChild(h),a.options.interactive&&a.addInteractiveTarget(h)},_removePath:function(a){var h=a._container;Pt(h),a.removeInteractiveTarget(h),delete this._layers[u(a)]},_updateStyle:function(a){var h=a._stroke,_=a._fill,E=a.options,z=a._container;z.stroked=!!E.stroke,z.filled=!!E.fill,E.stroke?(h||(h=a._stroke=es("stroke")),z.appendChild(h),h.weight=E.weight+"px",h.color=E.color,h.opacity=E.opacity,E.dashArray?h.dashStyle=P(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=E.lineCap.replace("butt","flat"),h.joinstyle=E.lineJoin):h&&(z.removeChild(h),a._stroke=null),E.fill?(_||(_=a._fill=es("fill")),z.appendChild(_),_.color=E.fillColor||E.color,_.opacity=E.fillOpacity):_&&(z.removeChild(_),a._fill=null)},_updateCircle:function(a){var h=a._point.round(),_=Math.round(a._radius),E=Math.round(a._radiusY||_);this._setPath(a,a._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+E+" 0,"+65535*360)},_setPath:function(a,h){a._path.v=h},_bringToFront:function(a){Wr(a._container)},_bringToBack:function(a){ho(a._container)}},al=tt.vml?es:De,aa=wn.extend({_initContainer:function(){this._container=al("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=al("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pt(this._container),$t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var a=this._bounds,h=a.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),bt(_,a.min),_.setAttribute("viewBox",[a.min.x,a.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(a){var h=a._path=al("path");a.options.className&&Lt(h,a.options.className),a.options.interactive&&Lt(h,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Pt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var h=a._path,_=a.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(a,h){this._setPath(a,pe(a._parts,h))},_updateCircle:function(a){var h=a._point,_=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||_,z="a"+_+","+E+" 0 1,0 ",X=a._empty()?"M0 0":"M"+(h.x-_)+","+h.y+z+_*2+",0 "+z+-_*2+",0 ";this._setPath(a,X)},_setPath:function(a,h){a._path.setAttribute("d",h)},_bringToFront:function(a){Wr(a._path)},_bringToBack:function(a){ho(a._path)}});tt.vml&&aa.include(Ou);function dr(a){return tt.svg||tt.vml?new aa(a):null}qt.include({getRenderer:function(a){var h=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var h=this._paneRenderers[a];return h===void 0&&(h=this._createRenderer({pane:a}),this._paneRenderers[a]=h),h},_createRenderer:function(a){return this.options.preferCanvas&&sl(a)||dr(a)}});var Fr=xi.extend({initialize:function(a,h){xi.prototype.initialize.call(this,this._boundsToLatLngs(a),h)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ae(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Vu(a,h){return new Fr(a,h)}aa.create=al,aa.pointsToPath=pe,Yr.geometryToLayer=Ma,Yr.coordsToLatLng=Is,Yr.coordsToLatLngs=Si,Yr.latLngToCoords=Ti,Yr.latLngsToCoords=yo,Yr.getFeature=fr,Yr.asFeature=Zr,qt.mergeOptions({boxZoom:!0});var tu=wi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kr(),Ca(),this._startPoint=this._map.mouseEventToContainerPoint(a),_t(document,{contextmenu:si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=jt("div","leaflet-zoom-box",this._container),Lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var h=new xe(this._point,this._startPoint),_=h.getSize();bt(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(Pt(this._box),Xt(this._container,"leaflet-crosshair")),$i(),Lr(),$t(document,{contextmenu:si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var h=new ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qt.addInitHook("addHandler","boxZoom",tu),qt.mergeOptions({doubleClickZoom:!0});var nh=wi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var h=this._map,_=h.getZoom(),E=h.options.zoomDelta,z=a.originalEvent.shiftKey?_-E:_+E;h.options.doubleClickZoom==="center"?h.setZoom(z):h.setZoomAround(a.containerPoint,z)}});qt.addInitHook("addHandler","doubleClickZoom",nh),qt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nu=wi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ji(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=ae(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,h){return a-(a-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;a.x<h.min.x&&(a.x=this._viscousLimit(a.x,h.min.x)),a.y<h.min.y&&(a.y=this._viscousLimit(a.y,h.min.y)),a.x>h.max.x&&(a.x=this._viscousLimit(a.x,h.max.x)),a.y>h.max.y&&(a.y=this._viscousLimit(a.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,h=Math.round(a/2),_=this._initialWorldOffset,E=this._draggable._newPos.x,z=(E-h+_)%a+h-_,X=(E+h+_)%a-h-_,me=Math.abs(z+_)<Math.abs(X+_)?z:X;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=me},_onDragEnd:function(a){var h=this._map,_=h.options,E=!_.inertia||a.noInertia||this._times.length<2;if(h.fire("dragend",a),E)h.fire("moveend");else{this._prunePositions(+new Date);var z=this._lastPos.subtract(this._positions[0]),X=(this._lastTime-this._times[0])/1e3,me=_.easeLinearity,Ce=z.multiplyBy(me/X),Le=Ce.distanceTo([0,0]),Be=Math.min(_.inertiaMaxSpeed,Le),ot=Ce.multiplyBy(Be/Le),gt=Be/(_.inertiaDeceleration*me),Wt=ot.multiplyBy(-gt/2).round();!Wt.x&&!Wt.y?h.fire("moveend"):(Wt=h._limitOffset(Wt,h.options.maxBounds),k(function(){h.panBy(Wt,{duration:gt,easeLinearity:me,noMoveStart:!0,animate:!0})}))}}});qt.addInitHook("addHandler","dragging",nu),qt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var iu=wi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),_t(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,h=document.documentElement,_=a.scrollTop||h.scrollTop,E=a.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(E,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var h=this._panKeys={},_=this.keyCodes,E,z;for(E=0,z=_.left.length;E<z;E++)h[_.left[E]]=[-1*a,0];for(E=0,z=_.right.length;E<z;E++)h[_.right[E]]=[a,0];for(E=0,z=_.down.length;E<z;E++)h[_.down[E]]=[0,a];for(E=0,z=_.up.length;E<z;E++)h[_.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var h=this._zoomKeys={},_=this.keyCodes,E,z;for(E=0,z=_.zoomIn.length;E<z;E++)h[_.zoomIn[E]]=a;for(E=0,z=_.zoomOut.length;E<z;E++)h[_.zoomOut[E]]=-a},_addHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var h=a.keyCode,_=this._map,E;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(E=this._panKeys[h],a.shiftKey&&(E=fe(E).multiplyBy(3)),_.options.maxBounds&&(E=_._limitOffset(fe(E),_.options.maxBounds)),_.options.worldCopyJump){var z=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(E)));_.panTo(z)}else _.panBy(E)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;si(a)}}});qt.addInitHook("addHandler","keyboard",iu),qt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Bu=wi.extend({addHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var h=Ys(a),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),E),si(a)},_performZoom:function(){var a=this._map,h=a.getZoom(),_=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),z=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,X=_?Math.ceil(z/_)*_:z,me=a._limitZoom(h+(this._delta>0?X:-X))-h;this._delta=0,this._startTime=null,me&&(a.options.scrollWheelZoom==="center"?a.setZoom(h+me):a.setZoomAround(this._lastMousePos,h+me))}});qt.addInitHook("addHandler","scrollWheelZoom",Bu);var Vf=600;qt.mergeOptions({tapHold:tt.touchNative&&tt.safari&&tt.mobile,tapTolerance:15});var Uu=wi.extend({addHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var h=a.touches[0];this._startPos=this._newPos=new W(h.clientX,h.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(_t(document,"touchend",vn),_t(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Vf),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){$t(document,"touchend",vn),$t(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),$t(document,"touchend touchcancel contextmenu",this._cancel,this),$t(document,"touchmove",this._onMove,this)},_onMove:function(a){var h=a.touches[0];this._newPos=new W(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,h){var _=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});qt.addInitHook("addHandler","tapHold",Uu),qt.mergeOptions({touchZoom:tt.touch,bounceAtZoomLimits:!0});var zu=wi.extend({addHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var h=this._map;if(!(!a.touches||a.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(a.touches[0]),E=h.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(E)._divideBy(2))),this._startDist=_.distanceTo(E),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),vn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(a.touches[0]),E=h.mouseEventToContainerPoint(a.touches[1]),z=_.distanceTo(E)/this._startDist;if(this._zoom=h.getScaleZoom(z,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&z<1||this._zoom>h.getMaxZoom()&&z>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,z===1)return}else{var X=_._add(E)._divideBy(2)._subtract(this._centerPoint);if(z===1&&X.x===0&&X.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(X),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),b(this._animRequest);var me=s(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(me,this,!0),vn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,b(this._animRequest),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});qt.addInitHook("addHandler","touchZoom",zu),qt.BoxZoom=tu,qt.DoubleClickZoom=nh,qt.Drag=nu,qt.Keyboard=iu,qt.ScrollWheelZoom=Bu,qt.TapHold=Uu,qt.TouchZoom=zu,n.Bounds=xe,n.Browser=tt,n.CRS=Te,n.Canvas=Xo,n.Circle=Oi,n.CircleMarker=bs,n.Class=ie,n.Control=On,n.DivIcon=oa,n.DivOverlay=Vi,n.DomEvent=Na,n.DomUtil=Ct,n.Draggable=Ji,n.Evented=se,n.FeatureGroup=Rn,n.GeoJSON=Yr,n.GridLayer=Ps,n.Handler=wi,n.Icon=Yi,n.ImageOverlay=ia,n.LatLng=ue,n.LatLngBounds=ee,n.Layer=Ht,n.LayerGroup=on,n.LineUtil=te,n.Map=qt,n.Marker=ni,n.Mixin=Wo,n.Path=Rr,n.Point=W,n.PolyUtil=mo,n.Polygon=xi,n.Polyline=Mr,n.Popup=Zo,n.PosAnimation=Zs,n.Projection=He,n.Rectangle=Fr,n.Renderer=wn,n.SVG=aa,n.SVGOverlay=Xl,n.TileLayer=Ei,n.Tooltip=Qo,n.Transformation=qe,n.Util=V,n.VideoOverlay=Dr,n.bind=s,n.bounds=j,n.canvas=sl,n.circle=th,n.circleMarker=Ql,n.control=Vn,n.divIcon=sa,n.extend=r,n.featureGroup=Jo,n.geoJSON=Yo,n.geoJson=$n,n.gridLayer=Qr,n.icon=Zl,n.imageOverlay=Zi,n.latLng=he,n.latLngBounds=ae,n.layerGroup=vo,n.map=xs,n.marker=nl,n.point=fe,n.polygon=il,n.polyline=Fu,n.popup=ra,n.rectangle=Vu,n.setOptions=R,n.stamp=u,n.svg=dr,n.svgOverlay=eu,n.tileLayer=yn,n.tooltip=ol,n.transformation=Je,n.version=i,n.videoOverlay=rl;var qu=window.L;n.noConflict=function(){return window.L=qu,this},window.L=n})})(cv,cv.exports);var cF=cv.exports;const da=Tv(cF),hF=({initialLat:t,initialLng:e,onLocationSelect:n,onAddressFound:i})=>{const r=kt.useRef(null),o=kt.useRef(null),s=kt.useRef(null),[l,u]=kt.useState(!1),c=38.4237,f=27.1428;kt.useEffect(()=>{if(!r.current)return;if(o.current){o.current.invalidateSize();return}const R=da.map(r.current).setView([t||c,e||f],t?16:12);return da.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(R),t&&e&&w(t,e,R),R.on("click",F=>{y(F.latlng.lat,F.latlng.lng,R)}),o.current=R,()=>{o.current&&(o.current.remove(),o.current=null)}},[]),kt.useEffect(()=>{var R;if(o.current&&t&&e){const F=(R=s.current)==null?void 0:R.getLatLng();(!F||F.lat!==t||F.lng!==e)&&(w(t,e,o.current),o.current.setView([t,e],16))}},[t,e]);const g=async(R,F)=>{if(i){u(!0);try{const T=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${R}&lon=${F}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"tr-TR"}});if(!T.ok)throw new Error("Adres alnamad");const I=await T.json(),P=I.address;if(P){const G=P.town||P.county||P.city_district||"",J=P.suburb||P.neighbourhood||P.quarter||"",Q=P.road||"",D=P.province||P.city||"zmir";i({district:G,neighborhood:J,street:Q,city:D,fullAddress:I.display_name})}}catch(T){console.error("Adres zmleme hatas:",T)}finally{u(!1)}}},y=(R,F,T)=>{w(R,F,T),n(R,F),g(R,F)},w=(R,F,T)=>{s.current&&s.current.remove();const I=da.divIcon({className:"custom-div-icon",html:`<div style="background-color: #2563eb; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; color: white;">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
             </div>`,iconSize:[30,30],iconAnchor:[15,30]});s.current=da.marker([R,F],{icon:I}).addTo(T)},N=()=>{if(!navigator.geolocation){alert("Taraycnz konum servisini desteklemiyor.");return}u(!0),navigator.geolocation.getCurrentPosition(R=>{const{latitude:F,longitude:T}=R.coords;o.current&&(o.current.setView([F,T],16),y(F,T,o.current)),u(!1)},()=>{alert("Konum alnamad. Ltfen izinleri kontrol edin."),u(!1)})};return B.jsxs("div",{className:"relative w-full h-full group",children:[B.jsx("div",{ref:r,className:"w-full h-full rounded-lg z-0",style:{minHeight:"300px"}}),l&&B.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-blue-100 z-[400] flex items-center gap-2 text-xs font-semibold text-blue-600 animate-in fade-in slide-in-from-top-2",children:[B.jsx(Rp,{size:14,className:"animate-spin"}),"Adres zmleniyor..."]}),B.jsx("button",{type:"button",onClick:N,className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md border border-slate-200 text-slate-700 hover:text-blue-600 hover:bg-slate-50 z-[400]",title:"Mevcut Konumumu Bul",children:B.jsx(Vk,{size:24})}),B.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-md text-xs font-semibold text-slate-600 shadow-sm border border-slate-200 z-[400]",children:"Konum semek iin haritaya tklayn"})]})},no={Konak:{Alsancak:["Kbrs ehitleri Cad.","Talatpaa Bulv.","1456. Sokak","Plevne Bulv."],Gztepe:["Mithatpaa Cad.","Susuzdede Park","100. Sokak","Mustafa Kemal Sahil Bulv."],Pasaport:["Cumhuriyet Bulv.","Akdeniz Cad.","1382. Sokak"],"Mimar Sinan":["air Eref Bulv.","Ziya Gkalp Bulv."],Kltr:["evket zelik Sok.","1390. Sokak"]},Karyaka:{Bostanl:["Cemal Grsel Cad.","ehitler Bulv.","2010. Sokak","Bostanl skelesi"],Maviehir:["Cahar Dudayev Bulv.","Aziz Nesin Bulv.","2040. Sokak"],ar:["Kemalpaa Cad.","Salah Birsel Sok.","1710. Sokak"],Bahelievler:["Zbeyde Hanm Cad.","1671. Sokak"]},Bornova:{zkanlar:["Mustafa Kemal Cad.","Sakarya Cad.","252. Sokak"],Kkpark:["Svari Cad.","Zafer Cad.","160. Sokak"],Kazmdirik:["Gediz Cad.","372. Sokak"]},Buca:{irinyer:["Menderes Cad.","Kouyolu Cad.","Forbes Cad."],Tnaztepe:["Dou Cad.","202. Sokak"]}},fF=["TP1","TP2","TP3","DER"],dF=["Bykehir","le","zel Mlkiyet","Kamu","Dier"],pF=({initialData:t,existingStands:e=[],onSave:n,onCancel:i})=>{var C,O,H,k;const[r,o]=kt.useState({id:"",name:"",phone:"",city:"zmir",district:"",neighborhood:"",street:"",address:"",location:void 0,capacity:0,plates:[],ukomeDecisionNo:"",ukomeDate:"",ukomeSummary:"",status:W0.ACTIVE,officeType:"TP1",responsibility:"Bykehir",notes:"",history:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[s,l]=kt.useState(!1),[u,c]=kt.useState(!1),[f,g]=kt.useState(Object.keys(no)),[y,w]=kt.useState([]),[N,R]=kt.useState([]);kt.useEffect(()=>{t?(o({...t,plates:t.plates||[]}),t.district&&no[t.district]&&(w(Object.keys(no[t.district])),t.neighborhood&&no[t.district][t.neighborhood]&&R(no[t.district][t.neighborhood]))):o(b=>({...b,id:Date.now().toString()}))},[t]);const F=b=>{const{name:V,value:ie}=b.target;o(_e=>({..._e,[V]:ie}))},T=b=>{const V=b.target.value;I(V)},I=b=>{o(V=>({...V,district:b,neighborhood:"",street:""})),w(b&&no[b]?Object.keys(no[b]):[]),R([])},P=b=>{const V=b.target.value;G(V,r.district)},G=(b,V)=>{o(ie=>({...ie,neighborhood:b,street:""})),V&&b&&no[V]&&no[V][b]?R(no[V][b]||[]):R([])},J=b=>{let V="",ie="",_e=[],le=[];if(b.district){const se=b.district.replace(/(lesi|le)$/i,"").trim(),W=Object.keys(no).find(oe=>oe.toLocaleLowerCase("tr-TR")===se.toLocaleLowerCase("tr-TR"));W&&(V=W,_e=Object.keys(no[V]))}if(V&&b.neighborhood){const se=b.neighborhood.replace(/(Mahallesi|Mah\.|Mah|Mh\.|Mh)$/i,"").trim(),W=no[V];if(W){const oe=Object.keys(W).find(fe=>fe.toLocaleLowerCase("tr-TR")===se.toLocaleLowerCase("tr-TR"));oe&&(ie=oe,le=no[V][ie]||[])}}V&&(w(_e),R(le),o(se=>({...se,district:V,neighborhood:ie,street:b.street||se.street})))},Q=async()=>{if(!r.district||!r.name){alert("Ltfen nce le ve Durak Ad giriniz.");return}l(!0);const b=await uF(r.name,r.capacity,r.district);o(V=>({...V,notes:V.notes?V.notes+`
`+b:b})),l(!1)},D=async b=>{if(b.preventDefault(),!u){c(!0);try{const V=`${r.street||""} ${r.neighborhood||""} Mah. ${r.district||""}/ZMR`;await n({...r,address:V,capacity:Number(r.capacity),updatedAt:new Date().toISOString()})}catch(V){console.error("Kaydetme hatas:",V),alert("Kayt srasnda bir hata olutu."),c(!1)}}};return B.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 animate-in fade-in zoom-in duration-300",children:[B.jsxs("div",{className:"flex justify-between items-center mb-6",children:[B.jsxs("div",{children:[B.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t&&t.createdAt?"Dura Revize Et":"Yeni Taksi Dura Kayd"}),(t==null?void 0:t.ukomeDecisionNo)&&B.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[B.jsx(Ha,{size:14})," lem Yaplan Karar No: ",B.jsx("strong",{children:t.ukomeDecisionNo})]})]}),B.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700",children:B.jsx(CE,{size:24})})]}),B.jsxs("form",{onSubmit:D,className:"space-y-6",children:[B.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl border border-blue-200 shadow-sm",children:[B.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[B.jsx(Ha,{size:18})," GRLEN UKOME KARAR BLGLER"]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar No"}),B.jsx("input",{name:"ukomeDecisionNo",value:r.ukomeDecisionNo,onChange:F,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-bold text-slate-800",required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar Tarihi"}),B.jsx("input",{type:"date",name:"ukomeDate",value:r.ukomeDate,onChange:F,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),B.jsxs("div",{className:"md:col-span-2",children:[B.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar zeti"}),B.jsx("textarea",{name:"ukomeSummary",rows:2,value:r.ukomeSummary,onChange:F,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Ad"}),B.jsx("input",{required:!0,name:"name",value:r.name,onChange:F,placeholder:"rn: Alsancak Gar Taksi",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Telefonu"}),B.jsxs("div",{className:"relative",children:[B.jsx(AE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),B.jsx("input",{name:"phone",value:r.phone,onChange:F,placeholder:"0232 123 45 67",className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ara Park Kapasitesi"}),B.jsx("input",{required:!0,type:"number",name:"capacity",value:r.capacity,onChange:F,min:"0",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yazhane Tipi"}),B.jsx("select",{name:"officeType",value:r.officeType,onChange:F,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:fF.map(b=>B.jsx("option",{value:b,children:b},b))})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sorumluluk / Yetki Alan"}),B.jsx("select",{name:"responsibility",value:r.responsibility,onChange:F,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:dF.map(b=>B.jsx("option",{value:b,children:b},b))})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Durumu"}),B.jsx("select",{name:"status",value:r.status,onChange:F,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:Object.values(W0).map(b=>B.jsx("option",{value:b,children:b},b))})]})]}),B.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[B.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[B.jsx(gm,{size:16})," Konum Bilgileri"]}),B.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[B.jsxs("div",{className:"flex-1 space-y-4",children:[B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsxs("div",{className:"md:col-span-2",children:[B.jsxs("label",{className:"block text-xs font-medium text-slate-500 mb-1 flex justify-between",children:["le",r.location&&!r.district&&B.jsx("span",{className:"text-[10px] text-blue-500 animate-pulse",children:"Konumdan bekleniyor..."})]}),B.jsxs("select",{required:!0,name:"district",value:r.district,onChange:T,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[B.jsx("option",{value:"",children:"Seiniz"}),f.map(b=>B.jsx("option",{value:b,children:b},b))]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Mahalle"}),B.jsxs("select",{required:!0,name:"neighborhood",value:r.neighborhood,onChange:P,disabled:!r.district,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",children:[B.jsx("option",{value:"",children:"Seiniz"}),y.map(b=>B.jsx("option",{value:b,children:b},b))]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Sokak / Cadde"}),B.jsxs("div",{className:"relative",children:[B.jsx("input",{list:"streets-list",name:"street",value:r.street,onChange:F,disabled:!r.neighborhood,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",placeholder:N.length>0?"Seiniz veya yaznz":"Yaznz"}),B.jsx("datalist",{id:"streets-list",children:N.map(b=>B.jsx("option",{value:b},b))})]})]})]}),B.jsxs("div",{className:"bg-white border border-slate-200 p-3 rounded-lg",children:[B.jsxs("div",{className:"text-xs font-semibold text-slate-400 mb-2 flex items-center justify-between",children:[B.jsx("span",{children:"SELEN KOORDNATLAR"}),B.jsxs("span",{className:"text-[10px] text-blue-500 flex items-center gap-1",children:[B.jsx(Jk,{size:10})," Otomatik Adres Aktif"]})]}),B.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[B.jsxs("div",{children:[B.jsx("span",{className:"text-slate-500",children:"Enlem:"})," ",B.jsx("span",{className:"font-mono text-slate-800",children:((C=r.location)==null?void 0:C.lat.toFixed(6))||"-"})]}),B.jsxs("div",{children:[B.jsx("span",{className:"text-slate-500",children:"Boylam:"})," ",B.jsx("span",{className:"font-mono text-slate-800",children:((O=r.location)==null?void 0:O.lng.toFixed(6))||"-"})]})]}),!r.location&&B.jsx("div",{className:"text-xs text-red-500 mt-1",children:"* Haritadan konum seiniz"})]}),B.jsxs("div",{className:"mt-3 text-xs text-slate-500 italic border-t border-slate-200 pt-2",children:["nizleme: ",r.street," ",r.neighborhood," ",r.district&&r.neighborhood?"Mah.":""," ",r.district," / ZMR"]})]}),B.jsx("div",{className:"flex-1 min-h-[300px] border border-slate-300 rounded-lg overflow-hidden shadow-inner relative",children:B.jsx(hF,{initialLat:(H=r.location)==null?void 0:H.lat,initialLng:(k=r.location)==null?void 0:k.lng,onLocationSelect:(b,V)=>o(ie=>({...ie,location:{lat:b,lng:V}})),onAddressFound:J})})]})]}),B.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[B.jsxs("h3",{className:"text-sm font-semibold text-yellow-900 mb-2 flex items-center gap-2",children:[B.jsx(Of,{size:16})," Durakta alan Plakalar",B.jsxs("span",{className:"ml-2 bg-yellow-200 text-yellow-800 text-xs px-2 py-0.5 rounded-full",children:["Toplam: ",r.plates.length]})]}),B.jsxs("div",{className:"bg-white/50 p-3 rounded-lg border border-yellow-100 mb-3 flex items-start gap-2 text-xs text-yellow-800",children:[B.jsx(Yy,{size:14,className:"shrink-0 mt-0.5"}),B.jsxs("p",{children:[B.jsx("strong",{children:"Bilgilendirme:"})," Veri btnln salamak amacyla; duraklara plaka ekleme, karma veya transfer ilemleri sadece ana mendeki ",B.jsx("strong",{children:'"Plaka Ynetim Paneli"'})," zerinden yaplmaktadr. Bu ekranda sadece mevcut bal plakalar grntlenir."]})]}),r.plates.length>0?B.jsx("div",{className:"flex flex-wrap gap-2",children:r.plates.map((b,V)=>B.jsx("div",{className:"flex items-center gap-2 bg-white border border-slate-200 px-3 py-1.5 rounded-md shadow-sm opacity-80",children:B.jsx("span",{className:"font-mono font-bold text-slate-800 text-sm",children:b})},V))}):B.jsx("p",{className:"text-xs text-yellow-700/60 italic",children:"Bu duraa henz plaka balanmam."})]}),B.jsxs("div",{className:"relative",children:[B.jsxs("div",{className:"flex justify-between items-end mb-1",children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Notlar"}),B.jsx("button",{type:"button",onClick:Q,disabled:s,className:"text-xs flex items-center gap-1 text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50",children:s?B.jsx(Rp,{size:14,className:"animate-spin"}):B.jsx(Wk,{size:14})})]}),B.jsx("textarea",{name:"notes",rows:3,value:r.notes,onChange:F,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),B.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[B.jsx("button",{type:"button",onClick:i,disabled:u,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:"ptal"}),B.jsxs("button",{type:"submit",disabled:u||s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors shadow-sm disabled:opacity-70 disabled:cursor-not-allowed",children:[u?B.jsx(Rp,{size:18,className:"animate-spin"}):B.jsx(Gk,{size:18}),u?"Kaydediliyor...":"Kaydet"]})]})]})]})},mF="modulepreload",gF=function(t,e){return new URL(t,e).href},fw={},hv=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=gF(c,i),c in fw)return;fw[c]=!0;const f=c.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(!!i)for(let N=s.length-1;N>=0;N--){const R=s[N];if(R.href===c&&(!f||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${g}`))return;const w=document.createElement("link");if(w.rel=f?"stylesheet":mF,f||(w.as="script"),w.crossOrigin="",w.href=c,u&&w.setAttribute("nonce",u),document.head.appendChild(w),f)return new Promise((N,R)=>{w.addEventListener("load",N),w.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return r.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};function En(t){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(t)}var Ar=Uint8Array,Eo=Uint16Array,a_=Int32Array,Tm=new Ar([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Em=new Ar([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fv=new Ar([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wA=function(t,e){for(var n=new Eo(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new a_(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return{b:n,r}},xA=wA(Tm,2),SA=xA.b,dv=xA.r;SA[28]=258,dv[258]=28;var TA=wA(Em,0),vF=TA.b,dw=TA.r,pv=new Eo(32768);for(var Un=0;Un<32768;++Un){var ml=(Un&43690)>>1|(Un&21845)<<1;ml=(ml&52428)>>2|(ml&13107)<<2,ml=(ml&61680)>>4|(ml&3855)<<4,pv[Un]=((ml&65280)>>8|(ml&255)<<8)>>1}var xa=function(t,e,n){for(var i=t.length,r=0,o=new Eo(e);r<i;++r)t[r]&&++o[t[r]-1];var s=new Eo(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var l;if(n){l=new Eo(1<<e);var u=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],f=e-t[r],g=s[t[r]-1]++<<f,y=g|(1<<f)-1;g<=y;++g)l[pv[g]>>u]=c}else for(l=new Eo(i),r=0;r<i;++r)t[r]&&(l[r]=pv[s[t[r]-1]++]>>15-t[r]);return l},jl=new Ar(288);for(var Un=0;Un<144;++Un)jl[Un]=8;for(var Un=144;Un<256;++Un)jl[Un]=9;for(var Un=256;Un<280;++Un)jl[Un]=7;for(var Un=280;Un<288;++Un)jl[Un]=8;var Ef=new Ar(32);for(var Un=0;Un<32;++Un)Ef[Un]=5;var yF=xa(jl,9,0),_F=xa(jl,9,1),wF=xa(Ef,5,0),xF=xa(Ef,5,1),Tg=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ls=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},Eg=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},l_=function(t){return(t+7)/8|0},EA=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ar(t.subarray(e,n))},SF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ds=function(t,e,n){var i=new Error(e||SF[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,Ds),!n)throw i;return i},TF=function(t,e,n,i){var r=t.length,o=0;if(!r||e.f&&!e.l)return n||new Ar(0);var s=!n,l=s||e.i!=2,u=e.i;s&&(n=new Ar(r*3));var c=function(qe){var Je=n.length;if(qe>Je){var Ze=new Ar(Math.max(Je*2,qe));Ze.set(n),n=Ze}},f=e.f||0,g=e.p||0,y=e.b||0,w=e.l,N=e.d,R=e.m,F=e.n,T=r*8;do{if(!w){f=Ls(t,g,1);var I=Ls(t,g+1,3);if(g+=3,I)if(I==1)w=_F,N=xF,R=9,F=5;else if(I==2){var Q=Ls(t,g,31)+257,D=Ls(t,g+10,15)+4,C=Q+Ls(t,g+5,31)+1;g+=14;for(var O=new Ar(C),H=new Ar(19),k=0;k<D;++k)H[fv[k]]=Ls(t,g+k*3,7);g+=D*3;for(var b=Tg(H),V=(1<<b)-1,ie=xa(H,b,1),k=0;k<C;){var _e=ie[Ls(t,g,V)];g+=_e&15;var P=_e>>4;if(P<16)O[k++]=P;else{var le=0,se=0;for(P==16?(se=3+Ls(t,g,3),g+=2,le=O[k-1]):P==17?(se=3+Ls(t,g,7),g+=3):P==18&&(se=11+Ls(t,g,127),g+=7);se--;)O[k++]=le}}var W=O.subarray(0,Q),oe=O.subarray(Q);R=Tg(W),F=Tg(oe),w=xa(W,R,1),N=xa(oe,F,1)}else Ds(1);else{var P=l_(g)+4,G=t[P-4]|t[P-3]<<8,J=P+G;if(J>r){u&&Ds(0);break}l&&c(y+G),n.set(t.subarray(P,J),y),e.b=y+=G,e.p=g=J*8,e.f=f;continue}if(g>T){u&&Ds(0);break}}l&&c(y+131072);for(var fe=(1<<R)-1,xe=(1<<F)-1,j=g;;j=g){var le=w[Eg(t,g)&fe],ee=le>>4;if(g+=le&15,g>T){u&&Ds(0);break}if(le||Ds(2),ee<256)n[y++]=ee;else if(ee==256){j=g,w=null;break}else{var ae=ee-254;if(ee>264){var k=ee-257,ue=Tm[k];ae=Ls(t,g,(1<<ue)-1)+SA[k],g+=ue}var he=N[Eg(t,g)&xe],Te=he>>4;he||Ds(3),g+=he&15;var oe=vF[Te];if(Te>3){var ue=Em[Te];oe+=Eg(t,g)&(1<<ue)-1,g+=ue}if(g>T){u&&Ds(0);break}l&&c(y+131072);var be=y+ae;if(y<oe){var ke=o-oe,Ge=Math.min(oe,be);for(ke+y<0&&Ds(3);y<Ge;++y)n[y]=i[ke+y]}for(;y<be;++y)n[y]=n[y-oe]}}e.l=w,e.p=j,e.b=y,e.f=f,w&&(f=1,e.m=R,e.d=N,e.n=F)}while(!f);return y!=n.length&&s?EA(n,0,y):n.subarray(0,y)},Oa=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},xh=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},Ag=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,o=n.slice();if(!r)return{t:bA,l:0};if(r==1){var s=new Ar(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(J,Q){return J.f-Q.f}),n.push({s:-1,f:25001});var l=n[0],u=n[1],c=0,f=1,g=2;for(n[0]={s:-1,f:l.f+u.f,l,r:u};f!=r-1;)l=n[n[c].f<n[g].f?c++:g++],u=n[c!=f&&n[c].f<n[g].f?c++:g++],n[f++]={s:-1,f:l.f+u.f,l,r:u};for(var y=o[0].s,i=1;i<r;++i)o[i].s>y&&(y=o[i].s);var w=new Eo(y+1),N=mv(n[f-1],w,0);if(N>e){var i=0,R=0,F=N-e,T=1<<F;for(o.sort(function(Q,D){return w[D.s]-w[Q.s]||Q.f-D.f});i<r;++i){var I=o[i].s;if(w[I]>e)R+=T-(1<<N-w[I]),w[I]=e;else break}for(R>>=F;R>0;){var P=o[i].s;w[P]<e?R-=1<<e-w[P]++-1:++i}for(;i>=0&&R;--i){var G=o[i].s;w[G]==e&&(--w[G],++R)}N=e}return{t:new Ar(w),l:N}},mv=function(t,e,n){return t.s==-1?Math.max(mv(t.l,e,n+1),mv(t.r,e,n+1)):e[t.s]=n},pw=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Eo(++e),i=0,r=t[0],o=1,s=function(u){n[i++]=u},l=1;l<=e;++l)if(t[l]==r&&l!=e)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=t[l]}return{c:n.subarray(0,i),n:e}},Sh=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},AA=function(t,e,n){var i=n.length,r=l_(e+2);t[r]=i&255,t[r+1]=i>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var o=0;o<i;++o)t[r+o+4]=n[o];return(r+4+i)*8},mw=function(t,e,n,i,r,o,s,l,u,c,f){Oa(e,f++,n),++r[256];for(var g=Ag(r,15),y=g.t,w=g.l,N=Ag(o,15),R=N.t,F=N.l,T=pw(y),I=T.c,P=T.n,G=pw(R),J=G.c,Q=G.n,D=new Eo(19),C=0;C<I.length;++C)++D[I[C]&31];for(var C=0;C<J.length;++C)++D[J[C]&31];for(var O=Ag(D,7),H=O.t,k=O.l,b=19;b>4&&!H[fv[b-1]];--b);var V=c+5<<3,ie=Sh(r,jl)+Sh(o,Ef)+s,_e=Sh(r,y)+Sh(o,R)+s+14+3*b+Sh(D,H)+2*D[16]+3*D[17]+7*D[18];if(u>=0&&V<=ie&&V<=_e)return AA(e,f,t.subarray(u,u+c));var le,se,W,oe;if(Oa(e,f,1+(_e<ie)),f+=2,_e<ie){le=xa(y,w,0),se=y,W=xa(R,F,0),oe=R;var fe=xa(H,k,0);Oa(e,f,P-257),Oa(e,f+5,Q-1),Oa(e,f+10,b-4),f+=14;for(var C=0;C<b;++C)Oa(e,f+3*C,H[fv[C]]);f+=3*b;for(var xe=[I,J],j=0;j<2;++j)for(var ee=xe[j],C=0;C<ee.length;++C){var ae=ee[C]&31;Oa(e,f,fe[ae]),f+=H[ae],ae>15&&(Oa(e,f,ee[C]>>5&127),f+=ee[C]>>12)}}else le=yF,se=jl,W=wF,oe=Ef;for(var C=0;C<l;++C){var ue=i[C];if(ue>255){var ae=ue>>18&31;xh(e,f,le[ae+257]),f+=se[ae+257],ae>7&&(Oa(e,f,ue>>23&31),f+=Tm[ae]);var he=ue&31;xh(e,f,W[he]),f+=oe[he],he>3&&(xh(e,f,ue>>5&8191),f+=Em[he])}else xh(e,f,le[ue]),f+=se[ue]}return xh(e,f,le[256]),f+se[256]},EF=new a_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bA=new Ar(0),AF=function(t,e,n,i,r,o){var s=o.z||t.length,l=new Ar(i+s+5*(1+Math.ceil(s/7e3))+r),u=l.subarray(i,l.length-r),c=o.l,f=(o.r||0)&7;if(e){f&&(u[0]=o.r>>3);for(var g=EF[e-1],y=g>>13,w=g&8191,N=(1<<n)-1,R=o.p||new Eo(32768),F=o.h||new Eo(N+1),T=Math.ceil(n/3),I=2*T,P=function(mt){return(t[mt]^t[mt+1]<<T^t[mt+2]<<I)&N},G=new a_(25e3),J=new Eo(288),Q=new Eo(32),D=0,C=0,O=o.i||0,H=0,k=o.w||0,b=0;O+2<s;++O){var V=P(O),ie=O&32767,_e=F[V];if(R[ie]=_e,F[V]=ie,k<=O){var le=s-O;if((D>7e3||H>24576)&&(le>423||!c)){f=mw(t,u,0,G,J,Q,C,H,b,O-b,f),H=D=C=0,b=O;for(var se=0;se<286;++se)J[se]=0;for(var se=0;se<30;++se)Q[se]=0}var W=2,oe=0,fe=w,xe=ie-_e&32767;if(le>2&&V==P(O-xe))for(var j=Math.min(y,le)-1,ee=Math.min(32767,O),ae=Math.min(258,le);xe<=ee&&--fe&&ie!=_e;){if(t[O+W]==t[O+W-xe]){for(var ue=0;ue<ae&&t[O+ue]==t[O+ue-xe];++ue);if(ue>W){if(W=ue,oe=xe,ue>j)break;for(var he=Math.min(xe,ue-2),Te=0,se=0;se<he;++se){var be=O-xe+se&32767,ke=R[be],Ge=be-ke&32767;Ge>Te&&(Te=Ge,_e=be)}}}ie=_e,_e=R[ie],xe+=ie-_e&32767}if(oe){G[H++]=268435456|dv[W]<<18|dw[oe];var qe=dv[W]&31,Je=dw[oe]&31;C+=Tm[qe]+Em[Je],++J[257+qe],++Q[Je],k=O+W,++D}else G[H++]=t[O],++J[t[O]]}}for(O=Math.max(O,k);O<s;++O)G[H++]=t[O],++J[t[O]];f=mw(t,u,c,G,J,Q,C,H,b,O-b,f),c||(o.r=f&7|u[f/8|0]<<3,f-=7,o.h=F,o.p=R,o.i=O,o.w=k)}else{for(var O=o.w||0;O<s+c;O+=65535){var Ze=O+65535;Ze>=s&&(u[f/8|0]=c,Ze=s),f=AA(u,f+1,t.subarray(O,Ze))}o.i=s}return EA(l,0,i+l_(f)+r)},CA=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,o=n.length|0,s=0;s!=o;){for(var l=Math.min(s+2655,o);s<l;++s)r+=i+=n[s];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}t=i,e=r},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},bF=function(t,e,n,i,r){if(!r&&(r={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new Ar(o.length+t.length);s.set(o),s.set(t,o.length),t=s,r.w=o.length}return AF(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,r)},IA=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},CF=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=CA();r.p(e.dictionary),IA(t,2,r.d())}},IF=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ds(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ds(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function gv(t,e){e||(e={});var n=CA();n.p(t);var i=bF(t,e,e.dictionary?6:2,4);return CF(i,e),IA(i,i.length-4,n.d()),i}function PF(t,e){return TF(t.subarray(IF(t),-4),{i:2},e,e)}var NF=typeof TextDecoder<"u"&&new TextDecoder,kF=0;try{NF.decode(bA,{stream:!0}),kF=1}catch{}var Nt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function bg(){Nt.console&&typeof Nt.console.log=="function"&&Nt.console.log.apply(Nt.console,arguments)}var Dn={log:bg,warn:function(t){Nt.console&&(typeof Nt.console.warn=="function"?Nt.console.warn.apply(Nt.console,arguments):bg.call(null,arguments))},error:function(t){Nt.console&&(typeof Nt.console.error=="function"?Nt.console.error.apply(Nt.console,arguments):bg(t))}};function Cg(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){uu(i.response,e,n)},i.onerror=function(){Dn.error("could not download file")},i.send()}function gw(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Cd(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gh,vv,uu=Nt.saveAs||((typeof window>"u"?"undefined":En(window))!=="object"||window!==Nt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Nt.URL||Nt.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?gw(r.href)?Cg(t,e,n):Cd(r,r.target="_blank"):Cd(r)):(r.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){Cd(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(gw(t))Cg(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){Cd(i)})}else navigator.msSaveOrOpenBlob(function(r,o){return o===void 0?o={autoBom:!1}:En(o)!=="object"&&(Dn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return Cg(t,e,n);var r=t.type==="application/octet-stream",o=/constructor/i.test(Nt.HTMLElement)||Nt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&o)&&(typeof FileReader>"u"?"undefined":En(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=s?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=f:location=f,i=null},l.readAsDataURL(t)}else{var u=Nt.URL||Nt.webkitURL,c=u.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout(function(){u.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function PA(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,s=r.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),c=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),c.length==1&&(c="0"+c),"#"+l+u+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ig(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];n=yr(n,i,r,o,e[0],7,-680876936),o=yr(o,n,i,r,e[1],12,-389564586),r=yr(r,o,n,i,e[2],17,606105819),i=yr(i,r,o,n,e[3],22,-1044525330),n=yr(n,i,r,o,e[4],7,-176418897),o=yr(o,n,i,r,e[5],12,1200080426),r=yr(r,o,n,i,e[6],17,-1473231341),i=yr(i,r,o,n,e[7],22,-45705983),n=yr(n,i,r,o,e[8],7,1770035416),o=yr(o,n,i,r,e[9],12,-1958414417),r=yr(r,o,n,i,e[10],17,-42063),i=yr(i,r,o,n,e[11],22,-1990404162),n=yr(n,i,r,o,e[12],7,1804603682),o=yr(o,n,i,r,e[13],12,-40341101),r=yr(r,o,n,i,e[14],17,-1502002290),n=_r(n,i=yr(i,r,o,n,e[15],22,1236535329),r,o,e[1],5,-165796510),o=_r(o,n,i,r,e[6],9,-1069501632),r=_r(r,o,n,i,e[11],14,643717713),i=_r(i,r,o,n,e[0],20,-373897302),n=_r(n,i,r,o,e[5],5,-701558691),o=_r(o,n,i,r,e[10],9,38016083),r=_r(r,o,n,i,e[15],14,-660478335),i=_r(i,r,o,n,e[4],20,-405537848),n=_r(n,i,r,o,e[9],5,568446438),o=_r(o,n,i,r,e[14],9,-1019803690),r=_r(r,o,n,i,e[3],14,-187363961),i=_r(i,r,o,n,e[8],20,1163531501),n=_r(n,i,r,o,e[13],5,-1444681467),o=_r(o,n,i,r,e[2],9,-51403784),r=_r(r,o,n,i,e[7],14,1735328473),n=wr(n,i=_r(i,r,o,n,e[12],20,-1926607734),r,o,e[5],4,-378558),o=wr(o,n,i,r,e[8],11,-2022574463),r=wr(r,o,n,i,e[11],16,1839030562),i=wr(i,r,o,n,e[14],23,-35309556),n=wr(n,i,r,o,e[1],4,-1530992060),o=wr(o,n,i,r,e[4],11,1272893353),r=wr(r,o,n,i,e[7],16,-155497632),i=wr(i,r,o,n,e[10],23,-1094730640),n=wr(n,i,r,o,e[13],4,681279174),o=wr(o,n,i,r,e[0],11,-358537222),r=wr(r,o,n,i,e[3],16,-722521979),i=wr(i,r,o,n,e[6],23,76029189),n=wr(n,i,r,o,e[9],4,-640364487),o=wr(o,n,i,r,e[12],11,-421815835),r=wr(r,o,n,i,e[15],16,530742520),n=xr(n,i=wr(i,r,o,n,e[2],23,-995338651),r,o,e[0],6,-198630844),o=xr(o,n,i,r,e[7],10,1126891415),r=xr(r,o,n,i,e[14],15,-1416354905),i=xr(i,r,o,n,e[5],21,-57434055),n=xr(n,i,r,o,e[12],6,1700485571),o=xr(o,n,i,r,e[3],10,-1894986606),r=xr(r,o,n,i,e[10],15,-1051523),i=xr(i,r,o,n,e[1],21,-2054922799),n=xr(n,i,r,o,e[8],6,1873313359),o=xr(o,n,i,r,e[15],10,-30611744),r=xr(r,o,n,i,e[6],15,-1560198380),i=xr(i,r,o,n,e[13],21,1309151649),n=xr(n,i,r,o,e[4],6,-145523070),o=xr(o,n,i,r,e[11],10,-1120210379),r=xr(r,o,n,i,e[2],15,718787259),i=xr(i,r,o,n,e[9],21,-343485551),t[0]=bl(n,t[0]),t[1]=bl(i,t[1]),t[2]=bl(r,t[2]),t[3]=bl(o,t[3])}function Am(t,e,n,i,r,o){return e=bl(bl(e,t),bl(i,o)),bl(e<<r|e>>>32-r,n)}function yr(t,e,n,i,r,o,s){return Am(e&n|~e&i,t,e,r,o,s)}function _r(t,e,n,i,r,o,s){return Am(e&i|n&~i,t,e,r,o,s)}function wr(t,e,n,i,r,o,s){return Am(e^n^i,t,e,r,o,s)}function xr(t,e,n,i,r,o,s){return Am(n^(e|~i),t,e,r,o,s)}function NA(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Ig(i,LF(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(Ig(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,Ig(i,r),i}function LF(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gh=Nt.atob.bind(Nt),vv=Nt.btoa.bind(Nt);var vw="0123456789abcdef".split("");function RF(t){for(var e="",n=0;n<4;n++)e+=vw[t>>8*n+4&15]+vw[t>>8*n&15];return e}function MF(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function yv(t){return NA(t).map(MF).join("")}var DF=function(t){for(var e=0;e<t.length;e++)t[e]=RF(t[e]);return t.join("")}(NA("hello"))!="5d41402abc4b2a76b9719d911017c592";function bl(t,e){if(DF){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _v(t,e){var n,i,r,o;if(t!==n){for(var s=(r=t,o=1+(256/t.length>>0),new Array(o+1).join(r)),l=[],u=0;u<256;u++)l[u]=u;var c=0;for(u=0;u<256;u++){var f=l[u];c=(c+f+s.charCodeAt(u))%256,l[u]=l[c],l[c]=f}n=t,i=l}else l=i;var g=e.length,y=0,w=0,N="";for(u=0;u<g;u++)w=(w+(f=l[y=(y+1)%256]))%256,l[y]=l[w],l[w]=f,s=l[(l[y]+l[w])%256],N+=String.fromCharCode(e.charCodeAt(u)^s);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var yw={print:4,modify:8,copy:16,"annot-forms":32};function tc(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach(function(l){if(yw.perm!==void 0)throw new Error("Invalid permission: "+l);r+=yw[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^r)),this.encryptionKey=yv(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=_v(this.encryptionKey,this.padding)}function nc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=t[i]}return e}function _w(t){if(En(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,r){if(r=r||!1,typeof n!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[i,!!r],o},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,i)}catch(l){Nt.console&&Dn.error("jsPDF PubSub Error",l.message,l)}s[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Af(t){if(!(this instanceof Af))return new Af(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function kA(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function xl(t,e,n,i,r){if(!(this instanceof xl))return new xl(t,e,n,i,r);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,kA.call(this,i,r)}function pu(t,e,n,i,r){if(!(this instanceof pu))return new pu(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,kA.call(this,i,r)}function wt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],s=[],l=1,u=16,c="S",f=null;En(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,r=t.format||r,o=t.compress||t.compressPdf||o,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),i=i||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},w={internal:{},__private__:{}};w.__private__.PubSub=_w;var N="1.3",R=w.__private__.getPdfVersion=function(){return N};w.__private__.setPdfVersion=function(S){N=S};var F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};w.__private__.getPageFormats=function(){return F};var T=w.__private__.getPageFormat=function(S){return F[S]};r=r||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},P=I.COMPAT;function G(){this.saveGraphicsState(),pe(new lt(it,0,0,-it,0,Fi()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",P=I.ADVANCED}function J(){this.restoreGraphicsState(),c="S",P=I.COMPAT}var Q=w.__private__.combineFontStyleAndFontWeight=function(S,$){if(S=="bold"&&$=="normal"||S=="bold"&&$==400||S=="normal"&&$=="italic"||S=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(S=$==400||$==="normal"?S==="italic"?"italic":"normal":$!=700&&$!=="bold"||S!=="normal"?($==700?"bold":$)+""+S:"bold"),S};w.advancedAPI=function(S){var $=P===I.COMPAT;return $&&G.call(this),typeof S!="function"||(S(this),$&&J.call(this)),this},w.compatAPI=function(S){var $=P===I.ADVANCED;return $&&J.call(this),typeof S!="function"||(S(this),$&&G.call(this)),this},w.isAdvancedAPI=function(){return P===I.ADVANCED};var D,C=function(S){if(P!==I.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=w.roundToPrecision=w.__private__.roundToPrecision=function(S,$){var de=e||$;if(isNaN(S)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(de).replace(/0+$/,"")};D=w.hpf=w.__private__.hpf=typeof u=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return O(S,u)}:u==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return O(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return O(S,16)};var H=w.f2=w.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return O(S,2)},k=w.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return O(S,3)},b=w.scale=w.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return P===I.COMPAT?S*it:P===I.ADVANCED?S:void 0},V=function(S){return P===I.COMPAT?Fi()-S:P===I.ADVANCED?S:void 0},ie=function(S){return b(V(S))};w.__private__.setPrecision=w.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var _e,le="00000000000000000000000000000000",se=w.__private__.getFileId=function(){return le},W=w.__private__.setFileId=function(S){return le=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(gn=new tc(f.userPermissions,f.userPassword,f.ownerPassword,le)),le};w.setFileId=function(S){return W(S),this},w.getFileId=function(){return se()};var oe=w.__private__.convertDateToPDFDate=function(S){var $=S.getTimezoneOffset(),de=$<0?"+":"-",ge=Math.floor(Math.abs($/60)),Ee=Math.abs($%60),Re=[de,ae(ge),"'",ae(Ee),"'"].join("");return["D:",S.getFullYear(),ae(S.getMonth()+1),ae(S.getDate()),ae(S.getHours()),ae(S.getMinutes()),ae(S.getSeconds()),Re].join("")},fe=w.__private__.convertPDFDateToDate=function(S){var $=parseInt(S.substr(2,4),10),de=parseInt(S.substr(6,2),10)-1,ge=parseInt(S.substr(8,2),10),Ee=parseInt(S.substr(10,2),10),Re=parseInt(S.substr(12,2),10),Ue=parseInt(S.substr(14,2),10);return new Date($,de,ge,Ee,Re,Ue,0)},xe=w.__private__.setCreationDate=function(S){var $;if(S===void 0&&(S=new Date),S instanceof Date)$=oe(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=S}return _e=$},j=w.__private__.getCreationDate=function(S){var $=_e;return S==="jsDate"&&($=fe(_e)),$};w.setCreationDate=function(S){return xe(S),this},w.getCreationDate=function(S){return j(S)};var ee,ae=w.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ue=w.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},he=0,Te=[],be=[],ke=0,Ge=[],qe=[],Je=!1,Ze=be,mt=function(){he=0,ke=0,be=[],Te=[],Ge=[],jr=tt(),_i=tt()};w.__private__.setCustomOutputDestination=function(S){Je=!0,Ze=S};var De=function(S){Je||(Ze=S)};w.__private__.resetCustomOutputDestination=function(){Je=!1,Ze=be};var pe=w.__private__.out=function(S){return S=S.toString(),ke+=S.length+1,Ze.push(S),Ze},It=w.__private__.write=function(S){return pe(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},ut=w.__private__.getArrayBuffer=function(S){for(var $=S.length,de=new ArrayBuffer($),ge=new Uint8Array(de);$--;)ge[$]=S.charCodeAt($);return de},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];w.__private__.getStandardFonts=function(){return We};var Ye=t.fontSize||16;w.__private__.setFontSize=w.setFontSize=function(S){return Ye=P===I.ADVANCED?S/it:S,this};var et,Xe=w.__private__.getFontSize=w.getFontSize=function(){return P===I.COMPAT?Ye:Ye*it},ft=t.R2L||!1;w.__private__.setR2L=w.setR2L=function(S){return ft=S,this},w.__private__.getR2L=w.getR2L=function(){return ft};var At,Rt=w.__private__.setZoomMode=function(S){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))et=S;else if(isNaN(S)){if($.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');et=S}else et=parseInt(S,10)};w.__private__.getZoomMode=function(){return et};var pt,xt=w.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');At=S};w.__private__.getPageMode=function(){return At};var Zt=w.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');pt=S};w.__private__.getLayoutMode=function(){return pt},w.__private__.setDisplayMode=w.setDisplayMode=function(S,$,de){return Rt(S),Zt($),xt(de),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};w.__private__.getDocumentProperty=function(S){if(Object.keys(St).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[S]},w.__private__.getDocumentProperties=function(){return St},w.__private__.setDocumentProperties=w.setProperties=w.setDocumentProperties=function(S){for(var $ in St)St.hasOwnProperty($)&&S[$]&&(St[$]=S[$]);return this},w.__private__.setDocumentProperty=function(S,$){if(Object.keys(St).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[S]=$};var zt,it,qn,Jt,Ni,rn={},Cn={},ki=[],Qt={},Po={},In={},pi={},lr=null,Pn=0,vt=[],nn=new _w(w),Gr=t.hotfixes||[],Xn={},Li={},ji=[],lt=function S($,de,ge,Ee,Re,Ue){if(!(this instanceof S))return new S($,de,ge,Ee,Re,Ue);isNaN($)&&($=1),isNaN(de)&&(de=0),isNaN(ge)&&(ge=0),isNaN(Ee)&&(Ee=1),isNaN(Re)&&(Re=0),isNaN(Ue)&&(Ue=0),this._matrix=[$,de,ge,Ee,Re,Ue]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(S)},lt.prototype.multiply=function(S){var $=S.sx*this.sx+S.shy*this.shx,de=S.sx*this.shy+S.shy*this.sy,ge=S.shx*this.sx+S.sy*this.shx,Ee=S.shx*this.shy+S.sy*this.sy,Re=S.tx*this.sx+S.ty*this.shx+this.tx,Ue=S.tx*this.shy+S.ty*this.sy+this.ty;return new lt($,de,ge,Ee,Re,Ue)},lt.prototype.decompose=function(){var S=this.sx,$=this.shy,de=this.shx,ge=this.sy,Ee=this.tx,Re=this.ty,Ue=Math.sqrt(S*S+$*$),Qe=(S/=Ue)*de+($/=Ue)*ge;de-=S*Qe,ge-=$*Qe;var m=Math.sqrt(de*de+ge*ge);return Qe/=m,S*(ge/=m)<$*(de/=m)&&(S=-S,$=-$,Qe=-Qe,Ue=-Ue),{scale:new lt(Ue,0,0,m,0,0),translate:new lt(1,0,0,1,Ee,Re),rotate:new lt(S,$,-$,S,0,0),skew:new lt(1,0,Qe,1,0,0)}},lt.prototype.toString=function(S){return this.join(" ")},lt.prototype.inversed=function(){var S=this.sx,$=this.shy,de=this.shx,ge=this.sy,Ee=this.tx,Re=this.ty,Ue=1/(S*ge-$*de),Qe=ge*Ue,m=-$*Ue,M=-de*Ue,q=S*Ue;return new lt(Qe,m,M,q,-Qe*Ee-M*Re,-m*Ee-q*Re)},lt.prototype.applyToPoint=function(S){var $=S.x*this.sx+S.y*this.shx+this.tx,de=S.x*this.shy+S.y*this.sy+this.ty;return new $o($,de)},lt.prototype.applyToRectangle=function(S){var $=this.applyToPoint(S),de=this.applyToPoint(new $o(S.x+S.w,S.y+S.h));return new Ji($.x,$.y,de.x-$.x,de.y-$.y)},lt.prototype.clone=function(){var S=this.sx,$=this.shy,de=this.shx,ge=this.sy,Ee=this.tx,Re=this.ty;return new lt(S,$,de,ge,Ee,Re)},w.Matrix=lt;var ur=w.matrixMult=function(S,$){return $.multiply(S)},Ri=new lt(1,0,0,1,0,0);w.unitMatrix=w.identityMatrix=Ri;var ei=function(S,$){if(!Po[S]){var de=($ instanceof xl?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);$.id=de,Po[S]=de,Qt[de]=$,nn.publish("addPattern",$)}};w.ShadingPattern=xl,w.TilingPattern=pu,w.addShadingPattern=function(S,$){return C("addShadingPattern()"),ei(S,$),this},w.beginTilingPattern=function(S){C("beginTilingPattern()"),Ts(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},w.endTilingPattern=function(S,$){C("endTilingPattern()"),$.stream=qe[ee].join(`
`),ei(S,$),nn.publish("endTilingPattern",$),ji.pop().restore()};var hn=w.__private__.newObject=function(){var S=tt();return Wn(S,!0),S},tt=w.__private__.newObjectDeferred=function(){return he++,Te[he]=function(){return ke},he},Wn=function(S,$){return $=typeof $=="boolean"&&$,Te[S]=ke,$&&pe(S+" 0 obj"),S},ds=w.__private__.newAdditionalObject=function(){var S={objId:tt(),content:""};return Ge.push(S),S},jr=tt(),_i=tt(),Mi=w.__private__.decodeColorString=function(S){var $=S.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var de=parseFloat($[0]);$=[de,de,de,"r"]}for(var ge="#",Ee=0;Ee<3;Ee++)ge+=("0"+Math.floor(255*parseFloat($[Ee])).toString(16)).slice(-2);return ge},Di=w.__private__.encodeColorString=function(S){var $;typeof S=="string"&&(S={ch1:S});var de=S.ch1,ge=S.ch2,Ee=S.ch3,Re=S.ch4,Ue=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var Qe=new PA(de);if(Qe.ok)de=Qe.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var m=parseInt(de.substr(1),16);de=m>>16&255,ge=m>>8&255,Ee=255&m}if(ge===void 0||Re===void 0&&de===ge&&ge===Ee)if(typeof de=="string")$=de+" "+Ue[0];else switch(S.precision){case 2:$=H(de/255)+" "+Ue[0];break;case 3:default:$=k(de/255)+" "+Ue[0]}else if(Re===void 0||En(Re)==="object"){if(Re&&!isNaN(Re.a)&&Re.a===0)return $=["1.","1.","1.",Ue[1]].join(" ");if(typeof de=="string")$=[de,ge,Ee,Ue[1]].join(" ");else switch(S.precision){case 2:$=[H(de/255),H(ge/255),H(Ee/255),Ue[1]].join(" ");break;default:case 3:$=[k(de/255),k(ge/255),k(Ee/255),Ue[1]].join(" ")}}else if(typeof de=="string")$=[de,ge,Ee,Re,Ue[2]].join(" ");else switch(S.precision){case 2:$=[H(de),H(ge),H(Ee),H(Re),Ue[2]].join(" ");break;case 3:default:$=[k(de),k(ge),k(Ee),k(Re),Ue[2]].join(" ")}return $},ti=w.__private__.getFilters=function(){return s},Hn=w.__private__.putStream=function(S){var $=(S=S||{}).data||"",de=S.filters||ti(),ge=S.alreadyAppliedFilters||[],Ee=S.addLength1||!1,Re=$.length,Ue=S.objectId,Qe=function(Mt){return Mt};if(f!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Qe=gn.encryptor(Ue,0));var m={};de===!0&&(de=["FlateEncode"]);var M=S.additionalKeyValues||[],q=(m=wt.API.processDataByFilters!==void 0?wt.API.processDataByFilters($,de):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(m.data.length!==0&&(M.push({key:"Length",value:m.data.length}),Ee===!0&&M.push({key:"Length1",value:Re})),q.length!=0)if(q.split("/").length-1==1)M.push({key:"Filter",value:q});else{M.push({key:"Filter",value:"["+q+"]"});for(var te=0;te<M.length;te+=1)if(M[te].key==="DecodeParms"){for(var we=[],Ie=0;Ie<m.reverseChain.split("/").length-1;Ie+=1)we.push("null");we.push(M[te].value),M[te].value="["+we.join(" ")+"]"}}pe("<<");for(var He=0;He<M.length;He++)pe("/"+M[He].key+" "+M[He].value);pe(">>"),m.data.length!==0&&(pe("stream"),pe(Qe(m.data)),pe("endstream"))},Ir=w.__private__.putPage=function(S){var $=S.number,de=S.data,ge=S.objId,Ee=S.contentsObjId;Wn(ge,!0),pe("<</Type /Page"),pe("/Parent "+S.rootDictionaryObjId+" 0 R"),pe("/Resources "+S.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(D(S.mediaBox.bottomLeftX))+" "+parseFloat(D(S.mediaBox.bottomLeftY))+" "+D(S.mediaBox.topRightX)+" "+D(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&pe("/CropBox ["+D(S.cropBox.bottomLeftX)+" "+D(S.cropBox.bottomLeftY)+" "+D(S.cropBox.topRightX)+" "+D(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&pe("/BleedBox ["+D(S.bleedBox.bottomLeftX)+" "+D(S.bleedBox.bottomLeftY)+" "+D(S.bleedBox.topRightX)+" "+D(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&pe("/TrimBox ["+D(S.trimBox.bottomLeftX)+" "+D(S.trimBox.bottomLeftY)+" "+D(S.trimBox.topRightX)+" "+D(S.trimBox.topRightY)+"]"),S.artBox!==null&&pe("/ArtBox ["+D(S.artBox.bottomLeftX)+" "+D(S.artBox.bottomLeftY)+" "+D(S.artBox.topRightX)+" "+D(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&pe("/UserUnit "+S.userUnit),nn.publish("putPage",{objId:ge,pageContext:vt[$],pageNumber:$,page:de}),pe("/Contents "+Ee+" 0 R"),pe(">>"),pe("endobj");var Re=de.join(`
`);return P===I.ADVANCED&&(Re+=`
Q`),Wn(Ee,!0),Hn({data:Re,filters:ti(),objectId:Ee}),pe("endobj"),ge},No=w.__private__.putPages=function(){var S,$,de=[];for(S=1;S<=Pn;S++)vt[S].objId=tt(),vt[S].contentsObjId=tt();for(S=1;S<=Pn;S++)de.push(Ir({number:S,data:qe[S],objId:vt[S].objId,contentsObjId:vt[S].contentsObjId,mediaBox:vt[S].mediaBox,cropBox:vt[S].cropBox,bleedBox:vt[S].bleedBox,trimBox:vt[S].trimBox,artBox:vt[S].artBox,userUnit:vt[S].userUnit,rootDictionaryObjId:jr,resourceDictionaryObjId:_i}));Wn(jr,!0),pe("<</Type /Pages");var ge="/Kids [";for($=0;$<Pn;$++)ge+=de[$]+" 0 R ";pe(ge+"]"),pe("/Count "+Pn),pe(">>"),pe("endobj"),nn.publish("postPutPages")},ko=function(S){nn.publish("putFont",{font:S,out:pe,newObject:hn,putStream:Hn}),S.isAlreadyPutted!==!0&&(S.objectNumber=hn(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+nc(S.postScriptName)),pe("/Subtype /Type1"),typeof S.encoding=="string"&&pe("/Encoding /"+S.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},Lo=function(){for(var S in rn)rn.hasOwnProperty(S)&&(g===!1||g===!0&&y.hasOwnProperty(S))&&ko(rn[S])},Ro=function(S){S.objectNumber=hn();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[D(S.x),D(S.y),D(S.x+S.width),D(S.y+S.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var de=S.pages[1].join(`
`);Hn({data:de,additionalKeyValues:$,objectId:S.objectNumber}),pe("endobj")},ps=function(){for(var S in Xn)Xn.hasOwnProperty(S)&&Ro(Xn[S])},ms=function(S,$){var de,ge=[],Ee=1/($-1);for(de=0;de<1;de+=Ee)ge.push(de);if(ge.push(1),S[0].offset!=0){var Re={offset:0,color:S[0].color};S.unshift(Re)}if(S[S.length-1].offset!=1){var Ue={offset:1,color:S[S.length-1].color};S.push(Ue)}for(var Qe="",m=0,M=0;M<ge.length;M++){for(de=ge[M];de>S[m+1].offset;)m++;var q=S[m].offset,te=(de-q)/(S[m+1].offset-q),we=S[m].color,Ie=S[m+1].color;Qe+=ue(Math.round((1-te)*we[0]+te*Ie[0]).toString(16))+ue(Math.round((1-te)*we[1]+te*Ie[1]).toString(16))+ue(Math.round((1-te)*we[2]+te*Ie[2]).toString(16))}return Qe.trim()},$s=function(S,$){$||($=21);var de=hn(),ge=ms(S.colors,$),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+$+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hn({data:ge,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),pe("endobj"),S.objectNumber=hn(),pe("<< /ShadingType "+S.type),pe("/ColorSpace /DeviceRGB");var Re="/Coords ["+D(parseFloat(S.coords[0]))+" "+D(parseFloat(S.coords[1]))+" ";S.type===2?Re+=D(parseFloat(S.coords[2]))+" "+D(parseFloat(S.coords[3])):Re+=D(parseFloat(S.coords[2]))+" "+D(parseFloat(S.coords[3]))+" "+D(parseFloat(S.coords[4]))+" "+D(parseFloat(S.coords[5])),pe(Re+="]"),S.matrix&&pe("/Matrix ["+S.matrix.toString()+"]"),pe("/Function "+de+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},tl=function(S,$){var de=tt(),ge=hn();$.push({resourcesOid:de,objectOid:ge}),S.objectNumber=ge;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+S.boundingBox.map(D).join(" ")+"]"}),Ee.push({key:"XStep",value:D(S.xStep)}),Ee.push({key:"YStep",value:D(S.yStep)}),Ee.push({key:"Resources",value:de+" 0 R"}),S.matrix&&Ee.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Hn({data:S.stream,additionalKeyValues:Ee,objectId:S.objectNumber}),pe("endobj")},Mo=function(S){var $;for($ in Qt)Qt.hasOwnProperty($)&&(Qt[$]instanceof xl?$s(Qt[$]):Qt[$]instanceof pu&&tl(Qt[$],S))},Do=function(S){for(var $ in S.objectNumber=hn(),pe("<<"),S)switch($){case"opacity":pe("/ca "+H(S[$]));break;case"stroke-opacity":pe("/CA "+H(S[$]))}pe(">>"),pe("endobj")},uo=function(){var S;for(S in In)In.hasOwnProperty(S)&&Do(In[S])},co=function(){for(var S in pe("/XObject <<"),Xn)Xn.hasOwnProperty(S)&&Xn[S].objectNumber>=0&&pe("/"+S+" "+Xn[S].objectNumber+" 0 R");nn.publish("putXobjectDict"),pe(">>")},gs=function(){gn.oid=hn(),pe("<<"),pe("/Filter /Standard"),pe("/V "+gn.v),pe("/R "+gn.r),pe("/U <"+gn.toHexString(gn.U)+">"),pe("/O <"+gn.toHexString(gn.O)+">"),pe("/P "+gn.P),pe(">>"),pe("endobj")},Ks=function(){for(var S in pe("/Font <<"),rn)rn.hasOwnProperty(S)&&(g===!1||g===!0&&y.hasOwnProperty(S))&&pe("/"+S+" "+rn[S].objectNumber+" 0 R");pe(">>")},Aa=function(){if(Object.keys(Qt).length>0){for(var S in pe("/Shading <<"),Qt)Qt.hasOwnProperty(S)&&Qt[S]instanceof xl&&Qt[S].objectNumber>=0&&pe("/"+S+" "+Qt[S].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),pe(">>")}},Pr=function(S){if(Object.keys(Qt).length>0){for(var $ in pe("/Pattern <<"),Qt)Qt.hasOwnProperty($)&&Qt[$]instanceof w.TilingPattern&&Qt[$].objectNumber>=0&&Qt[$].objectNumber<S&&pe("/"+$+" "+Qt[$].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),pe(">>")}},jt=function(){if(Object.keys(In).length>0){var S;for(S in pe("/ExtGState <<"),In)In.hasOwnProperty(S)&&In[S].objectNumber>=0&&pe("/"+S+" "+In[S].objectNumber+" 0 R");nn.publish("putGStateDict"),pe(">>")}},Pt=function(S){Wn(S.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ks(),Aa(),Pr(S.objectOid),jt(),co(),pe(">>"),pe("endobj")},Fo=function(){var S=[];Lo(),uo(),ps(),Mo(S),nn.publish("putResources"),S.forEach(Pt),Pt({resourcesOid:_i,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},Wr=function(){nn.publish("putAdditionalObjects");for(var S=0;S<Ge.length;S++){var $=Ge[S];Wn($.objId,!0),pe($.content),pe("endobj")}nn.publish("postPutAdditionalObjects")},ho=function(S){Cn[S.fontName]=Cn[S.fontName]||{},Cn[S.fontName][S.fontStyle]=S.id},vs=function(S,$,de,ge,Ee){var Re={id:"F"+(Object.keys(rn).length+1).toString(10),postScriptName:S,fontName:$,fontStyle:de,encoding:ge,isStandardFont:Ee||!1,metadata:{}};return nn.publish("addFont",{font:Re,instance:this}),rn[Re.id]=Re,ho(Re),Re.id},Lt=function(S){for(var $=0,de=We.length;$<de;$++){var ge=vs.call(this,S[$][0],S[$][1],S[$][2],We[$][3],!0);g===!1&&(y[ge]=!0);var Ee=S[$][0].split("-");ho({id:ge,fontName:Ee[0],fontStyle:Ee[1]||""})}nn.publish("addFonts",{fonts:rn,dictionary:Cn})},Xt=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(ge){var $=ge.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var de="Error in function "+$.split(`
`)[0].split("<")[0]+": "+ge.message;if(!Nt.console)throw new Error(de);Nt.console.error(de,ge),Nt.alert&&alert(de)}},S.foo.bar=S,S.foo},Oo=function(S,$){var de,ge,Ee,Re,Ue,Qe,m,M,q;if(Ee=($=$||{}).sourceEncoding||"Unicode",Ue=$.outputEncoding,($.autoencode||Ue)&&rn[zt].metadata&&rn[zt].metadata[Ee]&&rn[zt].metadata[Ee].encoding&&(Re=rn[zt].metadata[Ee].encoding,!Ue&&rn[zt].encoding&&(Ue=rn[zt].encoding),!Ue&&Re.codePages&&(Ue=Re.codePages[0]),typeof Ue=="string"&&(Ue=Re[Ue]),Ue)){for(m=!1,Qe=[],de=0,ge=S.length;de<ge;de++)(M=Ue[S.charCodeAt(de)])?Qe.push(String.fromCharCode(M)):Qe.push(S[de]),Qe[de].charCodeAt(0)>>8&&(m=!0);S=Qe.join("")}for(de=S.length;m===void 0&&de!==0;)S.charCodeAt(de-1)>>8&&(m=!0),de--;if(!m)return S;for(Qe=$.noBOM?[]:[254,255],de=0,ge=S.length;de<ge;de++){if((q=(M=S.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(q),Qe.push(M-(q<<8))}return String.fromCharCode.apply(void 0,Qe)},Ln=w.__private__.pdfEscape=w.pdfEscape=function(S,$){return Oo(S,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nn=w.__private__.beginPage=function(S){qe[++Pn]=[],vt[Pn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Nr(Pn),De(qe[ee])},ys=function(S,$){var de,ge,Ee;switch(n=$||n,typeof S=="string"&&(de=T(S.toLowerCase()),Array.isArray(de)&&(ge=de[0],Ee=de[1])),Array.isArray(S)&&(ge=S[0]*it,Ee=S[1]*it),isNaN(ge)&&(ge=r[0],Ee=r[1]),(ge>14400||Ee>14400)&&(Dn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Ee=Math.min(14400,Ee)),r=[ge,Ee],n.substr(0,1)){case"l":Ee>ge&&(r=[Ee,ge]);break;case"p":ge>Ee&&(r=[Ee,ge])}Nn(r),Na(Ys),pe(ai),La!==0&&pe(La+" J"),wi!==0&&pe(wi+" j"),nn.publish("addPage",{pageNumber:Pn})},fo=function(S){S>0&&S<=Pn&&(qe.splice(S,1),vt.splice(S,1),Pn--,ee>Pn&&(ee=Pn),this.setPage(ee))},Nr=function(S){S>0&&S<=Pn&&(ee=S)},bt=w.__private__.getNumberOfPages=w.getNumberOfPages=function(){return qe.length-1},Wi=function(S,$,de){var ge,Ee=void 0;return de=de||{},S=S!==void 0?S:rn[zt].fontName,$=$!==void 0?$:rn[zt].fontStyle,ge=S.toLowerCase(),Cn[ge]!==void 0&&Cn[ge][$]!==void 0?Ee=Cn[ge][$]:Cn[S]!==void 0&&Cn[S][$]!==void 0?Ee=Cn[S][$]:de.disableWarning===!1&&Dn.warn("Unable to look up font label for font '"+S+"', '"+$+"'. Refer to getFontList() for available fonts."),Ee||de.noFallback||(Ee=Cn.times[$])==null&&(Ee=Cn.times.normal),Ee},kr=w.__private__.putInfo=function(){var S=hn(),$=function(ge){return ge};for(var de in f!==null&&($=gn.encryptor(S,0)),pe("<<"),pe("/Producer ("+Ln($("jsPDF "+wt.version))+")"),St)St.hasOwnProperty(de)&&St[de]&&pe("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+Ln($(St[de]))+")");pe("/CreationDate ("+Ln($(_e))+")"),pe(">>"),pe("endobj")},$i=w.__private__.putCatalog=function(S){var $=(S=S||{}).rootDictionaryObjId||jr;switch(hn(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+$+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+et;de.substr(de.length-1)==="%"&&(et=parseInt(et)/100),typeof et=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+H(et)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}At&&pe("/PageMode /"+At),nn.publish("putCatalog"),pe(">>"),pe("endobj")},ba=w.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(he+1)),pe("/Root "+he+" 0 R"),pe("/Info "+(he-1)+" 0 R"),f!==null&&pe("/Encrypt "+gn.oid+" 0 R"),pe("/ID [ <"+le+"> <"+le+"> ]"),pe(">>")},Vo=w.__private__.putHeader=function(){pe("%PDF-"+N),pe("%")},Ca=w.__private__.putXRef=function(){var S="0000000000";pe("xref"),pe("0 "+(he+1)),pe("0000000000 65535 f ");for(var $=1;$<=he;$++)typeof Te[$]=="function"?pe((S+Te[$]()).slice(-10)+" 00000 n "):Te[$]!==void 0?pe((S+Te[$]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Lr=w.__private__.buildDocument=function(){mt(),De(be),nn.publish("buildDocument"),Vo(),No(),Wr(),Fo(),f!==null&&gs(),kr(),$i();var S=ke;return Ca(),ba(),pe("startxref"),pe(""+S),pe("%%EOF"),De(qe[ee]),be.join(`
`)},po=w.__private__.getBlob=function(S){return new Blob([ut(S)],{type:"application/pdf"})},Bo=w.output=w.__private__.output=Xt(function(S,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",S){case void 0:return Lr();case"save":w.save($.filename);break;case"arraybuffer":return ut(Lr());case"blob":return po(Lr());case"bloburi":case"bloburl":if(Nt.URL!==void 0&&typeof Nt.URL.createObjectURL=="function")return Nt.URL&&Nt.URL.createObjectURL(po(Lr()))||void 0;Dn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",ge=Lr();try{de=vv(ge)}catch{de=vv(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+$.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Nt)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Re=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Ee=$.pdfObjectUrl,Re="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+Re+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Qe=Nt.open();return Qe!==null&&Qe.document.write(Ue),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Nt)==="[object Window]"){var m='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',M=Nt.open();if(M!==null){M.document.write(m);var q=this;M.document.documentElement.querySelector("#pdfViewer").onload=function(){M.document.title=$.filename,M.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(q.output("bloburl"))}}return M}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Nt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',we=Nt.open();if(we!==null&&(we.document.write(te),we.document.title=$.filename),we||typeof safari>"u")return we;break;case"datauri":case"dataurl":return Nt.document.location.href=this.output("datauristring",$);default:return null}}),$r=function(S){return Array.isArray(Gr)===!0&&Gr.indexOf(S)>-1};switch(i){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=$r("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);it=i}var gn=null;xe(),W();var Ia=function(S){return f!==null?gn.encryptor(S,0):function($){return $}},_s=w.__private__.getPageInfo=w.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vt[S].objId,pageNumber:S,pageContext:vt[S]}},Ct=w.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in vt)if(vt[$].objId===S)break;return _s($)},_t=w.__private__.getCurrentPageInfo=w.getCurrentPageInfo=function(){return{objId:vt[ee].objId,pageNumber:ee,pageContext:vt[ee]}};w.addPage=function(){return ys.apply(this,arguments),this},w.setPage=function(){return Nr.apply(this,arguments),De.call(this,qe[ee]),this},w.insertPage=function(S){return this.addPage(),this.movePage(ee,S),this},w.movePage=function(S,$){var de,ge;if(S>$){de=qe[S],ge=vt[S];for(var Ee=S;Ee>$;Ee--)qe[Ee]=qe[Ee-1],vt[Ee]=vt[Ee-1];qe[$]=de,vt[$]=ge,this.setPage($)}else if(S<$){de=qe[S],ge=vt[S];for(var Re=S;Re<$;Re++)qe[Re]=qe[Re+1],vt[Re]=vt[Re+1];qe[$]=de,vt[$]=ge,this.setPage($)}return this},w.deletePage=function(){return fo.apply(this,arguments),this},w.__private__.text=w.text=function(S,$,de,ge,Ee){var Re,Ue,Qe,m,M,q,te,we,Ie,He=(ge=ge||{}).scope||this;if(typeof S=="number"&&typeof $=="number"&&(typeof de=="string"||Array.isArray(de))){var Mt=de;de=$,$=S,S=Mt}if(arguments[3]instanceof lt?(C("The transform parameter of text() with a Matrix value"),Ie=Ee):(Qe=arguments[4],m=arguments[5],En(te=arguments[3])==="object"&&te!==null||(typeof Qe=="string"&&(m=Qe,Qe=null),typeof te=="string"&&(m=te,te=null),typeof te=="number"&&(Qe=te,te=null),ge={flags:te,angle:Qe,align:m})),isNaN($)||isNaN(de)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return He;var Kt="",Dt=!1,Ht=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:fn,on=He.internal.scaleFactor;function vo(yn){return yn=yn.split("	").join(Array(ge.TabLen||9).join(" ")),Ln(yn,te)}function Rn(yn){for(var _n,Kn=yn.concat(),wn=[],Xo=Kn.length;Xo--;)typeof(_n=Kn.shift())=="string"?wn.push(_n):Array.isArray(yn)&&(_n.length===1||_n[1]===void 0&&_n[2]===void 0)?wn.push(_n[0]):wn.push([_n[0],_n[1],_n[2]]);return wn}function Jo(yn,_n){var Kn;if(typeof yn=="string")Kn=_n(yn)[0];else if(Array.isArray(yn)){for(var wn,Xo,sl=yn.concat(),es=[],Ou=sl.length;Ou--;)typeof(wn=sl.shift())=="string"?es.push(_n(wn)[0]):Array.isArray(wn)&&typeof wn[0]=="string"&&(Xo=_n(wn[0],wn[1],wn[2]),es.push([Xo[0],Xo[1],Xo[2]]));Kn=es}return Kn}var Yi=!1,Zl=!0;if(typeof S=="string")Yi=!0;else if(Array.isArray(S)){var As=S.concat();Ue=[];for(var Ra,ni=As.length;ni--;)(typeof(Ra=As.shift())!="string"||Array.isArray(Ra)&&typeof Ra[0]!="string")&&(Zl=!1);Yi=Zl}if(Yi===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var nl=Ye/He.internal.scaleFactor,Rr=nl*(Ht-1);switch(ge.baseline){case"bottom":de-=Rr;break;case"top":de+=nl-Rr;break;case"hanging":de+=nl-2*Rr;break;case"middle":de+=nl/2-Rr}if((q=ge.maxWidth||0)>0&&(typeof S=="string"?S=He.splitTextToSize(S,q):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(yn,_n){return yn.concat(He.splitTextToSize(_n,q))},[]))),Re={text:S,x:$,y:de,options:ge,mutex:{pdfEscape:Ln,activeFontKey:zt,fonts:rn,activeFontSize:Ye}},nn.publish("preProcessText",Re),S=Re.text,Qe=(ge=Re.options).angle,!(Ie instanceof lt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,ge.rotationDirection===0&&(Qe=-Qe),P===I.ADVANCED&&(Qe=-Qe);var bs=Math.cos(Qe),Ql=Math.sin(Qe);Ie=new lt(bs,Ql,-Ql,bs,0,0)}else Qe&&Qe instanceof lt&&(Ie=Qe);P!==I.ADVANCED||Ie||(Ie=Ri),(M=ge.charSpace||Ss)!==void 0&&(Kt+=D(b(M))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(we=ge.horizontalScale)!==void 0&&(Kt+=D(100*we)+` Tz
`),ge.lang;var Oi=-1,th=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,Mr=He.internal.getCurrentPageInfo().pageContext;switch(th){case 0:case!1:case"fill":Oi=0;break;case 1:case!0:case"stroke":Oi=1;break;case 2:case"fillThenStroke":Oi=2;break;case 3:case"invisible":Oi=3;break;case 4:case"fillAndAddForClipping":Oi=4;break;case 5:case"strokeAndAddPathForClipping":Oi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Oi=6;break;case 7:case"addToPathForClipping":Oi=7}var Fu=Mr.usedRenderingMode!==void 0?Mr.usedRenderingMode:-1;Oi!==-1?Kt+=Oi+` Tr
`:Fu!==-1&&(Kt+=`0 Tr
`),Oi!==-1&&(Mr.usedRenderingMode=Oi),m=ge.align||"left";var xi,il=Ye*Ht,Yr=He.internal.pageSize.getWidth(),Ma=rn[zt];M=ge.charSpace||Ss,q=ge.maxWidth||0,te=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var Cs=[],Is=function(yn){return He.getStringUnitWidth(yn,{font:Ma,charSpace:M,fontSize:Ye,doKerning:!1})*Ye/on};if(Object.prototype.toString.call(S)==="[object Array]"){var Si;Ue=Rn(S),m!=="left"&&(xi=Ue.map(Is));var Ti,yo=0;if(m==="right"){$-=xi[0],S=[],ni=Ue.length;for(var fr=0;fr<ni;fr++)fr===0?(Ti=On($),Si=Vn(de)):(Ti=b(yo-xi[fr]),Si=-il),S.push([Ue[fr],Ti,Si]),yo=xi[fr]}else if(m==="center"){$-=xi[0]/2,S=[],ni=Ue.length;for(var Zr=0;Zr<ni;Zr++)Zr===0?(Ti=On($),Si=Vn(de)):(Ti=b((yo-xi[Zr])/2),Si=-il),S.push([Ue[Zr],Ti,Si]),yo=xi[Zr]}else if(m==="left"){S=[],ni=Ue.length;for(var na=0;na<ni;na++)S.push(Ue[na])}else if(m==="justify"&&Ma.encoding==="Identity-H"){S=[],ni=Ue.length,q=q!==0?q:Yr;for(var Yo=0,$n=0;$n<ni;$n++)if(Si=$n===0?Vn(de):-il,Ti=$n===0?On($):Yo,$n<ni-1){var ia=b((q-xi[$n])/(Ue[$n].split(" ").length-1)),Zi=Ue[$n].split(" ");S.push([Zi[0]+" ",Ti,Si]),Yo=0;for(var Dr=1;Dr<Zi.length;Dr++){var rl=(Is(Zi[Dr-1]+" "+Zi[Dr])-Is(Zi[Dr]))*on+ia;Dr==Zi.length-1?S.push([Zi[Dr],rl,0]):S.push([Zi[Dr]+" ",rl,0]),Yo-=rl}}else S.push([Ue[$n],Ti,Si]);S.push(["",Yo,0])}else{if(m!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],ni=Ue.length,q=q!==0?q:Yr,$n=0;$n<ni;$n++)Si=$n===0?Vn(de):-il,Ti=$n===0?On($):0,$n<ni-1?Cs.push(D(b((q-xi[$n])/(Ue[$n].split(" ").length-1)))):Cs.push(0),S.push([Ue[$n],Ti,Si])}}var Xl=typeof ge.R2L=="boolean"?ge.R2L:ft;Xl===!0&&(S=Jo(S,function(yn,_n,Kn){return[yn.split("").reverse().join(""),_n,Kn]})),Re={text:S,x:$,y:de,options:ge,mutex:{pdfEscape:Ln,activeFontKey:zt,fonts:rn,activeFontSize:Ye}},nn.publish("postProcessText",Re),S=Re.text,Dt=Re.mutex.isHex||!1;var eu=rn[zt].encoding;eu!=="WinAnsiEncoding"&&eu!=="StandardEncoding"||(S=Jo(S,function(yn,_n,Kn){return[vo(yn),_n,Kn]})),Ue=Rn(S),S=[];for(var Vi,Zo,ra,Qo=0,ol=1,oa=Array.isArray(Ue[0])?ol:Qo,sa="",Ps=function(yn,_n,Kn){var wn="";return Kn instanceof lt?(Kn=typeof ge.angle=="number"?ur(Kn,new lt(1,0,0,1,yn,_n)):ur(new lt(1,0,0,1,yn,_n),Kn),P===I.ADVANCED&&(Kn=ur(new lt(1,0,0,-1,0,0),Kn)),wn=Kn.join(" ")+` Tm
`):wn=D(yn)+" "+D(_n)+` Td
`,wn},Qr=0;Qr<Ue.length;Qr++){switch(sa="",oa){case ol:ra=(Dt?"<":"(")+Ue[Qr][0]+(Dt?">":")"),Vi=parseFloat(Ue[Qr][1]),Zo=parseFloat(Ue[Qr][2]);break;case Qo:ra=(Dt?"<":"(")+Ue[Qr]+(Dt?">":")"),Vi=On($),Zo=Vn(de)}Cs!==void 0&&Cs[Qr]!==void 0&&(sa=Cs[Qr]+` Tw
`),Qr===0?S.push(sa+Ps(Vi,Zo,Ie)+ra):oa===Qo?S.push(sa+ra):oa===ol&&S.push(sa+Ps(Vi,Zo,Ie)+ra)}S=oa===Qo?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ei=`BT
/`;return Ei+=zt+" "+Ye+` Tf
`,Ei+=D(Ye*Ht)+` TL
`,Ei+=Jr+`
`,Ei+=Kt,Ei+=S,pe(Ei+="ET"),y[zt]=!0,He};var cr=w.__private__.clip=w.clip=function(S){return pe(S==="evenodd"?"W*":"W"),this};w.clipEvenOdd=function(){return cr("evenodd")},w.__private__.discardPath=w.discardPath=function(){return pe("n"),this};var $t=w.__private__.isValidStyle=function(S){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&($=!0),$};w.__private__.setDefaultPathOperation=w.setDefaultPathOperation=function(S){return $t(S)&&(c=S),this};var Pa=w.__private__.getStyle=w.getStyle=function(S){var $=c;switch(S){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=S}return $},Ki=w.close=function(){return pe("h"),this};w.stroke=function(){return pe("S"),this},w.fill=function(S){return Uo("f",S),this},w.fillEvenOdd=function(S){return Uo("f*",S),this},w.fillStroke=function(S){return Uo("B",S),this},w.fillStrokeEvenOdd=function(S){return Uo("B*",S),this};var Uo=function(S,$){En($)==="object"?zo($,S):pe(S)},ws=function(S){S===null||P===I.ADVANCED&&S===void 0||(S=Pa(S),pe(S))};function hr(S,$,de,ge,Ee){var Re=new pu($||this.boundingBox,de||this.xStep,ge||this.yStep,this.gState,Ee||this.matrix);Re.stream=this.stream;var Ue=S+"$$"+this.cloneIndex+++"$$";return ei(Ue,Re),Re}var zo=function(S,$){var de=Po[S.key],ge=Qt[de];if(ge instanceof xl)pe("q"),pe(qo($)),ge.gState&&w.setGState(ge.gState),pe(S.matrix.toString()+" cm"),pe("/"+de+" sh"),pe("Q");else if(ge instanceof pu){var Ee=new lt(1,0,0,-1,0,Fi());S.matrix&&(Ee=Ee.multiply(S.matrix||Ri),de=hr.call(ge,S.key,S.boundingBox,S.xStep,S.yStep,Ee).id),pe("q"),pe("/Pattern cs"),pe("/"+de+" scn"),ge.gState&&w.setGState(ge.gState),pe($),pe("Q")}},qo=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vn=w.moveTo=function(S,$){return pe(D(b(S))+" "+D(ie($))+" m"),this},si=w.lineTo=function(S,$){return pe(D(b(S))+" "+D(ie($))+" l"),this},Kr=w.curveTo=function(S,$,de,ge,Ee,Re){return pe([D(b(S)),D(ie($)),D(b(de)),D(ie(ge)),D(b(Ee)),D(ie(Re)),"c"].join(" ")),this};w.__private__.line=w.line=function(S,$,de,ge,Ee){if(isNaN(S)||isNaN($)||isNaN(de)||isNaN(ge)||!$t(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return P===I.COMPAT?this.lines([[de-S,ge-$]],S,$,[1,1],Ee||"S"):this.lines([[de-S,ge-$]],S,$,[1,1]).stroke()},w.__private__.lines=w.lines=function(S,$,de,ge,Ee,Re){var Ue,Qe,m,M,q,te,we,Ie,He,Mt,Kt,Dt;if(typeof S=="number"&&(Dt=de,de=$,$=S,S=Dt),ge=ge||[1,1],Re=Re||!1,isNaN($)||isNaN(de)||!Array.isArray(S)||!Array.isArray(ge)||!$t(Ee)||typeof Re!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vn($,de),Ue=ge[0],Qe=ge[1],M=S.length,Mt=$,Kt=de,m=0;m<M;m++)(q=S[m]).length===2?(Mt=q[0]*Ue+Mt,Kt=q[1]*Qe+Kt,si(Mt,Kt)):(te=q[0]*Ue+Mt,we=q[1]*Qe+Kt,Ie=q[2]*Ue+Mt,He=q[3]*Qe+Kt,Mt=q[4]*Ue+Mt,Kt=q[5]*Qe+Kt,Kr(te,we,Ie,He,Mt,Kt));return Re&&Ki(),ws(Ee),this},w.path=function(S){for(var $=0;$<S.length;$++){var de=S[$],ge=de.c;switch(de.op){case"m":vn(ge[0],ge[1]);break;case"l":si(ge[0],ge[1]);break;case"c":Kr.apply(this,ge);break;case"h":Ki()}}return this},w.__private__.rect=w.rect=function(S,$,de,ge,Ee){if(isNaN(S)||isNaN($)||isNaN(de)||isNaN(ge)||!$t(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return P===I.COMPAT&&(ge=-ge),pe([D(b(S)),D(ie($)),D(b(de)),D(b(ge)),"re"].join(" ")),ws(Ee),this},w.__private__.triangle=w.triangle=function(S,$,de,ge,Ee,Re,Ue){if(isNaN(S)||isNaN($)||isNaN(de)||isNaN(ge)||isNaN(Ee)||isNaN(Re)||!$t(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-S,ge-$],[Ee-de,Re-ge],[S-Ee,$-Re]],S,$,[1,1],Ue,!0),this},w.__private__.roundedRect=w.roundedRect=function(S,$,de,ge,Ee,Re,Ue){if(isNaN(S)||isNaN($)||isNaN(de)||isNaN(ge)||isNaN(Ee)||isNaN(Re)||!$t(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*de),Re=Math.min(Re,.5*ge),this.lines([[de-2*Ee,0],[Ee*Qe,0,Ee,Re-Re*Qe,Ee,Re],[0,ge-2*Re],[0,Re*Qe,-Ee*Qe,Re,-Ee,Re],[2*Ee-de,0],[-Ee*Qe,0,-Ee,-Re*Qe,-Ee,-Re],[0,2*Re-ge],[0,-Re*Qe,Ee*Qe,-Re,Ee,-Re]],S+Ee,$,[1,1],Ue,!0),this},w.__private__.ellipse=w.ellipse=function(S,$,de,ge,Ee){if(isNaN(S)||isNaN($)||isNaN(de)||isNaN(ge)||!$t(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Re=4/3*(Math.SQRT2-1)*de,Ue=4/3*(Math.SQRT2-1)*ge;return vn(S+de,$),Kr(S+de,$-Ue,S+Re,$-ge,S,$-ge),Kr(S-Re,$-ge,S-de,$-Ue,S-de,$),Kr(S-de,$+Ue,S-Re,$+ge,S,$+ge),Kr(S+Re,$+ge,S+de,$+Ue,S+de,$),ws(Ee),this},w.__private__.circle=w.circle=function(S,$,de,ge){if(isNaN(S)||isNaN($)||isNaN(de)||!$t(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,$,de,de,ge)},w.setFont=function(S,$,de){return de&&($=Q($,de)),zt=Wi(S,$,{disableWarning:!1}),this};var Js=w.__private__.getFont=w.getFont=function(){return rn[Wi.apply(w,arguments)]};w.__private__.getFontList=w.getFontList=function(){var S,$,de={};for(S in Cn)if(Cn.hasOwnProperty(S))for($ in de[S]=[],Cn[S])Cn[S].hasOwnProperty($)&&de[S].push($);return de},w.addFont=function(S,$,de,ge,Ee){var Re=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Re.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&Re.indexOf(arguments[3])==-1&&(de=Q(de,ge)),Ee=Ee||"Identity-H",vs.call(this,S,$,de,Ee)};var fn,Ys=t.lineWidth||.200025,Ho=w.__private__.getLineWidth=w.getLineWidth=function(){return Ys},Na=w.__private__.setLineWidth=w.setLineWidth=function(S){return Ys=S,pe(D(b(S))+" w"),this};w.__private__.setLineDash=wt.API.setLineDash=wt.API.setLineDashPattern=function(S,$){if(S=S||[],$=$||0,isNaN($)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(de){return D(b(de))}).join(" "),$=D(b($)),pe("["+S+"] "+$+" d"),this};var Zs=w.__private__.getLineHeight=w.getLineHeight=function(){return Ye*fn};w.__private__.getLineHeight=w.getLineHeight=function(){return Ye*fn};var qt=w.__private__.setLineHeightFactor=w.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(fn=S),this},xs=w.__private__.getLineHeightFactor=w.getLineHeightFactor=function(){return fn};qt(t.lineHeight);var On=w.__private__.getHorizontalCoordinate=function(S){return b(S)},Vn=w.__private__.getVerticalCoordinate=function(S){return P===I.ADVANCED?S:vt[ee].mediaBox.topRightY-vt[ee].mediaBox.bottomLeftY-b(S)},ka=w.__private__.getHorizontalCoordinateString=w.getHorizontalCoordinateString=function(S){return D(On(S))},Go=w.__private__.getVerticalCoordinateString=w.getVerticalCoordinateString=function(S){return D(Vn(S))},ai=t.strokeColor||"0 G";w.__private__.getStrokeColor=w.getDrawColor=function(){return Mi(ai)},w.__private__.setStrokeColor=w.setDrawColor=function(S,$,de,ge){return ai=Di({ch1:S,ch2:$,ch3:de,ch4:ge,pdfColorType:"draw",precision:2}),pe(ai),this};var Qs=t.fillColor||"0 g";w.__private__.getFillColor=w.getFillColor=function(){return Mi(Qs)},w.__private__.setFillColor=w.setFillColor=function(S,$,de,ge){return Qs=Di({ch1:S,ch2:$,ch3:de,ch4:ge,pdfColorType:"fill",precision:2}),pe(Qs),this};var Jr=t.textColor||"0 g",Xs=w.__private__.getTextColor=w.getTextColor=function(){return Mi(Jr)};w.__private__.setTextColor=w.setTextColor=function(S,$,de,ge){return Jr=Di({ch1:S,ch2:$,ch3:de,ch4:ge,pdfColorType:"text",precision:3}),this};var Ss=t.charSpace,jo=w.__private__.getCharSpace=w.getCharSpace=function(){return parseFloat(Ss||0)};w.__private__.setCharSpace=w.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ss=S,this};var La=0;w.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},w.__private__.setLineCap=w.setLineCap=function(S){var $=w.CapJoinStyles[S];if($===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return La=$,pe($+" J"),this};var wi=0;w.__private__.setLineJoin=w.setLineJoin=function(S){var $=w.CapJoinStyles[S];if($===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wi=$,pe($+" j"),this},w.__private__.setLineMiterLimit=w.__private__.setMiterLimit=w.setLineMiterLimit=w.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(D(b(S))+" M"),this},w.GState=Af,w.setGState=function(S){(S=typeof S=="string"?In[pi[S]]:Wo(null,S)).equals(lr)||(pe("/"+S.id+" gs"),lr=S)};var Wo=function(S,$){if(!S||!pi[S]){var de=!1;for(var ge in In)if(In.hasOwnProperty(ge)&&In[ge].equals($)){de=!0;break}if(de)$=In[ge];else{var Ee="GS"+(Object.keys(In).length+1).toString(10);In[Ee]=$,$.id=Ee}return S&&(pi[S]=$.id),nn.publish("addGState",$),$}};w.addGState=function(S,$){return Wo(S,$),this},w.saveGraphicsState=function(){return pe("q"),ki.push({key:zt,size:Ye,color:Jr}),this},w.restoreGraphicsState=function(){pe("Q");var S=ki.pop();return zt=S.key,Ye=S.size,Jr=S.color,lr=null,this},w.setCurrentTransformationMatrix=function(S){return pe(S.toString()+" cm"),this},w.comment=function(S){return pe("#"+S),this};var $o=function(S,$){var de=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Re){isNaN(Re)||(de=parseFloat(Re))}});var ge=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Re){isNaN(Re)||(ge=parseFloat(Re))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(Re){Ee=Re.toString()}}),this},Ji=function(S,$,de,ge){$o.call(this,S,$),this.type="rect";var Ee=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(Ue){isNaN(Ue)||(Ee=parseFloat(Ue))}});var Re=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Re},set:function(Ue){isNaN(Ue)||(Re=parseFloat(Ue))}}),this},Ko=function(){this.page=Pn,this.currentPage=ee,this.pages=qe.slice(0),this.pagesContext=vt.slice(0),this.x=qn,this.y=Jt,this.matrix=Ni,this.width=go(ee),this.height=Fi(ee),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Ko.prototype.restore=function(){Pn=this.page,ee=this.currentPage,vt=this.pagesContext,qe=this.pages,qn=this.x,Jt=this.y,Ni=this.matrix,Es(ee,this.width),ta(ee,this.height),Ze=this.outputDestination};var Ts=function(S,$,de,ge,Ee){ji.push(new Ko),Pn=ee=0,qe=[],qn=S,Jt=$,Ni=Ee,Nn([de,ge])},ea=function(S){if(Li[S])ji.pop().restore();else{var $=new Ko,de="Xo"+(Object.keys(Xn).length+1).toString(10);$.id=de,Li[S]=de,Xn[de]=$,nn.publish("addFormObject",$),ji.pop().restore()}};for(var mo in w.beginFormObject=function(S,$,de,ge,Ee){return Ts(S,$,de,ge,Ee),this},w.endFormObject=function(S){return ea(S),this},w.doFormObject=function(S,$){var de=Xn[Li[S]];return pe("q"),pe($.toString()+" cm"),pe("/"+de.id+" Do"),pe("Q"),this},w.getFormObject=function(S){var $=Xn[Li[S]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},w.save=function(S,$){return S=S||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(uu(po(Lr()),S),typeof uu.unload=="function"&&Nt.setTimeout&&setTimeout(uu.unload,911),this):new Promise(function(de,ge){try{var Ee=uu(po(Lr()),S);typeof uu.unload=="function"&&Nt.setTimeout&&setTimeout(uu.unload,911),de(Ee)}catch(Re){ge(Re.message)}})},wt.API)wt.API.hasOwnProperty(mo)&&(mo==="events"&&wt.API.events.length?function(S,$){var de,ge,Ee;for(Ee=$.length-1;Ee!==-1;Ee--)de=$[Ee][0],ge=$[Ee][1],S.subscribe.apply(S,[de].concat(typeof ge=="function"?[ge]:ge))}(nn,wt.API.events):w[mo]=wt.API[mo]);var go=w.getPageWidth=function(S){return(vt[S=S||ee].mediaBox.topRightX-vt[S].mediaBox.bottomLeftX)/it},Es=w.setPageWidth=function(S,$){vt[S].mediaBox.topRightX=$*it+vt[S].mediaBox.bottomLeftX},Fi=w.getPageHeight=function(S){return(vt[S=S||ee].mediaBox.topRightY-vt[S].mediaBox.bottomLeftY)/it},ta=w.setPageHeight=function(S,$){vt[S].mediaBox.topRightY=$*it+vt[S].mediaBox.bottomLeftY};return w.internal={pdfEscape:Ln,getStyle:Pa,getFont:Js,getFontSize:Xe,getCharSpace:jo,getTextColor:Xs,getLineHeight:Zs,getLineHeightFactor:xs,getLineWidth:Ho,write:It,getHorizontalCoordinate:On,getVerticalCoordinate:Vn,getCoordinateString:ka,getVerticalCoordinateString:Go,collections:{},newObject:hn,newAdditionalObject:ds,newObjectDeferred:tt,newObjectDeferredBegin:Wn,getFilters:ti,putStream:Hn,events:nn,scaleFactor:it,pageSize:{getWidth:function(){return go(ee)},setWidth:function(S){Es(ee,S)},getHeight:function(){return Fi(ee)},setHeight:function(S){ta(ee,S)}},encryptionOptions:f,encryption:gn,getEncryptor:Ia,output:Bo,getNumberOfPages:bt,pages:qe,out:pe,f2:H,f3:k,getPageInfo:_s,getPageInfoByObjId:Ct,getCurrentPageInfo:_t,getPDFVersion:R,Point:$o,Rectangle:Ji,Matrix:lt,hasHotfix:$r},Object.defineProperty(w.internal.pageSize,"width",{get:function(){return go(ee)},set:function(S){Es(ee,S)},enumerable:!0,configurable:!0}),Object.defineProperty(w.internal.pageSize,"height",{get:function(){return Fi(ee)},set:function(S){ta(ee,S)},enumerable:!0,configurable:!0}),Lt.call(w,We),zt="F1",ys(r,n),nn.publish("initialized"),w}tc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},tc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},tc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},tc.prototype.processOwnerPassword=function(t,e){return _v(yv(e).substr(0,5),t)},tc.prototype.encryptor=function(t,e){var n=yv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return _v(n,i)}},Af.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||En(t)!==En(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},wt.API={events:[]},wt.version="2.5.2";var ri=wt.API,u_=1,Du=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ju=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vt=function(t){return t.toFixed(2)},gl=function(t){return t.toFixed(5)};ri.__acroform__={};var lo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ww=function(t){return t*u_},ha=function(t){var e=new RA,n=ht.internal.getHeight(t)||0,i=ht.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Vt(i)),Number(Vt(n))],e},FF=ri.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},OF=ri.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},VF=ri.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},hi=ri.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return VF(t,e-1)},fi=ri.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return FF(t,e-1)},di=ri.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return OF(t,e-1)},BF=ri.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],o=t[1],s=t[2],l=t[3],u={};return u.lowerLeft_X=n(r)||0,u.lowerLeft_Y=i(o+l)||0,u.upperRight_X=n(r+s)||0,u.upperRight_Y=i(o)||0,[Number(Vt(u.lowerLeft_X)),Number(Vt(u.lowerLeft_Y)),Number(Vt(u.upperRight_X)),Number(Vt(u.upperRight_Y))]},UF=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=wv(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+Vt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=ha(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},wv=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map(function(k){return k.split(`
`)}):r.map(function(k){return[k]});var o=n,s=ht.internal.getHeight(t)||0;s=s<0?-s:s;var l=ht.internal.getWidth(t)||0;l=l<0?-l:l;var u=function(k,b,V){if(k+1<r.length){var ie=b+" "+r[k+1][0];return Id(ie,t,V).width<=l-4}return!1};o++;e:for(;o>0;){e="",o--;var c,f,g=Id("3",t,o).height,y=t.multiline?s-o:(s-g)/2,w=y+=2,N=0,R=0,F=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Id(e,t,o=12).width+", FieldWidth:"+l+`
`;break}for(var T="",I=0,P=0;P<r.length;P++)if(r.hasOwnProperty(P)){var G=!1;if(r[P].length!==1&&F!==r[P].length-1){if((g+2)*(I+2)+2>s)continue e;T+=r[P][F],G=!0,R=P,P--}else{T=(T+=r[P][F]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var J=parseInt(P),Q=u(J,T,o),D=P>=r.length-1;if(Q&&!D){T+=" ",F=0;continue}if(Q||D){if(D)R=J;else if(t.multiline&&(g+2)*(I+2)+2>s)continue e}else{if(!t.multiline||(g+2)*(I+2)+2>s)continue e;R=J}}for(var C="",O=N;O<=R;O++){var H=r[O];if(t.multiline){if(O===R){C+=H[F]+" ",F=(F+1)%H.length;continue}if(O===N){C+=H[H.length-1]+" ";continue}}C+=H[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,f=Id(C,t,o).width,t.textAlign){case"right":c=l-f-2;break;case"center":c=(l-f)/2;break;case"left":default:c=2}e+=Vt(c)+" "+Vt(w)+` Td
`,e+="("+Du(C)+`) Tj
`,e+=-Vt(c)+` 0 Td
`,w=-(o+2),f=0,N=G?R:R+1,I++,T=""}break}return i.text=e,i.fontSize=o,i},Id=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},zF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},qF=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},HF=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,r=t[n];e.internal.newObjectDeferredBegin(r.objId,!0),En(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete t[i]}},GF=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(js.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(zF)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");u_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new MA,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];o.objId=void 0,o.hasAnnotation&&qF(o,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,r){var o=!i;for(var s in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(s)){var l=i[s],u=[],c=l.Rect;if(l.Rect&&(l.Rect=BF(l.Rect,r)),r.internal.newObjectDeferredBegin(l.objId,!0),l.DA=ht.createDefaultAppearanceStream(l),En(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=c,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=UF(l);u.push({key:"AP",value:"<</N "+f+">>"}),r.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var g="";for(var y in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(y)){var w=l.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(w).length>=1||Array.isArray(w)){for(var s in w)if(w.hasOwnProperty(s)){var N=w[s];typeof N=="function"&&(N=N.call(r,l)),g+="/"+s+" "+N+" ",r.internal.acroformPlugin.xForms.indexOf(N)>=0||r.internal.acroformPlugin.xForms.push(N)}}else typeof(N=w)=="function"&&(N=N.call(r,l)),g+="/"+s+" "+N,r.internal.acroformPlugin.xForms.indexOf(N)>=0||r.internal.acroformPlugin.xForms.push(N);g+=">>"}u.push({key:"AP",value:`<<
`+g+">>"})}r.internal.putStream({additionalKeyValues:u,objectId:l.objId}),r.internal.out("endobj")}o&&HF(r.internal.acroformPlugin.xForms,r)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},LA=ri.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(s){return s};if(Array.isArray(t)){for(var r="[",o=0;o<t.length;o++)switch(o!==0&&(r+=" "),En(t[o])){case"boolean":case"number":case"object":r+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),r+="("+Du(i(t[o].toString()))+")"):r+=t[o].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pg=function(t,e,n){var i=function(r){return r};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Du(i(t))+")"},ma=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ma.prototype.toString=function(){return this.objId+" 0 R"},ma.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ma.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:LA(r,this.objId,this.scope)}):r instanceof ma?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&t.push({key:i,value:r}))}return t};var RA=function(){ma.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};lo(RA,ma);var MA=function(){ma.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Du(n(t))+")"}},set:function(n){t=n}})};lo(MA,ma);var js=function t(){ma.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!hi(e,3)},set:function(T){T?this.F=fi(e,3):this.F=di(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');n=T}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(T){i=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(T){i[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(T){i[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(T){i[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(T){i[3]=T}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Up)return;o="FieldObject"+t.FieldNum++}var T=function(I){return I};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Du(T(o))+")"},set:function(T){o=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(T){o=T}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(T){s=T}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/u_:c},set:function(T){c=T}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(T){f=T}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Up||this instanceof Bl))return Pg(g,this.objId,this.scope)},set:function(T){T=T.toString(),g=T}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof bi?y:Pg(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=this instanceof bi?T:T.substr(0,1)==="("?Ju(T.substr(1,T.length-2)):Ju(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi?Ju(y.substr(1,y.length-1)):y},set:function(T){T=T.toString(),y=this instanceof bi?"/"+T:T}});var w=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(w)return w},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof bi?w:Pg(w,this.objId,this.scope)},set:function(T){T=T.toString(),w=this instanceof bi?T:T.substr(0,1)==="("?Ju(T.substr(1,T.length-2)):Ju(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi?Ju(w.substr(1,w.length-1)):w},set:function(T){T=T.toString(),w=this instanceof bi?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(T){T=!!T,R=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(T){N=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,1)},set:function(T){T?this.Ff=fi(this.Ff,1):this.Ff=di(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,2)},set:function(T){T?this.Ff=fi(this.Ff,2):this.Ff=di(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,3)},set:function(T){T?this.Ff=fi(this.Ff,3):this.Ff=di(this.Ff,3)}});var F=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(F!==null)return F},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');F=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(F){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:F=2;break;case"center":case 1:F=1;break;case"left":case 0:default:F=0}}})};lo(js,ma);var yu=function(){js.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return LA(e,this.objId,this.scope)},set:function(n){var i,r;r=[],typeof(i=n)=="string"&&(r=function(o,s,l){l||(l=1);for(var u,c=[];u=s.exec(o);)c.push(u[l]);return c}(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,18)},set:function(n){n?this.Ff=fi(this.Ff,18):this.Ff=di(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=fi(this.Ff,19):this.Ff=di(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,20)},set:function(n){n?(this.Ff=fi(this.Ff,20),e.sort()):this.Ff=di(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,22)},set:function(n){n?this.Ff=fi(this.Ff,22):this.Ff=di(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,23)},set:function(n){n?this.Ff=fi(this.Ff,23):this.Ff=di(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,27)},set:function(n){n?this.Ff=fi(this.Ff,27):this.Ff=di(this.Ff,27)}}),this.hasAppearanceStream=!1};lo(yu,js);var _u=function(){yu.call(this),this.fontName="helvetica",this.combo=!1};lo(_u,yu);var wu=function(){_u.call(this),this.combo=!0};lo(wu,_u);var jh=function(){wu.call(this),this.edit=!0};lo(jh,wu);var bi=function(){js.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,15)},set:function(n){n?this.Ff=fi(this.Ff,15):this.Ff=di(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,16)},set:function(n){n?this.Ff=fi(this.Ff,16):this.Ff=di(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,17)},set:function(n){n?this.Ff=fi(this.Ff,17):this.Ff=di(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,26)},set:function(n){n?this.Ff=fi(this.Ff,26):this.Ff=di(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+Du(n(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){En(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};lo(bi,js);var Wh=function(){bi.call(this),this.pushButton=!0};lo(Wh,bi);var xu=function(){bi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};lo(xu,bi);var Up=function(){var t,e;js.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),i)s.push("/"+o+" ("+Du(r(i[o]))+")");return s.push(">>"),s.join(`
`)},set:function(r){En(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lo(Up,js),xu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},xu.prototype.createOption=function(t){var e=new Up;return e.Parent=this,e.optionName=t,this.Kids.push(e),jF.call(this.scope,e),e};var $h=function(){bi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ht.CheckBox.createAppearanceStream()};lo($h,bi);var Bl=function(){js.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,13)},set:function(e){e?this.Ff=fi(this.Ff,13):this.Ff=di(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,21)},set:function(e){e?this.Ff=fi(this.Ff,21):this.Ff=di(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,23)},set:function(e){e?this.Ff=fi(this.Ff,23):this.Ff=di(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,24)},set:function(e){e?this.Ff=fi(this.Ff,24):this.Ff=di(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,25)},set:function(e){e?this.Ff=fi(this.Ff,25):this.Ff=di(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,26)},set:function(e){e?this.Ff=fi(this.Ff,26):this.Ff=di(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lo(Bl,js);var Kh=function(){Bl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!hi(this.Ff,14)},set:function(t){t?this.Ff=fi(this.Ff,14):this.Ff=di(this.Ff,14)}}),this.password=!0};lo(Kh,Bl);var ht={CheckBox:{createAppearanceStream:function(){return{N:{On:ht.CheckBox.YesNormal},D:{On:ht.CheckBox.YesPushDown,Off:ht.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ha(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=wv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Vt(ht.internal.getWidth(t))+" "+Vt(ht.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Vt(o.fontSize)+" Tf "+r),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=ha(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],o=ht.internal.getHeight(t),s=ht.internal.getWidth(t),l=wv(t,t.caption);return r.push("1 g"),r.push("0 0 "+Vt(s)+" "+Vt(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Vt(s-1)+" "+Vt(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Vt(l.fontSize)+" Tf "+i),r.push(l.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ha(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(ht.internal.getWidth(t))+" "+Vt(ht.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ht.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ht.RadioButton.Circle.YesNormal,e.D[t]=ht.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ha(t);e.scope=t.scope;var n=[],i=ht.internal.getWidth(t)<=ht.internal.getHeight(t)?ht.internal.getWidth(t)/4:ht.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=ht.internal.Bezier_C,o=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+gl(ht.internal.getWidth(t)/2)+" "+gl(ht.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ha(t);e.scope=t.scope;var n=[],i=ht.internal.getWidth(t)<=ht.internal.getHeight(t)?ht.internal.getWidth(t)/4:ht.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*ht.internal.Bezier_C).toFixed(5)),s=Number((i*ht.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+gl(ht.internal.getWidth(t)/2)+" "+gl(ht.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+gl(ht.internal.getWidth(t)/2)+" "+gl(ht.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ha(t);e.scope=t.scope;var n=[],i=ht.internal.getWidth(t)<=ht.internal.getHeight(t)?ht.internal.getWidth(t)/4:ht.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*ht.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+gl(ht.internal.getWidth(t)/2)+" "+gl(ht.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ht.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ht.RadioButton.Cross.YesNormal,e.D[t]=ht.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ha(t);e.scope=t.scope;var n=[],i=ht.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Vt(ht.internal.getWidth(t)-2)+" "+Vt(ht.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Vt(i.x1.x)+" "+Vt(i.x1.y)+" m"),n.push(Vt(i.x2.x)+" "+Vt(i.x2.y)+" l"),n.push(Vt(i.x4.x)+" "+Vt(i.x4.y)+" m"),n.push(Vt(i.x3.x)+" "+Vt(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ha(t);e.scope=t.scope;var n=ht.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Vt(ht.internal.getWidth(t))+" "+Vt(ht.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Vt(ht.internal.getWidth(t)-2)+" "+Vt(ht.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Vt(n.x1.x)+" "+Vt(n.x1.y)+" m"),i.push(Vt(n.x2.x)+" "+Vt(n.x2.y)+" l"),i.push(Vt(n.x4.x)+" "+Vt(n.x4.y)+" m"),i.push(Vt(n.x3.x)+" "+Vt(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=ha(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(ht.internal.getWidth(t))+" "+Vt(ht.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ht.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ht.internal.getWidth(t),n=ht.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},ht.internal.getWidth=function(t){var e=0;return En(t)==="object"&&(e=ww(t.Rect[2])),e},ht.internal.getHeight=function(t){var e=0;return En(t)==="object"&&(e=ww(t.Rect[3])),e};var jF=ri.addField=function(t){if(GF(this,t),!(t instanceof js))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ri.AcroFormChoiceField=yu,ri.AcroFormListBox=_u,ri.AcroFormComboBox=wu,ri.AcroFormEditBox=jh,ri.AcroFormButton=bi,ri.AcroFormPushButton=Wh,ri.AcroFormRadioButton=xu,ri.AcroFormCheckBox=$h,ri.AcroFormTextField=Bl,ri.AcroFormPasswordField=Kh,ri.AcroFormAppearance=ht,ri.AcroForm={ChoiceField:yu,ListBox:_u,ComboBox:wu,EditBox:jh,Button:bi,PushButton:Wh,RadioButton:xu,CheckBox:$h,TextField:Bl,PasswordField:Kh,Appearance:ht},wt.AcroForm={ChoiceField:yu,ListBox:_u,ComboBox:wu,EditBox:jh,Button:bi,PushButton:Wh,RadioButton:xu,CheckBox:$h,TextField:Bl,PasswordField:Kh,Appearance:ht};var WF=wt.AcroForm;function DA(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(k,b){var V,ie,_e,le,se,W=e;if((b=b||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(Q(k))for(se in n)for(_e=n[se],V=0;V<_e.length;V+=1){for(le=!0,ie=0;ie<_e[V].length;ie+=1)if(_e[V][ie]!==void 0&&_e[V][ie]!==k[ie]){le=!1;break}if(le===!0){W=se;break}}else for(se in n)for(_e=n[se],V=0;V<_e.length;V+=1){for(le=!0,ie=0;ie<_e[V].length;ie+=1)if(_e[V][ie]!==void 0&&_e[V][ie]!==k.charCodeAt(ie)){le=!1;break}if(le===!0){W=se;break}}return W===e&&b!==e&&(W=b),W},r=function k(b){for(var V=this.internal.write,ie=this.internal.putStream,_e=(0,this.internal.getFilters)();_e.indexOf("FlateEncode")!==-1;)_e.splice(_e.indexOf("FlateEncode"),1);b.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:b.width}),le.push({key:"Height",value:b.height}),b.colorSpace===F.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(b.palette.length/3-1)+" "+("sMask"in b&&b.sMask!==void 0?b.objectId+2:b.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+b.colorSpace}),b.colorSpace===F.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:b.bitsPerComponent}),"decodeParameters"in b&&b.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+b.decodeParameters+">>"}),"transparency"in b&&Array.isArray(b.transparency)){for(var se="",W=0,oe=b.transparency.length;W<oe;W++)se+=b.transparency[W]+" "+b.transparency[W]+" ";le.push({key:"Mask",value:"["+se+"]"})}b.sMask!==void 0&&le.push({key:"SMask",value:b.objectId+1+" 0 R"});var fe=b.filter!==void 0?["/"+b.filter]:void 0;if(ie({data:b.data,additionalKeyValues:le,alreadyAppliedFilters:fe,objectId:b.objectId}),V("endobj"),"sMask"in b&&b.sMask!==void 0){var xe="/Predictor "+b.predictor+" /Colors 1 /BitsPerComponent "+b.bitsPerComponent+" /Columns "+b.width,j={width:b.width,height:b.height,colorSpace:"DeviceGray",bitsPerComponent:b.bitsPerComponent,decodeParameters:xe,data:b.sMask};"filter"in b&&(j.filter=b.filter),k.call(this,j)}if(b.colorSpace===F.INDEXED){var ee=this.internal.newObject();ie({data:C(new Uint8Array(b.palette)),objectId:ee}),V("endobj")}},o=function(){var k=this.internal.collections.addImage_images;for(var b in k)r.call(this,k[b])},s=function(){var k,b=this.internal.collections.addImage_images,V=this.internal.write;for(var ie in b)V("/I"+(k=b[ie]).index,k.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},u=function(){var k=this.internal.collections.addImage_images;return l.call(this),k},c=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(k){return typeof t["process"+k.toUpperCase()]=="function"},g=function(k){return En(k)==="object"&&k.nodeType===1},y=function(k,b){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var V=""+k.getAttribute("src");if(V.indexOf("data:image/")===0)return Gh(unescape(V).split("base64,").pop());var ie=t.loadFile(V,!0);if(ie!==void 0)return ie}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var _e;switch(b){case"PNG":_e="image/png";break;case"WEBP":_e="image/webp";break;case"JPEG":case"JPG":default:_e="image/jpeg"}return Gh(k.toDataURL(_e,1).split("base64,").pop())}},w=function(k){var b=this.internal.collections.addImage_images;if(b){for(var V in b)if(k===b[V].alias)return b[V]}},N=function(k,b,V){return k||b||(k=-96,b=-96),k<0&&(k=-1*V.width*72/k/this.internal.scaleFactor),b<0&&(b=-1*V.height*72/b/this.internal.scaleFactor),k===0&&(k=b*V.width/V.height),b===0&&(b=k*V.height/V.width),[k,b]},R=function(k,b,V,ie,_e,le){var se=N.call(this,V,ie,_e),W=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,fe=u.call(this);if(V=se[0],ie=se[1],fe[_e.index]=_e,le){le*=Math.PI/180;var xe=Math.cos(le),j=Math.sin(le),ee=function(ue){return ue.toFixed(4)},ae=[ee(xe),ee(j),ee(-1*j),ee(xe),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,W(k),oe(b+ie),"cm"].join(" ")),this.internal.write(ae.join(" ")),this.internal.write([W(V),"0","0",W(ie),"0","0","cm"].join(" "))):this.internal.write([W(V),"0","0",W(ie),W(k),oe(b+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+_e.index+" Do"),this.internal.write("Q")},F=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(k){var b,V,ie=0;if(typeof k=="string")for(V=k.length,b=0;b<V;b++)ie=(ie<<5)-ie+k.charCodeAt(b),ie|=0;else if(Q(k))for(V=k.byteLength/2,b=0;b<V;b++)ie=(ie<<5)-ie+k[b],ie|=0;return ie},P=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var b=!0;return k.length===0&&(b=!1),k.length%4!=0&&(b=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(b=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(b=!1),b},G=t.__addimage__.extractImageFromDataUrl=function(k){var b=(k=k||"").split("base64,"),V=null;if(b.length===2){var ie=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(b[0]);Array.isArray(ie)&&(V={mimeType:ie[1],charset:ie[2],data:b[1]})}return V},J=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(k){return J()&&k instanceof ArrayBuffer};var Q=t.__addimage__.isArrayBufferView=function(k){return J()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},D=t.__addimage__.binaryStringToUint8Array=function(k){for(var b=k.length,V=new Uint8Array(b),ie=0;ie<b;ie++)V[ie]=k.charCodeAt(ie);return V},C=t.__addimage__.arrayBufferToBinaryString=function(k){for(var b="",V=Q(k)?k:new Uint8Array(k),ie=0;ie<V.length;ie+=8192)b+=String.fromCharCode.apply(null,V.subarray(ie,ie+8192));return b};t.addImage=function(){var k,b,V,ie,_e,le,se,W,oe;if(typeof arguments[1]=="number"?(b=e,V=arguments[1],ie=arguments[2],_e=arguments[3],le=arguments[4],se=arguments[5],W=arguments[6],oe=arguments[7]):(b=arguments[1],V=arguments[2],ie=arguments[3],_e=arguments[4],le=arguments[5],se=arguments[6],W=arguments[7],oe=arguments[8]),En(k=arguments[0])==="object"&&!g(k)&&"imageData"in k){var fe=k;k=fe.imageData,b=fe.format||b||e,V=fe.x||V||0,ie=fe.y||ie||0,_e=fe.w||fe.width||_e,le=fe.h||fe.height||le,se=fe.alias||se,W=fe.compression||W,oe=fe.rotation||fe.angle||oe}var xe=this.internal.getFilters();if(W===void 0&&xe.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(V)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var j=O.call(this,k,b,se,W);return R.call(this,V,ie,_e,le,j,oe),this};var O=function(k,b,V,ie){var _e,le,se;if(typeof k=="string"&&i(k)===e){k=unescape(k);var W=H(k,!1);(W!==""||(W=t.loadFile(k,!0))!==void 0)&&(k=W)}if(g(k)&&(k=y(k,b)),b=i(k,b),!f(b))throw new Error("addImage does not support files of type '"+b+"', please ensure that a plugin for '"+b+"' support is added.");if(((se=V)==null||se.length===0)&&(V=function(oe){return typeof oe=="string"||Q(oe)?I(oe):Q(oe.data)?I(oe.data):null}(k)),(_e=w.call(this,V))||(J()&&(k instanceof Uint8Array||b==="RGBA"||(le=k,k=D(k))),_e=this["process"+b.toUpperCase()](k,c.call(this),V,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in t.image_compression?oe:T.NONE}(ie),le)),!_e)throw new Error("An unknown error occurred whilst processing the image.");return _e},H=t.__addimage__.convertBase64ToBinaryString=function(k,b){var V;b=typeof b!="boolean"||b;var ie,_e="";if(typeof k=="string"){ie=(V=G(k))!==null?V.data:k;try{_e=Gh(ie)}catch(le){if(b)throw P(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return _e};t.getImageProperties=function(k){var b,V,ie="";if(g(k)&&(k=y(k)),typeof k=="string"&&i(k)===e&&((ie=H(k,!1))===""&&(ie=t.loadFile(k)||""),k=ie),V=i(k),!f(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!J()||k instanceof Uint8Array||(k=D(k)),!(b=this["process"+V.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return b.fileType=V,b}})(wt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};wt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,r,o,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,f=!1,g=0;g<c.length&&!f;g++)switch((i=c[g]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){i=c[y];var w=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),F=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(R.objId),I=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(i.bounds.x)+" "+l(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y)+"] ")+"/Contents ("+w(T(i.contents))+")",o+=" /Popup "+F.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+w(T(I))+") >>",R.content=o;var P=R.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(i.bounds.x+30)+" "+l(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w+30)+" "+l(i.bounds.y)+"] ")+" /Parent "+P,i.open&&(o+=" /Open true"),o+=" >>",F.content=o,this.internal.write(R.objId,"0 R",F.objId,"0 R");break;case"freetext":r="/Rect ["+s(i.bounds.x)+" "+l(i.bounds.y)+" "+s(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y+i.bounds.h)+"] ";var G=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+w(N(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var J=this.annotations._nameMap[i.options.name];i.options.pageNumber=J.page,i.options.top=J.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+w(N(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var Q=l(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+Q+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,r,o,s){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(n),y:c(i),w:u(n+r),h:c(i+o)},options:s,type:"link"})},t.textWithLink=function(n,i,r,o){var s,l,u=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){l=o.maxWidth;var f=this.splitTextToSize(n,l).length;s=Math.ceil(c*f)}else l=u,s=c;return this.text(n,i,r,o),r+=.2*c,o.align==="center"&&(i-=u/2),o.align==="right"&&(i-=u),this.link(i,r-c,l,s,o),u},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(wt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(R){return e[R.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},l=t.__arabicParser__.isArabicEndLetter=function(R){return s(R)&&o(R)&&e[R.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(R){return s(R)&&r.indexOf(R.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return s(R)&&o(R)&&e[R.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(R){return s(R)&&o(R)&&e[R.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(R){return s(R)&&o(R)&&e[R.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(R){return s(R)&&o(R)&&e[R.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(R){var F=0,T=n,I="",P=0;for(F=0;F<R.length;F+=1)T[R.charCodeAt(F)]!==void 0?(P++,typeof(T=T[R.charCodeAt(F)])=="number"&&(I+=String.fromCharCode(T),T=n,P=0),F===R.length-1&&(T=n,I+=R.charAt(F-(P-1)),F-=P-1,P=0)):(T=n,I+=R.charAt(F-P),F-=P,P=0);return I};t.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&i[R.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(R,F,T){return s(R)?o(R)===!1?-1:!c(R)||!s(F)&&!s(T)||!s(T)&&l(F)||l(R)&&!s(F)||l(R)&&u(F)||l(R)&&l(F)?0:f(R)&&s(F)&&!l(F)&&s(T)&&c(T)?3:l(R)||!s(T)?1:2:-1},w=function(R){var F=0,T=0,I=0,P="",G="",J="",Q=(R=R||"").split("\\s+"),D=[];for(F=0;F<Q.length;F+=1){for(D.push(""),T=0;T<Q[F].length;T+=1)P=Q[F][T],G=Q[F][T-1],J=Q[F][T+1],s(P)?(I=y(P,G,J),D[F]+=I!==-1?String.fromCharCode(e[P.charCodeAt(0)][I]):P):D[F]+=P;D[F]=g(D[F])}return D.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var R,F=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(F)){var I=0;for(T=[],I=0;I<F.length;I+=1)Array.isArray(F[I])?T.push([w(F[I][0]),F[I][1],F[I][2]]):T.push([w(F[I])]);R=T}else R=w(F);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};t.events.push(["preProcessText",N])}(wt.API),wt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(l){o=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var r;if((n=n||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(R){u=R}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(R){c=R}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(R){f=R}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(R){g=R}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(R){y=R}});var w=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return w},set:function(R){w=R}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(R){N=R}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,c){i.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),g=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,w=0,N=0,R=0,F=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var T=c.maxWidth;T>0?typeof u=="string"?u=this.splitTextToSize(u,T):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(P,G){return P.concat(F.splitTextToSize(G,T))},[])):u=Array.isArray(u)?u:[u];for(var I=0;I<u.length;I++)w<(R=this.getStringUnitWidth(u[I],{font:g})*f)&&(w=R);return w!==0&&(N=u.length),{w:w/=y,h:Math.max((N*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,w=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===u.lineNumber?(u.x=(c.x||0)+(c.width||0),u.y=c.y||0):c.y+c.height+u.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=g.top,w&&y&&(this.printHeaderRow(u.lineNumber,!0),u.y+=y[0].height)):u.y=c.y+c.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};t.table=function(u,c,f,g,y){if(i.call(this),!f)throw new Error("No data for PDF table.");var w,N,R,F,T=[],I=[],P=[],G={},J={},Q=[],D=[],C=(y=y||{}).autoSize||!1,O=y.printHeaders!==!1,H=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,k=y.margins||Object.assign({width:this.getPageWidth()},e),b=typeof y.padding=="number"?y.padding:3,V=y.headerBackgroundColor||"#c8c8c8",ie=y.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=b,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=ie,this.setFontSize(H),g==null)I=T=Object.keys(f[0]),P=T.map(function(){return"left"});else if(Array.isArray(g)&&En(g[0])==="object")for(T=g.map(function(fe){return fe.name}),I=g.map(function(fe){return fe.prompt||fe.name||""}),P=g.map(function(fe){return fe.align||"left"}),w=0;w<g.length;w+=1)J[g[w].name]=g[w].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(I=T=g,P=T.map(function(){return"left"}));if(C||Array.isArray(g)&&typeof g[0]=="string")for(w=0;w<T.length;w+=1){for(G[F=T[w]]=f.map(function(fe){return fe[F]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(I[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=G[F],this.setFont(void 0,"normal"),R=0;R<N.length;R+=1)Q.push(this.getTextDimensions(N[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[F]=Math.max.apply(null,Q)+b+b,Q=[]}if(O){var _e={};for(w=0;w<T.length;w+=1)_e[T[w]]={},_e[T[w]].text=I[w],_e[T[w]].align=P[w];var le=l.call(this,_e,J);D=T.map(function(fe){return new o(u,c,J[fe],le,_e[fe].text,void 0,_e[fe].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var se=g.reduce(function(fe,xe){return fe[xe.name]=xe.align,fe},{});for(w=0;w<f.length;w+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:w,data:f[w]},this);var W=l.call(this,f[w],J);for(R=0;R<T.length;R+=1){var oe=f[w][T[R]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:w,col:R,data:oe},this),s.call(this,new o(u,c,J[T[R]],W,oe,w+2,se[T[R]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=c,this};var l=function(u,c){var f=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(u).map(function(w){var N=u[w];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,c[w]-f-f)},this).map(function(w){return this.getLineHeightFactor()*w.length*g/y+f+f},this).reduce(function(w,N){return Math.max(w,N)},0)};t.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],w=0;w<this.internal.__cell__.tableHeaderRow.length;w+=1){f=this.internal.__cell__.tableHeaderRow[w].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=u;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,f),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(wt.API);var FA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},OA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xv=DA(OA),VA=[100,200,300,400,500,600,700,800,900],$F=DA(VA);function Sv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return FA[o=o||"normal"]?o:"normal"}(t.style),i=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),r=function(o){return typeof xv[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function xw(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var KF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Sw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function JF(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},KF,n.genericFontFamilies||{}),o=null,s=null,l=0;l<e.length;++l)if(r[(o=Sv(e[l])).family]&&(o.family=r[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[i]))throw new Error("Could not find a font-family for the rule '"+Tw(o)+"' and default family '"+i+"'.");if(s=function(u,c){if(c[u])return c[u];var f=xv[u],g=f<=xv.normal?-1:1,y=xw(c,OA,f,g);if(!y)throw new Error("Could not find a matching font-stretch value for "+u);return y}(o.stretch,s),s=function(u,c){if(c[u])return c[u];for(var f=FA[u],g=0;g<f.length;++g)if(c[f[g]])return c[f[g]];throw new Error("Could not find a matching font-style for "+u)}(o.style,s),!(s=function(u,c){if(c[u])return c[u];if(u===400&&c[500])return c[500];if(u===500&&c[400])return c[400];var f=$F[u],g=xw(c,VA,f,u<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+u);return g}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Tw(o)+"'.");return s}function Ew(t){return t.trimLeft()}function YF(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function ZF(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Pd,Aw,bw,Ng=["times"];(function(t){var e,n,i,r,o,s,l,u,c,f=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new u,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new s,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new s,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,c=new f}]);var g=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=j;Object.defineProperty(this,"pdf",{get:function(){return ee}});var ae=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ae},set:function(De){ae=!!De}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(De){ue=!!De}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(De){isNaN(De)||(he=De)}});var Te=0;Object.defineProperty(this,"posY",{get:function(){return Te},set:function(De){isNaN(De)||(Te=De)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(De){var pe;typeof De=="number"?pe=[De,De,De,De]:((pe=new Array(4))[0]=De[0],pe[1]=De.length>=2?De[1]:pe[0],pe[2]=De.length>=3?De[2]:pe[0],pe[3]=De.length>=4?De[3]:pe[1]),c.margin=pe}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(De){be=De}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(De){ke=De}});var Ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ge},set:function(De){Ge=De}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(De){De instanceof f&&(c=De)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(De){c.path=De}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(De){qe=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var pe;pe=y(De),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var pe=y(De);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var Je=null;function Ze(De,pe){if(Je===null){var It=function(ut){var We=[];return Object.keys(ut).forEach(function(Ye){ut[Ye].forEach(function(et){var Xe=null;switch(et){case"bold":Xe={family:Ye,weight:"bold"};break;case"italic":Xe={family:Ye,style:"italic"};break;case"bolditalic":Xe={family:Ye,weight:"bold",style:"italic"};break;case"":case"normal":Xe={family:Ye}}Xe!==null&&(Xe.ref={name:Ye,style:et},We.push(Xe))})}),We}(De.getFontList());Je=function(ut){for(var We={},Ye=0;Ye<ut.length;++Ye){var et=Sv(ut[Ye]),Xe=et.family,ft=et.stretch,At=et.style,Rt=et.weight;We[Xe]=We[Xe]||{},We[Xe][ft]=We[Xe][ft]||{},We[Xe][ft][At]=We[Xe][ft][At]||{},We[Xe][ft][At][Rt]=et}return We}(It.concat(pe))}return Je}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(De){Je=null,mt=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var pe;if(this.ctx.font=De,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var It=pe[1],ut=(pe[2],pe[3]),We=pe[4],Ye=(pe[5],pe[6]),et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(et==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var Xe=function(St){var zt,it,qn=[],Jt=St.trim();if(Jt==="")return Ng;if(Jt in Sw)return[Sw[Jt]];for(;Jt!=="";){switch(it=null,zt=(Jt=Ew(Jt)).charAt(0)){case'"':case"'":it=YF(Jt.substring(1),zt);break;default:it=ZF(Jt)}if(it===null||(qn.push(it[0]),(Jt=Ew(it[1]))!==""&&Jt.charAt(0)!==","))return Ng;Jt=Jt.replace(/^,/,"")}return qn}(Ye);if(this.fontFaces){var ft=JF(Ze(this.pdf,this.fontFaces),Xe.map(function(St){return{family:St,stretch:"normal",weight:ut,style:It}}));this.pdf.setFont(ft.ref.name,ft.ref.style)}else{var At="";(ut==="bold"||parseInt(ut,10)>=700||It==="bold")&&(At="bold"),It==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Rt="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<Xe.length;xt++){if(this.pdf.internal.getFont(Xe[xt],At,{noFallback:!0,disableWarning:!0})!==void 0){Rt=Xe[xt];break}if(At==="bolditalic"&&this.pdf.internal.getFont(Xe[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=Xe[xt],At="bold";else if(this.pdf.internal.getFont(Xe[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=Xe[xt],At="normal";break}}if(Rt===""){for(var Zt=0;Zt<Xe.length;Zt++)if(pt[Xe[Zt]]){Rt=pt[Xe[Zt]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};g.prototype.setLineDash=function(j){this.lineDash=j},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){G.call(this,"fill",!1)},g.prototype.stroke=function(){G.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(j,ee){if(isNaN(j)||isNaN(ee))throw Dn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ae=this.ctx.transform.applyToPoint(new s(j,ee));this.path.push({type:"mt",x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(j,ee)},g.prototype.closePath=function(){var j=new s(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&En(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){j=new s(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(j.x,j.y)},g.prototype.lineTo=function(j,ee){if(isNaN(j)||isNaN(ee))throw Dn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ae=this.ctx.transform.applyToPoint(new s(j,ee));this.path.push({type:"lt",x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},g.prototype.quadraticCurveTo=function(j,ee,ae,ue){if(isNaN(ae)||isNaN(ue)||isNaN(j)||isNaN(ee))throw Dn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new s(ae,ue)),Te=this.ctx.transform.applyToPoint(new s(j,ee));this.path.push({type:"qct",x1:Te.x,y1:Te.y,x:he.x,y:he.y}),this.ctx.lastPoint=new s(he.x,he.y)},g.prototype.bezierCurveTo=function(j,ee,ae,ue,he,Te){if(isNaN(he)||isNaN(Te)||isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue))throw Dn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new s(he,Te)),ke=this.ctx.transform.applyToPoint(new s(j,ee)),Ge=this.ctx.transform.applyToPoint(new s(ae,ue));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:Ge.x,y2:Ge.y,x:be.x,y:be.y}),this.ctx.lastPoint=new s(be.x,be.y)},g.prototype.arc=function(j,ee,ae,ue,he,Te){if(isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue)||isNaN(he))throw Dn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Te=!!Te,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new s(j,ee));j=be.x,ee=be.y;var ke=this.ctx.transform.applyToPoint(new s(0,ae)),Ge=this.ctx.transform.applyToPoint(new s(0,0));ae=Math.sqrt(Math.pow(ke.x-Ge.x,2)+Math.pow(ke.y-Ge.y,2))}Math.abs(he-ue)>=2*Math.PI&&(ue=0,he=2*Math.PI),this.path.push({type:"arc",x:j,y:ee,radius:ae,startAngle:ue,endAngle:he,counterclockwise:Te})},g.prototype.arcTo=function(j,ee,ae,ue,he){throw new Error("arcTo not implemented.")},g.prototype.rect=function(j,ee,ae,ue){if(isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue))throw Dn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,ee),this.lineTo(j+ae,ee),this.lineTo(j+ae,ee+ue),this.lineTo(j,ee+ue),this.lineTo(j,ee),this.lineTo(j+ae,ee),this.lineTo(j,ee)},g.prototype.fillRect=function(j,ee,ae,ue){if(isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue))throw Dn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!w.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,ee,ae,ue),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},g.prototype.strokeRect=function(j,ee,ae,ue){if(isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue))throw Dn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(j,ee,ae,ue),this.stroke())},g.prototype.clearRect=function(j,ee,ae,ue){if(isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue))throw Dn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,ee,ae,ue))},g.prototype.save=function(j){j=typeof j!="boolean"||j;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,ae=0;ae<this.pdf.internal.getNumberOfPages();ae++)this.pdf.setPage(ae+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},g.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,ae=0;ae<this.pdf.internal.getNumberOfPages();ae++)this.pdf.setPage(ae+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(j){var ee,ae,ue,he;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))ee=0,ae=0,ue=0,he=0;else{var Te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(Te!==null)ee=parseInt(Te[1]),ae=parseInt(Te[2]),ue=parseInt(Te[3]),he=1;else if((Te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)ee=parseInt(Te[1]),ae=parseInt(Te[2]),ue=parseInt(Te[3]),he=parseFloat(Te[4]);else{if(he=1,typeof j=="string"&&j.charAt(0)!=="#"){var be=new PA(j);j=be.ok?be.toHex():"#000000"}j.length===4?(ee=j.substring(1,2),ee+=ee,ae=j.substring(2,3),ae+=ae,ue=j.substring(3,4),ue+=ue):(ee=j.substring(1,3),ae=j.substring(3,5),ue=j.substring(5,7)),ee=parseInt(ee,16),ae=parseInt(ae,16),ue=parseInt(ue,16)}}return{r:ee,g:ae,b:ue,a:he,style:j}},w=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(j,ee,ae,ue){if(isNaN(ee)||isNaN(ae)||typeof j!="string")throw Dn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!w.call(this)){var he=W(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;b.call(this,{text:j,x:ee,y:ae,scale:Te,angle:he,align:this.textAlign,maxWidth:ue})}},g.prototype.strokeText=function(j,ee,ae,ue){if(isNaN(ee)||isNaN(ae)||typeof j!="string")throw Dn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ue=isNaN(ue)?void 0:ue;var he=W(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;b.call(this,{text:j,x:ee,y:ae,scale:Te,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ue})}},g.prototype.measureText=function(j){if(typeof j!="string")throw Dn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,ae=this.pdf.internal.scaleFactor,ue=ee.internal.getFontSize(),he=ee.getStringUnitWidth(j)*ue/ee.internal.scaleFactor,Te=function(be){var ke=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ke}}),this};return new Te({width:he*=Math.round(96*ae/72*1e4)/1e4})},g.prototype.scale=function(j,ee){if(isNaN(j)||isNaN(ee))throw Dn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ae=new u(j,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(ae)},g.prototype.rotate=function(j){if(isNaN(j))throw Dn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new u(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},g.prototype.translate=function(j,ee){if(isNaN(j)||isNaN(ee))throw Dn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ae=new u(1,0,0,1,j,ee);this.ctx.transform=this.ctx.transform.multiply(ae)},g.prototype.transform=function(j,ee,ae,ue,he,Te){if(isNaN(j)||isNaN(ee)||isNaN(ae)||isNaN(ue)||isNaN(he)||isNaN(Te))throw Dn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new u(j,ee,ae,ue,he,Te);this.ctx.transform=this.ctx.transform.multiply(be)},g.prototype.setTransform=function(j,ee,ae,ue,he,Te){j=isNaN(j)?1:j,ee=isNaN(ee)?0:ee,ae=isNaN(ae)?0:ae,ue=isNaN(ue)?1:ue,he=isNaN(he)?0:he,Te=isNaN(Te)?0:Te,this.ctx.transform=new u(j,ee,ae,ue,he,Te)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(j,ee,ae,ue,he,Te,be,ke,Ge){var qe=this.pdf.getImageProperties(j),Je=1,Ze=1,mt=1,De=1;ue!==void 0&&ke!==void 0&&(mt=ke/ue,De=Ge/he,Je=qe.width/ue*ke/ue,Ze=qe.height/he*Ge/he),Te===void 0&&(Te=ee,be=ae,ee=0,ae=0),ue!==void 0&&ke===void 0&&(ke=ue,Ge=he),ue===void 0&&ke===void 0&&(ke=qe.width,Ge=qe.height);for(var pe,It=this.ctx.transform.decompose(),ut=W(It.rotate.shx),We=new u,Ye=(We=(We=(We=We.multiply(It.translate)).multiply(It.skew)).multiply(It.scale)).applyToRectangle(new l(Te-ee*mt,be-ae*De,ue*Je,he*Ze)),et=F.call(this,Ye),Xe=[],ft=0;ft<et.length;ft+=1)Xe.indexOf(et[ft])===-1&&Xe.push(et[ft]);if(P(Xe),this.autoPaging)for(var At=Xe[0],Rt=Xe[Xe.length-1],pt=At;pt<Rt+1;pt++){this.pdf.setPage(pt);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=pt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=pt===1?0:St+(pt-2)*zt;if(this.ctx.clip_path.length!==0){var qn=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(pe,this.posX+this.margin[3],-it+Zt+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=qn}var Jt=JSON.parse(JSON.stringify(Ye));Jt=I([Jt],this.posX+this.margin[3],-it+Zt+this.ctx.prevPageLastElemOffset)[0];var Ni=(pt>At||pt<Rt)&&R.call(this);Ni&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,zt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,ut),Ni&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",Ye.x,Ye.y,Ye.w,Ye.h,null,null,ut)};var F=function(j,ee,ae){var ue=[];ee=ee||this.pdf.internal.pageSize.width,ae=ae||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":ue.push(Math.floor((j.y+he)/ae)+1);break;case"arc":ue.push(Math.floor((j.y+he-j.radius)/ae)+1),ue.push(Math.floor((j.y+he+j.radius)/ae)+1);break;case"qct":var Te=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);ue.push(Math.floor((Te.y+he)/ae)+1),ue.push(Math.floor((Te.y+Te.h+he)/ae)+1);break;case"bct":var be=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);ue.push(Math.floor((be.y+he)/ae)+1),ue.push(Math.floor((be.y+be.h+he)/ae)+1);break;case"rect":ue.push(Math.floor((j.y+he)/ae)+1),ue.push(Math.floor((j.y+j.h+he)/ae)+1)}for(var ke=0;ke<ue.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<ue[ke];)T.call(this);return ue},T=function(){var j=this.fillStyle,ee=this.strokeStyle,ae=this.font,ue=this.lineCap,he=this.lineWidth,Te=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=ee,this.font=ae,this.lineCap=ue,this.lineWidth=he,this.lineJoin=Te},I=function(j,ee,ae){for(var ue=0;ue<j.length;ue++)switch(j[ue].type){case"bct":j[ue].x2+=ee,j[ue].y2+=ae;case"qct":j[ue].x1+=ee,j[ue].y1+=ae;case"mt":case"lt":case"arc":default:j[ue].x+=ee,j[ue].y+=ae}return j},P=function(j){return j.sort(function(ee,ae){return ee-ae})},G=function(j,ee){for(var ae,ue,he=this.fillStyle,Te=this.strokeStyle,be=this.lineCap,ke=this.lineWidth,Ge=Math.abs(ke*this.ctx.transform.scaleX),qe=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),mt=[],De=0;De<Ze.length;De++)if(Ze[De].x!==void 0)for(var pe=F.call(this,Ze[De]),It=0;It<pe.length;It+=1)mt.indexOf(pe[It])===-1&&mt.push(pe[It]);for(var ut=0;ut<mt.length;ut++)for(;this.pdf.internal.getNumberOfPages()<mt[ut];)T.call(this);if(P(mt),this.autoPaging)for(var We=mt[0],Ye=mt[mt.length-1],et=We;et<Ye+1;et++){this.pdf.setPage(et),this.fillStyle=he,this.strokeStyle=Te,this.lineCap=be,this.lineWidth=Ge,this.lineJoin=qe;var Xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=et===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=et===1?0:At+(et-2)*Rt;if(this.ctx.clip_path.length!==0){var xt=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(ae,this.posX+this.margin[3],-pt+ft+this.ctx.prevPageLastElemOffset),J.call(this,j,!0),this.path=xt}if(ue=JSON.parse(JSON.stringify(Je)),this.path=I(ue,this.posX+this.margin[3],-pt+ft+this.ctx.prevPageLastElemOffset),ee===!1||et===0){var Zt=(et>We||et<Ye)&&R.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Rt,null).clip().discardPath()),J.call(this,j,ee),Zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ke}else this.lineWidth=Ge,J.call(this,j,ee),this.lineWidth=ke;this.path=Je},J=function(j,ee){if((j!=="stroke"||ee||!N.call(this))&&(j==="stroke"||ee||!w.call(this))){for(var ae,ue,he=[],Te=this.path,be=0;be<Te.length;be++){var ke=Te[be];switch(ke.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:ke,deltas:[],abs:[]});break;case"lt":var Ge=he.length;if(Te[be-1]&&!isNaN(Te[be-1].x)&&(ae=[ke.x-Te[be-1].x,ke.y-Te[be-1].y],Ge>0)){for(;Ge>=0;Ge--)if(he[Ge-1].close!==!0&&he[Ge-1].begin!==!0){he[Ge-1].deltas.push(ae),he[Ge-1].abs.push(ke);break}}break;case"bct":ae=[ke.x1-Te[be-1].x,ke.y1-Te[be-1].y,ke.x2-Te[be-1].x,ke.y2-Te[be-1].y,ke.x-Te[be-1].x,ke.y-Te[be-1].y],he[he.length-1].deltas.push(ae);break;case"qct":var qe=Te[be-1].x+2/3*(ke.x1-Te[be-1].x),Je=Te[be-1].y+2/3*(ke.y1-Te[be-1].y),Ze=ke.x+2/3*(ke.x1-ke.x),mt=ke.y+2/3*(ke.y1-ke.y),De=ke.x,pe=ke.y;ae=[qe-Te[be-1].x,Je-Te[be-1].y,Ze-Te[be-1].x,mt-Te[be-1].y,De-Te[be-1].x,pe-Te[be-1].y],he[he.length-1].deltas.push(ae);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(ke)}}ue=ee?null:j==="stroke"?"stroke":"fill";for(var It=!1,ut=0;ut<he.length;ut++)if(he[ut].arc)for(var We=he[ut].abs,Ye=0;Ye<We.length;Ye++){var et=We[Ye];et.type==="arc"?C.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,ee,!It):V.call(this,et.x,et.y),It=!0}else if(he[ut].close===!0)this.pdf.internal.out("h"),It=!1;else if(he[ut].begin!==!0){var Xe=he[ut].start.x,ft=he[ut].start.y;ie.call(this,he[ut].deltas,Xe,ft),It=!0}ue&&O.call(this,ue),ee&&H.call(this)}},Q=function(j){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ae=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-ae;case"top":return j+ee-ae;case"hanging":return j+ee-2*ae;case"middle":return j+ee/2-ae;case"ideographic":return j;case"alphabetic":default:return j}},D=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(ee,ae){this.colorStops.push([ee,ae])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(j,ee,ae,ue,he,Te,be,ke,Ge){for(var qe=le.call(this,ae,ue,he,Te),Je=0;Je<qe.length;Je++){var Ze=qe[Je];Je===0&&(Ge?k.call(this,Ze.x1+j,Ze.y1+ee):V.call(this,Ze.x1+j,Ze.y1+ee)),_e.call(this,j,ee,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ke?H.call(this):O.call(this,be)},O=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(j,ee){this.pdf.internal.out(n(j)+" "+i(ee)+" m")},b=function(j){var ee;switch(j.align){case"right":case"end":ee="right";break;case"center":ee="center";break;case"left":case"start":default:ee="left"}var ae=this.pdf.getTextDimensions(j.text),ue=Q.call(this,j.y),he=D.call(this,ue)-ae.h,Te=this.ctx.transform.applyToPoint(new s(j.x,ue)),be=this.ctx.transform.decompose(),ke=new u;ke=(ke=(ke=ke.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Ge,qe,Je,Ze=this.ctx.transform.applyToRectangle(new l(j.x,ue,ae.w,ae.h)),mt=ke.applyToRectangle(new l(j.x,he,ae.w,ae.h)),De=F.call(this,mt),pe=[],It=0;It<De.length;It+=1)pe.indexOf(De[It])===-1&&pe.push(De[It]);if(P(pe),this.autoPaging)for(var ut=pe[0],We=pe[pe.length-1],Ye=ut;Ye<We+1;Ye++){this.pdf.setPage(Ye);var et=Ye===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[2],At=ft-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],pt=Rt-this.margin[3],xt=Ye===1?0:Xe+(Ye-2)*At;if(this.ctx.clip_path.length!==0){var Zt=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Ge,this.posX+this.margin[3],-1*xt+et),J.call(this,"fill",!0),this.path=Zt}var St=I([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-xt+et+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*j.scale),Je=this.lineWidth,this.lineWidth=Je*j.scale);var zt=this.autoPaging!=="text";if(zt||St.y+St.h<=ft){if(zt||St.y>=et&&St.x<=Rt){var it=zt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Rt-St.x)[0],qn=I([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-xt+et+this.ctx.prevPageLastElemOffset)[0],Jt=zt&&(Ye>ut||Ye<We)&&R.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,At,null).clip().discardPath()),this.pdf.text(it,qn.x,qn.y,{angle:j.angle,align:ee,renderingMode:j.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else St.y<ft&&(this.ctx.prevPageLastElemOffset+=ft-St.y);j.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=Je)}else j.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*j.scale),Je=this.lineWidth,this.lineWidth=Je*j.scale),this.pdf.text(j.text,Te.x+this.posX,Te.y+this.posY,{angle:j.angle,align:ee,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=Je)},V=function(j,ee,ae,ue){ae=ae||0,ue=ue||0,this.pdf.internal.out(n(j+ae)+" "+i(ee+ue)+" l")},ie=function(j,ee,ae){return this.pdf.lines(j,ee,ae,null,null)},_e=function(j,ee,ae,ue,he,Te,be,ke){this.pdf.internal.out([e(r(ae+j)),e(o(ue+ee)),e(r(he+j)),e(o(Te+ee)),e(r(be+j)),e(o(ke+ee)),"c"].join(" "))},le=function(j,ee,ae,ue){for(var he=2*Math.PI,Te=Math.PI/2;ee>ae;)ee-=he;var be=Math.abs(ae-ee);be<he&&ue&&(be=he-be);for(var ke=[],Ge=ue?-1:1,qe=ee;be>1e-5;){var Je=qe+Ge*Math.min(be,Te);ke.push(se.call(this,j,qe,Je)),be-=Math.abs(Je-qe),qe=Je}return ke},se=function(j,ee,ae){var ue=(ae-ee)/2,he=j*Math.cos(ue),Te=j*Math.sin(ue),be=he,ke=-Te,Ge=be*be+ke*ke,qe=Ge+be*he+ke*Te,Je=4/3*(Math.sqrt(2*Ge*qe)-qe)/(be*Te-ke*he),Ze=be-Je*ke,mt=ke+Je*be,De=Ze,pe=-mt,It=ue+ee,ut=Math.cos(It),We=Math.sin(It);return{x1:j*Math.cos(ee),y1:j*Math.sin(ee),x2:Ze*ut-mt*We,y2:Ze*We+mt*ut,x3:De*ut-pe*We,y3:De*We+pe*ut,x4:j*Math.cos(ae),y4:j*Math.sin(ae)}},W=function(j){return 180*j/Math.PI},oe=function(j,ee,ae,ue,he,Te){var be=j+.5*(ae-j),ke=ee+.5*(ue-ee),Ge=he+.5*(ae-he),qe=Te+.5*(ue-Te),Je=Math.min(j,he,be,Ge),Ze=Math.max(j,he,be,Ge),mt=Math.min(ee,Te,ke,qe),De=Math.max(ee,Te,ke,qe);return new l(Je,mt,Ze-Je,De-mt)},fe=function(j,ee,ae,ue,he,Te,be,ke){var Ge,qe,Je,Ze,mt,De,pe,It,ut,We,Ye,et,Xe,ft,At=ae-j,Rt=ue-ee,pt=he-ae,xt=Te-ue,Zt=be-he,St=ke-Te;for(qe=0;qe<41;qe++)ut=(pe=(Je=j+(Ge=qe/40)*At)+Ge*((mt=ae+Ge*pt)-Je))+Ge*(mt+Ge*(he+Ge*Zt-mt)-pe),We=(It=(Ze=ee+Ge*Rt)+Ge*((De=ue+Ge*xt)-Ze))+Ge*(De+Ge*(Te+Ge*St-De)-It),qe==0?(Ye=ut,et=We,Xe=ut,ft=We):(Ye=Math.min(Ye,ut),et=Math.min(et,We),Xe=Math.max(Xe,ut),ft=Math.max(ft,We));return new l(Math.round(Ye),Math.round(et),Math.round(Xe-Ye),Math.round(ft-et))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,ee,ae=(j=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:ee}));this.prevLineDash!==ae&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ae)}}})(wt.API),function(t){var e=function(o){var s,l,u,c,f,g,y,w,N,R;for(l=[],u=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(g=(f=((f=((f=((f=(f-(R=f%85))/85)-(N=f%85))/85)-(w=f%85))/85)-(y=f%85))/85)%85,l.push(g+33,y+33,w+33,N+33,R+33)):l.push(122);return function(F,T){for(var I=T;I>0;I--)F.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var s,l,u,c,f,g=String,y="length",w=255,N="charCodeAt",R="slice",F="replace";for(o[R](-2),o=o[R](0,-2)[F](/\s/g,"")[F]("z","!!!!!"),u=[],c=0,f=(o+=s="uuuuu"[R](o[y]%5||5))[y];f>c;c+=5)l=52200625*(o[N](c)-33)+614125*(o[N](c+1)-33)+7225*(o[N](c+2)-33)+85*(o[N](c+3)-33)+(o[N](c+4)-33),u.push(w&l>>24,w&l>>16,w&l>>8,w&l);return function(T,I){for(var P=I;P>0;P--)T.pop()}(u,s[y]),g.fromCharCode.apply(g,u)},i=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var l="",u=0;u<o.length;u+=2)l+=String.fromCharCode("0x"+(o[u]+o[u+1]));return l},r=function(o){for(var s=new Uint8Array(o.length),l=o.length;l--;)s[l]=o.charCodeAt(l);return o=(s=gv(s)).reduce(function(u,c){return u+String.fromCharCode(c)},"")};t.processDataByFilters=function(o,s){var l=0,u=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=r(u),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:u,reverseChain:c.reverse().join(" ")}}}(wt.API),function(t){t.loadFile=function(e,n,i){return function(r,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var l=void 0;try{l=function(u,c,f){var g=new XMLHttpRequest,y=0,w=function(N){var R=N.length,F=[],T=String.fromCharCode;for(y=0;y<R;y+=1)F.push(T(255&N.charCodeAt(y)));return F.join("")};if(g.open("GET",u,!c),g.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(g.onload=function(){g.status===200?f(w(this.responseText)):f(void 0)}),g.send(null),c&&g.status===200)return w(g.responseText)}(r,o,s)}catch{}return l}(e,n,i)},t.loadImageFile=t.loadFile}(wt.API),function(t){function e(){return(Nt.html2canvas?Promise.resolve(Nt.html2canvas):hv(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function n(){return(Nt.DOMPurify?Promise.resolve(Nt.DOMPurify):hv(()=>import("./purify.es-C_uT9hQ1.js"),[],import.meta.url)).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var l=En(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},r=function(s,l){var u=document.createElement(s);for(var c in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[c]=l.style[c];return u},o=function s(l){var u=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),u);return c=(c=c.setProgress(1,s,1,[s])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,l){return s.__proto__=l||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(u){switch(i(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(n).then(function(u){return this.set({src:r("div",{innerHTML:s,dompurify:u})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function u(c,f){for(var g=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||g.appendChild(u(y,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(g.value=c.value),g.addEventListener("load",function(){g.scrollTop=c.scrollTop,g.scrollLeft=c.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(l){var u=this.opt.jsPDF,c=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var w=c[y],N=w.src.find(function(R){return R.format==="truetype"});N&&u.addFont(N.url,w.ref.name,w.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,u.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},o.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(i(s)!=="object")return this;var l=Object.keys(s||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=s[u]};switch(u){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[u]=s[u]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(s,l){return this.then(function(){var u=s in o.template.prop?this.prop[s]:this.opt[s];return l?l(u):u})},o.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function l(u,c){return Math.floor(u*c/72*96)}return this.then(function(){(s=s||wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,l,u,c){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,l,u,c){return this.setProgress(s?this.progress.val+s:null,l||null,u?this.progress.n+u:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,l){var u=this;return this.thenCore(s,l,function(c,f){return u.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(g){return u.updateProgress(null,c),g}).then(c,f).then(function(g){return u.updateProgress(1),g})})},o.prototype.thenCore=function(s,l,u){u=u||Promise.prototype.then,s&&(s=s.bind(this)),l&&(l=l.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),f=u.call(c,s,l);return o.convert(f,this.__proto__)},o.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},o.prototype.thenList=function(s){var l=this;return s.forEach(function(u){l=l.thenCore(u)}),l},o.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return o.convert(l,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,wt.getPageSize=function(s,l,u){if(En(s)==="object"){var c=s;s=c.orientation,l=c.unit||l,u=c.format||u}l=l||"mm",u=u||"a4",s=(""+(s||"P")).toLowerCase();var f,g=(""+u).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var w,N=0,R=0;if(y.hasOwnProperty(g))N=y[g][1]/f,R=y[g][0]/f;else try{N=u[1],R=u[0]}catch{throw new Error("Invalid format: "+u)}if(s==="p"||s==="portrait")s="p",R>N&&(w=R,R=N,N=w);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",N>R&&(w=R,R=N,N=w)}return{width:R,height:N,unit:l,k:f,orientation:s}},t.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Sv):null;var u=new o(l);return l.worker?u:u.from(s).doCallback()}}(wt.API),wt.API.addJS=function(t){return bw=t,this.internal.events.subscribe("postPutResources",function(){Pd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Pd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Aw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+bw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Pd!==void 0&&Aw!==void 0&&this.internal.out("/Names <</JavaScript "+Pd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),o=0;o<r.length;o++){var s=r[o],l=i.exec(s);if(l!=null){var u=l[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(o=0;o<c;o++){var g=n.internal.newObject();f.push(g);var y=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var w=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<f.length;o++)n.internal.write("(page_"+(o+1)+")"+f[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+w+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,r,o){var s={title:r,options:o,children:[]};return i==null&&(i=this.root),i.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var s=i.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var u=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,r){for(var o=0;o<r.children.length;o++)i.count++,this.count_r(i,r.children[o]);return i.count}}])}(wt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,r,o,s,l){var u,c=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(u=function(g){for(var y,w=256*g.charCodeAt(4)+g.charCodeAt(5),N=g.length,R={width:0,height:0,numcomponents:1},F=4;F<N;F+=2){if(F+=w,e.indexOf(g.charCodeAt(F+1))!==-1){y=256*g.charCodeAt(F+5)+g.charCodeAt(F+6),R={width:256*g.charCodeAt(F+7)+g.charCodeAt(F+8),height:y,numcomponents:g.charCodeAt(F+9)};break}w=256*g.charCodeAt(F+2)+g.charCodeAt(F+3)}return R}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:n,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:c,index:i,alias:r}}return f}}(wt.API);var Yu,Nd,Cw,Iw,Pw,QF=function(){var t,e,n;function i(o){var s,l,u,c,f,g,y,w,N,R,F,T,I,P;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(s=this.readUInt32(),N=(function(){var G,J;for(J=[],G=0;G<4;++G)J.push(String.fromCharCode(this.data[this.pos++]));return J}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),c=this.readUInt16()||100,g.delay=1e3*f/c,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,s-=4),o=(g!=null?g.data:void 0)||this.imgData,T=0;0<=s?T<s:T>s;0<=s?++T:--T)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((R=u-this.transparency.indexed.length)>0)for(I=0;0<=R?I<R:I>R;0<=R?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":y=(F=this.read(s)).indexOf(0),w=String.fromCharCode.apply(String,F.slice(0,y)),this.text[w]=String.fromCharCode.apply(String,F.slice(y+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(P=this.colorType)===4||P===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(o){var s,l;for(l=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)l.push(this.data[this.pos++]);return l},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*s),u=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function f(g,y,w,N){var R,F,T,I,P,G,J,Q,D,C,O,H,k,b,V,ie,_e,le,se,W,oe,fe=Math.ceil((c.width-g)/w),xe=Math.ceil((c.height-y)/N),j=c.width==fe&&c.height==xe;for(b=s*fe,H=j?l:new Uint8Array(b*xe),G=o.length,k=0,F=0;k<xe&&u<G;){switch(o[u++]){case 0:for(I=_e=0;_e<b;I=_e+=1)H[F++]=o[u++];break;case 1:for(I=le=0;le<b;I=le+=1)R=o[u++],P=I<s?0:H[F-s],H[F++]=(R+P)%256;break;case 2:for(I=se=0;se<b;I=se+=1)R=o[u++],T=(I-I%s)/s,V=k&&H[(k-1)*b+T*s+I%s],H[F++]=(V+R)%256;break;case 3:for(I=W=0;W<b;I=W+=1)R=o[u++],T=(I-I%s)/s,P=I<s?0:H[F-s],V=k&&H[(k-1)*b+T*s+I%s],H[F++]=(R+Math.floor((P+V)/2))%256;break;case 4:for(I=oe=0;oe<b;I=oe+=1)R=o[u++],T=(I-I%s)/s,P=I<s?0:H[F-s],k===0?V=ie=0:(V=H[(k-1)*b+T*s+I%s],ie=T&&H[(k-1)*b+(T-1)*s+I%s]),J=P+V-ie,Q=Math.abs(J-P),C=Math.abs(J-V),O=Math.abs(J-ie),D=Q<=C&&Q<=O?P:C<=O?V:ie,H[F++]=(R+D)%256;break;default:throw new Error("Invalid filter algorithm: "+o[u-1])}if(!j){var ee=((y+k*N)*c.width+g)*s,ae=k*b;for(I=0;I<fe;I+=1){for(var ue=0;ue<s;ue+=1)l[ee++]=H[ae++];ee+=(w-1)*s}}k++}}return o=PF(o),c.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},i.prototype.decodePalette=function(){var o,s,l,u,c,f,g,y,w;for(l=this.palette,f=this.transparency.indexed||[],c=new Uint8Array((f.length||0)+l.length),u=0,o=0,s=g=0,y=l.length;g<y;s=g+=3)c[u++]=l[s],c[u++]=l[s+1],c[u++]=l[s+2],c[u++]=(w=f[o++])!=null?w:255;return c},i.prototype.copyToImageData=function(o,s){var l,u,c,f,g,y,w,N,R,F,T;if(u=this.colors,R=null,l=this.hasAlphaChannel,this.palette.length&&(R=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),u=4,l=!0),N=(c=o.data||o).length,g=R||s,f=y=0,u===1)for(;f<N;)w=R?4*s[f/4]:y,F=g[w++],c[f++]=F,c[f++]=F,c[f++]=F,c[f++]=l?g[w++]:255,y=w;else for(;f<N;)w=R?4*s[f/4]:y,c[f++]=g[w++],c[f++]=g[w++],c[f++]=g[w++],c[f++]=l?g[w++]:255,y=w},i.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var r=function(){if(Object.prototype.toString.call(Nt)==="[object Window]"){try{e=Nt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),t=function(o){var s;if(r()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(o){var s,l,u,c,f,g,y,w;if(this.animation){for(w=[],l=f=0,g=(y=this.animation.frames).length;f<g;l=++f)s=y[l],u=o.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(u,c),s.imageData=u,w.push(s.image=t(u));return w}},i.prototype.renderFrame=function(o,s){var l,u,c;return l=(u=this.animation.frames)[s],c=u[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),l.blendOp===0&&o.clearRect(l.xOffset,l.yOffset,l.width,l.height),o.drawImage(l.image,l.xOffset,l.yOffset)},i.prototype.animate=function(o){var s,l,u,c,f,g,y=this;return l=0,g=this.animation,c=g.numFrames,u=g.frames,f=g.numPlays,(s=function(){var w,N;if(w=l++%c,N=u[w],y.renderFrame(o,w),c>1&&l/c<f)return y.animation._timeout=setTimeout(s,N.delay)})()},i.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},i.prototype.render=function(o){var s,l;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(l=s.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),s.putImageData(l,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function XF(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],o=r>>7,s=1<<(7&r)+1;t[e++],t[e++];var l=null,u=null;o&&(l=e,u=s,e+=3*s);var c=!0,f=[],g=0,y=null,w=0,N=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var R=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],!(1&R)&&(y=null),w=R>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var F=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,G=t[e++],J=G>>6&1,Q=1<<(7&G)+1,D=l,C=u,O=!1;G>>7&&(O=!0,D=e,C=Q,e+=3*Q);var H=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}f.push({x:F,y:T,width:I,height:P,has_local_palette:O,palette_offset:D,palette_size:C,data_offset:H,data_length:e-H,transparent_index:y,interlaced:!!J,delay:g,disposal:w});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return N},this.frameInfo=function(b){if(b<0||b>=f.length)throw new Error("Frame index out of range.");return f[b]},this.decodeAndBlitFrameBGRA=function(b,V){var ie=this.frameInfo(b),_e=ie.width*ie.height,le=new Uint8Array(_e);Nw(t,ie.data_offset,le,_e);var se=ie.palette_offset,W=ie.transparent_index;W===null&&(W=256);var oe=ie.width,fe=n-oe,xe=oe,j=4*(ie.y*n+ie.x),ee=4*((ie.y+ie.height)*n+ie.x),ae=j,ue=4*fe;ie.interlaced===!0&&(ue+=4*n*7);for(var he=8,Te=0,be=le.length;Te<be;++Te){var ke=le[Te];if(xe===0&&(xe=oe,(ae+=ue)>=ee&&(ue=4*fe+4*n*(he-1),ae=j+(oe+fe)*(he<<1),he>>=1)),ke===W)ae+=4;else{var Ge=t[se+3*ke],qe=t[se+3*ke+1],Je=t[se+3*ke+2];V[ae++]=Je,V[ae++]=qe,V[ae++]=Ge,V[ae++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(b,V){var ie=this.frameInfo(b),_e=ie.width*ie.height,le=new Uint8Array(_e);Nw(t,ie.data_offset,le,_e);var se=ie.palette_offset,W=ie.transparent_index;W===null&&(W=256);var oe=ie.width,fe=n-oe,xe=oe,j=4*(ie.y*n+ie.x),ee=4*((ie.y+ie.height)*n+ie.x),ae=j,ue=4*fe;ie.interlaced===!0&&(ue+=4*n*7);for(var he=8,Te=0,be=le.length;Te<be;++Te){var ke=le[Te];if(xe===0&&(xe=oe,(ae+=ue)>=ee&&(ue=4*fe+4*n*(he-1),ae=j+(oe+fe)*(he<<1),he>>=1)),ke===W)ae+=4;else{var Ge=t[se+3*ke],qe=t[se+3*ke+1],Je=t[se+3*ke+2];V[ae++]=Ge,V[ae++]=qe,V[ae++]=Je,V[ae++]=255}--xe}}}function Nw(t,e,n,i){for(var r=t[e++],o=1<<r,s=o+1,l=s+1,u=r+1,c=(1<<u)-1,f=0,g=0,y=0,w=t[e++],N=new Int32Array(4096),R=null;;){for(;f<16&&w!==0;)g|=t[e++]<<f,f+=8,w===1?w=t[e++]:--w;if(f<u)break;var F=g&c;if(g>>=u,f-=u,F!==o){if(F===s)break;for(var T=F<l?F:R,I=0,P=T;P>o;)P=N[P]>>8,++I;var G=P;if(y+I+(T!==F?1:0)>i)return void Dn.log("Warning, gif stream longer than expected.");n[y++]=G;var J=y+=I;for(T!==F&&(n[y++]=G),P=T;I--;)P=N[P],n[--J]=255&P,P>>=8;R!==null&&l<4096&&(N[l++]=R<<8|G,l>=c+1&&u<12&&(++u,c=c<<1|1)),R=F}else l=s+1,c=(1<<(u=r+1))-1,R=null}return y!==i&&Dn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function kg(t){var e,n,i,r,o,s=Math.floor,l=new Array(64),u=new Array(64),c=new Array(64),f=new Array(64),g=new Array(65535),y=new Array(65535),w=new Array(64),N=new Array(64),R=[],F=0,T=7,I=new Array(64),P=new Array(64),G=new Array(64),J=new Array(256),Q=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],b=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_e=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(j,ee){for(var ae=0,ue=0,he=new Array,Te=1;Te<=16;Te++){for(var be=1;be<=j[Te];be++)he[ee[ue]]=[],he[ee[ue]][0]=ae,he[ee[ue]][1]=Te,ue++,ae++;ae*=2}return he}function se(j){for(var ee=j[0],ae=j[1]-1;ae>=0;)ee&1<<ae&&(F|=1<<T),ae--,--T<0&&(F==255?(W(255),W(0)):W(F),T=7,F=0)}function W(j){R.push(j)}function oe(j){W(j>>8&255),W(255&j)}function fe(j,ee,ae,ue,he){for(var Te,be=he[0],ke=he[240],Ge=function(We,Ye){var et,Xe,ft,At,Rt,pt,xt,Zt,St,zt,it=0;for(St=0;St<8;++St){et=We[it],Xe=We[it+1],ft=We[it+2],At=We[it+3],Rt=We[it+4],pt=We[it+5],xt=We[it+6];var qn=et+(Zt=We[it+7]),Jt=et-Zt,Ni=Xe+xt,rn=Xe-xt,Cn=ft+pt,ki=ft-pt,Qt=At+Rt,Po=At-Rt,In=qn+Qt,pi=qn-Qt,lr=Ni+Cn,Pn=Ni-Cn;We[it]=In+lr,We[it+4]=In-lr;var vt=.707106781*(Pn+pi);We[it+2]=pi+vt,We[it+6]=pi-vt;var nn=.382683433*((In=Po+ki)-(Pn=rn+Jt)),Gr=.5411961*In+nn,Xn=1.306562965*Pn+nn,Li=.707106781*(lr=ki+rn),ji=Jt+Li,lt=Jt-Li;We[it+5]=lt+Gr,We[it+3]=lt-Gr,We[it+1]=ji+Xn,We[it+7]=ji-Xn,it+=8}for(it=0,St=0;St<8;++St){et=We[it],Xe=We[it+8],ft=We[it+16],At=We[it+24],Rt=We[it+32],pt=We[it+40],xt=We[it+48];var ur=et+(Zt=We[it+56]),Ri=et-Zt,ei=Xe+xt,hn=Xe-xt,tt=ft+pt,Wn=ft-pt,ds=At+Rt,jr=At-Rt,_i=ur+ds,Mi=ur-ds,Di=ei+tt,ti=ei-tt;We[it]=_i+Di,We[it+32]=_i-Di;var Hn=.707106781*(ti+Mi);We[it+16]=Mi+Hn,We[it+48]=Mi-Hn;var Ir=.382683433*((_i=jr+Wn)-(ti=hn+Ri)),No=.5411961*_i+Ir,ko=1.306562965*ti+Ir,Lo=.707106781*(Di=Wn+hn),Ro=Ri+Lo,ps=Ri-Lo;We[it+40]=ps+No,We[it+24]=ps-No,We[it+8]=Ro+ko,We[it+56]=Ro-ko,it++}for(St=0;St<64;++St)zt=We[St]*Ye[St],w[St]=zt>0?zt+.5|0:zt-.5|0;return w}(j,ee),qe=0;qe<64;++qe)N[D[qe]]=Ge[qe];var Je=N[0]-ae;ae=N[0],Je==0?se(ue[0]):(se(ue[y[Te=32767+Je]]),se(g[Te]));for(var Ze=63;Ze>0&&N[Ze]==0;)Ze--;if(Ze==0)return se(be),ae;for(var mt,De=1;De<=Ze;){for(var pe=De;N[De]==0&&De<=Ze;)++De;var It=De-pe;if(It>=16){mt=It>>4;for(var ut=1;ut<=mt;++ut)se(ke);It&=15}Te=32767+N[De],se(he[(It<<4)+y[Te]]),se(g[Te]),De++}return Ze!=63&&se(be),ae}function xe(j){j=Math.min(Math.max(j,1),100),o!=j&&(function(ee){for(var ae=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var he=s((ae[ue]*ee+50)/100);he=Math.min(Math.max(he,1),255),l[D[ue]]=he}for(var Te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var ke=s((Te[be]*ee+50)/100);ke=Math.min(Math.max(ke,1),255),u[D[be]]=ke}for(var Ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,Je=0;Je<8;Je++)for(var Ze=0;Ze<8;Ze++)c[qe]=1/(l[D[qe]]*Ge[Je]*Ge[Ze]*8),f[qe]=1/(u[D[qe]]*Ge[Je]*Ge[Ze]*8),qe++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),o=j)}this.encode=function(j,ee){ee&&xe(ee),R=new Array,F=0,T=7,oe(65496),oe(65504),oe(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),oe(1),oe(1),W(0),W(0),function(){oe(65499),oe(132),W(0);for(var Xe=0;Xe<64;Xe++)W(l[Xe]);W(1);for(var ft=0;ft<64;ft++)W(u[ft])}(),function(Xe,ft){oe(65472),oe(17),W(8),oe(ft),oe(Xe),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(j.width,j.height),function(){oe(65476),oe(418),W(0);for(var Xe=0;Xe<16;Xe++)W(C[Xe+1]);for(var ft=0;ft<=11;ft++)W(O[ft]);W(16);for(var At=0;At<16;At++)W(H[At+1]);for(var Rt=0;Rt<=161;Rt++)W(k[Rt]);W(1);for(var pt=0;pt<16;pt++)W(b[pt+1]);for(var xt=0;xt<=11;xt++)W(V[xt]);W(17);for(var Zt=0;Zt<16;Zt++)W(ie[Zt+1]);for(var St=0;St<=161;St++)W(_e[St])}(),oe(65498),oe(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var ae=0,ue=0,he=0;F=0,T=7,this.encode.displayName="_encode_";for(var Te,be,ke,Ge,qe,Je,Ze,mt,De,pe=j.data,It=j.width,ut=j.height,We=4*It,Ye=0;Ye<ut;){for(Te=0;Te<We;){for(qe=We*Ye+Te,Ze=-1,mt=0,De=0;De<64;De++)Je=qe+(mt=De>>3)*We+(Ze=4*(7&De)),Ye+mt>=ut&&(Je-=We*(Ye+1+mt-ut)),Te+Ze>=We&&(Je-=Te+Ze-We+4),be=pe[Je++],ke=pe[Je++],Ge=pe[Je++],I[De]=(Q[be]+Q[ke+256>>0]+Q[Ge+512>>0]>>16)-128,P[De]=(Q[be+768>>0]+Q[ke+1024>>0]+Q[Ge+1280>>0]>>16)-128,G[De]=(Q[be+1280>>0]+Q[ke+1536>>0]+Q[Ge+1792>>0]>>16)-128;ae=fe(I,c,ae,e,i),ue=fe(P,f,ue,n,r),he=fe(G,f,he,n,r),Te+=32}Ye+=8}if(T>=0){var et=[];et[1]=T+1,et[0]=(1<<T+1)-1,se(et)}return oe(65497),new Uint8Array(R)},t=t||50,function(){for(var j=String.fromCharCode,ee=0;ee<256;ee++)J[ee]=j(ee)}(),e=le(C,O),n=le(b,V),i=le(H,k),r=le(ie,_e),function(){for(var j=1,ee=2,ae=1;ae<=15;ae++){for(var ue=j;ue<ee;ue++)y[32767+ue]=ae,g[32767+ue]=[],g[32767+ue][1]=ae,g[32767+ue][0]=ue;for(var he=-(ee-1);he<=-j;he++)y[32767+he]=ae,g[32767+he]=[],g[32767+he][1]=ae,g[32767+he][0]=ee-1+he;j<<=1,ee<<=1}}(),function(){for(var j=0;j<256;j++)Q[j]=19595*j,Q[j+256>>0]=38470*j,Q[j+512>>0]=7471*j+32768,Q[j+768>>0]=-11059*j,Q[j+1024>>0]=-21709*j,Q[j+1280>>0]=32768*j+8421375,Q[j+1536>>0]=-27439*j,Q[j+1792>>0]=-5329*j}(),xe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rs(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kw(t){function e(C){if(!C)throw Error("assert :P")}function n(C,O,H){for(var k=0;4>k;k++)if(C[O+k]!=H.charCodeAt(k))return!0;return!1}function i(C,O,H,k,b){for(var V=0;V<b;V++)C[O+V]=H[k+V]}function r(C,O,H,k){for(var b=0;b<k;b++)C[O+b]=H}function o(C){return new Int32Array(C)}function s(C,O){for(var H=[],k=0;k<C;k++)H.push(new O);return H}function l(C,O){var H=[];return function k(b,V,ie){for(var _e=ie[V],le=0;le<_e&&(b.push(ie.length>V+1?[]:new O),!(ie.length<V+1));le++)k(b[le],V+1,ie)}(H,0,C),H}var u=function(){var C=this;function O(p,x){for(var A=1<<x-1>>>0;p&A;)A>>>=1;return A?(p&A-1)+A:p}function H(p,x,A,U,K){e(!(U%A));do p[x+(U-=A)]=K;while(0<U)}function k(p,x,A,U,K){if(e(2328>=K),512>=K)var Y=o(512);else if((Y=o(K))==null)return 0;return function(Z,ne,re,ce,ve,Pe){var Ne,Ae,Ve=ne,Me=1<<re,ye=o(16),Se=o(16);for(e(ve!=0),e(ce!=null),e(Z!=null),e(0<re),Ae=0;Ae<ve;++Ae){if(15<ce[Ae])return 0;++ye[ce[Ae]]}if(ye[0]==ve)return 0;for(Se[1]=0,Ne=1;15>Ne;++Ne){if(ye[Ne]>1<<Ne)return 0;Se[Ne+1]=Se[Ne]+ye[Ne]}for(Ae=0;Ae<ve;++Ae)Ne=ce[Ae],0<ce[Ae]&&(Pe[Se[Ne]++]=Ae);if(Se[15]==1)return(ce=new b).g=0,ce.value=Pe[0],H(Z,Ve,1,Me,ce),Me;var Fe,ze=-1,Oe=Me-1,at=0,nt=1,Tt=1,rt=1<<re;for(Ae=0,Ne=1,ve=2;Ne<=re;++Ne,ve<<=1){if(nt+=Tt<<=1,0>(Tt-=ye[Ne]))return 0;for(;0<ye[Ne];--ye[Ne])(ce=new b).g=Ne,ce.value=Pe[Ae++],H(Z,Ve+at,ve,rt,ce),at=O(at,Ne)}for(Ne=re+1,ve=2;15>=Ne;++Ne,ve<<=1){if(nt+=Tt<<=1,0>(Tt-=ye[Ne]))return 0;for(;0<ye[Ne];--ye[Ne]){if(ce=new b,(at&Oe)!=ze){for(Ve+=rt,Fe=1<<(ze=Ne)-re;15>ze&&!(0>=(Fe-=ye[ze]));)++ze,Fe<<=1;Me+=rt=1<<(Fe=ze-re),Z[ne+(ze=at&Oe)].g=Fe+re,Z[ne+ze].value=Ve-ne-ze}ce.g=Ne-re,ce.value=Pe[Ae++],H(Z,Ve+(at>>re),ve,rt,ce),at=O(at,Ne)}}return nt!=2*Se[15]-1?0:Me}(p,x,A,U,K,Y)}function b(){this.value=this.g=0}function V(){this.value=this.g=0}function ie(){this.G=s(5,b),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(ni,V)}function _e(p,x,A,U){e(p!=null),e(x!=null),e(2147483648>U),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=x,p.pa=A,p.Jd=x,p.Yc=A+U,p.Zc=4<=U?A+U-4+1:A,Te(p)}function le(p,x){for(var A=0;0<x--;)A|=ke(p,128)<<x;return A}function se(p,x){var A=le(p,x);return be(p)?-A:A}function W(p,x,A,U){var K,Y=0;for(e(p!=null),e(x!=null),e(4294967288>U),p.Sb=U,p.Ra=0,p.u=0,p.h=0,4<U&&(U=4),K=0;K<U;++K)Y+=x[A+K]<<8*K;p.Ra=Y,p.bb=U,p.oa=x,p.pa=A}function oe(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<bs-8>>>0,++p.bb,p.u-=8;ae(p)&&(p.h=1,p.u=0)}function fe(p,x){if(e(0<=x),!p.h&&x<=Rr){var A=ee(p)&nl[x];return p.u+=x,oe(p),A}return p.h=1,p.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(p){return p.Ra>>>(p.u&bs-1)>>>0}function ae(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>bs}function ue(p,x){p.u=x,p.h=ae(p)}function he(p){p.u>=Ql&&(e(p.u>=Ql),oe(p))}function Te(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function be(p){return le(p,1)}function ke(p,x){var A=p.Ca;0>p.b&&Te(p);var U=p.b,K=A*x>>>8,Y=(p.I>>>U>K)+0;for(Y?(A-=K,p.I-=K+1<<U>>>0):A=K+1,U=A,K=0;256<=U;)K+=8,U>>=8;return U=7^K+Oi[U],p.b-=U,p.Ca=(A<<U)-1,Y}function Ge(p,x,A){p[x+0]=A>>24&255,p[x+1]=A>>16&255,p[x+2]=A>>8&255,p[x+3]=A>>0&255}function qe(p,x){return p[x+0]<<0|p[x+1]<<8}function Je(p,x){return qe(p,x)|p[x+2]<<16}function Ze(p,x){return qe(p,x)|qe(p,x+2)<<16}function mt(p,x){var A=1<<x;return e(p!=null),e(0<x),p.X=o(A),p.X==null?0:(p.Mb=32-x,p.Xa=x,1)}function De(p,x){e(p!=null),e(x!=null),e(p.Xa==x.Xa),i(x.X,0,p.X,0,1<<x.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function It(p,x,A,U){e(A!=null),e(U!=null);var K=A[0],Y=U[0];return K==0&&(K=(p*Y+x/2)/x),Y==0&&(Y=(x*K+p/2)/p),0>=K||0>=Y?0:(A[0]=K,U[0]=Y,1)}function ut(p,x){return p+(1<<x)-1>>>x}function We(p,x){return((4278255360&p)+(4278255360&x)>>>0&4278255360)+((16711935&p)+(16711935&x)>>>0&16711935)>>>0}function Ye(p,x){C[x]=function(A,U,K,Y,Z,ne,re){var ce;for(ce=0;ce<Z;++ce){var ve=C[p](ne[re+ce-1],K,Y+ce);ne[re+ce]=We(A[U+ce],ve)}}}function et(){this.ud=this.hd=this.jd=0}function Xe(p,x){return((4278124286&(p^x))>>>1)+(p&x)>>>0}function ft(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function At(p,x){return ft(p+(p-x+.5>>1))}function Rt(p,x,A){return Math.abs(x-A)-Math.abs(p-A)}function pt(p,x,A,U,K,Y,Z){for(U=Y[Z-1],A=0;A<K;++A)Y[Z+A]=U=We(p[x+A],U)}function xt(p,x,A,U,K){var Y;for(Y=0;Y<A;++Y){var Z=p[x+Y],ne=Z>>8&255,re=16711935&(re=(re=16711935&Z)+((ne<<16)+ne));U[K+Y]=(4278255360&Z)+re>>>0}}function Zt(p,x){x.jd=p>>0&255,x.hd=p>>8&255,x.ud=p>>16&255}function St(p,x,A,U,K,Y){var Z;for(Z=0;Z<U;++Z){var ne=x[A+Z],re=ne>>>8,ce=ne,ve=255&(ve=(ve=ne>>>16)+((p.jd<<24>>24)*(re<<24>>24)>>>5));ce=255&(ce=(ce=ce+((p.hd<<24>>24)*(re<<24>>24)>>>5))+((p.ud<<24>>24)*(ve<<24>>24)>>>5)),K[Y+Z]=(4278255360&ne)+(ve<<16)+ce}}function zt(p,x,A,U,K){C[x]=function(Y,Z,ne,re,ce,ve,Pe,Ne,Ae){for(re=Pe;re<Ne;++re)for(Pe=0;Pe<Ae;++Pe)ce[ve++]=K(ne[U(Y[Z++])])},C[p]=function(Y,Z,ne,re,ce,ve,Pe){var Ne=8>>Y.b,Ae=Y.Ea,Ve=Y.K[0],Me=Y.w;if(8>Ne)for(Y=(1<<Y.b)-1,Me=(1<<Ne)-1;Z<ne;++Z){var ye,Se=0;for(ye=0;ye<Ae;++ye)ye&Y||(Se=U(re[ce++])),ve[Pe++]=K(Ve[Se&Me]),Se>>=Ne}else C["VP8LMapColor"+A](re,ce,Ve,Me,ve,Pe,Z,ne,Ae)}}function it(p,x,A,U,K){for(A=x+A;x<A;){var Y=p[x++];U[K++]=Y>>16&255,U[K++]=Y>>8&255,U[K++]=Y>>0&255}}function qn(p,x,A,U,K){for(A=x+A;x<A;){var Y=p[x++];U[K++]=Y>>16&255,U[K++]=Y>>8&255,U[K++]=Y>>0&255,U[K++]=Y>>24&255}}function Jt(p,x,A,U,K){for(A=x+A;x<A;){var Y=(Z=p[x++])>>16&240|Z>>12&15,Z=Z>>0&240|Z>>28&15;U[K++]=Y,U[K++]=Z}}function Ni(p,x,A,U,K){for(A=x+A;x<A;){var Y=(Z=p[x++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;U[K++]=Y,U[K++]=Z}}function rn(p,x,A,U,K){for(A=x+A;x<A;){var Y=p[x++];U[K++]=Y>>0&255,U[K++]=Y>>8&255,U[K++]=Y>>16&255}}function Cn(p,x,A,U,K,Y){if(Y==0)for(A=x+A;x<A;)Ge(U,((Y=p[x++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),K+=32;else i(U,K,p,x,A)}function ki(p,x){C[x][0]=C[p+"0"],C[x][1]=C[p+"1"],C[x][2]=C[p+"2"],C[x][3]=C[p+"3"],C[x][4]=C[p+"4"],C[x][5]=C[p+"5"],C[x][6]=C[p+"6"],C[x][7]=C[p+"7"],C[x][8]=C[p+"8"],C[x][9]=C[p+"9"],C[x][10]=C[p+"10"],C[x][11]=C[p+"11"],C[x][12]=C[p+"12"],C[x][13]=C[p+"13"],C[x][14]=C[p+"0"],C[x][15]=C[p+"0"]}function Qt(p){return p==Uu||p==zu||p==qu||p==a}function Po(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Po,this.f.kb=new In,this.sd=null}function lr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vt(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function nn(p,x){var A=p.T,U=x.ba.f.RGBA,K=U.eb,Y=U.fb+p.ka*U.A,Z=Xi[x.ba.S],ne=p.y,re=p.O,ce=p.f,ve=p.N,Pe=p.ea,Ne=p.W,Ae=x.cc,Ve=x.dc,Me=x.Mc,ye=x.Nc,Se=p.ka,Fe=p.ka+p.T,ze=p.U,Oe=ze+1>>1;for(Se==0?Z(ne,re,null,null,ce,ve,Pe,Ne,ce,ve,Pe,Ne,K,Y,null,null,ze):(Z(x.ec,x.fc,ne,re,Ae,Ve,Me,ye,ce,ve,Pe,Ne,K,Y-U.A,K,Y,ze),++A);Se+2<Fe;Se+=2)Ae=ce,Ve=ve,Me=Pe,ye=Ne,ve+=p.Rc,Ne+=p.Rc,Y+=2*U.A,Z(ne,(re+=2*p.fa)-p.fa,ne,re,Ae,Ve,Me,ye,ce,ve,Pe,Ne,K,Y-U.A,K,Y,ze);return re+=p.fa,p.j+Fe<p.o?(i(x.ec,x.fc,ne,re,ze),i(x.cc,x.dc,ce,ve,Oe),i(x.Mc,x.Nc,Pe,Ne,Oe),A--):1&Fe||Z(ne,re,null,null,ce,ve,Pe,Ne,ce,ve,Pe,Ne,K,Y+U.A,null,null,ze),A}function Gr(p,x,A){var U=p.F,K=[p.J];if(U!=null){var Y=p.U,Z=x.ba.S,ne=Z==iu||Z==qu;x=x.ba.f.RGBA;var re=[0],ce=p.ka;re[0]=p.T,p.Kb&&(ce==0?--re[0]:(--ce,K[0]-=p.width),p.j+p.ka+p.T==p.o&&(re[0]=p.o-p.j-ce));var ve=x.eb;ce=x.fb+ce*x.A,p=_n(U,K[0],p.width,Y,re,ve,ce+(ne?0:3),x.A),e(A==re),p&&Qt(Z)&&Ei(ve,ce,ne,Y,re,x.A)}return 0}function Xn(p){var x=p.ma,A=x.ba.S,U=11>A,K=A==tu||A==nu||A==iu||A==Bu||A==12||Qt(A);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Zl(x.Oa,p,K?11:12))return 0;if(K&&Qt(A)&&Ue(),p.da)alert("todo:use_scaling");else{if(U){if(x.Ib=vt,p.Kb){if(A=p.U+1>>1,x.memory=o(p.U+2*A),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+p.U,x.Mc=x.cc,x.Nc=x.dc+A,x.Ib=nn,Ue()}}else alert("todo:EmitYUV");K&&(x.Jb=Gr,U&&Ee())}if(U&&!c_){for(p=0;256>p;++p)jA[p]=89858*(p-128)+qf>>zf,KA[p]=-22014*(p-128)+qf,$A[p]=-45773*(p-128),WA[p]=113618*(p-128)+qf>>zf;for(p=oh;p<Nm;++p)x=76283*(p-16)+qf>>zf,JA[p-oh]=Ht(x,255),YA[p-oh]=Ht(x+8>>4,15);c_=1}return 1}function Li(p){var x=p.ma,A=p.U,U=p.T;return e(!(1&p.ka)),0>=A||0>=U?0:(A=x.Ib(p,x),x.Jb!=null&&x.Jb(p,x,A),x.Dc+=A,1)}function ji(p){p.ma.memory=null}function lt(p,x,A,U){return fe(p,8)!=47?0:(x[0]=fe(p,14)+1,A[0]=fe(p,14)+1,U[0]=fe(p,1),fe(p,3)!=0?0:!p.h)}function ur(p,x){if(4>p)return p+1;var A=p-2>>1;return(2+(1&p)<<A)+fe(x,A)+1}function Ri(p,x){return 120<x?x-120:1<=(A=((A=me[x-1])>>4)*p+(8-(15&A)))?A:1;var A}function ei(p,x,A){var U=ee(A),K=p[x+=255&U].g-8;return 0<K&&(ue(A,A.u+8),U=ee(A),x+=p[x].value,x+=U&(1<<K)-1),ue(A,A.u+p[x].g),p[x].value}function hn(p,x,A){return A.g+=p.g,A.value+=p.value<<x>>>0,e(8>=A.g),p.g}function tt(p,x,A){var U=p.xc;return e((x=U==0?0:p.vc[p.md*(A>>U)+(x>>U)])<p.Wb),p.Ya[x]}function Wn(p,x,A,U){var K=p.ab,Y=p.c*x,Z=p.C;x=Z+x;var ne=A,re=U;for(U=p.Ta,A=p.Ua;0<K--;){var ce=p.gc[K],ve=Z,Pe=x,Ne=ne,Ae=re,Ve=(re=U,ne=A,ce.Ea);switch(e(ve<Pe),e(Pe<=ce.nc),ce.hc){case 2:Fu(Ne,Ae,(Pe-ve)*Ve,re,ne);break;case 0:var Me=ve,ye=Pe,Se=re,Fe=ne,ze=(rt=ce).Ea;Me==0&&(th(Ne,Ae,null,null,1,Se,Fe),pt(Ne,Ae+1,0,0,ze-1,Se,Fe+1),Ae+=ze,Fe+=ze,++Me);for(var Oe=1<<rt.b,at=Oe-1,nt=ut(ze,rt.b),Tt=rt.K,rt=rt.w+(Me>>rt.b)*nt;Me<ye;){var mn=Tt,Sn=rt,an=1;for(Mr(Ne,Ae,Se,Fe-ze,1,Se,Fe);an<ze;){var en=(an&~at)+Oe;en>ze&&(en=ze),(0,Cs[mn[Sn++]>>8&15])(Ne,Ae+ +an,Se,Fe+an-ze,en-an,Se,Fe+an),an=en}Ae+=ze,Fe+=ze,++Me&at||(rt+=nt)}Pe!=ce.nc&&i(re,ne-Ve,re,ne+(Pe-ve-1)*Ve,Ve);break;case 1:for(Ve=Ne,ye=Ae,ze=(Ne=ce.Ea)-(Fe=Ne&~(Se=(Ae=1<<ce.b)-1)),Me=ut(Ne,ce.b),Oe=ce.K,ce=ce.w+(ve>>ce.b)*Me;ve<Pe;){for(at=Oe,nt=ce,Tt=new et,rt=ye+Fe,mn=ye+Ne;ye<rt;)Zt(at[nt++],Tt),Is(Tt,Ve,ye,Ae,re,ne),ye+=Ae,ne+=Ae;ye<mn&&(Zt(at[nt++],Tt),Is(Tt,Ve,ye,ze,re,ne),ye+=ze,ne+=ze),++ve&Se||(ce+=Me)}break;case 3:if(Ne==re&&Ae==ne&&0<ce.b){for(ye=re,Ne=Ve=ne+(Pe-ve)*Ve-(Fe=(Pe-ve)*ut(ce.Ea,ce.b)),Ae=re,Se=ne,Me=[],Fe=(ze=Fe)-1;0<=Fe;--Fe)Me[Fe]=Ae[Se+Fe];for(Fe=ze-1;0<=Fe;--Fe)ye[Ne+Fe]=Me[Fe];xi(ce,ve,Pe,re,Ve,re,ne)}else xi(ce,ve,Pe,Ne,Ae,re,ne)}ne=U,re=A}re!=A&&i(U,A,ne,re,Y)}function ds(p,x){var A=p.V,U=p.Ba+p.c*p.C,K=x-p.C;if(e(x<=p.l.o),e(16>=K),0<K){var Y=p.l,Z=p.Ta,ne=p.Ua,re=Y.width;if(Wn(p,K,A,U),K=ne=[ne],e((A=p.C)<(U=x)),e(Y.v<Y.va),U>Y.o&&(U=Y.o),A<Y.j){var ce=Y.j-A;A=Y.j,K[0]+=ce*re}if(A>=U?A=0:(K[0]+=4*Y.v,Y.ka=A-Y.j,Y.U=Y.va-Y.v,Y.T=U-A,A=1),A){if(ne=ne[0],11>(A=p.ca).S){var ve=A.f.RGBA,Pe=(U=A.S,K=Y.U,Y=Y.T,ce=ve.eb,ve.A),Ne=Y;for(ve=ve.fb+p.Ma*ve.A;0<Ne--;){var Ae=Z,Ve=ne,Me=K,ye=ce,Se=ve;switch(U){case Vu:Si(Ae,Ve,Me,ye,Se);break;case tu:Ti(Ae,Ve,Me,ye,Se);break;case Uu:Ti(Ae,Ve,Me,ye,Se),Ei(ye,Se,0,Me,1,0);break;case nh:Zr(Ae,Ve,Me,ye,Se);break;case nu:Cn(Ae,Ve,Me,ye,Se,1);break;case zu:Cn(Ae,Ve,Me,ye,Se,1),Ei(ye,Se,0,Me,1,0);break;case iu:Cn(Ae,Ve,Me,ye,Se,0);break;case qu:Cn(Ae,Ve,Me,ye,Se,0),Ei(ye,Se,1,Me,1,0);break;case Bu:yo(Ae,Ve,Me,ye,Se);break;case a:yo(Ae,Ve,Me,ye,Se),yn(ye,Se,Me,1,0);break;case Vf:fr(Ae,Ve,Me,ye,Se);break;default:e(0)}ne+=re,ve+=Pe}p.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=A.height)}}p.C=x,e(p.C<=p.i)}function jr(p){var x;if(0<p.ua)return 0;for(x=0;x<p.Wb;++x){var A=p.Ya[x].G,U=p.Ya[x].H;if(0<A[1][U[1]+0].g||0<A[2][U[2]+0].g||0<A[3][U[3]+0].g)return 0}return 1}function _i(p,x,A,U,K,Y){if(p.Z!=0){var Z=p.qd,ne=p.rd;for(e(xn[p.Z]!=null);x<A;++x)xn[p.Z](Z,ne,U,K,U,K,Y),Z=U,ne=K,K+=Y;p.qd=Z,p.rd=ne}}function Mi(p,x){var A=p.l.ma,U=A.Z==0||A.Z==1?p.l.j:p.C;if(U=p.C<U?U:p.C,e(x<=p.l.o),x>U){var K=p.l.width,Y=A.ca,Z=A.tb+K*U,ne=p.V,re=p.Ba+p.c*U,ce=p.gc;e(p.ab==1),e(ce[0].hc==3),Yr(ce[0],U,x,ne,re,Y,Z),_i(A,U,x,Y,Z,K)}p.C=p.Ma=x}function Di(p,x,A,U,K,Y,Z){var ne=p.$/U,re=p.$%U,ce=p.m,ve=p.s,Pe=A+p.$,Ne=Pe;K=A+U*K;var Ae=A+U*Y,Ve=280+ve.ua,Me=p.Pb?ne:16777216,ye=0<ve.ua?ve.Wa:null,Se=ve.wc,Fe=Pe<Ae?tt(ve,re,ne):null;e(p.C<Y),e(Ae<=K);var ze=!1;e:for(;;){for(;ze||Pe<Ae;){var Oe=0;if(ne>=Me){var at=Pe-A;e((Me=p).Pb),Me.wd=Me.m,Me.xd=at,0<Me.s.ua&&De(Me.s.Wa,Me.s.vb),Me=ne+Le}if(re&Se||(Fe=tt(ve,re,ne)),e(Fe!=null),Fe.Qb&&(x[Pe]=Fe.qb,ze=!0),!ze)if(he(ce),Fe.jc){Oe=ce,at=x;var nt=Pe,Tt=Fe.pd[ee(Oe)&ni-1];e(Fe.jc),256>Tt.g?(ue(Oe,Oe.u+Tt.g),at[nt]=Tt.value,Oe=0):(ue(Oe,Oe.u+Tt.g-256),e(256<=Tt.value),Oe=Tt.value),Oe==0&&(ze=!0)}else Oe=ei(Fe.G[0],Fe.H[0],ce);if(ce.h)break;if(ze||256>Oe){if(!ze)if(Fe.nd)x[Pe]=(Fe.qb|Oe<<8)>>>0;else{if(he(ce),ze=ei(Fe.G[1],Fe.H[1],ce),he(ce),at=ei(Fe.G[2],Fe.H[2],ce),nt=ei(Fe.G[3],Fe.H[3],ce),ce.h)break;x[Pe]=(nt<<24|ze<<16|Oe<<8|at)>>>0}if(ze=!1,++Pe,++re>=U&&(re=0,++ne,Z!=null&&ne<=Y&&!(ne%16)&&Z(p,ne),ye!=null))for(;Ne<Pe;)Oe=x[Ne++],ye.X[(506832829*Oe&4294967295)>>>ye.Mb]=Oe}else if(280>Oe){if(Oe=ur(Oe-256,ce),at=ei(Fe.G[4],Fe.H[4],ce),he(ce),at=Ri(U,at=ur(at,ce)),ce.h)break;if(Pe-A<at||K-Pe<Oe)break e;for(nt=0;nt<Oe;++nt)x[Pe+nt]=x[Pe+nt-at];for(Pe+=Oe,re+=Oe;re>=U;)re-=U,++ne,Z!=null&&ne<=Y&&!(ne%16)&&Z(p,ne);if(e(Pe<=K),re&Se&&(Fe=tt(ve,re,ne)),ye!=null)for(;Ne<Pe;)Oe=x[Ne++],ye.X[(506832829*Oe&4294967295)>>>ye.Mb]=Oe}else{if(!(Oe<Ve))break e;for(ze=Oe-280,e(ye!=null);Ne<Pe;)Oe=x[Ne++],ye.X[(506832829*Oe&4294967295)>>>ye.Mb]=Oe;Oe=Pe,e(!(ze>>>(at=ye).Xa)),x[Oe]=at.X[ze],ze=!0}ze||e(ce.h==ae(ce))}if(p.Pb&&ce.h&&Pe<K)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&De(p.s.vb,p.s.Wa);else{if(ce.h)break e;Z!=null&&Z(p,ne>Y?Y:ne),p.a=0,p.$=Pe-A}return 1}return p.a=3,0}function ti(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var x=p.Wa;x!=null&&(x.X=null),p.vb=null,e(p!=null)}function Hn(){var p=new ea;return p==null?null:(p.a=0,p.xb=ih,ki("Predictor","VP8LPredictors"),ki("Predictor","VP8LPredictors_C"),ki("PredictorAdd","VP8LPredictorsAdd"),ki("PredictorAdd","VP8LPredictorsAdd_C"),Fu=xt,Is=St,Si=it,Ti=qn,yo=Jt,fr=Ni,Zr=rn,C.VP8LMapColor32b=il,C.VP8LMapColor8b=Ma,p)}function Ir(p,x,A,U,K){var Y=1,Z=[p],ne=[x],re=U.m,ce=U.s,ve=null,Pe=0;e:for(;;){if(A)for(;Y&&fe(re,1);){var Ne=Z,Ae=ne,Ve=U,Me=1,ye=Ve.m,Se=Ve.gc[Ve.ab],Fe=fe(ye,2);if(Ve.Oc&1<<Fe)Y=0;else{switch(Ve.Oc|=1<<Fe,Se.hc=Fe,Se.Ea=Ne[0],Se.nc=Ae[0],Se.K=[null],++Ve.ab,e(4>=Ve.ab),Fe){case 0:case 1:Se.b=fe(ye,3)+2,Me=Ir(ut(Se.Ea,Se.b),ut(Se.nc,Se.b),0,Ve,Se.K),Se.K=Se.K[0];break;case 3:var ze,Oe=fe(ye,8)+1,at=16<Oe?0:4<Oe?1:2<Oe?2:3;if(Ne[0]=ut(Se.Ea,at),Se.b=at,ze=Me=Ir(Oe,1,0,Ve,Se.K)){var nt,Tt=Oe,rt=Se,mn=1<<(8>>rt.b),Sn=o(mn);if(Sn==null)ze=0;else{var an=rt.K[0],en=rt.w;for(Sn[0]=rt.K[0][0],nt=1;nt<1*Tt;++nt)Sn[nt]=We(an[en+nt],Sn[nt-1]);for(;nt<4*mn;++nt)Sn[nt]=0;rt.K[0]=null,rt.K[0]=Sn,ze=1}}Me=ze;break;case 2:break;default:e(0)}Y=Me}}if(Z=Z[0],ne=ne[0],Y&&fe(re,1)&&!(Y=1<=(Pe=fe(re,4))&&11>=Pe)){U.a=3;break e}var Mn;if(Mn=Y)t:{var kn,Gt,mi,eo=U,gi=Z,to=ne,Tn=Pe,wo=A,xo=eo.m,Bi=eo.s,er=[null],Or=1,ns=0,ua=Ce[Tn];n:for(;;){if(wo&&fe(xo,1)){var Ui=fe(xo,3)+2,Da=ut(gi,Ui),ru=ut(to,Ui),Gu=Da*ru;if(!Ir(Da,ru,0,eo,er))break n;for(er=er[0],Bi.xc=Ui,kn=0;kn<Gu;++kn){var ul=er[kn]>>8&65535;er[kn]=ul,ul>=Or&&(Or=ul+1)}}if(xo.h)break n;for(Gt=0;5>Gt;++Gt){var ii=E[Gt];!Gt&&0<Tn&&(ii+=1<<Tn),ns<ii&&(ns=ii)}var km=s(Or*ua,b),d_=Or,p_=s(d_,ie);if(p_==null)var Gf=null;else e(65536>=d_),Gf=p_;var sh=o(ns);if(Gf==null||sh==null||km==null){eo.a=1;break n}var jf=km;for(kn=mi=0;kn<Or;++kn){var Ns=Gf[kn],ju=Ns.G,Wu=Ns.H,m_=0,Wf=1,g_=0;for(Gt=0;5>Gt;++Gt){ii=E[Gt],ju[Gt]=jf,Wu[Gt]=mi,!Gt&&0<Tn&&(ii+=1<<Tn);r:{var $f,Lm=ii,Kf=eo,ah=sh,XA=jf,eb=mi,Rm=0,cl=Kf.m,tb=fe(cl,1);if(r(ah,0,0,Lm),tb){var nb=fe(cl,1)+1,ib=fe(cl,1),v_=fe(cl,ib==0?1:8);ah[v_]=1,nb==2&&(ah[v_=fe(cl,8)]=1);var Jf=1}else{var y_=o(19),__=fe(cl,4)+4;if(19<__){Kf.a=3;var Yf=0;break r}for($f=0;$f<__;++$f)y_[X[$f]]=fe(cl,3);var Mm=void 0,lh=void 0,w_=Kf,rb=y_,Zf=Lm,x_=ah,Dm=0,hl=w_.m,S_=8,T_=s(128,b);i:for(;k(T_,0,7,rb,19);){if(fe(hl,1)){var ob=2+2*fe(hl,3);if((Mm=2+fe(hl,ob))>Zf)break i}else Mm=Zf;for(lh=0;lh<Zf&&Mm--;){he(hl);var E_=T_[0+(127&ee(hl))];ue(hl,hl.u+E_.g);var $u=E_.value;if(16>$u)x_[lh++]=$u,$u!=0&&(S_=$u);else{var sb=$u==16,A_=$u-16,ab=_[A_],b_=fe(hl,h[A_])+ab;if(lh+b_>Zf)break i;for(var lb=sb?S_:0;0<b_--;)x_[lh++]=lb}}Dm=1;break i}Dm||(w_.a=3),Jf=Dm}(Jf=Jf&&!cl.h)&&(Rm=k(XA,eb,8,ah,Lm)),Jf&&Rm!=0?Yf=Rm:(Kf.a=3,Yf=0)}if(Yf==0)break n;if(Wf&&z[Gt]==1&&(Wf=jf[mi].g==0),m_+=jf[mi].g,mi+=Yf,3>=Gt){var uh,Fm=sh[0];for(uh=1;uh<ii;++uh)sh[uh]>Fm&&(Fm=sh[uh]);g_+=Fm}}if(Ns.nd=Wf,Ns.Qb=0,Wf&&(Ns.qb=(ju[3][Wu[3]+0].value<<24|ju[1][Wu[1]+0].value<<16|ju[2][Wu[2]+0].value)>>>0,m_==0&&256>ju[0][Wu[0]+0].value&&(Ns.Qb=1,Ns.qb+=ju[0][Wu[0]+0].value<<8)),Ns.jc=!Ns.Qb&&6>g_,Ns.jc){var Qf,Fa=Ns;for(Qf=0;Qf<ni;++Qf){var fl=Qf,dl=Fa.pd[fl],Xf=Fa.G[0][Fa.H[0]+fl];256<=Xf.value?(dl.g=Xf.g+256,dl.value=Xf.value):(dl.g=0,dl.value=0,fl>>=hn(Xf,8,dl),fl>>=hn(Fa.G[1][Fa.H[1]+fl],16,dl),fl>>=hn(Fa.G[2][Fa.H[2]+fl],0,dl),hn(Fa.G[3][Fa.H[3]+fl],24,dl))}}}Bi.vc=er,Bi.Wb=Or,Bi.Ya=Gf,Bi.yc=km,Mn=1;break t}Mn=0}if(!(Y=Mn)){U.a=3;break e}if(0<Pe){if(ce.ua=1<<Pe,!mt(ce.Wa,Pe)){U.a=1,Y=0;break e}}else ce.ua=0;var Om=U,C_=Z,ub=ne,Vm=Om.s,Bm=Vm.xc;if(Om.c=C_,Om.i=ub,Vm.md=ut(C_,Bm),Vm.wc=Bm==0?-1:(1<<Bm)-1,A){U.xb=Cm;break e}if((ve=o(Z*ne))==null){U.a=1,Y=0;break e}Y=(Y=Di(U,ve,0,Z,ne,ne,null))&&!re.h;break e}return Y?(K!=null?K[0]=ve:(e(ve==null),e(A)),U.$=0,A||ti(ce)):ti(ce),Y}function No(p,x){var A=p.c*p.i,U=A+x+16*x;return e(p.c<=x),p.V=o(U),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+A+x,1)}function ko(p,x){var A=p.C,U=x-A,K=p.V,Y=p.Ba+p.c*A;for(e(x<=p.l.o);0<U;){var Z=16<U?16:U,ne=p.l.ma,re=p.l.width,ce=re*Z,ve=ne.ca,Pe=ne.tb+re*A,Ne=p.Ta,Ae=p.Ua;Wn(p,Z,K,Y),Kn(Ne,Ae,ve,Pe,ce),_i(ne,A,A+Z,ve,Pe,re),U-=Z,K+=Z*p.c,A+=Z}e(A==x),p.C=p.Ma=x}function Lo(){this.ub=this.yd=this.td=this.Rb=0}function Ro(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ps(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ms(){this.Yb=function(){var p=[];return function x(A,U,K){for(var Y=K[U],Z=0;Z<Y&&(A.push(K.length>U+1?[]:0),!(K.length<U+1));Z++)x(A[Z],U+1,K)}(p,0,[3,11]),p}()}function $s(){this.jb=o(3),this.Wc=l([4,8],ms),this.Xc=l([4,17],ms)}function tl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Mo(){this.ld=this.La=this.dd=this.tc=0}function Do(){this.Na=this.la=0}function uo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function co(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function gs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Mo),this.Y=0,this.ya=Array(new co),this.aa=0,this.l=new Pr}function Ks(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Aa(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new Lo,this.Kc=new Ro,this.ed=new tl,this.Qa=new ps,this.Ic=this.$c=this.Aa=0,this.D=new gs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,xe),this.ia=0,this.pb=s(4,uo),this.Pa=new $s,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ks),this.Hd=0,this.rb=Array(new Do),this.sb=0,this.wa=Array(new Mo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new co),this.L=this.aa=0,this.gd=l([4,2],Mo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jt(){var p=new Aa;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,gt||(gt=ho)),p}function Pt(p,x,A){return p.a==0&&(p.a=x,p.sc=A,p.cb=0),0}function Fo(p,x,A){return 3<=A&&p[x+0]==157&&p[x+1]==1&&p[x+2]==42}function Wr(p,x){if(p==null)return 0;if(p.a=0,p.sc="OK",x==null)return Pt(p,2,"null VP8Io passed to VP8GetHeaders()");var A=x.data,U=x.w,K=x.ha;if(4>K)return Pt(p,7,"Truncated header.");var Y=A[U+0]|A[U+1]<<8|A[U+2]<<16,Z=p.Od;if(Z.Rb=!(1&Y),Z.td=Y>>1&7,Z.yd=Y>>4&1,Z.ub=Y>>5,3<Z.td)return Pt(p,3,"Incorrect keyframe parameters.");if(!Z.yd)return Pt(p,4,"Frame not displayable.");U+=3,K-=3;var ne=p.Kc;if(Z.Rb){if(7>K)return Pt(p,7,"cannot parse picture header");if(!Fo(A,U,K))return Pt(p,3,"Bad code word");ne.c=16383&(A[U+4]<<8|A[U+3]),ne.Td=A[U+4]>>6,ne.i=16383&(A[U+6]<<8|A[U+5]),ne.Ud=A[U+6]>>6,U+=7,K-=7,p.za=ne.c+15>>4,p.Ub=ne.i+15>>4,x.width=ne.c,x.height=ne.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,r((Y=p.Pa).jb,0,255,Y.jb.length),e((Y=p.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,r(Y.Zb,0,0,Y.Zb.length),r(Y.Lb,0,0,Y.Lb)}if(Z.ub>K)return Pt(p,7,"bad partition length");_e(Y=p.m,A,U,Z.ub),U+=Z.ub,K-=Z.ub,Z.Rb&&(ne.Ld=be(Y),ne.Kd=be(Y)),ne=p.Qa;var re,ce=p.Pa;if(e(Y!=null),e(ne!=null),ne.Cb=be(Y),ne.Cb){if(ne.Bb=be(Y),be(Y)){for(ne.Fb=be(Y),re=0;4>re;++re)ne.Zb[re]=be(Y)?se(Y,7):0;for(re=0;4>re;++re)ne.Lb[re]=be(Y)?se(Y,6):0}if(ne.Bb)for(re=0;3>re;++re)ce.jb[re]=be(Y)?le(Y,8):255}else ne.Bb=0;if(Y.Ka)return Pt(p,3,"cannot parse segment header");if((ne=p.ed).zd=be(Y),ne.Tb=le(Y,6),ne.wb=le(Y,3),ne.Pc=be(Y),ne.Pc&&be(Y)){for(ce=0;4>ce;++ce)be(Y)&&(ne.vd[ce]=se(Y,6));for(ce=0;4>ce;++ce)be(Y)&&(ne.od[ce]=se(Y,6))}if(p.L=ne.Tb==0?0:ne.zd?1:2,Y.Ka)return Pt(p,3,"cannot parse filter header");var ve=K;if(K=re=U,U=re+ve,ne=ve,p.Xb=(1<<le(p.m,2))-1,ve<3*(ce=p.Xb))A=7;else{for(re+=3*ce,ne-=3*ce,ve=0;ve<ce;++ve){var Pe=A[K+0]|A[K+1]<<8|A[K+2]<<16;Pe>ne&&(Pe=ne),_e(p.Jc[+ve],A,re,Pe),re+=Pe,ne-=Pe,K+=3}_e(p.Jc[+ce],A,re,ne),A=re<U?0:5}if(A!=0)return Pt(p,A,"cannot parse partitions");for(A=le(re=p.m,7),K=be(re)?se(re,4):0,U=be(re)?se(re,4):0,ne=be(re)?se(re,4):0,ce=be(re)?se(re,4):0,re=be(re)?se(re,4):0,ve=p.Qa,Pe=0;4>Pe;++Pe){if(ve.Cb){var Ne=ve.Zb[Pe];ve.Fb||(Ne+=A)}else{if(0<Pe){p.pb[Pe]=p.pb[0];continue}Ne=A}var Ae=p.pb[Pe];Ae.Sc[0]=Be[Ht(Ne+K,127)],Ae.Sc[1]=ot[Ht(Ne+0,127)],Ae.Eb[0]=2*Be[Ht(Ne+U,127)],Ae.Eb[1]=101581*ot[Ht(Ne+ne,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=Be[Ht(Ne+ce,117)],Ae.Qc[1]=ot[Ht(Ne+re,127)],Ae.lc=Ne+re}if(!Z.Rb)return Pt(p,4,"Not a key frame.");for(be(Y),Z=p.Pa,A=0;4>A;++A){for(K=0;8>K;++K)for(U=0;3>U;++U)for(ne=0;11>ne;++ne)ce=ke(Y,ll[A][K][U][ne])?le(Y,8):Xr[A][K][U][ne],Z.Wc[A][K].Yb[U][ne]=ce;for(K=0;17>K;++K)Z.Xc[A][K]=Z.Wc[A][bm[K]]}return p.kc=be(Y),p.kc&&(p.Bd=le(Y,8)),p.cb=1}function ho(p,x,A,U,K,Y,Z){var ne=x[K].Yb[A];for(A=0;16>K;++K){if(!ke(p,ne[A+0]))return K;for(;!ke(p,ne[A+1]);)if(ne=x[++K].Yb[0],A=0,K==16)return 16;var re=x[K+1].Yb;if(ke(p,ne[A+2])){var ce=p,ve=0;if(ke(ce,(Ne=ne)[(Pe=A)+3]))if(ke(ce,Ne[Pe+6])){for(ne=0,Pe=2*(ve=ke(ce,Ne[Pe+8]))+(Ne=ke(ce,Ne[Pe+9+ve])),ve=0,Ne=Wt[Pe];Ne[ne];++ne)ve+=ve+ke(ce,Ne[ne]);ve+=3+(8<<Pe)}else ke(ce,Ne[Pe+7])?(ve=7+2*ke(ce,165),ve+=ke(ce,145)):ve=5+ke(ce,159);else ve=ke(ce,Ne[Pe+4])?3+ke(ce,Ne[Pe+5]):2;ne=re[2]}else ve=1,ne=re[1];re=Z+Qi[K],0>(ce=p).b&&Te(ce);var Pe,Ne=ce.b,Ae=(Pe=ce.Ca>>1)-(ce.I>>Ne)>>31;--ce.b,ce.Ca+=Ae,ce.Ca|=1,ce.I-=(Pe+1&Ae)<<Ne,Y[re]=((ve^Ae)-Ae)*U[(0<K)+0]}return 16}function vs(p){var x=p.rb[p.sb-1];x.la=0,x.Na=0,r(p.zc,0,0,p.zc.length),p.ja=0}function Lt(p,x){if(p==null)return 0;if(x==null)return Pt(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!Wr(p,x))return 0;if(e(p.cb),x.ac==null||x.ac(x)){x.ob&&(p.L=0);var A=Hf[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=x.v-A>>4,p.zb=x.j-A>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=x.o+15+A>>4,p.Hb=x.va+15+A>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var U=p.ed;for(A=0;4>A;++A){var K;if(p.Qa.Cb){var Y=p.Qa.Lb[A];p.Qa.Fb||(Y+=U.Tb)}else Y=U.Tb;for(K=0;1>=K;++K){var Z=p.gd[A][K],ne=Y;if(U.Pc&&(ne+=U.vd[0],K&&(ne+=U.od[0])),0<(ne=0>ne?0:63<ne?63:ne)){var re=ne;0<U.wb&&(re=4<U.wb?re>>2:re>>1)>9-U.wb&&(re=9-U.wb),1>re&&(re=1),Z.dd=re,Z.tc=2*ne+re,Z.ld=40<=ne?2:15<=ne?1:0}else Z.tc=0;Z.La=K}}}A=0}else Pt(p,6,"Frame setup failed"),A=p.a;if(A=A==0){if(A){p.$c=0,0<p.Aa||(p.Ic=QA);e:{A=p.Ic,U=4*(re=p.za);var ce=32*re,ve=re+1,Pe=0<p.L?re*(0<p.Aa?2:1):0,Ne=(p.Aa==2?2:1)*re;if((Z=U+832+(K=3*(16*A+Hf[p.L])/2*ce)+(Y=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=Z)A=0;else{if(Z>p.Vb){if(p.Vb=0,p.Ec=o(Z),p.Fc=0,p.Ec==null){A=Pt(p,1,"no memory during frame initialization.");break e}p.Vb=Z}Z=p.Ec,ne=p.Fc,p.Ac=Z,p.Bc=ne,ne+=U,p.Gd=s(ce,Ks),p.Hd=0,p.rb=s(ve+1,Do),p.sb=1,p.wa=Pe?s(Pe,Mo):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=re),e(!0),p.oc=Z,p.pc=ne,ne+=832,p.ya=s(Ne,co),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=re),p.R=16*re,p.B=8*re,re=(ce=Hf[p.L])*p.R,ce=ce/2*p.B,p.sa=Z,p.ta=ne+re,p.qa=p.sa,p.ra=p.ta+16*A*p.R+ce,p.Ha=p.qa,p.Ia=p.ra+8*A*p.B+ce,p.$c=0,ne+=K,p.mb=Y?Z:null,p.nb=Y?ne:null,e(ne+Y<=p.Fc+p.Vb),vs(p),r(p.Ac,p.Bc,0,U),A=1}}if(A){if(x.ka=0,x.y=p.sa,x.O=p.ta,x.f=p.qa,x.N=p.ra,x.ea=p.Ha,x.Vd=p.Ia,x.fa=p.R,x.Rc=p.B,x.F=null,x.J=0,!Ou){for(A=-255;255>=A;++A)wn[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)Xo[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)sl[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)es[255+A]=0>A?0:255<A?255:A;Ou=1}na=kr,Yo=fo,ia=Nr,Zi=bt,Dr=Wi,$n=ys,rl=Qs,Xl=Jr,eu=jo,Vi=La,Zo=Xs,ra=Ss,Qo=wi,ol=Wo,oa=xs,sa=On,Ps=Vn,Qr=ka,_o[0]=$t,_o[1]=ba,_o[2]=_t,_o[3]=cr,_o[4]=Pa,_o[5]=Uo,_o[6]=Ki,_o[7]=ws,_o[8]=zo,_o[9]=hr,la[0]=$r,la[1]=Ca,la[2]=Lr,la[3]=po,la[4]=gn,la[5]=Ia,la[6]=_s,ts[0]=Kr,ts[1]=Vo,ts[2]=qo,ts[3]=vn,ts[4]=fn,ts[5]=Js,ts[6]=Ys,A=1}else A=0}A&&(A=function(Ae,Ve){for(Ae.M=0;Ae.M<Ae.Va;++Ae.M){var Me,ye=Ae.Jc[Ae.M&Ae.Xb],Se=Ae.m,Fe=Ae;for(Me=0;Me<Fe.za;++Me){var ze=Se,Oe=Fe,at=Oe.Ac,nt=Oe.Bc+4*Me,Tt=Oe.zc,rt=Oe.ya[Oe.aa+Me];if(Oe.Qa.Bb?rt.$b=ke(ze,Oe.Pa.jb[0])?2+ke(ze,Oe.Pa.jb[2]):ke(ze,Oe.Pa.jb[1]):rt.$b=0,Oe.kc&&(rt.Ad=ke(ze,Oe.Bd)),rt.Za=!ke(ze,145)+0,rt.Za){var mn=rt.Ob,Sn=0;for(Oe=0;4>Oe;++Oe){var an,en=Tt[0+Oe];for(an=0;4>an;++an){en=pr[at[nt+an]][en];for(var Mn=li[ke(ze,en[0])];0<Mn;)Mn=li[2*Mn+ke(ze,en[Mn])];en=-Mn,at[nt+an]=en}i(mn,Sn,at,nt,4),Sn+=4,Tt[0+Oe]=en}}else en=ke(ze,156)?ke(ze,128)?1:3:ke(ze,163)?2:0,rt.Ob[0]=en,r(at,nt,en,4),r(Tt,0,en,4);rt.Dd=ke(ze,142)?ke(ze,114)?ke(ze,183)?1:3:2:0}if(Fe.m.Ka)return Pt(Ae,7,"Premature end-of-partition0 encountered.");for(;Ae.ja<Ae.za;++Ae.ja){if(Fe=ye,ze=(Se=Ae).rb[Se.sb-1],at=Se.rb[Se.sb+Se.ja],Me=Se.ya[Se.aa+Se.ja],nt=Se.kc?Me.Ad:0)ze.la=at.la=0,Me.Za||(ze.Na=at.Na=0),Me.Hc=0,Me.Gc=0,Me.ia=0;else{var kn,Gt;if(ze=at,at=Fe,nt=Se.Pa.Xc,Tt=Se.ya[Se.aa+Se.ja],rt=Se.pb[Tt.$b],Oe=Tt.ad,mn=0,Sn=Se.rb[Se.sb-1],en=an=0,r(Oe,mn,0,384),Tt.Za)var mi=0,eo=nt[3];else{Mn=o(16);var gi=ze.Na+Sn.Na;if(gi=gt(at,nt[1],gi,rt.Eb,0,Mn,0),ze.Na=Sn.Na=(0<gi)+0,1<gi)na(Mn,0,Oe,mn);else{var to=Mn[0]+3>>3;for(Mn=0;256>Mn;Mn+=16)Oe[mn+Mn]=to}mi=1,eo=nt[0]}var Tn=15&ze.la,wo=15&Sn.la;for(Mn=0;4>Mn;++Mn){var xo=1&wo;for(to=Gt=0;4>to;++to)Tn=Tn>>1|(xo=(gi=gt(at,eo,gi=xo+(1&Tn),rt.Sc,mi,Oe,mn))>mi)<<7,Gt=Gt<<2|(3<gi?3:1<gi?2:Oe[mn+0]!=0),mn+=16;Tn>>=4,wo=wo>>1|xo<<7,an=(an<<8|Gt)>>>0}for(eo=Tn,mi=wo>>4,kn=0;4>kn;kn+=2){for(Gt=0,Tn=ze.la>>4+kn,wo=Sn.la>>4+kn,Mn=0;2>Mn;++Mn){for(xo=1&wo,to=0;2>to;++to)gi=xo+(1&Tn),Tn=Tn>>1|(xo=0<(gi=gt(at,nt[2],gi,rt.Qc,0,Oe,mn)))<<3,Gt=Gt<<2|(3<gi?3:1<gi?2:Oe[mn+0]!=0),mn+=16;Tn>>=2,wo=wo>>1|xo<<5}en|=Gt<<4*kn,eo|=Tn<<4<<kn,mi|=(240&wo)<<kn}ze.la=eo,Sn.la=mi,Tt.Hc=an,Tt.Gc=en,Tt.ia=43690&en?0:rt.ia,nt=!(an|en)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[Me.$b][Me.Za],Se.wa[Se.Y+Se.ja].La|=!nt),Fe.Ka)return Pt(Ae,7,"Premature end-of-file encountered.")}if(vs(Ae),Se=Ve,Fe=1,Me=(ye=Ae).D,ze=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(Me.M=ye.M,Me.uc=ze,Jo(ye,Me),Fe=1,Me=(Gt=ye.D).Nb,ze=(en=Hf[ye.L])*ye.R,at=en/2*ye.B,Mn=16*Me*ye.R,to=8*Me*ye.B,nt=ye.sa,Tt=ye.ta-ze+Mn,rt=ye.qa,Oe=ye.ra-at+to,mn=ye.Ha,Sn=ye.Ia-at+to,wo=(Tn=Gt.M)==0,an=Tn>=ye.Va-1,ye.Aa==2&&Jo(ye,Gt),Gt.uc)for(xo=(gi=ye).D.M,e(gi.D.uc),Gt=gi.yb;Gt<gi.Hb;++Gt){mi=Gt,eo=xo;var Bi=(er=(ii=gi).D).Nb;kn=ii.R;var er=er.wa[er.Y+mi],Or=ii.sa,ns=ii.ta+16*Bi*kn+16*mi,ua=er.dd,Ui=er.tc;if(Ui!=0)if(e(3<=Ui),ii.L==1)0<mi&&sa(Or,ns,kn,Ui+4),er.La&&Qr(Or,ns,kn,Ui),0<eo&&oa(Or,ns,kn,Ui+4),er.La&&Ps(Or,ns,kn,Ui);else{var Da=ii.B,ru=ii.qa,Gu=ii.ra+8*Bi*Da+8*mi,ul=ii.Ha,ii=ii.Ia+8*Bi*Da+8*mi;Bi=er.ld,0<mi&&(Xl(Or,ns,kn,Ui+4,ua,Bi),Vi(ru,Gu,ul,ii,Da,Ui+4,ua,Bi)),er.La&&(ra(Or,ns,kn,Ui,ua,Bi),ol(ru,Gu,ul,ii,Da,Ui,ua,Bi)),0<eo&&(rl(Or,ns,kn,Ui+4,ua,Bi),eu(ru,Gu,ul,ii,Da,Ui+4,ua,Bi)),er.La&&(Zo(Or,ns,kn,Ui,ua,Bi),Qo(ru,Gu,ul,ii,Da,Ui,ua,Bi))}}if(ye.ia&&alert("todo:DitherRow"),Se.put!=null){if(Gt=16*Tn,Tn=16*(Tn+1),wo?(Se.y=ye.sa,Se.O=ye.ta+Mn,Se.f=ye.qa,Se.N=ye.ra+to,Se.ea=ye.Ha,Se.W=ye.Ia+to):(Gt-=en,Se.y=nt,Se.O=Tt,Se.f=rt,Se.N=Oe,Se.ea=mn,Se.W=Sn),an||(Tn-=en),Tn>Se.o&&(Tn=Se.o),Se.F=null,Se.J=null,ye.Fa!=null&&0<ye.Fa.length&&Gt<Tn&&(Se.J=ta(ye,Se,Gt,Tn-Gt),Se.F=ye.mb,Se.F==null&&Se.F.length==0)){Fe=Pt(ye,3,"Could not decode alpha data.");break e}Gt<Se.j&&(en=Se.j-Gt,Gt=Se.j,e(!(1&en)),Se.O+=ye.R*en,Se.N+=ye.B*(en>>1),Se.W+=ye.B*(en>>1),Se.F!=null&&(Se.J+=Se.width*en)),Gt<Tn&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=Gt-Se.j,Se.U=Se.va-Se.v,Se.T=Tn-Gt,Fe=Se.put(Se))}Me+1!=ye.Ic||an||(i(ye.sa,ye.ta-ze,nt,Tt+16*ye.R,ze),i(ye.qa,ye.ra-at,rt,Oe+8*ye.B,at),i(ye.Ha,ye.Ia-at,mn,Sn+8*ye.B,at))}if(!Fe)return Pt(Ae,6,"Output aborted.")}return 1}(p,x)),x.bc!=null&&x.bc(x),A&=1}return A?(p.cb=0,A):0}function Xt(p,x,A,U,K){K=p[x+A+32*U]+(K>>3),p[x+A+32*U]=-256&K?0>K?0:255:K}function Oo(p,x,A,U,K,Y){Xt(p,x,0,A,U+K),Xt(p,x,1,A,U+Y),Xt(p,x,2,A,U-Y),Xt(p,x,3,A,U-K)}function Ln(p){return(20091*p>>16)+p}function Nn(p,x,A,U){var K,Y=0,Z=o(16);for(K=0;4>K;++K){var ne=p[x+0]+p[x+8],re=p[x+0]-p[x+8],ce=(35468*p[x+4]>>16)-Ln(p[x+12]),ve=Ln(p[x+4])+(35468*p[x+12]>>16);Z[Y+0]=ne+ve,Z[Y+1]=re+ce,Z[Y+2]=re-ce,Z[Y+3]=ne-ve,Y+=4,x++}for(K=Y=0;4>K;++K)ne=(p=Z[Y+0]+4)+Z[Y+8],re=p-Z[Y+8],ce=(35468*Z[Y+4]>>16)-Ln(Z[Y+12]),Xt(A,U,0,0,ne+(ve=Ln(Z[Y+4])+(35468*Z[Y+12]>>16))),Xt(A,U,1,0,re+ce),Xt(A,U,2,0,re-ce),Xt(A,U,3,0,ne-ve),Y++,U+=32}function ys(p,x,A,U){var K=p[x+0]+4,Y=35468*p[x+4]>>16,Z=Ln(p[x+4]),ne=35468*p[x+1]>>16;Oo(A,U,0,K+Z,p=Ln(p[x+1]),ne),Oo(A,U,1,K+Y,p,ne),Oo(A,U,2,K-Y,p,ne),Oo(A,U,3,K-Z,p,ne)}function fo(p,x,A,U,K){Nn(p,x,A,U),K&&Nn(p,x+16,A,U+4)}function Nr(p,x,A,U){Yo(p,x+0,A,U,1),Yo(p,x+32,A,U+128,1)}function bt(p,x,A,U){var K;for(p=p[x+0]+4,K=0;4>K;++K)for(x=0;4>x;++x)Xt(A,U,x,K,p)}function Wi(p,x,A,U){p[x+0]&&Zi(p,x+0,A,U),p[x+16]&&Zi(p,x+16,A,U+4),p[x+32]&&Zi(p,x+32,A,U+128),p[x+48]&&Zi(p,x+48,A,U+128+4)}function kr(p,x,A,U){var K,Y=o(16);for(K=0;4>K;++K){var Z=p[x+0+K]+p[x+12+K],ne=p[x+4+K]+p[x+8+K],re=p[x+4+K]-p[x+8+K],ce=p[x+0+K]-p[x+12+K];Y[0+K]=Z+ne,Y[8+K]=Z-ne,Y[4+K]=ce+re,Y[12+K]=ce-re}for(K=0;4>K;++K)Z=(p=Y[0+4*K]+3)+Y[3+4*K],ne=Y[1+4*K]+Y[2+4*K],re=Y[1+4*K]-Y[2+4*K],ce=p-Y[3+4*K],A[U+0]=Z+ne>>3,A[U+16]=ce+re>>3,A[U+32]=Z-ne>>3,A[U+48]=ce-re>>3,U+=64}function $i(p,x,A){var U,K=x-32,Y=dr,Z=255-p[K-1];for(U=0;U<A;++U){var ne,re=Y,ce=Z+p[x-1];for(ne=0;ne<A;++ne)p[x+ne]=re[ce+p[K+ne]];x+=32}}function ba(p,x){$i(p,x,4)}function Vo(p,x){$i(p,x,8)}function Ca(p,x){$i(p,x,16)}function Lr(p,x){var A;for(A=0;16>A;++A)i(p,x+32*A,p,x-32,16)}function po(p,x){var A;for(A=16;0<A;--A)r(p,x,p[x-1],16),x+=32}function Bo(p,x,A){var U;for(U=0;16>U;++U)r(x,A+32*U,p,16)}function $r(p,x){var A,U=16;for(A=0;16>A;++A)U+=p[x-1+32*A]+p[x+A-32];Bo(U>>5,p,x)}function gn(p,x){var A,U=8;for(A=0;16>A;++A)U+=p[x-1+32*A];Bo(U>>4,p,x)}function Ia(p,x){var A,U=8;for(A=0;16>A;++A)U+=p[x+A-32];Bo(U>>4,p,x)}function _s(p,x){Bo(128,p,x)}function Ct(p,x,A){return p+2*x+A+2>>2}function _t(p,x){var A,U=x-32;for(U=new Uint8Array([Ct(p[U-1],p[U+0],p[U+1]),Ct(p[U+0],p[U+1],p[U+2]),Ct(p[U+1],p[U+2],p[U+3]),Ct(p[U+2],p[U+3],p[U+4])]),A=0;4>A;++A)i(p,x+32*A,U,0,U.length)}function cr(p,x){var A=p[x-1],U=p[x-1+32],K=p[x-1+64],Y=p[x-1+96];Ge(p,x+0,16843009*Ct(p[x-1-32],A,U)),Ge(p,x+32,16843009*Ct(A,U,K)),Ge(p,x+64,16843009*Ct(U,K,Y)),Ge(p,x+96,16843009*Ct(K,Y,Y))}function $t(p,x){var A,U=4;for(A=0;4>A;++A)U+=p[x+A-32]+p[x-1+32*A];for(U>>=3,A=0;4>A;++A)r(p,x+32*A,U,4)}function Pa(p,x){var A=p[x-1+0],U=p[x-1+32],K=p[x-1+64],Y=p[x-1-32],Z=p[x+0-32],ne=p[x+1-32],re=p[x+2-32],ce=p[x+3-32];p[x+0+96]=Ct(U,K,p[x-1+96]),p[x+1+96]=p[x+0+64]=Ct(A,U,K),p[x+2+96]=p[x+1+64]=p[x+0+32]=Ct(Y,A,U),p[x+3+96]=p[x+2+64]=p[x+1+32]=p[x+0+0]=Ct(Z,Y,A),p[x+3+64]=p[x+2+32]=p[x+1+0]=Ct(ne,Z,Y),p[x+3+32]=p[x+2+0]=Ct(re,ne,Z),p[x+3+0]=Ct(ce,re,ne)}function Ki(p,x){var A=p[x+1-32],U=p[x+2-32],K=p[x+3-32],Y=p[x+4-32],Z=p[x+5-32],ne=p[x+6-32],re=p[x+7-32];p[x+0+0]=Ct(p[x+0-32],A,U),p[x+1+0]=p[x+0+32]=Ct(A,U,K),p[x+2+0]=p[x+1+32]=p[x+0+64]=Ct(U,K,Y),p[x+3+0]=p[x+2+32]=p[x+1+64]=p[x+0+96]=Ct(K,Y,Z),p[x+3+32]=p[x+2+64]=p[x+1+96]=Ct(Y,Z,ne),p[x+3+64]=p[x+2+96]=Ct(Z,ne,re),p[x+3+96]=Ct(ne,re,re)}function Uo(p,x){var A=p[x-1+0],U=p[x-1+32],K=p[x-1+64],Y=p[x-1-32],Z=p[x+0-32],ne=p[x+1-32],re=p[x+2-32],ce=p[x+3-32];p[x+0+0]=p[x+1+64]=Y+Z+1>>1,p[x+1+0]=p[x+2+64]=Z+ne+1>>1,p[x+2+0]=p[x+3+64]=ne+re+1>>1,p[x+3+0]=re+ce+1>>1,p[x+0+96]=Ct(K,U,A),p[x+0+64]=Ct(U,A,Y),p[x+0+32]=p[x+1+96]=Ct(A,Y,Z),p[x+1+32]=p[x+2+96]=Ct(Y,Z,ne),p[x+2+32]=p[x+3+96]=Ct(Z,ne,re),p[x+3+32]=Ct(ne,re,ce)}function ws(p,x){var A=p[x+0-32],U=p[x+1-32],K=p[x+2-32],Y=p[x+3-32],Z=p[x+4-32],ne=p[x+5-32],re=p[x+6-32],ce=p[x+7-32];p[x+0+0]=A+U+1>>1,p[x+1+0]=p[x+0+64]=U+K+1>>1,p[x+2+0]=p[x+1+64]=K+Y+1>>1,p[x+3+0]=p[x+2+64]=Y+Z+1>>1,p[x+0+32]=Ct(A,U,K),p[x+1+32]=p[x+0+96]=Ct(U,K,Y),p[x+2+32]=p[x+1+96]=Ct(K,Y,Z),p[x+3+32]=p[x+2+96]=Ct(Y,Z,ne),p[x+3+64]=Ct(Z,ne,re),p[x+3+96]=Ct(ne,re,ce)}function hr(p,x){var A=p[x-1+0],U=p[x-1+32],K=p[x-1+64],Y=p[x-1+96];p[x+0+0]=A+U+1>>1,p[x+2+0]=p[x+0+32]=U+K+1>>1,p[x+2+32]=p[x+0+64]=K+Y+1>>1,p[x+1+0]=Ct(A,U,K),p[x+3+0]=p[x+1+32]=Ct(U,K,Y),p[x+3+32]=p[x+1+64]=Ct(K,Y,Y),p[x+3+64]=p[x+2+64]=p[x+0+96]=p[x+1+96]=p[x+2+96]=p[x+3+96]=Y}function zo(p,x){var A=p[x-1+0],U=p[x-1+32],K=p[x-1+64],Y=p[x-1+96],Z=p[x-1-32],ne=p[x+0-32],re=p[x+1-32],ce=p[x+2-32];p[x+0+0]=p[x+2+32]=A+Z+1>>1,p[x+0+32]=p[x+2+64]=U+A+1>>1,p[x+0+64]=p[x+2+96]=K+U+1>>1,p[x+0+96]=Y+K+1>>1,p[x+3+0]=Ct(ne,re,ce),p[x+2+0]=Ct(Z,ne,re),p[x+1+0]=p[x+3+32]=Ct(A,Z,ne),p[x+1+32]=p[x+3+64]=Ct(U,A,Z),p[x+1+64]=p[x+3+96]=Ct(K,U,A),p[x+1+96]=Ct(Y,K,U)}function qo(p,x){var A;for(A=0;8>A;++A)i(p,x+32*A,p,x-32,8)}function vn(p,x){var A;for(A=0;8>A;++A)r(p,x,p[x-1],8),x+=32}function si(p,x,A){var U;for(U=0;8>U;++U)r(x,A+32*U,p,8)}function Kr(p,x){var A,U=8;for(A=0;8>A;++A)U+=p[x+A-32]+p[x-1+32*A];si(U>>4,p,x)}function Js(p,x){var A,U=4;for(A=0;8>A;++A)U+=p[x+A-32];si(U>>3,p,x)}function fn(p,x){var A,U=4;for(A=0;8>A;++A)U+=p[x-1+32*A];si(U>>3,p,x)}function Ys(p,x){si(128,p,x)}function Ho(p,x,A){var U=p[x-A],K=p[x+0],Y=3*(K-U)+al[1020+p[x-2*A]-p[x+A]],Z=aa[112+(Y+4>>3)];p[x-A]=dr[255+U+aa[112+(Y+3>>3)]],p[x+0]=dr[255+K-Z]}function Na(p,x,A,U){var K=p[x+0],Y=p[x+A];return Fr[255+p[x-2*A]-p[x-A]]>U||Fr[255+Y-K]>U}function Zs(p,x,A,U){return 4*Fr[255+p[x-A]-p[x+0]]+Fr[255+p[x-2*A]-p[x+A]]<=U}function qt(p,x,A,U,K){var Y=p[x-3*A],Z=p[x-2*A],ne=p[x-A],re=p[x+0],ce=p[x+A],ve=p[x+2*A],Pe=p[x+3*A];return 4*Fr[255+ne-re]+Fr[255+Z-ce]>U?0:Fr[255+p[x-4*A]-Y]<=K&&Fr[255+Y-Z]<=K&&Fr[255+Z-ne]<=K&&Fr[255+Pe-ve]<=K&&Fr[255+ve-ce]<=K&&Fr[255+ce-re]<=K}function xs(p,x,A,U){var K=2*U+1;for(U=0;16>U;++U)Zs(p,x+U,A,K)&&Ho(p,x+U,A)}function On(p,x,A,U){var K=2*U+1;for(U=0;16>U;++U)Zs(p,x+U*A,1,K)&&Ho(p,x+U*A,1)}function Vn(p,x,A,U){var K;for(K=3;0<K;--K)xs(p,x+=4*A,A,U)}function ka(p,x,A,U){var K;for(K=3;0<K;--K)On(p,x+=4,A,U)}function Go(p,x,A,U,K,Y,Z,ne){for(Y=2*Y+1;0<K--;){if(qt(p,x,A,Y,Z))if(Na(p,x,A,ne))Ho(p,x,A);else{var re=p,ce=x,ve=A,Pe=re[ce-2*ve],Ne=re[ce-ve],Ae=re[ce+0],Ve=re[ce+ve],Me=re[ce+2*ve],ye=27*(Fe=al[1020+3*(Ae-Ne)+al[1020+Pe-Ve]])+63>>7,Se=18*Fe+63>>7,Fe=9*Fe+63>>7;re[ce-3*ve]=dr[255+re[ce-3*ve]+Fe],re[ce-2*ve]=dr[255+Pe+Se],re[ce-ve]=dr[255+Ne+ye],re[ce+0]=dr[255+Ae-ye],re[ce+ve]=dr[255+Ve-Se],re[ce+2*ve]=dr[255+Me-Fe]}x+=U}}function ai(p,x,A,U,K,Y,Z,ne){for(Y=2*Y+1;0<K--;){if(qt(p,x,A,Y,Z))if(Na(p,x,A,ne))Ho(p,x,A);else{var re=p,ce=x,ve=A,Pe=re[ce-ve],Ne=re[ce+0],Ae=re[ce+ve],Ve=aa[112+((Me=3*(Ne-Pe))+4>>3)],Me=aa[112+(Me+3>>3)],ye=Ve+1>>1;re[ce-2*ve]=dr[255+re[ce-2*ve]+ye],re[ce-ve]=dr[255+Pe+Me],re[ce+0]=dr[255+Ne-Ve],re[ce+ve]=dr[255+Ae-ye]}x+=U}}function Qs(p,x,A,U,K,Y){Go(p,x,A,1,16,U,K,Y)}function Jr(p,x,A,U,K,Y){Go(p,x,1,A,16,U,K,Y)}function Xs(p,x,A,U,K,Y){var Z;for(Z=3;0<Z;--Z)ai(p,x+=4*A,A,1,16,U,K,Y)}function Ss(p,x,A,U,K,Y){var Z;for(Z=3;0<Z;--Z)ai(p,x+=4,1,A,16,U,K,Y)}function jo(p,x,A,U,K,Y,Z,ne){Go(p,x,K,1,8,Y,Z,ne),Go(A,U,K,1,8,Y,Z,ne)}function La(p,x,A,U,K,Y,Z,ne){Go(p,x,1,K,8,Y,Z,ne),Go(A,U,1,K,8,Y,Z,ne)}function wi(p,x,A,U,K,Y,Z,ne){ai(p,x+4*K,K,1,8,Y,Z,ne),ai(A,U+4*K,K,1,8,Y,Z,ne)}function Wo(p,x,A,U,K,Y,Z,ne){ai(p,x+4,1,K,8,Y,Z,ne),ai(A,U+4,1,K,8,Y,Z,ne)}function $o(){this.ba=new pi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ji(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ko(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ts(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new b}function ea(){this.xb=this.a=0,this.l=new Pr,this.ca=new pi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ts,this.ab=0,this.gc=s(4,Ko),this.Oc=0}function mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function go(p,x,A,U,K,Y,Z){for(p=p==null?0:p[x+0],x=0;x<Z;++x)K[Y+x]=p+A[U+x]&255,p=K[Y+x]}function Es(p,x,A,U,K,Y,Z){var ne;if(p==null)go(null,null,A,U,K,Y,Z);else for(ne=0;ne<Z;++ne)K[Y+ne]=p[x+ne]+A[U+ne]&255}function Fi(p,x,A,U,K,Y,Z){if(p==null)go(null,null,A,U,K,Y,Z);else{var ne,re=p[x+0],ce=re,ve=re;for(ne=0;ne<Z;++ne)ce=ve+(re=p[x+ne])-ce,ve=A[U+ne]+(-256&ce?0>ce?0:255:ce)&255,ce=re,K[Y+ne]=ve}}function ta(p,x,A,U){var K=x.width,Y=x.o;if(e(p!=null&&x!=null),0>A||0>=U||A+U>Y)return null;if(!p.Cc){if(p.ga==null){var Z;if(p.ga=new mo,(Z=p.ga==null)||(Z=x.width*x.o,e(p.Gb.length==0),p.Gb=o(Z),p.Uc=0,p.Gb==null?Z=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Z=1),Z=!Z),!Z){Z=p.ga;var ne=p.Fa,re=p.P,ce=p.qc,ve=p.mb,Pe=p.nb,Ne=re+1,Ae=ce-1,Ve=Z.l;if(e(ne!=null&&ve!=null&&x!=null),xn[0]=null,xn[1]=go,xn[2]=Es,xn[3]=Fi,Z.ca=ve,Z.tb=Pe,Z.c=x.width,Z.i=x.height,e(0<Z.c&&0<Z.i),1>=ce)x=0;else if(Z.$a=ne[re+0]>>0&3,Z.Z=ne[re+0]>>2&3,Z.Lc=ne[re+0]>>4&3,re=ne[re+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||re)x=0;else if(Ve.put=Li,Ve.ac=Xn,Ve.bc=ji,Ve.ma=Z,Ve.width=x.width,Ve.height=x.height,Ve.Da=x.Da,Ve.v=x.v,Ve.va=x.va,Ve.j=x.j,Ve.o=x.o,Z.$a)e:{e(Z.$a==1),x=Hn();t:for(;;){if(x==null){x=0;break e}if(e(Z!=null),Z.mc=x,x.c=Z.c,x.i=Z.i,x.l=Z.l,x.l.ma=Z,x.l.width=Z.c,x.l.height=Z.i,x.a=0,W(x.m,ne,Ne,Ae),!Ir(Z.c,Z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&jr(x.s)?(Z.ic=1,ne=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(ne),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Z.ic=0,x=No(x,Z.c)),!x))break t;x=1;break e}Z.mc=null,x=0}else x=Ae>=Z.c*Z.i;Z=!x}if(Z)return null;p.ga.Lc!=1?p.Ga=0:U=Y-A}e(p.ga!=null),e(A+U<=Y);e:{if(x=(ne=p.ga).c,Y=ne.l.o,ne.$a==0){if(Ne=p.rc,Ae=p.Vc,Ve=p.Fa,re=p.P+1+A*x,ce=p.mb,ve=p.nb+A*x,e(re<=p.P+p.qc),ne.Z!=0)for(e(xn[ne.Z]!=null),Z=0;Z<U;++Z)xn[ne.Z](Ne,Ae,Ve,re,ce,ve,x),Ne=ce,Ae=ve,ve+=x,re+=x;else for(Z=0;Z<U;++Z)i(ce,ve,Ve,re,x),Ne=ce,Ae=ve,ve+=x,re+=x;p.rc=Ne,p.Vc=Ae}else{if(e(ne.mc!=null),x=A+U,e((Z=ne.mc)!=null),e(x<=Z.i),Z.C>=x)x=1;else if(ne.ic||Ee(),ne.ic){ne=Z.V,Ne=Z.Ba,Ae=Z.c;var Me=Z.i,ye=(Ve=1,re=Z.$/Ae,ce=Z.$%Ae,ve=Z.m,Pe=Z.s,Z.$),Se=Ae*Me,Fe=Ae*x,ze=Pe.wc,Oe=ye<Fe?tt(Pe,ce,re):null;e(ye<=Se),e(x<=Me),e(jr(Pe));t:for(;;){for(;!ve.h&&ye<Fe;){if(ce&ze||(Oe=tt(Pe,ce,re)),e(Oe!=null),he(ve),256>(Me=ei(Oe.G[0],Oe.H[0],ve)))ne[Ne+ye]=Me,++ye,++ce>=Ae&&(ce=0,++re<=x&&!(re%16)&&Mi(Z,re));else{if(!(280>Me)){Ve=0;break t}Me=ur(Me-256,ve);var at,nt=ei(Oe.G[4],Oe.H[4],ve);if(he(ve),!(ye>=(nt=Ri(Ae,nt=ur(nt,ve)))&&Se-ye>=Me)){Ve=0;break t}for(at=0;at<Me;++at)ne[Ne+ye+at]=ne[Ne+ye+at-nt];for(ye+=Me,ce+=Me;ce>=Ae;)ce-=Ae,++re<=x&&!(re%16)&&Mi(Z,re);ye<Fe&&ce&ze&&(Oe=tt(Pe,ce,re))}e(ve.h==ae(ve))}Mi(Z,re>x?x:re);break t}!Ve||ve.h&&ye<Se?(Ve=0,Z.a=ve.h?5:3):Z.$=ye,x=Ve}else x=Di(Z,Z.V,Z.Ba,Z.c,Z.i,x,ko);if(!x){U=0;break e}}A+U>=Y&&(p.Cc=1),U=1}if(!U)return null;if(p.Cc&&((U=p.ga)!=null&&(U.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+A*K}function S(p,x,A,U,K,Y){for(;0<K--;){var Z,ne=p,re=x+(A?1:0),ce=p,ve=x+(A?0:3);for(Z=0;Z<U;++Z){var Pe=ce[ve+4*Z];Pe!=255&&(Pe*=32897,ne[re+4*Z+0]=ne[re+4*Z+0]*Pe>>23,ne[re+4*Z+1]=ne[re+4*Z+1]*Pe>>23,ne[re+4*Z+2]=ne[re+4*Z+2]*Pe>>23)}x+=Y}}function $(p,x,A,U,K){for(;0<U--;){var Y;for(Y=0;Y<A;++Y){var Z=p[x+2*Y+0],ne=15&(ce=p[x+2*Y+1]),re=4369*ne,ce=(240&ce|ce>>4)*re>>16;p[x+2*Y+0]=(240&Z|Z>>4)*re>>16&240|(15&Z|Z<<4)*re>>16>>4&15,p[x+2*Y+1]=240&ce|ne}x+=K}}function de(p,x,A,U,K,Y,Z,ne){var re,ce,ve=255;for(ce=0;ce<K;++ce){for(re=0;re<U;++re){var Pe=p[x+re];Y[Z+4*re]=Pe,ve&=Pe}x+=A,Z+=ne}return ve!=255}function ge(p,x,A,U,K){var Y;for(Y=0;Y<K;++Y)A[U+Y]=p[x+Y]>>8}function Ee(){Ei=S,yn=$,_n=de,Kn=ge}function Re(p,x,A){C[p]=function(U,K,Y,Z,ne,re,ce,ve,Pe,Ne,Ae,Ve,Me,ye,Se,Fe,ze){var Oe,at=ze-1>>1,nt=ne[re+0]|ce[ve+0]<<16,Tt=Pe[Ne+0]|Ae[Ve+0]<<16;e(U!=null);var rt=3*nt+Tt+131074>>2;for(x(U[K+0],255&rt,rt>>16,Me,ye),Y!=null&&(rt=3*Tt+nt+131074>>2,x(Y[Z+0],255&rt,rt>>16,Se,Fe)),Oe=1;Oe<=at;++Oe){var mn=ne[re+Oe]|ce[ve+Oe]<<16,Sn=Pe[Ne+Oe]|Ae[Ve+Oe]<<16,an=nt+mn+Tt+Sn+524296,en=an+2*(mn+Tt)>>3;rt=en+nt>>1,nt=(an=an+2*(nt+Sn)>>3)+mn>>1,x(U[K+2*Oe-1],255&rt,rt>>16,Me,ye+(2*Oe-1)*A),x(U[K+2*Oe-0],255&nt,nt>>16,Me,ye+(2*Oe-0)*A),Y!=null&&(rt=an+Tt>>1,nt=en+Sn>>1,x(Y[Z+2*Oe-1],255&rt,rt>>16,Se,Fe+(2*Oe-1)*A),x(Y[Z+2*Oe+0],255&nt,nt>>16,Se,Fe+(2*Oe+0)*A)),nt=mn,Tt=Sn}1&ze||(rt=3*nt+Tt+131074>>2,x(U[K+ze-1],255&rt,rt>>16,Me,ye+(ze-1)*A),Y!=null&&(rt=3*Tt+nt+131074>>2,x(Y[Z+ze-1],255&rt,rt>>16,Se,Fe+(ze-1)*A)))}}function Ue(){Xi[Vu]=Im,Xi[tu]=Bf,Xi[nh]=Pm,Xi[nu]=Hu,Xi[iu]=rh,Xi[Bu]=Uf,Xi[Vf]=HA,Xi[Uu]=Bf,Xi[zu]=Hu,Xi[qu]=rh,Xi[a]=Uf}function Qe(p){return p&-16384?0>p?0:255:p>>GA}function m(p,x){return Qe((19077*p>>8)+(26149*x>>8)-14234)}function M(p,x,A){return Qe((19077*p>>8)-(6419*x>>8)-(13320*A>>8)+8708)}function q(p,x){return Qe((19077*p>>8)+(33050*x>>8)-17685)}function te(p,x,A,U,K){U[K+0]=m(p,A),U[K+1]=M(p,x,A),U[K+2]=q(p,x)}function we(p,x,A,U,K){U[K+0]=q(p,x),U[K+1]=M(p,x,A),U[K+2]=m(p,A)}function Ie(p,x,A,U,K){var Y=M(p,x,A);x=Y<<3&224|q(p,x)>>3,U[K+0]=248&m(p,A)|Y>>5,U[K+1]=x}function He(p,x,A,U,K){var Y=240&q(p,x)|15;U[K+0]=240&m(p,A)|M(p,x,A)>>4,U[K+1]=Y}function Mt(p,x,A,U,K){U[K+0]=255,te(p,x,A,U,K+1)}function Kt(p,x,A,U,K){we(p,x,A,U,K),U[K+3]=255}function Dt(p,x,A,U,K){te(p,x,A,U,K),U[K+3]=255}function Ht(p,x){return 0>p?0:p>x?x:p}function on(p,x,A){C[p]=function(U,K,Y,Z,ne,re,ce,ve,Pe){for(var Ne=ve+(-2&Pe)*A;ve!=Ne;)x(U[K+0],Y[Z+0],ne[re+0],ce,ve),x(U[K+1],Y[Z+0],ne[re+0],ce,ve+A),K+=2,++Z,++re,ve+=2*A;1&Pe&&x(U[K+0],Y[Z+0],ne[re+0],ce,ve)}}function vo(p,x,A){return A==0?p==0?x==0?6:5:x==0?4:0:A}function Rn(p,x,A,U,K){switch(p>>>30){case 3:Yo(x,A,U,K,0);break;case 2:$n(x,A,U,K);break;case 1:Zi(x,A,U,K)}}function Jo(p,x){var A,U,K=x.M,Y=x.Nb,Z=p.oc,ne=p.pc+40,re=p.oc,ce=p.pc+584,ve=p.oc,Pe=p.pc+600;for(A=0;16>A;++A)Z[ne+32*A-1]=129;for(A=0;8>A;++A)re[ce+32*A-1]=129,ve[Pe+32*A-1]=129;for(0<K?Z[ne-1-32]=re[ce-1-32]=ve[Pe-1-32]=129:(r(Z,ne-32-1,127,21),r(re,ce-32-1,127,9),r(ve,Pe-32-1,127,9)),U=0;U<p.za;++U){var Ne=x.ya[x.aa+U];if(0<U){for(A=-1;16>A;++A)i(Z,ne+32*A-4,Z,ne+32*A+12,4);for(A=-1;8>A;++A)i(re,ce+32*A-4,re,ce+32*A+4,4),i(ve,Pe+32*A-4,ve,Pe+32*A+4,4)}var Ae=p.Gd,Ve=p.Hd+U,Me=Ne.ad,ye=Ne.Hc;if(0<K&&(i(Z,ne-32,Ae[Ve].y,0,16),i(re,ce-32,Ae[Ve].f,0,8),i(ve,Pe-32,Ae[Ve].ea,0,8)),Ne.Za){var Se=Z,Fe=ne-32+16;for(0<K&&(U>=p.za-1?r(Se,Fe,Ae[Ve].y[15],4):i(Se,Fe,Ae[Ve+1].y,0,4)),A=0;4>A;A++)Se[Fe+128+A]=Se[Fe+256+A]=Se[Fe+384+A]=Se[Fe+0+A];for(A=0;16>A;++A,ye<<=2)Se=Z,Fe=ne+h_[A],_o[Ne.Ob[A]](Se,Fe),Rn(ye,Me,16*+A,Se,Fe)}else if(Se=vo(U,K,Ne.Ob[0]),la[Se](Z,ne),ye!=0)for(A=0;16>A;++A,ye<<=2)Rn(ye,Me,16*+A,Z,ne+h_[A]);for(A=Ne.Gc,Se=vo(U,K,Ne.Dd),ts[Se](re,ce),ts[Se](ve,Pe),ye=Me,Se=re,Fe=ce,255&(Ne=A>>0)&&(170&Ne?ia(ye,256,Se,Fe):Dr(ye,256,Se,Fe)),Ne=ve,ye=Pe,255&(A>>=8)&&(170&A?ia(Me,320,Ne,ye):Dr(Me,320,Ne,ye)),K<p.Ub-1&&(i(Ae[Ve].y,0,Z,ne+480,16),i(Ae[Ve].f,0,re,ce+224,8),i(Ae[Ve].ea,0,ve,Pe+224,8)),A=8*Y*p.B,Ae=p.sa,Ve=p.ta+16*U+16*Y*p.R,Me=p.qa,Ne=p.ra+8*U+A,ye=p.Ha,Se=p.Ia+8*U+A,A=0;16>A;++A)i(Ae,Ve+A*p.R,Z,ne+32*A,16);for(A=0;8>A;++A)i(Me,Ne+A*p.B,re,ce+32*A,8),i(ye,Se+A*p.B,ve,Pe+32*A,8)}}function Yi(p,x,A,U,K,Y,Z,ne,re){var ce=[0],ve=[0],Pe=0,Ne=re!=null?re.kd:0,Ae=re??new Ji;if(p==null||12>A)return 7;Ae.data=p,Ae.w=x,Ae.ha=A,x=[x],A=[A],Ae.gb=[Ae.gb];e:{var Ve=x,Me=A,ye=Ae.gb;if(e(p!=null),e(Me!=null),e(ye!=null),ye[0]=0,12<=Me[0]&&!n(p,Ve[0],"RIFF")){if(n(p,Ve[0]+8,"WEBP")){ye=3;break e}var Se=Ze(p,Ve[0]+4);if(12>Se||4294967286<Se){ye=3;break e}if(Ne&&Se>Me[0]-8){ye=7;break e}ye[0]=Se,Ve[0]+=12,Me[0]-=12}ye=0}if(ye!=0)return ye;for(Se=0<Ae.gb[0],A=A[0];;){e:{var Fe=p;Me=x,ye=A;var ze=ce,Oe=ve,at=Ve=[0];if((rt=Pe=[Pe])[0]=0,8>ye[0])ye=7;else{if(!n(Fe,Me[0],"VP8X")){if(Ze(Fe,Me[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var nt=Ze(Fe,Me[0]+8),Tt=1+Je(Fe,Me[0]+12);if(2147483648<=Tt*(Fe=1+Je(Fe,Me[0]+15))){ye=3;break e}at!=null&&(at[0]=nt),ze!=null&&(ze[0]=Tt),Oe!=null&&(Oe[0]=Fe),Me[0]+=18,ye[0]-=18,rt[0]=1}ye=0}}if(Pe=Pe[0],Ve=Ve[0],ye!=0)return ye;if(Me=!!(2&Ve),!Se&&Pe)return 3;if(Y!=null&&(Y[0]=!!(16&Ve)),Z!=null&&(Z[0]=Me),ne!=null&&(ne[0]=0),Z=ce[0],Ve=ve[0],Pe&&Me&&re==null){ye=0;break}if(4>A){ye=7;break}if(Se&&Pe||!Se&&!Pe&&!n(p,x[0],"ALPH")){A=[A],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{nt=p,ye=x,Se=A;var rt=Ae.gb;ze=Ae.na,Oe=Ae.P,at=Ae.Sa,Tt=22,e(nt!=null),e(Se!=null),Fe=ye[0];var mn=Se[0];for(e(ze!=null),e(at!=null),ze[0]=null,Oe[0]=null,at[0]=0;;){if(ye[0]=Fe,Se[0]=mn,8>mn){ye=7;break e}var Sn=Ze(nt,Fe+4);if(4294967286<Sn){ye=3;break e}var an=8+Sn+1&-2;if(Tt+=an,0<rt&&Tt>rt){ye=3;break e}if(!n(nt,Fe,"VP8 ")||!n(nt,Fe,"VP8L")){ye=0;break e}if(mn[0]<an){ye=7;break e}n(nt,Fe,"ALPH")||(ze[0]=nt,Oe[0]=Fe+8,at[0]=Sn),Fe+=an,mn-=an}}if(A=A[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],ye!=0)break}A=[A],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(rt=p,ye=x,Se=A,ze=Ae.gb[0],Oe=Ae.Ja,at=Ae.xa,nt=ye[0],Fe=!n(rt,nt,"VP8 "),Tt=!n(rt,nt,"VP8L"),e(rt!=null),e(Se!=null),e(Oe!=null),e(at!=null),8>Se[0])ye=7;else{if(Fe||Tt){if(rt=Ze(rt,nt+4),12<=ze&&rt>ze-12){ye=3;break e}if(Ne&&rt>Se[0]-8){ye=7;break e}Oe[0]=rt,ye[0]+=8,Se[0]-=8,at[0]=Tt}else at[0]=5<=Se[0]&&rt[nt+0]==47&&!(rt[nt+4]>>5),Oe[0]=Se[0];ye=0}if(A=A[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],x=x[0],ye!=0)break;if(4294967286<Ae.Ja)return 3;if(ne==null||Me||(ne[0]=Ae.xa?2:1),Z=[Z],Ve=[Ve],Ae.xa){if(5>A){ye=7;break}ne=Z,Ne=Ve,Me=Y,p==null||5>A?p=0:5<=A&&p[x+0]==47&&!(p[x+4]>>5)?(Se=[0],rt=[0],ze=[0],W(Oe=new j,p,x,A),lt(Oe,Se,rt,ze)?(ne!=null&&(ne[0]=Se[0]),Ne!=null&&(Ne[0]=rt[0]),Me!=null&&(Me[0]=ze[0]),p=1):p=0):p=0}else{if(10>A){ye=7;break}ne=Ve,p==null||10>A||!Fo(p,x+3,A-3)?p=0:(Ne=p[x+0]|p[x+1]<<8|p[x+2]<<16,Me=16383&(p[x+7]<<8|p[x+6]),p=16383&(p[x+9]<<8|p[x+8]),1&Ne||3<(Ne>>1&7)||!(Ne>>4&1)||Ne>>5>=Ae.Ja||!Me||!p?p=0:(Z&&(Z[0]=Me),ne&&(ne[0]=p),p=1))}if(!p||(Z=Z[0],Ve=Ve[0],Pe&&(ce[0]!=Z||ve[0]!=Ve)))return 3;re!=null&&(re[0]=Ae,re.offset=x-re.w,e(4294967286>x-re.w),e(re.offset==re.ha-A));break}return ye==0||ye==7&&Pe&&re==null?(Y!=null&&(Y[0]|=Ae.na!=null&&0<Ae.na.length),U!=null&&(U[0]=Z),K!=null&&(K[0]=Ve),0):ye}function Zl(p,x,A){var U=x.width,K=x.height,Y=0,Z=0,ne=U,re=K;if(x.Da=p!=null&&0<p.Da,x.Da&&(ne=p.cd,re=p.bd,Y=p.v,Z=p.j,11>A||(Y&=-2,Z&=-2),0>Y||0>Z||0>=ne||0>=re||Y+ne>U||Z+re>K))return 0;if(x.v=Y,x.j=Z,x.va=Y+ne,x.o=Z+re,x.U=ne,x.T=re,x.da=p!=null&&0<p.da,x.da){if(!It(ne,re,A=[p.ib],Y=[p.hb]))return 0;x.ib=A[0],x.hb=Y[0]}return x.ob=p!=null&&p.ob,x.Kb=p==null||!p.Sd,x.da&&(x.ob=x.ib<3*U/4&&x.hb<3*K/4,x.Kb=0),1}function As(p){if(p==null)return 2;if(11>p.S){var x=p.f.RGBA;x.fb+=(p.height-1)*x.A,x.A=-x.A}else x=p.f.kb,p=p.height,x.O+=(p-1)*x.fa,x.fa=-x.fa,x.N+=(p-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(p-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(p-1)*x.lb,x.lb=-x.lb);return 0}function Ra(p,x,A,U){if(U==null||0>=p||0>=x)return 2;if(A!=null){if(A.Da){var K=A.cd,Y=A.bd,Z=-2&A.v,ne=-2&A.j;if(0>Z||0>ne||0>=K||0>=Y||Z+K>p||ne+Y>x)return 2;p=K,x=Y}if(A.da){if(!It(p,x,K=[A.ib],Y=[A.hb]))return 2;p=K[0],x=Y[0]}}U.width=p,U.height=x;e:{var re=U.width,ce=U.height;if(p=U.S,0>=re||0>=ce||!(p>=Vu&&13>p))p=2;else{if(0>=U.Rd&&U.sd==null){Z=Y=K=x=0;var ve=(ne=re*f_[p])*ce;if(11>p||(Y=(ce+1)/2*(x=(re+1)/2),p==12&&(Z=(K=re)*ce)),(ce=o(ve+2*Y+Z))==null){p=1;break e}U.sd=ce,11>p?((re=U.f.RGBA).eb=ce,re.fb=0,re.A=ne,re.size=ve):((re=U.f.kb).y=ce,re.O=0,re.fa=ne,re.Fd=ve,re.f=ce,re.N=0+ve,re.Ab=x,re.Cd=Y,re.ea=ce,re.W=0+ve+Y,re.Db=x,re.Ed=Y,p==12&&(re.F=ce,re.J=0+ve+2*Y),re.Tc=Z,re.lb=K)}if(x=1,K=U.S,Y=U.width,Z=U.height,K>=Vu&&13>K)if(11>K)p=U.f.RGBA,x&=(ne=Math.abs(p.A))*(Z-1)+Y<=p.size,x&=ne>=Y*f_[K],x&=p.eb!=null;else{p=U.f.kb,ne=(Y+1)/2,ve=(Z+1)/2,re=Math.abs(p.fa),ce=Math.abs(p.Ab);var Pe=Math.abs(p.Db),Ne=Math.abs(p.lb),Ae=Ne*(Z-1)+Y;x&=re*(Z-1)+Y<=p.Fd,x&=ce*(ve-1)+ne<=p.Cd,x=(x&=Pe*(ve-1)+ne<=p.Ed)&re>=Y&ce>=ne&Pe>=ne,x&=p.y!=null,x&=p.f!=null,x&=p.ea!=null,K==12&&(x&=Ne>=Y,x&=Ae<=p.Tc,x&=p.F!=null)}else x=0;p=x?0:2}}return p!=0||A!=null&&A.fd&&(p=As(U)),p}var ni=64,nl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rr=24,bs=32,Ql=8,Oi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ye("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(p){return p},C.Predictor2=function(p,x,A){return x[A+0]},C.Predictor3=function(p,x,A){return x[A+1]},C.Predictor4=function(p,x,A){return x[A-1]},C.Predictor5=function(p,x,A){return Xe(Xe(p,x[A+1]),x[A+0])},C.Predictor6=function(p,x,A){return Xe(p,x[A-1])},C.Predictor7=function(p,x,A){return Xe(p,x[A+0])},C.Predictor8=function(p,x,A){return Xe(x[A-1],x[A+0])},C.Predictor9=function(p,x,A){return Xe(x[A+0],x[A+1])},C.Predictor10=function(p,x,A){return Xe(Xe(p,x[A-1]),Xe(x[A+0],x[A+1]))},C.Predictor11=function(p,x,A){var U=x[A+0];return 0>=Rt(U>>24&255,p>>24&255,(x=x[A-1])>>24&255)+Rt(U>>16&255,p>>16&255,x>>16&255)+Rt(U>>8&255,p>>8&255,x>>8&255)+Rt(255&U,255&p,255&x)?U:p},C.Predictor12=function(p,x,A){var U=x[A+0];return(ft((p>>24&255)+(U>>24&255)-((x=x[A-1])>>24&255))<<24|ft((p>>16&255)+(U>>16&255)-(x>>16&255))<<16|ft((p>>8&255)+(U>>8&255)-(x>>8&255))<<8|ft((255&p)+(255&U)-(255&x)))>>>0},C.Predictor13=function(p,x,A){var U=x[A-1];return(At((p=Xe(p,x[A+0]))>>24&255,U>>24&255)<<24|At(p>>16&255,U>>16&255)<<16|At(p>>8&255,U>>8&255)<<8|At(p>>0&255,U>>0&255))>>>0};var th=C.PredictorAdd0;C.PredictorAdd1=pt,Ye("Predictor2","PredictorAdd2"),Ye("Predictor3","PredictorAdd3"),Ye("Predictor4","PredictorAdd4"),Ye("Predictor5","PredictorAdd5"),Ye("Predictor6","PredictorAdd6"),Ye("Predictor7","PredictorAdd7"),Ye("Predictor8","PredictorAdd8"),Ye("Predictor9","PredictorAdd9"),Ye("Predictor10","PredictorAdd10"),Ye("Predictor11","PredictorAdd11"),Ye("Predictor12","PredictorAdd12"),Ye("Predictor13","PredictorAdd13");var Mr=C.PredictorAdd2;zt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Fu,xi=C.ColorIndexInverseTransform,il=C.MapARGB,Yr=C.VP8LColorIndexInverseTransformAlpha,Ma=C.MapAlpha,Cs=C.VP8LPredictorsAdd=[];Cs.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Is,Si,Ti,yo,fr,Zr,na,Yo,$n,ia,Zi,Dr,rl,Xl,eu,Vi,Zo,ra,Qo,ol,oa,sa,Ps,Qr,Ei,yn,_n,Kn,wn=o(511),Xo=o(2041),sl=o(225),es=o(767),Ou=0,al=Xo,aa=sl,dr=es,Fr=wn,Vu=0,tu=1,nh=2,nu=3,iu=4,Bu=5,Vf=6,Uu=7,zu=8,qu=9,a=10,h=[2,3,7],_=[3,3,11],E=[280,256,256,256,40],z=[0,1,1,1,0],X=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],me=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Le=8,Be=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ot=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gt=null,Wt=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],li=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Xr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],pr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ll=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],la=[],_o=[],ts=[],Cm=1,ih=2,xn=[],Xi=[];Re("UpsampleRgbLinePair",te,3),Re("UpsampleBgrLinePair",we,3),Re("UpsampleRgbaLinePair",Dt,4),Re("UpsampleBgraLinePair",Kt,4),Re("UpsampleArgbLinePair",Mt,4),Re("UpsampleRgba4444LinePair",He,2),Re("UpsampleRgb565LinePair",Ie,2);var Im=C.UpsampleRgbLinePair,Pm=C.UpsampleBgrLinePair,Bf=C.UpsampleRgbaLinePair,Hu=C.UpsampleBgraLinePair,rh=C.UpsampleArgbLinePair,Uf=C.UpsampleRgba4444LinePair,HA=C.UpsampleRgb565LinePair,zf=16,qf=1<<zf-1,oh=-227,Nm=482,GA=6,c_=0,jA=o(256),WA=o(256),$A=o(256),KA=o(256),JA=o(Nm-oh),YA=o(Nm-oh);on("YuvToRgbRow",te,3),on("YuvToBgrRow",we,3),on("YuvToRgbaRow",Dt,4),on("YuvToBgraRow",Kt,4),on("YuvToArgbRow",Mt,4),on("YuvToRgba4444Row",He,2),on("YuvToRgb565Row",Ie,2);var h_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hf=[0,2,8],ZA=[8,7,6,4,4,2,2,2,1,1,1,1],QA=1;this.WebPDecodeRGBA=function(p,x,A,U,K){var Y=tu,Z=new $o,ne=new pi;Z.ba=ne,ne.S=Y,ne.width=[ne.width],ne.height=[ne.height];var re=ne.width,ce=ne.height,ve=new lr;if(ve==null||p==null)var Pe=2;else e(ve!=null),Pe=Yi(p,x,A,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Pe!=0?re=0:(re!=null&&(re[0]=ve.width[0]),ce!=null&&(ce[0]=ve.height[0]),re=1),re){ne.width=ne.width[0],ne.height=ne.height[0],U!=null&&(U[0]=ne.width),K!=null&&(K[0]=ne.height);e:{if(U=new Pr,(K=new Ji).data=p,K.w=x,K.ha=A,K.kd=1,x=[0],e(K!=null),((p=Yi(K.data,K.w,K.ha,null,null,null,x,null,K))==0||p==7)&&x[0]&&(p=4),(x=p)==0){if(e(Z!=null),U.data=K.data,U.w=K.w+K.offset,U.ha=K.ha-K.offset,U.put=Li,U.ac=Xn,U.bc=ji,U.ma=Z,K.xa){if((p=Hn())==null){Z=1;break e}if(function(Ne,Ae){var Ve=[0],Me=[0],ye=[0];t:for(;;){if(Ne==null)return 0;if(Ae==null)return Ne.a=2,0;if(Ne.l=Ae,Ne.a=0,W(Ne.m,Ae.data,Ae.w,Ae.ha),!lt(Ne.m,Ve,Me,ye)){Ne.a=3;break t}if(Ne.xb=ih,Ae.width=Ve[0],Ae.height=Me[0],!Ir(Ve[0],Me[0],1,Ne,null))break t;return 1}return e(Ne.a!=0),0}(p,U)){if(U=(x=Ra(U.width,U.height,Z.Oa,Z.ba))==0){t:{U=p;n:for(;;){if(U==null){U=0;break t}if(e(U.s.yc!=null),e(U.s.Ya!=null),e(0<U.s.Wb),e((A=U.l)!=null),e((K=A.ma)!=null),U.xb!=0){if(U.ca=K.ba,U.tb=K.tb,e(U.ca!=null),!Zl(K.Oa,A,nu)){U.a=2;break n}if(!No(U,A.width)||A.da)break n;if((A.da||Qt(U.ca.S))&&Ee(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&Ee()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!mt(U.s.vb,U.s.Wa.Xa)){U.a=1;break n}U.xb=0}if(!Di(U,U.V,U.Ba,U.c,U.i,A.o,ds))break n;K.Dc=U.Ma,U=1;break t}e(U.a!=0),U=0}U=!U}U&&(x=p.a)}else x=p.a}else{if((p=new jt)==null){Z=1;break e}if(p.Fa=K.na,p.P=K.P,p.qc=K.Sa,Wr(p,U)){if((x=Ra(U.width,U.height,Z.Oa,Z.ba))==0){if(p.Aa=0,A=Z.Oa,e((K=p)!=null),A!=null){if(0<(re=0>(re=A.Md)?0:100<re?255:255*re/100)){for(ce=ve=0;4>ce;++ce)12>(Pe=K.pb[ce]).lc&&(Pe.ia=re*ZA[0>Pe.lc?0:Pe.lc]>>3),ve|=Pe.ia;ve&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=A.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}Lt(p,U)||(x=p.a)}}else x=p.a}x==0&&Z.Oa!=null&&Z.Oa.fd&&(x=As(Z.ba))}Z=x}Y=Z!=0?null:11>Y?ne.f.RGBA.eb:ne.f.kb.y}else Y=null;return Y};var f_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(C,O){for(var H="",k=0;k<4;k++)H+=String.fromCharCode(C[O++]);return H}function f(C,O){return(C[O+0]<<0|C[O+1]<<8|C[O+2]<<16)>>>0}function g(C,O){return(C[O+0]<<0|C[O+1]<<8|C[O+2]<<16|C[O+3]<<24)>>>0}new u;var y=[0],w=[0],N=[],R=new u,F=t,T=function(C,O){var H={},k=0,b=!1,V=0,ie=0;if(H.frames=[],!function(ee,ae,ue,he){for(var Te=0;Te<he;Te++)if(ee[ae+Te]!=ue.charCodeAt(Te))return!0;return!1}(C,O,"RIFF",4)){var _e,le;for(g(C,O+=4),O+=8;O<C.length;){var se=c(C,O),W=g(C,O+=4);O+=4;var oe=W+(1&W);switch(se){case"VP8 ":case"VP8L":H.frames[k]===void 0&&(H.frames[k]={}),(j=H.frames[k]).src_off=b?ie:O-8,j.src_size=V+W+8,k++,b&&(b=!1,V=0,ie=0);break;case"VP8X":(j=H.header={}).feature_flags=C[O];var fe=O+4;j.canvas_width=1+f(C,fe),fe+=3,j.canvas_height=1+f(C,fe),fe+=3;break;case"ALPH":b=!0,V=oe+8,ie=O-8;break;case"ANIM":(j=H.header).bgcolor=g(C,O),fe=O+4,j.loop_count=(_e=C)[(le=fe)+0]<<0|_e[le+1]<<8,fe+=2;break;case"ANMF":var xe,j;(j=H.frames[k]={}).offset_x=2*f(C,O),O+=3,j.offset_y=2*f(C,O),O+=3,j.width=1+f(C,O),O+=3,j.height=1+f(C,O),O+=3,j.duration=f(C,O),O+=3,xe=C[O++],j.dispose=1&xe,j.blend=xe>>1&1}se!="ANMF"&&(O+=oe)}return H}}(F,0);T.response=F,T.rgbaoutput=!0,T.dataurl=!1;var I=T.header?T.header:null,P=T.frames?T.frames:null;if(I){I.loop_counter=I.loop_count,y=[I.canvas_height],w=[I.canvas_width];for(var G=0;G<P.length&&P[G].blend!=0;G++);}var J=P[0],Q=R.WebPDecodeRGBA(F,J.src_off,J.src_size,w,y);J.rgba=Q,J.imgwidth=w[0],J.imgheight=y[0];for(var D=0;D<w[0]*y[0]*4;D++)N[D]=Q[D];return this.width=w,this.height=y,this.data=N,this}(function(t){var e=function(){return typeof gv=="function"},n=function(y,w,N,R){var F=4,T=s;switch(R){case t.image_compression.FAST:F=1,T=o;break;case t.image_compression.MEDIUM:F=6,T=l;break;case t.image_compression.SLOW:F=9,T=u}y=i(y,w,N,T);var I=gv(y,{level:F});return t.__addimage__.arrayBufferToBinaryString(I)},i=function(y,w,N,R){for(var F,T,I,P=y.length/w,G=new Uint8Array(y.length+P),J=f(),Q=0;Q<P;Q+=1){if(I=Q*w,F=y.subarray(I,I+w),R)G.set(R(F,N,T),I+Q);else{for(var D,C=J.length,O=[];D<C;D+=1)O[D]=J[D](F,N,T);var H=g(O.concat());G.set(O[H],I+Q)}T=F}return G},r=function(y){var w=Array.apply([],y);return w.unshift(0),w},o=function(y,w){var N,R=[],F=y.length;R[0]=1;for(var T=0;T<F;T+=1)N=y[T-w]||0,R[T+1]=y[T]-N+256&255;return R},s=function(y,w,N){var R,F=[],T=y.length;F[0]=2;for(var I=0;I<T;I+=1)R=N&&N[I]||0,F[I+1]=y[I]-R+256&255;return F},l=function(y,w,N){var R,F,T=[],I=y.length;T[0]=3;for(var P=0;P<I;P+=1)R=y[P-w]||0,F=N&&N[P]||0,T[P+1]=y[P]+256-(R+F>>>1)&255;return T},u=function(y,w,N){var R,F,T,I,P=[],G=y.length;P[0]=4;for(var J=0;J<G;J+=1)R=y[J-w]||0,F=N&&N[J]||0,T=N&&N[J-w]||0,I=c(R,F,T),P[J+1]=y[J]-I+256&255;return P},c=function(y,w,N){if(y===w&&w===N)return y;var R=Math.abs(w-N),F=Math.abs(y-N),T=Math.abs(y+w-N-N);return R<=F&&R<=T?y:F<=T?w:N},f=function(){return[r,o,s,l,u]},g=function(y){var w=y.map(function(N){return N.reduce(function(R,F){return R+Math.abs(F)},0)});return w.indexOf(Math.min.apply(null,w))};t.processPNG=function(y,w,N,R){var F,T,I,P,G,J,Q,D,C,O,H,k,b,V,ie,_e=this.decode.FLATE_DECODE,le="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(I=new QF(y)).imgData,T=I.bits,F=I.colorSpace,G=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){C=(D=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,H=new Uint8Array(C*I.colors),O=new Uint8Array(C);var se,W=I.pixelBitlength-I.bits;for(V=0,ie=0;V<C;V++){for(b=D[V],se=0;se<W;)H[ie++]=b>>>se&255,se+=I.bits;O[V]=b>>>se&255}}if(I.bits===16){C=(D=new Uint32Array(I.decodePixels().buffer)).length,H=new Uint8Array(C*(32/I.pixelBitlength)*I.colors),O=new Uint8Array(C*(32/I.pixelBitlength)),k=I.colors>1,V=0,ie=0;for(var oe=0;V<C;)b=D[V++],H[ie++]=b>>>0&255,k&&(H[ie++]=b>>>16&255,b=D[V++],H[ie++]=b>>>0&255),O[oe++]=b>>>16&255;T=8}R!==t.image_compression.NONE&&e()?(y=n(H,I.width*I.colors,I.colors,R),Q=n(O,I.width,1,R)):(y=H,Q=O,_e=void 0)}if(I.colorType===3&&(F=this.color_spaces.INDEXED,J=I.palette,I.transparency.indexed)){var fe=I.transparency.indexed,xe=0;for(V=0,C=fe.length;V<C;++V)xe+=fe[V];if((xe/=255)===C-1&&fe.indexOf(0)!==-1)P=[fe.indexOf(0)];else if(xe!==C){for(D=I.decodePixels(),O=new Uint8Array(D.length),V=0,C=D.length;V<C;V++)O[V]=fe[D[V]];Q=n(O,I.width,1)}}var j=function(ee){var ae;switch(ee){case t.image_compression.FAST:ae=11;break;case t.image_compression.MEDIUM:ae=13;break;case t.image_compression.SLOW:ae=14;break;default:ae=12}return ae}(R);return _e===this.decode.FLATE_DECODE&&(le="/Predictor "+j+" "),le+="/Colors "+G+" /BitsPerComponent "+T+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:N,data:y,index:w,filter:_e,decodeParameters:le,transparency:P,palette:J,sMask:Q,predictor:j,width:I.width,height:I.height,bitsPerComponent:T,colorSpace:F}}}})(wt.API),function(t){t.processGIF89A=function(e,n,i,r){var o=new XF(e),s=o.width,l=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var c={data:u,width:s,height:l},f=new kg(100).encode(c,100);return t.processJPEG.call(this,f,n,i,r)},t.processGIF87A=t.processGIF89A}(wt.API),Rs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rs.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Dn.log("bit decode error:"+n)}},Rs.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,l=0;l<8&&8*r+l<this.width;l++){var u=this.palette[o>>7-l&1];this.data[s+4*l]=u.blue,this.data[s+4*l+1]=u.green,this.data[s+4*l+2]=u.red,this.data[s+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Rs.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,l=o>>4,u=15&o,c=this.palette[l];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*r+1>=this.width)break;c=this.palette[u],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Rs.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Rs.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,l=(o>>5&e)/e*255|0,u=(o>>10&e)/e*255|0,c=o>>15?255:0,f=i*this.width*4+4*r;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=s,this.data[f+3]=c}this.pos+=t}},Rs.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&e)/e*255|0,u=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,f=r*this.width*4+4*o;this.data[f]=c,this.data[f+1]=u,this.data[f+2]=l,this.data[f+3]=255}this.pos+=t}},Rs.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},Rs.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=o,this.data[l+1]=r,this.data[l+2]=i,this.data[l+3]=s}},Rs.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,r){var o=new Rs(e,!1),s=o.width,l=o.height,u={data:o.getData(),width:s,height:l},c=new kg(100).encode(u,100);return t.processJPEG.call(this,c,n,i,r)}}(wt.API),kw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,r){var o=new kw(e),s=o.width,l=o.height,u={data:o.getData(),width:s,height:l},c=new kg(100).encode(u,100);return t.processJPEG.call(this,c,n,i,r)}}(wt.API),wt.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,o=new Uint8Array(r/4*3),s=new Uint8Array(r/4),l=0,u=0,c=0;c<r;c+=4){var f=i[c],g=i[c+1],y=i[c+2],w=i[c+3];o[l++]=f,o[l++]=g,o[l++]=y,s[u++]=w}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:N,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yu=wt.API,Nd=Yu.getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:r.metadata.Unicode.widths,u=l.fof?l.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,f=c.fof?c.fof:1,g=e.doKerning!==!1,y=0,w=t.length,N=0,R=l[0]||u,F=[];for(n=0;n<w;n++)i=t.charCodeAt(n),typeof r.metadata.widthOfString=="function"?F.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+s*(1e3/o)||0)/1e3):(y=g&&En(c[i])==="object"&&!isNaN(parseInt(c[i][N],10))?c[i][N]/f:0,F.push((l[i]||R)/u+y)),N=i;return F},Cw=Yu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Yu.processArabic&&(t=Yu.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,r)/n:Nd.apply(this,arguments).reduce(function(o,s){return o+s},0)},Iw=function(t,e,n,i){for(var r=[],o=0,s=t.length,l=0;o!==s&&l+e[o]<n;)l+=e[o],o++;r.push(t.slice(0,o));var u=o;for(l=0;o!==s;)l+e[o]>i&&(r.push(t.slice(u,o)),l=0,u=o),l+=e[o],o++;return u!==o&&r.push(t.slice(u,o)),r},Pw=function(t,e,n){n||(n={});var i,r,o,s,l,u,c,f=[],g=[f],y=n.textIndent||0,w=0,N=0,R=t.split(" "),F=Nd.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?R[0].length+2:n.lineIndent||0){var T=Array(u).join(" "),I=[];R.map(function(G){(G=G.split(/\s*\n/)).length>1?I=I.concat(G.map(function(J,Q){return(Q&&J.length?`
`:"")+J})):I.push(G[0])}),R=I,u=Cw.apply(this,[T,n])}for(o=0,s=R.length;o<s;o++){var P=0;if(i=R[o],u&&i[0]==`
`&&(i=i.substr(1),P=1),y+w+(N=(r=Nd.apply(this,[i,n])).reduce(function(G,J){return G+J},0))>e||P){if(N>e){for(l=Iw.apply(this,[i,r,e-(y+w),e]),f.push(l.shift()),f=[l.pop()];l.length;)g.push([l.shift()]);N=r.slice(i.length-(f[0]?f[0].length:0)).reduce(function(G,J){return G+J},0)}else f=[i];g.push(f),y=N+u,w=F}else f.push(i),y+=w+N,w=F}return c=u?function(G,J){return(J?T:"")+G.join(" ")}:function(G){return G.join(" ")},g.map(c)},Yu.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var g=this.internal.getFont(f.fontName,f.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var l,u,c=[];for(l=0,u=i.length;l<u;l++)c=c.concat(Pw.apply(this,[i[l],s,o]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var o=function(g){return"0x"+parseInt(g,10).toString(16)},s=t.__fontmetrics__.compress=function(g){var y,w,N,R,F=["{"];for(var T in g){if(y=g[T],isNaN(parseInt(T,10))?w="'"+T+"'":(T=parseInt(T,10),w=(w=o(T).slice(2)).slice(0,-1)+i[w.slice(-1)]),typeof y=="number")y<0?(N=o(y).slice(3),R="-"):(N=o(y).slice(2),R=""),N=R+N.slice(0,-1)+i[N.slice(-1)];else{if(En(y)!=="object")throw new Error("Don't know what to do with value type "+En(y)+".");N=s(y)}F.push(w+N)}return F.push("}"),F.join("")},l=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,w,N,R,F={},T=1,I=F,P=[],G="",J="",Q=g.length-1,D=1;D<Q;D+=1)(R=g[D])=="'"?y?(N=y.join(""),y=void 0):y=[]:y?y.push(R):R=="{"?(P.push([I,N]),I={},N=void 0):R=="}"?((w=P.pop())[0][w[1]]=I,N=void 0,I=w[0]):R=="-"?T=-1:N===void 0?n.hasOwnProperty(R)?(G+=n[R],N=parseInt(G,16)*T,T=1,G=""):G+=R:n.hasOwnProperty(R)?(J+=n[R],I[N]=parseInt(J,16)*T,T=1,N=void 0,J=""):J+=R;return F},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var y=g.font,w=f.Unicode[y.postScriptName];w&&(y.metadata.Unicode={},y.metadata.Unicode.widths=w.widths,y.metadata.Unicode.kerning=w.kerning);var N=c.Unicode[y.postScriptName];N&&(y.metadata.Unicode.encoding=N,y.encoding=N.codePages[0])}])}(wt.API),function(t){var e=function(n){for(var i=n.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=n.charCodeAt(o);return r};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,o=n.instance;if(!r.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=o.existsFileInVFS(r.postScriptName)===!1?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(s,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Gh(l)),s.metadata=t.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(r,i)}}])}(wt),function(t){function e(){return(Nt.canvg?Promise.resolve(Nt.canvg):hv(()=>import("./index.es-BmJrNxhb.js"),[],import.meta.url)).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}wt.API.addSvgAsImage=function(n,i,r,o,s,l,u,c){if(isNaN(i)||isNaN(r))throw Dn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw Dn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=o,f.height=s;var g=f.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return e().then(function(N){return N.fromString(g,n,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(y)}).then(function(){w.addImage(f.toDataURL("image/jpeg",1),i,r,o,s,u,c)})}}(),wt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},wt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),u=[],c=0,f=0,g=0;function y(N,R){var F,T=!1;for(F=0;F<N.length;F+=1)N[F]===R&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var w=l.length;for(g=0;g<w;g+=1)n[l[g]].value=n[l[g]].defaultValue,n[l[g]].explicitSet=!1}if(En(t)==="object"){for(r in t)if(o=t[r],y(l,r)&&o!==void 0){if(n[r].type==="boolean"&&typeof o=="boolean")n[r].value=o;else if(n[r].type==="name"&&y(n[r].valueSet,o))n[r].value=o;else if(n[r].type==="integer"&&Number.isInteger(o))n[r].value=o;else if(n[r].type==="array"){for(c=0;c<o.length;c+=1)if(i=!0,o[c].length===1&&typeof o[c][0]=="number")u.push(String(o[c]-1));else if(o[c].length>1){for(f=0;f<o[c].length;f+=1)typeof o[c][f]!="number"&&(i=!1);i===!0&&u.push([o[c][0]-1,o[c][1]-1].join(" "))}n[r].value="["+u.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,R=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?R.push("/"+N+" /"+n[N].value):R.push("/"+N+" "+n[N].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+l.length+r.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+o+s+l+u),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(wt.API),function(t){var e=t.API,n=e.pdfEscape16=function(o,s){for(var l,u=s.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],g=0,y=o.length;g<y;++g){if(l=s.metadata.characterToGlyph(o.charCodeAt(g)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=o.charCodeAt(g),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(s.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(c[4-l.length],l)}return f.join("")},i=function(o){var s,l,u,c,f,g,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],g=0,y=(l=Object.keys(o).sort(function(w,N){return w-N})).length;g<y;g++)s=l[g],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),u.push("<"+s+"><"+c+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var l=s.font,u=s.out,c=s.newObject,f=s.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var g=l.metadata.Unicode.widths,y=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),w="",N=0;N<y.length;N++)w+=String.fromCharCode(y[N]);var R=c();f({data:w,addLength1:!0,objectId:R}),u("endobj");var F=c();f({data:i(l.metadata.toUnicode),addLength1:!0,objectId:F}),u("endobj");var T=c();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+nc(l.fontName)),u("/FontFile2 "+R+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var I=c();u("<<"),u("/Type /Font"),u("/BaseFont /"+nc(l.fontName)),u("/FontDescriptor "+T+" 0 R"),u("/W "+t.API.PDFObject.convert(g)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=c(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+F+" 0 R"),u("/BaseFont /"+nc(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+I+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var l=s.font,u=s.out,c=s.newObject,f=s.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var g=l.metadata.rawData,y="",w=0;w<g.length;w++)y+=String.fromCharCode(g[w]);var N=c();f({data:y,addLength1:!0,objectId:N}),u("endobj");var R=c();f({data:i(l.metadata.toUnicode),addLength1:!0,objectId:R}),u("endobj");var F=c();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+N+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+nc(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=c();for(var T=0;T<l.metadata.hmtx.widths.length;T++)l.metadata.hmtx.widths[T]=parseInt(l.metadata.hmtx.widths[T]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+nc(l.fontName)+"/FontDescriptor "+F+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(o)}]);var r=function(o){var s,l=o.text||"",u=o.x,c=o.y,f=o.options||{},g=o.mutex||{},y=g.pdfEscape,w=g.activeFontKey,N=g.fonts,R=w,F="",T=0,I="",P=N[R].encoding;if(N[R].encoding!=="Identity-H")return{text:l,x:u,y:c,options:f,mutex:g};for(I=l,R=w,Array.isArray(l)&&(I=l[0]),T=0;T<I.length;T+=1)N[R].metadata.hasOwnProperty("cmap")&&(s=N[R].metadata.cmap.unicode.codeMap[I[T].charCodeAt(0)]),s||I[T].charCodeAt(0)<256&&N[R].metadata.hasOwnProperty("Unicode")?F+=I[T]:F+="";var G="";return parseInt(R.slice(1))<14||P==="WinAnsiEncoding"?G=y(F,R).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):P==="Identity-H"&&(G=n(F,N[R])),g.isHex=!0,{text:G,x:u,y:c,options:f,mutex:g}};e.events.push(["postProcessText",function(o){var s=o.text||"",l=[],u={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?l.push([r(Object.assign({},u,{text:s[c][0]})).text,s[c][1],s[c][2]]):l.push(r(Object.assign({},u,{text:s[c]})).text);o.text=l}else o.text=r(Object.assign({},u,{text:s})).text}])}(wt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var r,o,s,l,u,c,f,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},F=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,P=0;this.__bidiEngine__={};var G=function(k){var b=k.charCodeAt(),V=b>>8,ie=R[V];return ie!==void 0?g[256*ie+(255&b)]:V===252||V===253?"AL":T.test(V)?"L":V===8?"R":"N"},J=function(k){for(var b,V=0;V<k.length;V++){if((b=G(k.charAt(V)))==="L")return!1;if(b==="R")return!0}return!1},Q=function(k,b,V,ie){var _e,le,se,W,oe=b[ie];switch(oe){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(oe="AN");break;case"AL":I=!0,oe="R";break;case"WS":oe="N";break;case"CS":ie<1||ie+1>=b.length||(_e=V[ie-1])!=="EN"&&_e!=="AN"||(le=b[ie+1])!=="EN"&&le!=="AN"?oe="N":I&&(le="AN"),oe=le===_e?le:"N";break;case"ES":oe=(_e=ie>0?V[ie-1]:"B")==="EN"&&ie+1<b.length&&b[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&V[ie-1]==="EN"){oe="EN";break}if(I){oe="N";break}for(se=ie+1,W=b.length;se<W&&b[se]==="ET";)se++;oe=se<W&&b[se]==="EN"?"EN":"N";break;case"NSM":if(s&&!l){for(W=b.length,se=ie+1;se<W&&b[se]==="NSM";)se++;if(se<W){var fe=k[ie],xe=fe>=1425&&fe<=2303||fe===64286;if(_e=b[se],xe&&(_e==="R"||_e==="AL")){oe="R";break}}}oe=ie<1||(_e=b[ie-1])==="B"?"N":V[ie-1];break;case"B":I=!1,r=!0,oe=P;break;case"S":o=!0,oe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":oe="N"}return oe},D=function(k,b,V){var ie=k.split("");return V&&C(ie,V,{hiLevel:P}),ie.reverse(),b&&b.reverse(),ie.join("")},C=function(k,b,V){var ie,_e,le,se,W,oe=-1,fe=k.length,xe=0,j=[],ee=P?w:y,ae=[];for(I=!1,r=!1,o=!1,_e=0;_e<fe;_e++)ae[_e]=G(k[_e]);for(le=0;le<fe;le++){if(W=xe,j[le]=Q(k,ae,j,le),ie=240&(xe=ee[W][N[j[le]]]),xe&=15,b[le]=se=ee[xe][5],ie>0)if(ie===16){for(_e=oe;_e<le;_e++)b[_e]=1;oe=-1}else oe=-1;if(ee[xe][6])oe===-1&&(oe=le);else if(oe>-1){for(_e=oe;_e<le;_e++)b[_e]=se;oe=-1}ae[le]==="B"&&(b[le]=0),V.hiLevel|=se}o&&function(ue,he,Te){for(var be=0;be<Te;be++)if(ue[be]==="S"){he[be]=P;for(var ke=be-1;ke>=0&&ue[ke]==="WS";ke--)he[ke]=P}}(ae,b,fe)},O=function(k,b,V,ie,_e){if(!(_e.hiLevel<k)){if(k===1&&P===1&&!r)return b.reverse(),void(V&&V.reverse());for(var le,se,W,oe,fe=b.length,xe=0;xe<fe;){if(ie[xe]>=k){for(W=xe+1;W<fe&&ie[W]>=k;)W++;for(oe=xe,se=W-1;oe<se;oe++,se--)le=b[oe],b[oe]=b[se],b[se]=le,V&&(le=V[oe],V[oe]=V[se],V[se]=le);xe=W}xe++}}},H=function(k,b,V){var ie=k.split(""),_e={hiLevel:P};return V||(V=[]),C(ie,V,_e),function(le,se,W){if(W.hiLevel!==0&&f)for(var oe,fe=0;fe<le.length;fe++)se[fe]===1&&(oe=F.indexOf(le[fe]))>=0&&(le[fe]=F[oe+1])}(ie,V,_e),O(2,ie,b,V,_e),O(1,ie,b,V,_e),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(k,b,V){if(function(_e,le){if(le)for(var se=0;se<_e.length;se++)le[se]=se;l===void 0&&(l=J(_e)),c===void 0&&(c=J(_e))}(k,b),s||!u||c)if(s&&u&&l^c)P=l?1:0,k=D(k,b,V);else if(!s&&u&&c)P=l?1:0,k=H(k,b,V),k=D(k,b);else if(!s||l||u||c){if(s&&!u&&l^c)k=D(k,b),l?(P=0,k=H(k,b,V)):(P=1,k=H(k,b,V),k=D(k,b));else if(s&&l&&!u&&c)P=1,k=H(k,b,V),k=D(k,b);else if(!s&&!u&&l^c){var ie=f;l?(P=1,k=H(k,b,V),P=0,f=!1,k=H(k,b,V),f=ie):(P=0,k=H(k,b,V),k=D(k,b),P=1,f=!1,k=H(k,b,V),f=ie,k=D(k,b))}}else P=0,k=H(k,b,V);else P=l?1:0,k=H(k,b,V);return k},this.__bidiEngine__.setOptions=function(k){k&&(s=k.isInputVisual,u=k.isOutputVisual,l=k.isInputRtl,c=k.isOutputRtl,f=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var r=i.text,o=(i.x,i.y,i.options||{}),s=(i.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(r)==="[object Array]"){var l=0;for(s=[],l=0;l<r.length;l+=1)Object.prototype.toString.call(r[l])==="[object Array]"?s.push([n.doBidiReorder(r[l][0]),r[l][1],r[l][2]]):s.push([n.doBidiReorder(r[l])]);i.text=s}else i.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])}(wt),wt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Wl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new pO(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new eO(this.contents),this.head=new nO(this),this.name=new aO(this),this.cmap=new BA(this),this.toUnicode={},this.hhea=new iO(this),this.maxp=new lO(this),this.hmtx=new uO(this),this.post=new oO(this),this.os2=new rO(this),this.loca=new dO(this),this.glyf=new cO(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,l,u,c;for(c=[],s=0,l=(u=this.bbox).length;s<l;s++)e=u[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var r,o,s,l;for(s=0,o=0,l=(e=""+e).length;0<=l?o<l:o>l;o=0<=l?++o:--o)r=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var Ws,Wl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,r;for(r=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)r.push(this.writeByte(e.charCodeAt(n)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,r,o,s,l,u;return e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^o)+65536*(255^s)+256*(255^l)+(255^u)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*r+16777216*o+65536*s+256*l+u},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,r,o;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],o.push(this.writeByte(n));return o},t}(),eO=function(){var t;function e(n){var i,r,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,o=this.tableCount;0<=o?r<o:r>o;r=0<=o?++r:--r)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,r,o,s,l,u,c,f,g,y,w,N,R;for(R in w=Object.keys(n).length,u=Math.log(2),g=16*Math.floor(Math.log(w)/u),s=Math.floor(g/u),f=16*w-g,(r=new Wl).writeInt(this.scalarType),r.writeShort(w),r.writeShort(g),r.writeShort(s),r.writeShort(f),o=16*w,c=r.pos+o,l=null,N=[],n)for(y=n[R],r.writeString(R),r.writeInt(t(y)),r.writeInt(c),r.writeInt(y.length),N=N.concat(y),R==="head"&&(l=c),c+=y.length;c%4;)N.push(0),c++;return r.write(N),i=2981146554-t(r.data),r.pos=l+8,r.writeUInt32(i),r.data},t=function(n){var i,r,o,s;for(n=UA.call(n);n.length%4;)n.push(0);for(o=new Wl(n),r=0,i=0,s=n.length;i<s;i=i+=4)r+=o.readUInt32();return 4294967295&r},e}(),tO={}.hasOwnProperty,Ea=function(t,e){for(var n in e)tO.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Ws=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var nO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Wl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e}(),Lw=function(){function t(e,n){var i,r,o,s,l,u,c,f,g,y,w,N,R,F,T,I,P;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(w=e.readUInt16(),y=w/2,e.pos+=6,o=function(){var G,J;for(J=[],u=G=0;0<=y?G<y:G>y;u=0<=y?++G:--G)J.push(e.readUInt16());return J}(),e.pos+=2,R=function(){var G,J;for(J=[],u=G=0;0<=y?G<y:G>y;u=0<=y?++G:--G)J.push(e.readUInt16());return J}(),c=function(){var G,J;for(J=[],u=G=0;0<=y?G<y:G>y;u=0<=y?++G:--G)J.push(e.readUInt16());return J}(),f=function(){var G,J;for(J=[],u=G=0;0<=y?G<y:G>y;u=0<=y?++G:--G)J.push(e.readUInt16());return J}(),r=(this.length-e.pos+this.offset)/2,l=function(){var G,J;for(J=[],u=G=0;0<=r?G<r:G>r;u=0<=r?++G:--G)J.push(e.readUInt16());return J}(),u=T=0,P=o.length;T<P;u=++T)for(F=o[u],i=I=N=R[u];N<=F?I<=F:I>=F;i=N<=F?++I:--I)f[u]===0?s=i+c[u]:(s=l[f[u]/2+(i-N)-(y-u)]||0)!==0&&(s+=c[u]),this.codeMap[i]=65535&s}e.pos=g}return t.encode=function(e,n){var i,r,o,s,l,u,c,f,g,y,w,N,R,F,T,I,P,G,J,Q,D,C,O,H,k,b,V,ie,_e,le,se,W,oe,fe,xe,j,ee,ae,ue,he,Te,be,ke,Ge,qe,Je;switch(ie=new Wl,s=Object.keys(e).sort(function(Ze,mt){return Ze-mt}),n){case"macroman":for(R=0,F=function(){var Ze=[];for(N=0;N<256;++N)Ze.push(0);return Ze}(),I={0:0},o={},_e=0,oe=s.length;_e<oe;_e++)I[ke=e[r=s[_e]]]==null&&(I[ke]=++R),o[r]={old:e[r],new:I[e[r]]},F[r]=I[e[r]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(F),{charMap:o,subtable:ie.data,maxGlyphID:R+1};case"unicode":for(b=[],g=[],P=0,I={},i={},T=c=null,le=0,fe=s.length;le<fe;le++)I[J=e[r=s[le]]]==null&&(I[J]=++P),i[r]={old:J,new:I[J]},l=I[J]-r,T!=null&&l===c||(T&&g.push(T),b.push(r),c=l),T=r;for(T&&g.push(T),g.push(65535),b.push(65535),H=2*(O=b.length),C=2*Math.pow(Math.log(O)/Math.LN2,2),y=Math.log(C/2)/Math.LN2,D=2*O-C,u=[],Q=[],w=[],N=se=0,xe=b.length;se<xe;N=++se){if(k=b[N],f=g[N],k===65535){u.push(0),Q.push(0);break}if(k-(V=i[k].new)>=32768)for(u.push(0),Q.push(2*(w.length+O-N)),r=W=k;k<=f?W<=f:W>=f;r=k<=f?++W:--W)w.push(i[r].new);else u.push(V-k),Q.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*O+2*w.length),ie.writeUInt16(0),ie.writeUInt16(H),ie.writeUInt16(C),ie.writeUInt16(y),ie.writeUInt16(D),Te=0,j=g.length;Te<j;Te++)r=g[Te],ie.writeUInt16(r);for(ie.writeUInt16(0),be=0,ee=b.length;be<ee;be++)r=b[be],ie.writeUInt16(r);for(Ge=0,ae=u.length;Ge<ae;Ge++)l=u[Ge],ie.writeUInt16(l);for(qe=0,ue=Q.length;qe<ue;qe++)G=Q[qe],ie.writeUInt16(G);for(Je=0,he=w.length;Je<he;Je++)R=w[Je],ie.writeUInt16(R);return{charMap:i,subtable:ie.data,maxGlyphID:P+1}}},t}(),BA=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,r,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=o?r<o:r>o;r=0<=o?++r:--r)i=new Lw(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var r,o;return i==null&&(i="macroman"),r=Lw.encode(n,i),(o=new Wl).writeUInt16(0),o.writeUInt16(1),r.table=o.data.concat(r.subtable),r},e}(),iO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),rO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(n.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(n.readInt());return r}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(n.readInt());return r}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),oO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="post",e.prototype.parse=function(n){var i,r,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(r=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)i=n.readByte(),o.push(this.names.push(n.readString(i)));return o;case 151552:return r=n.readUInt16(),this.offsets=n.read(r);case 196608:break;case 262144:return this.map=(function(){var l,u,c;for(c=[],s=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;s=0<=u?++l:--l)c.push(n.readUInt32());return c}).call(this)}},e}(),sO=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},aO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="name",e.prototype.parse=function(n){var i,r,o,s,l,u,c,f,g,y,w;for(n.pos=this.offset,n.readShort(),i=n.readShort(),u=n.readShort(),r=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+u+n.readShort()});for(c={},s=g=0,y=r.length;g<y;s=++g)o=r[s],n.pos=o.offset,f=n.readString(o.length),l=new sO(f,o),c[w=o.nameID]==null&&(c[w]=[]),c[o.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),lO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),uO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,r,o,s,l,u,c;for(n.pos=this.offset,this.metrics=[],i=0,u=this.file.hhea.numberOfMetrics;0<=u?i<u:i>u;i=0<=u?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,g;for(g=[],i=f=0;0<=o?f<o:f>o;i=0<=o?++f:--f)g.push(n.readInt16());return g}(),this.widths=(function(){var f,g,y,w;for(w=[],f=0,g=(y=this.metrics).length;f<g;f++)s=y[f],w.push(s.advance);return w}).call(this),r=this.widths[this.widths.length-1],c=[],i=l=0;0<=o?l<o:l>o;i=0<=o?++l:--l)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),UA=[].slice,cO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,r,o,s,l,u,c,f,g,y;return n in this.cache?this.cache[n]:(s=this.file.loca,i=this.file.contents,r=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+r,l=(u=new Wl(i.read(o))).readShort(),f=u.readShort(),y=u.readShort(),c=u.readShort(),g=u.readShort(),this.cache[n]=l===-1?new fO(u,f,y,c,g):new hO(u,l,f,y,c,g),this.cache[n]))},e.prototype.encode=function(n,i,r){var o,s,l,u,c;for(l=[],s=[],u=0,c=i.length;u<c;u++)o=n[i[u]],s.push(l.length),o&&(l=l.concat(o.encode(r)));return s.push(l.length),{table:l,offsets:s}},e}(),hO=function(){function t(e,n,i,r,o,s){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),fO=function(){function t(e,n,i,r,o){var s,l;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new Wl(UA.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),dO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Ws),e.prototype.tag="loca",e.prototype.parse=function(n){var i,r;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var o,s;for(s=[],r=0,o=this.length;r<o;r+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],r=0,o=this.length;r<o;r+=4)s.push(n.readUInt32());return s}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var r=new Uint32Array(this.offsets.length),o=0,s=0,l=0;l<r.length;++l)if(r[l]=o,s<i.length&&i[s]==l){++s,r[l]=o;var u=this.offsets[l],c=this.offsets[l+1]-u;c>0&&(o+=c)}for(var f=new Array(4*r.length),g=0;g<r.length;++g)f[4*g+3]=255&r[g],f[4*g+2]=(65280&r[g])>>8,f[4*g+1]=(16711680&r[g])>>16,f[4*g]=(4278190080&r[g])>>24;return f},e}(),pO=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,r,o;for(n in r=this.font.cmap.tables[0].codeMap,e={},o=this.subset)i=o[n],e[n]=r[i];return e},t.prototype.glyphsFor=function(e){var n,i,r,o,s,l,u;for(r={},s=0,l=e.length;s<l;s++)r[o=e[s]]=this.font.glyf.glyphFor(o);for(o in n=[],r)(i=r[o])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(o in u=this.glyphsFor(n))i=u[o],r[o]=i;return r},t.prototype.encode=function(e,n){var i,r,o,s,l,u,c,f,g,y,w,N,R,F,T;for(r in i=BA.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),w={0:0},T=i.charMap)w[(u=T[r]).old]=u.new;for(N in y=i.maxGlyphID,s)N in w||(w[N]=y++);return f=function(I){var P,G;for(P in G={},I)G[I[P]]=P;return G}(w),g=Object.keys(f).sort(function(I,P){return I-P}),R=function(){var I,P,G;for(G=[],I=0,P=g.length;I<P;I++)l=g[I],G.push(f[l]);return G}(),o=this.font.glyf.encode(s,R,w),c=this.font.loca.encode(o.offsets,R),F={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(F["OS/2"]=this.font.os2.raw()),this.font.directory.encode(F)},t}();wt.API.PDFObject=function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,r,o,s;if(Array.isArray(n))return"["+function(){var l,u,c;for(c=[],l=0,u=n.length;l<u;l++)i=n[l],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in o=["<<"],n)s=n[r],o.push("/"+r+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+n},e}();const mO=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:WF,AcroFormAppearance:ht,AcroFormButton:bi,AcroFormCheckBox:$h,AcroFormChoiceField:yu,AcroFormComboBox:wu,AcroFormEditBox:jh,AcroFormListBox:_u,AcroFormPasswordField:Kh,AcroFormPushButton:Wh,AcroFormRadioButton:xu,AcroFormTextField:Bl,GState:Af,ShadingPattern:xl,TilingPattern:pu,default:wt,jsPDF:wt},Symbol.toStringTag,{value:"Module"}));var zA={exports:{}};const gO=cb(mO);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(i,r){t.exports=r(function(){try{return gO}catch{}}())})(typeof globalThis<"u"?globalThis:typeof kd<"u"?kd:typeof window<"u"?window:typeof self<"u"?self:kd,function(n){return function(){var i={172:function(l,u){var c=this&&this.__extends||function(){var y=function(w,N){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,F){R.__proto__=F}||function(R,F){for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(R[T]=F[T])},y(w,N)};return function(w,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");y(w,N);function R(){this.constructor=w}w.prototype=N===null?Object.create(N):(R.prototype=N.prototype,new R)}}();Object.defineProperty(u,"__esModule",{value:!0}),u.CellHookData=u.HookData=void 0;var f=function(){function y(w,N,R){this.table=N,this.pageNumber=N.pageNumber,this.pageCount=this.pageNumber,this.settings=N.settings,this.cursor=R,this.doc=w.getDocument()}return y}();u.HookData=f;var g=function(y){c(w,y);function w(N,R,F,T,I,P){var G=y.call(this,N,R,P)||this;return G.cell=F,G.row=T,G.column=I,G.section=T.section,G}return w}(f);u.CellHookData=g},340:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0});var f=c(4),g=c(136),y=c(744),w=c(776),N=c(664),R=c(972);function F(T){T.API.autoTable=function(){for(var I=[],P=0;P<arguments.length;P++)I[P]=arguments[P];var G;I.length===1?G=I[0]:(console.error("Use of deprecated autoTable initiation"),G=I[2]||{},G.columns=I[0],G.body=I[1]);var J=(0,w.parseInput)(this,G),Q=(0,R.createTable)(this,J);return(0,N.drawTable)(this,Q),this},T.API.lastAutoTable=!1,T.API.previousAutoTable=!1,T.API.autoTable.previous=!1,T.API.autoTableText=function(I,P,G,J){(0,g.default)(I,P,G,J,this)},T.API.autoTableSetDefaults=function(I){return y.DocHandler.setDefaults(I,this),this},T.autoTableSetDefaults=function(I,P){y.DocHandler.setDefaults(I,P)},T.API.autoTableHtmlToJson=function(I,P){var G;if(P===void 0&&(P=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var J=new y.DocHandler(this),Q=(0,f.parseHtml)(J,I,window,P,!1),D=Q.head,C=Q.body,O=((G=D[0])===null||G===void 0?void 0:G.map(function(H){return H.content}))||[];return{columns:O,rows:C,data:C}},T.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var I=this.lastAutoTable;return I&&I.finalY?I.finalY:0},T.API.autoTableAddPageContent=function(I){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),T.API.autoTable.globalDefaults||(T.API.autoTable.globalDefaults={}),T.API.autoTable.globalDefaults.addPageContent=I,this},T.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}u.default=F},136:function(l,u){Object.defineProperty(u,"__esModule",{value:!0});function c(f,g,y,w,N){w=w||{};var R=1.15,F=N.internal.scaleFactor,T=N.internal.getFontSize()/F,I=N.getLineHeightFactor?N.getLineHeightFactor():R,P=T*I,G=/\r\n|\r|\n/g,J="",Q=1;if((w.valign==="middle"||w.valign==="bottom"||w.halign==="center"||w.halign==="right")&&(J=typeof f=="string"?f.split(G):f,Q=J.length||1),y+=T*(2-R),w.valign==="middle"?y-=Q/2*P:w.valign==="bottom"&&(y-=Q*P),w.halign==="center"||w.halign==="right"){var D=T;if(w.halign==="center"&&(D*=.5),J&&Q>=1){for(var C=0;C<J.length;C++)N.text(J[C],g-N.getStringUnitWidth(J[C])*D,y),y+=P;return N}g-=N.getStringUnitWidth(f)*D}return w.halign==="justify"?N.text(f,g,y,{maxWidth:w.maxWidth||100,align:"justify"}):N.text(f,g,y),N}u.default=c},420:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.getPageAvailableWidth=u.parseSpacing=u.getFillStyle=u.addTableBorder=u.getStringWidth=void 0;function c(N,R,F){F.applyStyles(R,!0);var T=Array.isArray(N)?N:[N],I=T.map(function(P){return F.getTextWidth(P)}).reduce(function(P,G){return Math.max(P,G)},0);return I}u.getStringWidth=c;function f(N,R,F,T){var I=R.settings.tableLineWidth,P=R.settings.tableLineColor;N.applyStyles({lineWidth:I,lineColor:P});var G=g(I,!1);G&&N.rect(F.x,F.y,R.getWidth(N.pageSize().width),T.y-F.y,G)}u.addTableBorder=f;function g(N,R){var F=N>0,T=R||R===0;return F&&T?"DF":F?"S":T?"F":null}u.getFillStyle=g;function y(N,R){var F,T,I,P;if(N=N||R,Array.isArray(N)){if(N.length>=4)return{top:N[0],right:N[1],bottom:N[2],left:N[3]};if(N.length===3)return{top:N[0],right:N[1],bottom:N[2],left:N[1]};if(N.length===2)return{top:N[0],right:N[1],bottom:N[0],left:N[1]};N.length===1?N=N[0]:N=R}return typeof N=="object"?(typeof N.vertical=="number"&&(N.top=N.vertical,N.bottom=N.vertical),typeof N.horizontal=="number"&&(N.right=N.horizontal,N.left=N.horizontal),{left:(F=N.left)!==null&&F!==void 0?F:R,top:(T=N.top)!==null&&T!==void 0?T:R,right:(I=N.right)!==null&&I!==void 0?I:R,bottom:(P=N.bottom)!==null&&P!==void 0?P:R}):(typeof N!="number"&&(N=R),{top:N,right:N,bottom:N,left:N})}u.parseSpacing=y;function w(N,R){var F=y(R.settings.margin,0);return N.pageSize().width-(F.left+F.right)}u.getPageAvailableWidth=w},796:function(l,u){var c=this&&this.__extends||function(){var w=function(N,R){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,T){F.__proto__=T}||function(F,T){for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(F[I]=T[I])},w(N,R)};return function(N,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");w(N,R);function F(){this.constructor=N}N.prototype=R===null?Object.create(R):(F.prototype=R.prototype,new F)}}();Object.defineProperty(u,"__esModule",{value:!0}),u.getTheme=u.defaultStyles=u.HtmlRowInput=void 0;var f=function(w){c(N,w);function N(R){var F=w.call(this)||this;return F._element=R,F}return N}(Array);u.HtmlRowInput=f;function g(w){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/w,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}u.defaultStyles=g;function y(w){var N={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return N[w]}u.getTheme=y},903:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.parseCss=void 0;var f=c(420);function g(F,T,I,P,G){var J={},Q=1.3333333333333333,D=w(T,function(oe){return G.getComputedStyle(oe).backgroundColor});D!=null&&(J.fillColor=D);var C=w(T,function(oe){return G.getComputedStyle(oe).color});C!=null&&(J.textColor=C);var O=R(P,I);O&&(J.cellPadding=O);var H="borderTopColor",k=Q*I,b=P.borderTopWidth;if(P.borderBottomWidth===b&&P.borderRightWidth===b&&P.borderLeftWidth===b){var V=(parseFloat(b)||0)/k;V&&(J.lineWidth=V)}else J.lineWidth={top:(parseFloat(P.borderTopWidth)||0)/k,right:(parseFloat(P.borderRightWidth)||0)/k,bottom:(parseFloat(P.borderBottomWidth)||0)/k,left:(parseFloat(P.borderLeftWidth)||0)/k},J.lineWidth.top||(J.lineWidth.right?H="borderRightColor":J.lineWidth.bottom?H="borderBottomColor":J.lineWidth.left&&(H="borderLeftColor"));var ie=w(T,function(oe){return G.getComputedStyle(oe)[H]});ie!=null&&(J.lineColor=ie);var _e=["left","right","center","justify"];_e.indexOf(P.textAlign)!==-1&&(J.halign=P.textAlign),_e=["middle","bottom","top"],_e.indexOf(P.verticalAlign)!==-1&&(J.valign=P.verticalAlign);var le=parseInt(P.fontSize||"");isNaN(le)||(J.fontSize=le/Q);var se=y(P);se&&(J.fontStyle=se);var W=(P.fontFamily||"").toLowerCase();return F.indexOf(W)!==-1&&(J.font=W),J}u.parseCss=g;function y(F){var T="";return(F.fontWeight==="bold"||F.fontWeight==="bolder"||parseInt(F.fontWeight)>=700)&&(T="bold"),(F.fontStyle==="italic"||F.fontStyle==="oblique")&&(T+="italic"),T}function w(F,T){var I=N(F,T);if(!I)return null;var P=I.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!P||!Array.isArray(P))return null;var G=[parseInt(P[1]),parseInt(P[2]),parseInt(P[3])],J=parseInt(P[4]);return J===0||isNaN(G[0])||isNaN(G[1])||isNaN(G[2])?null:G}function N(F,T){var I=T(F);return I==="rgba(0, 0, 0, 0)"||I==="transparent"||I==="initial"||I==="inherit"?F.parentElement==null?null:N(F.parentElement,T):I}function R(F,T){var I=[F.paddingTop,F.paddingRight,F.paddingBottom,F.paddingLeft],P=96/(72/T),G=(parseInt(F.lineHeight)-parseInt(F.fontSize))/T/2,J=I.map(function(D){return parseInt(D||"0")/P}),Q=(0,f.parseSpacing)(J,0);return G>Q.top&&(Q.top=G),G>Q.bottom&&(Q.bottom=G),Q}},744:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.DocHandler=void 0;var c={},f=function(){function g(y){this.jsPDFDocument=y,this.userStyles={textColor:y.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:y.internal.getFontSize(),fontStyle:y.internal.getFont().fontStyle,font:y.internal.getFont().fontName,lineWidth:y.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:y.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return g.setDefaults=function(y,w){w===void 0&&(w=null),w?w.__autoTableDocumentDefaults=y:c=y},g.unifyColor=function(y){return Array.isArray(y)?y:typeof y=="number"?[y,y,y]:typeof y=="string"?[y]:null},g.prototype.applyStyles=function(y,w){var N,R,F;w===void 0&&(w=!1),y.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(y.fontStyle);var T=this.jsPDFDocument.internal.getFont(),I=T.fontStyle,P=T.fontName;if(y.font&&(P=y.font),y.fontStyle){I=y.fontStyle;var G=this.getFontList()[P];G&&G.indexOf(I)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(G[0]),I=G[0])}if(this.jsPDFDocument.setFont(P,I),y.fontSize&&this.jsPDFDocument.setFontSize(y.fontSize),!w){var J=g.unifyColor(y.fillColor);J&&(N=this.jsPDFDocument).setFillColor.apply(N,J),J=g.unifyColor(y.textColor),J&&(R=this.jsPDFDocument).setTextColor.apply(R,J),J=g.unifyColor(y.lineColor),J&&(F=this.jsPDFDocument).setDrawColor.apply(F,J),typeof y.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(y.lineWidth)}},g.prototype.splitTextToSize=function(y,w,N){return this.jsPDFDocument.splitTextToSize(y,w,N)},g.prototype.rect=function(y,w,N,R,F){return this.jsPDFDocument.rect(y,w,N,R,F)},g.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},g.prototype.getTextWidth=function(y){return this.jsPDFDocument.getTextWidth(y)},g.prototype.getDocument=function(){return this.jsPDFDocument},g.prototype.setPage=function(y){this.jsPDFDocument.setPage(y)},g.prototype.addPage=function(){return this.jsPDFDocument.addPage()},g.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},g.prototype.getGlobalOptions=function(){return c||{}},g.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},g.prototype.pageSize=function(){var y=this.jsPDFDocument.internal.pageSize;return y.width==null&&(y={width:y.getWidth(),height:y.getHeight()}),y},g.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},g.prototype.getLineHeightFactor=function(){var y=this.jsPDFDocument;return y.getLineHeightFactor?y.getLineHeightFactor():1.15},g.prototype.getLineHeight=function(y){return y/this.scaleFactor()*this.getLineHeightFactor()},g.prototype.pageNumber=function(){var y=this.jsPDFDocument.internal.getCurrentPageInfo();return y?y.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},g}();u.DocHandler=f},4:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.parseHtml=void 0;var f=c(903),g=c(796);function y(R,F,T,I,P){var G,J;I===void 0&&(I=!1),P===void 0&&(P=!1);var Q;typeof F=="string"?Q=T.document.querySelector(F):Q=F;var D=Object.keys(R.getFontList()),C=R.scaleFactor(),O=[],H=[],k=[];if(!Q)return console.error("Html table could not be found with input: ",F),{head:O,body:H,foot:k};for(var b=0;b<Q.rows.length;b++){var V=Q.rows[b],ie=(J=(G=V==null?void 0:V.parentElement)===null||G===void 0?void 0:G.tagName)===null||J===void 0?void 0:J.toLowerCase(),_e=w(D,C,T,V,I,P);_e&&(ie==="thead"?O.push(_e):ie==="tfoot"?k.push(_e):H.push(_e))}return{head:O,body:H,foot:k}}u.parseHtml=y;function w(R,F,T,I,P,G){for(var J=new g.HtmlRowInput(I),Q=0;Q<I.cells.length;Q++){var D=I.cells[Q],C=T.getComputedStyle(D);if(P||C.display!=="none"){var O=void 0;G&&(O=(0,f.parseCss)(R,D,F,C,T)),J.push({rowSpan:D.rowSpan,colSpan:D.colSpan,styles:O,_element:D,content:N(D)})}}var H=T.getComputedStyle(I);if(J.length>0&&(P||H.display!=="none"))return J}function N(R){var F=R.cloneNode(!0);return F.innerHTML=F.innerHTML.replace(/\n/g,"").replace(/ +/g," "),F.innerHTML=F.innerHTML.split(/<br.*?>/).map(function(T){return T.trim()}).join(`
`),F.innerText||F.textContent||""}},776:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.parseInput=void 0;var f=c(4),g=c(356),y=c(420),w=c(744),N=c(792);function R(Q,D){var C=new w.DocHandler(Q),O=C.getDocumentOptions(),H=C.getGlobalOptions();(0,N.default)(C,H,O,D);var k=(0,g.assign)({},H,O,D),b;typeof window<"u"&&(b=window);var V=F(H,O,D),ie=T(H,O,D),_e=I(C,k),le=G(C,k,b);return{id:D.tableId,content:le,hooks:ie,styles:V,settings:_e}}u.parseInput=R;function F(Q,D,C){for(var O={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},H=function(ie){if(ie==="columnStyles"){var _e=Q[ie],le=D[ie],se=C[ie];O.columnStyles=(0,g.assign)({},_e,le,se)}else{var W=[Q,D,C],oe=W.map(function(fe){return fe[ie]||{}});O[ie]=(0,g.assign)({},oe[0],oe[1],oe[2])}},k=0,b=Object.keys(O);k<b.length;k++){var V=b[k];H(V)}return O}function T(Q,D,C){for(var O=[Q,D,C],H={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},k=0,b=O;k<b.length;k++){var V=b[k];V.didParseCell&&H.didParseCell.push(V.didParseCell),V.willDrawCell&&H.willDrawCell.push(V.willDrawCell),V.didDrawCell&&H.didDrawCell.push(V.didDrawCell),V.willDrawPage&&H.willDrawPage.push(V.willDrawPage),V.didDrawPage&&H.didDrawPage.push(V.didDrawPage)}return H}function I(Q,D){var C,O,H,k,b,V,ie,_e,le,se,W,oe,fe=(0,y.parseSpacing)(D.margin,40/Q.scaleFactor()),xe=(C=P(Q,D.startY))!==null&&C!==void 0?C:fe.top,j;D.showFoot===!0?j="everyPage":D.showFoot===!1?j="never":j=(O=D.showFoot)!==null&&O!==void 0?O:"everyPage";var ee;D.showHead===!0?ee="everyPage":D.showHead===!1?ee="never":ee=(H=D.showHead)!==null&&H!==void 0?H:"everyPage";var ae=(k=D.useCss)!==null&&k!==void 0?k:!1,ue=D.theme||(ae?"plain":"striped"),he=!!D.horizontalPageBreak,Te=(b=D.horizontalPageBreakRepeat)!==null&&b!==void 0?b:null;return{includeHiddenHtml:(V=D.includeHiddenHtml)!==null&&V!==void 0?V:!1,useCss:ae,theme:ue,startY:xe,margin:fe,pageBreak:(ie=D.pageBreak)!==null&&ie!==void 0?ie:"auto",rowPageBreak:(_e=D.rowPageBreak)!==null&&_e!==void 0?_e:"auto",tableWidth:(le=D.tableWidth)!==null&&le!==void 0?le:"auto",showHead:ee,showFoot:j,tableLineWidth:(se=D.tableLineWidth)!==null&&se!==void 0?se:0,tableLineColor:(W=D.tableLineColor)!==null&&W!==void 0?W:200,horizontalPageBreak:he,horizontalPageBreakRepeat:Te,horizontalPageBreakBehaviour:(oe=D.horizontalPageBreakBehaviour)!==null&&oe!==void 0?oe:"afterAllRows"}}function P(Q,D){var C=Q.getLastAutoTable(),O=Q.scaleFactor(),H=Q.pageNumber(),k=!1;if(C&&C.startPageNumber){var b=C.startPageNumber+C.pageNumber-1;k=b===H}return typeof D=="number"?D:(D==null||D===!1)&&k&&(C==null?void 0:C.finalY)!=null?C.finalY+20/O:null}function G(Q,D,C){var O=D.head||[],H=D.body||[],k=D.foot||[];if(D.html){var b=D.includeHiddenHtml;if(C){var V=(0,f.parseHtml)(Q,D.html,C,b,D.useCss)||{};O=V.head||O,H=V.body||O,k=V.foot||O}else console.error("Cannot parse html in non browser environment")}var ie=D.columns||J(O,H,k);return{columns:ie,head:O,body:H,foot:k}}function J(Q,D,C){var O=Q[0]||D[0]||C[0]||[],H=[];return Object.keys(O).filter(function(k){return k!=="_element"}).forEach(function(k){var b=1,V;Array.isArray(O)?V=O[parseInt(k)]:V=O[k],typeof V=="object"&&!Array.isArray(V)&&(b=(V==null?void 0:V.colSpan)||1);for(var ie=0;ie<b;ie++){var _e=void 0;Array.isArray(O)?_e=H.length:_e=k+(ie>0?"_".concat(ie):"");var le={dataKey:_e};H.push(le)}}),H}},792:function(l,u){Object.defineProperty(u,"__esModule",{value:!0});function c(g,y,w,N){for(var R=function(P){P&&typeof P!="object"&&console.error("The options parameter should be of type object, is: "+typeof P),typeof P.extendWidth<"u"&&(P.tableWidth=P.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof P.margins<"u"&&(typeof P.margin>"u"&&(P.margin=P.margins),console.error("Use of deprecated option: margins, use margin instead.")),P.startY&&typeof P.startY!="number"&&(console.error("Invalid value for startY option",P.startY),delete P.startY),!P.didDrawPage&&(P.afterPageContent||P.beforePageContent||P.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),P.didDrawPage=function(k){g.applyStyles(g.userStyles),P.beforePageContent&&P.beforePageContent(k),g.applyStyles(g.userStyles),P.afterPageContent&&P.afterPageContent(k),g.applyStyles(g.userStyles),P.afterPageAdd&&k.pageNumber>1&&k.afterPageAdd(k),g.applyStyles(g.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(k){P[k]&&console.error('The "'.concat(k,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(k){var b=k[0],V=k[1];P[V]&&(console.error("Use of deprecated option ".concat(V,". Use ").concat(b," instead")),P[b]=P[V])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(k){var b=typeof k=="string"?k:k[0],V=typeof k=="string"?k:k[1];typeof P[b]<"u"&&(typeof P.styles[V]>"u"&&(P.styles[V]=P[b]),console.error("Use of deprecated option: "+b+", use the style "+V+" instead."))});for(var G=0,J=["styles","bodyStyles","headStyles","footStyles"];G<J.length;G++){var Q=J[G];f(P[Q]||{})}for(var D=P.columnStyles||{},C=0,O=Object.keys(D);C<O.length;C++){var H=O[C];f(D[H]||{})}},F=0,T=[y,w,N];F<T.length;F++){var I=T[F];R(I)}}u.default=c;function f(g){g.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),g.minCellHeight||(g.minCellHeight=g.rowHeight)):g.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),g.cellWidth||(g.cellWidth=g.columnWidth))}},260:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.Column=u.Cell=u.Row=u.Table=void 0;var f=c(796),g=c(172),y=c(420),w=function(){function T(I,P){this.pageNumber=1,this.pageCount=1,this.id=I.id,this.settings=I.settings,this.styles=I.styles,this.hooks=I.hooks,this.columns=P.columns,this.head=P.head,this.body=P.body,this.foot=P.foot}return T.prototype.getHeadHeight=function(I){return this.head.reduce(function(P,G){return P+G.getMaxCellHeight(I)},0)},T.prototype.getFootHeight=function(I){return this.foot.reduce(function(P,G){return P+G.getMaxCellHeight(I)},0)},T.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},T.prototype.callCellHooks=function(I,P,G,J,Q,D){for(var C=0,O=P;C<O.length;C++){var H=O[C],k=new g.CellHookData(I,this,G,J,Q,D),b=H(k)===!1;if(G.text=Array.isArray(G.text)?G.text:[G.text],b)return!1}return!0},T.prototype.callEndPageHooks=function(I,P){I.applyStyles(I.userStyles);for(var G=0,J=this.hooks.didDrawPage;G<J.length;G++){var Q=J[G];Q(new g.HookData(I,this,P))}},T.prototype.callWillDrawPageHooks=function(I,P){for(var G=0,J=this.hooks.willDrawPage;G<J.length;G++){var Q=J[G];Q(new g.HookData(I,this,P))}},T.prototype.getWidth=function(I){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var P=this.columns.reduce(function(J,Q){return J+Q.wrappedWidth},0);return P}else{var G=this.settings.margin;return I-G.left-G.right}},T}();u.Table=w;var N=function(){function T(I,P,G,J,Q){Q===void 0&&(Q=!1),this.height=0,this.raw=I,I instanceof f.HtmlRowInput&&(this.raw=I._element,this.element=I._element),this.index=P,this.section=G,this.cells=J,this.spansMultiplePages=Q}return T.prototype.getMaxCellHeight=function(I){var P=this;return I.reduce(function(G,J){var Q;return Math.max(G,((Q=P.cells[J.index])===null||Q===void 0?void 0:Q.height)||0)},0)},T.prototype.hasRowSpan=function(I){var P=this;return I.filter(function(G){var J=P.cells[G.index];return J?J.rowSpan>1:!1}).length>0},T.prototype.canEntireRowFit=function(I,P){return this.getMaxCellHeight(P)<=I},T.prototype.getMinimumRowHeight=function(I,P){var G=this;return I.reduce(function(J,Q){var D=G.cells[Q.index];if(!D)return 0;var C=P.getLineHeight(D.styles.fontSize),O=D.padding("vertical"),H=O+C;return H>J?H:J},0)},T}();u.Row=N;var R=function(){function T(I,P,G){var J,Q;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=P,this.section=G,this.raw=I;var D=I;I!=null&&typeof I=="object"&&!Array.isArray(I)?(this.rowSpan=I.rowSpan||1,this.colSpan=I.colSpan||1,D=(Q=(J=I.content)!==null&&J!==void 0?J:I.title)!==null&&Q!==void 0?Q:I,I._element&&(this.raw=I._element)):(this.rowSpan=1,this.colSpan=1);var C=D!=null?""+D:"",O=/\r\n|\r|\n/g;this.text=C.split(O)}return T.prototype.getTextPos=function(){var I;if(this.styles.valign==="top")I=this.y+this.padding("top");else if(this.styles.valign==="bottom")I=this.y+this.height-this.padding("bottom");else{var P=this.height-this.padding("vertical");I=this.y+P/2+this.padding("top")}var G;if(this.styles.halign==="right")G=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var J=this.width-this.padding("horizontal");G=this.x+J/2+this.padding("left")}else G=this.x+this.padding("left");return{x:G,y:I}},T.prototype.getContentHeight=function(I,P){P===void 0&&(P=1.15);var G=Array.isArray(this.text)?this.text.length:1,J=this.styles.fontSize/I*P,Q=G*J+this.padding("vertical");return Math.max(Q,this.styles.minCellHeight)},T.prototype.padding=function(I){var P=(0,y.parseSpacing)(this.styles.cellPadding,0);return I==="vertical"?P.top+P.bottom:I==="horizontal"?P.left+P.right:P[I]},T}();u.Cell=R;var F=function(){function T(I,P,G){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=I,this.raw=P,this.index=G}return T.prototype.getMaxCustomCellWidth=function(I){for(var P=0,G=0,J=I.allRows();G<J.length;G++){var Q=J[G],D=Q.cells[this.index];D&&typeof D.styles.cellWidth=="number"&&(P=Math.max(P,D.styles.cellWidth))}return P},T}();u.Column=F},356:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.assign=void 0;function c(f,g,y,w,N){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var R=Object(f),F=1;F<arguments.length;F++){var T=arguments[F];if(T!=null)for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(R[I]=T[I])}return R}u.assign=c},972:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.createTable=void 0;var f=c(744),g=c(260),y=c(324),w=c(796),N=c(356);function R(Q,D){var C=new f.DocHandler(Q),O=F(D,C.scaleFactor()),H=new g.Table(D,O);return(0,y.calculateWidths)(C,H),C.applyStyles(C.userStyles),H}u.createTable=R;function F(Q,D){var C=Q.content,O=G(C.columns);if(C.head.length===0){var H=I(O,"head");H&&C.head.push(H)}if(C.foot.length===0){var H=I(O,"foot");H&&C.foot.push(H)}var k=Q.settings.theme,b=Q.styles;return{columns:O,head:T("head",C.head,O,b,k,D),body:T("body",C.body,O,b,k,D),foot:T("foot",C.foot,O,b,k,D)}}function T(Q,D,C,O,H,k){var b={},V=D.map(function(ie,_e){for(var le=0,se={},W=0,oe=0,fe=0,xe=C;fe<xe.length;fe++){var j=xe[fe];if(b[j.index]==null||b[j.index].left===0)if(oe===0){var ee=void 0;Array.isArray(ie)?ee=ie[j.index-W-le]:ee=ie[j.dataKey];var ae={};typeof ee=="object"&&!Array.isArray(ee)&&(ae=(ee==null?void 0:ee.styles)||{});var ue=J(Q,j,_e,H,O,k,ae),he=new g.Cell(ee,ue,Q);se[j.dataKey]=he,se[j.index]=he,oe=he.colSpan-1,b[j.index]={left:he.rowSpan-1,times:oe}}else oe--,W++;else b[j.index].left--,oe=b[j.index].times,le++}return new g.Row(ie,_e,Q,se)});return V}function I(Q,D){var C={};return Q.forEach(function(O){if(O.raw!=null){var H=P(D,O.raw);H!=null&&(C[O.dataKey]=H)}}),Object.keys(C).length>0?C:null}function P(Q,D){if(Q==="head"){if(typeof D=="object")return D.header||D.title||null;if(typeof D=="string"||typeof D=="number")return D}else if(Q==="foot"&&typeof D=="object")return D.footer;return null}function G(Q){return Q.map(function(D,C){var O,H,k;return typeof D=="object"?k=(H=(O=D.dataKey)!==null&&O!==void 0?O:D.key)!==null&&H!==void 0?H:C:k=C,new g.Column(k,D,C)})}function J(Q,D,C,O,H,k,b){var V=(0,w.getTheme)(O),ie;Q==="head"?ie=H.headStyles:Q==="body"?ie=H.bodyStyles:Q==="foot"&&(ie=H.footStyles);var _e=(0,N.assign)({},V.table,V[Q],H.styles,ie),le=H.columnStyles[D.dataKey]||H.columnStyles[D.index]||{},se=Q==="body"?le:{},W=Q==="body"&&C%2===0?(0,N.assign)({},V.alternateRow,H.alternateRowStyles):{},oe=(0,w.defaultStyles)(k),fe=(0,N.assign)({},oe,_e,W,se);return(0,N.assign)(fe,b)}},664:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.addPage=u.drawTable=void 0;var f=c(420),g=c(260),y=c(744),w=c(356),N=c(136),R=c(224);function F(le,se){var W=se.settings,oe=W.startY,fe=W.margin,xe={x:fe.left,y:oe},j=se.getHeadHeight(se.columns)+se.getFootHeight(se.columns),ee=oe+fe.bottom+j;if(W.pageBreak==="avoid"){var ae=se.body,ue=ae.reduce(function(be,ke){return be+ke.height},0);ee+=ue}var he=new y.DocHandler(le);(W.pageBreak==="always"||W.startY!=null&&ee>he.pageSize().height)&&(_e(he),xe.y=fe.top),se.callWillDrawPageHooks(he,xe);var Te=(0,w.assign)({},xe);se.startPageNumber=he.pageNumber(),W.horizontalPageBreak?T(he,se,Te,xe):(he.applyStyles(he.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&se.head.forEach(function(be){return H(he,se,be,xe,se.columns)}),he.applyStyles(he.userStyles),se.body.forEach(function(be,ke){var Ge=ke===se.body.length-1;O(he,se,be,Ge,Te,xe,se.columns)}),he.applyStyles(he.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&se.foot.forEach(function(be){return H(he,se,be,xe,se.columns)})),(0,f.addTableBorder)(he,se,Te,xe),se.callEndPageHooks(he,xe),se.finalY=xe.y,le.lastAutoTable=se,le.previousAutoTable=se,le.autoTable&&(le.autoTable.previous=se),he.applyStyles(he.userStyles)}u.drawTable=F;function T(le,se,W,oe){var fe=(0,R.calculateAllColumnsCanFitInPage)(le,se),xe=se.settings;if(xe.horizontalPageBreakBehaviour==="afterAllRows")fe.forEach(function(ue,he){le.applyStyles(le.userStyles),he>0?ie(le,se,W,oe,ue.columns,!0):I(le,se,oe,ue.columns),P(le,se,W,oe,ue.columns),J(le,se,oe,ue.columns)});else for(var j=-1,ee=fe[0],ae=function(){var ue=j;if(ee){le.applyStyles(le.userStyles);var he=ee.columns;j>=0?ie(le,se,W,oe,he,!0):I(le,se,oe,he),ue=G(le,se,j+1,oe,he),J(le,se,oe,he)}var Te=ue-j;fe.slice(1).forEach(function(be){le.applyStyles(le.userStyles),ie(le,se,W,oe,be.columns,!0),G(le,se,j+1,oe,be.columns,Te),J(le,se,oe,be.columns)}),j=ue};j<se.body.length-1;)ae()}function I(le,se,W,oe){var fe=se.settings;le.applyStyles(le.userStyles),(fe.showHead==="firstPage"||fe.showHead==="everyPage")&&se.head.forEach(function(xe){return H(le,se,xe,W,oe)})}function P(le,se,W,oe,fe){le.applyStyles(le.userStyles),se.body.forEach(function(xe,j){var ee=j===se.body.length-1;O(le,se,xe,ee,W,oe,fe)})}function G(le,se,W,oe,fe,xe){le.applyStyles(le.userStyles),xe=xe??se.body.length;var j=Math.min(W+xe,se.body.length),ee=-1;return se.body.slice(W,j).forEach(function(ae,ue){var he=W+ue===se.body.length-1,Te=V(le,se,he,oe);ae.canEntireRowFit(Te,fe)&&(H(le,se,ae,oe,fe),ee=W+ue)}),ee}function J(le,se,W,oe){var fe=se.settings;le.applyStyles(le.userStyles),(fe.showFoot==="lastPage"||fe.showFoot==="everyPage")&&se.foot.forEach(function(xe){return H(le,se,xe,W,oe)})}function Q(le,se,W){var oe=W.getLineHeight(le.styles.fontSize),fe=le.padding("vertical"),xe=Math.floor((se-fe)/oe);return Math.max(0,xe)}function D(le,se,W,oe){var fe={};le.spansMultiplePages=!0,le.height=0;for(var xe=0,j=0,ee=W.columns;j<ee.length;j++){var ae=ee[j],ue=le.cells[ae.index];if(ue){Array.isArray(ue.text)||(ue.text=[ue.text]);var he=new g.Cell(ue.raw,ue.styles,ue.section);he=(0,w.assign)(he,ue),he.text=[];var Te=Q(ue,se,oe);ue.text.length>Te&&(he.text=ue.text.splice(Te,ue.text.length));var be=oe.scaleFactor(),ke=oe.getLineHeightFactor();ue.contentHeight=ue.getContentHeight(be,ke),ue.contentHeight>=se&&(ue.contentHeight=se,he.styles.minCellHeight-=se),ue.contentHeight>le.height&&(le.height=ue.contentHeight),he.contentHeight=he.getContentHeight(be,ke),he.contentHeight>xe&&(xe=he.contentHeight),fe[ae.index]=he}}var Ge=new g.Row(le.raw,-1,le.section,fe,!0);Ge.height=xe;for(var qe=0,Je=W.columns;qe<Je.length;qe++){var ae=Je[qe],he=Ge.cells[ae.index];he&&(he.height=Ge.height);var ue=le.cells[ae.index];ue&&(ue.height=le.height)}return Ge}function C(le,se,W,oe){var fe=le.pageSize().height,xe=oe.settings.margin,j=xe.top+xe.bottom,ee=fe-j;se.section==="body"&&(ee-=oe.getHeadHeight(oe.columns)+oe.getFootHeight(oe.columns));var ae=se.getMinimumRowHeight(oe.columns,le),ue=ae<W;if(ae>ee)return console.error("Will not be able to print row ".concat(se.index," correctly since it's minimum height is larger than page height")),!0;if(!ue)return!1;var he=se.hasRowSpan(oe.columns),Te=se.getMaxCellHeight(oe.columns)>ee;return Te?(he&&console.error("The content of row ".concat(se.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(he||oe.settings.rowPageBreak==="avoid")}function O(le,se,W,oe,fe,xe,j){var ee=V(le,se,oe,xe);if(W.canEntireRowFit(ee,j))H(le,se,W,xe,j);else if(C(le,W,ee,se)){var ae=D(W,ee,se,le);H(le,se,W,xe,j),ie(le,se,fe,xe,j),O(le,se,ae,oe,fe,xe,j)}else ie(le,se,fe,xe,j),O(le,se,W,oe,fe,xe,j)}function H(le,se,W,oe,fe){oe.x=se.settings.margin.left;for(var xe=0,j=fe;xe<j.length;xe++){var ee=j[xe],ae=W.cells[ee.index];if(!ae){oe.x+=ee.width;continue}le.applyStyles(ae.styles),ae.x=oe.x,ae.y=oe.y;var ue=se.callCellHooks(le,se.hooks.willDrawCell,ae,W,ee,oe);if(ue===!1){oe.x+=ee.width;continue}k(le,ae,oe);var he=ae.getTextPos();(0,N.default)(ae.text,he.x,he.y,{halign:ae.styles.halign,valign:ae.styles.valign,maxWidth:Math.ceil(ae.width-ae.padding("left")-ae.padding("right"))},le.getDocument()),se.callCellHooks(le,se.hooks.didDrawCell,ae,W,ee,oe),oe.x+=ee.width}oe.y+=W.height}function k(le,se,W){var oe=se.styles;if(le.getDocument().setFillColor(le.getDocument().getFillColor()),typeof oe.lineWidth=="number"){var fe=(0,f.getFillStyle)(oe.lineWidth,oe.fillColor);fe&&le.rect(se.x,W.y,se.width,se.height,fe)}else typeof oe.lineWidth=="object"&&(oe.fillColor&&le.rect(se.x,W.y,se.width,se.height,"F"),b(le,se,W,oe.lineWidth))}function b(le,se,W,oe){var fe,xe,j,ee;oe.top&&(fe=W.x,xe=W.y,j=W.x+se.width,ee=W.y,oe.right&&(j+=.5*oe.right),oe.left&&(fe-=.5*oe.left),ae(oe.top,fe,xe,j,ee)),oe.bottom&&(fe=W.x,xe=W.y+se.height,j=W.x+se.width,ee=W.y+se.height,oe.right&&(j+=.5*oe.right),oe.left&&(fe-=.5*oe.left),ae(oe.bottom,fe,xe,j,ee)),oe.left&&(fe=W.x,xe=W.y,j=W.x,ee=W.y+se.height,oe.top&&(xe-=.5*oe.top),oe.bottom&&(ee+=.5*oe.bottom),ae(oe.left,fe,xe,j,ee)),oe.right&&(fe=W.x+se.width,xe=W.y,j=W.x+se.width,ee=W.y+se.height,oe.top&&(xe-=.5*oe.top),oe.bottom&&(ee+=.5*oe.bottom),ae(oe.right,fe,xe,j,ee));function ae(ue,he,Te,be,ke){le.getDocument().setLineWidth(ue),le.getDocument().line(he,Te,be,ke,"S")}}function V(le,se,W,oe){var fe=se.settings.margin.bottom,xe=se.settings.showFoot;return(xe==="everyPage"||xe==="lastPage"&&W)&&(fe+=se.getFootHeight(se.columns)),le.pageSize().height-oe.y-fe}function ie(le,se,W,oe,fe,xe){fe===void 0&&(fe=[]),xe===void 0&&(xe=!1),le.applyStyles(le.userStyles),se.settings.showFoot==="everyPage"&&!xe&&se.foot.forEach(function(ee){return H(le,se,ee,oe,fe)}),se.callEndPageHooks(le,oe);var j=se.settings.margin;(0,f.addTableBorder)(le,se,W,oe),_e(le),se.pageNumber++,se.pageCount++,oe.x=j.left,oe.y=j.top,W.y=j.top,se.callWillDrawPageHooks(le,oe),se.settings.showHead==="everyPage"&&(se.head.forEach(function(ee){return H(le,se,ee,oe,fe)}),le.applyStyles(le.userStyles))}u.addPage=ie;function _e(le){var se=le.pageNumber();le.setPage(se+1);var W=le.pageNumber();return W===se?(le.addPage(),!0):!1}},224:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.calculateAllColumnsCanFitInPage=void 0;var f=c(420);function g(w,N,R){var F;R===void 0&&(R={});var T=(0,f.getPageAvailableWidth)(w,N),I=new Map,P=[],G=[],J=[];N.settings.horizontalPageBreakRepeat,Array.isArray(N.settings.horizontalPageBreakRepeat)?J=N.settings.horizontalPageBreakRepeat:(typeof N.settings.horizontalPageBreakRepeat=="string"||typeof N.settings.horizontalPageBreakRepeat=="number")&&(J=[N.settings.horizontalPageBreakRepeat]),J.forEach(function(O){var H=N.columns.find(function(k){return k.dataKey===O||k.index===O});H&&!I.has(H.index)&&(I.set(H.index,!0),P.push(H.index),G.push(N.columns[H.index]),T-=H.wrappedWidth)});for(var Q=!0,D=(F=R==null?void 0:R.start)!==null&&F!==void 0?F:0;D<N.columns.length;){if(I.has(D)){D++;continue}var C=N.columns[D].wrappedWidth;if(Q||T>=C)Q=!1,P.push(D),G.push(N.columns[D]),T-=C;else break;D++}return{colIndexes:P,columns:G,lastIndex:D-1}}function y(w,N){for(var R=[],F=0;F<N.columns.length;F++){var T=g(w,N,{start:F});T.columns.length&&(R.push(T),F=T.lastIndex)}return R}u.calculateAllColumnsCanFitInPage=y},324:function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.ellipsize=u.resizeColumns=u.calculateWidths=void 0;var f=c(420);function g(P,G){y(P,G);var J=[],Q=0;G.columns.forEach(function(C){var O=C.getMaxCustomCellWidth(G);O?C.width=O:(C.width=C.wrappedWidth,J.push(C)),Q+=C.width});var D=G.getWidth(P.pageSize().width)-Q;D&&(D=w(J,D,function(C){return Math.max(C.minReadableWidth,C.minWidth)})),D&&(D=w(J,D,function(C){return C.minWidth})),D=Math.abs(D),!G.settings.horizontalPageBreak&&D>.1/P.scaleFactor()&&(D=D<1?D:Math.round(D),console.warn("Of the table content, ".concat(D," units width could not fit page"))),R(G),F(G,P),N(G)}u.calculateWidths=g;function y(P,G){var J=P.scaleFactor(),Q=G.settings.horizontalPageBreak,D=(0,f.getPageAvailableWidth)(P,G);G.allRows().forEach(function(C){for(var O=0,H=G.columns;O<H.length;O++){var k=H[O],b=C.cells[k.index];if(b){var V=G.hooks.didParseCell;G.callCellHooks(P,V,b,C,k,null);var ie=b.padding("horizontal");b.contentWidth=(0,f.getStringWidth)(b.text,b.styles,P)+ie;var _e=(0,f.getStringWidth)(b.text.join(" ").split(/[^\S\u00A0]+/),b.styles,P);if(b.minReadableWidth=_e+b.padding("horizontal"),typeof b.styles.cellWidth=="number")b.minWidth=b.styles.cellWidth,b.wrappedWidth=b.styles.cellWidth;else if(b.styles.cellWidth==="wrap"||Q===!0)b.contentWidth>D?(b.minWidth=D,b.wrappedWidth=D):(b.minWidth=b.contentWidth,b.wrappedWidth=b.contentWidth);else{var le=10/J;b.minWidth=b.styles.minCellWidth||le,b.wrappedWidth=b.contentWidth,b.minWidth>b.wrappedWidth&&(b.wrappedWidth=b.minWidth)}}}}),G.allRows().forEach(function(C){for(var O=0,H=G.columns;O<H.length;O++){var k=H[O],b=C.cells[k.index];if(b&&b.colSpan===1)k.wrappedWidth=Math.max(k.wrappedWidth,b.wrappedWidth),k.minWidth=Math.max(k.minWidth,b.minWidth),k.minReadableWidth=Math.max(k.minReadableWidth,b.minReadableWidth);else{var V=G.styles.columnStyles[k.dataKey]||G.styles.columnStyles[k.index]||{},ie=V.cellWidth||V.minCellWidth;ie&&typeof ie=="number"&&(k.minWidth=ie,k.wrappedWidth=ie)}b&&(b.colSpan>1&&!k.minWidth&&(k.minWidth=b.minWidth),b.colSpan>1&&!k.wrappedWidth&&(k.wrappedWidth=b.minWidth))}})}function w(P,G,J){for(var Q=G,D=P.reduce(function(le,se){return le+se.wrappedWidth},0),C=0;C<P.length;C++){var O=P[C],H=O.wrappedWidth/D,k=Q*H,b=O.width+k,V=J(O),ie=b<V?V:b;G-=ie-O.width,O.width=ie}if(G=Math.round(G*1e10)/1e10,G){var _e=P.filter(function(le){return G<0?le.width>J(le):!0});_e.length&&(G=w(_e,G,J))}return G}u.resizeColumns=w;function N(P){for(var G={},J=1,Q=P.allRows(),D=0;D<Q.length;D++)for(var C=Q[D],O=0,H=P.columns;O<H.length;O++){var k=H[O],b=G[k.index];if(J>1)J--,delete C.cells[k.index];else if(b)b.cell.height+=C.height,J=b.cell.colSpan,delete C.cells[k.index],b.left--,b.left<=1&&delete G[k.index];else{var V=C.cells[k.index];if(!V)continue;if(V.height=C.height,V.rowSpan>1){var ie=Q.length-D,_e=V.rowSpan>ie?ie:V.rowSpan;G[k.index]={cell:V,left:_e,row:C}}}}}function R(P){for(var G=P.allRows(),J=0;J<G.length;J++)for(var Q=G[J],D=null,C=0,O=0,H=0;H<P.columns.length;H++){var k=P.columns[H];if(O-=1,O>1&&P.columns[H+1])C+=k.width,delete Q.cells[k.index];else if(D){var b=D;delete Q.cells[k.index],D=null,b.width=k.width+C}else{var b=Q.cells[k.index];if(!b)continue;if(O=b.colSpan,C=0,b.colSpan>1){D=b,C+=k.width;continue}b.width=k.width+C}}}function F(P,G){for(var J={count:0,height:0},Q=0,D=P.allRows();Q<D.length;Q++){for(var C=D[Q],O=0,H=P.columns;O<H.length;O++){var k=H[O],b=C.cells[k.index];if(b){G.applyStyles(b.styles,!0);var V=b.width-b.padding("horizontal");if(b.styles.overflow==="linebreak")b.text=G.splitTextToSize(b.text,V+1/G.scaleFactor(),{fontSize:b.styles.fontSize});else if(b.styles.overflow==="ellipsize")b.text=T(b.text,V,b.styles,G,"...");else if(b.styles.overflow==="hidden")b.text=T(b.text,V,b.styles,G,"");else if(typeof b.styles.overflow=="function"){var ie=b.styles.overflow(b.text,V);typeof ie=="string"?b.text=[ie]:b.text=ie}b.contentHeight=b.getContentHeight(G.scaleFactor(),G.getLineHeightFactor());var _e=b.contentHeight/b.rowSpan;b.rowSpan>1&&J.count*J.height<_e*b.rowSpan?J={height:_e,count:b.rowSpan}:J&&J.count>0&&J.height>_e&&(_e=J.height),_e>C.height&&(C.height=_e)}}J.count--}}function T(P,G,J,Q,D){return P.map(function(C){return I(C,G,J,Q,D)})}u.ellipsize=T;function I(P,G,J,Q,D){var C=1e4*Q.scaleFactor();if(G=Math.ceil(G*C)/C,G>=(0,f.getStringWidth)(P,J,Q))return P;for(;G<(0,f.getStringWidth)(P+D,J,Q)&&!(P.length<=1);)P=P.substring(0,P.length-1);return P.trim()+D}},964:function(l){if(typeof n>"u"){var u=new Error("Cannot find module 'undefined'");throw u.code="MODULE_NOT_FOUND",u}l.exports=n}},r={};function o(l){var u=r[l];if(u!==void 0)return u.exports;var c=r[l]={exports:{}};return i[l].call(c.exports,c,c.exports,o),c.exports}var s={};return function(){var l=s;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var u=o(340),c=o(776),f=o(664),g=o(972),y=o(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return y.Table}});var w=o(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return w.CellHookData}});var N=o(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return N.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return N.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return N.Row}});function R(G){(0,u.default)(G)}l.applyPlugin=R;function F(G,J){var Q=(0,c.parseInput)(G,J),D=(0,g.createTable)(G,Q);(0,f.drawTable)(G,D)}function T(G,J){var Q=(0,c.parseInput)(G,J);return(0,g.createTable)(G,Q)}l.__createTable=T;function I(G,J){(0,f.drawTable)(G,J)}l.__drawTable=I;try{var P=o(964);P.jsPDF&&(P=P.jsPDF),R(P)}catch{}l.default=F}(),s}()})})(zA);var vO=zA.exports;const vc=Tv(vO),yO=t=>{var c;const e=new wt;e.setFontSize(18),e.text(`${t.name} - Durak Raporu`,14,20),e.setFontSize(10),e.setTextColor(100),e.text(`Rapor Oluturma Tarihi: ${new Date().toLocaleDateString("tr-TR")} ${new Date().toLocaleTimeString("tr-TR")}`,14,26),e.setTextColor(0),e.setFontSize(14),e.text("Temel Bilgiler",14,38);const n=[["Durum",t.status],["Kapasite",`${t.capacity} Ara`],["le / Mahalle",`${t.district} / ${t.neighborhood}`],["Adres",t.address],["Telefon",t.phone||"-"],["Sorumluluk Alan",t.responsibility],["Yazhane Tipi",t.officeType]];vc(e,{startY:42,head:[["zellik","Deer"]],body:n,theme:"striped",headStyles:{fillColor:[41,128,185]},styles:{font:"helvetica",fontSize:10}});let i=e.lastAutoTable.finalY+15;e.setFontSize(14),e.text("Son UKOME Karar",14,i),vc(e,{startY:i+4,head:[["Karar No","Tarih","zet"]],body:[[t.ukomeDecisionNo||"-",t.ukomeDate?new Date(t.ukomeDate).toLocaleDateString("tr-TR"):"-",t.ukomeSummary||"zet bilgisi yok."]],theme:"grid",headStyles:{fillColor:[52,73,94]}}),i=e.lastAutoTable.finalY+15,e.setFontSize(14),e.text(`Kaytl Plakalar (${((c=t.plates)==null?void 0:c.length)||0} Adet)`,14,i);const r=[],o=(t.plates||[]).sort();let s=[];o.forEach((f,g)=>{if(s.push(f),s.length===5||g===o.length-1){for(;s.length<5;)s.push("");r.push([...s]),s=[]}}),r.length===0&&r.push(["Kaytl plaka bulunmamaktadr.","","","",""]),vc(e,{startY:i+4,body:r,theme:"plain",styles:{fontSize:10,cellPadding:2,fontStyle:"bold"},columnStyles:{0:{cellWidth:35},1:{cellWidth:35},2:{cellWidth:35},3:{cellWidth:35},4:{cellWidth:35}}}),i=e.lastAutoTable.finalY+15,e.setFontSize(14),e.text("Deiiklik ve lem Gemii",14,i);const l=(t.history||[]).sort((f,g)=>new Date(g.timestamp).getTime()-new Date(f.timestamp).getTime()).map(f=>[new Date(f.timestamp).toLocaleDateString("tr-TR"),f.relatedUkomeNo||"Manuel",f.fieldName,f.oldValue.length>20?f.oldValue.substring(0,20)+"...":f.oldValue,f.newValue.length>20?f.newValue.substring(0,20)+"...":f.newValue,f.changedBy]);vc(e,{startY:i+4,head:[["Tarih","Ref/Karar","Alan","Eski Deer","Yeni Deer","Kullanc"]],body:l,theme:"striped",styles:{fontSize:8},headStyles:{fillColor:[142,68,173]}});const u=e.getNumberOfPages();for(let f=1;f<=u;f++)e.setPage(f),e.setFontSize(8),e.text(`Sayfa ${f} / ${u}`,190,290,{align:"right"}),e.text("TaksiYnetim Sistemi tarafndan oluturulmutur.",14,290);e.save(`${t.name.replace(/\s+/g,"_")}_Detay_Raporu.pdf`)},_O=(t,e,n)=>{const i=new wt;i.setFontSize(20),i.setTextColor(41,128,185),i.text(`${t}`,14,22),i.setFontSize(14),i.setTextColor(0),i.text("alma ve Hareket Raporu",14,30),i.setFontSize(10),i.setTextColor(100),i.text(`Rapor Tarihi: ${new Date().toLocaleDateString("tr-TR")}`,14,36),i.setTextColor(0),i.setFontSize(14),i.text("Mevcut Durum",14,48);const r=[["u Anki Durak",n?n.name:"Kaytsz / Bota"],["Durum",n?"Aktif alyor":"Sistemde Pasif"],["Blge",n?`${n.district} / ${n.neighborhood}`:"-"],["Son lem",e.length>0?new Date(e[0].date).toLocaleDateString("tr-TR"):"-"]];vc(i,{startY:52,body:r,theme:"plain",styles:{fontSize:11,fontStyle:"bold",cellPadding:1.5},columnStyles:{0:{cellWidth:50,textColor:100}}});let o=i.lastAutoTable.finalY+15;i.setFontSize(14),i.text("Durak Hareketleri ve UKOME lemleri",14,o);const s=e.map(u=>[new Date(u.date).toLocaleDateString("tr-TR"),u.standName,u.action,u.details,u.user]);vc(i,{startY:o+5,head:[["Tarih","Durak","lem","Detay / Karar No","Kullanc"]],body:s,theme:"striped",headStyles:{fillColor:[39,174,96]},styles:{fontSize:9},alternateRowStyles:{fillColor:[240,255,240]}});const l=i.getNumberOfPages();for(let u=1;u<=l;u++)i.setPage(u),i.setFontSize(8),i.setTextColor(150),i.text(`Sayfa ${u} / ${l}`,190,290,{align:"right"});i.save(`${t.replace(/\s+/g,"")}_Gecmis_Raporu.pdf`)},wO=({stand:t,onBack:e,onRevise:n,onViewHistory:i})=>{var l;const r=kt.useMemo(()=>{const u=[...t.history||[]],c={};return u.forEach(f=>{const g=f.relatedUkomeNo?`UKOME_${f.relatedUkomeNo}`:`MANUAL_${f.timestamp}`;c[g]||(c[g]={id:g,timestamp:f.timestamp,ukomeNo:f.relatedUkomeNo,ukomeDate:f.relatedUkomeDate,user:f.changedBy,changes:[]}),c[g].changes.push(f)}),Object.values(c).sort((f,g)=>new Date(g.timestamp).getTime()-new Date(f.timestamp).getTime())},[t.history]),o=()=>{yO(t)},s=u=>{switch(u){case"ukomeDecisionNo":return"Karar No";case"ukomeDate":return"Karar Tarihi";case"ukomeSummary":return"Karar zeti";case"address":return"Adres";case"district":return"le";case"neighborhood":return"Mahalle";case"street":return"Sokak";case"capacity":return"Kapasite";case"plates":return"Plakalar";case"status":return"Durum";case"officeType":return"Yazhane";case"responsibility":return"Sorumluluk";case"name":return"Durak Ad";case"phone":return"Telefon";case"notes":return"Notlar";case"location":return"Konum";default:return u}};return B.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-300",children:[B.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[B.jsxs("div",{children:[B.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-2 text-sm font-medium",children:[B.jsx(bc,{size:16})," Listeye Dn"]}),B.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.name,B.jsx("span",{className:`text-sm px-3 py-1 rounded-full border ${t.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:t.status})]}),B.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-1 text-sm",children:[B.jsx(gm,{size:14})," ",t.district," / ",t.city]})]}),B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsxs("button",{onClick:o,className:"px-4 py-2.5 bg-white border border-slate-300 text-slate-700 font-medium rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors shadow-sm flex items-center gap-2",children:[B.jsx(EE,{size:18}),"Durak Raporu"]}),B.jsxs("button",{onClick:()=>n(t),className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm flex items-center gap-2",children:[B.jsx(Ha,{size:18}),"Revize Et (UKOME)"]})]})]}),B.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[B.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[B.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[B.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:B.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[B.jsx(Yy,{size:18,className:"text-blue-500"})," Temel Bilgiler"]})}),B.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8",children:[B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Durak Ad"}),B.jsx("div",{className:"text-slate-900 font-medium mt-1",children:t.name})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Telefon"}),B.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[B.jsx(AE,{size:14,className:"text-slate-400"}),t.phone||"-"]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Yazhane Tipi"}),B.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[B.jsx(Fk,{size:14,className:"text-slate-400"}),t.officeType]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Sorumluluk Alan"}),B.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[B.jsx(jk,{size:14,className:"text-slate-400"}),t.responsibility]})]}),B.jsxs("div",{className:"md:col-span-2",children:[B.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Ak Adres"}),B.jsx("div",{className:"text-slate-900 mt-1 bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm",children:t.address})]}),t.notes&&B.jsxs("div",{className:"md:col-span-2",children:[B.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Notlar"}),B.jsx("div",{className:"text-slate-700 mt-1 text-sm",children:t.notes})]})]})]}),B.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[B.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[B.jsx(K0,{size:18,className:"text-purple-500"})," Revize Gemii"]}),B.jsxs("button",{onClick:()=>i(),className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded-full hover:bg-purple-200 font-medium transition-colors flex items-center gap-1",children:[B.jsx($0,{size:12})," Zaman Makinesi / Detayl ncele"]})]}),B.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-md",children:[r.length," lem"]})]}),B.jsx("div",{className:"overflow-x-auto",children:r.length>0?B.jsxs("table",{className:"w-full text-left text-sm",children:[B.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-200",children:B.jsxs("tr",{children:[B.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600 w-32",children:"Tarih"}),B.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600 w-40",children:"lem Kayna"}),B.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Yaplan Deiiklikler"}),B.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600 w-24",children:"Kullanc"})]})}),B.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(u=>B.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[B.jsxs("td",{className:"px-6 py-4 align-top text-slate-500 font-mono text-xs",children:[B.jsx("div",{children:new Date(u.timestamp).toLocaleDateString("tr-TR")}),B.jsx("div",{className:"text-[10px] text-slate-400",children:new Date(u.timestamp).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]}),B.jsx("td",{className:"px-6 py-4 align-top",children:u.ukomeNo?B.jsxs("div",{className:"flex flex-col",children:[B.jsxs("span",{onClick:()=>i(u.ukomeNo),className:"font-bold text-xs text-blue-700 bg-blue-50 px-2 py-1 rounded w-fit cursor-pointer hover:bg-blue-100 border border-blue-100 mb-1",title:"Gemi durumunu simle et",children:["UKOME: ",u.ukomeNo]}),u.ukomeDate&&B.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[B.jsx(xO,{size:10})," ",new Date(u.ukomeDate).toLocaleDateString("tr-TR")]})]}):B.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200",children:[B.jsx(Ha,{size:10})," Manuel Kayt"]})}),B.jsx("td",{className:"px-6 py-4 align-top",children:B.jsx("div",{className:"flex flex-col gap-1.5",children:u.changes.map((c,f)=>B.jsxs("div",{className:"text-xs text-slate-700 flex items-start gap-2",children:[B.jsxs("span",{className:"font-semibold min-w-[80px] text-slate-900",children:[" ",s(c.fieldName),":"]}),B.jsxs("span",{className:"flex-1 text-slate-600 break-all",children:[B.jsx("span",{className:"text-red-400 line-through mr-1 opacity-70",children:c.oldValue}),B.jsx("span",{className:"text-slate-300",children:""}),B.jsx("span",{className:"text-green-600 font-medium ml-1",children:c.newValue})]})]},f))})}),B.jsx("td",{className:"px-6 py-4 align-top text-slate-500 text-xs",children:u.user})]},u.id))})]}):B.jsx("div",{className:"p-8 text-center text-slate-400",children:"Bu durak iin henz bir deiiklik kayd bulunmuyor."})})]})]}),B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[B.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-b border-yellow-100",children:B.jsxs("h3",{className:"font-semibold text-yellow-800 flex items-center gap-2",children:[B.jsx(Of,{size:18})," Ara Plakalar"]})}),B.jsxs("div",{className:"p-6",children:[B.jsxs("div",{className:"flex justify-between items-center mb-4 text-sm text-slate-500",children:[B.jsxs("span",{children:["Park Kapasitesi: ",B.jsx("strong",{className:"text-slate-900",children:t.capacity})]}),B.jsxs("span",{children:["Kaytl: ",B.jsx("strong",{className:"text-blue-600",children:((l=t.plates)==null?void 0:l.length)||0})]})]}),t.plates&&t.plates.length>0?B.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.plates.map((u,c)=>B.jsx("div",{className:"bg-slate-50 border border-slate-200 text-center py-2 rounded font-mono font-bold text-slate-800 text-sm",children:u},c))}):B.jsx("p",{className:"text-sm text-slate-400 italic text-center py-4",children:"Kaytl plaka yok."})]})]}),B.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-6",children:[B.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[B.jsx(Ha,{size:18})," Son UKOME Durumu"]}),B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Numaras"}),B.jsx("div",{className:"text-lg font-bold text-blue-900",children:t.ukomeDecisionNo||"-"})]}),B.jsxs("div",{children:[B.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Tarihi"}),B.jsx("div",{className:"text-sm font-medium text-blue-800",children:t.ukomeDate?new Date(t.ukomeDate).toLocaleDateString("tr-TR"):"-"})]}),B.jsxs("div",{children:[B.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar zeti"}),B.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.ukomeSummary||"zet bilgisi girilmemi."})]})]})]})]})]})]})},xO=({size:t})=>B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),B.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),B.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),B.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),SO=(t,e)=>{if(!e)return t;const n=JSON.parse(JSON.stringify(t)),i=[...t.history||[]].sort((l,u)=>new Date(u.timestamp).getTime()-new Date(l.timestamp).getTime()),r=i.filter(l=>l.relatedUkomeNo===e);if(r.length===0)return t;const o=new Date(r[0].timestamp).getTime();return i.filter(l=>new Date(l.timestamp).getTime()>o).forEach(l=>{const u=l.fieldName;u==="capacity"?n[u]=Number(l.oldValue):u==="plates"?n[u]=l.oldValue==="(Plaka Yok)"?[]:l.oldValue.split(", ").filter(Boolean):n[u]=l.oldValue}),n},TO=({stand:t,initialUkomeNo:e,onClose:n})=>{var c;const[i,r]=kt.useState(e||null),o=kt.useMemo(()=>{const f={};return t.history.forEach(g=>{const y=g.relatedUkomeNo||"Manuel Dzenleme";f[y]||(f[y]={no:y,date:g.relatedUkomeDate||"-",timestamp:g.timestamp,summary:"",logs:[],user:g.changedBy}),f[y].logs.push(g),new Date(g.timestamp)>new Date(f[y].timestamp)&&(f[y].timestamp=g.timestamp)}),Object.values(f).sort((g,y)=>new Date(y.timestamp).getTime()-new Date(g.timestamp).getTime())},[t.history]),s=kt.useMemo(()=>SO(t,i),[t,i]),l=o.find(f=>f.no===i),u=f=>{switch(f){case"ukomeDecisionNo":return"Karar No";case"ukomeDate":return"Karar Tarihi";case"address":return"Ak Adres";case"district":return"le";case"capacity":return"Kapasite";case"plates":return"Plakalar";case"status":return"Durum";case"name":return"Durak Ad";case"notes":return"Notlar";default:return f}};return B.jsxs("div",{className:"fixed inset-0 z-[2000] flex justify-end",children:[B.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:n}),B.jsxs("div",{className:"relative w-full max-w-4xl bg-white h-full shadow-2xl flex flex-col md:flex-row animate-in slide-in-from-right duration-300",children:[B.jsxs("div",{className:`w-full md:w-1/3 bg-slate-50 border-r border-slate-200 flex flex-col h-full ${i?"hidden md:flex":"flex"}`,children:[B.jsxs("div",{className:"p-5 border-b border-slate-200 bg-white",children:[B.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[B.jsx($0,{className:"text-blue-600",size:20}),"Karar Gemii"]}),B.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Grntlemek iin bir ilem sein."})]}),B.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[B.jsxs("div",{onClick:()=>r(null),className:`p-4 rounded-xl border cursor-pointer transition-all ${i===null?"bg-blue-600 text-white border-blue-600 shadow-md ring-2 ring-blue-100":"bg-white border-slate-200 hover:border-blue-300 text-slate-700"}`,children:[B.jsxs("div",{className:"flex justify-between items-start mb-1",children:[B.jsx("span",{className:"font-bold text-sm",children:"Mevcut Durum"}),B.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${i===null?"bg-blue-500 text-white":"bg-slate-100 text-slate-500"}`,children:"MD"})]}),B.jsx("div",{className:`text-xs ${i===null?"text-blue-100":"text-slate-500"}`,children:"Duran u anki gncel hali."})]}),o.map(f=>B.jsxs("div",{onClick:()=>r(f.no),className:`p-4 rounded-xl border cursor-pointer transition-all relative overflow-hidden group ${i===f.no?"bg-white border-blue-500 ring-2 ring-blue-100 shadow-md":"bg-white border-slate-200 hover:border-blue-300"}`,children:[B.jsx("div",{className:"flex justify-between items-start mb-2",children:B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx(Ha,{size:16,className:i===f.no?"text-blue-600":"text-slate-400"}),B.jsx("span",{className:"font-bold text-slate-800 text-sm",children:f.no==="Manuel Dzenleme"?"Dzenleme":f.no})]})}),B.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[B.jsx(TE,{size:12}),new Date(f.date!=="-"?f.date:f.timestamp).toLocaleDateString("tr-TR")]}),B.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[B.jsx(Kk,{size:12})," ",f.user," tarafndan"]}),B.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:[f.logs.length," Deiiklik"]})]},f.no))]})]}),B.jsxs("div",{className:`w-full md:w-2/3 bg-white flex flex-col h-full ${i?"flex":"hidden md:flex"}`,children:[B.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-full",children:B.jsx(bc,{size:20})}),B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:i?`${i} Karar Sonras`:"Gncel Durum"}),B.jsx("p",{className:"text-xs text-slate-500",children:i?"Duran bu karar uygulandktan sonraki grnm.":"Duran sistemdeki en son hali."})]})]}),B.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:B.jsx(CE,{size:24})})]}),B.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/30",children:[B.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-6",children:[B.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white px-6 py-3 border-b border-slate-200 flex justify-between items-center",children:[B.jsxs("div",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[B.jsx(Yy,{size:18,className:"text-blue-500"}),"Durak Bilgileri (",i?"Ariv":"Gncel",")"]}),i&&B.jsx("span",{className:"text-[10px] uppercase font-bold text-white bg-orange-400 px-2 py-1 rounded",children:"Gemi Kayt"})]}),B.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durak Ad"}),B.jsx("div",{className:"text-lg font-bold text-slate-800 mt-1",children:s.name})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durum"}),B.jsx("div",{className:"mt-1",children:B.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-bold rounded border ${s.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:s.status})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"le / Mahalle"}),B.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[s.district," / ",s.neighborhood]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Kapasite"}),B.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[s.capacity," Ara"]})]}),B.jsxs("div",{className:"md:col-span-2",children:[B.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1",children:[B.jsx(gm,{size:12})," Adres"]}),B.jsx("div",{className:"text-slate-600 mt-1 text-sm bg-slate-50 p-2 rounded border border-slate-100",children:s.address})]}),B.jsxs("div",{className:"md:col-span-2",children:[B.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1 mb-2",children:[B.jsx(Of,{size:12})," Kaytl Plakalar (",((c=s.plates)==null?void 0:c.length)||0,")"]}),B.jsx("div",{className:"flex flex-wrap gap-2",children:s.plates&&s.plates.length>0?s.plates.map((f,g)=>B.jsx("span",{className:"text-xs font-mono font-bold bg-yellow-50 text-slate-800 border border-yellow-200 px-2 py-1 rounded",children:f},g)):B.jsx("span",{className:"text-xs text-slate-400 italic",children:"Plaka kayd yok"})})]})]})]}),l&&B.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[B.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:B.jsx("h4",{className:"font-semibold text-slate-700 text-sm",children:"Bu Kararda Yaplan Deiiklikler"})}),B.jsxs("table",{className:"w-full text-left text-sm",children:[B.jsx("thead",{children:B.jsxs("tr",{className:"border-b border-slate-100 text-xs text-slate-500",children:[B.jsx("th",{className:"px-6 py-2 font-medium",children:"Alan"}),B.jsx("th",{className:"px-6 py-2 font-medium",children:"Eski Deer"}),B.jsx("th",{className:"px-6 py-2 font-medium",children:"Yeni Deer"})]})}),B.jsx("tbody",{className:"divide-y divide-slate-50",children:l.logs.map(f=>B.jsxs("tr",{children:[B.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:u(f.fieldName)}),B.jsx("td",{className:"px-6 py-3 text-red-500 text-xs line-through opacity-70",children:f.oldValue}),B.jsx("td",{className:"px-6 py-3 text-green-600 font-bold text-xs",children:f.newValue})]},f.id))})]})]}),i===null&&B.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 text-slate-400",children:[B.jsx($0,{size:48,className:"mb-4 text-slate-200"}),B.jsxs("p",{children:["Gemite duran nasl grndn incelemek iin",B.jsx("br",{}),"sol menden bir UKOME karar sein."]})]})]})]})]})]})},EO=({stands:t})=>{const e=kt.useRef(null),n=kt.useRef(null),i=38.4237,r=27.1428;return kt.useEffect(()=>{if(!e.current)return;if(!n.current){const u=da.map(e.current).setView([i,r],11);da.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(u),n.current=u}const o=n.current;o.eachLayer(u=>{u instanceof da.Marker&&o.removeLayer(u)});const s=t.filter(u=>u.location&&u.location.lat&&u.location.lng),l=da.latLngBounds([]);s.forEach(u=>{var g;if(!u.location)return;const c=da.divIcon({className:"custom-stand-icon",html:`<div style="
                    background-color: ${u.status==="Aktif"?"#facc15":"#ef4444"}; 
                    width: 36px; height: 36px; 
                    border-radius: 50%; 
                    border: 3px solid white; 
                    box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
                    display: flex; align-items: center; justify-content: center; 
                    color: ${u.status==="Aktif"?"#854d0e":"white"};
                    font-size: 10px; font-weight: bold;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>
                   </div>`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});da.marker([u.location.lat,u.location.lng],{icon:c}).bindPopup(`
                <div style="font-family: 'Inter', sans-serif;">
                    <h3 style="font-weight: bold; margin-bottom: 4px; font-size: 14px;">${u.name}</h3>
                    <p style="margin: 0; color: #64748b; font-size: 12px;">${u.district} / ${u.neighborhood}</p>
                    <div style="margin-top: 8px; display: flex; gap: 8px;">
                        <span style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${((g=u.plates)==null?void 0:g.length)||0} Ara</span>
                        <span style="background: ${u.status==="Aktif"?"#f0fdf4":"#fef2f2"}; color: ${u.status==="Aktif"?"#166534":"#991b1b"}; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${u.status}</span>
                    </div>
                </div>
            `).addTo(o),l.extend([u.location.lat,u.location.lng])}),s.length>0&&o.fitBounds(l,{padding:[50,50]})},[t]),B.jsxs("div",{className:"w-full h-full bg-slate-100 rounded-xl overflow-hidden shadow-inner border border-slate-200 relative",children:[B.jsx("div",{ref:e,className:"w-full h-full z-0"}),B.jsxs("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-lg z-[400] border border-slate-200 text-xs",children:[B.jsx("h4",{className:"font-bold mb-2 text-slate-700",children:"Durak Durumlar"}),B.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[B.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 border border-yellow-600"}),B.jsx("span",{children:"Aktif Durak"})]}),B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-red-700"}),B.jsx("span",{children:"Pasif Durak"})]})]})]})},AO=({stands:t,onRefresh:e,onBack:n})=>{const[i,r]=kt.useState(""),[o,s]=kt.useState(null),[l,u]=kt.useState(""),[c,f]=kt.useState(""),[g,y]=kt.useState(new Date().toISOString().split("T")[0]),[w,N]=kt.useState(!1),[R,F]=kt.useState(null),T=o?o.trim().toUpperCase():"",I=kt.useMemo(()=>{const C=new Set;return t.forEach(O=>{O.plates&&O.plates.forEach(H=>C.add(H))}),Array.from(C).sort()},[t]),P=kt.useMemo(()=>T?t.find(C=>C.plates.includes(T)):null,[t,T]),G=kt.useMemo(()=>{if(!T)return[];const C=[];t.forEach(k=>{k.history.forEach(b=>{if(b.fieldName==="plates"){const V=b.oldValue==="(Plaka Yok)"?[]:b.oldValue.split(", ").map(se=>se.trim()),ie=b.newValue==="(Plaka Yok)"?[]:b.newValue.split(", ").map(se=>se.trim()),_e=V.includes(T),le=ie.includes(T);!_e&&le?C.push({id:b.id,date:b.timestamp,ukomeNo:b.relatedUkomeNo,standName:k.name,action:"GR",user:b.changedBy}):_e&&!le&&C.push({id:b.id,date:b.timestamp,ukomeNo:b.relatedUkomeNo,standName:k.name,action:"IKI",user:b.changedBy})}})});const O=[];C.sort((k,b)=>new Date(b.date).getTime()-new Date(k.date).getTime());const H=new Set;return C.forEach(k=>{if(!H.has(k.id)){if(k.ukomeNo){const b=C.find(V=>V.id!==k.id&&!H.has(V.id)&&V.ukomeNo===k.ukomeNo&&V.action!==k.action);if(b){const V=k.action==="IKI"?k:b,ie=k.action==="GR"?k:b;O.push({id:k.id+b.id,date:ie.date,type:"TRANSFER",from:V.standName,to:ie.standName,ukomeNo:k.ukomeNo,user:k.user}),H.add(k.id),H.add(b.id);return}}O.push({id:k.id,date:k.date,type:k.action,stand:k.standName,ukomeNo:k.ukomeNo,user:k.user}),H.add(k.id)}}),O.sort((k,b)=>new Date(b.date).getTime()-new Date(k.date).getTime())},[t,T]),J=C=>{if(C.preventDefault(),i.trim()){const O=i.trim().toUpperCase();s(O),F(null),u(""),f("")}},Q=()=>{if(o){const C=G.map(O=>({date:O.date,standName:O.type==="TRANSFER"?`${O.from} -> ${O.to}`:O.stand,action:O.type,details:`Ref: ${O.ukomeNo||"Manuel"}`,user:O.user}));_O(o,C,P||null)}},D=async()=>{if(!o||!l)return;if(!c.trim()){alert("Plaka ilemleri resmi bir ilem olduu iin UKOME Karar Numaras girilmesi zorunludur.");return}if(P&&P.id===l){alert("Plaka zaten bu durakta.");return}const C=P?`${o} plakasn ${P.name} durandan alp seilen duraa transfer etmek istiyor musunuz?`:`${o} plakasn seilen duraa eklemek (ilk atama) istiyor musunuz?`;if(confirm(C)){N(!0);try{const O=t.find(ie=>ie.id===l);if(!O)throw new Error("Hedef durak bulunamad.");const H=new Date().toISOString();if(P){const ie={...P,plates:P.plates.filter(le=>le!==o),ukomeDecisionNo:c,ukomeDate:g,updatedAt:H},_e=j0(P,ie);_e.forEach(le=>{le.changedBy="PlakaYnetim"}),ie.history=[...P.history,..._e],await Lp(ie)}const k={...O,plates:[...O.plates,o].sort(),ukomeDecisionNo:c,ukomeDate:g,updatedAt:H},b=j0(O,k);b.forEach(ie=>{ie.changedBy="PlakaYnetim"}),k.history=[...O.history,...b],await Lp(k),await e();const V=P?"baaryla tand":"baaryla eklendi";F(`${o} ${O.name} durana ${V}. (Karar: ${c})`),u(""),f("")}catch(O){console.error(O),alert("lem srasnda hata olutu.")}finally{N(!1)}}};return B.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[B.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:B.jsx("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",children:B.jsx(bc,{size:20})}),B.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[B.jsx(Of,{className:"text-purple-600"}),"Plaka Ynetim Paneli"]})]})})}),B.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 py-8",children:[B.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:B.jsxs("form",{onSubmit:J,className:"flex gap-4 items-end",children:[B.jsxs("div",{className:"flex-1 max-w-md",children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Plaka Sorgula"}),B.jsxs("div",{className:"relative",children:[B.jsx(bE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),B.jsx("input",{type:"text",list:"plate-search-suggestions",value:i,onChange:C=>r(C.target.value),placeholder:"rn: 35 T 1234",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-lg font-mono uppercase",autoFocus:!0}),B.jsx("datalist",{id:"plate-search-suggestions",children:I.map(C=>B.jsx("option",{value:C},C))})]})]}),B.jsx("button",{type:"submit",className:"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:"Sorgula"})]})}),o&&B.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[B.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx("h3",{className:"font-semibold text-slate-800",children:"Mevcut Durum"}),B.jsx("span",{className:"font-mono font-bold text-lg bg-slate-200 px-3 py-1 rounded text-slate-800",children:o})]}),B.jsxs("button",{onClick:Q,className:"flex items-center gap-2 text-xs bg-white border border-slate-300 px-3 py-1.5 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors",children:[B.jsx(EE,{size:16})," PDF Rapor"]})]}),B.jsx("div",{className:"p-8 text-center",children:P?B.jsxs("div",{className:"flex flex-col items-center",children:[B.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4",children:B.jsx(gm,{size:32})}),B.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:P.name}),B.jsxs("p",{className:"text-slate-500",children:[P.district," / ",P.neighborhood]}),B.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-50 text-green-700 text-sm font-medium border border-green-200",children:[B.jsx(k2,{size:14})," Aktif Olarak alyor"]})]}):B.jsxs("div",{className:"flex flex-col items-center",children:[B.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4",children:B.jsx(Lk,{size:32})}),B.jsx("h2",{className:"text-xl font-bold text-slate-700 mb-2",children:"Bota / Kaytsz"}),B.jsx("p",{className:"text-slate-500",children:"Bu plaka u anda hibir duraa kaytl grnmyor."})]})})]}),B.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[B.jsx("div",{className:"bg-purple-50 px-6 py-4 border-b border-purple-100",children:B.jsxs("h3",{className:"font-semibold text-purple-900 flex items-center gap-2",children:[B.jsx(Mk,{size:18})," Duraa Ekle / Dura Deitir"]})}),B.jsxs("div",{className:"p-6",children:[R&&B.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center gap-2",children:[B.jsx(k2,{size:18}),R]}),B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-100 shadow-sm",children:[B.jsxs("h4",{className:"text-xs font-bold text-purple-800 uppercase mb-3 flex items-center gap-1",children:[B.jsx(Ha,{size:12})," lem Dayana (UKOME)"]}),B.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[B.jsxs("div",{children:[B.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Karar No ",B.jsx("span",{className:"text-red-500",children:"*"})]}),B.jsx("input",{type:"text",value:c,onChange:C=>f(C.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"rn: 2024/5-12"})]}),B.jsxs("div",{children:[B.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Karar Tarihi ",B.jsx("span",{className:"text-red-500",children:"*"})]}),B.jsx("input",{type:"date",value:g,onChange:C=>y(C.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-purple-500 outline-none"})]})]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:P?"Yeni Durak Sein (Transfer)":"Duraa Ekle (lk Atama)"}),B.jsxs("select",{value:l,onChange:C=>u(C.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[B.jsx("option",{value:"",children:"Durak Seiniz..."}),t.sort((C,O)=>C.name.localeCompare(O.name)).map(C=>B.jsxs("option",{value:C.id,disabled:(P==null?void 0:P.id)===C.id,children:[C.name," (",C.district,") ",(P==null?void 0:P.id)===C.id?"(Mevcut)":""]},C.id))]})]}),B.jsx("button",{onClick:D,disabled:!l||w,className:"w-full py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2",children:w?"leniyor...":P?"Transferi Tamamla":"Duraa Ekle"})]})]})]})]}),B.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[600px]",children:[B.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[B.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[B.jsx(K0,{size:18,className:"text-blue-500"})," alma Gemii"]}),B.jsxs("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded text-slate-600",children:[G.length," Kayt"]})]}),B.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:G.length>0?B.jsx("div",{className:"divide-y divide-slate-100",children:G.map(C=>B.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[B.jsxs("div",{className:"flex justify-between items-center mb-2",children:[B.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${C.type==="TRANSFER"?"bg-purple-100 text-purple-700 border-purple-200":C.type==="GR"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:C.type}),C.ukomeNo&&B.jsxs("span",{className:"text-[10px] font-mono text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:["UKOME: ",C.ukomeNo]})]}),B.jsx("div",{className:"mb-2",children:C.type==="TRANSFER"?B.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-800",children:[B.jsx("span",{className:"text-slate-500 font-normal",children:C.from}),B.jsx(Dk,{size:14,className:"text-slate-400"}),B.jsx("span",{className:"text-blue-700",children:C.to})]}):B.jsx("div",{className:"font-bold text-slate-800 text-sm",children:C.stand})}),B.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[B.jsxs("div",{className:"flex items-center gap-1",children:[B.jsx(TE,{size:12}),new Date(C.date).toLocaleDateString("tr-TR")]}),B.jsxs("div",{children:["lem: ",C.user]})]})]},C.id))}):B.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-8 text-center",children:[B.jsx(K0,{size:48,className:"mb-4 opacity-20"}),B.jsx("p",{children:"Bu plaka iin gemi kayd bulunamad."})]})})]})]})]})]})},bO=()=>{const[t,e]=kt.useState("LANDING"),[n,i]=kt.useState("LIST"),[r,o]=kt.useState("CREATE"),[s,l]=kt.useState([]),[u,c]=kt.useState(void 0),[f,g]=kt.useState(void 0),[y,w]=kt.useState(null),[N,R]=kt.useState(""),[F,T]=kt.useState(!0),[I,P]=kt.useState(null),[G,J]=kt.useState(!1),[Q,D]=kt.useState({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""});kt.useEffect(()=>{C()},[]);const C=async()=>{T(!0),P(null);try{const W=await Ik();l(W)}catch(W){console.error("Firebase Error:",W);let oe="Veritabanna balanlamad.";W.message&&W.message.includes("services/firebaseConfig.ts")?oe=W.message:W.code==="permission-denied"?oe="Yetki Hatas: Firestore veritaban kurallar okuma/yazmay engelliyor. (Test modunu an: allow read, write: if true;)":W.code==="unavailable"?oe="Sunucuya ulalamyor. nternet balantnz kontrol edin.":W.message&&W.message.includes("project")?oe="Proje Bulunamad: Firebase Console'da 'Firestore Database' oluturduunuzdan emin olun. Sadece proje amak yetmez, veritabann da 'Create Database' diyerek oluturmalsnz.":oe=`Veritaban Hatas (${W.code||"Bilinmeyen"}): ${W.message}`,P(oe)}finally{T(!1)}},O=()=>{o("CREATE"),c(void 0),i("FORM")},H=W=>{c(W),i("VIEW")},k=W=>{o("EDIT"),c(W),i("FORM")},b=W=>{c(W),D({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""}),J(!0)},V=W=>{if(W.preventDefault(),J(!1),u){const oe={...u,ukomeDecisionNo:Q.decisionNo,ukomeDate:Q.date,ukomeSummary:Q.summary};o("REVISION"),c(oe),i("FORM")}},ie=async W=>{if(confirm("Bu dura silmek istediinize emin misiniz?"))try{await Pk(W),await C(),n==="VIEW"&&i("LIST")}catch{alert("Silme ilemi baarsz oldu.")}},_e=async W=>{try{const oe=s.find(fe=>fe.id===W.id);if(oe){let fe=oe.history;if(r==="REVISION"){const j=j0(oe,W);fe=[...oe.history,...j]}const xe={...W,history:fe};await Lp(xe)}else await Lp(W);await C(),i("LIST")}catch(oe){console.error(oe),alert("Kayt ilemi baarsz oldu. Hata detaylar konsolda.")}},le=(W,oe=null)=>{g(W),w(oe)},se=s.filter(W=>{var oe,fe;return W.name.toLowerCase().includes(N.toLowerCase())||W.district.toLowerCase().includes(N.toLowerCase())||((oe=W.neighborhood)==null?void 0:oe.toLowerCase().includes(N.toLowerCase()))||((fe=W.ukomeDecisionNo)==null?void 0:fe.toLowerCase().includes(N.toLowerCase()))});return t==="LANDING"?B.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:B.jsxs("div",{className:"max-w-4xl w-full",children:[B.jsxs("div",{className:"text-center mb-10",children:[B.jsx("div",{className:"flex justify-center mb-6",children:B.jsxs("svg",{width:"110",height:"150",viewBox:"0 0 100 130",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"drop-shadow-2xl hover:scale-105 transition-transform duration-300",children:[B.jsx("path",{d:"M50 0C22.4 0 0 22.4 0 50C0 85 50 130 50 130C50 130 100 85 100 50C100 22.4 77.6 0 50 0Z",fill:"#FACC15",stroke:"#EAB308",strokeWidth:"1"}),B.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"#09090b"}),B.jsx("text",{x:"50",y:"60",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontWeight:"900",fontSize:"23",fill:"#FACC15",letterSpacing:"-0.5",children:"TAKS"})]})}),B.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 tracking-tight mb-2",children:"TaksiYnetim"}),B.jsx("p",{className:"text-slate-500 text-lg",children:"zmir Taksi Duraklar ve Plaka Ynetim Sistemi"})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[B.jsxs("button",{onClick:()=>e("STANDS"),className:"group relative bg-white hover:bg-blue-600 border border-slate-200 hover:border-blue-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[B.jsx("div",{className:"bg-blue-50 group-hover:bg-blue-500 p-4 rounded-xl mb-6 transition-colors",children:B.jsx(L2,{size:32,className:"text-blue-600 group-hover:text-white transition-colors"})}),B.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Durak Ynetim Paneli"}),B.jsx("p",{className:"text-slate-500 group-hover:text-blue-100",children:"Taksi duraklarn harita zerinde grntleyin, kapasite bilgilerini ynetin, UKOME kararlarn ileyin."}),B.jsxs("div",{className:"mt-auto pt-6 flex items-center text-blue-600 group-hover:text-white font-medium",children:["Paneli A ",B.jsx(bc,{className:"rotate-180 ml-2"})]})]}),B.jsxs("button",{onClick:()=>e("PLATES"),className:"group relative bg-white hover:bg-purple-600 border border-slate-200 hover:border-purple-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[B.jsx("div",{className:"bg-purple-50 group-hover:bg-purple-500 p-4 rounded-xl mb-6 transition-colors",children:B.jsx(Of,{size:32,className:"text-purple-600 group-hover:text-white transition-colors"})}),B.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Plaka Ynetim Paneli"}),B.jsx("p",{className:"text-slate-500 group-hover:text-purple-100",children:"Plaka sorgulayn, aralarn hangi durakta altn grn ve durak transfer ilemlerini gerekletirin."}),B.jsxs("div",{className:"mt-auto pt-6 flex items-center text-purple-600 group-hover:text-white font-medium",children:["Paneli A ",B.jsx(bc,{className:"rotate-180 ml-2"})]})]})]})]})}):t==="PLATES"?B.jsx(AO,{stands:s,onRefresh:C,onBack:()=>e("LANDING")}):B.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col animate-in fade-in duration-300",children:[B.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:B.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx("button",{onClick:()=>e("LANDING"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",title:"Ana Menye Dn",children:B.jsx(bc,{size:20})}),B.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>i("LIST"),children:[B.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:B.jsx(L2,{size:20})}),B.jsx("h1",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"Durak Ynetim Paneli"})]})]}),B.jsx("div",{className:"text-sm text-slate-500 hidden sm:block",children:"Durak Kayt Sistemi v1.2"})]})}),B.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[I&&B.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-start gap-3 shadow-sm animate-in fade-in slide-in-from-top-2",children:[B.jsx(Rk,{className:"shrink-0 mt-0.5",size:20}),B.jsxs("div",{className:"flex-1",children:[B.jsx("h3",{className:"font-bold",children:"Balant Hatas"}),B.jsx("p",{className:"text-sm mt-1",children:I})]})]}),(n==="LIST"||n==="MAP")&&B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[B.jsxs("div",{className:"relative w-full sm:w-96",children:[B.jsx(bE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),B.jsx("input",{type:"text",placeholder:"Durak ara (sim, le, UKOME No)...",value:N,onChange:W=>R(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),B.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[B.jsxs("div",{className:"bg-white border border-slate-300 rounded-lg p-1 flex",children:[B.jsxs("button",{onClick:()=>i("LIST"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="LIST"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[B.jsx(Uk,{size:18}),"Liste"]}),B.jsxs("button",{onClick:()=>i("MAP"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="MAP"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[B.jsx(zk,{size:18}),"Harita"]})]}),B.jsxs("button",{onClick:O,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm font-medium",children:[B.jsx(Hk,{size:20}),"Yeni Durak Ekle"]})]})]}),B.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[500px]",children:F?B.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[B.jsx(Rp,{size:32,className:"animate-spin mb-2 text-blue-600"}),B.jsx("p",{children:"Veriler Ykleniyor..."})]}):B.jsx(B.Fragment,{children:n==="LIST"?B.jsx("div",{className:"overflow-x-auto",children:B.jsxs("table",{className:"w-full text-left border-collapse",children:[B.jsx("thead",{children:B.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[B.jsx("th",{className:"p-4",children:"Durak Ad"}),B.jsx("th",{className:"p-4",children:"le / Mahalle"}),B.jsx("th",{className:"p-4",children:"DURAKTA ALIAN ARA SAYISI"}),B.jsx("th",{className:"p-4",children:"Son UKOME Karar"}),B.jsx("th",{className:"p-4",children:"Durum"}),B.jsx("th",{className:"p-4 text-right",children:"lemler"})]})}),B.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:se.length>0?se.map(W=>{var oe;return B.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[B.jsx("td",{className:"p-4 font-medium text-slate-900",children:B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600",children:B.jsx(Ok,{size:16})}),W.name]})}),B.jsxs("td",{className:"p-4",children:[B.jsx("div",{className:"font-medium text-slate-700",children:W.district}),W.neighborhood&&B.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[W.neighborhood," Mah."]})]}),B.jsx("td",{className:"p-4",children:B.jsxs("div",{className:"flex flex-col gap-1",children:[B.jsxs("div",{className:"flex items-baseline gap-2",children:[B.jsx("span",{className:"text-lg font-bold text-slate-700",children:((oe=W.plates)==null?void 0:oe.length)||0}),B.jsx("span",{className:"text-xs text-slate-500",children:"Ara"})]}),B.jsxs("span",{className:"text-xs text-slate-400",children:["(Kapasite: ",W.capacity,")"]})]})}),B.jsx("td",{className:"p-4 text-slate-600",children:W.ukomeDecisionNo?B.jsxs("div",{className:"flex flex-col",children:[B.jsx("span",{className:"font-medium text-slate-700",children:W.ukomeDecisionNo}),B.jsx("span",{className:"text-xs text-slate-400",children:new Date(W.ukomeDate).toLocaleDateString("tr-TR")})]}):"-"}),B.jsx("td",{className:"p-4",children:B.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${W.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":W.status==="Pasif"?"bg-red-50 text-red-700 border-red-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:W.status})}),B.jsx("td",{className:"p-4 text-right",children:B.jsxs("div",{className:"flex items-center justify-end gap-2",children:[B.jsx("button",{onClick:()=>H(W),className:"p-2 bg-white border border-slate-200 text-slate-600 hover:text-blue-600 hover:border-blue-200 rounded-lg transition-all shadow-sm",title:"Detayl Grntle",children:B.jsx(Bk,{size:18})}),B.jsx("button",{onClick:()=>k(W),className:"p-2 bg-orange-50 border border-orange-100 text-orange-600 hover:bg-orange-100 hover:border-orange-200 rounded-lg transition-all shadow-sm",title:"Dzenle (Hatal Giri Dzeltme)",children:B.jsx(qk,{size:18})}),B.jsxs("button",{onClick:()=>b(W),className:"px-3 py-2 bg-blue-50 border border-blue-100 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-medium flex items-center gap-1 transition-all",title:"UKOME Karar ile Revize Et",children:[B.jsx(Ha,{size:16}),"Revize"]}),B.jsx("button",{onClick:()=>ie(W.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg ml-1",title:"Sil",children:B.jsx($k,{size:18})})]})})]},W.id)}):B.jsx("tr",{children:B.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:I?B.jsxs("div",{className:"flex flex-col items-center gap-2",children:[B.jsx("span",{className:"font-semibold text-red-500",children:"Balant Sorunu"}),B.jsx("span",{className:"text-xs",children:"Yukardaki hata mesajn kontrol edin."})]}):"Kayt bulunamad."})})})]})}):B.jsx("div",{className:"h-[600px] w-full",children:B.jsx(EO,{stands:se})})})})]}),n==="VIEW"&&u&&B.jsx(wO,{stand:u,onBack:()=>i("LIST"),onRevise:b,onViewHistory:W=>le(u,W)}),n==="FORM"&&B.jsx(pF,{initialData:u,existingStands:s,onSave:_e,onCancel:()=>i("LIST")})]}),f&&B.jsx(TO,{stand:f,initialUkomeNo:y,onClose:()=>{g(void 0),w(null)}}),G&&B.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4",children:[B.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>J(!1)}),B.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md relative z-10 p-6 animate-in fade-in zoom-in duration-200",children:[B.jsxs("div",{className:"mb-5",children:[B.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[B.jsx(Ha,{className:"text-blue-600"}),"UKOME Revizyon Karar"]}),B.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Dura revize etmeden nce ilgili UKOME karar numarasn giriniz."})]}),B.jsxs("form",{onSubmit:V,className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Numaras"}),B.jsx("input",{required:!0,type:"text",placeholder:"rn: 2025/12-05",value:Q.decisionNo,onChange:W=>D({...Q,decisionNo:W.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Tarihi"}),B.jsx("input",{required:!0,type:"date",value:Q.date,onChange:W=>D({...Q,date:W.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar zeti (Opsiyonel)"}),B.jsx("textarea",{rows:2,placeholder:"Deiiklik sebebi...",value:Q.summary,onChange:W=>D({...Q,summary:W.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),B.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[B.jsx("button",{type:"button",onClick:()=>J(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg",children:"ptal"}),B.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Devam Et & Revize Et"})]})]})]})]})]})},qA=document.getElementById("root");if(!qA)throw new Error("Could not find root element to mount to");const CO=Lg.createRoot(qA);CO.render(B.jsx(bb.StrictMode,{children:B.jsx(bO,{})}));export{En as _,kd as c,Tv as g};
