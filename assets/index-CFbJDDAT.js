(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u0={exports:{}},md={},c0={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=Symbol.for("react.element"),bS=Symbol.for("react.portal"),DS=Symbol.for("react.fragment"),LS=Symbol.for("react.strict_mode"),VS=Symbol.for("react.profiler"),FS=Symbol.for("react.provider"),US=Symbol.for("react.context"),OS=Symbol.for("react.forward_ref"),BS=Symbol.for("react.suspense"),zS=Symbol.for("react.memo"),GS=Symbol.for("react.lazy"),xg=Symbol.iterator;function HS(t){return t===null||typeof t!="object"?null:(t=xg&&t[xg]||t["@@iterator"],typeof t=="function"?t:null)}var d0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0=Object.assign,f0={};function Us(t,e,n){this.props=t,this.context=e,this.refs=f0,this.updater=n||d0}Us.prototype.isReactComponent={};Us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p0(){}p0.prototype=Us.prototype;function yp(t,e,n){this.props=t,this.context=e,this.refs=f0,this.updater=n||d0}var vp=yp.prototype=new p0;vp.constructor=yp;h0(vp,Us.prototype);vp.isPureReactComponent=!0;var Sg=Array.isArray,m0=Object.prototype.hasOwnProperty,Tp={current:null},g0={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)m0.call(e,i)&&!g0.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Fl,type:t,key:o,ref:a,props:r,_owner:Tp.current}}function qS(t,e){return{$$typeof:Fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ep(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fl}function $S(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ig=/\/+/g;function rh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$S(""+t.key):e.toString(36)}function oc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fl:case bS:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+rh(a,0):i,Sg(r)?(n="",t!=null&&(n=t.replace(Ig,"$&/")+"/"),oc(r,e,n,"",function(f){return f})):r!=null&&(Ep(r)&&(r=qS(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ig,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Sg(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+rh(o,u);a+=oc(o,e,n,d,r)}else if(d=HS(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+rh(o,u++),a+=oc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Nu(t,e,n){if(t==null)return t;var i=[],r=0;return oc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function KS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},sc={transition:null},WS={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:sc,ReactCurrentOwner:Tp};function y0(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!Ep(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Us;Ae.Fragment=DS;Ae.Profiler=VS;Ae.PureComponent=yp;Ae.StrictMode=LS;Ae.Suspense=BS;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS;Ae.act=y0;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=h0({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Tp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)m0.call(e,d)&&!g0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Fl,type:t.type,key:r,ref:o,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:US,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FS,_context:t},t.Consumer=t};Ae.createElement=_0;Ae.createFactory=function(t){var e=_0.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:OS,render:t}};Ae.isValidElement=Ep;Ae.lazy=function(t){return{$$typeof:GS,_payload:{_status:-1,_result:t},_init:KS}};Ae.memo=function(t,e){return{$$typeof:zS,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=sc.transition;sc.transition={};try{t()}finally{sc.transition=e}};Ae.unstable_act=y0;Ae.useCallback=function(t,e){return Yt.current.useCallback(t,e)};Ae.useContext=function(t){return Yt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Yt.current.useEffect(t,e)};Ae.useId=function(){return Yt.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Yt.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};Ae.useRef=function(t){return Yt.current.useRef(t)};Ae.useState=function(t){return Yt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Yt.current.useTransition()};Ae.version="18.3.1";c0.exports=Ae;var ce=c0.exports;const JS=l0(ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=ce,YS=Symbol.for("react.element"),QS=Symbol.for("react.fragment"),jS=Object.prototype.hasOwnProperty,XS=ZS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eI={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)jS.call(e,i)&&!eI.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:YS,type:t,key:o,ref:a,props:r,_owner:XS.current}}md.Fragment=QS;md.jsx=v0;md.jsxs=v0;u0.exports=md;var E=u0.exports,Bh={},T0={exports:{}},pn={},E0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ne){var X=H.length;H.push(ne);e:for(;0<X;){var he=X-1>>>1,ye=H[he];if(0<r(ye,ne))H[he]=ne,H[X]=ye,X=he;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ne=H[0],X=H.pop();if(X!==ne){H[0]=X;e:for(var he=0,ye=H.length,Pe=ye>>>1;he<Pe;){var Oe=2*(he+1)-1,Se=H[Oe],ve=Oe+1,gt=H[ve];if(0>r(Se,X))ve<ye&&0>r(gt,Se)?(H[he]=gt,H[ve]=X,he=ve):(H[he]=Se,H[Oe]=X,he=Oe);else if(ve<ye&&0>r(gt,X))H[he]=gt,H[ve]=X,he=ve;else break e}}return ne}function r(H,ne){var X=H.sortIndex-ne.sortIndex;return X!==0?X:H.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],f=[],g=1,y=null,v=3,S=!1,V=!1,M=!1,O=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var ne=n(f);ne!==null;){if(ne.callback===null)i(f);else if(ne.startTime<=H)i(f),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=n(f)}}function G(H){if(M=!1,I(H),!V)if(n(d)!==null)V=!0,Me(W);else{var ne=n(f);ne!==null&&xe(G,ne.startTime-H)}}function W(H,ne){V=!1,M&&(M=!1,R(C),C=-1),S=!0;var X=v;try{for(I(ne),y=n(d);y!==null&&(!(y.expirationTime>ne)||H&&!B());){var he=y.callback;if(typeof he=="function"){y.callback=null,v=y.priorityLevel;var ye=he(y.expirationTime<=ne);ne=t.unstable_now(),typeof ye=="function"?y.callback=ye:y===n(d)&&i(d),I(ne)}else i(d);y=n(d)}if(y!==null)var Pe=!0;else{var Oe=n(f);Oe!==null&&xe(G,Oe.startTime-ne),Pe=!1}return Pe}finally{y=null,v=X,S=!1}}var K=!1,b=null,C=-1,k=5,U=-1;function B(){return!(t.unstable_now()-U<k)}function F(){if(b!==null){var H=t.unstable_now();U=H;var ne=!0;try{ne=b(!0,H)}finally{ne?D():(K=!1,b=null)}}else K=!1}var D;if(typeof N=="function")D=function(){N(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Ke=ae.port2;ae.port1.onmessage=F,D=function(){Ke.postMessage(null)}}else D=function(){O(F,0)};function Me(H){b=H,K||(K=!0,D())}function xe(H,ne){C=O(function(){H(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){V||S||(V=!0,Me(W))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var X=v;v=ne;try{return H()}finally{v=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=v;v=H;try{return ne()}finally{v=X}},t.unstable_scheduleCallback=function(H,ne,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,H){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=X+ye,H={id:g++,callback:ne,priorityLevel:H,startTime:X,expirationTime:ye,sortIndex:-1},X>he?(H.sortIndex=X,e(f,H),n(d)===null&&H===n(f)&&(M?(R(C),C=-1):M=!0,xe(G,X-he))):(H.sortIndex=ye,e(d,H),V||S||(V=!0,Me(W))),H},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(H){var ne=v;return function(){var X=v;v=ne;try{return H.apply(this,arguments)}finally{v=X}}}})(w0);E0.exports=w0;var tI=E0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI=ce,fn=tI;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x0=new Set,ll={};function lo(t,e){ws(t,e),ws(t+"Capture",e)}function ws(t,e){for(ll[t]=e,t=0;t<e.length;t++)x0.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=Object.prototype.hasOwnProperty,iI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cg={},Ag={};function rI(t){return zh.call(Ag,t)?!0:zh.call(Cg,t)?!1:iI.test(t)?Ag[t]=!0:(Cg[t]=!0,!1)}function oI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sI(t,e,n,i){if(e===null||typeof e>"u"||oI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wp=/[\-:]([a-z])/g;function xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wp,xp);Dt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wp,xp);Dt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wp,xp);Dt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sp(t,e,n,i){var r=Dt.hasOwnProperty(e)?Dt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sI(e,n,r,i)&&(n=null),i||r===null?rI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Fi=nI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mu=Symbol.for("react.element"),jo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),Ip=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),S0=Symbol.for("react.provider"),I0=Symbol.for("react.context"),Cp=Symbol.for("react.forward_ref"),Hh=Symbol.for("react.suspense"),qh=Symbol.for("react.suspense_list"),Ap=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),Pg=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=Pg&&t[Pg]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,oh;function za(t){if(oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oh=e&&e[1]||""}return`
`+oh+t}var sh=!1;function ah(t,e){if(!t||sh)return"";sh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{sh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?za(t):""}function aI(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=ah(t.type,!1),t;case 11:return t=ah(t.type.render,!1),t;case 1:return t=ah(t.type,!0),t;default:return""}}function $h(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case jo:return"Portal";case Gh:return"Profiler";case Ip:return"StrictMode";case Hh:return"Suspense";case qh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I0:return(t.displayName||"Context")+".Consumer";case S0:return(t._context.displayName||"Context")+".Provider";case Cp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ap:return e=t.displayName||null,e!==null?e:$h(t.type)||"Memo";case ji:e=t._payload,t=t._init;try{return $h(t(e))}catch{}}return null}function lI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $h(e);case 8:return e===Ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function A0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uI(t){var e=A0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=uI(t))}function P0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=A0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kh(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R0(t,e){e=e.checked,e!=null&&Sp(t,"checked",e,!1)}function Wh(t,e){R0(t,e);var n=yr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jh(t,e.type,yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jh(t,e,n){(e!=="number"||Sc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ga=Array.isArray;function hs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Zh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Ga(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yr(n)}}function k0(t,e){var n=yr(e.value),i=yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function N0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?N0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Du,M0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ul(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cI=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){cI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function b0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function D0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=b0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var dI=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qh(t,e){if(e){if(dI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function jh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xh=null;function Pp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ef=null,fs=null,ps=null;function bg(t){if(t=Bl(t)){if(typeof ef!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Td(e),ef(t.stateNode,t.type,e))}}function L0(t){fs?ps?ps.push(t):ps=[t]:fs=t}function V0(){if(fs){var t=fs,e=ps;if(ps=fs=null,bg(t),e)for(t=0;t<e.length;t++)bg(e[t])}}function F0(t,e){return t(e)}function U0(){}var lh=!1;function O0(t,e,n){if(lh)return t(e,n);lh=!0;try{return F0(t,e,n)}finally{lh=!1,(fs!==null||ps!==null)&&(U0(),V0())}}function cl(t,e){var n=t.stateNode;if(n===null)return null;var i=Td(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var tf=!1;if(Ri)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){tf=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{tf=!1}function hI(t,e,n,i,r,o,a,u,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var Ya=!1,Ic=null,Cc=!1,nf=null,fI={onError:function(t){Ya=!0,Ic=t}};function pI(t,e,n,i,r,o,a,u,d){Ya=!1,Ic=null,hI.apply(fI,arguments)}function mI(t,e,n,i,r,o,a,u,d){if(pI.apply(this,arguments),Ya){if(Ya){var f=Ic;Ya=!1,Ic=null}else throw Error(ee(198));Cc||(Cc=!0,nf=f)}}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dg(t){if(uo(t)!==t)throw Error(ee(188))}function gI(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Dg(r),t;if(o===i)return Dg(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function z0(t){return t=gI(t),t!==null?G0(t):null}function G0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G0(t);if(e!==null)return e;t=t.sibling}return null}var H0=fn.unstable_scheduleCallback,Lg=fn.unstable_cancelCallback,_I=fn.unstable_shouldYield,yI=fn.unstable_requestPaint,ct=fn.unstable_now,vI=fn.unstable_getCurrentPriorityLevel,Rp=fn.unstable_ImmediatePriority,q0=fn.unstable_UserBlockingPriority,Ac=fn.unstable_NormalPriority,TI=fn.unstable_LowPriority,$0=fn.unstable_IdlePriority,gd=null,oi=null;function EI(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(gd,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:SI,wI=Math.log,xI=Math.LN2;function SI(t){return t>>>=0,t===0?32:31-(wI(t)/xI|0)|0}var Lu=64,Vu=4194304;function Ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Ha(u):(o&=a,o!==0&&(i=Ha(o)))}else a=n&~r,a!==0?i=Ha(a):o!==0&&(i=Ha(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-qn(e),r=1<<n,i|=t[n],e&=~r;return i}function II(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-qn(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=II(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function rf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K0(){var t=Lu;return Lu<<=1,!(Lu&4194240)&&(Lu=64),t}function uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ul(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function AI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-qn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function kp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-qn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ze=0;function W0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J0,Np,Z0,Y0,Q0,of=!1,Fu=[],sr=null,ar=null,lr=null,dl=new Map,hl=new Map,er=[],PI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vg(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function Ma(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Bl(e),e!==null&&Np(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function RI(t,e,n,i,r){switch(e){case"focusin":return sr=Ma(sr,t,e,n,i,r),!0;case"dragenter":return ar=Ma(ar,t,e,n,i,r),!0;case"mouseover":return lr=Ma(lr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return dl.set(o,Ma(dl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,hl.set(o,Ma(hl.get(o)||null,t,e,n,i,r)),!0}return!1}function j0(t){var e=Kr(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=B0(n),e!==null){t.blockedOn=e,Q0(t.priority,function(){Z0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Xh=i,n.target.dispatchEvent(i),Xh=null}else return e=Bl(n),e!==null&&Np(e),t.blockedOn=n,!1;e.shift()}return!0}function Fg(t,e,n){ac(t)&&n.delete(e)}function kI(){of=!1,sr!==null&&ac(sr)&&(sr=null),ar!==null&&ac(ar)&&(ar=null),lr!==null&&ac(lr)&&(lr=null),dl.forEach(Fg),hl.forEach(Fg)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,of||(of=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,kI)))}function fl(t){function e(r){return ba(r,t)}if(0<Fu.length){ba(Fu[0],t);for(var n=1;n<Fu.length;n++){var i=Fu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(sr!==null&&ba(sr,t),ar!==null&&ba(ar,t),lr!==null&&ba(lr,t),dl.forEach(e),hl.forEach(e),n=0;n<er.length;n++)i=er[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)j0(n),n.blockedOn===null&&er.shift()}var ms=Fi.ReactCurrentBatchConfig,Rc=!0;function NI(t,e,n,i){var r=ze,o=ms.transition;ms.transition=null;try{ze=1,Mp(t,e,n,i)}finally{ze=r,ms.transition=o}}function MI(t,e,n,i){var r=ze,o=ms.transition;ms.transition=null;try{ze=4,Mp(t,e,n,i)}finally{ze=r,ms.transition=o}}function Mp(t,e,n,i){if(Rc){var r=sf(t,e,n,i);if(r===null)vh(t,e,i,kc,n),Vg(t,i);else if(RI(r,t,e,n,i))i.stopPropagation();else if(Vg(t,i),e&4&&-1<PI.indexOf(t)){for(;r!==null;){var o=Bl(r);if(o!==null&&J0(o),o=sf(t,e,n,i),o===null&&vh(t,e,i,kc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else vh(t,e,i,null,n)}}var kc=null;function sf(t,e,n,i){if(kc=null,t=Pp(i),t=Kr(t),t!==null)if(e=uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kc=t,null}function X0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vI()){case Rp:return 1;case q0:return 4;case Ac:case TI:return 16;case $0:return 536870912;default:return 16}default:return 16}}var nr=null,bp=null,lc=null;function eT(){if(lc)return lc;var t,e=bp,n=e.length,i,r="value"in nr?nr.value:nr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return lc=r.slice(t,1<i?1-i:void 0)}function uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uu(){return!0}function Ug(){return!1}function mn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Uu:Ug,this.isPropagationStopped=Ug,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),e}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dp=mn(Os),Ol=rt({},Os,{view:0,detail:0}),bI=mn(Ol),ch,dh,Da,_d=rt({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(ch=t.screenX-Da.screenX,dh=t.screenY-Da.screenY):dh=ch=0,Da=t),ch)},movementY:function(t){return"movementY"in t?t.movementY:dh}}),Og=mn(_d),DI=rt({},_d,{dataTransfer:0}),LI=mn(DI),VI=rt({},Ol,{relatedTarget:0}),hh=mn(VI),FI=rt({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),UI=mn(FI),OI=rt({},Os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BI=mn(OI),zI=rt({},Os,{data:0}),Bg=mn(zI),GI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $I(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qI[t])?!!e[t]:!1}function Lp(){return $I}var KI=rt({},Ol,{key:function(t){if(t.key){var e=GI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lp,charCode:function(t){return t.type==="keypress"?uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WI=mn(KI),JI=rt({},_d,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zg=mn(JI),ZI=rt({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lp}),YI=mn(ZI),QI=rt({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),jI=mn(QI),XI=rt({},_d,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eC=mn(XI),tC=[9,13,27,32],Vp=Ri&&"CompositionEvent"in window,Qa=null;Ri&&"documentMode"in document&&(Qa=document.documentMode);var nC=Ri&&"TextEvent"in window&&!Qa,tT=Ri&&(!Vp||Qa&&8<Qa&&11>=Qa),Gg=" ",Hg=!1;function nT(t,e){switch(t){case"keyup":return tC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function iC(t,e){switch(t){case"compositionend":return iT(e);case"keypress":return e.which!==32?null:(Hg=!0,Gg);case"textInput":return t=e.data,t===Gg&&Hg?null:t;default:return null}}function rC(t,e){if(es)return t==="compositionend"||!Vp&&nT(t,e)?(t=eT(),lc=bp=nr=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tT&&e.locale!=="ko"?null:e.data;default:return null}}var oC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oC[t.type]:e==="textarea"}function rT(t,e,n,i){L0(i),e=Nc(e,"onChange"),0<e.length&&(n=new Dp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ja=null,pl=null;function sC(t){mT(t,0)}function yd(t){var e=is(t);if(P0(e))return t}function aC(t,e){if(t==="change")return e}var oT=!1;if(Ri){var fh;if(Ri){var ph="oninput"in document;if(!ph){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),ph=typeof $g.oninput=="function"}fh=ph}else fh=!1;oT=fh&&(!document.documentMode||9<document.documentMode)}function Kg(){ja&&(ja.detachEvent("onpropertychange",sT),pl=ja=null)}function sT(t){if(t.propertyName==="value"&&yd(pl)){var e=[];rT(e,pl,t,Pp(t)),O0(sC,e)}}function lC(t,e,n){t==="focusin"?(Kg(),ja=e,pl=n,ja.attachEvent("onpropertychange",sT)):t==="focusout"&&Kg()}function uC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yd(pl)}function cC(t,e){if(t==="click")return yd(e)}function dC(t,e){if(t==="input"||t==="change")return yd(e)}function hC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:hC;function ml(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!zh.call(e,r)||!Jn(t[r],e[r]))return!1}return!0}function Wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,e){var n=Wg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wg(n)}}function aT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lT(){for(var t=window,e=Sc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sc(t.document)}return e}function Fp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fC(t){var e=lT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aT(n.ownerDocument.documentElement,n)){if(i!==null&&Fp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Jg(n,o);var a=Jg(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pC=Ri&&"documentMode"in document&&11>=document.documentMode,ts=null,af=null,Xa=null,lf=!1;function Zg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lf||ts==null||ts!==Sc(i)||(i=ts,"selectionStart"in i&&Fp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xa&&ml(Xa,i)||(Xa=i,i=Nc(af,"onSelect"),0<i.length&&(e=new Dp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ts)))}function Ou(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionend:Ou("Transition","TransitionEnd")},mh={},uT={};Ri&&(uT=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function vd(t){if(mh[t])return mh[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uT)return mh[t]=e[n];return t}var cT=vd("animationend"),dT=vd("animationiteration"),hT=vd("animationstart"),fT=vd("transitionend"),pT=new Map,Yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){pT.set(t,e),lo(e,[t])}for(var gh=0;gh<Yg.length;gh++){var _h=Yg[gh],mC=_h.toLowerCase(),gC=_h[0].toUpperCase()+_h.slice(1);Sr(mC,"on"+gC)}Sr(cT,"onAnimationEnd");Sr(dT,"onAnimationIteration");Sr(hT,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(fT,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Qg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,mI(i,e,void 0,t),t.currentTarget=null}function mT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;Qg(r,u,f),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,f=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;Qg(r,u,f),o=d}}}if(Cc)throw t=nf,Cc=!1,nf=null,t}function Je(t,e){var n=e[ff];n===void 0&&(n=e[ff]=new Set);var i=t+"__bubble";n.has(i)||(gT(e,t,2,!1),n.add(i))}function yh(t,e,n){var i=0;e&&(i|=4),gT(n,t,i,e)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function gl(t){if(!t[Bu]){t[Bu]=!0,x0.forEach(function(n){n!=="selectionchange"&&(_C.has(n)||yh(n,!1,t),yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bu]||(e[Bu]=!0,yh("selectionchange",!1,e))}}function gT(t,e,n,i){switch(X0(e)){case 1:var r=NI;break;case 4:r=MI;break;default:r=Mp}n=r.bind(null,e,n,t),r=void 0,!tf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function vh(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Kr(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}O0(function(){var f=o,g=Pp(n),y=[];e:{var v=pT.get(t);if(v!==void 0){var S=Dp,V=t;switch(t){case"keypress":if(uc(n)===0)break e;case"keydown":case"keyup":S=WI;break;case"focusin":V="focus",S=hh;break;case"focusout":V="blur",S=hh;break;case"beforeblur":case"afterblur":S=hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=LI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=YI;break;case cT:case dT:case hT:S=UI;break;case fT:S=jI;break;case"scroll":S=bI;break;case"wheel":S=eC;break;case"copy":case"cut":case"paste":S=BI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=zg}var M=(e&4)!==0,O=!M&&t==="scroll",R=M?v!==null?v+"Capture":null:v;M=[];for(var N=f,I;N!==null;){I=N;var G=I.stateNode;if(I.tag===5&&G!==null&&(I=G,R!==null&&(G=cl(N,R),G!=null&&M.push(_l(N,G,I)))),O)break;N=N.return}0<M.length&&(v=new S(v,V,null,n,g),y.push({event:v,listeners:M}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==Xh&&(V=n.relatedTarget||n.fromElement)&&(Kr(V)||V[ki]))break e;if((S||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,S?(V=n.relatedTarget||n.toElement,S=f,V=V?Kr(V):null,V!==null&&(O=uo(V),V!==O||V.tag!==5&&V.tag!==6)&&(V=null)):(S=null,V=f),S!==V)){if(M=Og,G="onMouseLeave",R="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(M=zg,G="onPointerLeave",R="onPointerEnter",N="pointer"),O=S==null?v:is(S),I=V==null?v:is(V),v=new M(G,N+"leave",S,n,g),v.target=O,v.relatedTarget=I,G=null,Kr(g)===f&&(M=new M(R,N+"enter",V,n,g),M.target=I,M.relatedTarget=O,G=M),O=G,S&&V)t:{for(M=S,R=V,N=0,I=M;I;I=Ko(I))N++;for(I=0,G=R;G;G=Ko(G))I++;for(;0<N-I;)M=Ko(M),N--;for(;0<I-N;)R=Ko(R),I--;for(;N--;){if(M===R||R!==null&&M===R.alternate)break t;M=Ko(M),R=Ko(R)}M=null}else M=null;S!==null&&jg(y,v,S,M,!1),V!==null&&O!==null&&jg(y,O,V,M,!0)}}e:{if(v=f?is(f):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var W=aC;else if(qg(v))if(oT)W=dC;else{W=uC;var K=lC}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(W=cC);if(W&&(W=W(t,f))){rT(y,W,n,g);break e}K&&K(t,v,f),t==="focusout"&&(K=v._wrapperState)&&K.controlled&&v.type==="number"&&Jh(v,"number",v.value)}switch(K=f?is(f):window,t){case"focusin":(qg(K)||K.contentEditable==="true")&&(ts=K,af=f,Xa=null);break;case"focusout":Xa=af=ts=null;break;case"mousedown":lf=!0;break;case"contextmenu":case"mouseup":case"dragend":lf=!1,Zg(y,n,g);break;case"selectionchange":if(pC)break;case"keydown":case"keyup":Zg(y,n,g)}var b;if(Vp)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else es?nT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(tT&&n.locale!=="ko"&&(es||C!=="onCompositionStart"?C==="onCompositionEnd"&&es&&(b=eT()):(nr=g,bp="value"in nr?nr.value:nr.textContent,es=!0)),K=Nc(f,C),0<K.length&&(C=new Bg(C,t,null,n,g),y.push({event:C,listeners:K}),b?C.data=b:(b=iT(n),b!==null&&(C.data=b)))),(b=nC?iC(t,n):rC(t,n))&&(f=Nc(f,"onBeforeInput"),0<f.length&&(g=new Bg("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:f}),g.data=b))}mT(y,e)})}function _l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=cl(t,n),o!=null&&i.unshift(_l(t,o,r)),o=cl(t,e),o!=null&&i.push(_l(t,o,r))),t=t.return}return i}function Ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jg(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&f!==null&&(u=f,r?(d=cl(n,o),d!=null&&a.unshift(_l(n,d,u))):r||(d=cl(n,o),d!=null&&a.push(_l(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var yC=/\r\n?/g,vC=/\u0000|\uFFFD/g;function Xg(t){return(typeof t=="string"?t:""+t).replace(yC,`
`).replace(vC,"")}function zu(t,e,n){if(e=Xg(e),Xg(t)!==e&&n)throw Error(ee(425))}function Mc(){}var uf=null,cf=null;function df(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hf=typeof setTimeout=="function"?setTimeout:void 0,TC=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,EC=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(t){return e_.resolve(null).then(t).catch(wC)}:hf;function wC(t){setTimeout(function(){throw t})}function Th(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),fl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);fl(e)}function ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function t_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),ri="__reactFiber$"+Bs,yl="__reactProps$"+Bs,ki="__reactContainer$"+Bs,ff="__reactEvents$"+Bs,xC="__reactListeners$"+Bs,SC="__reactHandles$"+Bs;function Kr(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=t_(t);t!==null;){if(n=t[ri])return n;t=t_(t)}return e}t=n,n=t.parentNode}return null}function Bl(t){return t=t[ri]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Td(t){return t[yl]||null}var pf=[],rs=-1;function Ir(t){return{current:t}}function Ze(t){0>rs||(t.current=pf[rs],pf[rs]=null,rs--)}function We(t,e){rs++,pf[rs]=t.current,t.current=e}var vr={},Ht=Ir(vr),rn=Ir(!1),eo=vr;function xs(t,e){var n=t.type.contextTypes;if(!n)return vr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function on(t){return t=t.childContextTypes,t!=null}function bc(){Ze(rn),Ze(Ht)}function n_(t,e,n){if(Ht.current!==vr)throw Error(ee(168));We(Ht,e),We(rn,n)}function _T(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,lI(t)||"Unknown",r));return rt({},n,i)}function Dc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,eo=Ht.current,We(Ht,t),We(rn,rn.current),!0}function i_(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=_T(t,e,eo),i.__reactInternalMemoizedMergedChildContext=t,Ze(rn),Ze(Ht),We(Ht,t)):Ze(rn),We(rn,n)}var Ii=null,Ed=!1,Eh=!1;function yT(t){Ii===null?Ii=[t]:Ii.push(t)}function IC(t){Ed=!0,yT(t)}function Cr(){if(!Eh&&Ii!==null){Eh=!0;var t=0,e=ze;try{var n=Ii;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ii=null,Ed=!1}catch(r){throw Ii!==null&&(Ii=Ii.slice(t+1)),H0(Rp,Cr),r}finally{ze=e,Eh=!1}}return null}var os=[],ss=0,Lc=null,Vc=0,Sn=[],In=0,to=null,Ci=1,Ai="";function Gr(t,e){os[ss++]=Vc,os[ss++]=Lc,Lc=t,Vc=e}function vT(t,e,n){Sn[In++]=Ci,Sn[In++]=Ai,Sn[In++]=to,to=t;var i=Ci;t=Ai;var r=32-qn(i)-1;i&=~(1<<r),n+=1;var o=32-qn(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ci=1<<32-qn(e)+r|n<<r|i,Ai=o+t}else Ci=1<<o|n<<r|i,Ai=t}function Up(t){t.return!==null&&(Gr(t,1),vT(t,1,0))}function Op(t){for(;t===Lc;)Lc=os[--ss],os[ss]=null,Vc=os[--ss],os[ss]=null;for(;t===to;)to=Sn[--In],Sn[In]=null,Ai=Sn[--In],Sn[In]=null,Ci=Sn[--In],Sn[In]=null}var hn=null,dn=null,je=!1,Gn=null;function TT(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function r_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,dn=ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:Ci,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,dn=null,!0):!1;default:return!1}}function mf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gf(t){if(je){var e=dn;if(e){var n=e;if(!r_(t,e)){if(mf(t))throw Error(ee(418));e=ur(n.nextSibling);var i=hn;e&&r_(t,e)?TT(i,n):(t.flags=t.flags&-4097|2,je=!1,hn=t)}}else{if(mf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,je=!1,hn=t}}}function o_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Gu(t){if(t!==hn)return!1;if(!je)return o_(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!df(t.type,t.memoizedProps)),e&&(e=dn)){if(mf(t))throw ET(),Error(ee(418));for(;e;)TT(t,e),e=ur(e.nextSibling)}if(o_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=hn?ur(t.stateNode.nextSibling):null;return!0}function ET(){for(var t=dn;t;)t=ur(t.nextSibling)}function Ss(){dn=hn=null,je=!1}function Bp(t){Gn===null?Gn=[t]:Gn.push(t)}var CC=Fi.ReactCurrentBatchConfig;function La(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Hu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s_(t){var e=t._init;return e(t._payload)}function wT(t){function e(R,N){if(t){var I=R.deletions;I===null?(R.deletions=[N],R.flags|=16):I.push(N)}}function n(R,N){if(!t)return null;for(;N!==null;)e(R,N),N=N.sibling;return null}function i(R,N){for(R=new Map;N!==null;)N.key!==null?R.set(N.key,N):R.set(N.index,N),N=N.sibling;return R}function r(R,N){return R=fr(R,N),R.index=0,R.sibling=null,R}function o(R,N,I){return R.index=I,t?(I=R.alternate,I!==null?(I=I.index,I<N?(R.flags|=2,N):I):(R.flags|=2,N)):(R.flags|=1048576,N)}function a(R){return t&&R.alternate===null&&(R.flags|=2),R}function u(R,N,I,G){return N===null||N.tag!==6?(N=Ph(I,R.mode,G),N.return=R,N):(N=r(N,I),N.return=R,N)}function d(R,N,I,G){var W=I.type;return W===Xo?g(R,N,I.props.children,G,I.key):N!==null&&(N.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ji&&s_(W)===N.type)?(G=r(N,I.props),G.ref=La(R,N,I),G.return=R,G):(G=gc(I.type,I.key,I.props,null,R.mode,G),G.ref=La(R,N,I),G.return=R,G)}function f(R,N,I,G){return N===null||N.tag!==4||N.stateNode.containerInfo!==I.containerInfo||N.stateNode.implementation!==I.implementation?(N=Rh(I,R.mode,G),N.return=R,N):(N=r(N,I.children||[]),N.return=R,N)}function g(R,N,I,G,W){return N===null||N.tag!==7?(N=Qr(I,R.mode,G,W),N.return=R,N):(N=r(N,I),N.return=R,N)}function y(R,N,I){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ph(""+N,R.mode,I),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Mu:return I=gc(N.type,N.key,N.props,null,R.mode,I),I.ref=La(R,null,N),I.return=R,I;case jo:return N=Rh(N,R.mode,I),N.return=R,N;case ji:var G=N._init;return y(R,G(N._payload),I)}if(Ga(N)||ka(N))return N=Qr(N,R.mode,I,null),N.return=R,N;Hu(R,N)}return null}function v(R,N,I,G){var W=N!==null?N.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return W!==null?null:u(R,N,""+I,G);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Mu:return I.key===W?d(R,N,I,G):null;case jo:return I.key===W?f(R,N,I,G):null;case ji:return W=I._init,v(R,N,W(I._payload),G)}if(Ga(I)||ka(I))return W!==null?null:g(R,N,I,G,null);Hu(R,I)}return null}function S(R,N,I,G,W){if(typeof G=="string"&&G!==""||typeof G=="number")return R=R.get(I)||null,u(N,R,""+G,W);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Mu:return R=R.get(G.key===null?I:G.key)||null,d(N,R,G,W);case jo:return R=R.get(G.key===null?I:G.key)||null,f(N,R,G,W);case ji:var K=G._init;return S(R,N,I,K(G._payload),W)}if(Ga(G)||ka(G))return R=R.get(I)||null,g(N,R,G,W,null);Hu(N,G)}return null}function V(R,N,I,G){for(var W=null,K=null,b=N,C=N=0,k=null;b!==null&&C<I.length;C++){b.index>C?(k=b,b=null):k=b.sibling;var U=v(R,b,I[C],G);if(U===null){b===null&&(b=k);break}t&&b&&U.alternate===null&&e(R,b),N=o(U,N,C),K===null?W=U:K.sibling=U,K=U,b=k}if(C===I.length)return n(R,b),je&&Gr(R,C),W;if(b===null){for(;C<I.length;C++)b=y(R,I[C],G),b!==null&&(N=o(b,N,C),K===null?W=b:K.sibling=b,K=b);return je&&Gr(R,C),W}for(b=i(R,b);C<I.length;C++)k=S(b,R,C,I[C],G),k!==null&&(t&&k.alternate!==null&&b.delete(k.key===null?C:k.key),N=o(k,N,C),K===null?W=k:K.sibling=k,K=k);return t&&b.forEach(function(B){return e(R,B)}),je&&Gr(R,C),W}function M(R,N,I,G){var W=ka(I);if(typeof W!="function")throw Error(ee(150));if(I=W.call(I),I==null)throw Error(ee(151));for(var K=W=null,b=N,C=N=0,k=null,U=I.next();b!==null&&!U.done;C++,U=I.next()){b.index>C?(k=b,b=null):k=b.sibling;var B=v(R,b,U.value,G);if(B===null){b===null&&(b=k);break}t&&b&&B.alternate===null&&e(R,b),N=o(B,N,C),K===null?W=B:K.sibling=B,K=B,b=k}if(U.done)return n(R,b),je&&Gr(R,C),W;if(b===null){for(;!U.done;C++,U=I.next())U=y(R,U.value,G),U!==null&&(N=o(U,N,C),K===null?W=U:K.sibling=U,K=U);return je&&Gr(R,C),W}for(b=i(R,b);!U.done;C++,U=I.next())U=S(b,R,C,U.value,G),U!==null&&(t&&U.alternate!==null&&b.delete(U.key===null?C:U.key),N=o(U,N,C),K===null?W=U:K.sibling=U,K=U);return t&&b.forEach(function(F){return e(R,F)}),je&&Gr(R,C),W}function O(R,N,I,G){if(typeof I=="object"&&I!==null&&I.type===Xo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Mu:e:{for(var W=I.key,K=N;K!==null;){if(K.key===W){if(W=I.type,W===Xo){if(K.tag===7){n(R,K.sibling),N=r(K,I.props.children),N.return=R,R=N;break e}}else if(K.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ji&&s_(W)===K.type){n(R,K.sibling),N=r(K,I.props),N.ref=La(R,K,I),N.return=R,R=N;break e}n(R,K);break}else e(R,K);K=K.sibling}I.type===Xo?(N=Qr(I.props.children,R.mode,G,I.key),N.return=R,R=N):(G=gc(I.type,I.key,I.props,null,R.mode,G),G.ref=La(R,N,I),G.return=R,R=G)}return a(R);case jo:e:{for(K=I.key;N!==null;){if(N.key===K)if(N.tag===4&&N.stateNode.containerInfo===I.containerInfo&&N.stateNode.implementation===I.implementation){n(R,N.sibling),N=r(N,I.children||[]),N.return=R,R=N;break e}else{n(R,N);break}else e(R,N);N=N.sibling}N=Rh(I,R.mode,G),N.return=R,R=N}return a(R);case ji:return K=I._init,O(R,N,K(I._payload),G)}if(Ga(I))return V(R,N,I,G);if(ka(I))return M(R,N,I,G);Hu(R,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,N!==null&&N.tag===6?(n(R,N.sibling),N=r(N,I),N.return=R,R=N):(n(R,N),N=Ph(I,R.mode,G),N.return=R,R=N),a(R)):n(R,N)}return O}var Is=wT(!0),xT=wT(!1),Fc=Ir(null),Uc=null,as=null,zp=null;function Gp(){zp=as=Uc=null}function Hp(t){var e=Fc.current;Ze(Fc),t._currentValue=e}function _f(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function gs(t,e){Uc=t,zp=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(zp!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(Uc===null)throw Error(ee(308));as=t,Uc.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var Wr=null;function qp(t){Wr===null?Wr=[t]:Wr.push(t)}function ST(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,qp(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ni(t,i)}function Ni(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xi=!1;function $p(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ve&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ni(t,n)}return r=i.interleaved,r===null?(e.next=e,qp(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ni(t,n)}function cc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,kp(t,n)}}function a_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,i){var r=t.updateQueue;Xi=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,f=d.next;d.next=null,a===null?o=f:a.next=f,a=d;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;a=0,g=f=d=null,u=o;do{var v=u.lane,S=u.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var V=t,M=u;switch(v=e,S=n,M.tag){case 1:if(V=M.payload,typeof V=="function"){y=V.call(S,y,v);break e}y=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=M.payload,v=typeof V=="function"?V.call(S,y,v):V,v==null)break e;y=rt({},y,v);break e;case 2:Xi=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=S,d=y):g=g.next=S,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(g===null&&(d=y),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);io|=a,t.lanes=a,t.memoizedState=y}}function l_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var zl={},si=Ir(zl),vl=Ir(zl),Tl=Ir(zl);function Jr(t){if(t===zl)throw Error(ee(174));return t}function Kp(t,e){switch(We(Tl,e),We(vl,t),We(si,zl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yh(e,t)}Ze(si),We(si,e)}function Cs(){Ze(si),Ze(vl),Ze(Tl)}function CT(t){Jr(Tl.current);var e=Jr(si.current),n=Yh(e,t.type);e!==n&&(We(vl,t),We(si,n))}function Wp(t){vl.current===t&&(Ze(si),Ze(vl))}var nt=Ir(0);function Bc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wh=[];function Jp(){for(var t=0;t<wh.length;t++)wh[t]._workInProgressVersionPrimary=null;wh.length=0}var dc=Fi.ReactCurrentDispatcher,xh=Fi.ReactCurrentBatchConfig,no=0,it=null,_t=null,It=null,zc=!1,el=!1,El=0,AC=0;function Vt(){throw Error(ee(321))}function Zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function Yp(t,e,n,i,r,o){if(no=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?NC:MC,t=n(i,r),el){o=0;do{if(el=!1,El=0,25<=o)throw Error(ee(301));o+=1,It=_t=null,e.updateQueue=null,dc.current=bC,t=n(i,r)}while(el)}if(dc.current=Gc,e=_t!==null&&_t.next!==null,no=0,It=_t=it=null,zc=!1,e)throw Error(ee(300));return t}function Qp(){var t=El!==0;return El=0,t}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?it.memoizedState=It=t:It=It.next=t,It}function Mn(){if(_t===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=It===null?it.memoizedState:It.next;if(e!==null)It=e,_t=t;else{if(t===null)throw Error(ee(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},It===null?it.memoizedState=It=t:It=It.next=t}return It}function wl(t,e){return typeof e=="function"?e(t):e}function Sh(t){var e=Mn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,f=o;do{var g=f.lane;if((no&g)===g)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var y={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=y,a=i):d=d.next=y,it.lanes|=g,io|=g}f=f.next}while(f!==null&&f!==o);d===null?a=i:d.next=u,Jn(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,it.lanes|=o,io|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ih(t){var e=Mn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Jn(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function AT(){}function PT(t,e){var n=it,i=Mn(),r=e(),o=!Jn(i.memoizedState,r);if(o&&(i.memoizedState=r,nn=!0),i=i.queue,jp(NT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,xl(9,kT.bind(null,n,i,r,e),void 0,null),Ct===null)throw Error(ee(349));no&30||RT(n,e,r)}return r}function RT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kT(t,e,n,i){e.value=n,e.getSnapshot=i,MT(e)&&bT(t)}function NT(t,e,n){return n(function(){MT(e)&&bT(t)})}function MT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function bT(t){var e=Ni(t,1);e!==null&&$n(e,t,1,-1)}function u_(t){var e=ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:t},e.queue=t,t=t.dispatch=kC.bind(null,it,t),[e.memoizedState,t]}function xl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function DT(){return Mn().memoizedState}function hc(t,e,n,i){var r=ni();it.flags|=t,r.memoizedState=xl(1|e,n,void 0,i===void 0?null:i)}function wd(t,e,n,i){var r=Mn();i=i===void 0?null:i;var o=void 0;if(_t!==null){var a=_t.memoizedState;if(o=a.destroy,i!==null&&Zp(i,a.deps)){r.memoizedState=xl(e,n,o,i);return}}it.flags|=t,r.memoizedState=xl(1|e,n,o,i)}function c_(t,e){return hc(8390656,8,t,e)}function jp(t,e){return wd(2048,8,t,e)}function LT(t,e){return wd(4,2,t,e)}function VT(t,e){return wd(4,4,t,e)}function FT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UT(t,e,n){return n=n!=null?n.concat([t]):null,wd(4,4,FT.bind(null,e,t),n)}function Xp(){}function OT(t,e){var n=Mn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Zp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function BT(t,e){var n=Mn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Zp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function zT(t,e,n){return no&21?(Jn(n,e)||(n=K0(),it.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function PC(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=xh.transition;xh.transition={};try{t(!1),e()}finally{ze=n,xh.transition=i}}function GT(){return Mn().memoizedState}function RC(t,e,n){var i=hr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},HT(t))qT(e,n);else if(n=ST(t,e,n,i),n!==null){var r=Jt();$n(n,t,i,r),$T(n,e,i)}}function kC(t,e,n){var i=hr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(HT(t))qT(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Jn(u,a)){var d=e.interleaved;d===null?(r.next=r,qp(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=ST(t,e,r,i),n!==null&&(r=Jt(),$n(n,t,i,r),$T(n,e,i))}}function HT(t){var e=t.alternate;return t===it||e!==null&&e===it}function qT(t,e){el=zc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $T(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,kp(t,n)}}var Gc={readContext:Nn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},NC={readContext:Nn,useCallback:function(t,e){return ni().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:c_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hc(4194308,4,FT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var n=ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ni();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=RC.bind(null,it,t),[i.memoizedState,t]},useRef:function(t){var e=ni();return t={current:t},e.memoizedState=t},useState:u_,useDebugValue:Xp,useDeferredValue:function(t){return ni().memoizedState=t},useTransition:function(){var t=u_(!1),e=t[0];return t=PC.bind(null,t[1]),ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=it,r=ni();if(je){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Ct===null)throw Error(ee(349));no&30||RT(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,c_(NT.bind(null,i,o,t),[t]),i.flags|=2048,xl(9,kT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ni(),e=Ct.identifierPrefix;if(je){var n=Ai,i=Ci;n=(i&~(1<<32-qn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=El++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MC={readContext:Nn,useCallback:OT,useContext:Nn,useEffect:jp,useImperativeHandle:UT,useInsertionEffect:LT,useLayoutEffect:VT,useMemo:BT,useReducer:Sh,useRef:DT,useState:function(){return Sh(wl)},useDebugValue:Xp,useDeferredValue:function(t){var e=Mn();return zT(e,_t.memoizedState,t)},useTransition:function(){var t=Sh(wl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:AT,useSyncExternalStore:PT,useId:GT,unstable_isNewReconciler:!1},bC={readContext:Nn,useCallback:OT,useContext:Nn,useEffect:jp,useImperativeHandle:UT,useInsertionEffect:LT,useLayoutEffect:VT,useMemo:BT,useReducer:Ih,useRef:DT,useState:function(){return Ih(wl)},useDebugValue:Xp,useDeferredValue:function(t){var e=Mn();return _t===null?e.memoizedState=t:zT(e,_t.memoizedState,t)},useTransition:function(){var t=Ih(wl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:AT,useSyncExternalStore:PT,useId:GT,unstable_isNewReconciler:!1};function Bn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xd={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=hr(t),o=Pi(i,r);o.payload=e,n!=null&&(o.callback=n),e=cr(t,o,r),e!==null&&($n(e,t,r,i),cc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=hr(t),o=Pi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=cr(t,o,r),e!==null&&($n(e,t,r,i),cc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=hr(t),r=Pi(n,i);r.tag=2,e!=null&&(r.callback=e),e=cr(t,r,i),e!==null&&($n(e,t,i,n),cc(e,t,i))}};function d_(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!ml(n,i)||!ml(r,o):!0}function KT(t,e,n){var i=!1,r=vr,o=e.contextType;return typeof o=="object"&&o!==null?o=Nn(o):(r=on(e)?eo:Ht.current,i=e.contextTypes,o=(i=i!=null)?xs(t,r):vr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function h_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&xd.enqueueReplaceState(e,e.state,null)}function vf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},$p(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Nn(o):(o=on(e)?eo:Ht.current,r.context=xs(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(yf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&xd.enqueueReplaceState(r,r.state,null),Oc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function As(t,e){try{var n="",i=e;do n+=aI(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Ch(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DC=typeof WeakMap=="function"?WeakMap:Map;function WT(t,e,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){qc||(qc=!0,kf=i),Tf(t,e)},n}function JT(t,e,n){n=Pi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Tf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Tf(t,e),typeof i!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function f_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new DC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=JC.bind(null,t,e,n),e.then(t,t))}function p_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pi(-1,1),e.tag=2,cr(n,e,1))),n.lanes|=1),t)}var LC=Fi.ReactCurrentOwner,nn=!1;function Wt(t,e,n,i){e.child=t===null?xT(e,null,n,i):Is(e,t.child,n,i)}function g_(t,e,n,i,r){n=n.render;var o=e.ref;return gs(e,r),i=Yp(t,e,n,i,o,r),n=Qp(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Mi(t,e,r)):(je&&n&&Up(e),e.flags|=1,Wt(t,e,i,r),e.child)}function __(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!am(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ZT(t,e,o,i,r)):(t=gc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ml,n(a,i)&&t.ref===e.ref)return Mi(t,e,r)}return e.flags|=1,t=fr(o,i),t.ref=e.ref,t.return=e,e.child=t}function ZT(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(ml(o,i)&&t.ref===e.ref)if(nn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Mi(t,e,r)}return Ef(t,e,n,i,r)}function YT(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(us,cn),cn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(us,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,We(us,cn),cn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,We(us,cn),cn|=i;return Wt(t,e,r,n),e.child}function QT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ef(t,e,n,i,r){var o=on(n)?eo:Ht.current;return o=xs(e,o),gs(e,r),n=Yp(t,e,n,i,o,r),i=Qp(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Mi(t,e,r)):(je&&i&&Up(e),e.flags|=1,Wt(t,e,n,r),e.child)}function y_(t,e,n,i,r){if(on(n)){var o=!0;Dc(e)}else o=!1;if(gs(e,r),e.stateNode===null)fc(t,e),KT(e,n,i),vf(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Nn(f):(f=on(n)?eo:Ht.current,f=xs(e,f));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==f)&&h_(e,a,i,f),Xi=!1;var v=e.memoizedState;a.state=v,Oc(e,i,a,r),d=e.memoizedState,u!==i||v!==d||rn.current||Xi?(typeof g=="function"&&(yf(e,n,g,i),d=e.memoizedState),(u=Xi||d_(e,n,u,i,v,d,f))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,IT(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Bn(e.type,u),a.props=f,y=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Nn(d):(d=on(n)?eo:Ht.current,d=xs(e,d));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||v!==d)&&h_(e,a,i,d),Xi=!1,v=e.memoizedState,a.state=v,Oc(e,i,a,r);var V=e.memoizedState;u!==y||v!==V||rn.current||Xi?(typeof S=="function"&&(yf(e,n,S,i),V=e.memoizedState),(f=Xi||d_(e,n,f,i,v,V,d)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,V,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,V,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=V),a.props=i,a.state=V,a.context=d,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return wf(t,e,n,i,o,r)}function wf(t,e,n,i,r,o){QT(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&i_(e,n,!1),Mi(t,e,o);i=e.stateNode,LC.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Is(e,t.child,null,o),e.child=Is(e,null,u,o)):Wt(t,e,u,o),e.memoizedState=i.state,r&&i_(e,n,!0),e.child}function jT(t){var e=t.stateNode;e.pendingContext?n_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n_(t,e.context,!1),Kp(t,e.containerInfo)}function v_(t,e,n,i,r){return Ss(),Bp(r),e.flags|=256,Wt(t,e,n,i),e.child}var xf={dehydrated:null,treeContext:null,retryLane:0};function Sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function XT(t,e,n){var i=e.pendingProps,r=nt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),We(nt,r&1),t===null)return gf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Cd(a,i,0,null),t=Qr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Sf(n),e.memoizedState=xf,t):em(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return VC(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=fr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=fr(u,o):(o=Qr(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Sf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=xf,i}return o=t.child,t=o.sibling,i=fr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function em(t,e){return e=Cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,n,i){return i!==null&&Bp(i),Is(e,t.child,null,n),t=em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VC(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Ch(Error(ee(422))),qu(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Cd({mode:"visible",children:i.children},r,0,null),o=Qr(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Is(e,t.child,null,a),e.child.memoizedState=Sf(a),e.memoizedState=xf,o);if(!(e.mode&1))return qu(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=Ch(o,i,void 0),qu(t,e,a,i)}if(u=(a&t.childLanes)!==0,nn||u){if(i=Ct,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ni(t,r),$n(i,t,r,-1))}return sm(),i=Ch(Error(ee(421))),qu(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=ZC.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,dn=ur(r.nextSibling),hn=e,je=!0,Gn=null,t!==null&&(Sn[In++]=Ci,Sn[In++]=Ai,Sn[In++]=to,Ci=t.id,Ai=t.overflow,to=e),e=em(e,i.children),e.flags|=4096,e)}function T_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),_f(t.return,e,n)}function Ah(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function eE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Wt(t,e,i.children,n),i=nt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T_(t,n,e);else if(t.tag===19)T_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(We(nt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Bc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ah(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Bc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ah(e,!0,n,null,o);break;case"together":Ah(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FC(t,e,n){switch(e.tag){case 3:jT(e),Ss();break;case 5:CT(e);break;case 1:on(e.type)&&Dc(e);break;case 4:Kp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;We(Fc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(We(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?XT(t,e,n):(We(nt,nt.current&1),t=Mi(t,e,n),t!==null?t.sibling:null);We(nt,nt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return eE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),We(nt,nt.current),i)break;return null;case 22:case 23:return e.lanes=0,YT(t,e,n)}return Mi(t,e,n)}var tE,If,nE,iE;tE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};If=function(){};nE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Jr(si.current);var o=null;switch(n){case"input":r=Kh(t,r),i=Kh(t,i),o=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),o=[];break;case"textarea":r=Zh(t,r),i=Zh(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Mc)}Qh(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ll.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var d=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ll.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Je("scroll",t),o||u===d||(o=[])):(o=o||[]).push(f,d))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};iE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Va(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function UC(t,e,n){var i=e.pendingProps;switch(Op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return on(e.type)&&bc(),Ft(e),null;case 3:return i=e.stateNode,Cs(),Ze(rn),Ze(Ht),Jp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(bf(Gn),Gn=null))),If(t,e),Ft(e),null;case 5:Wp(e);var r=Jr(Tl.current);if(n=e.type,t!==null&&e.stateNode!=null)nE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Ft(e),null}if(t=Jr(si.current),Gu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ri]=e,i[yl]=o,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(r=0;r<qa.length;r++)Je(qa[r],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Rg(i,o),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Je("invalid",i);break;case"textarea":Ng(i,o),Je("invalid",i)}Qh(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&zu(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&zu(i.textContent,u,t),r=["children",""+u]):ll.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Je("scroll",i)}switch(n){case"input":bu(i),kg(i,o,!0);break;case"textarea":bu(i),Mg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Mc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=N0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ri]=e,t[yl]=i,tE(t,e,!1,!1),e.stateNode=t;e:{switch(a=jh(n,i),n){case"dialog":Je("cancel",t),Je("close",t),r=i;break;case"iframe":case"object":case"embed":Je("load",t),r=i;break;case"video":case"audio":for(r=0;r<qa.length;r++)Je(qa[r],t);r=i;break;case"source":Je("error",t),r=i;break;case"img":case"image":case"link":Je("error",t),Je("load",t),r=i;break;case"details":Je("toggle",t),r=i;break;case"input":Rg(t,i),r=Kh(t,i),Je("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Je("invalid",t);break;case"textarea":Ng(t,i),r=Zh(t,i),Je("invalid",t);break;default:r=i}Qh(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?D0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&M0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ul(t,d):typeof d=="number"&&ul(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ll.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Je("scroll",t):d!=null&&Sp(t,o,d,a))}switch(n){case"input":bu(t),kg(t,i,!1);break;case"textarea":bu(t),Mg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+yr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?hs(t,!!i.multiple,o,!1):i.defaultValue!=null&&hs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Mc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)iE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Jr(Tl.current),Jr(si.current),Gu(e)){if(i=e.stateNode,n=e.memoizedProps,i[ri]=e,(o=i.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:zu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ri]=e,e.stateNode=i}return Ft(e),null;case 13:if(Ze(nt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&dn!==null&&e.mode&1&&!(e.flags&128))ET(),Ss(),e.flags|=98560,o=!1;else if(o=Gu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[ri]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),o=!1}else Gn!==null&&(bf(Gn),Gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?vt===0&&(vt=3):sm())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Cs(),If(t,e),t===null&&gl(e.stateNode.containerInfo),Ft(e),null;case 10:return Hp(e.type._context),Ft(e),null;case 17:return on(e.type)&&bc(),Ft(e),null;case 19:if(Ze(nt),o=e.memoizedState,o===null)return Ft(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Va(o,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Bc(t),a!==null){for(e.flags|=128,Va(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(nt,nt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ct()>Ps&&(e.flags|=128,i=!0,Va(o,!1),e.lanes=4194304)}else{if(!i)if(t=Bc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!je)return Ft(e),null}else 2*ct()-o.renderingStartTime>Ps&&n!==1073741824&&(e.flags|=128,i=!0,Va(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ct(),e.sibling=null,n=nt.current,We(nt,i?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return om(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?cn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function OC(t,e){switch(Op(e),e.tag){case 1:return on(e.type)&&bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cs(),Ze(rn),Ze(Ht),Jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wp(e),null;case 13:if(Ze(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(nt),null;case 4:return Cs(),null;case 10:return Hp(e.type._context),null;case 22:case 23:return om(),null;case 24:return null;default:return null}}var $u=!1,Bt=!1,BC=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function Cf(t,e,n){try{n()}catch(i){at(t,e,i)}}var E_=!1;function zC(t,e){if(uf=Rc,t=lT(),Fp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,f=0,g=0,y=t,v=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(d=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++g===i&&(d=a),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(cf={focusedElem:t,selectionRange:n},Rc=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var M=V.memoizedProps,O=V.memoizedState,R=e.stateNode,N=R.getSnapshotBeforeUpdate(e.elementType===e.type?M:Bn(e.type,M),O);R.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(G){at(e,e.return,G)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return V=E_,E_=!1,V}function tl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Cf(e,n,o)}r=r.next}while(r!==i)}}function Sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Af(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rE(t){var e=t.alternate;e!==null&&(t.alternate=null,rE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[yl],delete e[ff],delete e[xC],delete e[SC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oE(t){return t.tag===5||t.tag===3||t.tag===4}function w_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mc));else if(i!==4&&(t=t.child,t!==null))for(Pf(t,e,n),t=t.sibling;t!==null;)Pf(t,e,n),t=t.sibling}function Rf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}var Rt=null,zn=!1;function Qi(t,e,n){for(n=n.child;n!==null;)sE(t,e,n),n=n.sibling}function sE(t,e,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(gd,n)}catch{}switch(n.tag){case 5:Bt||ls(n,e);case 6:var i=Rt,r=zn;Rt=null,Qi(t,e,n),Rt=i,zn=r,Rt!==null&&(zn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(zn?(t=Rt,n=n.stateNode,t.nodeType===8?Th(t.parentNode,n):t.nodeType===1&&Th(t,n),fl(t)):Th(Rt,n.stateNode));break;case 4:i=Rt,r=zn,Rt=n.stateNode.containerInfo,zn=!0,Qi(t,e,n),Rt=i,zn=r;break;case 0:case 11:case 14:case 15:if(!Bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Cf(n,e,a),r=r.next}while(r!==i)}Qi(t,e,n);break;case 1:if(!Bt&&(ls(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Qi(t,e,n);break;case 21:Qi(t,e,n);break;case 22:n.mode&1?(Bt=(i=Bt)||n.memoizedState!==null,Qi(t,e,n),Bt=i):Qi(t,e,n);break;default:Qi(t,e,n)}}function x_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BC),e.forEach(function(i){var r=YC.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Rt=u.stateNode,zn=!1;break e;case 3:Rt=u.stateNode.containerInfo,zn=!0;break e;case 4:Rt=u.stateNode.containerInfo,zn=!0;break e}u=u.return}if(Rt===null)throw Error(ee(160));sE(o,a,r),Rt=null,zn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aE(e,t),e=e.sibling}function aE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),ti(t),i&4){try{tl(3,t,t.return),Sd(3,t)}catch(M){at(t,t.return,M)}try{tl(5,t,t.return)}catch(M){at(t,t.return,M)}}break;case 1:On(e,t),ti(t),i&512&&n!==null&&ls(n,n.return);break;case 5:if(On(e,t),ti(t),i&512&&n!==null&&ls(n,n.return),t.flags&32){var r=t.stateNode;try{ul(r,"")}catch(M){at(t,t.return,M)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&R0(r,o),jh(u,a);var f=jh(u,o);for(a=0;a<d.length;a+=2){var g=d[a],y=d[a+1];g==="style"?D0(r,y):g==="dangerouslySetInnerHTML"?M0(r,y):g==="children"?ul(r,y):Sp(r,g,y,f)}switch(u){case"input":Wh(r,o);break;case"textarea":k0(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?hs(r,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?hs(r,!!o.multiple,o.defaultValue,!0):hs(r,!!o.multiple,o.multiple?[]:"",!1))}r[yl]=o}catch(M){at(t,t.return,M)}}break;case 6:if(On(e,t),ti(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(M){at(t,t.return,M)}}break;case 3:if(On(e,t),ti(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(e.containerInfo)}catch(M){at(t,t.return,M)}break;case 4:On(e,t),ti(t);break;case 13:On(e,t),ti(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(im=ct())),i&4&&x_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(f=Bt)||g,On(e,t),Bt=f):On(e,t),ti(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(oe=t,g=t.child;g!==null;){for(y=oe=g;oe!==null;){switch(v=oe,S=v.child,v.tag){case 0:case 11:case 14:case 15:tl(4,v,v.return);break;case 1:ls(v,v.return);var V=v.stateNode;if(typeof V.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(M){at(i,n,M)}}break;case 5:ls(v,v.return);break;case 22:if(v.memoizedState!==null){I_(y);continue}}S!==null?(S.return=v,oe=S):I_(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{r=y.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=b0("display",a))}catch(M){at(t,t.return,M)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(M){at(t,t.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:On(e,t),ti(t),i&4&&x_(t);break;case 21:break;default:On(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oE(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ul(r,""),i.flags&=-33);var o=w_(t);Rf(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=w_(t);Pf(t,u,a);break;default:throw Error(ee(161))}}catch(d){at(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GC(t,e,n){oe=t,lE(t)}function lE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||$u;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||Bt;u=$u;var f=Bt;if($u=a,(Bt=d)&&!f)for(oe=r;oe!==null;)a=oe,d=a.child,a.tag===22&&a.memoizedState!==null?C_(r):d!==null?(d.return=a,oe=d):C_(r);for(;o!==null;)oe=o,lE(o),o=o.sibling;oe=r,$u=u,Bt=f}S_(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):S_(t)}}function S_(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Sd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&l_(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l_(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&fl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Bt||e.flags&512&&Af(e)}catch(v){at(e,e.return,v)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function I_(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function C_(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sd(4,e)}catch(d){at(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){at(e,r,d)}}var o=e.return;try{Af(e)}catch(d){at(e,o,d)}break;case 5:var a=e.return;try{Af(e)}catch(d){at(e,a,d)}}}catch(d){at(e,e.return,d)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var HC=Math.ceil,Hc=Fi.ReactCurrentDispatcher,tm=Fi.ReactCurrentOwner,Pn=Fi.ReactCurrentBatchConfig,Ve=0,Ct=null,mt=null,Mt=0,cn=0,us=Ir(0),vt=0,Sl=null,io=0,Id=0,nm=0,nl=null,tn=null,im=0,Ps=1/0,Si=null,qc=!1,kf=null,dr=null,Ku=!1,ir=null,$c=0,il=0,Nf=null,pc=-1,mc=0;function Jt(){return Ve&6?ct():pc!==-1?pc:pc=ct()}function hr(t){return t.mode&1?Ve&2&&Mt!==0?Mt&-Mt:CC.transition!==null?(mc===0&&(mc=K0()),mc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:X0(t.type)),t):1}function $n(t,e,n,i){if(50<il)throw il=0,Nf=null,Error(ee(185));Ul(t,n,i),(!(Ve&2)||t!==Ct)&&(t===Ct&&(!(Ve&2)&&(Id|=n),vt===4&&tr(t,Mt)),sn(t,i),n===1&&Ve===0&&!(e.mode&1)&&(Ps=ct()+500,Ed&&Cr()))}function sn(t,e){var n=t.callbackNode;CI(t,e);var i=Pc(t,t===Ct?Mt:0);if(i===0)n!==null&&Lg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Lg(n),e===1)t.tag===0?IC(A_.bind(null,t)):yT(A_.bind(null,t)),EC(function(){!(Ve&6)&&Cr()}),n=null;else{switch(W0(i)){case 1:n=Rp;break;case 4:n=q0;break;case 16:n=Ac;break;case 536870912:n=$0;break;default:n=Ac}n=gE(n,uE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uE(t,e){if(pc=-1,mc=0,Ve&6)throw Error(ee(327));var n=t.callbackNode;if(_s()&&t.callbackNode!==n)return null;var i=Pc(t,t===Ct?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Kc(t,i);else{e=i;var r=Ve;Ve|=2;var o=dE();(Ct!==t||Mt!==e)&&(Si=null,Ps=ct()+500,Yr(t,e));do try{KC();break}catch(u){cE(t,u)}while(!0);Gp(),Hc.current=o,Ve=r,mt!==null?e=0:(Ct=null,Mt=0,e=vt)}if(e!==0){if(e===2&&(r=rf(t),r!==0&&(i=r,e=Mf(t,r))),e===1)throw n=Sl,Yr(t,0),tr(t,i),sn(t,ct()),n;if(e===6)tr(t,i);else{if(r=t.current.alternate,!(i&30)&&!qC(r)&&(e=Kc(t,i),e===2&&(o=rf(t),o!==0&&(i=o,e=Mf(t,o))),e===1))throw n=Sl,Yr(t,0),tr(t,i),sn(t,ct()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Hr(t,tn,Si);break;case 3:if(tr(t,i),(i&130023424)===i&&(e=im+500-ct(),10<e)){if(Pc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=hf(Hr.bind(null,t,tn,Si),e);break}Hr(t,tn,Si);break;case 4:if(tr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-qn(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ct()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*HC(i/1960))-i,10<i){t.timeoutHandle=hf(Hr.bind(null,t,tn,Si),i);break}Hr(t,tn,Si);break;case 5:Hr(t,tn,Si);break;default:throw Error(ee(329))}}}return sn(t,ct()),t.callbackNode===n?uE.bind(null,t):null}function Mf(t,e){var n=nl;return t.current.memoizedState.isDehydrated&&(Yr(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=tn,tn=n,e!==null&&bf(e)),t}function bf(t){tn===null?tn=t:tn.push.apply(tn,t)}function qC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Jn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~nm,e&=~Id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),i=1<<n;t[n]=-1,e&=~i}}function A_(t){if(Ve&6)throw Error(ee(327));_s();var e=Pc(t,0);if(!(e&1))return sn(t,ct()),null;var n=Kc(t,e);if(t.tag!==0&&n===2){var i=rf(t);i!==0&&(e=i,n=Mf(t,i))}if(n===1)throw n=Sl,Yr(t,0),tr(t,e),sn(t,ct()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,tn,Si),sn(t,ct()),null}function rm(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(Ps=ct()+500,Ed&&Cr())}}function ro(t){ir!==null&&ir.tag===0&&!(Ve&6)&&_s();var e=Ve;Ve|=1;var n=Pn.transition,i=ze;try{if(Pn.transition=null,ze=1,t)return t()}finally{ze=i,Pn.transition=n,Ve=e,!(Ve&6)&&Cr()}}function om(){cn=us.current,Ze(us)}function Yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TC(n)),mt!==null)for(n=mt.return;n!==null;){var i=n;switch(Op(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&bc();break;case 3:Cs(),Ze(rn),Ze(Ht),Jp();break;case 5:Wp(i);break;case 4:Cs();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:Hp(i.type._context);break;case 22:case 23:om()}n=n.return}if(Ct=t,mt=t=fr(t.current,null),Mt=cn=e,vt=0,Sl=null,nm=Id=io=0,tn=nl=null,Wr!==null){for(e=0;e<Wr.length;e++)if(n=Wr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Wr=null}return t}function cE(t,e){do{var n=mt;try{if(Gp(),dc.current=Gc,zc){for(var i=it.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}zc=!1}if(no=0,It=_t=it=null,el=!1,El=0,tm.current=null,n===null||n.return===null){vt=1,Sl=e,mt=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=Mt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=p_(a);if(S!==null){S.flags&=-257,m_(S,a,u,o,e),S.mode&1&&f_(o,f,e),e=S,d=f;var V=e.updateQueue;if(V===null){var M=new Set;M.add(d),e.updateQueue=M}else V.add(d);break e}else{if(!(e&1)){f_(o,f,e),sm();break e}d=Error(ee(426))}}else if(je&&u.mode&1){var O=p_(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),m_(O,a,u,o,e),Bp(As(d,u));break e}}o=d=As(d,u),vt!==4&&(vt=2),nl===null?nl=[o]:nl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=WT(o,d,e);a_(o,R);break e;case 1:u=d;var N=o.type,I=o.stateNode;if(!(o.flags&128)&&(typeof N.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(dr===null||!dr.has(I)))){o.flags|=65536,e&=-e,o.lanes|=e;var G=JT(o,u,e);a_(o,G);break e}}o=o.return}while(o!==null)}fE(n)}catch(W){e=W,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function dE(){var t=Hc.current;return Hc.current=Gc,t===null?Gc:t}function sm(){(vt===0||vt===3||vt===2)&&(vt=4),Ct===null||!(io&268435455)&&!(Id&268435455)||tr(Ct,Mt)}function Kc(t,e){var n=Ve;Ve|=2;var i=dE();(Ct!==t||Mt!==e)&&(Si=null,Yr(t,e));do try{$C();break}catch(r){cE(t,r)}while(!0);if(Gp(),Ve=n,Hc.current=i,mt!==null)throw Error(ee(261));return Ct=null,Mt=0,vt}function $C(){for(;mt!==null;)hE(mt)}function KC(){for(;mt!==null&&!_I();)hE(mt)}function hE(t){var e=mE(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?fE(t):mt=e,tm.current=null}function fE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OC(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,mt=null;return}}else if(n=UC(n,e,cn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);vt===0&&(vt=5)}function Hr(t,e,n){var i=ze,r=Pn.transition;try{Pn.transition=null,ze=1,WC(t,e,n,i)}finally{Pn.transition=r,ze=i}return null}function WC(t,e,n,i){do _s();while(ir!==null);if(Ve&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(AI(t,o),t===Ct&&(mt=Ct=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ku||(Ku=!0,gE(Ac,function(){return _s(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pn.transition,Pn.transition=null;var a=ze;ze=1;var u=Ve;Ve|=4,tm.current=null,zC(t,n),aE(n,t),fC(cf),Rc=!!uf,cf=uf=null,t.current=n,GC(n),yI(),Ve=u,ze=a,Pn.transition=o}else t.current=n;if(Ku&&(Ku=!1,ir=t,$c=r),o=t.pendingLanes,o===0&&(dr=null),EI(n.stateNode),sn(t,ct()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(qc)throw qc=!1,t=kf,kf=null,t;return $c&1&&t.tag!==0&&_s(),o=t.pendingLanes,o&1?t===Nf?il++:(il=0,Nf=t):il=0,Cr(),null}function _s(){if(ir!==null){var t=W0($c),e=Pn.transition,n=ze;try{if(Pn.transition=null,ze=16>t?16:t,ir===null)var i=!1;else{if(t=ir,ir=null,$c=0,Ve&6)throw Error(ee(331));var r=Ve;for(Ve|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(oe=f;oe!==null;){var g=oe;switch(g.tag){case 0:case 11:case 15:tl(8,g,o)}var y=g.child;if(y!==null)y.return=g,oe=y;else for(;oe!==null;){g=oe;var v=g.sibling,S=g.return;if(rE(g),g===f){oe=null;break}if(v!==null){v.return=S,oe=v;break}oe=S}}}var V=o.alternate;if(V!==null){var M=V.child;if(M!==null){V.child=null;do{var O=M.sibling;M.sibling=null,M=O}while(M!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,oe=R;break e}oe=o.return}}var N=t.current;for(oe=N;oe!==null;){a=oe;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,oe=I;else e:for(a=N;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Sd(9,u)}}catch(W){at(u,u.return,W)}if(u===a){oe=null;break e}var G=u.sibling;if(G!==null){G.return=u.return,oe=G;break e}oe=u.return}}if(Ve=r,Cr(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(gd,t)}catch{}i=!0}return i}finally{ze=n,Pn.transition=e}}return!1}function P_(t,e,n){e=As(n,e),e=WT(t,e,1),t=cr(t,e,1),e=Jt(),t!==null&&(Ul(t,1,e),sn(t,e))}function at(t,e,n){if(t.tag===3)P_(t,t,n);else for(;e!==null;){if(e.tag===3){P_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dr===null||!dr.has(i))){t=As(n,t),t=JT(e,t,1),e=cr(e,t,1),t=Jt(),e!==null&&(Ul(e,1,t),sn(e,t));break}}e=e.return}}function JC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Mt&n)===n&&(vt===4||vt===3&&(Mt&130023424)===Mt&&500>ct()-im?Yr(t,0):nm|=n),sn(t,e)}function pE(t,e){e===0&&(t.mode&1?(e=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):e=1);var n=Jt();t=Ni(t,e),t!==null&&(Ul(t,e,n),sn(t,n))}function ZC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pE(t,n)}function YC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),pE(t,n)}var mE;mE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,FC(t,e,n);nn=!!(t.flags&131072)}else nn=!1,je&&e.flags&1048576&&vT(e,Vc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;fc(t,e),t=e.pendingProps;var r=xs(e,Ht.current);gs(e,n),r=Yp(null,e,i,t,r,n);var o=Qp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(i)?(o=!0,Dc(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$p(e),r.updater=xd,e.stateNode=r,r._reactInternals=e,vf(e,i,t,n),e=wf(null,e,i,!0,o,n)):(e.tag=0,je&&o&&Up(e),Wt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=jC(i),t=Bn(i,t),r){case 0:e=Ef(null,e,i,t,n);break e;case 1:e=y_(null,e,i,t,n);break e;case 11:e=g_(null,e,i,t,n);break e;case 14:e=__(null,e,i,Bn(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),Ef(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),y_(t,e,i,r,n);case 3:e:{if(jT(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,IT(t,e),Oc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=As(Error(ee(423)),e),e=v_(t,e,i,n,r);break e}else if(i!==r){r=As(Error(ee(424)),e),e=v_(t,e,i,n,r);break e}else for(dn=ur(e.stateNode.containerInfo.firstChild),hn=e,je=!0,Gn=null,n=xT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),i===r){e=Mi(t,e,n);break e}Wt(t,e,i,n)}e=e.child}return e;case 5:return CT(e),t===null&&gf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,df(i,r)?a=null:o!==null&&df(i,o)&&(e.flags|=32),QT(t,e),Wt(t,e,a,n),e.child;case 6:return t===null&&gf(e),null;case 13:return XT(t,e,n);case 4:return Kp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Is(e,null,i,n):Wt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),g_(t,e,i,r,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,We(Fc,i._currentValue),i._currentValue=a,o!==null)if(Jn(o.value,a)){if(o.children===r.children&&!rn.current){e=Mi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Pi(-1,n&-n),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?d.next=d:(d.next=g.next,g.next=d),f.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),_f(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),_f(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Wt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,gs(e,n),r=Nn(r),i=i(r),e.flags|=1,Wt(t,e,i,n),e.child;case 14:return i=e.type,r=Bn(i,e.pendingProps),r=Bn(i.type,r),__(t,e,i,r,n);case 15:return ZT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),fc(t,e),e.tag=1,on(i)?(t=!0,Dc(e)):t=!1,gs(e,n),KT(e,i,r),vf(e,i,r,n),wf(null,e,i,!0,t,n);case 19:return eE(t,e,n);case 22:return YT(t,e,n)}throw Error(ee(156,e.tag))};function gE(t,e){return H0(t,e)}function QC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,i){return new QC(t,e,n,i)}function am(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jC(t){if(typeof t=="function")return am(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cp)return 11;if(t===Ap)return 14}return 2}function fr(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")am(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xo:return Qr(n.children,r,o,e);case Ip:a=8,r|=8;break;case Gh:return t=An(12,n,e,r|2),t.elementType=Gh,t.lanes=o,t;case Hh:return t=An(13,n,e,r),t.elementType=Hh,t.lanes=o,t;case qh:return t=An(19,n,e,r),t.elementType=qh,t.lanes=o,t;case C0:return Cd(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S0:a=10;break e;case I0:a=9;break e;case Cp:a=11;break e;case Ap:a=14;break e;case ji:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=An(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Qr(t,e,n,i){return t=An(7,t,i,e),t.lanes=n,t}function Cd(t,e,n,i){return t=An(22,t,i,e),t.elementType=C0,t.lanes=n,t.stateNode={isHidden:!1},t}function Ph(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function Rh(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XC(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uh(0),this.expirationTimes=uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function lm(t,e,n,i,r,o,a,u,d){return t=new XC(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=An(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$p(o),t}function eA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function _E(t){if(!t)return vr;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(on(n))return _T(t,n,e)}return e}function yE(t,e,n,i,r,o,a,u,d){return t=lm(n,i,!0,t,r,o,a,u,d),t.context=_E(null),n=t.current,i=Jt(),r=hr(n),o=Pi(i,r),o.callback=e??null,cr(n,o,r),t.current.lanes=r,Ul(t,r,i),sn(t,i),t}function Ad(t,e,n,i){var r=e.current,o=Jt(),a=hr(r);return n=_E(n),e.context===null?e.context=n:e.pendingContext=n,e=Pi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=cr(r,e,a),t!==null&&($n(t,r,a,o),cc(t,r,a)),a}function Wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function um(t,e){R_(t,e),(t=t.alternate)&&R_(t,e)}function tA(){return null}var vE=typeof reportError=="function"?reportError:function(t){console.error(t)};function cm(t){this._internalRoot=t}Pd.prototype.render=cm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Ad(t,e,null,null)};Pd.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){Ad(null,t,null,null)}),e[ki]=null}};function Pd(t){this._internalRoot=t}Pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&j0(t)}};function dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k_(){}function nA(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Wc(a);o.call(f)}}var a=yE(e,i,t,0,null,!1,!1,"",k_);return t._reactRootContainer=a,t[ki]=a.current,gl(t.nodeType===8?t.parentNode:t),ro(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Wc(d);u.call(f)}}var d=lm(t,0,!1,null,null,!1,!1,"",k_);return t._reactRootContainer=d,t[ki]=d.current,gl(t.nodeType===8?t.parentNode:t),ro(function(){Ad(e,d,n,i)}),d}function kd(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=Wc(a);u.call(d)}}Ad(e,a,t,r)}else a=nA(n,e,t,r,i);return Wc(a)}J0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ha(e.pendingLanes);n!==0&&(kp(e,n|1),sn(e,ct()),!(Ve&6)&&(Ps=ct()+500,Cr()))}break;case 13:ro(function(){var i=Ni(t,1);if(i!==null){var r=Jt();$n(i,t,1,r)}}),um(t,1)}};Np=function(t){if(t.tag===13){var e=Ni(t,134217728);if(e!==null){var n=Jt();$n(e,t,134217728,n)}um(t,134217728)}};Z0=function(t){if(t.tag===13){var e=hr(t),n=Ni(t,e);if(n!==null){var i=Jt();$n(n,t,e,i)}um(t,e)}};Y0=function(){return ze};Q0=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};ef=function(t,e,n){switch(e){case"input":if(Wh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Td(i);if(!r)throw Error(ee(90));P0(i),Wh(i,r)}}}break;case"textarea":k0(t,n);break;case"select":e=n.value,e!=null&&hs(t,!!n.multiple,e,!1)}};F0=rm;U0=ro;var iA={usingClientEntryPoint:!1,Events:[Bl,is,Td,L0,V0,rm]},Fa={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rA={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=z0(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||tA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{gd=Wu.inject(rA),oi=Wu}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dm(e))throw Error(ee(200));return eA(t,e,null,n)};pn.createRoot=function(t,e){if(!dm(t))throw Error(ee(299));var n=!1,i="",r=vE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=lm(t,1,!1,null,null,n,!1,i,r),t[ki]=e.current,gl(t.nodeType===8?t.parentNode:t),new cm(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=z0(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return ro(t)};pn.hydrate=function(t,e,n){if(!Rd(e))throw Error(ee(200));return kd(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!dm(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=vE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=yE(e,null,t,1,n??null,r,!1,o,a),t[ki]=e.current,gl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Pd(e)};pn.render=function(t,e,n){if(!Rd(e))throw Error(ee(200));return kd(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Rd(t))throw Error(ee(40));return t._reactRootContainer?(ro(function(){kd(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};pn.unstable_batchedUpdates=rm;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Rd(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return kd(t,e,n,!1,i)};pn.version="18.3.1-next-f1338f8080-20240426";function TE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TE)}catch(t){console.error(t)}}TE(),T0.exports=pn;var oA=T0.exports,N_=oA;Bh.createRoot=N_.createRoot,Bh.hydrateRoot=N_.hydrateRoot;var M_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},sA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},wE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,S=f&63;d||(S=64,a||(v=64)),i.push(n[g],n[y],n[v],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||y==null)throw new aA;const v=o<<2|u>>4;if(i.push(v),f!==64){const S=u<<4&240|f>>2;if(i.push(S),y!==64){const V=f<<6&192|y;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(t){const e=EE(t);return wE.encodeByteArray(e,!0)},Jc=function(t){return lA(t).replace(/\./g,"")},uA=function(t){try{return wE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=()=>cA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof M_>"u")return;const t=M_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uA(t[1]);return e&&JSON.parse(e)},hm=()=>{try{return dA()||hA()||fA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pA=t=>{var e,n;return(n=(e=hm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mA=t=>{const e=pA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},xE=()=>{var t;return(t=hm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jc(JSON.stringify(n)),Jc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vA(){var t;const e=(t=hm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TA(){return!vA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EA(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="FirebaseError";class co extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=xA,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,SE.prototype.create)}}class SE{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?SA(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new co(r,u,i)}}function SA(t,e){return t.replace(IA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const IA=/\{\$([^}]+)}/g;function Df(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(b_(o)&&b_(a)){if(!Df(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function b_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){return t&&t._delegate?t._delegate:t}class Cl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new gA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PA(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:AA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AA(t){return t===qr?void 0:t}function PA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const kA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},NA=Le.INFO,MA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},bA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=MA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class IE{constructor(e){this.name=e,this._logLevel=NA,this._logHandler=bA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const DA=(t,e)=>e.some(n=>t instanceof n);let D_,L_;function LA(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VA(){return L_||(L_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CE=new WeakMap,Lf=new WeakMap,AE=new WeakMap,kh=new WeakMap,fm=new WeakMap;function FA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(pr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&CE.set(n,t)}).catch(()=>{}),fm.set(e,t),e}function UA(t){if(Lf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Lf.set(t,e)}let Vf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OA(t){Vf=t(Vf)}function BA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Nh(this),e,...n);return AE.set(i,e.sort?e.sort():[e]),pr(i)}:VA().includes(t)?function(...e){return t.apply(Nh(this),e),pr(CE.get(this))}:function(...e){return pr(t.apply(Nh(this),e))}}function zA(t){return typeof t=="function"?BA(t):(t instanceof IDBTransaction&&UA(t),DA(t,LA())?new Proxy(t,Vf):t)}function pr(t){if(t instanceof IDBRequest)return FA(t);if(kh.has(t))return kh.get(t);const e=zA(t);return e!==t&&(kh.set(t,e),fm.set(e,t)),e}const Nh=t=>fm.get(t);function GA(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=pr(a);return i&&a.addEventListener("upgradeneeded",d=>{i(pr(a.result),d.oldVersion,d.newVersion,pr(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const HA=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],Mh=new Map;function V_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mh.get(e))return Mh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=qA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||HA.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&d.done]))[0]};return Mh.set(e,o),o}OA(t=>({...t,get:(e,n,i)=>V_(e,n)||t.get(e,n,i),has:(e,n)=>!!V_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function KA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ff="@firebase/app",F_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new IE("@firebase/app"),WA="@firebase/app-compat",JA="@firebase/analytics-compat",ZA="@firebase/analytics",YA="@firebase/app-check-compat",QA="@firebase/app-check",jA="@firebase/auth",XA="@firebase/auth-compat",eP="@firebase/database",tP="@firebase/data-connect",nP="@firebase/database-compat",iP="@firebase/functions",rP="@firebase/functions-compat",oP="@firebase/installations",sP="@firebase/installations-compat",aP="@firebase/messaging",lP="@firebase/messaging-compat",uP="@firebase/performance",cP="@firebase/performance-compat",dP="@firebase/remote-config",hP="@firebase/remote-config-compat",fP="@firebase/storage",pP="@firebase/storage-compat",mP="@firebase/firestore",gP="@firebase/vertexai-preview",_P="@firebase/firestore-compat",yP="firebase",vP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="[DEFAULT]",TP={[Ff]:"fire-core",[WA]:"fire-core-compat",[ZA]:"fire-analytics",[JA]:"fire-analytics-compat",[QA]:"fire-app-check",[YA]:"fire-app-check-compat",[jA]:"fire-auth",[XA]:"fire-auth-compat",[eP]:"fire-rtdb",[tP]:"fire-data-connect",[nP]:"fire-rtdb-compat",[iP]:"fire-fn",[rP]:"fire-fn-compat",[oP]:"fire-iid",[sP]:"fire-iid-compat",[aP]:"fire-fcm",[lP]:"fire-fcm-compat",[uP]:"fire-perf",[cP]:"fire-perf-compat",[dP]:"fire-rc",[hP]:"fire-rc-compat",[fP]:"fire-gcs",[pP]:"fire-gcs-compat",[mP]:"fire-fst",[_P]:"fire-fst-compat",[gP]:"fire-vertex","fire-js":"fire-js",[yP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Map,PE=new Map,Yc=new Map;function Uf(t,e){try{t.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Al(t){const e=t.name;if(Yc.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Yc.set(e,t);for(const n of Rs.values())Uf(n,t);for(const n of PE.values())Uf(n,t);return!0}function RE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new SE("app","Firebase",EP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=vP;function NE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Zc,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw mr.create("bad-app-name",{appName:String(r)});if(n||(n=xE()),!n)throw mr.create("no-options");const o=Rs.get(r);if(o){if(Df(n,o.options)&&Df(i,o.config))return o;throw mr.create("duplicate-app",{appName:r})}const a=new RA(r);for(const d of Yc.values())a.addComponent(d);const u=new wP(n,i,a);return Rs.set(r,u),u}function ME(t=Zc){const e=Rs.get(t);if(!e&&t===Zc&&xE())return NE();if(!e)throw mr.create("no-app",{appName:t});return e}function xP(){return Array.from(Rs.values())}function jr(t,e,n){var i;let r=(i=TP[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(u.join(" "));return}Al(new Cl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="firebase-heartbeat-database",IP=1,Pl="firebase-heartbeat-store";let bh=null;function bE(){return bh||(bh=GA(SP,IP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),bh}async function CP(t){try{const n=(await bE()).transaction(Pl),i=await n.objectStore(Pl).get(DE(t));return await n.done,i}catch(e){if(e instanceof co)bi.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(n.message)}}}async function U_(t,e){try{const i=(await bE()).transaction(Pl,"readwrite");await i.objectStore(Pl).put(e,DE(t)),await i.done}catch(n){if(n instanceof co)bi.warn(n.message);else{const i=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(i.message)}}}function DE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=1024,PP=30*24*60*60*1e3;class RP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NP(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=O_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=PP}),this._storage.overwrite(this._heartbeatsCache))}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O_(),{heartbeatsToSend:i,unsentEntries:r}=kP(this._heartbeatsCache.heartbeats),o=Jc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return bi.warn(n),""}}}function O_(){return new Date().toISOString().substring(0,10)}function kP(t,e=AP){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),B_(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),B_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class NP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EA()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return U_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return U_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function B_(t){return Jc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){Al(new Cl("platform-logger",e=>new $A(e),"PRIVATE")),Al(new Cl("heartbeat",e=>new RP(e),"PRIVATE")),jr(Ff,F_,t),jr(Ff,F_,"esm2017"),jr("fire-js","")}MP("");var bP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(bP,DP,"app");const LP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:co,SDK_VERSION:kE,_DEFAULT_ENTRY_NAME:Zc,_addComponent:Uf,_apps:Rs,_components:Yc,_getProvider:RE,_registerComponent:Al,_serverApps:PE,getApp:ME,getApps:xP,initializeApp:NE,registerVersion:jr},Symbol.toStringTag,{value:"Module"}));var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,LE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,C){function k(){}k.prototype=C.prototype,b.D=C.prototype,b.prototype=new k,b.prototype.constructor=b,b.C=function(U,B,F){for(var D=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)D[ae-2]=arguments[ae];return C.prototype[B].apply(U,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,C,k){k||(k=0);var U=Array(16);if(typeof C=="string")for(var B=0;16>B;++B)U[B]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(B=0;16>B;++B)U[B]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=b.g[0],k=b.g[1],B=b.g[2];var F=b.g[3],D=C+(F^k&(B^F))+U[0]+3614090360&4294967295;C=k+(D<<7&4294967295|D>>>25),D=F+(B^C&(k^B))+U[1]+3905402710&4294967295,F=C+(D<<12&4294967295|D>>>20),D=B+(k^F&(C^k))+U[2]+606105819&4294967295,B=F+(D<<17&4294967295|D>>>15),D=k+(C^B&(F^C))+U[3]+3250441966&4294967295,k=B+(D<<22&4294967295|D>>>10),D=C+(F^k&(B^F))+U[4]+4118548399&4294967295,C=k+(D<<7&4294967295|D>>>25),D=F+(B^C&(k^B))+U[5]+1200080426&4294967295,F=C+(D<<12&4294967295|D>>>20),D=B+(k^F&(C^k))+U[6]+2821735955&4294967295,B=F+(D<<17&4294967295|D>>>15),D=k+(C^B&(F^C))+U[7]+4249261313&4294967295,k=B+(D<<22&4294967295|D>>>10),D=C+(F^k&(B^F))+U[8]+1770035416&4294967295,C=k+(D<<7&4294967295|D>>>25),D=F+(B^C&(k^B))+U[9]+2336552879&4294967295,F=C+(D<<12&4294967295|D>>>20),D=B+(k^F&(C^k))+U[10]+4294925233&4294967295,B=F+(D<<17&4294967295|D>>>15),D=k+(C^B&(F^C))+U[11]+2304563134&4294967295,k=B+(D<<22&4294967295|D>>>10),D=C+(F^k&(B^F))+U[12]+1804603682&4294967295,C=k+(D<<7&4294967295|D>>>25),D=F+(B^C&(k^B))+U[13]+4254626195&4294967295,F=C+(D<<12&4294967295|D>>>20),D=B+(k^F&(C^k))+U[14]+2792965006&4294967295,B=F+(D<<17&4294967295|D>>>15),D=k+(C^B&(F^C))+U[15]+1236535329&4294967295,k=B+(D<<22&4294967295|D>>>10),D=C+(B^F&(k^B))+U[1]+4129170786&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^B&(C^k))+U[6]+3225465664&4294967295,F=C+(D<<9&4294967295|D>>>23),D=B+(C^k&(F^C))+U[11]+643717713&4294967295,B=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(B^F))+U[0]+3921069994&4294967295,k=B+(D<<20&4294967295|D>>>12),D=C+(B^F&(k^B))+U[5]+3593408605&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^B&(C^k))+U[10]+38016083&4294967295,F=C+(D<<9&4294967295|D>>>23),D=B+(C^k&(F^C))+U[15]+3634488961&4294967295,B=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(B^F))+U[4]+3889429448&4294967295,k=B+(D<<20&4294967295|D>>>12),D=C+(B^F&(k^B))+U[9]+568446438&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^B&(C^k))+U[14]+3275163606&4294967295,F=C+(D<<9&4294967295|D>>>23),D=B+(C^k&(F^C))+U[3]+4107603335&4294967295,B=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(B^F))+U[8]+1163531501&4294967295,k=B+(D<<20&4294967295|D>>>12),D=C+(B^F&(k^B))+U[13]+2850285829&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^B&(C^k))+U[2]+4243563512&4294967295,F=C+(D<<9&4294967295|D>>>23),D=B+(C^k&(F^C))+U[7]+1735328473&4294967295,B=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(B^F))+U[12]+2368359562&4294967295,k=B+(D<<20&4294967295|D>>>12),D=C+(k^B^F)+U[5]+4294588738&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^B)+U[8]+2272392833&4294967295,F=C+(D<<11&4294967295|D>>>21),D=B+(F^C^k)+U[11]+1839030562&4294967295,B=F+(D<<16&4294967295|D>>>16),D=k+(B^F^C)+U[14]+4259657740&4294967295,k=B+(D<<23&4294967295|D>>>9),D=C+(k^B^F)+U[1]+2763975236&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^B)+U[4]+1272893353&4294967295,F=C+(D<<11&4294967295|D>>>21),D=B+(F^C^k)+U[7]+4139469664&4294967295,B=F+(D<<16&4294967295|D>>>16),D=k+(B^F^C)+U[10]+3200236656&4294967295,k=B+(D<<23&4294967295|D>>>9),D=C+(k^B^F)+U[13]+681279174&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^B)+U[0]+3936430074&4294967295,F=C+(D<<11&4294967295|D>>>21),D=B+(F^C^k)+U[3]+3572445317&4294967295,B=F+(D<<16&4294967295|D>>>16),D=k+(B^F^C)+U[6]+76029189&4294967295,k=B+(D<<23&4294967295|D>>>9),D=C+(k^B^F)+U[9]+3654602809&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^B)+U[12]+3873151461&4294967295,F=C+(D<<11&4294967295|D>>>21),D=B+(F^C^k)+U[15]+530742520&4294967295,B=F+(D<<16&4294967295|D>>>16),D=k+(B^F^C)+U[2]+3299628645&4294967295,k=B+(D<<23&4294967295|D>>>9),D=C+(B^(k|~F))+U[0]+4096336452&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~B))+U[7]+1126891415&4294967295,F=C+(D<<10&4294967295|D>>>22),D=B+(C^(F|~k))+U[14]+2878612391&4294967295,B=F+(D<<15&4294967295|D>>>17),D=k+(F^(B|~C))+U[5]+4237533241&4294967295,k=B+(D<<21&4294967295|D>>>11),D=C+(B^(k|~F))+U[12]+1700485571&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~B))+U[3]+2399980690&4294967295,F=C+(D<<10&4294967295|D>>>22),D=B+(C^(F|~k))+U[10]+4293915773&4294967295,B=F+(D<<15&4294967295|D>>>17),D=k+(F^(B|~C))+U[1]+2240044497&4294967295,k=B+(D<<21&4294967295|D>>>11),D=C+(B^(k|~F))+U[8]+1873313359&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~B))+U[15]+4264355552&4294967295,F=C+(D<<10&4294967295|D>>>22),D=B+(C^(F|~k))+U[6]+2734768916&4294967295,B=F+(D<<15&4294967295|D>>>17),D=k+(F^(B|~C))+U[13]+1309151649&4294967295,k=B+(D<<21&4294967295|D>>>11),D=C+(B^(k|~F))+U[4]+4149444226&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~B))+U[11]+3174756917&4294967295,F=C+(D<<10&4294967295|D>>>22),D=B+(C^(F|~k))+U[2]+718787259&4294967295,B=F+(D<<15&4294967295|D>>>17),D=k+(F^(B|~C))+U[9]+3951481745&4294967295,b.g[0]=b.g[0]+C&4294967295,b.g[1]=b.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+B&4294967295,b.g[3]=b.g[3]+F&4294967295}i.prototype.u=function(b,C){C===void 0&&(C=b.length);for(var k=C-this.blockSize,U=this.B,B=this.h,F=0;F<C;){if(B==0)for(;F<=k;)r(this,b,F),F+=this.blockSize;if(typeof b=="string"){for(;F<C;)if(U[B++]=b.charCodeAt(F++),B==this.blockSize){r(this,U),B=0;break}}else for(;F<C;)if(U[B++]=b[F++],B==this.blockSize){r(this,U),B=0;break}}this.h=B,this.o+=C},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var C=1;C<b.length-8;++C)b[C]=0;var k=8*this.o;for(C=b.length-8;C<b.length;++C)b[C]=k&255,k/=256;for(this.u(b),b=Array(16),C=k=0;4>C;++C)for(var U=0;32>U;U+=8)b[k++]=this.g[C]>>>U&255;return b};function o(b,C){var k=u;return Object.prototype.hasOwnProperty.call(k,b)?k[b]:k[b]=C(b)}function a(b,C){this.h=C;for(var k=[],U=!0,B=b.length-1;0<=B;B--){var F=b[B]|0;U&&F==C||(k[B]=F,U=!1)}this.g=k}var u={};function d(b){return-128<=b&&128>b?o(b,function(C){return new a([C|0],0>C?-1:0)}):new a([b|0],0>b?-1:0)}function f(b){if(isNaN(b)||!isFinite(b))return y;if(0>b)return O(f(-b));for(var C=[],k=1,U=0;b>=k;U++)C[U]=b/k|0,k*=4294967296;return new a(C,0)}function g(b,C){if(b.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b.charAt(0)=="-")return O(g(b.substring(1),C));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(C,8)),U=y,B=0;B<b.length;B+=8){var F=Math.min(8,b.length-B),D=parseInt(b.substring(B,B+F),C);8>F?(F=f(Math.pow(C,F)),U=U.j(F).add(f(D))):(U=U.j(k),U=U.add(f(D)))}return U}var y=d(0),v=d(1),S=d(16777216);t=a.prototype,t.m=function(){if(M(this))return-O(this).m();for(var b=0,C=1,k=0;k<this.g.length;k++){var U=this.i(k);b+=(0<=U?U:4294967296+U)*C,C*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(V(this))return"0";if(M(this))return"-"+O(this).toString(b);for(var C=f(Math.pow(b,6)),k=this,U="";;){var B=G(k,C).g;k=R(k,B.j(C));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(b);if(k=B,V(k))return F+U;for(;6>F.length;)F="0"+F;U=F+U}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function V(b){if(b.h!=0)return!1;for(var C=0;C<b.g.length;C++)if(b.g[C]!=0)return!1;return!0}function M(b){return b.h==-1}t.l=function(b){return b=R(this,b),M(b)?-1:V(b)?0:1};function O(b){for(var C=b.g.length,k=[],U=0;U<C;U++)k[U]=~b.g[U];return new a(k,~b.h).add(v)}t.abs=function(){return M(this)?O(this):this},t.add=function(b){for(var C=Math.max(this.g.length,b.g.length),k=[],U=0,B=0;B<=C;B++){var F=U+(this.i(B)&65535)+(b.i(B)&65535),D=(F>>>16)+(this.i(B)>>>16)+(b.i(B)>>>16);U=D>>>16,F&=65535,D&=65535,k[B]=D<<16|F}return new a(k,k[k.length-1]&-2147483648?-1:0)};function R(b,C){return b.add(O(C))}t.j=function(b){if(V(this)||V(b))return y;if(M(this))return M(b)?O(this).j(O(b)):O(O(this).j(b));if(M(b))return O(this.j(O(b)));if(0>this.l(S)&&0>b.l(S))return f(this.m()*b.m());for(var C=this.g.length+b.g.length,k=[],U=0;U<2*C;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<b.g.length;B++){var F=this.i(U)>>>16,D=this.i(U)&65535,ae=b.i(B)>>>16,Ke=b.i(B)&65535;k[2*U+2*B]+=D*Ke,N(k,2*U+2*B),k[2*U+2*B+1]+=F*Ke,N(k,2*U+2*B+1),k[2*U+2*B+1]+=D*ae,N(k,2*U+2*B+1),k[2*U+2*B+2]+=F*ae,N(k,2*U+2*B+2)}for(U=0;U<C;U++)k[U]=k[2*U+1]<<16|k[2*U];for(U=C;U<2*C;U++)k[U]=0;return new a(k,0)};function N(b,C){for(;(b[C]&65535)!=b[C];)b[C+1]+=b[C]>>>16,b[C]&=65535,C++}function I(b,C){this.g=b,this.h=C}function G(b,C){if(V(C))throw Error("division by zero");if(V(b))return new I(y,y);if(M(b))return C=G(O(b),C),new I(O(C.g),O(C.h));if(M(C))return C=G(b,O(C)),new I(O(C.g),C.h);if(30<b.g.length){if(M(b)||M(C))throw Error("slowDivide_ only works with positive integers.");for(var k=v,U=C;0>=U.l(b);)k=W(k),U=W(U);var B=K(k,1),F=K(U,1);for(U=K(U,2),k=K(k,2);!V(U);){var D=F.add(U);0>=D.l(b)&&(B=B.add(k),F=D),U=K(U,1),k=K(k,1)}return C=R(b,B.j(C)),new I(B,C)}for(B=y;0<=b.l(C);){for(k=Math.max(1,Math.floor(b.m()/C.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),F=f(k),D=F.j(C);M(D)||0<D.l(b);)k-=U,F=f(k),D=F.j(C);V(F)&&(F=v),B=B.add(F),b=R(b,D)}return new I(B,b)}t.A=function(b){return G(this,b).h},t.and=function(b){for(var C=Math.max(this.g.length,b.g.length),k=[],U=0;U<C;U++)k[U]=this.i(U)&b.i(U);return new a(k,this.h&b.h)},t.or=function(b){for(var C=Math.max(this.g.length,b.g.length),k=[],U=0;U<C;U++)k[U]=this.i(U)|b.i(U);return new a(k,this.h|b.h)},t.xor=function(b){for(var C=Math.max(this.g.length,b.g.length),k=[],U=0;U<C;U++)k[U]=this.i(U)^b.i(U);return new a(k,this.h^b.h)};function W(b){for(var C=b.g.length+1,k=[],U=0;U<C;U++)k[U]=b.i(U)<<1|b.i(U-1)>>>31;return new a(k,b.h)}function K(b,C){var k=C>>5;C%=32;for(var U=b.g.length-k,B=[],F=0;F<U;F++)B[F]=0<C?b.i(F+k)>>>C|b.i(F+k+1)<<32-C:b.i(F+k);return new a(B,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,LE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Xr=a}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VE,$a,FE,_c,Of,UE,OE,BE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,x){return h==Array.prototype||h==Object.prototype||(h[T]=x.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var T=0;T<h.length;++T){var x=h[T];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(h,T){if(T)e:{var x=i;h=h.split(".");for(var P=0;P<h.length-1;P++){var q=h[P];if(!(q in x))break e;x=x[q]}h=h[h.length-1],P=x[h],T=T(P),T!=P&&T!=null&&e(x,h,{configurable:!0,writable:!0,value:T})}}function o(h,T){h instanceof String&&(h+="");var x=0,P=!1,q={next:function(){if(!P&&x<h.length){var Z=x++;return{value:T(Z,h[Z]),done:!1}}return P=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}r("Array.prototype.values",function(h){return h||function(){return o(this,function(T,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function f(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function g(h,T,x){return h.call.apply(h.bind,arguments)}function y(h,T,x){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,P),h.apply(T,q)}}return function(){return h.apply(T,arguments)}}function v(h,T,x){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function S(h,T){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function V(h,T){function x(){}x.prototype=T.prototype,h.aa=T.prototype,h.prototype=new x,h.prototype.constructor=h,h.Qb=function(P,q,Z){for(var te=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)te[Be-2]=arguments[Be];return T.prototype[q].apply(P,te)}}function M(h){const T=h.length;if(0<T){const x=Array(T);for(let P=0;P<T;P++)x[P]=h[P];return x}return[]}function O(h,T){for(let x=1;x<arguments.length;x++){const P=arguments[x];if(d(P)){const q=h.length||0,Z=P.length||0;h.length=q+Z;for(let te=0;te<Z;te++)h[q+te]=P[te]}else h.push(P)}}class R{constructor(T,x){this.i=T,this.j=x,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function N(h){return/^[\s\xa0]*$/.test(h)}function I(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function G(h){return G[" "](h),h}G[" "]=function(){};var W=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function K(h,T,x){for(const P in h)T.call(x,h[P],P,h)}function b(h,T){for(const x in h)T.call(void 0,h[x],x,h)}function C(h){const T={};for(const x in h)T[x]=h[x];return T}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,T){let x,P;for(let q=1;q<arguments.length;q++){P=arguments[q];for(x in P)h[x]=P[x];for(let Z=0;Z<k.length;Z++)x=k[Z],Object.prototype.hasOwnProperty.call(P,x)&&(h[x]=P[x])}}function B(h){var T=1;h=h.split(":");const x=[];for(;0<T&&h.length;)x.push(h.shift()),T--;return h.length&&x.push(h.join(":")),x}function F(h){u.setTimeout(()=>{throw h},0)}function D(){var h=ne;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class ae{constructor(){this.h=this.g=null}add(T,x){const P=Ke.get();P.set(T,x),this.h?this.h.next=P:this.g=P,this.h=P}}var Ke=new R(()=>new Me,h=>h.reset());class Me{constructor(){this.next=this.g=this.h=null}set(T,x){this.h=T,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,H=!1,ne=new ae,X=()=>{const h=u.Promise.resolve(void 0);xe=()=>{h.then(he)}};var he=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(x){F(x)}var T=Ke;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}H=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};u.addEventListener("test",x,T),u.removeEventListener("test",x,T)}catch{}return h}();function Se(h,T){if(Pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var x=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(W){e:{try{G(T.nodeName);var q=!0;break e}catch{}q=!1}q||(T=null)}}else x=="mouseover"?T=h.fromElement:x=="mouseout"&&(T=h.toElement);this.relatedTarget=T,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Se.aa.h.call(this)}}V(Se,Pe);var ve={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Zl(h,T,x,P,q){this.listener=h,this.proxy=null,this.src=T,this.type=x,this.capture=!!P,this.ha=q,this.key=++Yn,this.da=this.fa=!1}function Bi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function zi(h){this.src=h,this.g={},this.h=0}zi.prototype.add=function(h,T,x,P,q){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var te=Pr(h,T,P,q);return-1<te?(T=h[te],x||(T.fa=!1)):(T=new Zl(T,this.src,Z,!!P,q),T.fa=x,h.push(T)),T};function hi(h,T){var x=T.type;if(x in h.g){var P=h.g[x],q=Array.prototype.indexOf.call(P,T,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(P,q,1),Z&&(Bi(T),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Pr(h,T,x,P){for(var q=0;q<h.length;++q){var Z=h[q];if(!Z.da&&Z.listener==T&&Z.capture==!!x&&Z.ha==P)return q}return-1}var Js="closure_lm_"+(1e6*Math.random()|0),mo={};function Zs(h,T,x,P,q){if(Array.isArray(T)){for(var Z=0;Z<T.length;Z++)Zs(h,T[Z],x,P,q);return null}return x=jl(x),h&&h[gt]?h.K(T,x,f(P)?!!P.capture:!1,q):Ys(h,T,x,!1,P,q)}function Ys(h,T,x,P,q,Z){if(!T)throw Error("Invalid event type");var te=f(q)?!!q.capture:!!q,Be=vo(h);if(Be||(h[Js]=Be=new zi(h)),x=Be.add(T,x,P,te,Z),x.proxy)return x;if(P=go(),x.proxy=P,P.src=h,P.listener=x,h.addEventListener)Oe||(q=te),q===void 0&&(q=!1),h.addEventListener(T.toString(),P,q);else if(h.attachEvent)h.attachEvent(yo(T.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function go(){function h(x){return T.call(h.src,h.listener,x)}const T=Ql;return h}function Yl(h,T,x,P,q){if(Array.isArray(T))for(var Z=0;Z<T.length;Z++)Yl(h,T[Z],x,P,q);else P=f(P)?!!P.capture:!!P,x=jl(x),h&&h[gt]?(h=h.i,T=String(T).toString(),T in h.g&&(Z=h.g[T],x=Pr(Z,x,P,q),-1<x&&(Bi(Z[x]),Array.prototype.splice.call(Z,x,1),Z.length==0&&(delete h.g[T],h.h--)))):h&&(h=vo(h))&&(T=h.g[T.toString()],h=-1,T&&(h=Pr(T,x,P,q)),(x=-1<h?T[h]:null)&&_o(x))}function _o(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[gt])hi(T.i,h);else{var x=h.type,P=h.proxy;T.removeEventListener?T.removeEventListener(x,P,h.capture):T.detachEvent?T.detachEvent(yo(x),P):T.addListener&&T.removeListener&&T.removeListener(P),(x=vo(T))?(hi(x,h),x.h==0&&(x.src=null,T[Js]=null)):Bi(h)}}}function yo(h){return h in mo?mo[h]:mo[h]="on"+h}function Ql(h,T){if(h.da)h=!0;else{T=new Se(T,this);var x=h.listener,P=h.ha||h.src;h.fa&&_o(h),h=x.call(P,T)}return h}function vo(h){return h=h[Js],h instanceof zi?h:null}var Qs="__closure_events_fn_"+(1e9*Math.random()>>>0);function jl(h){return typeof h=="function"?h:(h[Qs]||(h[Qs]=function(T){return h.handleEvent(T)}),h[Qs])}function dt(){ye.call(this),this.i=new zi(this),this.M=this,this.F=null}V(dt,ye),dt.prototype[gt]=!0,dt.prototype.removeEventListener=function(h,T,x,P){Yl(this,h,T,x,P)};function Et(h,T){var x,P=h.F;if(P)for(x=[];P;P=P.F)x.push(P);if(h=h.M,P=T.type||T,typeof T=="string")T=new Pe(T,h);else if(T instanceof Pe)T.target=T.target||h;else{var q=T;T=new Pe(P,h),U(T,q)}if(q=!0,x)for(var Z=x.length-1;0<=Z;Z--){var te=T.g=x[Z];q=Rr(te,P,!0,T)&&q}if(te=T.g=h,q=Rr(te,P,!0,T)&&q,q=Rr(te,P,!1,T)&&q,x)for(Z=0;Z<x.length;Z++)te=T.g=x[Z],q=Rr(te,P,!1,T)&&q}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var x=h.g[T],P=0;P<x.length;P++)Bi(x[P]);delete h.g[T],h.h--}}this.F=null},dt.prototype.K=function(h,T,x,P){return this.i.add(String(h),T,!1,x,P)},dt.prototype.L=function(h,T,x,P){return this.i.add(String(h),T,!0,x,P)};function Rr(h,T,x,P){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var q=!0,Z=0;Z<T.length;++Z){var te=T[Z];if(te&&!te.da&&te.capture==x){var Be=te.listener,ht=te.ha||te.src;te.fa&&hi(h.i,te),q=Be.call(ht,P)!==!1&&q}}return q&&!P.defaultPrevented}function Xl(h,T,x){if(typeof h=="function")x&&(h=v(h,x));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:u.setTimeout(h,T||0)}function js(h){h.g=Xl(()=>{h.g=null,h.i&&(h.i=!1,js(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class eu extends ye{constructor(T,x){super(),this.m=T,this.l=x,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:js(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(h){ye.call(this),this.h=h,this.g={}}V(kr,ye);var Xs=[];function To(h){K(h.g,function(T,x){this.g.hasOwnProperty(x)&&_o(T)},h),h.g={}}kr.prototype.N=function(){kr.aa.N.call(this),To(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=u.JSON.stringify,Yd=u.JSON.parse,Nr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ea(){}ea.prototype.h=null;function tu(h){return h.h||(h.h=h.i())}function ta(){}var Gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wo(){Pe.call(this,"d")}V(wo,Pe);function na(){Pe.call(this,"c")}V(na,Pe);var fi={},nu=null;function xo(){return nu=nu||new dt}fi.La="serverreachability";function iu(h){Pe.call(this,fi.La,h)}V(iu,Pe);function Mr(h){const T=xo();Et(T,new iu(T))}fi.STAT_EVENT="statevent";function So(h,T){Pe.call(this,fi.STAT_EVENT,h),this.stat=T}V(So,Pe);function Pt(h){const T=xo();Et(T,new So(T,h))}fi.Ma="timingevent";function ru(h,T){Pe.call(this,fi.Ma,h),this.size=T}V(ru,Pe);function br(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},T)}function Dr(){this.g=!0}Dr.prototype.xa=function(){this.g=!1};function gn(h,T,x,P,q,Z){h.info(function(){if(h.g)if(Z)for(var te="",Be=Z.split("&"),ht=0;ht<Be.length;ht++){var be=Be[ht].split("=");if(1<be.length){var qe=be[0];be=be[1];var tt=qe.split("_");te=2<=tt.length&&tt[1]=="type"?te+(qe+"="+be+"&"):te+(qe+"=redacted&")}}else te=null;else te=Z;return"XMLHTTP REQ ("+P+") [attempt "+q+"]: "+T+`
`+x+`
`+te})}function le(h,T,x,P,q,Z,te){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+q+"]: "+T+`
`+x+`
`+Z+" "+te})}function pi(h,T,x,P){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+su(h,x)+(P?" "+P:"")})}function ou(h,T){h.info(function(){return"TIMEOUT: "+T})}Dr.prototype.info=function(){};function su(h,T){if(!h.g)return T;if(!T)return null;try{var x=JSON.parse(T);if(x){for(h=0;h<x.length;h++)if(Array.isArray(x[h])){var P=x[h];if(!(2>P.length)){var q=P[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var te=1;te<q.length;te++)q[te]=""}}}}return Eo(x)}catch{return T}}var Lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Io={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Co;function Dn(){}V(Dn,ea),Dn.prototype.g=function(){return new XMLHttpRequest},Dn.prototype.i=function(){return{}},Co=new Dn;function Ln(h,T,x,P){this.j=h,this.i=T,this.l=x,this.R=P||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}var lu={},ia={};function ra(h,T,x){h.L=1,h.v=yn(st(T)),h.m=x,h.P=!0,oa(h,null)}function oa(h,T){h.F=Date.now(),Po(h),h.A=st(h.v);var x=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),du(x.i,"t",P),h.C=0,x=h.j.J,h.h=new au,h.g=yu(h.j,x?T:null,!h.m),0<h.O&&(h.M=new eu(v(h.Y,h,h.g),h.O)),T=h.U,x=h.g,P=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Xs[0]=q.toString()),q=Xs);for(var Z=0;Z<q.length;Z++){var te=Zs(x,q[Z],P||T.handleEvent,!1,T.h||T);if(!te)break;T.g[te.key]=te}T=h.H?C(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Mr(),gn(h.i,h.u,h.A,h.l,h.R,h.m)}Ln.prototype.ca=function(h){h=h.target;const T=this.M;T&&qt(h)==3?T.j():this.Y(h)},Ln.prototype.Y=function(h){try{if(h==this.g)e:{const tt=qt(this.g);var T=this.g.Ba();const Zi=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Ea(this.g)))){this.J||tt!=4||T==7||(T==8||0>=Zi?Mr(3):Mr(2)),sa(this);var x=this.g.Z();this.X=x;t:if(uu(this)){var P=Ea(this.g);h="";var q=P.length,Z=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),Vr(this);var te="";break t}this.h.i=new u.TextDecoder}for(T=0;T<q;T++)this.h.h=!0,h+=this.h.i.decode(P[T],{stream:!(Z&&T==q-1)});P.length=0,this.h.g+=h,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=x==200,le(this.i,this.u,this.A,this.l,this.R,tt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,ht=this.g;if((Be=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Be)){var be=Be;break t}}be=null}if(x=be)pi(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,x);else{this.o=!1,this.s=3,Pt(12),mi(this),Vr(this);break e}}if(this.P){x=!0;let lt;for(;!this.J&&this.C<te.length;)if(lt=Ao(this,te),lt==ia){tt==4&&(this.s=4,Pt(14),x=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==lu){this.s=4,Pt(15),pi(this.i,this.l,te,"[Invalid Chunk]"),x=!1;break}else pi(this.i,this.l,lt,null),Fr(this,lt);if(uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||te.length!=0||this.h.h||(this.s=1,Pt(16),x=!1),this.o=this.o&&x,!x)pi(this.i,this.l,te,"[Invalid Chunked Response]"),mi(this),Vr(this);else if(0<te.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Fo(qe),qe.M=!0,Pt(11))}}else pi(this.i,this.l,te,null),Fr(this,te);tt==4&&mi(this),this.o&&!this.J&&(tt==4?xa(this.j,this):(this.o=!1,Po(this)))}else Qd(this.g),x==400&&0<te.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),mi(this),Vr(this)}}}catch{}finally{}};function uu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ao(h,T){var x=h.C,P=T.indexOf(`
`,x);return P==-1?ia:(x=Number(T.substring(x,P)),isNaN(x)?lu:(P+=1,P+x>T.length?ia:(T=T.slice(P,P+x),h.C=P+x,T)))}Ln.prototype.cancel=function(){this.J=!0,mi(this)};function Po(h){h.S=Date.now()+h.I,cu(h,h.I)}function cu(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=br(v(h.ba,h),T)}function sa(h){h.B&&(u.clearTimeout(h.B),h.B=null)}Ln.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ou(this.i,this.A),this.L!=2&&(Mr(),Pt(17)),mi(this),this.s=2,Vr(this)):cu(this,this.S-h)};function Vr(h){h.j.G==0||h.J||xa(h.j,h)}function mi(h){sa(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,To(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Fr(h,T){try{var x=h.j;if(x.G!=0&&(x.g==h||Re(x.h,h))){if(!h.K&&Re(x.h,h)&&x.G==3){try{var P=x.Da.g.parse(T)}catch{P=null}if(Array.isArray(P)&&P.length==3){var q=P;if(q[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<h.F)Oo(x),Lo(x);else break e;Vo(x),Pt(18)}}else x.za=q[1],0<x.za-x.T&&37500>q[2]&&x.F&&x.v==0&&!x.C&&(x.C=br(v(x.Za,x),6e3));if(1>=Hi(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ti(x,11)}else if((h.K||x.g==h)&&Oo(x),!N(T))for(q=x.Da.g.parse(T),T=0;T<q.length;T++){let be=q[T];if(x.T=be[0],be=be[1],x.G==2)if(be[0]=="c"){x.K=be[1],x.ia=be[2];const qe=be[3];qe!=null&&(x.la=qe,x.j.info("VER="+x.la));const tt=be[4];tt!=null&&(x.Aa=tt,x.j.info("SVER="+x.Aa));const Zi=be[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(P=1.5*Zi,x.L=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const lt=h.g;if(lt){const zo=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var Z=P.h;Z.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&($e(Z,Z.h),Z.h=null))}if(P.D){const Xn=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xn&&(P.ya=Xn,me(P.I,P.D,Xn))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-h.F,x.j.info("Handshake RTT: "+x.R+"ms")),P=x;var te=h;if(P.qa=Bo(P,P.J?P.ia:null,P.W),te.K){Or(P.h,te);var Be=te,ht=P.L;ht&&(Be.I=ht),Be.B&&(sa(Be),Po(Be)),P.g=te}else Un(P);0<x.i.length&&Ji(x)}else be[0]!="stop"&&be[0]!="close"||Ti(x,7);else x.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Ti(x,7):Do(x):be[0]!="noop"&&x.l&&x.l.ta(be),x.v=0)}}Mr(4)}catch{}}var Ur=class{constructor(h,T){this.g=h,this.map=T}};function aa(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Hi(h){return h.h?1:h.g?h.g.size:0}function Re(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function $e(h,T){h.g?h.g.add(T):h.h=T}function Or(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}aa.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gi(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const x of h.g.values())T=T.concat(x.D);return T}return M(h.i)}function qi(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var T=[],x=h.length,P=0;P<x;P++)T.push(h[P]);return T}T=[],x=0;for(P in h)T[x++]=h[P];return T}function ua(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var T=[];h=h.length;for(var x=0;x<h;x++)T.push(x);return T}T=[],x=0;for(const P in h)T[x++]=P;return T}}}function we(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var x=ua(h),P=qi(h),q=P.length,Z=0;Z<q;Z++)T.call(void 0,P[Z],x&&x[Z],h)}var Ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(h,T){if(h){h=h.split("&");for(var x=0;x<h.length;x++){var P=h[x].indexOf("="),q=null;if(0<=P){var Z=h[x].substring(0,P);q=h[x].substring(P+1)}else Z=h[x];T(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function _n(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof _n){this.h=h.h,Ro(this,h.j),this.o=h.o,this.g=h.g,_i(this,h.s),this.l=h.l;var T=h.i,x=new yi;x.i=T.i,T.g&&(x.g=new Map(T.g),x.h=T.h),Qn(this,x),this.m=h.m}else h&&(T=String(h).match(Ye))?(this.h=!1,Ro(this,T[1]||"",!0),this.o=Vn(T[2]||""),this.g=Vn(T[3]||"",!0),_i(this,T[4]),this.l=Vn(T[5]||"",!0),Qn(this,T[6]||"",!0),this.m=Vn(T[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}_n.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Fn(T,$i,!0),":");var x=this.g;return(x||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Fn(T,$i,!0),"@"),h.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&h.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Fn(x,x.charAt(0)=="/"?fa:ha,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Fn(x,pa)),h.join("")};function st(h){return new _n(h)}function Ro(h,T,x){h.j=x?Vn(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function _i(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Qn(h,T,x){T instanceof yi?(h.i=T,vn(h.i,h.h)):(x||(T=Fn(T,ko)),h.i=new yi(T,h.h))}function me(h,T,x){h.i.set(T,x)}function yn(h){return me(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Vn(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fn(h,T,x){return typeof h=="string"?(h=encodeURI(h).replace(T,da),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function da(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $i=/[#\/\?@]/g,ha=/[#\?:]/g,fa=/[#\?]/g,ko=/[#\?@]/g,pa=/#/g;function yi(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function an(h){h.g||(h.g=new Map,h.h=0,h.i&&ca(h.i,function(T,x){h.add(decodeURIComponent(T.replace(/\+/g," ")),x)}))}t=yi.prototype,t.add=function(h,T){an(this),this.i=null,h=fe(this,h);var x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(T),this.h+=1,this};function ma(h,T){an(h),T=fe(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function No(h,T){return an(h),T=fe(h,T),h.g.has(T)}t.forEach=function(h,T){an(this),this.g.forEach(function(x,P){x.forEach(function(q){h.call(T,q,P,this)},this)},this)},t.na=function(){an(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),x=[];for(let P=0;P<T.length;P++){const q=h[P];for(let Z=0;Z<q.length;Z++)x.push(T[P])}return x},t.V=function(h){an(this);let T=[];if(typeof h=="string")No(this,h)&&(T=T.concat(this.g.get(fe(this,h))));else{h=Array.from(this.g.values());for(let x=0;x<h.length;x++)T=T.concat(h[x])}return T},t.set=function(h,T){return an(this),this.i=null,h=fe(this,h),No(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},t.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function du(h,T,x){ma(h,T),0<x.length&&(h.i=null,h.g.set(fe(h,T),M(x)),h.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var x=0;x<T.length;x++){var P=T[x];const Z=encodeURIComponent(String(P)),te=this.V(P);for(P=0;P<te.length;P++){var q=Z;te[P]!==""&&(q+="="+encodeURIComponent(String(te[P]))),h.push(q)}}return this.i=h.join("&")};function fe(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function vn(h,T){T&&!h.j&&(an(h),h.i=null,h.g.forEach(function(x,P){var q=P.toLowerCase();P!=q&&(ma(this,P),du(this,q,x))},h)),h.j=T}function He(h,T){const x=new Dr;if(u.Image){const P=new Image;P.onload=S(Tn,x,"TestLoadImage: loaded",!0,T,P),P.onerror=S(Tn,x,"TestLoadImage: error",!1,T,P),P.onabort=S(Tn,x,"TestLoadImage: abort",!1,T,P),P.ontimeout=S(Tn,x,"TestLoadImage: timeout",!1,T,P),u.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else T(!1)}function hu(h,T){const x=new Dr,P=new AbortController,q=setTimeout(()=>{P.abort(),Tn(x,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:P.signal}).then(Z=>{clearTimeout(q),Z.ok?Tn(x,"TestPingServer: ok",!0,T):Tn(x,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(q),Tn(x,"TestPingServer: error",!1,T)})}function Tn(h,T,x,P,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),P(x)}catch{}}function ga(){this.g=new Nr}function _a(h,T,x){const P=x||"";try{we(h,function(q,Z){let te=q;f(q)&&(te=Eo(q)),T.push(P+Z+"="+encodeURIComponent(te))})}catch(q){throw T.push(P+"type="+encodeURIComponent("_badmap")),q}}function En(h){this.l=h.Ub||null,this.j=h.eb||!1}V(En,ea),En.prototype.g=function(){return new Ki(this.l,this.j)},En.prototype.i=function(h){return function(){return h}}({});function Ki(h,T){dt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Ki,dt),t=Ki.prototype,t.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,ln(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||u).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,et(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ln(this)),this.g&&(this.readyState=3,ln(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?et(this):ln(this),this.readyState==3&&Wi(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,et(this))},t.Qa=function(h){this.g&&(this.response=h,et(this))},t.ga=function(){this.g&&et(this)};function et(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ln(h)}t.setRequestHeader=function(h,T){this.u.append(h,T)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var x=T.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=T.next();return h.join(`\r
`)};function ln(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ya(h){let T="";return K(h,function(x,P){T+=P,T+=":",T+=x,T+=`\r
`}),T}function Mo(h,T,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=ya(x),typeof h=="string"?x!=null&&encodeURIComponent(String(x)):me(h,T,x))}function Qe(h){dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Qe,dt);var fu=/^https?$/i,va=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,T,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Co.g(),this.v=this.o?tu(this.o):tu(Co),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(Z){pu(this,Z);return}if(h=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var q in P)x.set(q,P[q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Z of P.keys())x.set(Z,P.get(Z));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(va,T,void 0))||P||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,te]of x)this.g.setRequestHeader(Z,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jt(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){pu(this,Z)}};function pu(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,Ta(h),bo(h)}function Ta(h){h.A||(h.A=!0,Et(h,"complete"),Et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Et(this,"complete"),Et(this,"abort"),bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bo(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ce(this):this.bb())},t.bb=function(){Ce(this)};function Ce(h){if(h.h&&typeof a<"u"&&(!h.v[1]||qt(h)!=4||h.Z()!=2)){if(h.u&&qt(h)==4)Xl(h.Ea,0,h);else if(Et(h,"readystatechange"),qt(h)==4){h.h=!1;try{const te=h.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var x;if(!(x=T)){var P;if(P=te===0){var q=String(h.D).match(Ye)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),P=!fu.test(q?q.toLowerCase():"")}x=P}if(x)Et(h,"complete"),Et(h,"success");else{h.m=6;try{var Z=2<qt(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Ta(h)}}finally{bo(h)}}}}function bo(h,T){if(h.g){jt(h);const x=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||Et(h,"ready");try{x.onreadystatechange=P}catch{}}}function jt(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function qt(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),Yd(T)}};function Ea(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qd(h){const T={};h=(h.g&&2<=qt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(N(h[P]))continue;var x=B(h[P]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Z=T[q]||[];T[q]=Z,Z.push(x)}b(T,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(h,T,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||T}function mu(h){this.Aa=0,this.i=[],this.j=new Dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,h),this.cb=vi("retryDelaySeedMs",1e4,h),this.Wa=vi("forwardChannelMaxRetries",2,h),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new aa(h&&h.concurrentRequestLimit),this.Da=new ga,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mu.prototype,t.la=8,t.G=1,t.connect=function(h,T,x,P){Pt(0),this.W=h,this.H=T||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.I=Bo(this,null,this.W),Ji(this)};function Do(h){if(gu(h),h.G==3){var T=h.U++,x=st(h.I);if(me(x,"SID",h.K),me(x,"RID",T),me(x,"TYPE","terminate"),Br(h,x),T=new Ln(h,h.j,T),T.L=2,T.v=yn(st(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(T.v.toString(),"")}catch{}!x&&u.Image&&(new Image().src=T.v,x=!0),x||(T.g=yu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Po(T)}_u(h)}function Lo(h){h.g&&(Fo(h),h.g.cancel(),h.g=null)}function gu(h){Lo(h),h.u&&(u.clearTimeout(h.u),h.u=null),Oo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Ji(h){if(!la(h.h)&&!h.s){h.s=!0;var T=h.Ga;xe||X(),H||(xe(),H=!0),ne.add(T,h),h.B=0}}function jd(h,T){return Hi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=br(v(h.Ga,h,T),Sa(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Ln(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=C(Z),U(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)e:{for(var T=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(T+=P,4096<T){T=x;break e}if(T===4096||x===this.i.length-1){T=x+1;break e}}T=1e3}else T=1e3;T=wa(this,q,T),x=st(this.I),me(x,"RID",h),me(x,"CVER",22),this.D&&me(x,"X-HTTP-Session-Id",this.D),Br(this,x),Z&&(this.O?T="headers="+encodeURIComponent(String(ya(Z)))+"&"+T:this.m&&Mo(x,this.m,Z)),$e(this.h,q),this.Ua&&me(x,"TYPE","init"),this.P?(me(x,"$req",T),me(x,"SID","null"),q.T=!0,ra(q,x,null)):ra(q,x,T),this.G=2}}else this.G==3&&(h?un(this,h):this.i.length==0||la(this.h)||un(this))};function un(h,T){var x;T?x=T.l:x=h.U++;const P=st(h.I);me(P,"SID",h.K),me(P,"RID",x),me(P,"AID",h.T),Br(h,P),h.m&&h.o&&Mo(P,h.m,h.o),x=new Ln(h,h.j,x,h.B+1),h.m===null&&(x.H=h.o),T&&(h.i=T.D.concat(h.i)),T=wa(h,x,1e3),x.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$e(h.h,x),ra(x,P,T)}function Br(h,T){h.H&&K(h.H,function(x,P){me(T,P,x)}),h.l&&we({},function(x,P){me(T,P,x)})}function wa(h,T,x){x=Math.min(h.i.length,x);var P=h.l?v(h.l.Na,h.l,h):null;e:{var q=h.i;let Z=-1;for(;;){const te=["count="+x];Z==-1?0<x?(Z=q[0].g,te.push("ofs="+Z)):Z=0:te.push("ofs="+Z);let Be=!0;for(let ht=0;ht<x;ht++){let be=q[ht].g;const qe=q[ht].map;if(be-=Z,0>be)Z=Math.max(0,q[ht].g-100),Be=!1;else try{_a(qe,te,"req"+be+"_")}catch{P&&P(qe)}}if(Be){P=te.join("&");break e}}}return h=h.i.splice(0,x),T.D=h,P}function Un(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;xe||X(),H||(xe(),H=!0),ne.add(T,h),h.v=0}}function Vo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=br(v(h.Fa,h),Sa(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Uo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=br(v(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Lo(this),Uo(this))};function Fo(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Uo(h){h.g=new Ln(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=st(h.qa);me(T,"RID","rpc"),me(T,"SID",h.K),me(T,"AID",h.T),me(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&me(T,"TO",h.ja),me(T,"TYPE","xmlhttp"),Br(h,T),h.m&&h.o&&Mo(T,h.m,h.o),h.L&&(h.g.I=h.L);var x=h.g;h=h.ia,x.L=1,x.v=yn(st(T)),x.m=null,x.P=!0,oa(x,h)}t.Za=function(){this.C!=null&&(this.C=null,Lo(this),Vo(this),Pt(19))};function Oo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function xa(h,T){var x=null;if(h.g==T){Oo(h),Fo(h),h.g=null;var P=2}else if(Re(h.h,T))x=T.D,Or(h.h,T),P=1;else return;if(h.G!=0){if(T.o)if(P==1){x=T.m?T.m.length:0,T=Date.now()-T.F;var q=h.B;P=xo(),Et(P,new ru(P,x)),Ji(h)}else Un(h);else if(q=T.s,q==3||q==0&&0<T.X||!(P==1&&jd(h,T)||P==2&&Vo(h)))switch(x&&0<x.length&&(T=h.h,T.i=T.i.concat(x)),q){case 1:Ti(h,5);break;case 4:Ti(h,10);break;case 3:Ti(h,6);break;default:Ti(h,2)}}}function Sa(h,T){let x=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(x*=2),x*T}function Ti(h,T){if(h.j.info("Error code "+T),T==2){var x=v(h.fb,h),P=h.Xa;const q=!P;P=new _n(P||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ro(P,"https"),yn(P),q?He(P.toString(),x):hu(P.toString(),x)}else Pt(2);h.G=0,h.l&&h.l.sa(T),_u(h),gu(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function _u(h){if(h.G=0,h.ka=[],h.l){const T=gi(h.h);(T.length!=0||h.i.length!=0)&&(O(h.ka,T),O(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function Bo(h,T,x){var P=x instanceof _n?st(x):new _n(x);if(P.g!="")T&&(P.g=T+"."+P.g),_i(P,P.s);else{var q=u.location;P=q.protocol,T=T?T+"."+q.hostname:q.hostname,q=+q.port;var Z=new _n(null);P&&Ro(Z,P),T&&(Z.g=T),q&&_i(Z,q),x&&(Z.l=x),P=Z}return x=h.D,T=h.ya,x&&T&&me(P,x,T),me(P,"VER",h.la),Br(h,P),P}function yu(h,T,x){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new Qe(new En({eb:x})):new Qe(h.pa),T.Ha(h.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}t=Ia.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(h,T){return new wt(h,T)};function wt(h,T){dt.call(this),this.g=new mu(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!N(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!N(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new wn(this)}V(wt,dt),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){Do(this.g)},wt.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.u&&(x={},x.__data__=Eo(h),h=x);T.i.push(new Ur(T.Ya++,h)),T.G==3&&Ji(T)},wt.prototype.N=function(){this.g.l=null,delete this.j,Do(this.g),delete this.g,wt.aa.N.call(this)};function jn(h){wo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const x in T){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}V(jn,wo);function vu(){na.call(this),this.status=1}V(vu,na);function wn(h){this.g=h}V(wn,Ia),wn.prototype.ua=function(){Et(this.g,"a")},wn.prototype.ta=function(h){Et(this.g,new jn(h))},wn.prototype.sa=function(h){Et(this.g,new vu)},wn.prototype.ra=function(){Et(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,BE=function(){return new zr},OE=function(){return xo()},UE=fi,Of={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lr.NO_ERROR=0,Lr.TIMEOUT=8,Lr.HTTP_ERROR=6,_c=Lr,Io.COMPLETE="complete",FE=Io,ta.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",dt.prototype.listen=dt.prototype.K,$a=ta,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,VE=Qe}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});const G_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new IE("@firebase/firestore");function Ua(){return oo.logLevel}function se(t,...e){if(oo.logLevel<=Le.DEBUG){const n=e.map(pm);oo.debug(`Firestore (${zs}): ${t}`,...n)}}function Di(t,...e){if(oo.logLevel<=Le.ERROR){const n=e.map(pm);oo.error(`Firestore (${zs}): ${t}`,...n)}}function ks(t,...e){if(oo.logLevel<=Le.WARN){const n=e.map(pm);oo.warn(`Firestore (${zs}): ${t}`,...n)}}function pm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: `+t;throw Di(e),new Error(e)}function Ge(t,e){t||ge()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends co{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class FP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UP{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ge(typeof i.accessToken=="string"),new zE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Ot(e)}}class OP{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BP{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new OP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ge(this.o===void 0);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.R=n.token,new zP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=HP(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Fe(t,e){return t<e?-1:t>e?1:0}function Ns(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Tt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Tt(0,0))}static max(){return new Te(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n,i){n===void 0?n=0:n>e.length&&ge(),i===void 0?i=e.length-n:i>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xe extends Rl{construct(e,n,i){return new Xe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const qP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Rl{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return qP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ue(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ue(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ue(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ue(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Xe.fromString(e))}static fromName(e){return new de(Xe.fromString(e).popFirst(5))}static empty(){return new de(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Xe(e.slice()))}}function $P(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new Tr(r,de.empty(),e)}function KP(t){return new Tr(t.readTime,t.key,-1)}class Tr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Tr(Te.min(),de.empty(),-1)}static max(){return new Tr(Te.max(),de.empty(),-1)}}function WP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==JP)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(g=>{a[f]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function YP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mm.oe=-1;function Nd(t){return t==null}function Qc(t){return t===0&&1/t==-1/0}function QP(t){return typeof t=="number"&&Number.isInteger(t)&&!Qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??kt.RED,this.left=r??kt.EMPTY,this.right=o??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new kt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,i,r,o){return this}insert(e,n,i){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new q_(this.data.getIterator())}getIteratorFrom(e){return new q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new bt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qE("Invalid base64 string: "+o):o}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(Ge(!!t),typeof t=="string"){let e=0;const n=jP.exec(t);if(Ge(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function so(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _m(t){const e=t.mapValue.fields.__previous_value__;return gm(e)?_m(e):e}function kl(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,i,r,o,a,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f}}class Nl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu={mapValue:{}};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gm(t)?4:tR(t)?9007199254740991:eR(t)?10:11:ge()}function ci(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kl(t).isEqual(kl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=Er(r.timestampValue),u=Er(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return so(r.bytesValue).isEqual(so(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ut(r.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(r.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ut(r.integerValue)===ut(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ut(r.doubleValue),u=ut(o.doubleValue);return a===u?Qc(a)===Qc(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(H_(a)!==H_(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!ci(a[d],u[d])))return!1;return!0}(t,e);default:return ge()}}function Ml(t,e){return(t.values||[]).find(n=>ci(n,e))!==void 0}function Ms(t,e){if(t===e)return 0;const n=ao(t),i=ao(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ut(o.integerValue||o.doubleValue),d=ut(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return $_(t.timestampValue,e.timestampValue);case 4:return $_(kl(t),kl(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(o,a){const u=so(o),d=so(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Fe(u[f],d[f]);if(g!==0)return g}return Fe(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Fe(ut(o.latitude),ut(a.latitude));return u!==0?u:Fe(ut(o.longitude),ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K_(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,d,f,g;const y=o.fields||{},v=a.fields||{},S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,V=(d=v.value)===null||d===void 0?void 0:d.arrayValue,M=Fe(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((g=V==null?void 0:V.values)===null||g===void 0?void 0:g.length)||0);return M!==0?M:K_(S,V)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Yu.mapValue&&a===Yu.mapValue)return 0;if(o===Yu.mapValue)return 1;if(a===Yu.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=Fe(d[y],g[y]);if(v!==0)return v;const S=Ms(u[d[y]],f[g[y]]);if(S!==0)return S}return Fe(d.length,g.length)}(t.mapValue,e.mapValue);default:throw ge()}}function $_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Er(t),i=Er(e),r=Fe(n.seconds,i.seconds);return r!==0?r:Fe(n.nanos,i.nanos)}function K_(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ms(n[r],i[r]);if(o)return o}return Fe(n.length,i.length)}function bs(t){return Bf(t)}function Bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Er(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return so(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Bf(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Bf(n.fields[a])}`;return r+"}"}(t.mapValue):ge()}function zf(t){return!!t&&"integerValue"in t}function ym(t){return!!t&&"arrayValue"in t}function W_(t){return!!t&&"nullValue"in t}function J_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yc(t){return!!t&&"mapValue"in t}function eR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=rl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=rl(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Gs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Cn(rl(this.value))}}function $E(t){const e=[];return Gs(t.fields,(n,i)=>{const r=new Nt([n]);if(yc(i)){const o=$E(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new zt(e,0,Te.min(),Te.min(),Te.min(),Cn.empty(),0)}static newFoundDocument(e,n,i,r){return new zt(e,1,n,Te.min(),i,r,0)}static newNoDocument(e,n){return new zt(e,2,n,Te.min(),Te.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,Te.min(),Te.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.position=e,this.inclusive=n}}function Z_(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=de.comparator(de.fromName(a.referenceValue),n.key):i=Ms(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Y_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function nR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{}class yt extends KE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new rR(e,n,i):n==="array-contains"?new aR(e,i):n==="in"?new lR(e,i):n==="not-in"?new uR(e,i):n==="array-contains-any"?new cR(e,i):new yt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new oR(e,i):new sR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ms(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(Ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends KE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new di(e,n)}matches(e){return WE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WE(t){return t.op==="and"}function JE(t){return iR(t)&&WE(t)}function iR(t){for(const e of t.filters)if(e instanceof di)return!1;return!0}function Gf(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+bs(t.value);if(JE(t))return t.filters.map(e=>Gf(e)).join(",");{const e=t.filters.map(n=>Gf(n)).join(",");return`${t.op}(${e})`}}function ZE(t,e){return t instanceof yt?function(i,r){return r instanceof yt&&i.op===r.op&&i.field.isEqual(r.field)&&ci(i.value,r.value)}(t,e):t instanceof di?function(i,r){return r instanceof di&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&ZE(a,r.filters[u]),!0):!1}(t,e):void ge()}function YE(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${bs(n.value)}`}(t):t instanceof di?function(n){return n.op.toString()+" {"+n.getFilters().map(YE).join(" ,")+"}"}(t):"Filter"}class rR extends yt{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class oR extends yt{constructor(e,n){super(e,"in",n),this.keys=QE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sR extends yt{constructor(e,n){super(e,"not-in",n),this.keys=QE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class aR extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ym(n)&&Ml(n.arrayValue,this.value)}}class lR extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ml(this.value.arrayValue,n)}}class uR extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ml(this.value.arrayValue,n)}}class cR extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ml(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function Q_(t,e=null,n=[],i=[],r=null,o=null,a=null){return new dR(t,e,n,i,r,o,a)}function vm(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Gf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>bs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>bs(i)).join(",")),e.ue=n}return e.ue}function Tm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y_(t.startAt,e.startAt)&&Y_(t.endAt,e.endAt)}function Hf(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hR(t,e,n,i,r,o,a,u){return new Md(t,e,n,i,r,o,a,u)}function jE(t){return new Md(t)}function j_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fR(t){return t.collectionGroup!==null}function ol(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new bt(Nt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Xc(o,i))}),n.has(Nt.keyField().canonicalString())||e.ce.push(new Xc(Nt.keyField(),i))}return e.ce}function ai(t){const e=Ee(t);return e.le||(e.le=pR(e,ol(t))),e.le}function pR(t,e){if(t.limitType==="F")return Q_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Xc(r.field,o)});const n=t.endAt?new jc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new jc(t.startAt.position,t.startAt.inclusive):null;return Q_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function qf(t,e,n){return new Md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bd(t,e){return Tm(ai(t),ai(e))&&t.limitType===e.limitType}function XE(t){return`${vm(ai(t))}|lt:${t.limitType}`}function Jo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YE(r)).join(", ")}]`),Nd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>bs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>bs(r)).join(",")),`Target(${i})`}(ai(t))}; limitType=${t.limitType})`}function Dd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):de.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of ol(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const f=Z_(a,u,d);return a.inclusive?f<=0:f<0}(i.startAt,ol(i),r)||i.endAt&&!function(a,u,d){const f=Z_(a,u,d);return a.inclusive?f>=0:f>0}(i.endAt,ol(i),r))}(t,e)}function mR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ew(t){return(e,n)=>{let i=!1;for(const r of ol(t)){const o=gR(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function gR(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Ms(d,f):ge()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return HE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new ot(de.comparator);function Li(){return _R}const tw=new ot(de.comparator);function Ka(...t){let e=tw;for(const n of t)e=e.insert(n.key,n);return e}function nw(t){let e=tw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Zr(){return sl()}function iw(){return sl()}function sl(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const yR=new ot(de.comparator),vR=new bt(de.comparator);function ke(...t){let e=vR;for(const n of t)e=e.add(n);return e}const TR=new bt(Fe);function ER(){return TR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function rw(t){return{integerValue:""+t}}function wR(t,e){return QP(e)?rw(e):Em(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this._=void 0}}function xR(t,e,n){return t instanceof ed?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&gm(o)&&(o=_m(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof bl?sw(t,e):t instanceof Dl?aw(t,e):function(r,o){const a=ow(r,o),u=X_(a)+X_(r.Pe);return zf(a)&&zf(r.Pe)?rw(u):Em(r.serializer,u)}(t,e)}function SR(t,e,n){return t instanceof bl?sw(t,e):t instanceof Dl?aw(t,e):n}function ow(t,e){return t instanceof td?function(i){return zf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class ed extends Ld{}class bl extends Ld{constructor(e){super(),this.elements=e}}function sw(t,e){const n=lw(e);for(const i of t.elements)n.some(r=>ci(r,i))||n.push(i);return{arrayValue:{values:n}}}class Dl extends Ld{constructor(e){super(),this.elements=e}}function aw(t,e){let n=lw(e);for(const i of t.elements)n=n.filter(r=>!ci(r,i));return{arrayValue:{values:n}}}class td extends Ld{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function X_(t){return ut(t.integerValue||t.doubleValue)}function lw(t){return ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function IR(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof bl&&r instanceof bl||i instanceof Dl&&r instanceof Dl?Ns(i.elements,r.elements,ci):i instanceof td&&r instanceof td?ci(i.Pe,r.Pe):i instanceof ed&&r instanceof ed}(t.transform,e.transform)}class CR{constructor(e,n){this.version=e,this.transformResults=n}}class li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vd{}function uw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wm(t.key,li.none()):new ql(t.key,t.data,li.none());{const n=t.data,i=Cn.empty();let r=new bt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ho(t.key,i,new Hn(r.toArray()),li.none())}}function AR(t,e,n){t instanceof ql?function(r,o,a){const u=r.value.clone(),d=ty(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ho?function(r,o,a){if(!vc(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=ty(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(cw(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function al(t,e,n,i){return t instanceof ql?function(o,a,u,d){if(!vc(o.precondition,a))return u;const f=o.value.clone(),g=ny(o.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ho?function(o,a,u,d){if(!vc(o.precondition,a))return u;const f=ny(o.fieldTransforms,d,a),g=a.data;return g.setAll(cw(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return vc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function PR(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=ow(i.transform,r||null);o!=null&&(n===null&&(n=Cn.empty()),n.set(i.field,o))}return n||null}function ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ns(i,r,(o,a)=>IR(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ql extends Vd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ho extends Vd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ty(t,e,n){const i=new Map;Ge(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,SR(a,u,n[r]))}return i}function ny(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,xR(o,a,e))}return i}class wm extends Vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RR extends Vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&AR(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=al(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=al(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=iw();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=uw(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,i)=>ey(n,i))&&Ns(this.baseMutations,e.baseMutations,(n,i)=>ey(n,i))}}class xm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ge(e.mutations.length===i.length);let r=function(){return yR}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new xm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,De;function bR(t){switch(t){default:return ge();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function dw(t){if(t===void 0)return Di("GRPC error has no .code"),j.UNKNOWN;switch(t){case pt.OK:return j.OK;case pt.CANCELLED:return j.CANCELLED;case pt.UNKNOWN:return j.UNKNOWN;case pt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case pt.INTERNAL:return j.INTERNAL;case pt.UNAVAILABLE:return j.UNAVAILABLE;case pt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case pt.NOT_FOUND:return j.NOT_FOUND;case pt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case pt.ABORTED:return j.ABORTED;case pt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case pt.DATA_LOSS:return j.DATA_LOSS;default:return ge()}}(De=pt||(pt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new Xr([4294967295,4294967295],0);function iy(t){const e=DR().encode(t),n=new LE;return n.update(e),new Uint8Array(n.digest())}function ry(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xr([n,i],0),new Xr([r,o],0)]}class Sm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wa(`Invalid padding: ${n}`);if(i<0)throw new Wa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Xr.fromNumber(i)));return r.compare(LR)===1&&(r=new Xr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=iy(e),[i,r]=ry(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Sm(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=iy(e),[i,r]=ry(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Fd(Te.min(),r,new ot(Fe),Li(),ke())}}class $l{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new $l(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class hw{constructor(e,n){this.targetId=e,this.me=n}}class fw{constructor(e,n,i=Lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class oy{constructor(){this.fe=0,this.ge=ay(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),i=ke();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ge()}}),new $l(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=ay()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Li(),this.qe=sy(),this.Qe=new ot(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Hf(o))if(i===0){const a=new de(o.path);this.Ue(n,a,zt.newNoDocument(a,Te.min()))}else Ge(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),d=u?this.Xe(u,e,a):1;if(d!==0){this.je(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=so(i).toUint8Array()}catch(d){if(d instanceof qE)return ks("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Sm(a,r,o)}catch(d){return ks(d instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&Hf(u.target)){const d=new de(u.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,zt.newNoDocument(d,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=ke();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Fd(e,n,this.Qe,this.ke,i);return this.ke=Li(),this.qe=sy(),this.Qe=new ot(Fe),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new oy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new bt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sy(){return new ot(de.comparator)}function ay(){return new ot(de.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OR={and:"AND",or:"OR"};class BR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $f(t,e){return t.useProto3Json||Nd(e)?e:{value:e}}function nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zR(t,e){return nd(t,e.toTimestamp())}function ui(t){return Ge(!!t),Te.fromTimestamp(function(n){const i=Er(n);return new Tt(i.seconds,i.nanos)}(t))}function Im(t,e){return Kf(t,e).canonicalString()}function Kf(t,e){const n=function(r){return new Xe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mw(t){const e=Xe.fromString(t);return Ge(Tw(e)),e}function Wf(t,e){return Im(t.databaseId,e.path)}function Dh(t,e){const n=mw(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(_w(n))}function gw(t,e){return Im(t.databaseId,e)}function GR(t){const e=mw(t);return e.length===4?Xe.emptyPath():_w(e)}function Jf(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _w(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ly(t,e,n){return{name:Wf(t,e),fields:n.value.mapValue.fields}}function HR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Ge(g===void 0||typeof g=="string"),Lt.fromBase64String(g||"")):(Ge(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Lt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const g=f.code===void 0?j.UNKNOWN:dw(f.code);return new ue(g,f.message||"")}(a);n=new fw(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Dh(t,i.document.name),o=ui(i.document.updateTime),a=i.document.createTime?ui(i.document.createTime):Te.min(),u=new Cn({mapValue:{fields:i.document.fields}}),d=zt.newFoundDocument(r,o,a,u),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Tc(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Dh(t,i.document),o=i.readTime?ui(i.readTime):Te.min(),a=zt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Tc([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Dh(t,i.document),o=i.removedTargetIds||[];n=new Tc([],o,r,null)}else{if(!("filter"in e))return ge();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new MR(r,o),u=i.targetId;n=new hw(u,a)}}return n}function qR(t,e){let n;if(e instanceof ql)n={update:ly(t,e.key,e.value)};else if(e instanceof wm)n={delete:Wf(t,e.key)};else if(e instanceof ho)n={update:ly(t,e.key,e.data),updateMask:XR(e.fieldMask)};else{if(!(e instanceof RR))return ge();n={verify:Wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof ed)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof bl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Dl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof td)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw ge()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:zR(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge()}(t,e.precondition)),n}function $R(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?ui(r.updateTime):ui(o);return a.isEqual(Te.min())&&(a=ui(o)),new CR(a,r.transformResults||[])}(n,e))):[]}function KR(t,e){return{documents:[gw(t,e.path)]}}function WR(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gw(t,r);const o=function(f){if(f.length!==0)return vw(di.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:Zo(v.field),direction:YR(v.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=$f(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function JR(t){let e=GR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ge(i===1);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=yw(y);return v instanceof di&&JE(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(V){return new Xc(Yo(V.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Nd(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(y){const v=!!y.before,S=y.values||[];return new jc(S,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,S=y.values||[];return new jc(S,v)}(n.endAt)),hR(e,r,a,o,u,"F",d,f)}function ZR(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Yo(n.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Yo(n.unaryFilter.field);return yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yo(n.unaryFilter.field);return yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Yo(n.unaryFilter.field);return yt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return yt.create(Yo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return di.create(n.compositeFilter.filters.map(i=>yw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function YR(t){return FR[t]}function QR(t){return UR[t]}function jR(t){return OR[t]}function Zo(t){return{fieldPath:t.canonicalString()}}function Yo(t){return Nt.fromServerFormat(t.fieldPath)}function vw(t){return t instanceof yt?function(n){if(n.op==="=="){if(J_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NAN"}};if(W_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NAN"}};if(W_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(n.field),op:QR(n.op),value:n.value}}}(t):t instanceof di?function(n){const i=n.getFilters().map(r=>vw(r));return i.length===1?i[0]:{compositeFilter:{op:jR(n.op),filters:i}}}(t):ge()}function XR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,i,r,o=Te.min(),a=Te.min(),u=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.ct=e}}function tk(t){const e=JR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.un=new ik}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Tr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class ik{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new bt(Xe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ds(0)}static kn(){return new Ds(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&al(i.mutation,r,Hn.empty(),Tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Ka();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Li();const a=sl(),u=function(){return sl()}();return n.forEach((d,f)=>{const g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof ho)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),al(g.mutation,f,g.mutation.getFieldMask(),Tt.now())):a.set(f.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>a.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new ok(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const i=sl();let r=new ot((a,u)=>a-u),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=i.get(d)||Hn.empty();g=u.applyToLocalView(f,g),i.set(d,g);const y=(r.get(u.batchId)||ke()).add(d);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=iw();g.forEach(v=>{if(!o.has(v)){const S=uw(n.get(v),i.get(v));S!==null&&y.set(v,S),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(Zr());let u=-1,d=o;return a.next(f=>Q.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Q.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{d=d.insert(g,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,ke())).next(g=>({batchId:u,changes:nw(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let r=Ka();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Ka();return this.indexManager.getCollectionParents(e,o).next(u=>Q.forEach(u,d=>{const f=function(y,v){return new Md(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,zt.newInvalidDocument(g)))});let u=Ka();return a.forEach((d,f)=>{const g=o.get(d);g!==void 0&&al(g.mutation,f,Hn.empty(),Tt.now()),Dd(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ui(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:tk(r.bundledQuery),readTime:ui(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.overlays=new ot(de.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Zr();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=Zr(),o=n.length+1,a=new de(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ot((f,g)=>f-g);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=Zr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Zr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=r)););return Q.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new NR(n,i));let o=this.Ir.get(n);o===void 0&&(o=ke(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.Tr=new bt(St.Er),this.dr=new bt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new St(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new St(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new de(new Xe([])),i=new St(n,e),r=new St(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new Xe([])),i=new St(n,e),r=new St(n,e+1);let o=ke();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new St(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new bt(St.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kR(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new St(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new St(n,0),r=new St(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bt(Fe);return n.forEach(r=>{const o=new St(r,0),a=new St(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;de.isDocumentKey(o)||(o=o.child(""));const a=new St(new de(o),0);let u=new bt(Fe);return this.br.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.wr)),!0)},a),Q.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,r=>{const o=new St(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new St(n,0),r=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.Mr=e,this.docs=function(){return new ot(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let i=Li();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():zt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Li();const a=n.path,u=new de(a.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||WP(KP(g),i)<=0||(r.has(g.key)||Dd(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ge()}Or(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new hk(this)}getSize(e){return Q.resolve(this.size)}}class hk extends rk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.persistence=e,this.Nr=new Hs(n=>vm(n),Tm),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cm,this.targetCount=0,this.kr=Ds.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ds(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mm(0),this.Kr=!1,this.Kr=!0,this.$r=new uk,this.referenceDelegate=e(this),this.Ur=new fk(this),this.indexManager=new nk,this.remoteDocumentCache=function(r){return new dk(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ek(n),this.Gr=new ak(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new ck(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new mk(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class mk extends ZP{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.Jr=new Cm,this.Yr=null}static Zr(e){return new Am(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const r=de.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,Te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ke(),r=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Pm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TA()?8:YP(yA())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new gk;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Ua()<=Le.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Ua()<=Le.DEBUG&&se("QueryEngine","Query:",Jo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ua()<=Le.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):Q.resolve())}Yi(e,n){if(j_(n))return Q.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=qf(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ke(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.ts(n,u);return this.ns(n,f,a,d.readTime)?this.Yi(e,qf(n,null,"F")):this.rs(e,f,n,d)}))})))}Zi(e,n,i,r){return j_(n)||r.isEqual(Te.min())?Q.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?Q.resolve(null):(Ua()<=Le.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jo(n)),this.rs(e,a,n,$P(r,-1)).next(u=>u))})}ts(e,n){let i=new bt(ew(e));return n.forEach((r,o)=>{Dd(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Ua()<=Le.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Jo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Tr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ot(Fe),this._s=new Hs(o=>vm(o),Tm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function vk(t,e,n,i){return new yk(t,e,n,i)}async function Ew(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=ke();for(const f of r){a.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function Tk(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,g){const y=f.batch,v=y.keys();let S=Q.resolve();return v.forEach(V=>{S=S.next(()=>g.getEntry(d,V)).next(M=>{const O=f.docVersions.get(V);Ge(O!==null),M.version.compareTo(O)<0&&(y.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),g.addEntry(M)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=ke();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ww(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Ek(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((g,y)=>{const v=r.get(y);if(!v)return;u.push(n.Ur.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,g.addedDocuments,y)));let S=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Lt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),r=r.insert(y,S),function(M,O,R){return M.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(v,S,g)&&u.push(n.Ur.updateTargetData(o,S))});let d=Li(),f=ke();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(wk(o,a,e.documentUpdates).next(g=>{d=g.Ps,f=g.Is})),!i.isEqual(Te.min())){const g=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return Q.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.os=r,o))}function wk(t,e,n){let i=ke(),r=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Li();return n.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Te.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):se("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ps:a,Is:r}})}function xk(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Sk(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new rr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Zf(t,e,n){const i=Ee(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Hl(a))throw a;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function uy(t,e,n){const i=Ee(t);let r=Te.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,g){const y=Ee(d),v=y._s.get(g);return v!==void 0?Q.resolve(y.os.get(v)):y.Ur.getTargetData(f,g)}(i,a,ai(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:Te.min(),n?o:ke())).next(u=>(Ik(i,mR(e),u),{documents:u,Ts:o})))}function Ik(t,e,n){let i=t.us.get(e)||Te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class cy{constructor(){this.activeTargetIds=ER()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ck{constructor(){this.so=new cy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function Lh(){return Qu===null?Qu=function(){return 268435456+Math.round(2147483648*Math.random())}():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class kk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=Lh(),d=this.xo(n,i.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(n,d,f,r).then(g=>(se("RestConnection",`Received RPC '${n}' ${u}: `,g),g),g=>{throw ks("RestConnection",`RPC '${n}' ${u} failed with error: `,g,"url: ",d,"request:",r),g})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=Pk[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Lh();return new Promise((a,u)=>{const d=new VE;d.setWithCredentials(!0),d.listenOnce(FE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case _c.NO_ERROR:const g=d.getResponseJson();se(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case _c.TIMEOUT:se(Ut,`RPC '${e}' ${o} timed out`),u(new ue(j.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const y=d.getStatus();if(se(Ut,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const V=function(O){const R=O.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(R)>=0?R:j.UNKNOWN}(S.status);u(new ue(V,S.message))}else u(new ue(j.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ue(j.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{se(Ut,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);se(Ut,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,i,15)})}Bo(e,n,i){const r=Lh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=BE(),u=OE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const g=o.join("");se(Ut,`Creating RPC '${e}' stream ${r}: ${g}`,d);const y=a.createWebChannel(g,d);let v=!1,S=!1;const V=new Rk({Io:O=>{S?se(Ut,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(v||(se(Ut,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),se(Ut,`RPC '${e}' stream ${r} sending:`,O),y.send(O))},To:()=>y.close()}),M=(O,R,N)=>{O.listen(R,I=>{try{N(I)}catch(G){setTimeout(()=>{throw G},0)}})};return M(y,$a.EventType.OPEN,()=>{S||(se(Ut,`RPC '${e}' stream ${r} transport opened.`),V.yo())}),M(y,$a.EventType.CLOSE,()=>{S||(S=!0,se(Ut,`RPC '${e}' stream ${r} transport closed`),V.So())}),M(y,$a.EventType.ERROR,O=>{S||(S=!0,ks(Ut,`RPC '${e}' stream ${r} transport errored:`,O),V.So(new ue(j.UNAVAILABLE,"The operation could not be completed")))}),M(y,$a.EventType.MESSAGE,O=>{var R;if(!S){const N=O.data[0];Ge(!!N);const I=N,G=I.error||((R=I[0])===null||R===void 0?void 0:R.error);if(G){se(Ut,`RPC '${e}' stream ${r} received error:`,G);const W=G.status;let K=function(k){const U=pt[k];if(U!==void 0)return dw(U)}(W),b=G.message;K===void 0&&(K=j.INTERNAL,b="Unknown error status: "+W+" with message "+G.message),S=!0,V.So(new ue(K,b)),y.close()}else se(Ut,`RPC '${e}' stream ${r} received:`,N),V.bo(N)}}),M(u,UE.STAT_EVENT,O=>{O.stat===Of.PROXY?se(Ut,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===Of.NOPROXY&&se(Ut,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){return new BR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,i,r,o,a,u,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ue(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nk extends Sw{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HR(this.serializer,e),i=function(o){if(!("targetChange"in o))return Te.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?ui(a.readTime):Te.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Jf(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=Hf(d)?{documents:KR(o,d)}:{query:WR(o,d)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=pw(o,a.resumeToken);const f=$f(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Te.min())>0){u.readTime=nd(o,a.snapshotVersion.toTimestamp());const f=$f(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=ZR(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Jf(this.serializer),n.removeTarget=e,this.a_(n)}}class Mk extends Sw{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$R(e.writeResults,e.commitTime),i=ui(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Jf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>qR(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ue(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Kf(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(j.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Kf(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(j.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Dk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{fo(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Ee(d);f.L_.add(4),await Kl(f),f.q_.set("Unknown"),f.L_.delete(4),await Od(f)}(this))})}),this.q_=new Dk(i,r)}}async function Od(t){if(fo(t))for(const e of t.B_)await e(!0)}async function Kl(t){for(const e of t.B_)await e(!1)}function Iw(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Mm(n)?Nm(n):qs(n).r_()&&km(n,e))}function Rm(t,e){const n=Ee(t),i=qs(n);n.N_.delete(e),i.r_()&&Cw(n,e),n.N_.size===0&&(i.r_()?i.o_():fo(n)&&n.q_.set("Unknown"))}function km(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).A_(e)}function Cw(t,e){t.Q_.xe(e),qs(t).R_(e)}function Nm(t){t.Q_=new VR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.q_.v_()}function Mm(t){return fo(t)&&!qs(t).n_()&&t.N_.size>0}function fo(t){return Ee(t).L_.size===0}function Aw(t){t.Q_=void 0}async function Vk(t){t.q_.set("Online")}async function Fk(t){t.N_.forEach((e,n)=>{km(t,e)})}async function Uk(t,e){Aw(t),Mm(t)?(t.q_.M_(e),Nm(t)):t.q_.set("Unknown")}async function Ok(t,e,n){if(t.q_.set("Online"),e instanceof fw&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await id(t,i)}else if(e instanceof Tc?t.Q_.Ke(e):e instanceof hw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Te.min()))try{const i=await ww(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.N_.get(f);g&&o.N_.set(f,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,f)=>{const g=o.N_.get(d);if(!g)return;o.N_.set(d,g.withResumeToken(Lt.EMPTY_BYTE_STRING,g.snapshotVersion)),Cw(o,d);const y=new rr(g.target,d,f,g.sequenceNumber);km(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await id(t,i)}}async function id(t,e,n){if(!Hl(e))throw e;t.L_.add(1),await Kl(t),t.q_.set("Offline"),n||(n=()=>ww(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Od(t)})}function Pw(t,e){return e().catch(n=>id(t,n,e))}async function Bd(t){const e=Ee(t),n=wr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Bk(e);)try{const r=await xk(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,zk(e,r)}catch(r){await id(e,r)}Rw(e)&&kw(e)}function Bk(t){return fo(t)&&t.O_.length<10}function zk(t,e){t.O_.push(e);const n=wr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Rw(t){return fo(t)&&!wr(t).n_()&&t.O_.length>0}function kw(t){wr(t).start()}async function Gk(t){wr(t).p_()}async function Hk(t){const e=wr(t);for(const n of t.O_)e.m_(n.mutations)}async function qk(t,e,n){const i=t.O_.shift(),r=xm.from(i,e,n);await Pw(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Bd(t)}async function $k(t,e){e&&wr(t).V_&&await async function(i,r){if(function(a){return bR(a)&&a!==j.ABORTED}(r.code)){const o=i.O_.shift();wr(i).s_(),await Pw(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Bd(i)}}(t,e),Rw(t)&&kw(t)}async function hy(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=fo(n);n.L_.add(3),await Kl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Od(n)}async function Kk(t,e){const n=Ee(t);e?(n.L_.delete(2),await Od(n)):e||(n.L_.add(2),await Kl(n),n.q_.set("Unknown"))}function qs(t){return t.K_||(t.K_=function(n,i,r){const o=Ee(n);return o.w_(),new Nk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:Vk.bind(null,t),Ro:Fk.bind(null,t),mo:Uk.bind(null,t),d_:Ok.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Mm(t)?Nm(t):t.q_.set("Unknown")):(await t.K_.stop(),Aw(t))})),t.K_}function wr(t){return t.U_||(t.U_=function(n,i,r){const o=Ee(n);return o.w_(),new Mk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Gk.bind(null,t),mo:$k.bind(null,t),f_:Hk.bind(null,t),g_:qk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bd(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new bm(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(Di("AsyncQueue",`${e}: ${t}`),Hl(t))return new ue(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ys;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.W_=new ot(de.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ls{constructor(e,n,i,r,o,a,u,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ls(e,n,ys.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Jk{constructor(){this.queries=py(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ee(n),o=r.queries;r.queries=py(),o.forEach((a,u)=>{for(const d of u.j_)d.onError(i)})})(this,new ue(j.ABORTED,"Firestore shutting down"))}}function py(){return new Hs(t=>XE(t),bd)}async function Zk(t,e){const n=Ee(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Wk,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Dm(a,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Lm(n)}async function Yk(t,e){const n=Ee(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Qk(t,e){const n=Ee(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&Lm(n)}function jk(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Lm(t){t.Y_.forEach(e=>{e.next()})}var Yf,my;(my=Yf||(Yf={})).ea="default",my.Cache="cache";class Xk{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ls(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.key=e}}class Mw{constructor(e){this.key=e}}class eN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=ew(e),this.Ra=new ys(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new fy,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,y)=>{const v=r.get(g),S=Dd(this.query,y)?y:null,V=!!v&&this.mutatedKeys.has(v.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;v&&S?v.data.isEqual(S.data)?V!==M&&(i.track({type:3,doc:S}),O=!0):this.ga(v,S)||(i.track({type:2,doc:S}),O=!0,(d&&this.Aa(S,d)>0||f&&this.Aa(S,f)<0)&&(u=!0)):!v&&S?(i.track({type:0,doc:S}),O=!0):v&&!S&&(i.track({type:1,doc:v}),O=!0,(d||f)&&(u=!0)),O&&(S?(a=a.add(S),o=M?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((g,y)=>function(S,V){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return M(S)-M(V)}(g.type,y.type)||this.Aa(g.doc,y.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,f=d!==this.Ea;return this.Ea=d,a.length!==0||f?{snapshot:new Ls(this.query,e.Ra,o,a,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Mw(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Nw(i))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ls.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class nN{constructor(e){this.key=e,this.va=!1}}class iN{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Hs(u=>XE(u),bd),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(de.comparator),this.Na=new Map,this.La=new Cm,this.Ba={},this.ka=new Map,this.qa=Ds.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rN(t,e,n=!0){const i=Uw(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await bw(i,e,n,!0),r}async function oN(t,e){const n=Uw(t);await bw(n,e,!0,!1)}async function bw(t,e,n,i){const r=await Sk(t.localStore,ai(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await sN(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Iw(t.remoteStore,r),u}async function sN(t,e,n,i,r){t.Ka=(y,v,S)=>async function(M,O,R,N){let I=O.view.ma(R);I.ns&&(I=await uy(M.localStore,O.query,!1).then(({documents:b})=>O.view.ma(b,I)));const G=N&&N.targetChanges.get(O.targetId),W=N&&N.targetMismatches.get(O.targetId)!=null,K=O.view.applyChanges(I,M.isPrimaryClient,G,W);return _y(M,O.targetId,K.wa),K.snapshot}(t,y,v,S);const o=await uy(t.localStore,e,!0),a=new eN(e,o.Ts),u=a.ma(o.documents),d=$l.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,d);_y(t,n,f.wa);const g=new tN(e,n,a);return t.Fa.set(e,g),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function aN(t,e,n){const i=Ee(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!bd(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Zf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Rm(i.remoteStore,r.targetId),Qf(i,r.targetId)}).catch(Gl)):(Qf(i,r.targetId),await Zf(i.localStore,r.targetId,!0))}async function lN(t,e){const n=Ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Rm(n.remoteStore,i.targetId))}async function uN(t,e,n){const i=gN(t);try{const r=await function(a,u){const d=Ee(a),f=Tt.now(),g=u.reduce((S,V)=>S.add(V.key),ke());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let V=Li(),M=ke();return d.cs.getEntries(S,g).next(O=>{V=O,V.forEach((R,N)=>{N.isValidDocument()||(M=M.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,V)).next(O=>{y=O;const R=[];for(const N of u){const I=PR(N,y.get(N.key).overlayedDocument);I!=null&&R.push(new ho(N.key,I,$E(I.value.mapValue),li.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,R,u)}).next(O=>{v=O;const R=O.applyToLocalDocumentSet(y,M);return d.documentOverlayCache.saveOverlays(S,O.batchId,R)})}).then(()=>({batchId:v.batchId,changes:nw(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let f=a.Ba[a.currentUser.toKey()];f||(f=new ot(Fe)),f=f.insert(u,d),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,n),await Wl(i,r.changes),await Bd(i.remoteStore)}catch(r){const o=Dm(r,"Failed to persist write");n.reject(o)}}async function Dw(t,e){const n=Ee(t);try{const i=await Ek(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(Ge(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Ge(a.va):r.removedDocuments.size>0&&(Ge(a.va),a.va=!1))}),await Wl(n,i,e)}catch(i){await Gl(i)}}function gy(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ee(a);d.onlineState=u;let f=!1;d.queries.forEach((g,y)=>{for(const v of y.j_)v.Z_(u)&&(f=!0)}),f&&Lm(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function cN(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new ot(de.comparator);a=a.insert(o,zt.newNoDocument(o,Te.min()));const u=ke().add(o),d=new Fd(Te.min(),new Map,new ot(Fe),a,u);await Dw(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Vm(i)}else await Zf(i.localStore,e,!1).then(()=>Qf(i,e,n)).catch(Gl)}async function dN(t,e){const n=Ee(t),i=e.batch.batchId;try{const r=await Tk(n.localStore,e);Vw(n,i,null),Lw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wl(n,r)}catch(r){await Gl(r)}}async function hN(t,e,n){const i=Ee(t);try{const r=await function(a,u){const d=Ee(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ge(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(i.localStore,e);Vw(i,e,n),Lw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Wl(i,r)}catch(r){await Gl(r)}}function Lw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vw(t,e,n){const i=Ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Fw(t,i)})}function Fw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Rm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Vm(t))}function _y(t,e,n){for(const i of n)i instanceof Nw?(t.La.addReference(i.key,e),fN(t,i)):i instanceof Mw?(se("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Fw(t,i.key)):ge()}function fN(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(i),Vm(t))}function Vm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(Xe.fromString(e)),i=t.qa.next();t.Na.set(i,new nN(n)),t.Oa=t.Oa.insert(n,i),Iw(t.remoteStore,new rr(ai(jE(n.path)),i,"TargetPurposeLimboResolution",mm.oe))}}async function Wl(t,e,n){const i=Ee(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,d)=>{a.push(i.Ka(d,e,n).then(f=>{var g;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){r.push(f);const y=Pm.Wi(d.targetId,f);o.push(y)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(d,f){const g=Ee(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(f,v=>Q.forEach(v.$i,S=>g.persistence.referenceDelegate.addReference(y,v.targetId,S)).next(()=>Q.forEach(v.Ui,S=>g.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))}catch(y){if(!Hl(y))throw y;se("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const S=g.os.get(v),V=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(V);g.os=g.os.insert(v,M)}}}(i.localStore,o))}async function pN(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await Ew(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(d=>{d.reject(new ue(j.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wl(n,i.hs)}}function mN(t,e){const n=Ee(t),i=n.Na.get(e);if(i&&i.va)return ke().add(i.key);{let r=ke();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function Uw(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cN.bind(null,e),e.Ca.d_=Qk.bind(null,e.eventManager),e.Ca.$a=jk.bind(null,e.eventManager),e}function gN(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vk(this.persistence,new _k,e.initialUser,this.serializer)}Ga(e){return new pk(Am.Zr,this.serializer)}Wa(e){return new Ck}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pN.bind(null,this.syncEngine),await Kk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jk}()}createDatastore(e){const n=Ud(e.databaseInfo.databaseId),i=function(o){return new kk(o)}(e.databaseInfo);return function(o,a,u,d){return new bk(o,a,u,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Lk(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return dy.D()?new dy:new Ak}())}createSyncEngine(e,n){return function(r,o,a,u,d,f,g){const y=new iN(r,o,a,u,d,f);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ee(r);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Kl(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jf.provider={build:()=>new jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=GE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Fh(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Ew(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vN(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>hy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>hy(e.remoteStore,r)),t._onlineComponents=e}async function vN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await Fh(t,new rd)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Fh(t,new rd);return t._offlineComponents}async function Ow(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await yy(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await yy(t,new jf))),t._onlineComponents}function TN(t){return Ow(t).then(e=>e.syncEngine)}async function EN(t){const e=await Ow(t),n=e.eventManager;return n.onListen=rN.bind(null,e.syncEngine),n.onUnlisten=aN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lN.bind(null,e.syncEngine),n}function wN(t,e,n={}){const i=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,d,f){const g=new _N({next:v=>{g.Za(),a.enqueueAndForget(()=>Yk(o,y)),v.fromCache&&d.source==="server"?f.reject(new ue(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Xk(u,g,{includeMetadataChanges:!0,_a:!0});return Zk(o,y)}(await EN(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e,n){if(!n)throw new ue(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xN(t,e,n,i){if(e===!0&&i===!0)throw new ue(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ty(t){if(!de.isDocumentKey(t))throw new ue(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ey(t){if(de.isDocumentKey(t))throw new ue(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function Vs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fm(t);throw new ue(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ue(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ue(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ue(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VP;switch(i.type){case"firstParty":return new BP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=vy.get(n);i&&(se("ComponentProvider","Removing Datastore"),vy.delete(n),i.terminate())}(this),Promise.resolve()}}function SN(t,e,n,i={}){var r;const o=(t=Vs(t,zd))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=Ot.MOCK_USER;else{u=_A(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ue(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(f)}t._authCredentials=new FP(new zE(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gd(this.firestore,e,this._query)}}class Rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class _r extends Gd{constructor(e,n,i){super(e,n,jE(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new de(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function IN(t,e,...n){if(t=Il(t),zw("collection","path",e),t instanceof zd){const i=Xe.fromString(e,...n);return Ey(i),new _r(t,null,i)}{if(!(t instanceof Rn||t instanceof _r))throw new ue(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Xe.fromString(e,...n));return Ey(i),new _r(t.firestore,null,i)}}function Gw(t,e,...n){if(t=Il(t),arguments.length===1&&(e=GE.newId()),zw("doc","path",e),t instanceof zd){const i=Xe.fromString(e,...n);return Ty(i),new Rn(t,null,new de(i))}{if(!(t instanceof Rn||t instanceof _r))throw new ue(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Xe.fromString(e,...n));return Ty(i),new Rn(t.firestore,t instanceof _r?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xw(this,"async_queue_retry"),this.Vu=()=>{const i=Vh();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hl(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw Di("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=bm.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Hd extends zd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new xy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xy(e),this._firestoreClient=void 0,await e}}}function CN(t,e){const n=typeof t=="object"?t:ME(),i=typeof t=="string"?t:"(default)",r=RE(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=mA("firestore");o&&SN(r,...o)}return r}function Hw(t){if(t._terminated)throw new ue(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AN(t),t._firestoreClient}function AN(t){var e,n,i;const r=t._freezeSettings(),o=function(u,d,f,g){return new XP(u,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Bw(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new yN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fs(Lt.fromBase64String(e))}catch(n){throw new ue(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fs(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^__.*__$/;class RN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,n,this.fieldTransforms):new ql(e,this.data,n,this.fieldTransforms)}}function $w(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class zm{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return od(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($w(this.Cu)&&PN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ud(e)}Qu(e,n,i,r=!1){return new zm({Cu:e,methodName:n,qu:i,path:Nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NN(t){const e=t._freezeSettings(),n=Ud(t._databaseId);return new kN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MN(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);Zw("Data must be an object, but it was:",a,i);const u=Ww(i,a);let d,f;if(o.merge)d=new Hn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=bN(e,y,n);if(!a.contains(v))throw new ue(j.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);LN(g,v)||g.push(v)}d=new Hn(g),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new RN(new Cn(u),d,f)}function Kw(t,e){if(Jw(t=Il(t)))return Zw("Unsupported field value:",e,t),Ww(t,e);if(t instanceof qw)return function(i,r){if(!$w(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=Kw(u,r.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Il(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Tt.fromDate(i);return{timestampValue:nd(r.serializer,o)}}if(i instanceof Tt){const o=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nd(r.serializer,o)}}if(i instanceof Om)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fs)return{bytesValue:pw(r.serializer,i._byteString)};if(i instanceof Rn){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Im(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bm)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return Em(u.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Fm(i)}`)}(t,e)}function Ww(t,e){const n={};return HE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(i,r)=>{const o=Kw(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function Jw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Om||t instanceof Fs||t instanceof Rn||t instanceof qw||t instanceof Bm)}function Zw(t,e,n){if(!Jw(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Fm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function bN(t,e,n){if((e=Il(e))instanceof Um)return e._internalPath;if(typeof e=="string")return Yw(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const DN=new RegExp("[~\\*/\\[\\]]");function Yw(t,e,n){if(e.search(DN)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Um(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new ue(j.INVALID_ARGUMENT,u+t+d)}function LN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VN extends Qw{data(){return super.data()}}function jw(t,e){return typeof e=="string"?Yw(t,e):e instanceof Um?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UN{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Gs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>ut(a.doubleValue));return new Bm(o)}convertGeoPoint(e){return new Om(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=_m(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const n=Er(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Xe.fromString(e);Ge(Tw(i));const r=new Nl(i.get(1),i.get(3)),o=new de(i.popFirst(5));return r.isEqual(n)||Di(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BN extends Qw{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(jw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Ec extends BN{data(e={}){return super.data(e)}}class zN{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ju(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ec(this._firestore,this._userDataWriter,i.key,i,new ju(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new Ec(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ju(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new Ec(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ju(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:GN(u.type),doc:d,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}class HN extends UN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function qN(t){t=Vs(t,Gd);const e=Vs(t.firestore,Hd),n=Hw(e),i=new HN(e);return FN(t._query),wN(n,t._query).then(r=>new zN(e,i,t,r))}function $N(t,e,n){t=Vs(t,Rn);const i=Vs(t.firestore,Hd),r=ON(t.converter,e);return Xw(i,[MN(NN(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,li.none())])}function KN(t){return Xw(Vs(t.firestore,Hd),[new wm(t._key,li.none())])}function Xw(t,e){return function(i,r){const o=new gr;return i.asyncQueue.enqueueAndForget(async()=>uN(await TN(i),r,o)),o.promise}(Hw(t),e)}(function(e,n=!0){(function(r){zs=r})(kE),Al(new Cl("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Hd(new UP(i.getProvider("auth-internal")),new GP(i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ue(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(f.options.projectId,g)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),jr(G_,"4.7.3",e),jr(G_,"4.7.3","esm2017")})();const WN={VITE_FIREBASE_API_KEY:"AIzaSyCAdwbA5u0oLe0m6oKryKwHx1XBiDEWnrk",VITE_FIREBASE_APP_ID:"1:956551883987:web:3f6bc14aad0c026f357826",VITE_FIREBASE_AUTH_DOMAIN:"izbb-taxi-management.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"956551883987",VITE_FIREBASE_PROJECT_ID:"izbb-taxi-management",VITE_FIREBASE_STORAGE_BUCKET:"izbb-taxi-management.firebasestorage.app"},{initializeApp:Sy,getApps:Iy}=LP,Wo=WN,ex={apiKey:Wo.VITE_FIREBASE_API_KEY,authDomain:Wo.VITE_FIREBASE_AUTH_DOMAIN,projectId:Wo.VITE_FIREBASE_PROJECT_ID,storageBucket:Wo.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Wo.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Wo.VITE_FIREBASE_APP_ID},tx=!!ex.apiKey;let Xu,nx;if(tx)try{const t=Iy?Iy():[];t.length===0?Sy?Xu=Sy(ex):console.error("Firebase initializeApp bulunamad."):Xu=t[0],Xu&&(nx=CN(Xu),console.log("Firebase baaryla balatld."))}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn("Firebase yaplandrmas yaplmam. Ltfen .env dosyasn oluturun.");const Cy=nx,Gm="taxi_stands",Hm=()=>{if(!tx)throw new Error("Ltfen 'services/firebaseConfig.ts' dosyasn ap Firebase ayarlarnz giriniz. (apiKey, projectId vb.)");if(!Cy)throw new Error("Firebase veritaban balants balatlamad. API anahtarlarnz ve internet balantnz kontrol edin.");return Cy},JN=async()=>{const t=Hm();try{const e=await qN(IN(t,Gm)),n=[];return e.forEach(i=>{n.push(i.data())}),n}catch(e){throw console.error("getStands Error:",e),e}},sd=async t=>{const e=Hm(),n=Gw(e,Gm,t.id);await $N(n,t)},ZN=async t=>{const e=Hm();await KN(Gw(e,Gm,t))},Xf=(t,e)=>{var a,u,d,f;const n=[];if(["name","phone","city","district","neighborhood","street","address","capacity","ukomeDecisionNo","ukomeDate","ukomeSummary","status","officeType","responsibility","notes"].forEach(g=>{const y=String(t[g]||"").trim(),v=String(e[g]||"").trim();if(y!==v){if(!t[g]&&!e[g])return;n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:g,oldValue:y||"(Bo)",newValue:v||"(Bo)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}}),((a=t.location)==null?void 0:a.lat)!==((u=e.location)==null?void 0:u.lat)||((d=t.location)==null?void 0:d.lng)!==((f=e.location)==null?void 0:f.lng)){const g=t.location?`${t.location.lat}, ${t.location.lng}`:"(Konum Yok)",y=e.location?`${e.location.lat}, ${e.location.lng}`:"(Konum Yok)";g!==y&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"location",oldValue:g,newValue:y,changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}const r=(t.plates||[]).sort().join(", "),o=(e.plates||[]).sort().join(", ");return r!==o&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"plates",oldValue:r||"(Plaka Yok)",newValue:o||"(Plaka Yok)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate}),n};var ep=(t=>(t.ACTIVE="Aktif",t.PASSIVE="Pasif",t.PENDING="Onay Bekliyor",t))(ep||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(t,e)=>{const n=ce.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:d,...f},g)=>ce.createElement("svg",{ref:g,...YN,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${QN(t)}`,u].join(" "),...f},[...e.map(([y,v])=>ce.createElement(y,v)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=Ne("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Ne("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=Ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Ne("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Ne("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Ne("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Ne("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Ne("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=Ne("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Ne("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=Ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Ne("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Ne("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Ne("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=Ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=Ne("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=Ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Ne("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var g1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _1,y1;function v1(){return{geminiUrl:_1,vertexUrl:y1}}function T1(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const a=v1();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(o=a.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ui{}function ie(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let f=0;f<d.length;f++){const g=d[f];p(g,e.slice(o+1),n[f])}else for(const f of d)p(f,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];p(d[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(u=>c(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function E1(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),a=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&o.length>u)for(let d=u;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&a.add(f)}np(t,r,o,0,a)}}function np(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])np(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of u)d[f]=a[f];for(const[f,g]of Object.entries(d)){const y=[];for(const v of n.slice(i))v==="*"?y.push(f):y.push(v);p(a,y,g)}for(const f of u)delete a[f]}}else{const a=t;o in a&&np(a[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $m(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(t){const e={},n=c(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function x1(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&p(e,["response"],I1(a)),e}function S1(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],C1(a)),e}function I1(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>A1(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function C1(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>P1(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function A1(t){const e={},n=c(t,["video"]);return n!=null&&p(e,["video"],D1(n)),e}function P1(t){const e={},n=c(t,["_self"]);return n!=null&&p(e,["video"],L1(n)),e}function R1(t){const e={},n=c(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function k1(t){const e={},n=c(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function N1(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],M1(a)),e}function M1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&p(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function dx(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],b1(a)),e}function b1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&p(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function D1(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],$m(i));const r=c(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function L1(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],$m(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ry;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ry||(Ry={}));var ky;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ky||(ky={}));var Ny;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ny||(Ny={}));var or;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(or||(or={}));var My;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(My||(My={}));var by;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(by||(by={}));var Dy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Dy||(Dy={}));var Ly;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ly||(Ly={}));var Vy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Vy||(Vy={}));var Fy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Fy||(Fy={}));var Uy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Uy||(Uy={}));var Oy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Oy||(Oy={}));var By;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(By||(By={}));var zy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(zy||(zy={}));var Gy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Gy||(Gy={}));var Hy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Hy||(Hy={}));var qy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qy||(qy={}));var $y;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($y||($y={}));var Ky;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ky||(Ky={}));var Wy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Wy||(Wy={}));var Jy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Jy||(Jy={}));var ud;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ud||(ud={}));var Zy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zy||(Zy={}));var Yy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Yy||(Yy={}));var Qy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qy||(Qy={}));var ip;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ip||(ip={}));var jy;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(jy||(jy={}));var Xy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Xy||(Xy={}));var rp;(function(t){t.COLLECTION="COLLECTION"})(rp||(rp={}));var ev;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ev||(ev={}));var tv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tv||(tv={}));var nv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(nv||(nv={}));var iv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(iv||(iv={}));var rv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rv||(rv={}));var ov;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ov||(ov={}));var sv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sv||(sv={}));var av;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(av||(av={}));var lv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lv||(lv={}));var uv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(uv||(uv={}));var cv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(cv||(cv={}));var dv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(dv||(dv={}));var hv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hv||(hv={}));var fv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(fv||(fv={}));var pv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(pv||(pv={}));var mv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(mv||(mv={}));var gv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(gv||(gv={}));var _v;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_v||(_v={}));var yv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(yv||(yv={}));var vv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(vv||(vv={}));var Tv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Tv||(Tv={}));var Ev;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ev||(Ev={}));var wv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wv||(wv={}));var xv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xv||(xv={}));var Sv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sv||(Sv={}));var Iv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Iv||(Iv={}));var Cv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Cv||(Cv={}));var cs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(cs||(cs={}));class op{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Oa{get text(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const y=[];for(const v of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[S,V]of Object.entries(v))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(V!==null||V!==void 0)&&y.push(S);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;g=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const y of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,S]of Object.entries(y))v!=="inlineData"&&(S!==null||S!==void 0)&&g.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,a,u,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,a,u,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.output}}class Av{}class Pv{}class V1{}class F1{}class U1{}class O1{}class Rv{}class kv{}class Nv{}class B1{}class cd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new cd;let r;const o=e;return n?r=S1(o):r=x1(o),Object.assign(i,r),i}}class Mv{}class bv{}class Dv{}class Lv{}class z1{}class G1{}class H1{}class Km{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Km,o=N1(e);return Object.assign(i,o),i}}class q1{}class $1{}class K1{}class Vv{}class W1{get text(){var e,n,i;let r="",o=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="text"&&d!=="thought"&&f!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&o.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class J1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Wm,o=dx(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ue(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function hx(t,e){const n=Ue(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function fx(t){return Array.isArray(t)?t.map(e=>dd(e)):[dd(t)]}function dd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function px(t){const e=dd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mx(t){const e=dd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function gx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Fv(e)):[Fv(t)]}function sp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Uv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Ov(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gt(t){if(t==null)throw new Error("ContentUnion is required");return sp(t)?t:{role:"user",parts:gx(t)}}function Jm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Gt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Gt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gt(n)):[Gt(e)]}function kn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Uv(t)||Ov(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gt(t)]}const e=[],n=[],i=sp(t[0]);for(const r of t){const o=sp(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(Uv(r)||Ov(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:gx(n)}),e}function Z1(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(or).includes(n[0].toUpperCase())?n[0].toUpperCase():or.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(or).includes(i.toUpperCase())?i.toUpperCase():or.TYPE_UNSPECIFIED})}}function Ts(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Z1(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(or).includes(u.toUpperCase())?u.toUpperCase():or.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ts(u);else if(i.includes(a)){const d=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}d.push(Ts(f))}e[a]=d}else if(r.includes(a)){const d={};for(const[f,g]of Object.entries(u))d[f]=Ts(g);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Zm(t){return Ts(t)}function Ym(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Qm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function $s(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ts(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ts(e.response));return t}function Ks(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Y1(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Oi(t,e){if(typeof e!="string")throw new Error("name must be a string");return Y1(t,e,"cachedContents")}function _x(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ar(t){return $m(t)}function Q1(t){return t!=null&&typeof t=="object"&&"name"in t}function j1(t){return t!=null&&typeof t=="object"&&"video"in t}function X1(t){return t!=null&&typeof t=="object"&&"uri"in t}function yx(t){var e;let n;if(Q1(t)&&(n=t.name),!(X1(t)&&(n=t.uri,n===void 0))&&!(j1(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function vx(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Tx(t){for(const e of["models","tunedModels","publisherModels"])if(eM(t,e))return t[e];return[]}function eM(t,e){return t!==null&&typeof t=="object"&&e in t}function tM(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function nM(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const a=tM(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Ex(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function iM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function wx(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ws(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function xx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rM(t){const e={},n=c(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>UM(a))),p(e,["inlinedResponses"],o)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["inlinedEmbedContentResponses"],o)}return e}function oM(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function sM(t){const e={},n=c(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wc(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&p(e,["state"],xx(r));const o=c(t,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);const a=c(t,["metadata","endTime"]);a!=null&&p(e,["endTime"],a);const u=c(t,["metadata","updateTime"]);u!=null&&p(e,["updateTime"],u);const d=c(t,["metadata","model"]);d!=null&&p(e,["model"],d);const f=c(t,["metadata","output"]);return f!=null&&p(e,["dest"],rM(wx(f))),e}function ap(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["state"]);r!=null&&p(e,["state"],xx(r));const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["createTime"]);a!=null&&p(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&p(e,["startTime"],u);const d=c(t,["endTime"]);d!=null&&p(e,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&p(e,["updateTime"],f);const g=c(t,["model"]);g!=null&&p(e,["model"],g);const y=c(t,["inputConfig"]);y!=null&&p(e,["src"],aM(y));const v=c(t,["outputConfig"]);v!=null&&p(e,["dest"],oM(wx(v)));const S=c(t,["completionStats"]);return S!=null&&p(e,["completionStats"],S),e}function aM(t){const e={},n=c(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function lM(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&p(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>FM(t,a))),p(n,["requests","requests"],o)}return n}function uM(t){const e={},n=c(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function cM(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Ws(t,i)),n}function hM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Ws(t,i)),n}function fM(t){const e={},n=c(t,["content"]);n!=null&&p(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],pM(i));const r=c(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&p(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&p(e,["index"],d);const f=c(t,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),p(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&p(e,["urlContextMetadata"],y),e}function pM(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function Sx(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>$M(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function mM(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function gM(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],sM(iM(r))),n}function Bv(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["src"]);r!=null&&p(n,["batch","inputConfig"],lM(t,Ex(t,r)));const o=c(e,["config"]);return o!=null&&mM(o,n),n}function _M(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["model"],Ue(t,i));const r=c(e,["src"]);r!=null&&p(n,["inputConfig"],uM(Ex(t,r)));const o=c(e,["config"]);return o!=null&&gM(o,n),n}function yM(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),n}function vM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["src"]);r!=null&&p(n,["batch","inputConfig"],CM(t,r));const o=c(e,["config"]);return o!=null&&yM(o,n),n}function TM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Ws(t,i)),n}function EM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Ws(t,i)),n}function wM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);return o!=null&&p(e,["error"],o),e}function xM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);return o!=null&&p(e,["error"],o),e}function SM(t,e){const n={},i=c(e,["contents"]);if(i!=null){let o=Jm(t,i);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["requests[]","request","content"],o)}const r=c(e,["config"]);return r!=null&&(p(n,["_self"],IM(r,n)),E1(n,{"requests[].*":"requests[].request.*"})),n}function IM(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function CM(t,e){const n={},i=c(e,["fileName"]);i!=null&&p(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&p(n,["requests"],SM(t,r)),n}function AM(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PM(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RM(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&p(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kM(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],Sx(Gt(r)));const o=c(e,["temperature"]);o!=null&&p(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&p(i,["topP"],a);const u=c(e,["topK"]);u!=null&&p(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&p(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);const g=c(e,["stopSequences"]);g!=null&&p(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&p(i,["presencePenalty"],S);const V=c(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const M=c(e,["seed"]);M!=null&&p(i,["seed"],M);const O=c(e,["responseMimeType"]);O!=null&&p(i,["responseMimeType"],O);const R=c(e,["responseSchema"]);R!=null&&p(i,["responseSchema"],Zm(R));const N=c(e,["responseJsonSchema"]);if(N!=null&&p(i,["responseJsonSchema"],N),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=c(e,["safetySettings"]);if(n!==void 0&&I!=null){let D=I;Array.isArray(D)&&(D=D.map(ae=>KM(ae))),p(n,["safetySettings"],D)}const G=c(e,["tools"]);if(n!==void 0&&G!=null){let D=Ks(G);Array.isArray(D)&&(D=D.map(ae=>JM($s(ae)))),p(n,["tools"],D)}const W=c(e,["toolConfig"]);if(n!==void 0&&W!=null&&p(n,["toolConfig"],WM(W)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=c(e,["cachedContent"]);n!==void 0&&K!=null&&p(n,["cachedContent"],Oi(t,K));const b=c(e,["responseModalities"]);b!=null&&p(i,["responseModalities"],b);const C=c(e,["mediaResolution"]);C!=null&&p(i,["mediaResolution"],C);const k=c(e,["speechConfig"]);if(k!=null&&p(i,["speechConfig"],Ym(k)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=c(e,["thinkingConfig"]);U!=null&&p(i,["thinkingConfig"],U);const B=c(e,["imageConfig"]);B!=null&&p(i,["imageConfig"],VM(B));const F=c(e,["enableEnhancedCivicAnswers"]);if(F!=null&&p(i,["enableEnhancedCivicAnswers"],F),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function NM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>fM(f))),p(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&p(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&p(e,["usageMetadata"],u),e}function MM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Ws(t,i)),n}function bM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Ws(t,i)),n}function DM(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function LM(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function VM(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function FM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["request","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let u=kn(r);Array.isArray(u)&&(u=u.map(d=>Sx(d))),p(n,["request","contents"],u)}const o=c(e,["metadata"]);o!=null&&p(n,["metadata"],o);const a=c(e,["config"]);return a!=null&&p(n,["request","generationConfig"],kM(t,a,c(n,["request"],{}))),n}function UM(t){const e={},n=c(t,["response"]);n!=null&&p(e,["response"],NM(n));const i=c(t,["error"]);return i!=null&&p(e,["error"],i),e}function OM(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function BM(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const o=c(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function zM(t){const e={},n=c(t,["config"]);return n!=null&&OM(n,e),e}function GM(t){const e={},n=c(t,["config"]);return n!=null&&BM(n,e),e}function HM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>wc(a))),p(e,["batchJobs"],o)}return e}function qM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>ap(a))),p(e,["batchJobs"],o)}return e}function $M(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],AM(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],PM(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],cM(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function KM(t){const e={},n=c(t,["category"]);if(n!=null&&p(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function WM(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],RM(i)),e}function JM(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],DM(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],LM(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Vi||(Vi={}));class po{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZM extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(Vi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Bv(this.apiClient,e),i=n._url,r=ie("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,d=u.requests,f=[];for(const g of d){const y=Object.assign({},g);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const S=y.request;S.systemInstruction=v,y.request=S}f.push(y)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=_M(this.apiClient,e);return u=ie("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>ap(g))}else{const f=Bv(this.apiClient,e);return u=ie("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>wc(g))}}async createEmbeddingsInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vM(this.apiClient,e);return o=ie("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>wc(d))}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=bM(this.apiClient,e);return u=ie("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>ap(g))}else{const f=MM(this.apiClient,e);return u=ie("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>wc(g))}}async cancel(e){var n,i,r,o;let a="",u={};if(this.apiClient.isVertexAI()){const d=hM(this.apiClient,e);a=ie("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=dM(this.apiClient,e);a=ie("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=GM(e);return u=ie("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=qM(g),v=new Vv;return Object.assign(v,y),v})}else{const f=zM(e);return u=ie("batches",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=HM(g),v=new Vv;return Object.assign(v,y),v})}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=EM(this.apiClient,e);return u=ie("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>xM(g))}else{const f=TM(this.apiClient,e);return u=ie("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>wM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YM(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function zv(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>vb(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function QM(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let g=kn(a);Array.isArray(g)&&(g=g.map(y=>zv(y))),p(e,["contents"],g)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&p(e,["systemInstruction"],zv(Gt(u)));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>Eb(y))),p(e,["tools"],g)}const f=c(t,["toolConfig"]);if(e!==void 0&&f!=null&&p(e,["toolConfig"],Tb(f)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function jM(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let y=kn(a);Array.isArray(y)&&(y=y.map(v=>v)),p(e,["contents"],y)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&p(e,["systemInstruction"],Gt(u));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>wb(v))),p(e,["tools"],y)}const f=c(t,["toolConfig"]);e!==void 0&&f!=null&&p(e,["toolConfig"],f);const g=c(t,["kmsKeyName"]);return e!==void 0&&g!=null&&p(e,["encryption_spec","kmsKeyName"],g),n}function XM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["model"],hx(t,i));const r=c(e,["config"]);return r!=null&&QM(r,n),n}function eb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["model"],hx(t,i));const r=c(e,["config"]);return r!=null&&jM(r,n),n}function tb(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function nb(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function ib(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function rb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function ob(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function sb(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ab(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&p(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lb(t){const e={},n=c(t,["description"]);n!=null&&p(e,["description"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["parameters"]);r!=null&&p(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&p(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&p(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ub(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function cb(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function db(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function hb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function fb(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function pb(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function mb(t){const e={},n=c(t,["config"]);return n!=null&&fb(n,e),e}function gb(t){const e={},n=c(t,["config"]);return n!=null&&pb(n,e),e}function _b(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["cachedContents"],o)}return e}function yb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["cachedContents"],o)}return e}function vb(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],ob(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],sb(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],YM(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function Tb(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],ab(i)),e}function Eb(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],db(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],hb(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function wb(t){const e={},n=c(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>lb(v))),p(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],d);const f=c(t,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const g=c(t,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function xb(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function Sb(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function Ib(t,e){const n={},i=c(e,["name"]);i!=null&&p(n,["_url","name"],Oi(t,i));const r=c(e,["config"]);return r!=null&&xb(r,n),n}function Cb(t,e){const n={},i=c(e,["name"]);i!=null&&p(n,["_url","name"],Oi(t,i));const r=c(e,["config"]);return r!=null&&Sb(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ab extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(Vi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=eb(this.apiClient,e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const f=XM(this.apiClient,e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=cb(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const f=ub(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=nb(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=rb(g),v=new Dv;return Object.assign(v,y),v})}else{const f=tb(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ib(g),v=new Dv;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Cb(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const f=Ib(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=gb(e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=yb(g),v=new Lv;return Object.assign(v,y),v})}else{const f=mb(e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=_b(g),v=new Lv;return Object.assign(v,y),v})}}}function hd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Gv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _e(t){return this instanceof _e?(this.v=t,this):new _e(t)}function Kn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(S){return function(V){return Promise.resolve(V).then(S,y)}}function u(S,V){i[S]&&(r[S]=function(M){return new Promise(function(O,R){o.push([S,M,O,R])>1||d(S,M)})},V&&(r[S]=V(r[S])))}function d(S,V){try{f(i[S](V))}catch(M){v(o[0][3],M)}}function f(S){S.value instanceof _e?Promise.resolve(S.value.v).then(g,y):v(o[0][2],S)}function g(S){d("next",S)}function y(S){d("throw",S)}function v(S,V){S(V),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Wn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gv=="function"?Gv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),r(u,d,a.done,a.value)})}}function r(o,a,u,d){Promise.resolve(d).then(function(f){o({value:f,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pb(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Ix(n)}function Ix(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!Ix(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class kb{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Nb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Nb{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),Rb(o)}async sendMessage(e){var n;await this.sendPromise;const i=Gt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,u;const d=await r,f=(a=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,g=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];g!=null&&(v=(u=g.slice(y))!==null&&u!==void 0?u:[]);const S=f?[f]:[];this.recordHistory(i,S,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Gt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Hv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Kn(this,arguments,function*(){var r,o,a,u,d,f;const g=[];try{for(var y=!0,v=Wn(e),S;S=yield _e(v.next()),r=S.done,!r;y=!0){u=S.value,y=!1;const V=u;if(Pb(V)){const M=(f=(d=V.candidates)===null||d===void 0?void 0:d[0])===null||f===void 0?void 0:f.content;M!==void 0&&g.push(M)}yield yield _e(V)}}catch(V){o={error:V}}finally{try{!y&&!r&&(a=v.return)&&(yield _e(a.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Hv(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mb(t){const e={},n=c(t,["file"]);return n!=null&&p(e,["file"],n),e}function bb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Db(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","file"],yx(n)),e}function Lb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Vb(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","file"],yx(n)),e}function Fb(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function Ub(t){const e={},n=c(t,["config"]);return n!=null&&Fb(n,e),e}function Ob(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bb extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(Vi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ub(e);return o=ie("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=Ob(d),g=new q1;return Object.assign(g,f),g})}}async createInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Mb(e);return o=ie("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=bb(d),g=new $1;return Object.assign(g,f),g})}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vb(e);return o=ie("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Db(e);return o=ie("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=Lb(d),g=new K1;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xc(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function zb(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>iD(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function Gb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Hb(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qb(t){const e={},n=c(t,["description"]);n!=null&&p(e,["description"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["parameters"]);r!=null&&p(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&p(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&p(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function $b(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&p(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&p(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&p(e,["logprobs"],d);const f=c(t,["maxOutputTokens"]);f!=null&&p(e,["maxOutputTokens"],f);const g=c(t,["mediaResolution"]);g!=null&&p(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&p(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&p(e,["responseMimeType"],S);const V=c(t,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const M=c(t,["responseSchema"]);M!=null&&p(e,["responseSchema"],M);const O=c(t,["routingConfig"]);O!=null&&p(e,["routingConfig"],O);const R=c(t,["seed"]);R!=null&&p(e,["seed"],R);const N=c(t,["speechConfig"]);N!=null&&p(e,["speechConfig"],N);const I=c(t,["stopSequences"]);I!=null&&p(e,["stopSequences"],I);const G=c(t,["temperature"]);G!=null&&p(e,["temperature"],G);const W=c(t,["thinkingConfig"]);W!=null&&p(e,["thinkingConfig"],W);const K=c(t,["topK"]);K!=null&&p(e,["topK"],K);const b=c(t,["topP"]);if(b!=null&&p(e,["topP"],b),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Kb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function Wb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Jb(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const g=c(t,["seed"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],Qm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const V=c(t,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],zb(Gt(V)));const M=c(t,["tools"]);if(e!==void 0&&M!=null){let K=Ks(M);Array.isArray(K)&&(K=K.map(b=>oD($s(b)))),p(e,["setup","tools"],K)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&p(e,["setup","sessionResumption"],rD(O));const R=c(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&p(e,["setup","realtimeInputConfig"],I);const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);const W=c(t,["proactivity"]);if(e!==void 0&&W!=null&&p(e,["setup","proactivity"],W),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Zb(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],$b(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const g=c(t,["seed"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],Qm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const V=c(t,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],Gt(V));const M=c(t,["tools"]);if(e!==void 0&&M!=null){let b=Ks(M);Array.isArray(b)&&(b=b.map(C=>sD($s(C)))),p(e,["setup","tools"],b)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&p(e,["setup","sessionResumption"],O);const R=c(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&p(e,["setup","realtimeInputConfig"],I);const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);const W=c(t,["proactivity"]);e!==void 0&&W!=null&&p(e,["setup","proactivity"],W);const K=c(t,["explicitVadSignal"]);return e!==void 0&&K!=null&&p(e,["setup","explicitVadSignal"],K),n}function Yb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&p(n,["config"],Jb(r,n)),n}function Qb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&p(n,["config"],Zb(r,n)),n}function jb(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function Xb(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function eD(t){const e={},n=c(t,["media"]);if(n!=null){let f=fx(n);Array.isArray(f)&&(f=f.map(g=>xc(g))),p(e,["mediaChunks"],f)}const i=c(t,["audio"]);i!=null&&p(e,["audio"],xc(mx(i)));const r=c(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&p(e,["video"],xc(px(o)));const a=c(t,["text"]);a!=null&&p(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&p(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&p(e,["activityEnd"],d),e}function tD(t){const e={},n=c(t,["media"]);if(n!=null){let f=fx(n);Array.isArray(f)&&(f=f.map(g=>g)),p(e,["mediaChunks"],f)}const i=c(t,["audio"]);i!=null&&p(e,["audio"],mx(i));const r=c(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&p(e,["video"],px(o));const a=c(t,["text"]);a!=null&&p(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&p(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&p(e,["activityEnd"],d),e}function nD(t){const e={},n=c(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&p(e,["toolCall"],r);const o=c(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],o);const a=c(t,["usageMetadata"]);a!=null&&p(e,["usageMetadata"],aD(a));const u=c(t,["goAway"]);u!=null&&p(e,["goAway"],u);const d=c(t,["sessionResumptionUpdate"]);d!=null&&p(e,["sessionResumptionUpdate"],d);const f=c(t,["voiceActivityDetectionSignal"]);f!=null&&p(e,["voiceActivityDetectionSignal"],f);const g=c(t,["voiceActivity"]);return g!=null&&p(e,["voiceActivity"],lD(g)),e}function iD(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],Gb(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],Hb(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],xc(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function rD(t){const e={},n=c(t,["handle"]);if(n!=null&&p(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oD(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],Kb(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],Wb(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function sD(t){const e={},n=c(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>qb(v))),p(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],d);const f=c(t,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const g=c(t,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function aD(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const o=c(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const a=c(t,["thoughtsTokenCount"]);a!=null&&p(e,["thoughtsTokenCount"],a);const u=c(t,["totalTokenCount"]);u!=null&&p(e,["totalTokenCount"],u);const d=c(t,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(V=>V)),p(e,["promptTokensDetails"],S)}const f=c(t,["cacheTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(V=>V)),p(e,["cacheTokensDetails"],S)}const g=c(t,["candidatesTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(V=>V)),p(e,["responseTokensDetails"],S)}const y=c(t,["toolUsePromptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(V=>V)),p(e,["toolUsePromptTokensDetails"],S)}const v=c(t,["trafficType"]);return v!=null&&p(e,["trafficType"],v),e}function lD(t){const e={},n=c(t,["type"]);return n!=null&&p(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uD(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function cD(t){const e={},n=c(t,["content"]);n!=null&&p(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],dD(i));const r=c(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&p(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&p(e,["index"],d);const f=c(t,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),p(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&p(e,["urlContextMetadata"],y),e}function dD(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function hD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let o=kn(r);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}return n}function fD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(e,["tokensInfo"],r)}return e}function pD(t){const e={},n=c(t,["values"]);n!=null&&p(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&p(e,["statistics"],mD(i)),e}function mD(t){const e={},n=c(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function qd(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>SL(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function gD(t){const e={},n=c(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function _D(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function yD(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],Gt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Rx(u))),p(e,["tools"],a)}const o=c(t,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],uL(o)),n}function vD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>qd(u))),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&_D(o),n}function TD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&yD(o,n),n}function ED(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function wD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function xD(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function SD(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function ID(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function CD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function AD(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&p(e,["parameters","language"],S);const V=c(t,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const M=c(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&p(e,["parameters","outputOptions","compressionQuality"],M);const O=c(t,["addWatermark"]);e!==void 0&&O!=null&&p(e,["parameters","addWatermark"],O);const R=c(t,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const N=c(t,["editMode"]);e!==void 0&&N!=null&&p(e,["parameters","editMode"],N);const I=c(t,["baseSteps"]);return e!==void 0&&I!=null&&p(e,["parameters","editConfig","baseSteps"],I),n}function PD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>kL(d))),p(n,["instances[0]","referenceImages"],u)}const a=c(e,["config"]);return a!=null&&AD(a,n),n}function RD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>$d(o))),p(e,["generatedImages"],r)}return e}function kD(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ND(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const o=c(t,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&p(e,["instances[]","mimeType"],a);const u=c(t,["autoTruncate"]);return e!==void 0&&u!=null&&p(e,["parameters","autoTruncate"],u),n}function MD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let u=Jm(t,r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["requests[]","content"],u)}const o=c(e,["config"]);o!=null&&kD(o,n);const a=c(e,["model"]);return a!==void 0&&p(n,["requests[]","model"],Ue(t,a)),n}function bD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=Jm(t,r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["instances[]","content"],a)}const o=c(e,["config"]);return o!=null&&ND(o,n),n}function DD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function LD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pD(a))),p(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function VD(t){const e={},n=c(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function FD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function UD(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OD(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&p(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BD(t){const e={},n=c(t,["description"]);n!=null&&p(e,["description"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["parameters"]);r!=null&&p(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&p(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&p(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function zD(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],qd(Gt(r)));const o=c(e,["temperature"]);o!=null&&p(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&p(i,["topP"],a);const u=c(e,["topK"]);u!=null&&p(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&p(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);const g=c(e,["stopSequences"]);g!=null&&p(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&p(i,["presencePenalty"],S);const V=c(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const M=c(e,["seed"]);M!=null&&p(i,["seed"],M);const O=c(e,["responseMimeType"]);O!=null&&p(i,["responseMimeType"],O);const R=c(e,["responseSchema"]);R!=null&&p(i,["responseSchema"],Zm(R));const N=c(e,["responseJsonSchema"]);if(N!=null&&p(i,["responseJsonSchema"],N),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=c(e,["safetySettings"]);if(n!==void 0&&I!=null){let D=I;Array.isArray(D)&&(D=D.map(ae=>NL(ae))),p(n,["safetySettings"],D)}const G=c(e,["tools"]);if(n!==void 0&&G!=null){let D=Ks(G);Array.isArray(D)&&(D=D.map(ae=>UL($s(ae)))),p(n,["tools"],D)}const W=c(e,["toolConfig"]);if(n!==void 0&&W!=null&&p(n,["toolConfig"],FL(W)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=c(e,["cachedContent"]);n!==void 0&&K!=null&&p(n,["cachedContent"],Oi(t,K));const b=c(e,["responseModalities"]);b!=null&&p(i,["responseModalities"],b);const C=c(e,["mediaResolution"]);C!=null&&p(i,["mediaResolution"],C);const k=c(e,["speechConfig"]);if(k!=null&&p(i,["speechConfig"],Ym(k)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=c(e,["thinkingConfig"]);U!=null&&p(i,["thinkingConfig"],U);const B=c(e,["imageConfig"]);B!=null&&p(i,["imageConfig"],pL(B));const F=c(e,["enableEnhancedCivicAnswers"]);if(F!=null&&p(i,["enableEnhancedCivicAnswers"],F),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function GD(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],Gt(r));const o=c(e,["temperature"]);o!=null&&p(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&p(i,["topP"],a);const u=c(e,["topK"]);u!=null&&p(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&p(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);const g=c(e,["stopSequences"]);g!=null&&p(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&p(i,["presencePenalty"],S);const V=c(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const M=c(e,["seed"]);M!=null&&p(i,["seed"],M);const O=c(e,["responseMimeType"]);O!=null&&p(i,["responseMimeType"],O);const R=c(e,["responseSchema"]);R!=null&&p(i,["responseSchema"],Zm(R));const N=c(e,["responseJsonSchema"]);N!=null&&p(i,["responseJsonSchema"],N);const I=c(e,["routingConfig"]);I!=null&&p(i,["routingConfig"],I);const G=c(e,["modelSelectionConfig"]);G!=null&&p(i,["modelConfig"],G);const W=c(e,["safetySettings"]);if(n!==void 0&&W!=null){let xe=W;Array.isArray(xe)&&(xe=xe.map(H=>H)),p(n,["safetySettings"],xe)}const K=c(e,["tools"]);if(n!==void 0&&K!=null){let xe=Ks(K);Array.isArray(xe)&&(xe=xe.map(H=>Rx($s(H)))),p(n,["tools"],xe)}const b=c(e,["toolConfig"]);n!==void 0&&b!=null&&p(n,["toolConfig"],b);const C=c(e,["labels"]);n!==void 0&&C!=null&&p(n,["labels"],C);const k=c(e,["cachedContent"]);n!==void 0&&k!=null&&p(n,["cachedContent"],Oi(t,k));const U=c(e,["responseModalities"]);U!=null&&p(i,["responseModalities"],U);const B=c(e,["mediaResolution"]);B!=null&&p(i,["mediaResolution"],B);const F=c(e,["speechConfig"]);F!=null&&p(i,["speechConfig"],Ym(F));const D=c(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const ae=c(e,["thinkingConfig"]);ae!=null&&p(i,["thinkingConfig"],ae);const Ke=c(e,["imageConfig"]);if(Ke!=null&&p(i,["imageConfig"],mL(Ke)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Me=c(e,["modelArmorConfig"]);return n!==void 0&&Me!=null&&p(n,["modelArmorConfig"],Me),i}function qv(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>qd(u))),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&p(n,["generationConfig"],zD(t,o,n)),n}function $v(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&p(n,["generationConfig"],GD(t,o,n)),n}function Kv(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>cD(f))),p(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&p(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&p(e,["usageMetadata"],u),e}function Wv(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["candidates"],f)}const r=c(t,["createTime"]);r!=null&&p(e,["createTime"],r);const o=c(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=c(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function HD(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const o=c(t,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=c(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&p(e,["parameters","includeSafetyAttributes"],d);const f=c(t,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const g=c(t,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const v=c(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=c(t,["imageSize"]);if(e!==void 0&&S!=null&&p(e,["parameters","sampleImageSize"],S),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function qD(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&p(e,["parameters","language"],S);const V=c(t,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const M=c(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&p(e,["parameters","outputOptions","compressionQuality"],M);const O=c(t,["addWatermark"]);e!==void 0&&O!=null&&p(e,["parameters","addWatermark"],O);const R=c(t,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const N=c(t,["imageSize"]);e!==void 0&&N!=null&&p(e,["parameters","sampleImageSize"],N);const I=c(t,["enhancePrompt"]);return e!==void 0&&I!=null&&p(e,["parameters","enhancePrompt"],I),n}function $D(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&HD(o,n),n}function KD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&qD(o,n),n}function WD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>oL(a))),p(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],Ax(r)),e}function JD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$d(a))),p(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],Px(r)),e}function ZD(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=c(t,["resolution"]);e!==void 0&&a!=null&&p(e,["parameters","resolution"],a);const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(t,["negativePrompt"]);e!==void 0&&d!=null&&p(e,["parameters","negativePrompt"],d);const f=c(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&p(e,["parameters","enhancePrompt"],f),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=c(t,["lastFrame"]);e!==void 0&&g!=null&&p(e,["instances[0]","lastFrame"],Kd(g));const y=c(t,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>QL(S))),p(e,["instances[0]","referenceImages"],v)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function YD(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const o=c(t,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=c(t,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const f=c(t,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const y=c(t,["pubsubTopic"]);e!==void 0&&y!=null&&p(e,["parameters","pubsubTopic"],y);const v=c(t,["negativePrompt"]);e!==void 0&&v!=null&&p(e,["parameters","negativePrompt"],v);const S=c(t,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const V=c(t,["generateAudio"]);e!==void 0&&V!=null&&p(e,["parameters","generateAudio"],V);const M=c(t,["lastFrame"]);e!==void 0&&M!=null&&p(e,["instances[0]","lastFrame"],Zn(M));const O=c(t,["referenceImages"]);if(e!==void 0&&O!=null){let I=O;Array.isArray(I)&&(I=I.map(G=>jL(G))),p(e,["instances[0]","referenceImages"],I)}const R=c(t,["mask"]);e!==void 0&&R!=null&&p(e,["instances[0]","mask"],YL(R));const N=c(t,["compressionQuality"]);return e!==void 0&&N!=null&&p(e,["parameters","compressionQuality"],N),n}function QD(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&p(e,["response"],tL(a)),e}function jD(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],nL(a)),e}function XD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&p(n,["instances[0]","image"],Kd(o));const a=c(e,["video"]);a!=null&&p(n,["instances[0]","video"],kx(a));const u=c(e,["source"]);u!=null&&iL(u,n);const d=c(e,["config"]);return d!=null&&ZD(d,n),n}function eL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&p(n,["instances[0]","image"],Zn(o));const a=c(e,["video"]);a!=null&&p(n,["instances[0]","video"],Nx(a));const u=c(e,["source"]);u!=null&&rL(u,n);const d=c(e,["config"]);return d!=null&&YD(d,n),n}function tL(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>aL(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function nL(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>lL(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function iL(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Kd(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],kx(o)),n}function rL(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Zn(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],Nx(o)),n}function oL(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["image"],gL(n));const i=c(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&p(e,["safetyAttributes"],Ax(r)),e}function $d(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["image"],Cx(n));const i=c(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&p(e,["safetyAttributes"],Px(r));const o=c(t,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function sL(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["mask"],Cx(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(e,["labels"],r)}return e}function aL(t){const e={},n=c(t,["video"]);return n!=null&&p(e,["video"],JL(n)),e}function lL(t){const e={},n=c(t,["_self"]);return n!=null&&p(e,["video"],ZL(n)),e}function uL(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&p(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&p(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&p(e,["logprobs"],d);const f=c(t,["maxOutputTokens"]);f!=null&&p(e,["maxOutputTokens"],f);const g=c(t,["mediaResolution"]);g!=null&&p(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&p(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&p(e,["responseMimeType"],S);const V=c(t,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const M=c(t,["responseSchema"]);M!=null&&p(e,["responseSchema"],M);const O=c(t,["routingConfig"]);O!=null&&p(e,["routingConfig"],O);const R=c(t,["seed"]);R!=null&&p(e,["seed"],R);const N=c(t,["speechConfig"]);N!=null&&p(e,["speechConfig"],N);const I=c(t,["stopSequences"]);I!=null&&p(e,["stopSequences"],I);const G=c(t,["temperature"]);G!=null&&p(e,["temperature"],G);const W=c(t,["thinkingConfig"]);W!=null&&p(e,["thinkingConfig"],W);const K=c(t,["topK"]);K!=null&&p(e,["topK"],K);const b=c(t,["topP"]);if(b!=null&&p(e,["topP"],b),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function cL(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function dL(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function hL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function fL(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function pL(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function mL(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=c(t,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=c(t,["personGeneration"]);r!=null&&p(e,["personGeneration"],r);const o=c(t,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=c(t,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function gL(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],Ar(n));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Cx(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Kd(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],Ar(n));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Zn(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _L(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&p(n,["_url","models_url"],vx(t,u)),i}function yL(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&p(n,["_url","models_url"],vx(t,u)),i}function vL(t,e){const n={},i=c(e,["config"]);return i!=null&&_L(t,i,n),n}function TL(t,e){const n={},i=c(e,["config"]);return i!=null&&yL(t,i,n),n}function EL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=Tx(r);Array.isArray(o)&&(o=o.map(a=>lp(a))),p(e,["models"],o)}return e}function wL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=Tx(r);Array.isArray(o)&&(o=o.map(a=>up(a))),p(e,["models"],o)}return e}function xL(t){const e={},n=c(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function lp(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);r!=null&&p(e,["description"],r);const o=c(t,["version"]);o!=null&&p(e,["version"],o);const a=c(t,["_self"]);a!=null&&p(e,["tunedModelInfo"],OL(a));const u=c(t,["inputTokenLimit"]);u!=null&&p(e,["inputTokenLimit"],u);const d=c(t,["outputTokenLimit"]);d!=null&&p(e,["outputTokenLimit"],d);const f=c(t,["supportedGenerationMethods"]);f!=null&&p(e,["supportedActions"],f);const g=c(t,["temperature"]);g!=null&&p(e,["temperature"],g);const y=c(t,["maxTemperature"]);y!=null&&p(e,["maxTemperature"],y);const v=c(t,["topP"]);v!=null&&p(e,["topP"],v);const S=c(t,["topK"]);S!=null&&p(e,["topK"],S);const V=c(t,["thinking"]);return V!=null&&p(e,["thinking"],V),e}function up(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);r!=null&&p(e,["description"],r);const o=c(t,["versionId"]);o!=null&&p(e,["version"],o);const a=c(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>VD(v))),p(e,["endpoints"],y)}const u=c(t,["labels"]);u!=null&&p(e,["labels"],u);const d=c(t,["_self"]);d!=null&&p(e,["tunedModelInfo"],BL(d));const f=c(t,["defaultCheckpointId"]);f!=null&&p(e,["defaultCheckpointId"],f);const g=c(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["checkpoints"],y)}return e}function SL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],FD(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],UD(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],uD(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function IL(t){const e={},n=c(t,["productImage"]);return n!=null&&p(e,["image"],Zn(n)),e}function CL(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const f=c(t,["addWatermark"]);e!==void 0&&f!=null&&p(e,["parameters","addWatermark"],f);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","mimeType"],g);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","compressionQuality"],y);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v);const S=c(t,["labels"]);return e!==void 0&&S!=null&&p(e,["labels"],S),n}function AL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["source"]);r!=null&&RL(r,n);const o=c(e,["config"]);return o!=null&&CL(o,n),n}function PL(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$d(r))),p(e,["generatedImages"],i)}return e}function RL(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Zn(r));const o=c(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>IL(u))),p(e,["instances[0]","productImages"],a)}return n}function kL(t){const e={},n=c(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Zn(n));const i=c(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&p(e,["referenceType"],r);const o=c(t,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],xL(o));const a=c(t,["controlImageConfig"]);a!=null&&p(e,["controlImageConfig"],gD(a));const u=c(t,["styleImageConfig"]);u!=null&&p(e,["styleImageConfig"],u);const d=c(t,["subjectImageConfig"]);return d!=null&&p(e,["subjectImageConfig"],d),e}function Ax(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function Px(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function NL(t){const e={},n=c(t,["category"]);if(n!=null&&p(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function ML(t){const e={},n=c(t,["image"]);return n!=null&&p(e,["image"],Zn(n)),e}function bL(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const o=c(t,["confidenceThreshold"]);e!==void 0&&o!=null&&p(e,["parameters","confidenceThreshold"],o);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&p(e,["parameters","maskDilation"],a);const u=c(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","binaryColorThreshold"],u);const d=c(t,["labels"]);return e!==void 0&&d!=null&&p(e,["labels"],d),n}function DL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["source"]);r!=null&&VL(r,n);const o=c(e,["config"]);return o!=null&&bL(o,n),n}function LL(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sL(r))),p(e,["generatedMasks"],i)}return e}function VL(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Zn(r));const o=c(t,["scribbleImage"]);return e!==void 0&&o!=null&&p(e,["instances[0]","scribble"],ML(o)),n}function FL(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],OD(i)),e}function UL(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],hL(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],fL(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function Rx(t){const e={},n=c(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>BD(v))),p(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],d);const f=c(t,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const g=c(t,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function OL(t){const e={},n=c(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function BL(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function zL(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function GL(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function HL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","name"],Ue(t,i));const r=c(e,["config"]);return r!=null&&zL(r,n),n}function qL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&GL(r,n),n}function $L(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const o=c(t,["personGeneration"]);e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&p(e,["parameters","includeRaiReason"],a);const u=c(t,["outputMimeType"]);e!==void 0&&u!=null&&p(e,["parameters","outputOptions","mimeType"],u);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","compressionQuality"],d);const f=c(t,["enhanceInputImage"]);e!==void 0&&f!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],f);const g=c(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=c(t,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);const v=c(t,["numberOfImages"]);e!==void 0&&v!=null&&p(e,["parameters","sampleCount"],v);const S=c(t,["mode"]);return e!==void 0&&S!=null&&p(e,["parameters","mode"],S),n}function KL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["image"]);r!=null&&p(n,["instances[0]","image"],Zn(r));const o=c(e,["upscaleFactor"]);o!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=c(e,["config"]);return a!=null&&$L(a,n),n}function WL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>$d(o))),p(e,["generatedImages"],r)}return e}function JL(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Ar(i));const r=c(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function ZL(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function YL(t){const e={},n=c(t,["image"]);n!=null&&p(e,["_self"],Zn(n));const i=c(t,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function QL(t){const e={},n=c(t,["image"]);n!=null&&p(e,["image"],Kd(n));const i=c(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function jL(t){const e={},n=c(t,["image"]);n!=null&&p(e,["image"],Zn(n));const i=c(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function kx(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function Nx(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XL(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),n}function e2(t){const e={},n=c(t,["config"]);return n!=null&&XL(n,e),e}function t2(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function n2(t){const e={},n=c(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&t2(i,e),e}function i2(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function r2(t,e){const n={},i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["customMetadata"],o)}const r=c(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function o2(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],a2(a)),e}function s2(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=c(t,["fileName"]);i!=null&&p(e,["fileName"],i);const r=c(t,["config"]);return r!=null&&r2(r,e),e}function a2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&p(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function l2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function u2(t){const e={},n=c(t,["config"]);return n!=null&&l2(n,e),e}function c2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["fileSearchStores"],o)}return e}function Mx(t,e){const n={},i=c(t,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=c(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),p(e,["customMetadata"],u)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&p(e,["chunkingConfig"],a),n}function d2(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=c(t,["config"]);return i!=null&&Mx(i,e),e}function h2(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f2="Content-Type",p2="X-Server-Timeout",m2="User-Agent",cp="x-goog-api-client",g2="1.38.0",_2=`google-genai-sdk/${g2}`,y2="v1beta1",v2="v1beta";class T2{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:y2}else{if(!this.clientOptions.apiKey)throw new Vl({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:v2,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===rp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&E2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Jv(r),new op(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Jv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Kn(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:g}=yield _e(r.read());if(f){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(g,{stream:!0});try{const V=JSON.parse(y);if("error"in V){const M=JSON.parse(JSON.stringify(V.error)),O=M.status,R=M.code,N=`got status: ${O}. ${JSON.stringify(V)}`;if(R>=400&&R<600)throw new Vl({message:N,status:R})}}catch(V){if(V.name==="ApiError")throw V}a+=y;let v=-1,S=0;for(;;){v=-1,S=0;for(const O of d){const R=a.indexOf(O);R!==-1&&(v===-1||R<v)&&(v=R,S=O.length)}if(v===-1)break;const V=a.substring(0,v);a=a.substring(v+S);const M=V.trim();if(M.startsWith(u)){const O=M.substring(u.length).trim();try{const R=new Response(O,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield _e(new op(R))}catch(R){throw new Error(`exception parsing stream chunk ${O}. ${R}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=_2+" "+this.clientOptions.userAgentExtra;return e[m2]=n,e[cp]=n,e[f2]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(p2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},f=this.getFileName(e),g=ie("upload/v1beta/files",d._url),y=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,a=await o.stat(n),u=String(a.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),y={};i!=null&&Mx(i,y);const v=await this.fetchUploadUrl(f,u,d,g,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function Jv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Vl({message:r,status:n}):new Error(r)}}function E2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,a){const u=Object.assign({},o);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const f=a[d],g=u[d];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?u[d]=i(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),u[d]=f)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w2="mcp_used/unknown";let x2=!1;function bx(t){for(const e of t)if(S2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return x2}function Dx(t){var e;const n=(e=t[cp])!==null&&e!==void 0?e:"";t[cp]=(n+` ${w2}`).trimStart()}function S2(t){return t!==null&&typeof t=="object"&&t instanceof jm}function I2(t){return Kn(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const a=yield _e(n.listTools({cursor:r}));for(const u of a.tools)yield yield _e(u),o++;if(!a.nextCursor)break;r=a.nextCursor}})}class jm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new jm(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},a=[];for(const g of this.mcpClients)try{for(var u=!0,d=(n=void 0,Wn(I2(g))),f;f=await d.next(),e=f.done,!e;u=!0){r=f.value,u=!1;const y=r;a.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=g}}catch(y){n={error:y}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),nM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function C2(t,e,n){const i=new J1;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class A2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=k2(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const g=new Promise(I=>{f=I}),y=e.callbacks,v=function(){f({})},S=this.apiClient,V={onopen:v,onmessage:I=>{C2(S,y.onmessage,I)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(I){}},M=this.webSocketFactory.create(d,R2(a),V);M.connect(),await g;const N={setup:{model:Ue(this.apiClient,e.model)}};return M.send(JSON.stringify(N)),new P2(M,this.apiClient)}}class P2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Xb(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=jb(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(cs.PLAY)}pause(){this.sendPlaybackControl(cs.PAUSE)}stop(){this.sendPlaybackControl(cs.STOP)}resetContext(){this.sendPlaybackControl(cs.RESET_CONTEXT)}close(){this.conn.close()}}function R2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function k2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function M2(t,e,n){const i=new W1;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const a=nD(o);Object.assign(i,a)}else Object.assign(i,o);e(i)}class b2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new A2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&bx(e.config.tools)&&Dx(y);const v=F2(y);if(this.apiClient.isVertexAI()){const k=this.apiClient.getProject(),U=this.apiClient.getLocation(),B=this.apiClient.getApiKey(),F=!!k&&!!U||!!B;this.apiClient.getCustomBaseUrl()&&!F?g=d:(g=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,g))}else{const k=this.apiClient.getApiKey();let U="BidiGenerateContent",B="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",B="access_token"),g=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${U}?${B}=${k}`}let S=()=>{};const V=new Promise(k=>{S=k}),M=e.callbacks,O=function(){var k;(k=M==null?void 0:M.onopen)===null||k===void 0||k.call(M),S({})},R=this.apiClient,N={onopen:O,onmessage:k=>{M2(R,M.onmessage,k)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=M==null?void 0:M.onclose)!==null&&i!==void 0?i:function(k){}},I=this.webSocketFactory.create(g,V2(v),N);I.connect(),await V;let G=Ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const k=this.apiClient.getProject(),U=this.apiClient.getLocation();k&&U&&(G=`projects/${k}/locations/${U}/`+G)}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ud.AUDIO]}:e.config.responseModalities=[ud.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const K=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],b=[];for(const k of K)if(this.isCallableTool(k)){const U=k;b.push(await U.tool())}else b.push(k);b.length>0&&(e.config.tools=b);const C={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=Qb(this.apiClient,C):W=Yb(this.apiClient,C),delete W.config,I.send(JSON.stringify(W)),new L2(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const D2={turnComplete:!0};class L2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=kn(n.turns),e.isVertexAI()||(i=i.map(r=>qd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(N2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},D2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:tD(e)}:n={realtimeInput:eD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function V2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function F2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zv=10;function Yv(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Es(a)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Es(t){return"callTool"in t&&typeof t.callTool=="function"}function U2(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Es(r)))!==null&&i!==void 0?i:!1}function Qv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(Es(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function jv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O2 extends Ui{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!U2(n)||Yv(n.config))return await this.generateContentInternal(d);const f=Qv(n);if(f.length>0){const M=f.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let g,y;const v=kn(d.contents),S=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Zv;let V=0;for(;V<S&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const M=g.candidates[0].content,O=[];for(const R of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Es(R)){const I=await R.callTool(g.functionCalls);O.push(...I)}V++,y={role:"user",parts:O},d.contents=kn(d.contents),d.contents.push(M),d.contents.push(y),jv(d.config)&&(v.push(M),v.push(y))}return jv(d.config)&&(g.automaticFunctionCallingHistory=v),g},this.generateContentStream=async n=>{var i,r,o,a,u;if(this.maybeMoveToResponseJsonSchem(n),Yv(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const d=Qv(n);if(d.length>0){const y=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,g=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const a=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:a.push(d);let u;return o?u={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new po(Vi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async d=>Es(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&bx(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Dx(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Es(a)){const u=a,d=await u.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Zv;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(f,g,y){return Kn(this,arguments,function*(){for(var v,S,V,M,O,R;u<o;){a&&(u++,a=!1);const W=yield _e(f.processParamsMaybeAddMcpUsage(y)),K=yield _e(f.generateContentStreamInternal(W)),b=[],C=[];try{for(var N=!0,I=(S=void 0,Wn(K)),G;G=yield _e(I.next()),v=G.done,!v;N=!0){M=G.value,N=!1;const k=M;if(yield yield _e(k),k.candidates&&(!((O=k.candidates[0])===null||O===void 0)&&O.content)){C.push(k.candidates[0].content);for(const U of(R=k.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(u<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(U.functionCall.name)){const B=yield _e(g.get(U.functionCall.name).callTool([U.functionCall]));b.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(k){S={error:k}}finally{try{!N&&!v&&(V=I.return)&&(yield _e(V.call(I)))}finally{if(S)throw S.error}}if(b.length>0){a=!0;const k=new Oa;k.candidates=[{content:{role:"user",parts:b}}],yield yield _e(k);const U=[];U.push(...C),U.push({role:"user",parts:b});const B=kn(y.contents).concat(U);y.contents=B}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=$v(this.apiClient,e);return u=ie("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Wv(g),v=new Oa;return Object.assign(v,y),v})}else{const f=qv(this.apiClient,e);return u=ie("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Kv(g),v=new Oa;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=$v(this.apiClient,e);return u=ie("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(y){return Kn(this,arguments,function*(){var v,S,V,M;try{for(var O=!0,R=Wn(y),N;N=yield _e(R.next()),v=N.done,!v;O=!0){M=N.value,O=!1;const I=M,G=Wv(yield _e(I.json()));G.sdkHttpResponse={headers:I.headers};const W=new Oa;Object.assign(W,G),yield yield _e(W)}}catch(I){S={error:I}}finally{try{!O&&!v&&(V=R.return)&&(yield _e(V.call(R)))}finally{if(S)throw S.error}}})})}else{const f=qv(this.apiClient,e);return u=ie("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(y){return Kn(this,arguments,function*(){var v,S,V,M;try{for(var O=!0,R=Wn(y),N;N=yield _e(R.next()),v=N.done,!v;O=!0){M=N.value,O=!1;const I=M,G=Kv(yield _e(I.json()));G.sdkHttpResponse={headers:I.headers};const W=new Oa;Object.assign(W,G),yield yield _e(W)}}catch(I){S={error:I}}finally{try{!O&&!v&&(V=R.return)&&(yield _e(V.call(R)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=bD(this.apiClient,e);return u=ie("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=LD(g),v=new Av;return Object.assign(v,y),v})}else{const f=MD(this.apiClient,e);return u=ie("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=DD(g),v=new Av;return Object.assign(v,y),v})}}async generateImagesInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=KD(this.apiClient,e);return u=ie("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=JD(g),v=new Pv;return Object.assign(v,y),v})}else{const f=$D(this.apiClient,e);return u=ie("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=WD(g),v=new Pv;return Object.assign(v,y),v})}}async editImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=PD(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=RD(d),g=new V1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=KL(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=WL(d),g=new F1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=AL(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=PL(d),g=new U1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=DL(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=LL(d),g=new O1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=dL(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>up(g))}else{const f=cL(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>lp(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=TL(this.apiClient,e);return u=ie("{models_url}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=wL(g),v=new Rv;return Object.assign(v,y),v})}else{const f=vL(this.apiClient,e);return u=ie("{models_url}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=EL(g),v=new Rv;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=qL(this.apiClient,e);return u=ie("{model}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>up(g))}else{const f=HL(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>lp(g))}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=SD(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=CD(g),v=new kv;return Object.assign(v,y),v})}else{const f=xD(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ID(g),v=new kv;return Object.assign(v,y),v})}}async countTokens(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=TD(this.apiClient,e);return u=ie("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=wD(g),v=new Nv;return Object.assign(v,y),v})}else{const f=vD(this.apiClient,e);return u=ie("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ED(g),v=new Nv;return Object.assign(v,y),v})}}async computeTokens(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=hD(this.apiClient,e);return o=ie("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=fD(d),g=new B1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=eL(this.apiClient,e);return u=ie("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>{const y=jD(g),v=new cd;return Object.assign(v,y),v})}else{const f=XD(this.apiClient,e);return u=ie("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const y=QD(g),v=new cd;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends Ui{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=k1(e);return u=ie("{operationName}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a}else{const f=R1(e);return u=ie("{operationName}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=w1(e);return o=ie("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z2(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function G2(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Q2(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function H2(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const o=c(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const a=c(e,["uses"]);n!==void 0&&a!=null&&p(n,["uses"],a);const u=c(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&p(n,["bidiGenerateContentSetup"],Y2(t,u));const d=c(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&p(n,["fieldMask"],d),i}function q2(t,e){const n={},i=c(e,["config"]);return i!=null&&p(n,["config"],H2(t,i,n)),n}function $2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function K2(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W2(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function J2(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Z2(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const g=c(t,["seed"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],Qm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const V=c(t,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],G2(Gt(V)));const M=c(t,["tools"]);if(e!==void 0&&M!=null){let K=Ks(M);Array.isArray(K)&&(K=K.map(b=>X2($s(b)))),p(e,["setup","tools"],K)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&p(e,["setup","sessionResumption"],j2(O));const R=c(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&p(e,["setup","realtimeInputConfig"],I);const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);const W=c(t,["proactivity"]);if(e!==void 0&&W!=null&&p(e,["setup","proactivity"],W),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Y2(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&p(n,["config"],Z2(r,n)),n}function Q2(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],$2(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],K2(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],z2(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function j2(t){const e={},n=c(t,["handle"]);if(n!=null&&p(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X2(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],W2(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],J2(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eV(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function tV(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=eV(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(f=>a.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class nV extends Ui{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=q2(this.apiClient,e);o=ie("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=tV(u,e.config);return r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iV(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function rV(t){const e={},n=c(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&iV(i,e),e}function oV(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function sV(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function aV(t){const e={},n=c(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const i=c(t,["config"]);return i!=null&&sV(i,e),e}function lV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uV extends Ui{constructor(e){super(),this.apiClient=e,this.list=async n=>new po(Vi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oV(e);return o=ie("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rV(e);r=ie("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aV(e);return o=ie("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=lV(d),g=new z1;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cV extends Ui{constructor(e,n=new uV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new po(Vi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=e2(e);return o=ie("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=i2(e);return o=ie("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=n2(e);r=ie("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=u2(e);return o=ie("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=c2(d),g=new G1;return Object.assign(g,f),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=d2(e);return o=ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=h2(d),g=new H1;return Object.assign(g,f),g})}}async importFile(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=s2(e);return o=ie("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=o2(d),g=new Km;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lx=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Lx=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const dV=()=>Lx();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const hp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bn extends Error{}class Zt extends bn{constructor(e,n,i,r){super(`${Zt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Wd({message:i,cause:hp(n)});const o=n;return e===400?new Fx(e,o,i,r):e===401?new Ux(e,o,i,r):e===403?new Ox(e,o,i,r):e===404?new Bx(e,o,i,r):e===409?new zx(e,o,i,r):e===422?new Gx(e,o,i,r):e===429?new Hx(e,o,i,r):e>=500?new qx(e,o,i,r):new Zt(e,o,i,r)}}class fp extends Zt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Wd extends Zt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Vx extends Wd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Fx extends Zt{}class Ux extends Zt{}class Ox extends Zt{}class Bx extends Zt{}class zx extends Zt{}class Gx extends Zt{}class Hx extends Zt{}class qx extends Zt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hV=/^[a-z][a-z0-9+.-]*:/i,fV=t=>hV.test(t);let pp=t=>(pp=Array.isArray,pp(t));const pV=pp;let mV=pV;const Xv=mV;function gV(t){if(!t)return!0;for(const e in t)return!1;return!0}function _V(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const yV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bn(`${t} must be an integer`);if(e<0)throw new bn(`${t} must be a positive integer`);return e},vV=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TV=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const wV=()=>{var t,e,n,i,r;const o=EV();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":t0(Deno.build.os),"X-Stainless-Arch":e0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":t0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":e0((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=xV();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${o}.${a}`}}}return null}const e0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",t0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ec;const SV=()=>ec??(ec=wV());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IV(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function $x(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function CV(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return $x({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Kx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function AV(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wx=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Uh(t,e,n){return Wx(),new File(t,e??"unknown_file",n)}function RV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const kV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jx=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",NV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Jx(t),MV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function bV(t,e,n){if(Wx(),t=await t,NV(t))return t instanceof File?t:Uh([await t.arrayBuffer()],t.name);if(MV(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Uh(await mp(r),e,n)}const i=await mp(t);if(e||(e=RV(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Uh(i,e,n)}async function mp(t){var e,n,i,r,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Jx(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(kV(t))try{for(var u=!0,d=Wn(t),f;f=await d.next(),e=f.done,!e;u=!0){r=f.value,u=!1;const g=r;a.push(...await mp(g))}}catch(g){n={error:g}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const g=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${DV(t)}`)}return a}function DV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zx{constructor(e){this._client=e}}Zx._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yx(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const n0=Object.freeze(Object.create(null)),LV=(t=Yx)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],a=n.reduce((g,y,v)=>{var S,V,M;/[?#]/.test(y)&&(r=!0);const O=i[v];let R=(r?encodeURIComponent:t)(""+O);return v!==i.length&&(O==null||typeof O=="object"&&O.toString===((M=Object.getPrototypeOf((V=Object.getPrototypeOf((S=O.hasOwnProperty)!==null&&S!==void 0?S:n0))!==null&&V!==void 0?V:n0))===null||M===void 0?void 0:M.toString))&&(R=O+"",o.push({start:g.length+y.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),g+y+(v===i.length?"":R)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=d.exec(u))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((g,y)=>g.start-y.start),o.length>0){let g=0;const y=o.reduce((v,S)=>{const V=" ".repeat(S.start-g),M="^".repeat(S.length);return g=S.start+S.length,v+V+M},"");throw new bn(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${a}
${y}`)}return a},tc=LV(Yx);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qx extends Zx{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=hd(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(tc`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(tc`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(tc`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:a=this._client.apiVersion}=o,u=hd(o,["api_version"]);return this._client.get(tc`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}Qx._key=Object.freeze(["interactions"]);class jx extends Qx{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VV(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let nc;function Xm(t){let e;return(nc??(e=new globalThis.TextEncoder,nc=e.encode.bind(e)))(t)}let ic;function i0(t){let e;return(ic??(e=new globalThis.TextDecoder,ic=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Xm(e):e;this.buffer=VV([this.buffer,n]);const i=[];let r;for(;(r=FV(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(i0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=i0(this.buffer.subarray(0,o));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Jd.NEWLINE_CHARS=new Set([`
`,"\r"]);Jd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function FV(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function UV(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fd={off:0,error:200,warn:300,info:400,debug:500},r0=(t,e,n)=>{if(t){if(_V(fd,t))return t;Kt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(fd))}`)}};function Ja(){}function rc(t,e,n){return!e||fd[t]>fd[n]?Ja:e[t].bind(e)}const OV={error:Ja,warn:Ja,info:Ja,debug:Ja};let o0=new WeakMap;function Kt(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return OV;const r=o0.get(n);if(r&&r[0]===i)return r[1];const o={error:rc("error",n,i),warn:rc("warn",n,i),info:rc("info",n,i),debug:rc("debug",n,i)};return o0.set(n,[i,o]),o}const $r=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Kt(i):console;function a(){return Kn(this,arguments,function*(){var d,f,g,y;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var S=!0,V=Wn(BV(e,n)),M;M=yield _e(V.next()),d=M.done,!d;S=!0){y=M.value,S=!1;const O=y;if(!v)if(O.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield _e(JSON.parse(O.data))}catch(R){throw o.error("Could not parse message into JSON:",O.data),o.error("From chunk:",O.raw),R}}}catch(O){f={error:O}}finally{try{!S&&!d&&(g=V.return)&&(yield _e(g.call(V)))}finally{if(f)throw f.error}}v=!0}catch(O){if(dp(O))return yield _e(void 0);throw O}finally{v||n.abort()}})}return new ds(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Kn(this,arguments,function*(){var d,f,g,y;const v=new Jd,S=Kx(e);try{for(var V=!0,M=Wn(S),O;O=yield _e(M.next()),d=O.done,!d;V=!0){y=O.value,V=!1;const R=y;for(const N of v.decode(R))yield yield _e(N)}}catch(R){f={error:R}}finally{try{!V&&!d&&(g=M.return)&&(yield _e(g.call(M)))}finally{if(f)throw f.error}}for(const R of v.flush())yield yield _e(R)})}function a(){return Kn(this,arguments,function*(){var d,f,g,y;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var S=!0,V=Wn(o()),M;M=yield _e(V.next()),d=M.done,!d;S=!0){y=M.value,S=!1;const O=y;v||O&&(yield yield _e(JSON.parse(O)))}}catch(O){f={error:O}}finally{try{!S&&!d&&(g=V.return)&&(yield _e(g.call(V)))}finally{if(f)throw f.error}}v=!0}catch(O){if(dp(O))return yield _e(void 0);throw O}finally{v||n.abort()}})}return new ds(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const a=i.next();e.push(a),n.push(a)}return o.shift()}});return[new ds(()=>r(e),this.controller,this.client),new ds(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return $x({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const a=Xm(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function BV(t,e){return Kn(this,arguments,function*(){var i,r,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bn("Attempted to iterate over a response with no body");const u=new GV,d=new Jd,f=Kx(t.body);try{for(var g=!0,y=Wn(zV(f)),v;v=yield _e(y.next()),i=v.done,!i;g=!0){a=v.value,g=!1;const S=a;for(const V of d.decode(S)){const M=u.decode(V);M&&(yield yield _e(M))}}}catch(S){r={error:S}}finally{try{!g&&!i&&(o=y.return)&&(yield _e(o.call(y)))}finally{if(r)throw r.error}}for(const S of d.flush()){const V=u.decode(S);V&&(yield yield _e(V))}})}function zV(t){return Kn(this,arguments,function*(){var n,i,r,o;let a=new Uint8Array;try{for(var u=!0,d=Wn(t),f;f=yield _e(d.next()),n=f.done,!n;u=!0){o=f.value,u=!1;const g=o;if(g==null)continue;const y=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Xm(g):g;let v=new Uint8Array(a.length+y.length);v.set(a),v.set(y,a.length),a=v;let S;for(;(S=UV(a))!==-1;)yield yield _e(a.slice(0,S)),a=a.slice(S)}}catch(g){i={error:g}}finally{try{!u&&!n&&(r=d.return)&&(yield _e(r.call(d)))}finally{if(i)throw i.error}}a.length>0&&(yield yield _e(a))})}class GV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=HV(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function HV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qV(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,a=await(async()=>{var u;if(e.options.stream)return Kt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ds.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),f=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await n.json():await n.text()})();return Kt(t).debug(`[${i}] response parsed`,$r({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eg extends Promise{constructor(e,n,i=qV){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new eg(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xx=Symbol("brand.privateNullableHeaders");function*$V(t){if(!t)return;if(Xx in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Xv(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=Xv(i[1])?i[1]:[i[1]];let a=!1;for(const u of o)u!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,u])}}const Ba=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,a]of $V(i)){const u=o.toLowerCase();r.has(u)||(e.delete(o),r.add(u)),a===null?(e.delete(o),n.add(u)):(e.append(o,a),n.delete(u))}}return{[Xx]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oh=t=>{var e,n,i,r,o,a;if(typeof globalThis.process<"u")return(i=(n=(e=g1)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eS;class Zd{constructor(e){var n,i,r,o,a,u,d,{baseURL:f=Oh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(n=Oh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:y="v1beta"}=e,v=hd(e,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:g,apiVersion:y},v),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(i=S.timeout)!==null&&i!==void 0?i:Zd.DEFAULT_TIMEOUT,this.logger=(r=S.logger)!==null&&r!==void 0?r:console;const V="warn";this.logLevel=V,this.logLevel=(a=(o=r0(S.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:r0(Oh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:V,this.fetchOptions=S.fetchOptions,this.maxRetries=(u=S.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=S.fetch)!==null&&d!==void 0?d:IV(),this.encoder=PV,this._options=S,this.apiKey=g,this.apiVersion=y,this.clientAdapter=S.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ba([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ba([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ba([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new bn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Qo}`}defaultIdempotencyKey(){return`stainless-node-retry-${dV()}`}makeStatusError(e,n,i,r){return Zt.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=fV(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return gV(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new eg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,a;const u=await e,d=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:f,url:g,timeout:y}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(f,{url:g,options:u});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(Kt(this).debug(`[${v}] sending request`,$r({retryOfRequestLogID:i,method:u.method,url:g,options:u,headers:f.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new fp;const M=new AbortController,O=await this.fetchWithTimeout(g,f,y,M).catch(hp),R=Date.now();if(O instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new fp;const G=dp(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(n)return Kt(this).info(`[${v}] connection ${G?"timed out":"failed"} - ${I}`),Kt(this).debug(`[${v}] connection ${G?"timed out":"failed"} (${I})`,$r({retryOfRequestLogID:i,url:g,durationMs:R-V,message:O.message})),this.retryRequest(u,n,i??v);throw Kt(this).info(`[${v}] connection ${G?"timed out":"failed"} - error; no more retries left`),Kt(this).debug(`[${v}] connection ${G?"timed out":"failed"} (error; no more retries left)`,$r({retryOfRequestLogID:i,url:g,durationMs:R-V,message:O.message})),G?new Vx:new Wd({cause:O})}const N=`[${v}${S}] ${f.method} ${g} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${R-V}ms`;if(!O.ok){const I=await this.shouldRetry(O);if(n&&I){const k=`retrying, ${n} attempts remaining`;return await AV(O.body),Kt(this).info(`${N} - ${k}`),Kt(this).debug(`[${v}] response error (${k})`,$r({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,durationMs:R-V})),this.retryRequest(u,n,i??v,O.headers)}const G=I?"error; no more retries left":"error; not retryable";Kt(this).info(`${N} - ${G}`);const W=await O.text().catch(k=>hp(k).message),K=vV(W),b=K?void 0:W;throw Kt(this).debug(`[${v}] response error (${G})`,$r({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,message:b,durationMs:Date.now()-V})),this.makeStatusError(O.status,K,b,O.headers)}return Kt(this).info(N),Kt(this).debug(`[${v}] response start`,$r({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,durationMs:R-V})),{response:O,options:u,controller:M,requestLogID:v,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:a,method:u}=o,d=hd(o,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const f=setTimeout(()=>r.abort(),i),g=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},g?{duplex:"half"}:{}),{method:"GET"}),d);u&&(y.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const f=parseFloat(u);Number.isNaN(f)||(a=f)}const d=r==null?void 0:r.get("retry-after");if(d&&!a){const f=parseFloat(d);Number.isNaN(f)?a=Date.parse(d)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await TV(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const a=Object.assign({},e),{method:u,path:d,query:f,defaultBaseURL:g}=a,y=this.buildURL(d,f,g);"timeout"in a&&yV("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:v,body:S}=this.buildBody({options:a}),V=await this.buildHeaders({options:e,method:u,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:V},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=Ba([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),SV()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Ba([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:CV(e)}:this.encoder({body:e,headers:i})}}Zd.DEFAULT_TIMEOUT=6e4;class At extends Zd{constructor(){super(...arguments),this.interactions=new jx(this)}}eS=At;At.GeminiNextGenAPIClient=eS;At.GeminiNextGenAPIClientError=bn;At.APIError=Zt;At.APIConnectionError=Wd;At.APIConnectionTimeoutError=Vx;At.APIUserAbortError=fp;At.NotFoundError=Bx;At.ConflictError=zx;At.RateLimitError=Hx;At.BadRequestError=Fx;At.AuthenticationError=Ux;At.InternalServerError=qx;At.PermissionDeniedError=Ox;At.UnprocessableEntityError=Gx;At.toFile=bV;At.Interactions=jx;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KV(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function WV(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function JV(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function ZV(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function YV(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);if(a!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&p(e,["tuningTask","hyperparameters","batchSize"],u);const d=c(t,["learningRate"]);if(e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","learningRate"],d),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function QV(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec"],s0(S))}else if(r==="PREFERENCE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec"],s0(S))}const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&p(e,["tunedModelDisplayName"],o);const a=c(t,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(u==="PREFERENCE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="PREFERENCE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(f==="PREFERENCE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let g=c(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(g==="PREFERENCE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=c(t,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);const v=c(t,["beta"]);return e!==void 0&&v!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function jV(t,e){const n={},i=c(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&uF(o);const a=c(t,["config"]);return a!=null&&YV(a,n),n}function XV(t,e){const n={},i=c(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&cF(o,n,e);const a=c(t,["config"]);return a!=null&&QV(a,n,e),n}function eF(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function tF(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function nF(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),i}function iF(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),i}function rF(t,e){const n={},i=c(t,["config"]);return i!=null&&nF(i,n),n}function oF(t,e){const n={},i=c(t,["config"]);return i!=null&&iF(i,n),n}function sF(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const o=c(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>tS(u))),p(n,["tuningJobs"],a)}return n}function aF(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const o=c(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>gp(u))),p(n,["tuningJobs"],a)}return n}function lF(t,e){const n={},i=c(t,["name"]);i!=null&&p(n,["model"],i);const r=c(t,["name"]);return r!=null&&p(n,["endpoint"],r),n}function uF(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(n,["examples","examples"],r)}return n}function cF(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function tS(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&p(n,["name"],r);const o=c(t,["state"]);o!=null&&p(n,["state"],_x(o));const a=c(t,["createTime"]);a!=null&&p(n,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&p(n,["startTime"],u);const d=c(t,["tuningTask","completeTime"]);d!=null&&p(n,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&p(n,["updateTime"],f);const g=c(t,["description"]);g!=null&&p(n,["description"],g);const y=c(t,["baseModel"]);y!=null&&p(n,["baseModel"],y);const v=c(t,["_self"]);return v!=null&&p(n,["tunedModel"],lF(v)),n}function gp(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&p(n,["name"],r);const o=c(t,["state"]);o!=null&&p(n,["state"],_x(o));const a=c(t,["createTime"]);a!=null&&p(n,["createTime"],a);const u=c(t,["startTime"]);u!=null&&p(n,["startTime"],u);const d=c(t,["endTime"]);d!=null&&p(n,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&p(n,["updateTime"],f);const g=c(t,["error"]);g!=null&&p(n,["error"],g);const y=c(t,["description"]);y!=null&&p(n,["description"],y);const v=c(t,["baseModel"]);v!=null&&p(n,["baseModel"],v);const S=c(t,["tunedModel"]);S!=null&&p(n,["tunedModel"],S);const V=c(t,["preTunedModel"]);V!=null&&p(n,["preTunedModel"],V);const M=c(t,["supervisedTuningSpec"]);M!=null&&p(n,["supervisedTuningSpec"],M);const O=c(t,["preferenceOptimizationSpec"]);O!=null&&p(n,["preferenceOptimizationSpec"],O);const R=c(t,["tuningDataStats"]);R!=null&&p(n,["tuningDataStats"],R);const N=c(t,["encryptionSpec"]);N!=null&&p(n,["encryptionSpec"],N);const I=c(t,["partnerModelTuningSpec"]);I!=null&&p(n,["partnerModelTuningSpec"],I);const G=c(t,["customBaseModel"]);G!=null&&p(n,["customBaseModel"],G);const W=c(t,["experiment"]);W!=null&&p(n,["experiment"],W);const K=c(t,["labels"]);K!=null&&p(n,["labels"],K);const b=c(t,["outputUri"]);b!=null&&p(n,["outputUri"],b);const C=c(t,["pipelineJob"]);C!=null&&p(n,["pipelineJob"],C);const k=c(t,["serviceAccount"]);k!=null&&p(n,["serviceAccount"],k);const U=c(t,["tunedModelDisplayName"]);U!=null&&p(n,["tunedModelDisplayName"],U);const B=c(t,["veoTuningSpec"]);return B!=null&&p(n,["veoTuningSpec"],B),n}function dF(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&p(n,["name"],r);const o=c(t,["metadata"]);o!=null&&p(n,["metadata"],o);const a=c(t,["done"]);a!=null&&p(n,["done"],a);const u=c(t,["error"]);return u!=null&&p(n,["error"],u),n}function s0(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&p(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&p(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hF extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(Vi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:ip.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=tF(e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>gp(g))}else{const f=eF(e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>tS(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=oF(e);return u=ie("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=aF(g),v=new Mv;return Object.assign(v,y),v})}else{const f=rF(e);return u=ie("tunedModels",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=sF(g),v=new Mv;return Object.assign(v,y),v})}}async cancel(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=WV(e);return u=ie("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ZV(g),v=new bv;return Object.assign(v,y),v})}else{const f=KV(e);return u=ie("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=JV(g),v=new bv;return Object.assign(v,y),v})}}async tuneInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=XV(e,e);return o=ie("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>gp(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jV(e);return o=ie("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>dF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fF{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pF=1024*1024*8,mF=3,gF=1e3,_F=2,pd="x-goog-upload-status";async function yF(t,e,n){var i;const r=await nS(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function vF(t,e,n){var i;const r=await nS(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=dx(o),u=new Wm;return Object.assign(u,a),u}async function nS(t,e,n){var i,r;let o=0,a=0,u=new op(new Response),d="upload";for(o=t.size;a<o;){const f=Math.min(pF,o-a),g=t.slice(a,a+f);a+f>=o&&(d+=", finalize");let y=0,v=gF;for(;y<mF&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[pd]));)y++,await EF(v),v=v*_F;if(a+=f,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[pd])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function TF(t){return{size:t.size,type:t.type}}function EF(t){return new Promise(e=>setTimeout(e,t))}class wF{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yF(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vF(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TF(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xF{create(e,n,i){return new SF(e,n,i)}}class SF{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a0="x-goog-api-key";class IF{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(a0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(a0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CF="gl-node/";class AF{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new At({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=T1(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new IF(this.apiKey);this.apiClient=new T2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:CF+"web",uploader:new wF,downloader:new fF}),this.models=new O2(this.apiClient),this.live=new b2(this.apiClient,r,new xF),this.batches=new ZM(this.apiClient),this.chats=new kb(this.models,this.apiClient),this.caches=new Ab(this.apiClient),this.files=new Bb(this.apiClient),this.operations=new B2(this.apiClient),this.authTokens=new nV(this.apiClient),this.tunings=new hF(this.apiClient),this.fileSearchStores=new cV(this.apiClient)}}const PF=new AF({apiKey:"AIzaSy... (Gemini API Anahtarnz)"}),RF=async(t,e,n)=>{var i;try{const r=`${n} ilesindeki ${t} isimli, ${e} ara kapasiteli taksi dura iin ksa, resmi bir tantm/bilgi notu yaz. 1 cmleyi gemesin.`;return((i=(await PF.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text)==null?void 0:i.trim())||""}catch(r){return console.error("Gemini AI Error:",r),""}};var _p={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(MS,function(n){var i="1.9.4";function r(s){var l,m,_,w;for(m=1,_=arguments.length;m<_;m++){w=arguments[m];for(l in w)s[l]=w[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var _=m.call(arguments,2);return function(){return s.apply(l,_.length?_.concat(m.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,m){var _,w,A,z;return z=function(){_=!1,w&&(A.apply(m,w),w=!1)},A=function(){_?w=arguments:(s.apply(m,arguments),setTimeout(z,l),_=!0)},A}function g(s,l,m){var _=l[1],w=l[0],A=_-w;return s===_&&m?s:((s-w)%A+A)%A+w}function y(){return!1}function v(s,l){if(l===!1)return s;var m=Math.pow(10,l===void 0?6:l);return Math.round(s*m)/m}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function V(s){return S(s).split(/\s+/)}function M(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var m in l)s.options[m]=l[m];return s.options}function O(s,l,m){var _=[];for(var w in s)_.push(encodeURIComponent(m?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function N(s,l){return s.replace(R,function(m,_){var w=l[_];if(w===void 0)throw new Error("No value provided for variable "+m);return typeof w=="function"&&(w=w(l)),w})}var I=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function G(s,l){for(var m=0;m<s.length;m++)if(s[m]===l)return m;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var b=0;function C(s){var l=+new Date,m=Math.max(0,16-(l-b));return b=l+m,window.setTimeout(s,m)}var k=window.requestAnimationFrame||K("RequestAnimationFrame")||C,U=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function B(s,l,m){if(m&&k===C)s.call(l);else return k.call(window,a(s,l))}function F(s){s&&U.call(window,s)}var D={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:f,wrapNum:g,falseFn:y,formatNum:v,trim:S,splitWords:V,setOptions:M,getParamString:O,template:N,isArray:I,indexOf:G,emptyImageUrl:W,requestFn:k,cancelFn:U,requestAnimFrame:B,cancelAnimFrame:F};function ae(){}ae.extend=function(s){var l=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,_=o(m);_.constructor=l,l.prototype=_;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return s.statics&&r(l,s.statics),s.includes&&(Ke(s.includes),r.apply(null,[_].concat(s.includes))),r(_,s),delete _.statics,delete _.includes,_.options&&(_.options=m.options?o(m.options):{},r(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var A=0,z=_._initHooks.length;A<z;A++)_._initHooks[A].call(this)}},l},ae.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ae.mergeOptions=function(s){return r(this.prototype.options,s),this},ae.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Ke(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=I(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Me={on:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l);else{s=V(s);for(var w=0,A=s.length;w<A;w++)this._on(s[w],l,m)}return this},off:function(s,l,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],l);else{s=V(s);for(var w=arguments.length===1,A=0,z=s.length;A<z;A++)w?this._off(s[A]):this._off(s[A],l,m)}return this},_on:function(s,l,m,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,m)===!1){m===this&&(m=void 0);var w={fn:l,ctx:m};_&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,l,m){var _,w,A;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(w=0,A=_.length;w<A;w++)_[w].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(s,l,m);if(z!==!1){var $=_[z];this._firingCount&&($.fn=y,this._events[s]=_=_.slice()),_.splice(z,1)}}},fire:function(s,l,m){if(!this.listens(s,m))return this;var _=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var A=0,z=w.length;A<z;A++){var $=w[A],J=$.fn;$.once&&this.off(s,J,$.ctx),J.call($.ctx||this,_)}this._firingCount--}}return m&&this._propagateEvent(_),this},listens:function(s,l,m,_){typeof s!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(_=!!l,w=void 0,m=void 0);var A=this._events&&this._events[s];if(A&&A.length&&this._listens(s,w,m)!==!1)return!0;if(_){for(var z in this._eventParents)if(this._eventParents[z].listens(s,l,m,_))return!0}return!1},_listens:function(s,l,m){if(!this._events)return!1;var _=this._events[s]||[];if(!l)return!!_.length;m===this&&(m=void 0);for(var w=0,A=_.length;w<A;w++)if(_[w].fn===l&&_[w].ctx===m)return w;return!1},once:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l,!0);else{s=V(s);for(var w=0,A=s.length;w<A;w++)this._on(s[w],l,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Me.addEventListener=Me.on,Me.removeEventListener=Me.clearAllEventListeners=Me.off,Me.addOneTimeEventListener=Me.once,Me.fireEvent=Me.fire,Me.hasEventListeners=Me.listens;var xe=ae.extend(Me);function H(s,l,m){this.x=m?Math.round(s):s,this.y=m?Math.round(l):l}var ne=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new H(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new H(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(s){s=X(s);var l=s.x-this.x,m=s.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function X(s,l,m){return s instanceof H?s:I(s)?new H(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new H(s.x,s.y):new H(s,l,m)}function he(s,l){if(s)for(var m=l?[s,l]:s,_=0,w=m.length;_<w;_++)this.extend(m[_])}he.prototype={extend:function(s){var l,m;if(!s)return this;if(s instanceof H||typeof s[0]=="number"||"x"in s)l=m=X(s);else if(s=ye(s),l=s.min,m=s.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,m;return typeof s[0]=="number"||s instanceof H?s=X(s):s=ye(s),s instanceof he?(l=s.min,m=s.max):l=m=s,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=ye(s);var l=this.min,m=this.max,_=s.min,w=s.max,A=w.x>=l.x&&_.x<=m.x,z=w.y>=l.y&&_.y<=m.y;return A&&z},overlaps:function(s){s=ye(s);var l=this.min,m=this.max,_=s.min,w=s.max,A=w.x>l.x&&_.x<m.x,z=w.y>l.y&&_.y<m.y;return A&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,m=this.max,_=Math.abs(l.x-m.x)*s,w=Math.abs(l.y-m.y)*s;return ye(X(l.x-_,l.y-w),X(m.x+_,m.y+w))},equals:function(s){return s?(s=ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ye(s,l){return!s||s instanceof he?s:new he(s,l)}function Pe(s,l){if(s)for(var m=l?[s,l]:s,_=0,w=m.length;_<w;_++)this.extend(m[_])}Pe.prototype={extend:function(s){var l=this._southWest,m=this._northEast,_,w;if(s instanceof Se)_=s,w=s;else if(s instanceof Pe){if(_=s._southWest,w=s._northEast,!_||!w)return this}else return s?this.extend(ve(s)||Oe(s)):this;return!l&&!m?(this._southWest=new Se(_.lat,_.lng),this._northEast=new Se(w.lat,w.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),m.lat=Math.max(w.lat,m.lat),m.lng=Math.max(w.lng,m.lng)),this},pad:function(s){var l=this._southWest,m=this._northEast,_=Math.abs(l.lat-m.lat)*s,w=Math.abs(l.lng-m.lng)*s;return new Pe(new Se(l.lat-_,l.lng-w),new Se(m.lat+_,m.lng+w))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Se||"lat"in s?s=ve(s):s=Oe(s);var l=this._southWest,m=this._northEast,_,w;return s instanceof Pe?(_=s.getSouthWest(),w=s.getNorthEast()):_=w=s,_.lat>=l.lat&&w.lat<=m.lat&&_.lng>=l.lng&&w.lng<=m.lng},intersects:function(s){s=Oe(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),w=s.getNorthEast(),A=w.lat>=l.lat&&_.lat<=m.lat,z=w.lng>=l.lng&&_.lng<=m.lng;return A&&z},overlaps:function(s){s=Oe(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),w=s.getNorthEast(),A=w.lat>l.lat&&_.lat<m.lat,z=w.lng>l.lng&&_.lng<m.lng;return A&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Oe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Oe(s,l){return s instanceof Pe?s:new Pe(s,l)}function Se(s,l,m){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,m!==void 0&&(this.alt=+m)}Se.prototype={equals:function(s,l){if(!s)return!1;s=ve(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Yn.distance(this,ve(s))},wrap:function(){return Yn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,m=l/Math.cos(Math.PI/180*this.lat);return Oe([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function ve(s,l,m){return s instanceof Se?s:I(s)&&typeof s[0]!="object"?s.length===3?new Se(s[0],s[1],s[2]):s.length===2?new Se(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Se(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Se(s,l,m)}var gt={latLngToPoint:function(s,l){var m=this.projection.project(s),_=this.scale(l);return this.transformation._transform(m,_)},pointToLatLng:function(s,l){var m=this.scale(l),_=this.transformation.untransform(s,m);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(s),_=this.transformation.transform(l.min,m),w=this.transformation.transform(l.max,m);return new he(_,w)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new Se(m,l,_)},wrapLatLngBounds:function(s){var l=s.getCenter(),m=this.wrapLatLng(l),_=l.lat-m.lat,w=l.lng-m.lng;if(_===0&&w===0)return s;var A=s.getSouthWest(),z=s.getNorthEast(),$=new Se(A.lat-_,A.lng-w),J=new Se(z.lat-_,z.lng-w);return new Pe($,J)}},Yn=r({},gt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var m=Math.PI/180,_=s.lat*m,w=l.lat*m,A=Math.sin((l.lat-s.lat)*m/2),z=Math.sin((l.lng-s.lng)*m/2),$=A*A+Math.cos(_)*Math.cos(w)*z*z,J=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*J}}),Zl=6378137,Bi={R:Zl,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,m=this.MAX_LATITUDE,_=Math.max(Math.min(m,s.lat),-m),w=Math.sin(_*l);return new H(this.R*s.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Zl*Math.PI;return new he([-s,-s],[s,s])}()};function zi(s,l,m,_){if(I(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=m,this._d=_}zi.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new H((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function hi(s,l,m,_){return new zi(s,l,m,_)}var Pr=r({},Yn,{code:"EPSG:3857",projection:Bi,transformation:function(){var s=.5/(Math.PI*Bi.R);return hi(s,.5,-s,.5)}()}),Js=r({},Pr,{code:"EPSG:900913"});function mo(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Zs(s,l){var m="",_,w,A,z,$,J;for(_=0,A=s.length;_<A;_++){for($=s[_],w=0,z=$.length;w<z;w++)J=$[w],m+=(w?"L":"M")+J.x+" "+J.y;m+=l?le.svg?"z":"x":""}return m||"M0 0"}var Ys=document.documentElement.style,go="ActiveXObject"in window,Yl=go&&!document.addEventListener,_o="msLaunchUri"in navigator&&!("documentMode"in document),yo=gn("webkit"),Ql=gn("android"),vo=gn("android 2")||gn("android 3"),Qs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),jl=Ql&&gn("Google")&&Qs<537&&!("AudioNode"in window),dt=!!window.opera,Et=!_o&&gn("chrome"),Rr=gn("gecko")&&!yo&&!dt&&!go,Xl=!Et&&gn("safari"),js=gn("phantom"),eu="OTransition"in Ys,kr=navigator.platform.indexOf("Win")===0,Xs=go&&"transition"in Ys,To="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vo,Eo="MozPerspective"in Ys,Yd=!window.L_DISABLE_3D&&(Xs||To||Eo)&&!eu&&!js,Nr=typeof orientation<"u"||gn("mobile"),ea=Nr&&yo,tu=Nr&&To,ta=!window.PointerEvent&&window.MSPointerEvent,Gi=!!(window.PointerEvent||ta),wo="ontouchstart"in window||!!window.TouchEvent,na=!window.L_NO_TOUCH&&(wo||Gi),fi=Nr&&dt,nu=Nr&&Rr,xo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,iu=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),Mr=function(){return!!document.createElement("canvas").getContext}(),So=!!(document.createElementNS&&mo("svg").createSVGRect),Pt=!!So&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ru=!So&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),br=navigator.platform.indexOf("Mac")===0,Dr=navigator.platform.indexOf("Linux")===0;function gn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:go,ielt9:Yl,edge:_o,webkit:yo,android:Ql,android23:vo,androidStock:jl,opera:dt,chrome:Et,gecko:Rr,safari:Xl,phantom:js,opera12:eu,win:kr,ie3d:Xs,webkit3d:To,gecko3d:Eo,any3d:Yd,mobile:Nr,mobileWebkit:ea,mobileWebkit3d:tu,msPointer:ta,pointer:Gi,touch:na,touchNative:wo,mobileOpera:fi,mobileGecko:nu,retina:xo,passiveEvents:iu,canvas:Mr,svg:So,vml:ru,inlineSvg:Pt,mac:br,linux:Dr},pi=le.msPointer?"MSPointerDown":"pointerdown",ou=le.msPointer?"MSPointerMove":"pointermove",su=le.msPointer?"MSPointerUp":"pointerup",Lr=le.msPointer?"MSPointerCancel":"pointercancel",Io={touchstart:pi,touchmove:ou,touchend:su,touchcancel:Lr},Co={touchstart:Po,touchmove:Ao,touchend:Ao,touchcancel:Ao},Dn={},Ln=!1;function au(s,l,m){return l==="touchstart"&&uu(),Co[l]?(m=Co[l].bind(this,m),s.addEventListener(Io[l],m,!1),m):(console.warn("wrong event specified:",l),y)}function lu(s,l,m){if(!Io[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Io[l],m,!1)}function ia(s){Dn[s.pointerId]=s}function ra(s){Dn[s.pointerId]&&(Dn[s.pointerId]=s)}function oa(s){delete Dn[s.pointerId]}function uu(){Ln||(document.addEventListener(pi,ia,!0),document.addEventListener(ou,ra,!0),document.addEventListener(su,oa,!0),document.addEventListener(Lr,oa,!0),Ln=!0)}function Ao(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in Dn)l.touches.push(Dn[m]);l.changedTouches=[l],s(l)}}function Po(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&et(l),Ao(s,l)}function cu(s){var l={},m,_;for(_ in s)m=s[_],l[_]=m&&m.bind?m.bind(s):m;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var sa=200;function Vr(s,l){s.addEventListener("dblclick",l);var m=0,_;function w(A){if(A.detail!==1){_=A.detail;return}if(!(A.pointerType==="mouse"||A.sourceCapabilities&&!A.sourceCapabilities.firesTouchEvents)){var z=ya(A);if(!(z.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!z.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var $=Date.now();$-m<=sa?(_++,_===2&&l(cu(A))):_=1,m=$}}}return s.addEventListener("click",w),{dblclick:l,simDblclick:w}}function mi(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Fr=_i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ur=_i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),aa=Ur==="webkitTransition"||Ur==="OTransition"?Ur+"End":"transitionend";function la(s){return typeof s=="string"?document.getElementById(s):s}function Hi(s,l){var m=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);m=_?_[l]:null}return m==="auto"?null:m}function Re(s,l,m){var _=document.createElement(s);return _.className=l||"",m&&m.appendChild(_),_}function $e(s){var l=s.parentNode;l&&l.removeChild(s)}function Or(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function gi(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function qi(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function ua(s,l){if(s.classList!==void 0)return s.classList.contains(l);var m=_n(s);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function we(s,l){if(s.classList!==void 0)for(var m=V(l),_=0,w=m.length;_<w;_++)s.classList.add(m[_]);else if(!ua(s,l)){var A=_n(s);ca(s,(A?A+" ":"")+l)}}function Ye(s,l){s.classList!==void 0?s.classList.remove(l):ca(s,S((" "+_n(s)+" ").replace(" "+l+" "," ")))}function ca(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function _n(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function st(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Ro(s,l)}function Ro(s,l){var m=!1,_="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):s.style.filter+=" progid:"+_+"(opacity="+l+")"}function _i(s){for(var l=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in l)return s[m];return!1}function Qn(s,l,m){var _=l||new H(0,0);s.style[Fr]=(le.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(m?" scale("+m+")":"")}function me(s,l){s._leaflet_pos=l,le.any3d?Qn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function yn(s){return s._leaflet_pos||new H(0,0)}var Vn,Fn,da;if("onselectstart"in document)Vn=function(){fe(window,"selectstart",et)},Fn=function(){He(window,"selectstart",et)};else{var $i=_i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vn=function(){if($i){var s=document.documentElement.style;da=s[$i],s[$i]="none"}},Fn=function(){$i&&(document.documentElement.style[$i]=da,da=void 0)}}function ha(){fe(window,"dragstart",et)}function fa(){He(window,"dragstart",et)}var ko,pa;function yi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(an(),ko=s,pa=s.style.outlineStyle,s.style.outlineStyle="none",fe(window,"keydown",an))}function an(){ko&&(ko.style.outlineStyle=pa,ko=void 0,pa=void 0,He(window,"keydown",an))}function ma(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function No(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var du={__proto__:null,TRANSFORM:Fr,TRANSITION:Ur,TRANSITION_END:aa,get:la,getStyle:Hi,create:Re,remove:$e,empty:Or,toFront:gi,toBack:qi,hasClass:ua,addClass:we,removeClass:Ye,setClass:ca,getClass:_n,setOpacity:st,testProp:_i,setTransform:Qn,setPosition:me,getPosition:yn,get disableTextSelection(){return Vn},get enableTextSelection(){return Fn},disableImageDrag:ha,enableImageDrag:fa,preventOutline:yi,restoreOutline:an,getSizedParentNode:ma,getScale:No};function fe(s,l,m,_){if(l&&typeof l=="object")for(var w in l)ga(s,w,l[w],m);else{l=V(l);for(var A=0,z=l.length;A<z;A++)ga(s,l[A],m,_)}return this}var vn="_leaflet_events";function He(s,l,m,_){if(arguments.length===1)hu(s),delete s[vn];else if(l&&typeof l=="object")for(var w in l)_a(s,w,l[w],m);else if(l=V(l),arguments.length===2)hu(s,function($){return G(l,$)!==-1});else for(var A=0,z=l.length;A<z;A++)_a(s,l[A],m,_);return this}function hu(s,l){for(var m in s[vn]){var _=m.split(/\d/)[0];(!l||l(_))&&_a(s,_,null,null,m)}}var Tn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ga(s,l,m,_){var w=l+d(m)+(_?"_"+d(_):"");if(s[vn]&&s[vn][w])return this;var A=function($){return m.call(_||s,$||window.event)},z=A;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?A=au(s,l,A):le.touch&&l==="dblclick"?A=Vr(s,A):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Tn[l]||l,A,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(A=function($){$=$||window.event,va(s,$)&&z($)},s.addEventListener(Tn[l],A,!1)):s.addEventListener(l,z,!1):s.attachEvent("on"+l,A),s[vn]=s[vn]||{},s[vn][w]=A}function _a(s,l,m,_,w){w=w||l+d(m)+(_?"_"+d(_):"");var A=s[vn]&&s[vn][w];if(!A)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?lu(s,l,A):le.touch&&l==="dblclick"?mi(s,A):"removeEventListener"in s?s.removeEventListener(Tn[l]||l,A,!1):s.detachEvent("on"+l,A),s[vn][w]=null}function En(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ki(s){return ga(s,"wheel",En),this}function Wi(s){return fe(s,"mousedown touchstart dblclick contextmenu",En),s._leaflet_disable_click=!0,this}function et(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ln(s){return et(s),En(s),this}function ya(s){if(s.composedPath)return s.composedPath();for(var l=[],m=s.target;m;)l.push(m),m=m.parentNode;return l}function Mo(s,l){if(!l)return new H(s.clientX,s.clientY);var m=No(l),_=m.boundingClientRect;return new H((s.clientX-_.left)/m.x-l.clientLeft,(s.clientY-_.top)/m.y-l.clientTop)}var Qe=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fu(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Qe:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function va(s,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var pu={__proto__:null,on:fe,off:He,stopPropagation:En,disableScrollPropagation:Ki,disableClickPropagation:Wi,preventDefault:et,stop:ln,getPropagationPath:ya,getMousePosition:Mo,getWheelDelta:fu,isExternalTarget:va,addListener:fe,removeListener:He},Ta=xe.extend({run:function(s,l,m,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=yn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var m=this._startPos.add(this._offset.multiplyBy(s));l&&m._round(),me(this._el,m),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ce=xe.extend({options:{crs:Pr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=M(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ve(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ur&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),fe(this._proxy,aa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ve(s),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=r({animate:m.animate},m.zoom),m.pan=r({animate:m.animate,duration:m.duration},m.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,m.zoom):this._tryAnimatedPan(s,m.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,m){var _=this.getZoomScale(l),w=this.getSize().divideBy(2),A=s instanceof H?s:this.latLngToContainerPoint(s),z=A.subtract(w).multiplyBy(1-1/_),$=this.containerPointToLatLng(w.add(z));return this.setView($,l,{zoom:m})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Oe(s);var m=X(l.paddingTopLeft||l.padding||[0,0]),_=X(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(s,!1,m.add(_));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var A=_.subtract(m).divideBy(2),z=this.project(s.getSouthWest(),w),$=this.project(s.getNorthEast(),w),J=this.unproject(z.add($).divideBy(2).add(A),w);return{center:J,zoom:w}},fitBounds:function(s,l){if(s=Oe(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=X(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ta,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,m){if(m=m||{},m.animate===!1||!le.any3d)return this.setView(s,l,m);this._stop();var _=this.project(this.getCenter()),w=this.project(s),A=this.getSize(),z=this._zoom;s=ve(s),l=l===void 0?z:l;var $=Math.max(A.x,A.y),J=$*this.getZoomScale(z,l),Y=w.distanceTo(_)||1,re=1.42,pe=re*re;function Ie(ft){var ku=ft?-1:1,PS=ft?J:$,RS=J*J-$*$+ku*pe*pe*Y*Y,kS=2*PS*pe*Y,ih=RS/kS,wg=Math.sqrt(ih*ih+1)-ih,NS=wg<1e-9?-18:Math.log(wg);return NS}function $t(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function xt(ft){return(Math.exp(ft)+Math.exp(-ft))/2}function xn(ft){return $t(ft)/xt(ft)}var Xt=Ie(0);function $o(ft){return $*(xt(Xt)/xt(Xt+re*ft))}function SS(ft){return $*(xt(Xt)*xn(Xt+re*ft)-$t(Xt))/pe}function IS(ft){return 1-Math.pow(1-ft,1.5)}var CS=Date.now(),Tg=(Ie(1)-Xt)/re,AS=m.duration?1e3*m.duration:1e3*Tg*.8;function Eg(){var ft=(Date.now()-CS)/AS,ku=IS(ft)*Tg;ft<=1?(this._flyToFrame=B(Eg,this),this._move(this.unproject(_.add(w.subtract(_).multiplyBy(SS(ku)/Y)),z),this.getScaleZoom($/$o(ku),z),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Eg.call(this),this},flyToBounds:function(s,l){var m=this._getBoundsCenterZoom(s,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(s){return s=Oe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var m=this.getCenter(),_=this._limitCenter(m,this._zoom,Oe(s));return m.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var m=X(l.paddingTopLeft||l.padding||[0,0]),_=X(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),A=this.project(s),z=this.getPixelBounds(),$=ye([z.min.add(m),z.max.subtract(_)]),J=$.getSize();if(!$.contains(A)){this._enforcingBounds=!0;var Y=A.subtract($.getCenter()),re=$.extend(A).getSize().subtract(J);w.x+=Y.x<0?-re.x:re.x,w.y+=Y.y<0?-re.y:re.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),_=l.divideBy(2).round(),w=m.divideBy(2).round(),A=_.subtract(w);return!A.x&&!A.y?this:(s.animate&&s.pan?this.panBy(A):(s.pan&&this._rawPanBy(A),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),m=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,s):navigator.geolocation.getCurrentPosition(l,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,m=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,m=s.coords.longitude,_=new Se(l,m),w=_.toBounds(s.coords.accuracy*2),A=this._locateOptions;if(A.setView){var z=this.getBoundsZoom(w);this.setView(_,A.maxZoom?Math.min(z,A.maxZoom):z)}var $={latlng:_,bounds:w,timestamp:s.timestamp};for(var J in s.coords)typeof s.coords[J]=="number"&&($[J]=s.coords[J]);this.fire("locationfound",$)}},addHandler:function(s,l){if(!l)return this;var m=this[s]=new l(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)$e(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=Re("div",m,l||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new Pe(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,m){s=Oe(s),m=X(m||[0,0]);var _=this.getZoom()||0,w=this.getMinZoom(),A=this.getMaxZoom(),z=s.getNorthWest(),$=s.getSouthEast(),J=this.getSize().subtract(m),Y=ye(this.project($,_),this.project(z,_)).getSize(),re=le.any3d?this.options.zoomSnap:1,pe=J.x/Y.x,Ie=J.y/Y.y,$t=l?Math.max(pe,Ie):Math.min(pe,Ie);return _=this.getScaleZoom($t,_),re&&(_=Math.round(_/(re/100))*(re/100),_=l?Math.ceil(_/re)*re:Math.floor(_/re)*re),Math.max(w,Math.min(A,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var m=this._getTopLeftPoint(s,l);return new he(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(s)/m.scale(l)},getScaleZoom:function(s,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var _=m.zoom(s*m.scale(l));return isNaN(_)?1/0:_},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ve(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(X(s),l)},layerPointToLatLng:function(s){var l=X(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ve(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ve(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Oe(s))},distance:function(s,l){return this.options.crs.distance(ve(s),ve(l))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ve(s)))},mouseEventToContainerPoint:function(s){return Mo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=la(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");fe(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,we(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Hi(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,m){me(this._mapPane,new H(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,m)._move(s,l)._moveEnd(w),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,m,_){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?m&&m.pinch&&this.fire("zoom",m):((w||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){me(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?He:fe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var m=[],_,w=l==="mouseout"||l==="mouseover",A=s.target||s.srcElement,z=!1;A;){if(_=this._targets[d(A)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){z=!0;break}if(_&&_.listens(l,!0)&&(w&&!va(A,s)||(m.push(_),w))||A===this._container)break;A=A.parentNode}return!m.length&&!z&&!w&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var m=s.type;m==="mousedown"&&yi(l),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,m){if(s.type==="click"){var _=r({},s);_.type="preclick",this._fireDOMEvent(_,_.type,m)}var w=this._findEventTargets(s,l);if(m){for(var A=[],z=0;z<m.length;z++)m[z].listens(l,!0)&&A.push(m[z]);w=A.concat(w)}if(w.length){l==="contextmenu"&&et(s);var $=w[0],J={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=$.getLatLng&&(!$._radius||$._radius<=10);J.containerPoint=Y?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=Y?$.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(z=0;z<w.length;z++)if(w[z].fire(l,J,!0),J.originalEvent._stopped||w[z].options.bubblingMouseEvents===!1&&G(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return yn(this._mapPane)||new H(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var m=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var m=this.getSize()._divideBy(2);return this.project(s,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return this.project(s,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return ye([this.project(s.getSouthWest(),l)._subtract(_),this.project(s.getNorthWest(),l)._subtract(_),this.project(s.getSouthEast(),l)._subtract(_),this.project(s.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,m){if(!m)return s;var _=this.project(s,l),w=this.getSize().divideBy(2),A=new he(_.subtract(w),_.add(w)),z=this._getBoundsOffset(A,m,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(_.add(z),l)},_limitOffset:function(s,l){if(!l)return s;var m=this.getPixelBounds(),_=new he(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(s,l,m){var _=ye(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),w=_.min.subtract(s.min),A=_.max.subtract(s.max),z=this._rebound(w.x,-A.x),$=this._rebound(w.y,-A.y);return new H(z,$)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),m=this.getMaxZoom(),_=le.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(l,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var m=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var s=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var m=Fr,_=this._proxy.style[m];Qn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Qn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),w=this._getCenterOffset(s)._divideBy(1-1/_);return m.animate!==!0&&!this.getSize().contains(w)?!1:(B(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,m,_){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bo(s,l){return new Ce(s,l)}var jt=ae.extend({options:{position:"topright"},initialize:function(s){M(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),m=this.getPosition(),_=s._controlCorners[m];return we(l,"leaflet-control"),m.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),qt=function(s){return new jt(s)};Ce.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",m=this._controlContainer=Re("div",l+"control-container",this._container);function _(w,A){var z=l+w+" "+l+A;s[w+A]=Re("div",z,m)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)$e(this._controlCorners[s]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ea=jt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,m,_){return m<_?-1:_<m?1:0}},initialize:function(s,l,m){M(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return jt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Re("div",s),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Wi(l),Ki(l);var _=this._section=Re("section",s+"-list");m&&(this._map.on("click",this.collapse,this),fe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Re("a",s+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),fe(w,{keydown:function(A){A.keyCode===13&&this._expandSafely()},click:function(A){et(A),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Re("div",s+"-base",_),this._separator=Re("div",s+"-separator",_),this._overlaysList=Re("div",s+"-overlays",_),l.appendChild(_)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(a(function(_,w){return this.options.sortFunction(_.layer,w.layer,_.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Or(this._baseLayersList),Or(this._overlaysList),this._layerControlInputs=[];var s,l,m,_,w=0;for(m=0;m<this._layers.length;m++)_=this._layers[m],this._addItem(_),l=l||_.overlay,s=s||!_.overlay,w+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),m=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(s,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=m,_.firstChild},_addItem:function(s){var l=document.createElement("label"),m=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=m):_=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(_),_.layerId=d(s.layer),fe(_,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var A=document.createElement("span");l.appendChild(A),A.appendChild(_),A.appendChild(w);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,m,_=[],w=[];this._handlingClick=!0;for(var A=s.length-1;A>=0;A--)l=s[A],m=this._getLayer(l.layerId).layer,l.checked?_.push(m):l.checked||w.push(m);for(A=0;A<w.length;A++)this._map.hasLayer(w[A])&&this._map.removeLayer(w[A]);for(A=0;A<_.length;A++)this._map.hasLayer(_[A])||this._map.addLayer(_[A]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,m,_=this._map.getZoom(),w=s.length-1;w>=0;w--)l=s[w],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&_<m.options.minZoom||m.options.maxZoom!==void 0&&_>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,fe(s,"click",et),this.expand();var l=this;setTimeout(function(){He(s,"click",et),l._preventClick=!1})}}),Qd=function(s,l,m){return new Ea(s,l,m)},vi=jt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",m=Re("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,m,_,w){var A=Re("a",m,_);return A.innerHTML=s,A.href="#",A.title=l,A.setAttribute("role","button"),A.setAttribute("aria-label",l),Wi(A),fe(A,"click",ln),fe(A,"click",w,this),fe(A,"click",this._refocusOnMap,this),A},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ye(this._zoomInButton,l),Ye(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vi,this.addControl(this.zoomControl))});var mu=function(s){return new vi(s)},Do=jt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",m=Re("div",l),_=this.options;return this._addScales(_,l+"-line",m),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,m){s.metric&&(this._mScale=Re("div",l,m)),s.imperial&&(this._iScale=Re("div",l,m))},_update:function(){var s=this._map,l=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/s)},_updateImperial:function(s){var l=s*3.2808399,m,_,w;l>5280?(m=l/5280,_=this._getRoundNum(m),this._updateScale(this._iScale,_+" mi",_/m)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(s,l,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),m=s/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),Lo=function(s){return new Do(s)},gu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ji=jt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?gu+" ":"")+"Leaflet</a>"},initialize:function(s){M(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),Wi(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new Ji().addTo(this)});var jd=function(s){return new Ji(s)};jt.Layers=Ea,jt.Zoom=vi,jt.Scale=Do,jt.Attribution=Ji,qt.layers=Qd,qt.zoom=mu,qt.scale=Lo,qt.attribution=jd;var un=ae.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});un.addTo=function(s,l){return s.addHandler(l,this),this};var Br={Events:Me},wa=le.touch?"touchstart mousedown":"mousedown",Un=xe.extend({options:{clickTolerance:3},initialize:function(s,l,m,_){M(this,_),this._element=s,this._dragStartTarget=l||s,this._preventOutline=m},enable:function(){this._enabled||(fe(this._dragStartTarget,wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Un._dragging===this&&this.finishDrag(!0),He(this._dragStartTarget,wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ua(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Un._dragging===this&&this.finishDrag();return}if(!(Un._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Un._dragging=this,this._preventOutline&&yi(this._element),ha(),Vn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,m=ma(this._element);this._startPoint=new H(l.clientX,l.clientY),this._startPos=yn(this._element),this._parentScale=No(m);var _=s.type==="mousedown";fe(document,_?"mousemove":"touchmove",this._onMove,this),fe(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,m=new H(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,et(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),me(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ye(document.body,"leaflet-dragging"),this._lastTarget&&(Ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He(document,"mousemove touchmove",this._onMove,this),He(document,"mouseup touchend touchcancel",this._onUp,this),fa(),Fn();var l=this._moved&&this._moving;this._moving=!1,Un._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Vo(s,l,m){var _,w=[1,4,2,8],A,z,$,J,Y,re,pe,Ie;for(A=0,re=s.length;A<re;A++)s[A]._code=jn(s[A],l);for($=0;$<4;$++){for(pe=w[$],_=[],A=0,re=s.length,z=re-1;A<re;z=A++)J=s[A],Y=s[z],J._code&pe?Y._code&pe||(Ie=wt(Y,J,pe,l,m),Ie._code=jn(Ie,l),_.push(Ie)):(Y._code&pe&&(Ie=wt(Y,J,pe,l,m),Ie._code=jn(Ie,l),_.push(Ie)),_.push(J));s=_}return s}function Fo(s,l){var m,_,w,A,z,$,J,Y,re;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var pe=ve([0,0]),Ie=Oe(s),$t=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());$t<1700&&(pe=Uo(s));var xt=s.length,xn=[];for(m=0;m<xt;m++){var Xt=ve(s[m]);xn.push(l.project(ve([Xt.lat-pe.lat,Xt.lng-pe.lng])))}for($=J=Y=0,m=0,_=xt-1;m<xt;_=m++)w=xn[m],A=xn[_],z=w.y*A.x-A.y*w.x,J+=(w.x+A.x)*z,Y+=(w.y+A.y)*z,$+=z*3;$===0?re=xn[0]:re=[J/$,Y/$];var $o=l.unproject(X(re));return ve([$o.lat+pe.lat,$o.lng+pe.lng])}function Uo(s){for(var l=0,m=0,_=0,w=0;w<s.length;w++){var A=ve(s[w]);l+=A.lat,m+=A.lng,_++}return ve([l/_,m/_])}var Oo={__proto__:null,clipPolygon:Vo,polygonCenter:Fo,centroid:Uo};function xa(s,l){if(!l||!s.length)return s.slice();var m=l*l;return s=yu(s,m),s=_u(s,m),s}function Sa(s,l,m){return Math.sqrt(wn(s,l,m,!0))}function Ti(s,l,m){return wn(s,l,m)}function _u(s,l){var m=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,w=new _(m);w[0]=w[m-1]=1,Bo(s,w,l,0,m-1);var A,z=[];for(A=0;A<m;A++)w[A]&&z.push(s[A]);return z}function Bo(s,l,m,_,w){var A=0,z,$,J;for($=_+1;$<=w-1;$++)J=wn(s[$],s[_],s[w],!0),J>A&&(z=$,A=J);A>m&&(l[z]=1,Bo(s,l,m,_,z),Bo(s,l,m,z,w))}function yu(s,l){for(var m=[s[0]],_=1,w=0,A=s.length;_<A;_++)vu(s[_],s[w])>l&&(m.push(s[_]),w=_);return w<A-1&&m.push(s[A-1]),m}var Ia;function zr(s,l,m,_,w){var A=_?Ia:jn(s,m),z=jn(l,m),$,J,Y;for(Ia=z;;){if(!(A|z))return[s,l];if(A&z)return!1;$=A||z,J=wt(s,l,$,m,w),Y=jn(J,m),$===A?(s=J,A=Y):(l=J,z=Y)}}function wt(s,l,m,_,w){var A=l.x-s.x,z=l.y-s.y,$=_.min,J=_.max,Y,re;return m&8?(Y=s.x+A*(J.y-s.y)/z,re=J.y):m&4?(Y=s.x+A*($.y-s.y)/z,re=$.y):m&2?(Y=J.x,re=s.y+z*(J.x-s.x)/A):m&1&&(Y=$.x,re=s.y+z*($.x-s.x)/A),new H(Y,re,w)}function jn(s,l){var m=0;return s.x<l.min.x?m|=1:s.x>l.max.x&&(m|=2),s.y<l.min.y?m|=4:s.y>l.max.y&&(m|=8),m}function vu(s,l){var m=l.x-s.x,_=l.y-s.y;return m*m+_*_}function wn(s,l,m,_){var w=l.x,A=l.y,z=m.x-w,$=m.y-A,J=z*z+$*$,Y;return J>0&&(Y=((s.x-w)*z+(s.y-A)*$)/J,Y>1?(w=m.x,A=m.y):Y>0&&(w+=z*Y,A+=$*Y)),z=s.x-w,$=s.y-A,_?z*z+$*$:new H(w,A)}function h(s){return!I(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function T(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(s)}function x(s,l){var m,_,w,A,z,$,J,Y;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=ve([0,0]),pe=Oe(s),Ie=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Ie<1700&&(re=Uo(s));var $t=s.length,xt=[];for(m=0;m<$t;m++){var xn=ve(s[m]);xt.push(l.project(ve([xn.lat-re.lat,xn.lng-re.lng])))}for(m=0,_=0;m<$t-1;m++)_+=xt[m].distanceTo(xt[m+1])/2;if(_===0)Y=xt[0];else for(m=0,A=0;m<$t-1;m++)if(z=xt[m],$=xt[m+1],w=z.distanceTo($),A+=w,A>_){J=(A-_)/w,Y=[$.x-J*($.x-z.x),$.y-J*($.y-z.y)];break}var Xt=l.unproject(X(Y));return ve([Xt.lat+re.lat,Xt.lng+re.lng])}var P={__proto__:null,simplify:xa,pointToSegmentDistance:Sa,closestPointOnSegment:Ti,clipSegment:zr,_getEdgeIntersection:wt,_getBitCode:jn,_sqClosestPointOnSegment:wn,isFlat:h,_flat:T,polylineCenter:x},q={project:function(s){return new H(s.lng,s.lat)},unproject:function(s){return new Se(s.y,s.x)},bounds:new he([-180,-90],[180,90])},Z={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,m=this.R,_=s.lat*l,w=this.R_MINOR/m,A=Math.sqrt(1-w*w),z=A*Math.sin(_),$=Math.tan(Math.PI/4-_/2)/Math.pow((1-z)/(1+z),A/2);return _=-m*Math.log(Math.max($,1e-10)),new H(s.lng*l*m,_)},unproject:function(s){for(var l=180/Math.PI,m=this.R,_=this.R_MINOR/m,w=Math.sqrt(1-_*_),A=Math.exp(-s.y/m),z=Math.PI/2-2*Math.atan(A),$=0,J=.1,Y;$<15&&Math.abs(J)>1e-7;$++)Y=w*Math.sin(z),Y=Math.pow((1-Y)/(1+Y),w/2),J=Math.PI/2-2*Math.atan(A*Y)-z,z+=J;return new Se(z*l,s.x*l/m)}},te={__proto__:null,LonLat:q,Mercator:Z,SphericalMercator:Bi},Be=r({},Yn,{code:"EPSG:3395",projection:Z,transformation:function(){var s=.5/(Math.PI*Z.R);return hi(s,.5,-s,.5)}()}),ht=r({},Yn,{code:"EPSG:4326",projection:q,transformation:hi(1/180,1,-1/180,.5)}),be=r({},gt,{projection:q,transformation:hi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var m=l.lng-s.lng,_=l.lat-s.lat;return Math.sqrt(m*m+_*_)},infinite:!0});gt.Earth=Yn,gt.EPSG3395=Be,gt.EPSG3857=Pr,gt.EPSG900913=Js,gt.EPSG4326=ht,gt.Simple=be;var qe=xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},_addLayers:function(s){s=s?I(s)?s:[s]:[];for(var l=0,m=s.length;l<m;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,m=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var w=this._zoomBoundLayers[_].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var tt=qe.extend({initialize:function(s,l){M(this,l),this._layers={};var m,_;if(s)for(m=0,_=s.length;m<_;m++)this.addLayer(s[m])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),m,_;for(m in this._layers)_=this._layers[m],_[s]&&_[s].apply(_,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Zi=function(s,l){return new tt(s,l)},lt=tt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),tt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),tt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var l in this._layers){var m=this._layers[l];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),zo=function(s,l){return new lt(s,l)},Xn=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){M(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,l){var m=this.options,_=m[l+"Size"];typeof _=="number"&&(_=[_,_]);var w=X(_),A=X(l==="shadow"&&m.shadowAnchor||m.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(m.className||""),A&&(s.style.marginLeft=-A.x+"px",s.style.marginTop=-A.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function oS(s){return new Xn(s)}var Ca=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ca.imagePath!="string"&&(Ca.imagePath=this._detectIconPath()),(this.options.imagePath||Ca.imagePath)+Xn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(m,_,w){var A=_.exec(m);return A&&A[w]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Re("div","leaflet-default-icon-path",document.body),l=Hi(s,"background-image")||Hi(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),tg=un.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Un(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,m=l._map,_=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,A=yn(l._icon),z=m.getPixelBounds(),$=m.getPixelOrigin(),J=ye(z.min._subtract($).add(w),z.max._subtract($).subtract(w));if(!J.contains(A)){var Y=X((Math.max(J.max.x,A.x)-J.max.x)/(z.max.x-J.max.x)-(Math.min(J.min.x,A.x)-J.min.x)/(z.min.x-J.min.x),(Math.max(J.max.y,A.y)-J.max.y)/(z.max.y-J.max.y)-(Math.min(J.min.y,A.y)-J.min.y)/(z.min.y-J.min.y)).multiplyBy(_);m.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),me(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=B(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,m=l._shadow,_=yn(l._icon),w=l._map.layerPointToLatLng(_);m&&me(m,_),l._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Tu=qe.extend({options:{icon:new Ca,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){M(this,l),this._latlng=ve(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),_=!1;m!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),we(m,l),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fe(m,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),A=!1;w!==this._shadow&&(this._removeShadow(),A=!0),w&&(we(w,l),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&A&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&me(this._icon,s),this._shadow&&me(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,m=l.iconSize?X(l.iconSize):X(0,0),_=l.iconAnchor?X(l.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:m.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sS(s,l){return new Tu(s,l)}var Yi=qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return M(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Eu=Yi.extend({options:{fill:!0,radius:10},initialize:function(s,l){M(this,l),this._latlng=ve(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Yi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,m=this._clickTolerance(),_=[s+m,l+m];this._pxBounds=new he(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function aS(s,l){return new Eu(s,l)}var Xd=Eu.extend({initialize:function(s,l,m){if(typeof l=="number"&&(l=r({},m,{radius:l})),M(this,l),this._latlng=ve(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Yi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,m=this._map,_=m.options.crs;if(_.distance===Yn.distance){var w=Math.PI/180,A=this._mRadius/Yn.R/w,z=m.project([l+A,s]),$=m.project([l-A,s]),J=z.add($).divideBy(2),Y=m.unproject(J).lat,re=Math.acos((Math.cos(A*w)-Math.sin(l*w)*Math.sin(Y*w))/(Math.cos(l*w)*Math.cos(Y*w)))/w;(isNaN(re)||re===0)&&(re=A/Math.cos(Math.PI/180*l)),this._point=J.subtract(m.getPixelOrigin()),this._radius=isNaN(re)?0:J.x-m.project([Y,s-re]).x,this._radiusY=J.y-z.y}else{var pe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(pe).x}this._updateBounds()}});function lS(s,l,m){return new Xd(s,l,m)}var Ei=Yi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){M(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,m=null,_=wn,w,A,z=0,$=this._parts.length;z<$;z++)for(var J=this._parts[z],Y=1,re=J.length;Y<re;Y++){w=J[Y-1],A=J[Y];var pe=_(s,w,A,!0);pe<l&&(l=pe,m=_(s,w,A))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ve(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],m=h(s),_=0,w=s.length;_<w;_++)m?(l[_]=ve(s[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(s[_]);return l},_project:function(){var s=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new H(s,s);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,m){var _=s[0]instanceof Se,w=s.length,A,z;if(_){for(z=[],A=0;A<w;A++)z[A]=this._map.latLngToLayerPoint(s[A]),m.extend(z[A]);l.push(z)}else for(A=0;A<w;A++)this._projectLatlngs(s[A],l,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,_,w,A,z,$,J;for(m=0,w=0,A=this._rings.length;m<A;m++)for(J=this._rings[m],_=0,z=J.length;_<z-1;_++)$=zr(J[_],J[_+1],s,_,!0),$&&(l[w]=l[w]||[],l[w].push($[0]),($[1]!==J[_+1]||_===z-2)&&(l[w].push($[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,m=0,_=s.length;m<_;m++)s[m]=xa(s[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var m,_,w,A,z,$,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,A=this._parts.length;m<A;m++)for($=this._parts[m],_=0,z=$.length,w=z-1;_<z;w=_++)if(!(!l&&_===0)&&Sa(s,$[w],$[_])<=J)return!0;return!1}});function uS(s,l){return new Ei(s,l)}Ei._flat=T;var Go=Ei.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Ei.prototype._convertLatLngs.call(this,s),m=l.length;return m>=2&&l[0]instanceof Se&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(s){Ei.prototype._setLatLngs.call(this,s),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,m=new H(l,l);if(s=new he(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,w=this._rings.length,A;_<w;_++)A=Vo(this._rings[_],s,!0),A.length&&this._parts.push(A)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,m,_,w,A,z,$,J,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(A=0,J=this._parts.length;A<J;A++)for(m=this._parts[A],z=0,Y=m.length,$=Y-1;z<Y;$=z++)_=m[z],w=m[$],_.y>s.y!=w.y>s.y&&s.x<(w.x-_.x)*(s.y-_.y)/(w.y-_.y)+_.x&&(l=!l);return l||Ei.prototype._containsPoint.call(this,s,!0)}});function cS(s,l){return new Go(s,l)}var wi=lt.extend({initialize:function(s,l){M(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=I(s)?s:s.features,m,_,w;if(l){for(m=0,_=l.length;m<_;m++)w=l[m],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var A=this.options;if(A.filter&&!A.filter(s))return this;var z=wu(s,A);return z?(z.feature=Iu(s),z.defaultOptions=z.options,this.resetStyle(z),A.onEachFeature&&A.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function wu(s,l){var m=s.type==="Feature"?s.geometry:s,_=m?m.coordinates:null,w=[],A=l&&l.pointToLayer,z=l&&l.coordsToLatLng||eh,$,J,Y,re;if(!_&&!m)return null;switch(m.type){case"Point":return $=z(_),ng(A,s,$,l);case"MultiPoint":for(Y=0,re=_.length;Y<re;Y++)$=z(_[Y]),w.push(ng(A,s,$,l));return new lt(w);case"LineString":case"MultiLineString":return J=xu(_,m.type==="LineString"?0:1,z),new Ei(J,l);case"Polygon":case"MultiPolygon":return J=xu(_,m.type==="Polygon"?1:2,z),new Go(J,l);case"GeometryCollection":for(Y=0,re=m.geometries.length;Y<re;Y++){var pe=wu({geometry:m.geometries[Y],type:"Feature",properties:s.properties},l);pe&&w.push(pe)}return new lt(w);case"FeatureCollection":for(Y=0,re=m.features.length;Y<re;Y++){var Ie=wu(m.features[Y],l);Ie&&w.push(Ie)}return new lt(w);default:throw new Error("Invalid GeoJSON object.")}}function ng(s,l,m,_){return s?s(l,m):new Tu(m,_&&_.markersInheritOptions&&_)}function eh(s){return new Se(s[1],s[0],s[2])}function xu(s,l,m){for(var _=[],w=0,A=s.length,z;w<A;w++)z=l?xu(s[w],l-1,m):(m||eh)(s[w]),_.push(z);return _}function th(s,l){return s=ve(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Su(s,l,m,_){for(var w=[],A=0,z=s.length;A<z;A++)w.push(l?Su(s[A],h(s[A])?0:l-1,m,_):th(s[A],_));return!l&&m&&w.length>0&&w.push(w[0].slice()),w}function Ho(s,l){return s.feature?r({},s.feature,{geometry:l}):Iu(l)}function Iu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var nh={toGeoJSON:function(s){return Ho(this,{type:"Point",coordinates:th(this.getLatLng(),s)})}};Tu.include(nh),Xd.include(nh),Eu.include(nh),Ei.include({toGeoJSON:function(s){var l=!h(this._latlngs),m=Su(this._latlngs,l?1:0,!1,s);return Ho(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Go.include({toGeoJSON:function(s){var l=!h(this._latlngs),m=l&&!h(this._latlngs[0]),_=Su(this._latlngs,m?2:l?1:0,!0,s);return l||(_=[_]),Ho(this,{type:(m?"Multi":"")+"Polygon",coordinates:_})}}),tt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(s).geometry.coordinates)}),Ho(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var m=l==="GeometryCollection",_=[];return this.eachLayer(function(w){if(w.toGeoJSON){var A=w.toGeoJSON(s);if(m)_.push(A.geometry);else{var z=Iu(A);z.type==="FeatureCollection"?_.push.apply(_,z.features):_.push(z)}}}),m?Ho(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function ig(s,l){return new wi(s,l)}var dS=ig,Cu=qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,m){this._url=s,this._bounds=Oe(l),M(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&gi(this._image),this},bringToBack:function(){return this._map&&qi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Oe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Re("img");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Qn(this._image,m,l)},_reset:function(){var s=this._image,l=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();me(s,l.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){st(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),hS=function(s,l,m){return new Cu(s,l,m)},rg=Cu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Re("video");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var m=l.getElementsByTagName("source"),_=[],w=0;w<m.length;w++)_.push(m[w].src);this._url=m.length>0?_:[l.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var A=0;A<this._url.length;A++){var z=Re("source");z.src=this._url[A],l.appendChild(z)}}});function fS(s,l,m){return new rg(s,l,m)}var og=Cu.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function pS(s,l,m){return new og(s,l,m)}var ei=qe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Se||I(s))?(this._latlng=ve(s),M(this,l)):(M(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&st(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&st(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(st(this._container,0),this._removeTimeout=setTimeout(a($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(Ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ve(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gi(this._container),this},bringToBack:function(){return this._map&&qi(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof lt){l=null;var m=this._source._layers;for(var _ in m)if(m[_]._map){l=m[_];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=X(this.options.offset),m=this._getAnchor();this._zoomAnimated?me(this._container,s.add(m)):l=l.add(s).add(m);var _=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(s,l,m,_){var w=l;return w instanceof s||(w=new s(_).setContent(l)),m&&w.setLatLng(m),w}}),qe.include({_initOverlay:function(s,l,m,_){var w=m;return w instanceof s?(M(w,_),w._source=this):(w=l&&!_?l:new s(_,this),w.setContent(m)),w}});var Au=ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ei.prototype.openOn.call(this,s)},onAdd:function(s){ei.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yi||this._source.on("preclick",En))},onRemove:function(s){ei.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yi||this._source.off("preclick",En))},getEvents:function(){var s=ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Re("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Re("div",s+"-content-wrapper",l);if(this._contentNode=Re("div",s+"-content",m),Wi(l),Ki(this._contentNode),fe(l,"contextmenu",En),this._tipContainer=Re("div",s+"-tip-container",l),this._tip=Re("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Re("a",s+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',fe(_,"click",function(w){et(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var _=s.offsetHeight,w=this.options.maxHeight,A="leaflet-popup-scrolled";w&&_>w?(l.height=w+"px",we(s,A)):Ye(s,A),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();me(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Hi(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,_=this._containerWidth,w=new H(this._containerLeft,-m-this._containerBottom);w._add(yn(this._container));var A=s.layerPointToContainerPoint(w),z=X(this.options.autoPanPadding),$=X(this.options.autoPanPaddingTopLeft||z),J=X(this.options.autoPanPaddingBottomRight||z),Y=s.getSize(),re=0,pe=0;A.x+_+J.x>Y.x&&(re=A.x+_-Y.x+J.x),A.x-re-$.x<0&&(re=A.x-$.x),A.y+m+J.y>Y.y&&(pe=A.y+m-Y.y+J.y),A.y-pe-$.y<0&&(pe=A.y-$.y),(re||pe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,pe]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),mS=function(s,l){return new Au(s,l)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(s,l,m){return this._initOverlay(Au,s,l,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),qe.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Au,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ln(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Yi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Pu=ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ei.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ei.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ei.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,m,_=this._map,w=this._container,A=_.latLngToContainerPoint(_.getCenter()),z=_.layerPointToContainerPoint(s),$=this.options.direction,J=w.offsetWidth,Y=w.offsetHeight,re=X(this.options.offset),pe=this._getAnchor();$==="top"?(l=J/2,m=Y):$==="bottom"?(l=J/2,m=0):$==="center"?(l=J/2,m=Y/2):$==="right"?(l=0,m=Y/2):$==="left"?(l=J,m=Y/2):z.x<A.x?($="right",l=0,m=Y/2):($="left",l=J+(re.x+pe.x)*2,m=Y/2),s=s.subtract(X(l,m,!0)).add(re).add(pe),Ye(w,"leaflet-tooltip-right"),Ye(w,"leaflet-tooltip-left"),Ye(w,"leaflet-tooltip-top"),Ye(w,"leaflet-tooltip-bottom"),we(w,"leaflet-tooltip-"+$),me(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&st(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gS=function(s,l){return new Pu(s,l)};Ce.include({openTooltip:function(s,l,m){return this._initOverlay(Pu,s,l,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),qe.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pu,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(fe(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),fe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,m,_;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var sg=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Or(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var _=X(m.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function _S(s){return new sg(s)}Xn.Default=Ca;var Aa=qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){M(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),$e(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof H?s:new H(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,m=-s(-1/0,1/0),_=0,w=l.length,A;_<w;_++)A=l[_].style.zIndex,l[_]!==this._container&&A&&(m=s(m,+A));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){st(this._container,this.options.opacity);var s=+new Date,l=!1,m=!1;for(var _ in this._tiles){var w=this._tiles[_];if(!(!w.current||!w.loaded)){var A=Math.min(1,(s-w.loaded)/200);st(w.el,A),A<1?l=!0:(w.active?m=!0:this._onOpaqueTile(w),w.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(F(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=l-Math.abs(s-m),this._onUpdateLevel(m)):($e(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var _=this._levels[s],w=this._map;return _||(_=this._levels[s]={},_.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,w.getCenter(),w.getZoom()),y(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)$e(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,m,_){var w=Math.floor(s/2),A=Math.floor(l/2),z=m-1,$=new H(+w,+A);$.z=+z;var J=this._tileCoordsToKey($),Y=this._tiles[J];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),z>_?this._retainParent(w,A,z,_):!1)},_retainChildren:function(s,l,m,_){for(var w=2*s;w<2*s+2;w++)for(var A=2*l;A<2*l+2;A++){var z=new H(w,A);z.z=m+1;var $=this._tileCoordsToKey(z),J=this._tiles[$];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);m+1<_&&this._retainChildren(w,A,m+1,_)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,m,_){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var A=this.options.updateWhenZooming&&w!==this._tileZoom;(!_||A)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,l)},_setZoomTransform:function(s,l,m){var _=this._map.getZoomScale(m,s.zoom),w=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,m)).round();le.any3d?Qn(s.el,w,_):me(s.el,w)},_resetGrid:function(){var s=this._map,l=s.options.crs,m=this._tileSize=this.getTileSize(),_=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],_).x/m.x),Math.ceil(s.project([0,l.wrapLng[1]],_).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],_).y/m.x),Math.ceil(s.project([l.wrapLat[1],0],_).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(m,this._tileZoom),w=l.project(s,this._tileZoom).floor(),A=l.getSize().divideBy(_*2);return new he(w.subtract(A),w.add(A))},_update:function(s){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(_),A=w.getCenter(),z=[],$=this.options.keepBuffer,J=new he(w.getBottomLeft().subtract([$,-$]),w.getTopRight().add([$,-$]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var re=this._tiles[Y].coords;(re.z!==this._tileZoom||!J.contains(new H(re.x,re.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var pe=w.min.y;pe<=w.max.y;pe++)for(var Ie=w.min.x;Ie<=w.max.x;Ie++){var $t=new H(Ie,pe);if($t.z=this._tileZoom,!!this._isValidTile($t)){var xt=this._tiles[this._tileCoordsToKey($t)];xt?xt.current=!0:z.push($t)}}if(z.sort(function(Xt,$o){return Xt.distanceTo(A)-$o.distanceTo(A)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xn=document.createDocumentFragment();for(Ie=0;Ie<z.length;Ie++)this._addTile(z[Ie],xn);this._level.el.appendChild(xn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!l.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return Oe(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,m=this.getTileSize(),_=s.scaleBy(m),w=_.add(m),A=l.unproject(_,s.z),z=l.unproject(w,s.z);return[A,z]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),m=new Pe(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),m=new H(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(s){var l=this._tiles[s];l&&($e(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,le.ielt9&&this.options.opacity<1&&st(s,this.options.opacity)},_addTile:function(s,l){var m=this._getTilePos(s),_=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&B(a(this._tileReady,this,s,null,w)),me(w,m),this._tiles[_]={el:w,coords:s,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:s});var _=this._tileCoordsToKey(s);m=this._tiles[_],m&&(m.loaded=+new Date,this._map._fadeAnimated?(st(m.el,0),F(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(we(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new H(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new he(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function yS(s){return new Aa(s)}var qo=Aa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=M(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var m=document.createElement("img");return fe(m,"load",a(this._tileOnLoad,this,l,m)),fe(m,"error",a(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=m),l["-y"]=m}return N(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,m){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),s(m,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,_=this.options.zoomOffset;return m&&(s=l-s),s+_},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=W;var m=this._tiles[s].coords;$e(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",W),Aa.prototype._removeTile.call(this,s)},_tileReady:function(s,l,m){if(!(!this._map||m&&m.getAttribute("src")===W))return Aa.prototype._tileReady.call(this,s,l,m)}});function ag(s,l){return new qo(s,l)}var lg=qo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var m=r({},this.defaultWmsParams);for(var _ in l)_ in this.options||(m[_]=l[_]);l=M(this,l);var w=l.detectRetina&&le.retina?2:1,A=this.getTileSize();m.width=A.x*w,m.height=A.y*w,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,qo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),m=this._crs,_=ye(m.project(l[0]),m.project(l[1])),w=_.min,A=_.max,z=(this._wmsVersion>=1.3&&this._crs===ht?[w.y,w.x,A.y,A.x]:[w.x,w.y,A.x,A.y]).join(","),$=qo.prototype.getTileUrl.call(this,s);return $+O(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function vS(s,l){return new lg(s,l)}qo.WMS=lg,ag.wms=vS;var xi=qe.extend({options:{padding:.1},initialize:function(s){M(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var m=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),A=_.multiplyBy(-m).add(w).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Qn(this._container,A,m):me(this._container,A)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new he(m,m.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ug=xi.extend({options:{tolerance:0},getEvents:function(){var s=xi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");fe(s,"mousemove",this._onMouseMove,this),fe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),fe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,$e(this._container),He(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var s=this._bounds,l=this._container,m=s.getSize(),_=le.retina?2:1;me(l,s.min),l.width=_*m.x,l.height=_*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){xi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,m=l.next,_=l.prev;m?m.prev=_:this._drawLast=_,_?_.next=m:this._drawFirst=m,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),m=[],_,w;for(w=0;w<l.length;w++){if(_=Number(l[w]),isNaN(_))return;m.push(_)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var m,_,w,A,z=s._parts,$=z.length,J=this._ctx;if($){for(J.beginPath(),m=0;m<$;m++){for(_=0,w=z[m].length;_<w;_++)A=z[m][_],J[_?"lineTo":"moveTo"](A.x,A.y);l&&J.closePath()}this._fillStroke(J,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,m=this._ctx,_=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||_)/_;w!==1&&(m.save(),m.scale(1,w)),m.beginPath(),m.arc(l.x,l.y/w,_,0,Math.PI*2,!1),w!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,l){var m=l.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),m,_,w=this._drawFirst;w;w=w.next)m=w.layer,m.options.interactive&&m._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(_=m);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ye(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var m,_,w=this._drawFirst;w;w=w.next)m=w.layer,m.options.interactive&&m._containsPoint(l)&&(_=m);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(we(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,m){this._map._fireDOMEvent(l,m||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(m)m.prev=_;else return;_?_.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(_)_.next=m;else return;m?m.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function cg(s){return le.canvas?new ug(s):null}var Pa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),TS={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Pa("shape");we(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Pa("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;$e(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,m=s._fill,_=s.options,w=s._container;w.stroked=!!_.stroke,w.filled=!!_.fill,_.stroke?(l||(l=s._stroke=Pa("stroke")),w.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=I(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(w.removeChild(l),s._stroke=null),_.fill?(m||(m=s._fill=Pa("fill")),w.appendChild(m),m.color=_.fillColor||_.color,m.opacity=_.fillOpacity):m&&(w.removeChild(m),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),m=Math.round(s._radius),_=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+_+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){gi(s._container)},_bringToBack:function(s){qi(s._container)}},Ru=le.vml?Pa:mo,Ra=xi.extend({_initContainer:function(){this._container=Ru("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ru("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),He(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),me(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Ru("path");s.options.className&&we(l,s.options.className),s.options.interactive&&we(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){$e(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,m=s.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Zs(s._parts,l))},_updateCircle:function(s){var l=s._point,m=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||m,w="a"+m+","+_+" 0 1,0 ",A=s._empty()?"M0 0":"M"+(l.x-m)+","+l.y+w+m*2+",0 "+w+-m*2+",0 ";this._setPath(s,A)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){gi(s._path)},_bringToBack:function(s){qi(s._path)}});le.vml&&Ra.include(TS);function dg(s){return le.svg||le.vml?new Ra(s):null}Ce.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&cg(s)||dg(s)}});var hg=Go.extend({initialize:function(s,l){Go.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Oe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function ES(s,l){return new hg(s,l)}Ra.create=Ru,Ra.pointsToPath=Zs,wi.geometryToLayer=wu,wi.coordsToLatLng=eh,wi.coordsToLatLngs=xu,wi.latLngToCoords=th,wi.latLngsToCoords=Su,wi.getFeature=Ho,wi.asFeature=Iu,Ce.mergeOptions({boxZoom:!0});var fg=un.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vn(),ha(),this._startPoint=this._map.mouseEventToContainerPoint(s),fe(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new he(this._point,this._startPoint),m=l.getSize();me(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&($e(this._box),Ye(this._container,"leaflet-crosshair")),Fn(),fa(),He(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",fg),Ce.mergeOptions({doubleClickZoom:!0});var pg=un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,m=l.getZoom(),_=l.options.zoomDelta,w=s.originalEvent.shiftKey?m-_:m+_;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(s.containerPoint,w)}});Ce.addInitHook("addHandler","doubleClickZoom",pg),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mg=un.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Un(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ye(this._map._container,"leaflet-grab"),Ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Oe(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),m=this._initialWorldOffset,_=this._draggable._newPos.x,w=(_-l+m)%s+l-m,A=(_+l+m)%s-l-m,z=Math.abs(w+m)<Math.abs(A+m)?w:A;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var l=this._map,m=l.options,_=!m.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),_)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),A=(this._lastTime-this._times[0])/1e3,z=m.easeLinearity,$=w.multiplyBy(z/A),J=$.distanceTo([0,0]),Y=Math.min(m.inertiaMaxSpeed,J),re=$.multiplyBy(Y/J),pe=Y/(m.inertiaDeceleration*z),Ie=re.multiplyBy(-pe/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),B(function(){l.panBy(Ie,{duration:pe,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",mg),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gg=un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),fe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),He(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,m=s.scrollTop||l.scrollTop,_=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},m=this.keyCodes,_,w;for(_=0,w=m.left.length;_<w;_++)l[m.left[_]]=[-1*s,0];for(_=0,w=m.right.length;_<w;_++)l[m.right[_]]=[s,0];for(_=0,w=m.down.length;_<w;_++)l[m.down[_]]=[0,s];for(_=0,w=m.up.length;_<w;_++)l[m.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},m=this.keyCodes,_,w;for(_=0,w=m.zoomIn.length;_<w;_++)l[m.zoomIn[_]]=s;for(_=0,w=m.zoomOut.length;_<w;_++)l[m.zoomOut[_]]=-s},_addHooks:function(){fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){He(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,m=this._map,_;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(_=this._panKeys[l],s.shiftKey&&(_=X(_).multiplyBy(3)),m.options.maxBounds&&(_=m._limitOffset(X(_),m.options.maxBounds)),m.options.worldCopyJump){var w=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(_)));m.panTo(w)}else m.panBy(_)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;ln(s)}}});Ce.addInitHook("addHandler","keyboard",gg),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _g=un.extend({addHooks:function(){fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=fu(s),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),_),ln(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,A=m?Math.ceil(w/m)*m:w,z=s._limitZoom(l+(this._delta>0?A:-A))-l;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+z):s.setZoomAround(this._lastMousePos,l+z))}});Ce.addInitHook("addHandler","scrollWheelZoom",_g);var wS=600;Ce.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var yg=un.extend({addHooks:function(){fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new H(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(fe(document,"touchend",et),fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),wS),fe(document,"touchend touchcancel contextmenu",this._cancel,this),fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){He(document,"touchend",et),He(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new H(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Ce.addInitHook("addHandler","tapHold",yg),Ce.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var vg=un.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ye(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(_)._divideBy(2))),this._startDist=m.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),fe(document,"touchmove",this._onTouchMove,this),fe(document,"touchend touchcancel",this._onTouchEnd,this),et(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]),w=m.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var A=m._add(_)._divideBy(2)._subtract(this._centerPoint);if(w===1&&A.x===0&&A.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(A),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var z=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(z,this,!0),et(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",vg),Ce.BoxZoom=fg,Ce.DoubleClickZoom=pg,Ce.Drag=mg,Ce.Keyboard=gg,Ce.ScrollWheelZoom=_g,Ce.TapHold=yg,Ce.TouchZoom=vg,n.Bounds=he,n.Browser=le,n.CRS=gt,n.Canvas=ug,n.Circle=Xd,n.CircleMarker=Eu,n.Class=ae,n.Control=jt,n.DivIcon=sg,n.DivOverlay=ei,n.DomEvent=pu,n.DomUtil=du,n.Draggable=Un,n.Evented=xe,n.FeatureGroup=lt,n.GeoJSON=wi,n.GridLayer=Aa,n.Handler=un,n.Icon=Xn,n.ImageOverlay=Cu,n.LatLng=Se,n.LatLngBounds=Pe,n.Layer=qe,n.LayerGroup=tt,n.LineUtil=P,n.Map=Ce,n.Marker=Tu,n.Mixin=Br,n.Path=Yi,n.Point=H,n.PolyUtil=Oo,n.Polygon=Go,n.Polyline=Ei,n.Popup=Au,n.PosAnimation=Ta,n.Projection=te,n.Rectangle=hg,n.Renderer=xi,n.SVG=Ra,n.SVGOverlay=og,n.TileLayer=qo,n.Tooltip=Pu,n.Transformation=zi,n.Util=D,n.VideoOverlay=rg,n.bind=a,n.bounds=ye,n.canvas=cg,n.circle=lS,n.circleMarker=aS,n.control=qt,n.divIcon=_S,n.extend=r,n.featureGroup=zo,n.geoJSON=ig,n.geoJson=dS,n.gridLayer=yS,n.icon=oS,n.imageOverlay=hS,n.latLng=ve,n.latLngBounds=Oe,n.layerGroup=Zi,n.map=bo,n.marker=sS,n.point=X,n.polygon=cS,n.polyline=uS,n.popup=mS,n.rectangle=ES,n.setOptions=M,n.stamp=d,n.svg=dg,n.svgOverlay=pS,n.tileLayer=ag,n.tooltip=gS,n.transformation=hi,n.version=i,n.videoOverlay=fS;var xS=window.L;n.noConflict=function(){return window.L=xS,this},window.L=n})})(_p,_p.exports);var kF=_p.exports;const ii=l0(kF),NF=({initialLat:t,initialLng:e,onLocationSelect:n,onAddressFound:i})=>{const r=ce.useRef(null),o=ce.useRef(null),a=ce.useRef(null),[u,d]=ce.useState(!1),f=38.4237,g=27.1428;ce.useEffect(()=>{if(!r.current)return;if(o.current){o.current.invalidateSize();return}const M=ii.map(r.current).setView([t||f,e||g],t?16:12);return ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(M),t&&e&&S(t,e,M),M.on("click",O=>{v(O.latlng.lat,O.latlng.lng,M)}),o.current=M,()=>{o.current&&(o.current.remove(),o.current=null)}},[]),ce.useEffect(()=>{var M;if(o.current&&t&&e){const O=(M=a.current)==null?void 0:M.getLatLng();(!O||O.lat!==t||O.lng!==e)&&(S(t,e,o.current),o.current.setView([t,e],16))}},[t,e]);const y=async(M,O)=>{if(i){d(!0);try{const R=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${O}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"tr-TR"}});if(!R.ok)throw new Error("Adres alnamad");const N=await R.json(),I=N.address;if(I){const G=I.town||I.county||I.city_district||"",W=I.suburb||I.neighbourhood||I.quarter||"",K=I.road||"",b=I.province||I.city||"zmir";i({district:G,neighborhood:W,street:K,city:b,fullAddress:N.display_name})}}catch(R){console.error("Adres zmleme hatas:",R)}finally{d(!1)}}},v=(M,O,R)=>{S(M,O,R),n(M,O),y(M,O)},S=(M,O,R)=>{a.current&&a.current.remove();const N=ii.divIcon({className:"custom-div-icon",html:`<div style="background-color: #2563eb; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; color: white;">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
             </div>`,iconSize:[30,30],iconAnchor:[15,30]});a.current=ii.marker([M,O],{icon:N}).addTo(R)},V=()=>{if(!navigator.geolocation){alert("Taraycnz konum servisini desteklemiyor.");return}d(!0),navigator.geolocation.getCurrentPosition(M=>{const{latitude:O,longitude:R}=M.coords;o.current&&(o.current.setView([O,R],16),v(O,R,o.current)),d(!1)},()=>{alert("Konum alnamad. Ltfen izinleri kontrol edin."),d(!1)})};return E.jsxs("div",{className:"relative w-full h-full group",children:[E.jsx("div",{ref:r,className:"w-full h-full rounded-lg z-0",style:{minHeight:"300px"}}),u&&E.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-blue-100 z-[400] flex items-center gap-2 text-xs font-semibold text-blue-600 animate-in fade-in slide-in-from-top-2",children:[E.jsx(ld,{size:14,className:"animate-spin"}),"Adres zmleniyor..."]}),E.jsx("button",{type:"button",onClick:V,className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md border border-slate-200 text-slate-700 hover:text-blue-600 hover:bg-slate-50 z-[400]",title:"Mevcut Konumumu Bul",children:E.jsx(r1,{size:24})}),E.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-md text-xs font-semibold text-slate-600 shadow-sm border border-slate-200 z-[400]",children:"Konum semek iin haritaya tklayn"})]})},en={Konak:{Alsancak:["Kbrs ehitleri Cad.","Talatpaa Bulv.","1456. Sokak","Plevne Bulv."],Gztepe:["Mithatpaa Cad.","Susuzdede Park","100. Sokak","Mustafa Kemal Sahil Bulv."],Pasaport:["Cumhuriyet Bulv.","Akdeniz Cad.","1382. Sokak"],"Mimar Sinan":["air Eref Bulv.","Ziya Gkalp Bulv."],Kltr:["evket zelik Sok.","1390. Sokak"]},Karyaka:{Bostanl:["Cemal Grsel Cad.","ehitler Bulv.","2010. Sokak","Bostanl skelesi"],Maviehir:["Cahar Dudayev Bulv.","Aziz Nesin Bulv.","2040. Sokak"],ar:["Kemalpaa Cad.","Salah Birsel Sok.","1710. Sokak"],Bahelievler:["Zbeyde Hanm Cad.","1671. Sokak"]},Bornova:{zkanlar:["Mustafa Kemal Cad.","Sakarya Cad.","252. Sokak"],Kkpark:["Svari Cad.","Zafer Cad.","160. Sokak"],Kazmdirik:["Gediz Cad.","372. Sokak"]},Buca:{irinyer:["Menderes Cad.","Kouyolu Cad.","Forbes Cad."],Tnaztepe:["Dou Cad.","202. Sokak"]}},MF=["TP1","TP2","TP3","DER","YOK"],bF=["Bykehir","le","zel Mlkiyet","Kamu","Dier"],DF=({initialData:t,existingStands:e=[],onSave:n,onCancel:i})=>{var C,k,U,B;const[r,o]=ce.useState({id:"",name:"",phone:"",city:"zmir",district:"",neighborhood:"",street:"",address:"",location:void 0,capacity:0,plates:[],ukomeDecisionNo:"",ukomeDate:"",ukomeSummary:"",status:ep.ACTIVE,officeType:"TP1",responsibility:"Bykehir",notes:"",history:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[a,u]=ce.useState(!1),[d,f]=ce.useState(!1),[g,y]=ce.useState(Object.keys(en)),[v,S]=ce.useState([]),[V,M]=ce.useState([]);ce.useEffect(()=>{t?(o({...t,plates:t.plates||[]}),t.district&&en[t.district]&&(S(Object.keys(en[t.district])),t.neighborhood&&en[t.district][t.neighborhood]&&M(en[t.district][t.neighborhood]))):o(F=>({...F,id:Date.now().toString()}))},[t]);const O=F=>{const{name:D,value:ae}=F.target;o(Ke=>({...Ke,[D]:ae}))},R=F=>{const D=F.target.value;N(D)},N=F=>{o(D=>({...D,district:F,neighborhood:"",street:""})),S(F&&en[F]?Object.keys(en[F]):[]),M([])},I=F=>{const D=F.target.value;G(D,r.district)},G=(F,D)=>{o(ae=>({...ae,neighborhood:F,street:""})),D&&F&&en[D]&&en[D][F]?M(en[D][F]||[]):M([])},W=F=>{let D="",ae="",Ke=[],Me=[];if(F.district){const xe=F.district.replace(/(lesi|le)$/i,"").trim(),H=Object.keys(en).find(ne=>ne.toLocaleLowerCase("tr-TR")===xe.toLocaleLowerCase("tr-TR"));H&&(D=H,Ke=Object.keys(en[D]))}if(D&&F.neighborhood){const xe=F.neighborhood.replace(/(Mahallesi|Mah\.|Mah|Mh\.|Mh)$/i,"").trim(),H=en[D];if(H){const ne=Object.keys(H).find(X=>X.toLocaleLowerCase("tr-TR")===xe.toLocaleLowerCase("tr-TR"));ne&&(ae=ne,Me=en[D][ae]||[])}}D&&(S(Ke),M(Me),o(xe=>({...xe,district:D,neighborhood:ae,street:F.street||xe.street})))},K=async()=>{if(!r.district||!r.name){alert("Ltfen nce le ve Durak Ad giriniz.");return}u(!0);const F=await RF(r.name,r.capacity,r.district);o(D=>({...D,notes:D.notes?D.notes+`
`+F:F})),u(!1)},b=async F=>{if(F.preventDefault(),!d){f(!0);try{const D=`${r.street||""} ${r.neighborhood||""} Mah. ${r.district||""}/ZMR`;await n({...r,address:D,capacity:Number(r.capacity),updatedAt:new Date().toISOString()})}catch(D){console.error("Kaydetme hatas:",D),alert("Kayt srasnda bir hata olutu."),f(!1)}}};return E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 animate-in fade-in zoom-in duration-300",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t&&t.createdAt?"Dura Revize Et":"Yeni Taksi Dura Kayd"}),(t==null?void 0:t.ukomeDecisionNo)&&E.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[E.jsx(xr,{size:14})," lem Yaplan Karar No: ",E.jsx("strong",{children:t.ukomeDecisionNo})]})]}),E.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700",children:E.jsx(cx,{size:24})})]}),E.jsxs("form",{onSubmit:b,className:"space-y-6",children:[E.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl border border-blue-200 shadow-sm",children:[E.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[E.jsx(xr,{size:18})," GRLEN UKOME KARAR BLGLER"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar No"}),E.jsx("input",{name:"ukomeDecisionNo",value:r.ukomeDecisionNo,onChange:O,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-bold text-slate-800",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar Tarihi"}),E.jsx("input",{type:"date",name:"ukomeDate",value:r.ukomeDate,onChange:O,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar zeti"}),E.jsx("textarea",{name:"ukomeSummary",rows:2,value:r.ukomeSummary,onChange:O,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Ad"}),E.jsx("input",{required:!0,name:"name",value:r.name,onChange:O,placeholder:"rn: Alsancak Gar Taksi",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Telefonu"}),E.jsxs("div",{className:"relative",children:[E.jsx(qm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),E.jsx("input",{name:"phone",value:r.phone,onChange:O,placeholder:"0232 123 45 67",className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ara Park Kapasitesi"}),E.jsx("input",{required:!0,type:"number",name:"capacity",value:r.capacity,onChange:O,min:"0",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yazhane Tipi"}),E.jsx("select",{name:"officeType",value:r.officeType,onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:MF.map(F=>E.jsx("option",{value:F,children:F},F))})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sorumluluk / Yetki Alan"}),E.jsx("select",{name:"responsibility",value:r.responsibility,onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:bF.map(F=>E.jsx("option",{value:F,children:F},F))})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Durumu"}),E.jsx("select",{name:"status",value:r.status,onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:Object.values(ep).map(F=>E.jsx("option",{value:F,children:F},F))})]})]}),E.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[E.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[E.jsx(Ll,{size:16})," Konum Bilgileri"]}),E.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[E.jsxs("div",{className:"flex-1 space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"md:col-span-2",children:[E.jsxs("label",{className:"block text-xs font-medium text-slate-500 mb-1 flex justify-between",children:["le",r.location&&!r.district&&E.jsx("span",{className:"text-[10px] text-blue-500 animate-pulse",children:"Konumdan bekleniyor..."})]}),E.jsxs("select",{required:!0,name:"district",value:r.district,onChange:R,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[E.jsx("option",{value:"",children:"Seiniz"}),g.map(F=>E.jsx("option",{value:F,children:F},F))]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Mahalle"}),E.jsxs("select",{required:!0,name:"neighborhood",value:r.neighborhood,onChange:I,disabled:!r.district,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",children:[E.jsx("option",{value:"",children:"Seiniz"}),v.map(F=>E.jsx("option",{value:F,children:F},F))]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Sokak / Cadde"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{list:"streets-list",name:"street",value:r.street,onChange:O,disabled:!r.neighborhood,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",placeholder:V.length>0?"Seiniz veya yaznz":"Yaznz"}),E.jsx("datalist",{id:"streets-list",children:V.map(F=>E.jsx("option",{value:F},F))})]})]})]}),E.jsxs("div",{className:"bg-white border border-slate-200 p-3 rounded-lg",children:[E.jsxs("div",{className:"text-xs font-semibold text-slate-400 mb-2 flex items-center justify-between",children:[E.jsx("span",{children:"SELEN KOORDNATLAR"}),E.jsxs("span",{className:"text-[10px] text-blue-500 flex items-center gap-1",children:[E.jsx(m1,{size:10})," Otomatik Adres Aktif"]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-slate-500",children:"Enlem:"})," ",E.jsx("span",{className:"font-mono text-slate-800",children:((C=r.location)==null?void 0:C.lat.toFixed(6))||"-"})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-slate-500",children:"Boylam:"})," ",E.jsx("span",{className:"font-mono text-slate-800",children:((k=r.location)==null?void 0:k.lng.toFixed(6))||"-"})]})]}),!r.location&&E.jsx("div",{className:"text-xs text-red-500 mt-1",children:"* Haritadan konum seiniz"})]}),E.jsxs("div",{className:"mt-3 text-xs text-slate-500 italic border-t border-slate-200 pt-2",children:["nizleme: ",r.street," ",r.neighborhood," ",r.district&&r.neighborhood?"Mah.":""," ",r.district," / ZMR"]})]}),E.jsx("div",{className:"flex-1 min-h-[300px] border border-slate-300 rounded-lg overflow-hidden shadow-inner relative",children:E.jsx(NF,{initialLat:(U=r.location)==null?void 0:U.lat,initialLng:(B=r.location)==null?void 0:B.lng,onLocationSelect:(F,D)=>o(ae=>({...ae,location:{lat:F,lng:D}})),onAddressFound:W})})]})]}),E.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[E.jsxs("h3",{className:"text-sm font-semibold text-yellow-900 mb-2 flex items-center gap-2",children:[E.jsx(Jl,{size:16})," Durakta alan Plakalar",E.jsxs("span",{className:"ml-2 bg-yellow-200 text-yellow-800 text-xs px-2 py-0.5 rounded-full",children:["Toplam: ",r.plates.length]})]}),E.jsxs("div",{className:"bg-white/50 p-3 rounded-lg border border-yellow-100 mb-3 flex items-start gap-2 text-xs text-yellow-800",children:[E.jsx(ad,{size:14,className:"shrink-0 mt-0.5"}),E.jsxs("p",{children:[E.jsx("strong",{children:"Bilgilendirme:"})," Veri btnln salamak amacyla; duraklara plaka ekleme, karma veya transfer ilemleri sadece ana mendeki ",E.jsx("strong",{children:'"Plaka lemleri"'})," zerinden yaplmaktadr. Bu ekranda sadece mevcut bal plakalar grntlenir."]})]}),r.plates.length>0?E.jsx("div",{className:"flex flex-wrap gap-2",children:r.plates.map((F,D)=>E.jsx("div",{className:"flex items-center gap-2 bg-white border border-slate-200 px-3 py-1.5 rounded-md shadow-sm opacity-80",children:E.jsx("span",{className:"font-mono font-bold text-slate-800 text-sm",children:F})},D))}):E.jsx("p",{className:"text-xs text-yellow-700/60 italic",children:"Bu duraa henz plaka balanmam."})]}),E.jsxs("div",{className:"relative",children:[E.jsxs("div",{className:"flex justify-between items-end mb-1",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Notlar"}),E.jsxs("button",{type:"button",onClick:K,disabled:a,className:"text-xs flex items-center gap-1 text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50",children:[a?E.jsx(ld,{size:14,className:"animate-spin"}):E.jsx(h1,{size:14}),"AI ile Tantm Yazs"]})]}),E.jsx("textarea",{name:"notes",rows:3,value:r.notes,onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),E.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[E.jsx("button",{type:"button",onClick:i,disabled:d,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:"ptal"}),E.jsxs("button",{type:"submit",disabled:d||a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors shadow-sm disabled:opacity-70 disabled:cursor-not-allowed",children:[d?E.jsx(ld,{size:18,className:"animate-spin"}):E.jsx(d1,{size:18}),d?"Kaydediliyor...":"Kaydet"]})]})]})]})},iS=({stands:t})=>{const e=ce.useRef(null),n=ce.useRef(null),i=38.4237,r=27.1428;return ce.useEffect(()=>{if(!e.current)return;if(!n.current){const d=ii.map(e.current).setView([i,r],11);ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(d),n.current=d}const o=n.current;o.eachLayer(d=>{d instanceof ii.Marker&&o.removeLayer(d)});const a=t.filter(d=>d.location&&d.location.lat&&d.location.lng),u=ii.latLngBounds([]);a.forEach(d=>{var y;if(!d.location)return;const f=ii.divIcon({className:"custom-stand-icon",html:`<div style="
                    background-color: ${d.status==="Aktif"?"#facc15":"#ef4444"}; 
                    width: 36px; height: 36px; 
                    border-radius: 50%; 
                    border: 3px solid white; 
                    box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
                    display: flex; align-items: center; justify-content: center; 
                    color: ${d.status==="Aktif"?"#854d0e":"white"};
                    font-size: 10px; font-weight: bold;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>
                   </div>`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});ii.marker([d.location.lat,d.location.lng],{icon:f}).bindPopup(`
                <div style="font-family: 'Inter', sans-serif;">
                    <h3 style="font-weight: bold; margin-bottom: 4px; font-size: 14px;">${d.name}</h3>
                    <p style="margin: 0; color: #64748b; font-size: 12px;">${d.district} / ${d.neighborhood}</p>
                    <div style="margin-top: 8px; display: flex; gap: 8px;">
                        <span style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${((y=d.plates)==null?void 0:y.length)||0} Ara</span>
                        <span style="background: ${d.status==="Aktif"?"#f0fdf4":"#fef2f2"}; color: ${d.status==="Aktif"?"#166534":"#991b1b"}; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${d.status}</span>
                    </div>
                </div>
            `).addTo(o),u.extend([d.location.lat,d.location.lng])}),a.length>0&&o.fitBounds(u,{padding:[50,50]})},[t]),E.jsxs("div",{className:"w-full h-full bg-slate-100 rounded-xl overflow-hidden shadow-inner border border-slate-200 relative",children:[E.jsx("div",{ref:e,className:"w-full h-full z-0"}),E.jsxs("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-lg z-[400] border border-slate-200 text-xs",children:[E.jsx("h4",{className:"font-bold mb-2 text-slate-700",children:"Durak Durumlar"}),E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 border border-yellow-600"}),E.jsx("span",{children:"Aktif Durak"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-red-700"}),E.jsx("span",{children:"Pasif Durak"})]})]})]})},LF=({stand:t,onBack:e,onRevise:n,onViewHistory:i})=>{var a;const r=ce.useMemo(()=>{const u=[...t.history||[]],d={};return u.forEach(f=>{const g=f.relatedUkomeNo?`UKOME_${f.relatedUkomeNo}`:`MANUAL_${f.timestamp}`;d[g]||(d[g]={id:g,timestamp:f.timestamp,ukomeNo:f.relatedUkomeNo,ukomeDate:f.relatedUkomeDate,user:f.changedBy,changes:[]}),d[g].changes.push(f)}),Object.values(d).sort((f,g)=>new Date(g.timestamp).getTime()-new Date(f.timestamp).getTime())},[t.history]),o=()=>{};return E.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-300",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[E.jsxs("div",{children:[E.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-2 text-sm font-medium",children:[E.jsx(vs,{size:16})," Listeye Dn"]}),E.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.name,E.jsx("span",{className:`text-sm px-3 py-1 rounded-full border ${t.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:t.status})]}),E.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-1 text-sm",children:[E.jsx(Ll,{size:14})," ",t.district," / ",t.city]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("button",{disabled:!0,onClick:o,className:"px-4 py-2.5 bg-white border border-slate-300 text-slate-400 font-medium rounded-lg shadow-sm flex items-center gap-2 cursor-not-allowed opacity-60",title:"u an hizmet d",children:[E.jsx(sx,{size:18}),"Durak Raporu"]}),E.jsxs("button",{onClick:()=>n(t),className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm flex items-center gap-2",children:[E.jsx(xr,{size:18}),"Revize Et (UKOME)"]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(ad,{size:18,className:"text-blue-500"})," Temel Bilgiler"]})}),E.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Durak Ad"}),E.jsx("div",{className:"text-slate-900 font-medium mt-1",children:t.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Telefon"}),E.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[E.jsx(qm,{size:14,className:"text-slate-400"}),t.phone||"-"]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Yazhane Tipi"}),E.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[E.jsx(rx,{size:14,className:"text-slate-400"}),t.officeType]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Sorumluluk Alan"}),E.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[E.jsx(ux,{size:14,className:"text-slate-400"}),t.responsibility]})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Ak Adres"}),E.jsx("div",{className:"text-slate-900 mt-1 bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm",children:t.address})]}),t.notes&&E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Notlar"}),E.jsx("div",{className:"text-slate-700 mt-1 text-sm",children:t.notes})]})]})]}),E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(Ll,{size:18,className:"text-red-500"})," Konum"]})}),E.jsx("div",{className:"h-[300px] w-full relative",children:t.location?E.jsx(iS,{stands:[t]}):E.jsx("div",{className:"flex items-center justify-center h-full text-slate-400 bg-slate-50",children:"Konum bilgisi yok."})})]}),E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[E.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[E.jsx("div",{className:"flex items-center gap-4",children:E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(tp,{size:18,className:"text-purple-500"})," Revize Gemii"]})}),E.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-md",children:[r.length," Kayt"]})]}),E.jsx("div",{className:"overflow-x-auto",children:r.length>0?E.jsxs("table",{className:"w-full text-left text-sm",children:[E.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-200",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"UKOME Karar No"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Karar Tarihi"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Aklama"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600 text-right",children:"Grntle"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(u=>{const d=u.changes.find(g=>g.fieldName==="ukomeSummary"),f=d?d.newValue:u.changes.length>0?"-":"Deiiklik Yok";return E.jsxs("tr",{onClick:()=>i(u.ukomeNo),className:"hover:bg-blue-50/50 transition-colors cursor-pointer group",title:"Bu kararn detaylarn ve durak zerindeki etkisini grmek iin tklayn",children:[E.jsx("td",{className:"px-6 py-4 font-bold text-slate-800",children:u.ukomeNo||"Manuel Dzenleme"}),E.jsx("td",{className:"px-6 py-4 text-slate-600",children:u.ukomeDate?new Date(u.ukomeDate).toLocaleDateString("tr-TR"):"-"}),E.jsx("td",{className:"px-6 py-4 text-slate-600 max-w-xs truncate",children:f}),E.jsx("td",{className:"px-6 py-4 text-right",children:E.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-600 opacity-60 group-hover:opacity-100 transition-opacity",children:[E.jsx("span",{className:"text-xs font-semibold",children:"ncele"}),E.jsx(ix,{size:16})]})})]},u.id)})})]}):E.jsx("div",{className:"p-8 text-center text-slate-400",children:"Bu durak iin henz bir deiiklik kayd bulunmuyor."})})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[E.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-b border-yellow-100",children:E.jsxs("h3",{className:"font-semibold text-yellow-800 flex items-center gap-2",children:[E.jsx(Jl,{size:18})," Ara Plakalar"]})}),E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4 text-sm text-slate-500",children:[E.jsxs("span",{children:["Park Kapasitesi: ",E.jsx("strong",{className:"text-slate-900",children:t.capacity})]}),E.jsxs("span",{children:["Kaytl: ",E.jsx("strong",{className:"text-blue-600",children:((a=t.plates)==null?void 0:a.length)||0})]})]}),t.plates&&t.plates.length>0?E.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.plates.map((u,d)=>E.jsx("div",{className:"bg-slate-50 border border-slate-200 text-center py-2 rounded font-mono font-bold text-slate-800 text-sm",children:u},d))}):E.jsx("p",{className:"text-sm text-slate-400 italic text-center py-4",children:"Kaytl plaka yok."})]})]}),E.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-6",children:[E.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[E.jsx(xr,{size:18})," Son UKOME Durumu"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Numaras"}),E.jsx("div",{className:"text-lg font-bold text-blue-900",children:t.ukomeDecisionNo||"-"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Tarihi"}),E.jsx("div",{className:"text-sm font-medium text-blue-800",children:t.ukomeDate?new Date(t.ukomeDate).toLocaleDateString("tr-TR"):"-"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar zeti"}),E.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.ukomeSummary||"zet bilgisi girilmemi."})]})]})]})]})]})]})},VF=(t,e)=>{if(!e)return t;const n=JSON.parse(JSON.stringify(t)),i=[...t.history||[]].sort((d,f)=>new Date(f.timestamp).getTime()-new Date(d.timestamp).getTime()),r=i.filter(d=>d.relatedUkomeNo===e);if(r.length===0)return t;const o=new Date(r[0].timestamp).getTime();i.filter(d=>new Date(d.timestamp).getTime()>o).forEach(d=>{const f=d.fieldName;f==="capacity"?n[f]=Number(d.oldValue):f==="plates"?n[f]=d.oldValue==="(Plaka Yok)"?[]:d.oldValue.split(", ").filter(Boolean):n[f]=d.oldValue});const u=r[0];if(u){n.ukomeDecisionNo=u.relatedUkomeNo||"",n.ukomeDate=u.relatedUkomeDate||"";const d=r.find(f=>f.fieldName==="ukomeSummary");d&&(n.ukomeSummary=d.newValue)}return n},FF=({stand:t,initialUkomeNo:e,onClose:n,onSave:i})=>{var N;const[r,o]=ce.useState(e||null),[a,u]=ce.useState(!1),[d,f]=ce.useState(!1),[g,y]=ce.useState(null),v=ce.useMemo(()=>{const I={};return t.history.forEach(G=>{const W=G.relatedUkomeNo||"Manuel Dzenleme";I[W]||(I[W]={no:W,date:G.relatedUkomeDate||"-",timestamp:G.timestamp,summary:"",logs:[],user:G.changedBy}),I[W].logs.push(G),new Date(G.timestamp)>new Date(I[W].timestamp)&&(I[W].timestamp=G.timestamp)}),Object.values(I).sort((G,W)=>new Date(W.timestamp).getTime()-new Date(G.timestamp).getTime())},[t.history]);ce.useEffect(()=>{!r&&v.length>0&&o(v[0].no)},[v,r]);const S=()=>{if(!r)return;const I=v.find(K=>K.no===r);if(!I)return;const G=I.logs.find(K=>K.fieldName==="ukomeSummary"),W=G?G.newValue:"";y({ukomeNo:I.no==="Manuel Dzenleme"?"":I.no,ukomeDate:I.date==="-"?"":I.date,summary:W,logs:I.logs.map(K=>({id:K.id,oldValue:K.oldValue,newValue:K.newValue}))}),u(!0)},V=async()=>{if(!(!g||!r||!i)&&confirm("Yaplan deiiklikler gemi kaytlarn gncelleyecektir. Emin misiniz?")){f(!0);try{const I=JSON.parse(JSON.stringify(t));I.history=I.history.map(K=>{const b=g.logs.find(C=>C.id===K.id);return b?{...K,relatedUkomeNo:g.ukomeNo||K.relatedUkomeNo,relatedUkomeDate:g.ukomeDate,oldValue:b.oldValue,newValue:b.newValue}:K});const G=I.history.findIndex(K=>(K.relatedUkomeNo===r||r==="Manuel Dzenleme"&&!K.relatedUkomeNo)&&K.fieldName==="ukomeSummary");G>=0&&(I.history[G].newValue=g.summary,I.history[G].relatedUkomeNo=g.ukomeNo,I.history[G].relatedUkomeDate=g.ukomeDate),v[0].no===r&&(I.ukomeDecisionNo=g.ukomeNo,I.ukomeDate=g.ukomeDate,I.ukomeSummary=g.summary,g.logs.forEach(K=>{const b=t.history.find(C=>C.id===K.id);if(b){const C=b.fieldName;C!=="history"&&C!=="location"&&(C==="capacity"?I[C]=Number(K.newValue):C==="plates"?I[C]=K.newValue==="(Plaka Yok)"?[]:K.newValue.split(", ").filter(Boolean):I[C]=K.newValue)}})),await i(I),u(!1)}catch(I){console.error("Update error:",I),alert("Gncelleme srasnda hata olutu.")}finally{f(!1)}}},M=ce.useMemo(()=>VF(t,r),[t,r]),O=v.find(I=>I.no===r),R=I=>{switch(I){case"ukomeDecisionNo":return"Karar No";case"ukomeDate":return"Karar Tarihi";case"address":return"Ak Adres";case"district":return"le";case"neighborhood":return"Mahalle";case"street":return"Sokak";case"capacity":return"Kapasite";case"plates":return"Plakalar";case"status":return"Durum";case"name":return"Durak Ad";case"phone":return"Telefon";case"officeType":return"Yazhane Tipi";case"responsibility":return"Sorumluluk";case"notes":return"Notlar";case"ukomeSummary":return"Karar zeti";default:return I}};return E.jsxs("div",{className:"fixed inset-0 z-[2000] flex justify-end",children:[E.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:n}),E.jsxs("div",{className:"relative w-full max-w-5xl bg-white h-full shadow-2xl flex flex-col md:flex-row animate-in slide-in-from-right duration-300",children:[E.jsxs("div",{className:"w-full md:w-1/3 bg-slate-50 border-r border-slate-200 flex flex-col h-full",children:[E.jsxs("div",{className:"p-5 border-b border-slate-200 bg-white",children:[E.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[E.jsx(i1,{className:"text-blue-600",size:20}),"lem Gemii"]}),E.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"ncelemek istediiniz revizyonu sein."})]}),E.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:v.map(I=>E.jsxs("div",{onClick:()=>!a&&o(I.no),className:`p-4 rounded-xl border transition-all relative overflow-hidden group ${r===I.no?"bg-white border-blue-500 ring-2 ring-blue-100 shadow-md":a?"bg-slate-100 border-slate-200 opacity-50 cursor-not-allowed":"bg-white border-slate-200 hover:border-blue-300 cursor-pointer"}`,children:[E.jsx("div",{className:"flex justify-between items-start mb-2",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(xr,{size:16,className:r===I.no?"text-blue-600":"text-slate-400"}),E.jsx("span",{className:"font-bold text-slate-800 text-sm",children:I.no==="Manuel Dzenleme"?"Manuel Dzeltme":I.no})]})}),E.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[E.jsx(ox,{size:12}),new Date(I.date!=="-"?I.date:I.timestamp).toLocaleDateString("tr-TR")]}),E.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[E.jsx(p1,{size:12})," ",I.user," tarafndan"]}),E.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:[I.logs.length," lem"]})]},I.no))})]}),E.jsxs("div",{className:"w-full md:w-2/3 bg-white flex flex-col h-full relative",children:[E.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-white z-10",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:n,className:"md:hidden p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-full",children:E.jsx(vs,{size:20})}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:r==="Manuel Dzenleme"?"Manuel Dzeltme Kayd":`UKOME Karar No: ${r}`}),E.jsx("p",{className:"text-xs text-slate-500",children:a?"Hatal girileri dzeltmektesiniz.":"Bu ilem sonrasnda duran sistemdeki grnm."})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[a?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:()=>u(!1),className:"px-3 py-2 bg-slate-100 text-slate-600 border border-slate-200 rounded-lg hover:bg-slate-200 transition-colors flex items-center gap-2 text-xs font-bold",disabled:d,children:[E.jsx(c1,{size:14})," ptal"]}),E.jsx("button",{onClick:V,disabled:d,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-xs font-bold shadow-sm",children:d?"Kaydediliyor...":E.jsxs(E.Fragment,{children:[E.jsx(n1,{size:14})," Kaydet"]})})]}):i&&E.jsxs("button",{onClick:S,className:"px-3 py-2 bg-orange-50 text-orange-600 border border-orange-100 rounded-lg hover:bg-orange-100 transition-colors flex items-center gap-2 text-xs font-bold",title:"Bu kayttaki yazm hatalarn dzelt",children:[E.jsx(ax,{size:14})," Dzelt"]}),E.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 ml-2",children:E.jsx(cx,{size:24})})]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:a&&g?E.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-200",children:[E.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-xl",children:[E.jsxs("h4",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2 text-sm",children:[E.jsx(ad,{size:16})," UKOME Karar Bilgilerini Dzenle"]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-orange-800/70 mb-1 block",children:"Karar No"}),E.jsx("input",{value:g.ukomeNo,onChange:I=>y({...g,ukomeNo:I.target.value}),className:"w-full px-3 py-2 border border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none text-sm font-bold text-slate-800"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-orange-800/70 mb-1 block",children:"Karar Tarihi"}),E.jsx("input",{type:"date",value:g.ukomeDate,onChange:I=>y({...g,ukomeDate:I.target.value}),className:"w-full px-3 py-2 border border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none text-sm"})]}),E.jsxs("div",{className:"col-span-2",children:[E.jsx("label",{className:"text-xs font-bold text-orange-800/70 mb-1 block",children:"Karar zeti"}),E.jsx("textarea",{rows:2,value:g.summary,onChange:I=>y({...g,summary:I.target.value}),className:"w-full px-3 py-2 border border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none text-sm"})]})]})]}),E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:E.jsx("h4",{className:"font-bold text-slate-700 text-xs uppercase tracking-wider",children:"Deiiklik Loglarn Dzenle"})}),E.jsxs("table",{className:"w-full text-left text-sm",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-slate-100 text-xs text-slate-500 bg-slate-50/50",children:[E.jsx("th",{className:"px-6 py-2 font-medium",children:"Deien Alan"}),E.jsx("th",{className:"px-6 py-2 font-medium",children:"Eski Deer"}),E.jsx("th",{className:"px-6 py-2 font-medium",children:"Yeni Deer"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-50",children:O==null?void 0:O.logs.map(I=>{if(I.fieldName==="ukomeSummary")return null;const G=g.logs.find(W=>W.id===I.id);return E.jsxs("tr",{className:"hover:bg-slate-50/50",children:[E.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:R(I.fieldName)}),E.jsx("td",{className:"px-6 py-3",children:E.jsx("input",{value:(G==null?void 0:G.oldValue)||"",onChange:W=>{const K=g.logs.map(b=>b.id===I.id?{...b,oldValue:W.target.value}:b);y({...g,logs:K})},className:"w-full bg-red-50 border border-red-100 px-2 py-1 rounded text-red-800 text-xs focus:ring-1 focus:ring-red-500 outline-none"})}),E.jsx("td",{className:"px-6 py-3",children:E.jsx("input",{value:(G==null?void 0:G.newValue)||"",onChange:W=>{const K=g.logs.map(b=>b.id===I.id?{...b,newValue:W.target.value}:b);y({...g,logs:K})},className:"w-full bg-green-50 border border-green-100 px-2 py-1 rounded text-green-800 font-bold text-xs focus:ring-1 focus:ring-green-500 outline-none"})})]},I.id)})})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-8",children:[E.jsxs("div",{className:"bg-slate-100 px-6 py-3 border-b border-slate-200 flex justify-between items-center",children:[E.jsxs("div",{className:"font-semibold text-slate-700 flex items-center gap-2 text-sm uppercase",children:[E.jsx(ad,{size:16,className:"text-blue-600"}),"Duran O Tarihteki zellikleri"]}),E.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-white border border-slate-200 px-2 py-1 rounded shadow-sm",children:"ARV KAYDI"})]}),E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-6 gap-x-8 mb-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Durak Ad"}),E.jsx("div",{className:"text-sm font-bold text-slate-800",children:M.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Durum"}),E.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-bold rounded border ${M.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:M.status})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Yazhane Tipi"}),E.jsxs("div",{className:"text-sm font-medium text-slate-700 flex items-center gap-1",children:[E.jsx(rx,{size:14,className:"text-slate-400"}),M.officeType]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Telefon"}),E.jsxs("div",{className:"text-sm font-medium text-slate-700 flex items-center gap-1",children:[E.jsx(qm,{size:14,className:"text-slate-400"}),M.phone||"-"]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Sorumluluk"}),E.jsxs("div",{className:"text-sm font-medium text-slate-700 flex items-center gap-1",children:[E.jsx(ux,{size:14,className:"text-slate-400"}),M.responsibility]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Kapasite"}),E.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[M.capacity," Ara"]})]})]}),E.jsx("div",{className:"border-t border-slate-100 my-4"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8 mb-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"le / Mahalle"}),E.jsxs("div",{className:"text-sm font-medium text-slate-800",children:[M.district," / ",M.neighborhood]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Sokak"}),E.jsx("div",{className:"text-sm font-medium text-slate-800",children:M.street||"-"})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1 flex items-center gap-1",children:[E.jsx(Ll,{size:12})," Tam Ak Adres"]}),E.jsx("div",{className:"text-sm text-slate-600 bg-slate-50 p-2.5 rounded border border-slate-200",children:M.address})]})]}),E.jsx("div",{className:"border-t border-slate-100 my-4"}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-2 flex items-center gap-1",children:[E.jsx(Jl,{size:12})," O Tarihte Kaytl Plakalar (",((N=M.plates)==null?void 0:N.length)||0,")"]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:M.plates&&M.plates.length>0?M.plates.map((I,G)=>E.jsx("span",{className:"text-xs font-mono font-bold bg-yellow-50 text-slate-800 border border-yellow-200 px-2 py-1 rounded shadow-sm",children:I},G)):E.jsx("span",{className:"text-xs text-slate-400 italic",children:"Kaytl plaka yok"})})]}),E.jsx("div",{className:"border-t border-slate-100 my-4"}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1 flex items-center gap-1",children:[E.jsx(s1,{size:12})," UKOME Karar Bilgisi (Snapshot)"]}),E.jsxs("div",{className:"bg-blue-50/50 p-3 rounded border border-blue-100 grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-[10px] text-blue-400 block",children:"Karar No"}),E.jsx("span",{className:"text-sm font-semibold text-blue-900",children:M.ukomeDecisionNo||"-"})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-[10px] text-blue-400 block",children:"Karar Tarihi"}),E.jsx("span",{className:"text-sm font-semibold text-blue-900",children:M.ukomeDate||"-"})]}),E.jsxs("div",{className:"col-span-2",children:[E.jsx("span",{className:"text-[10px] text-blue-400 block",children:"zet"}),E.jsx("span",{className:"text-sm text-blue-800",children:M.ukomeSummary||"-"})]})]})]})]})]}),O&&E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:E.jsx("h4",{className:"font-bold text-slate-700 text-xs uppercase tracking-wider",children:"Bu Karar le Yaplan Deiiklikler"})}),E.jsxs("table",{className:"w-full text-left text-sm",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-slate-100 text-xs text-slate-500 bg-slate-50/50",children:[E.jsx("th",{className:"px-6 py-2 font-medium",children:"Deien Alan"}),E.jsx("th",{className:"px-6 py-2 font-medium",children:"Eski Deer"}),E.jsx("th",{className:"px-6 py-2 font-medium",children:"Yeni Deer"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-50",children:O.logs.map(I=>E.jsxs("tr",{className:"hover:bg-slate-50/50",children:[E.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:R(I.fieldName)}),E.jsx("td",{className:"px-6 py-3 text-red-500 text-xs opacity-70 break-all max-w-xs",children:I.oldValue}),E.jsx("td",{className:"px-6 py-3 text-green-600 font-bold text-xs break-all max-w-xs",children:I.newValue})]},I.id))})]})]})]})})]})]})]})},UF=({stands:t,onRefresh:e,onBack:n})=>{const[i,r]=ce.useState(""),[o,a]=ce.useState(null),[u,d]=ce.useState(""),[f,g]=ce.useState(""),[y,v]=ce.useState(new Date().toISOString().split("T")[0]),[S,V]=ce.useState(!1),[M,O]=ce.useState(null),R=o?o.trim().toUpperCase():"",N=ce.useMemo(()=>{const C=new Set;return t.forEach(k=>{k.plates&&k.plates.forEach(U=>C.add(U))}),Array.from(C).sort()},[t]),I=ce.useMemo(()=>R?t.find(C=>C.plates.includes(R)):null,[t,R]),G=ce.useMemo(()=>{if(!R)return[];const C=[];t.forEach(B=>{B.history.forEach(F=>{if(F.fieldName==="plates"){const D=F.oldValue==="(Plaka Yok)"?[]:F.oldValue.split(", ").map(xe=>xe.trim()),ae=F.newValue==="(Plaka Yok)"?[]:F.newValue.split(", ").map(xe=>xe.trim()),Ke=D.includes(R),Me=ae.includes(R);!Ke&&Me?C.push({id:F.id,date:F.timestamp,ukomeNo:F.relatedUkomeNo,standName:B.name,action:"GR",user:F.changedBy}):Ke&&!Me&&C.push({id:F.id,date:F.timestamp,ukomeNo:F.relatedUkomeNo,standName:B.name,action:"IKI",user:F.changedBy})}})});const k=[];C.sort((B,F)=>new Date(F.date).getTime()-new Date(B.date).getTime());const U=new Set;return C.forEach(B=>{if(!U.has(B.id)){if(B.ukomeNo){const F=C.find(D=>D.id!==B.id&&!U.has(D.id)&&D.ukomeNo===B.ukomeNo&&D.action!==B.action);if(F){const D=B.action==="IKI"?B:F,ae=B.action==="GR"?B:F;k.push({id:B.id+F.id,date:ae.date,type:"TRANSFER",from:D.standName,to:ae.standName,ukomeNo:B.ukomeNo,user:B.user}),U.add(B.id),U.add(F.id);return}}k.push({id:B.id,date:B.date,type:B.action,stand:B.standName,ukomeNo:B.ukomeNo,user:B.user}),U.add(B.id)}}),k.sort((B,F)=>new Date(F.date).getTime()-new Date(B.date).getTime())},[t,R]),W=C=>{if(C.preventDefault(),i.trim()){const k=i.trim().toUpperCase();a(k),O(null),d(""),g("")}},K=()=>{},b=async()=>{if(!o||!u)return;if(!f.trim()){alert("Plaka ilemleri resmi bir ilem olduu iin UKOME Karar Numaras girilmesi zorunludur.");return}if(I&&I.id===u){alert("Plaka zaten bu durakta.");return}const C=I?`${o} plakasn ${I.name} durandan alp seilen duraa transfer etmek istiyor musunuz?`:`${o} plakasn seilen duraa eklemek (ilk atama) istiyor musunuz?`;if(confirm(C)){V(!0);try{const k=t.find(ae=>ae.id===u);if(!k)throw new Error("Hedef durak bulunamad.");const U=new Date().toISOString();if(I){const ae={...I,plates:I.plates.filter(Me=>Me!==o),ukomeDecisionNo:f,ukomeDate:y,updatedAt:U},Ke=Xf(I,ae);Ke.forEach(Me=>{Me.changedBy="PlakaYnetim"}),ae.history=[...I.history,...Ke],await sd(ae)}const B={...k,plates:[...k.plates,o].sort(),ukomeDecisionNo:f,ukomeDate:y,updatedAt:U},F=Xf(k,B);F.forEach(ae=>{ae.changedBy="PlakaYnetim"}),B.history=[...k.history,...F],await sd(B),await e();const D=I?"baaryla tand":"baaryla eklendi";O(`${o} ${k.name} durana ${D}. (Karar: ${f})`),d(""),g("")}catch(k){console.error(k),alert("lem srasnda hata olutu.")}finally{V(!1)}}};return E.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[E.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",children:E.jsx(vs,{size:20})}),E.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[E.jsx(Jl,{className:"text-purple-600"}),"Plaka Ynetim Paneli"]})]})})}),E.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 py-8",children:[E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:E.jsxs("form",{onSubmit:W,className:"flex gap-4 items-end",children:[E.jsxs("div",{className:"flex-1 max-w-md",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Plaka Sorgula"}),E.jsxs("div",{className:"relative",children:[E.jsx(lx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),E.jsx("input",{type:"text",list:"plate-search-suggestions",value:i,onChange:C=>r(C.target.value),placeholder:"rn: 35 T 1234",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-lg font-mono uppercase",autoFocus:!0}),E.jsx("datalist",{id:"plate-search-suggestions",children:N.map(C=>E.jsx("option",{value:C},C))})]})]}),E.jsx("button",{type:"submit",className:"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:"Sorgula"})]})}),o&&E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[E.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("h3",{className:"font-semibold text-slate-800",children:"Mevcut Durum"}),E.jsx("span",{className:"font-mono font-bold text-lg bg-slate-200 px-3 py-1 rounded text-slate-800",children:o})]}),E.jsxs("button",{disabled:!0,onClick:K,className:"flex items-center gap-2 text-xs bg-white border border-slate-300 px-3 py-1.5 rounded-lg text-slate-400 cursor-not-allowed opacity-60",title:"Bakmda",children:[E.jsx(sx,{size:16})," PDF Rapor"]})]}),E.jsx("div",{className:"p-8 text-center",children:I?E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4",children:E.jsx(Ll,{size:32})}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:I.name}),E.jsxs("p",{className:"text-slate-500",children:[I.district," / ",I.neighborhood]}),E.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-50 text-green-700 text-sm font-medium border border-green-200",children:[E.jsx(Ay,{size:14})," Aktif Olarak alyor"]})]}):E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4",children:E.jsx(jN,{size:32})}),E.jsx("h2",{className:"text-xl font-bold text-slate-700 mb-2",children:"Bota / Kaytsz"}),E.jsx("p",{className:"text-slate-500",children:"Bu plaka u anda hibir duraa kaytl grnmyor."})]})})]}),E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[E.jsx("div",{className:"bg-purple-50 px-6 py-4 border-b border-purple-100",children:E.jsxs("h3",{className:"font-semibold text-purple-900 flex items-center gap-2",children:[E.jsx(e1,{size:18})," Duraa Ekle / Dura Deitir"]})}),E.jsxs("div",{className:"p-6",children:[M&&E.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center gap-2",children:[E.jsx(Ay,{size:18}),M]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-100 shadow-sm",children:[E.jsxs("h4",{className:"text-xs font-bold text-purple-800 uppercase mb-3 flex items-center gap-1",children:[E.jsx(xr,{size:12})," lem Dayana (UKOME)"]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{children:[E.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Karar No ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:f,onChange:C=>g(C.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"rn: 2024/5-12"})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Karar Tarihi ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"date",value:y,onChange:C=>v(C.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-purple-500 outline-none"})]})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:I?"Yeni Durak Sein":"Duraa Ekle (lk Atama)"}),E.jsxs("select",{value:u,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[E.jsx("option",{value:"",children:"Durak Seiniz..."}),t.sort((C,k)=>C.name.localeCompare(k.name)).map(C=>E.jsxs("option",{value:C.id,disabled:(I==null?void 0:I.id)===C.id,children:[C.name," (",C.district,") ",(I==null?void 0:I.id)===C.id?"(Mevcut)":""]},C.id))]})]}),E.jsx("button",{onClick:b,disabled:!u||S,className:"w-full py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2",children:S?"leniyor...":I?"Transferi Tamamla":"Duraa Ekle"})]})]})]})]}),E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[600px]",children:[E.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(tp,{size:18,className:"text-blue-500"})," alma Gemii"]}),E.jsxs("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded text-slate-600",children:[G.length," Kayt"]})]}),E.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:G.length>0?E.jsx("div",{className:"divide-y divide-slate-100",children:G.map(C=>E.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${C.type==="TRANSFER"?"bg-purple-100 text-purple-700 border-purple-200":C.type==="GR"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:C.type}),C.ukomeNo&&E.jsxs("span",{className:"text-[10px] font-mono text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:["UKOME: ",C.ukomeNo]})]}),E.jsx("div",{className:"mb-2",children:C.type==="TRANSFER"?E.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-800",children:[E.jsx("span",{className:"text-slate-500 font-normal",children:C.from}),E.jsx(ix,{size:14,className:"text-slate-400"}),E.jsx("span",{className:"text-blue-700",children:C.to})]}):E.jsx("div",{className:"font-bold text-slate-800 text-sm",children:C.stand})}),E.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(ox,{size:12}),new Date(C.date).toLocaleDateString("tr-TR")]}),E.jsxs("div",{children:["lem: ",C.user]})]})]},C.id))}):E.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-8 text-center",children:[E.jsx(tp,{size:48,className:"mb-4 opacity-20"}),E.jsx("p",{children:"Bu plaka iin gemi kayd bulunamad."})]})})]})]})]})]})},OF=()=>{const[t,e]=ce.useState("LANDING"),[n,i]=ce.useState("LIST"),[r,o]=ce.useState("CREATE"),[a,u]=ce.useState([]),[d,f]=ce.useState(void 0),[g,y]=ce.useState(void 0),[v,S]=ce.useState(null),[V,M]=ce.useState(""),[O,R]=ce.useState(!0),[N,I]=ce.useState(null),[G,W]=ce.useState(!1),[K,b]=ce.useState({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""});ce.useEffect(()=>{C()},[]);const C=async()=>{R(!0),I(null);try{const H=await JN();u(H)}catch(H){console.error("Firebase Error:",H);let ne="Veritabanna balanlamad.";H.message&&H.message.includes("services/firebaseConfig.ts")?ne=H.message:H.code==="permission-denied"?ne="Yetki Hatas: Firestore veritaban kurallar okuma/yazmay engelliyor. (Test modunu an: allow read, write: if true;)":H.code==="unavailable"?ne="Sunucuya ulalamyor. nternet balantnz kontrol edin.":H.message&&H.message.includes("project")?ne="Proje Bulunamad: Firebase Console'da 'Firestore Database' oluturduunuzdan emin olun. Sadece proje amak yetmez, veritabann da 'Create Database' diyerek oluturmalsnz.":ne=`Veritaban Hatas (${H.code||"Bilinmeyen"}): ${H.message}`,I(ne)}finally{R(!1)}},k=()=>{o("CREATE"),f(void 0),i("FORM")},U=H=>{f(H),i("VIEW")},B=H=>{o("EDIT"),f(H),i("FORM")},F=H=>{f(H),b({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""}),W(!0)},D=H=>{if(H.preventDefault(),W(!1),d){const ne={...d,ukomeDecisionNo:K.decisionNo,ukomeDate:K.date,ukomeSummary:K.summary};o("REVISION"),f(ne),i("FORM")}},ae=async H=>{if(confirm("Bu dura silmek istediinize emin misiniz?"))try{await ZN(H),await C(),n==="VIEW"&&i("LIST")}catch{alert("Silme ilemi baarsz oldu.")}},Ke=async H=>{try{const ne=a.find(X=>X.id===H.id);if(ne){let X=ne.history;if(r==="REVISION"){const ye=Xf(ne,H);X=[...ne.history,...ye]}const he={...H,history:X};await sd(he)}else await sd(H);await C(),i("LIST")}catch(ne){throw console.error(ne),alert("Kayt ilemi baarsz oldu. Hata detaylar konsolda."),ne}},Me=(H,ne=null)=>{y(H),S(ne)},xe=a.filter(H=>{var ne,X;return H.name.toLowerCase().includes(V.toLowerCase())||H.district.toLowerCase().includes(V.toLowerCase())||((ne=H.neighborhood)==null?void 0:ne.toLowerCase().includes(V.toLowerCase()))||((X=H.ukomeDecisionNo)==null?void 0:X.toLowerCase().includes(V.toLowerCase()))});return t==="LANDING"?E.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"max-w-4xl w-full",children:[E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("div",{className:"flex justify-center mb-6",children:E.jsxs("svg",{width:"110",height:"150",viewBox:"0 0 100 130",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"drop-shadow-2xl hover:scale-105 transition-transform duration-300",children:[E.jsx("path",{d:"M50 0C22.4 0 0 22.4 0 50C0 85 50 130 50 130C50 130 100 85 100 50C100 22.4 77.6 0 50 0Z",fill:"#FACC15",stroke:"#EAB308",strokeWidth:"1"}),E.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"#09090b"}),E.jsx("text",{x:"50",y:"60",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontWeight:"900",fontSize:"23",fill:"#FACC15",letterSpacing:"-0.5",children:"TAKS"})]})}),E.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 tracking-tight mb-2",children:"TaksiYnetim"}),E.jsx("p",{className:"text-slate-500 text-lg",children:"zmir Taksi Duraklar ve Plaka Ynetim Sistemi"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("button",{onClick:()=>e("STANDS"),className:"group relative bg-white hover:bg-blue-600 border border-slate-200 hover:border-blue-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[E.jsx("div",{className:"bg-blue-50 group-hover:bg-blue-500 p-4 rounded-xl mb-6 transition-colors",children:E.jsx(Py,{size:32,className:"text-blue-600 group-hover:text-white transition-colors"})}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Durak Ynetim Paneli"}),E.jsx("p",{className:"text-slate-500 group-hover:text-blue-100",children:"Taksi duraklarn harita zerinde grntleyin, kapasite bilgilerini ynetin, UKOME kararlarn ileyin."}),E.jsxs("div",{className:"mt-auto pt-6 flex items-center text-blue-600 group-hover:text-white font-medium",children:["Paneli A ",E.jsx(vs,{className:"rotate-180 ml-2"})]})]}),E.jsxs("button",{onClick:()=>e("PLATES"),className:"group relative bg-white hover:bg-purple-600 border border-slate-200 hover:border-purple-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[E.jsx("div",{className:"bg-purple-50 group-hover:bg-purple-500 p-4 rounded-xl mb-6 transition-colors",children:E.jsx(Jl,{size:32,className:"text-purple-600 group-hover:text-white transition-colors"})}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Plaka lemleri"}),E.jsx("p",{className:"text-slate-500 group-hover:text-purple-100",children:"Plaka sorgulayn, aralarn hangi durakta altn grn ve durak transfer ilemlerini gerekletirin."}),E.jsxs("div",{className:"mt-auto pt-6 flex items-center text-purple-600 group-hover:text-white font-medium",children:["Paneli A ",E.jsx(vs,{className:"rotate-180 ml-2"})]})]})]})]})}):t==="PLATES"?E.jsx(UF,{stands:a,onRefresh:C,onBack:()=>e("LANDING")}):E.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col animate-in fade-in duration-300",children:[E.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>e("LANDING"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",title:"Ana Menye Dn",children:E.jsx(vs,{size:20})}),E.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>i("LIST"),children:[E.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:E.jsx(Py,{size:20})}),E.jsx("h1",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"Durak Ynetim Paneli"})]})]}),E.jsx("div",{className:"text-sm text-slate-500 hidden sm:block",children:"Durak Kayt Sistemi v1.2"})]})}),E.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&E.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-start gap-3 shadow-sm animate-in fade-in slide-in-from-top-2",children:[E.jsx(XN,{className:"shrink-0 mt-0.5",size:20}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"font-bold",children:"Balant Hatas"}),E.jsx("p",{className:"text-sm mt-1",children:N})]})]}),(n==="LIST"||n==="MAP")&&E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[E.jsxs("div",{className:"relative w-full sm:w-96",children:[E.jsx(lx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),E.jsx("input",{type:"text",placeholder:"Durak ara (sim, le, UKOME No)...",value:V,onChange:H=>M(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),E.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[E.jsxs("div",{className:"bg-white border border-slate-300 rounded-lg p-1 flex",children:[E.jsxs("button",{onClick:()=>i("LIST"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="LIST"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[E.jsx(a1,{size:18}),"Liste"]}),E.jsxs("button",{onClick:()=>i("MAP"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="MAP"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[E.jsx(l1,{size:18}),"Harita"]})]}),E.jsxs("button",{onClick:k,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm font-medium",children:[E.jsx(u1,{size:20}),"Yeni Durak Ekle"]})]})]}),E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[500px]",children:O?E.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[E.jsx(ld,{size:32,className:"animate-spin mb-2 text-blue-600"}),E.jsx("p",{children:"Veriler Ykleniyor..."})]}):E.jsx(E.Fragment,{children:n==="LIST"?E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[E.jsx("th",{className:"p-4",children:"Durak Ad"}),E.jsx("th",{className:"p-4",children:"le / Mahalle"}),E.jsx("th",{className:"p-4",children:"DURAKTA ALIAN ARA SAYISI"}),E.jsx("th",{className:"p-4",children:"Son UKOME Karar"}),E.jsx("th",{className:"p-4",children:"Durum"}),E.jsx("th",{className:"p-4 text-right",children:"lemler"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:xe.length>0?xe.map(H=>{var ne;return E.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[E.jsx("td",{className:"p-4 font-medium text-slate-900",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600",children:E.jsx(t1,{size:16})}),H.name]})}),E.jsxs("td",{className:"p-4",children:[E.jsx("div",{className:"font-medium text-slate-700",children:H.district}),H.neighborhood&&E.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[H.neighborhood," Mah."]})]}),E.jsx("td",{className:"p-4",children:E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsxs("div",{className:"flex items-baseline gap-2",children:[E.jsx("span",{className:"text-lg font-bold text-slate-700",children:((ne=H.plates)==null?void 0:ne.length)||0}),E.jsx("span",{className:"text-xs text-slate-500",children:"Ara"})]}),E.jsxs("span",{className:"text-xs text-slate-400",children:["(Kapasite: ",H.capacity,")"]})]})}),E.jsx("td",{className:"p-4 text-slate-600",children:H.ukomeDecisionNo?E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-medium text-slate-700",children:H.ukomeDecisionNo}),E.jsx("span",{className:"text-xs text-slate-400",children:new Date(H.ukomeDate).toLocaleDateString("tr-TR")})]}):"-"}),E.jsx("td",{className:"p-4",children:E.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${H.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":H.status==="Pasif"?"bg-red-50 text-red-700 border-red-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:H.status})}),E.jsx("td",{className:"p-4 text-right",children:E.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E.jsx("button",{onClick:()=>U(H),className:"p-2 bg-white border border-slate-200 text-slate-600 hover:text-blue-600 hover:border-blue-200 rounded-lg transition-all shadow-sm",title:"Detayl Grntle",children:E.jsx(o1,{size:18})}),E.jsx("button",{onClick:()=>B(H),className:"p-2 bg-orange-50 border border-orange-100 text-orange-600 hover:bg-orange-100 hover:border-orange-200 rounded-lg transition-all shadow-sm",title:"Dzenle (Hatal Giri Dzeltme)",children:E.jsx(ax,{size:18})}),E.jsxs("button",{onClick:()=>F(H),className:"px-3 py-2 bg-blue-50 border border-blue-100 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-medium flex items-center gap-1 transition-all",title:"UKOME Karar ile Revize Et",children:[E.jsx(xr,{size:16}),"Revize"]}),E.jsx("button",{onClick:()=>ae(H.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg ml-1",title:"Sil",children:E.jsx(f1,{size:18})})]})})]},H.id)}):E.jsx("tr",{children:E.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:N?E.jsxs("div",{className:"flex flex-col items-center gap-2",children:[E.jsx("span",{className:"font-semibold text-red-500",children:"Balant Sorunu"}),E.jsx("span",{className:"text-xs",children:"Yukardaki hata mesajn kontrol edin."})]}):"Kayt bulunamad."})})})]})}):E.jsx("div",{className:"h-[600px] w-full",children:E.jsx(iS,{stands:xe})})})})]}),n==="VIEW"&&d&&E.jsx(LF,{stand:d,onBack:()=>i("LIST"),onRevise:F,onViewHistory:H=>Me(d,H)}),n==="FORM"&&E.jsx(DF,{initialData:d,existingStands:a,onSave:Ke,onCancel:()=>i("LIST")})]}),g&&E.jsx(FF,{stand:g,initialUkomeNo:v,onSave:Ke,onClose:()=>{y(void 0),S(null)}}),G&&E.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4",children:[E.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>W(!1)}),E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md relative z-10 p-6 animate-in fade-in zoom-in duration-200",children:[E.jsxs("div",{className:"mb-5",children:[E.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[E.jsx(xr,{className:"text-blue-600"}),"UKOME Revizyon Karar"]}),E.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Dura revize etmeden nce ilgili UKOME karar numarasn giriniz."})]}),E.jsxs("form",{onSubmit:D,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Numaras"}),E.jsx("input",{required:!0,type:"text",placeholder:"rn: 2025/12-05",value:K.decisionNo,onChange:H=>b({...K,decisionNo:H.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Tarihi"}),E.jsx("input",{required:!0,type:"date",value:K.date,onChange:H=>b({...K,date:H.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar zeti (Opsiyonel)"}),E.jsx("textarea",{rows:2,placeholder:"Deiiklik sebebi...",value:K.summary,onChange:H=>b({...K,summary:H.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),E.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[E.jsx("button",{type:"button",onClick:()=>W(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg",children:"ptal"}),E.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Devam Et & Revize Et"})]})]})]})]})]})},rS=document.getElementById("root");if(!rS)throw new Error("Could not find root element to mount to");const BF=Bh.createRoot(rS);BF.render(E.jsx(JS.StrictMode,{children:E.jsx(OF,{})}));
