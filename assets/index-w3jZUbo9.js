(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var wS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s0={exports:{}},dd={},a0={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),xS=Symbol.for("react.portal"),SS=Symbol.for("react.fragment"),IS=Symbol.for("react.strict_mode"),CS=Symbol.for("react.profiler"),AS=Symbol.for("react.provider"),PS=Symbol.for("react.context"),RS=Symbol.for("react.forward_ref"),kS=Symbol.for("react.suspense"),NS=Symbol.for("react.memo"),MS=Symbol.for("react.lazy"),Tg=Symbol.iterator;function LS(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var l0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u0=Object.assign,c0={};function bs(t,e,n){this.props=t,this.context=e,this.refs=c0,this.updater=n||l0}bs.prototype.isReactComponent={};bs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=bs.prototype;function mp(t,e,n){this.props=t,this.context=e,this.refs=c0,this.updater=n||l0}var gp=mp.prototype=new d0;gp.constructor=mp;u0(gp,bs.prototype);gp.isPureReactComponent=!0;var Eg=Array.isArray,h0=Object.prototype.hasOwnProperty,_p={current:null},f0={key:!0,ref:!0,__self:!0,__source:!0};function p0(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)h0.call(e,i)&&!f0.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:bl,type:t,key:o,ref:a,props:r,_owner:_p.current}}function DS(t,e){return{$$typeof:bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===bl}function bS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wg=/\/+/g;function eh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bS(""+t.key):e.toString(36)}function ic(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bl:case xS:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+eh(a,0):i,Eg(r)?(n="",t!=null&&(n=t.replace(wg,"$&/")+"/"),ic(r,e,n,"",function(f){return f})):r!=null&&(yp(r)&&(r=DS(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(wg,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Eg(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+eh(o,u);a+=ic(o,e,n,d,r)}else if(d=LS(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+eh(o,u++),a+=ic(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ru(t,e,n){if(t==null)return t;var i=[],r=0;return ic(t,i,"","",function(o){return e.call(n,o,r++)}),i}function VS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},rc={transition:null},FS={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:rc,ReactCurrentOwner:_p};function m0(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Ru,forEach:function(t,e,n){Ru(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ru(t,function(){e++}),e},toArray:function(t){return Ru(t,function(e){return e})||[]},only:function(t){if(!yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=bs;Ae.Fragment=SS;Ae.Profiler=CS;Ae.PureComponent=mp;Ae.StrictMode=IS;Ae.Suspense=kS;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FS;Ae.act=m0;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=u0({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=_p.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)h0.call(e,d)&&!f0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:bl,type:t.type,key:r,ref:o,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:PS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AS,_context:t},t.Consumer=t};Ae.createElement=p0;Ae.createFactory=function(t){var e=p0.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:RS,render:t}};Ae.isValidElement=yp;Ae.lazy=function(t){return{$$typeof:MS,_payload:{_status:-1,_result:t},_init:VS}};Ae.memo=function(t,e){return{$$typeof:NS,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};Ae.unstable_act=m0;Ae.useCallback=function(t,e){return Yt.current.useCallback(t,e)};Ae.useContext=function(t){return Yt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Yt.current.useEffect(t,e)};Ae.useId=function(){return Yt.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Yt.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};Ae.useRef=function(t){return Yt.current.useRef(t)};Ae.useState=function(t){return Yt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Yt.current.useTransition()};Ae.version="18.3.1";a0.exports=Ae;var pe=a0.exports;const US=o0(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=pe,BS=Symbol.for("react.element"),zS=Symbol.for("react.fragment"),GS=Object.prototype.hasOwnProperty,HS=OS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qS={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)GS.call(e,i)&&!qS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:BS,type:t,key:o,ref:a,props:r,_owner:HS.current}}dd.Fragment=zS;dd.jsx=g0;dd.jsxs=g0;s0.exports=dd;var E=s0.exports,Vh={},_0={exports:{}},pn={},y0={exports:{}},v0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ne){var j=G.length;G.push(ne);e:for(;0<j;){var de=j-1>>>1,ye=G[de];if(0<r(ye,ne))G[de]=ne,G[j]=ye,j=de;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ne=G[0],j=G.pop();if(j!==ne){G[0]=j;e:for(var de=0,ye=G.length,Pe=ye>>>1;de<Pe;){var Oe=2*(de+1)-1,Se=G[Oe],ve=Oe+1,gt=G[ve];if(0>r(Se,j))ve<ye&&0>r(gt,Se)?(G[de]=gt,G[ve]=j,de=ve):(G[de]=Se,G[Oe]=j,de=Oe);else if(ve<ye&&0>r(gt,j))G[de]=gt,G[ve]=j,de=ve;else break e}}return ne}function r(G,ne){var j=G.sortIndex-ne.sortIndex;return j!==0?j:G.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],f=[],g=1,y=null,v=3,S=!1,D=!1,b=!1,B=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var ne=n(f);ne!==null;){if(ne.callback===null)i(f);else if(ne.startTime<=G)i(f),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=n(f)}}function H(G){if(b=!1,k(G),!D)if(n(d)!==null)D=!0,Ne(J);else{var ne=n(f);ne!==null&&xe(H,ne.startTime-G)}}function J(G,ne){D=!1,b&&(b=!1,R(C),C=-1),S=!0;var j=v;try{for(k(ne),y=n(d);y!==null&&(!(y.expirationTime>ne)||G&&!O());){var de=y.callback;if(typeof de=="function"){y.callback=null,v=y.priorityLevel;var ye=de(y.expirationTime<=ne);ne=t.unstable_now(),typeof ye=="function"?y.callback=ye:y===n(d)&&i(d),k(ne)}else i(d);y=n(d)}if(y!==null)var Pe=!0;else{var Oe=n(f);Oe!==null&&xe(H,Oe.startTime-ne),Pe=!1}return Pe}finally{y=null,v=j,S=!1}}var Z=!1,V=null,C=-1,P=5,U=-1;function O(){return!(t.unstable_now()-U<P)}function F(){if(V!==null){var G=t.unstable_now();U=G;var ne=!0;try{ne=V(!0,G)}finally{ne?M():(Z=!1,V=null)}}else Z=!1}var M;if(typeof N=="function")M=function(){N(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Ke=ae.port2;ae.port1.onmessage=F,M=function(){Ke.postMessage(null)}}else M=function(){B(F,0)};function Ne(G){V=G,Z||(Z=!0,M())}function xe(G,ne){C=B(function(){G(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){D||S||(D=!0,Ne(J))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var j=v;v=ne;try{return G()}finally{v=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var j=v;v=G;try{return ne()}finally{v=j}},t.unstable_scheduleCallback=function(G,ne,j){var de=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?de+j:de):j=de,G){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=j+ye,G={id:g++,callback:ne,priorityLevel:G,startTime:j,expirationTime:ye,sortIndex:-1},j>de?(G.sortIndex=j,e(f,G),n(d)===null&&G===n(f)&&(b?(R(C),C=-1):b=!0,xe(H,j-de))):(G.sortIndex=ye,e(d,G),D||S||(D=!0,Ne(J))),G},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(G){var ne=v;return function(){var j=v;v=ne;try{return G.apply(this,arguments)}finally{v=j}}}})(v0);y0.exports=v0;var $S=y0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS=pe,fn=$S;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,sl={};function ao(t,e){Ts(t,e),Ts(t+"Capture",e)}function Ts(t,e){for(sl[t]=e,t=0;t<e.length;t++)T0.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fh=Object.prototype.hasOwnProperty,KS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xg={},Sg={};function JS(t){return Fh.call(Sg,t)?!0:Fh.call(xg,t)?!1:KS.test(t)?Sg[t]=!0:(xg[t]=!0,!1)}function ZS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YS(t,e,n,i){if(e===null||typeof e>"u"||ZS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function Tp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vp,Tp);Dt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vp,Tp);Dt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vp,Tp);Dt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ep(t,e,n,i){var r=Dt.hasOwnProperty(e)?Dt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YS(e,n,r,i)&&(n=null),i||r===null?JS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Fi=WS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ku=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),Yo=Symbol.for("react.fragment"),wp=Symbol.for("react.strict_mode"),Uh=Symbol.for("react.profiler"),E0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),Oh=Symbol.for("react.suspense"),Bh=Symbol.for("react.suspense_list"),Sp=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),x0=Symbol.for("react.offscreen"),Ig=Symbol.iterator;function Pa(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,th;function Oa(t){if(th===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);th=e&&e[1]||""}return`
`+th+t}var nh=!1;function ih(t,e){if(!t||nh)return"";nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{nh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oa(t):""}function QS(t){switch(t.tag){case 5:return Oa(t.type);case 16:return Oa("Lazy");case 13:return Oa("Suspense");case 19:return Oa("SuspenseList");case 0:case 2:case 15:return t=ih(t.type,!1),t;case 11:return t=ih(t.type.render,!1),t;case 1:return t=ih(t.type,!0),t;default:return""}}function zh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yo:return"Fragment";case Zo:return"Portal";case Uh:return"Profiler";case wp:return"StrictMode";case Oh:return"Suspense";case Bh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w0:return(t.displayName||"Context")+".Consumer";case E0:return(t._context.displayName||"Context")+".Provider";case xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sp:return e=t.displayName||null,e!==null?e:zh(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return zh(t(e))}catch{}}return null}function XS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zh(e);case 8:return e===wp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jS(t){var e=S0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nu(t){t._valueTracker||(t._valueTracker=jS(t))}function I0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=S0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gh(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function C0(t,e){e=e.checked,e!=null&&Ep(t,"checked",e,!1)}function Hh(t,e){C0(t,e);var n=yr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qh(t,e.type,n):e.hasOwnProperty("defaultValue")&&qh(t,e.type,yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ag(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qh(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ba=Array.isArray;function us(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function $h(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Ba(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yr(n)}}function A0(t,e){var n=yr(e.value),i=yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mu,R0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mu=Mu||document.createElement("div"),Mu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eI=["Webkit","ms","Moz","O"];Object.keys(Ka).forEach(function(t){eI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ka[e]=Ka[t]})});function k0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ka.hasOwnProperty(t)&&Ka[t]?(""+e).trim():e+"px"}function N0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=k0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var tI=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kh(t,e){if(e){if(tI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Jh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zh=null;function Ip(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yh=null,cs=null,ds=null;function kg(t){if(t=Ul(t)){if(typeof Yh!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=gd(e),Yh(t.stateNode,t.type,e))}}function M0(t){cs?ds?ds.push(t):ds=[t]:cs=t}function L0(){if(cs){var t=cs,e=ds;if(ds=cs=null,kg(t),e)for(t=0;t<e.length;t++)kg(e[t])}}function D0(t,e){return t(e)}function b0(){}var rh=!1;function V0(t,e,n){if(rh)return t(e,n);rh=!0;try{return D0(t,e,n)}finally{rh=!1,(cs!==null||ds!==null)&&(b0(),L0())}}function ll(t,e){var n=t.stateNode;if(n===null)return null;var i=gd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Qh=!1;if(Ri)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Qh=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Qh=!1}function nI(t,e,n,i,r,o,a,u,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var Ja=!1,xc=null,Sc=!1,Xh=null,iI={onError:function(t){Ja=!0,xc=t}};function rI(t,e,n,i,r,o,a,u,d){Ja=!1,xc=null,nI.apply(iI,arguments)}function oI(t,e,n,i,r,o,a,u,d){if(rI.apply(this,arguments),Ja){if(Ja){var f=xc;Ja=!1,xc=null}else throw Error(ee(198));Sc||(Sc=!0,Xh=f)}}function lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ng(t){if(lo(t)!==t)throw Error(ee(188))}function sI(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ng(r),t;if(o===i)return Ng(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function U0(t){return t=sI(t),t!==null?O0(t):null}function O0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=O0(t);if(e!==null)return e;t=t.sibling}return null}var B0=fn.unstable_scheduleCallback,Mg=fn.unstable_cancelCallback,aI=fn.unstable_shouldYield,lI=fn.unstable_requestPaint,ct=fn.unstable_now,uI=fn.unstable_getCurrentPriorityLevel,Cp=fn.unstable_ImmediatePriority,z0=fn.unstable_UserBlockingPriority,Ic=fn.unstable_NormalPriority,cI=fn.unstable_LowPriority,G0=fn.unstable_IdlePriority,hd=null,oi=null;function dI(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(hd,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:pI,hI=Math.log,fI=Math.LN2;function pI(t){return t>>>=0,t===0?32:31-(hI(t)/fI|0)|0}var Lu=64,Du=4194304;function za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=za(u):(o&=a,o!==0&&(i=za(o)))}else a=n&~r,a!==0?i=za(a):o!==0&&(i=za(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-qn(e),r=1<<n,i|=t[n],e&=~r;return i}function mI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-qn(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=mI(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function jh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H0(){var t=Lu;return Lu<<=1,!(Lu&4194240)&&(Lu=64),t}function oh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function _I(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-qn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Ap(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-qn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ze=0;function q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $0,Pp,W0,K0,J0,ef=!1,bu=[],sr=null,ar=null,lr=null,ul=new Map,cl=new Map,er=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lg(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(e.pointerId)}}function ka(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Ul(e),e!==null&&Pp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function vI(t,e,n,i,r){switch(e){case"focusin":return sr=ka(sr,t,e,n,i,r),!0;case"dragenter":return ar=ka(ar,t,e,n,i,r),!0;case"mouseover":return lr=ka(lr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ul.set(o,ka(ul.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,cl.set(o,ka(cl.get(o)||null,t,e,n,i,r)),!0}return!1}function Z0(t){var e=Wr(t.target);if(e!==null){var n=lo(e);if(n!==null){if(e=n.tag,e===13){if(e=F0(n),e!==null){t.blockedOn=e,J0(t.priority,function(){W0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Zh=i,n.target.dispatchEvent(i),Zh=null}else return e=Ul(n),e!==null&&Pp(e),t.blockedOn=n,!1;e.shift()}return!0}function Dg(t,e,n){oc(t)&&n.delete(e)}function TI(){ef=!1,sr!==null&&oc(sr)&&(sr=null),ar!==null&&oc(ar)&&(ar=null),lr!==null&&oc(lr)&&(lr=null),ul.forEach(Dg),cl.forEach(Dg)}function Na(t,e){t.blockedOn===e&&(t.blockedOn=null,ef||(ef=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,TI)))}function dl(t){function e(r){return Na(r,t)}if(0<bu.length){Na(bu[0],t);for(var n=1;n<bu.length;n++){var i=bu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(sr!==null&&Na(sr,t),ar!==null&&Na(ar,t),lr!==null&&Na(lr,t),ul.forEach(e),cl.forEach(e),n=0;n<er.length;n++)i=er[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)Z0(n),n.blockedOn===null&&er.shift()}var hs=Fi.ReactCurrentBatchConfig,Ac=!0;function EI(t,e,n,i){var r=ze,o=hs.transition;hs.transition=null;try{ze=1,Rp(t,e,n,i)}finally{ze=r,hs.transition=o}}function wI(t,e,n,i){var r=ze,o=hs.transition;hs.transition=null;try{ze=4,Rp(t,e,n,i)}finally{ze=r,hs.transition=o}}function Rp(t,e,n,i){if(Ac){var r=tf(t,e,n,i);if(r===null)mh(t,e,i,Pc,n),Lg(t,i);else if(vI(r,t,e,n,i))i.stopPropagation();else if(Lg(t,i),e&4&&-1<yI.indexOf(t)){for(;r!==null;){var o=Ul(r);if(o!==null&&$0(o),o=tf(t,e,n,i),o===null&&mh(t,e,i,Pc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else mh(t,e,i,null,n)}}var Pc=null;function tf(t,e,n,i){if(Pc=null,t=Ip(i),t=Wr(t),t!==null)if(e=lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pc=t,null}function Y0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uI()){case Cp:return 1;case z0:return 4;case Ic:case cI:return 16;case G0:return 536870912;default:return 16}default:return 16}}var nr=null,kp=null,sc=null;function Q0(){if(sc)return sc;var t,e=kp,n=e.length,i,r="value"in nr?nr.value:nr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return sc=r.slice(t,1<i?1-i:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vu(){return!0}function bg(){return!1}function mn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vu:bg,this.isPropagationStopped=bg,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vu)},persist:function(){},isPersistent:Vu}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=mn(Vs),Fl=rt({},Vs,{view:0,detail:0}),xI=mn(Fl),sh,ah,Ma,fd=rt({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(sh=t.screenX-Ma.screenX,ah=t.screenY-Ma.screenY):ah=sh=0,Ma=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:ah}}),Vg=mn(fd),SI=rt({},fd,{dataTransfer:0}),II=mn(SI),CI=rt({},Fl,{relatedTarget:0}),lh=mn(CI),AI=rt({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),PI=mn(AI),RI=rt({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kI=mn(RI),NI=rt({},Vs,{data:0}),Fg=mn(NI),MI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DI[t])?!!e[t]:!1}function Mp(){return bI}var VI=rt({},Fl,{key:function(t){if(t.key){var e=MI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mp,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FI=mn(VI),UI=rt({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ug=mn(UI),OI=rt({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mp}),BI=mn(OI),zI=rt({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),GI=mn(zI),HI=rt({},fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qI=mn(HI),$I=[9,13,27,32],Lp=Ri&&"CompositionEvent"in window,Za=null;Ri&&"documentMode"in document&&(Za=document.documentMode);var WI=Ri&&"TextEvent"in window&&!Za,X0=Ri&&(!Lp||Za&&8<Za&&11>=Za),Og=" ",Bg=!1;function j0(t,e){switch(t){case"keyup":return $I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function KI(t,e){switch(t){case"compositionend":return eT(e);case"keypress":return e.which!==32?null:(Bg=!0,Og);case"textInput":return t=e.data,t===Og&&Bg?null:t;default:return null}}function JI(t,e){if(Qo)return t==="compositionend"||!Lp&&j0(t,e)?(t=Q0(),sc=kp=nr=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X0&&e.locale!=="ko"?null:e.data;default:return null}}var ZI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZI[t.type]:e==="textarea"}function tT(t,e,n,i){M0(i),e=Rc(e,"onChange"),0<e.length&&(n=new Np("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ya=null,hl=null;function YI(t){hT(t,0)}function pd(t){var e=es(t);if(I0(e))return t}function QI(t,e){if(t==="change")return e}var nT=!1;if(Ri){var uh;if(Ri){var ch="oninput"in document;if(!ch){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),ch=typeof Gg.oninput=="function"}uh=ch}else uh=!1;nT=uh&&(!document.documentMode||9<document.documentMode)}function Hg(){Ya&&(Ya.detachEvent("onpropertychange",iT),hl=Ya=null)}function iT(t){if(t.propertyName==="value"&&pd(hl)){var e=[];tT(e,hl,t,Ip(t)),V0(YI,e)}}function XI(t,e,n){t==="focusin"?(Hg(),Ya=e,hl=n,Ya.attachEvent("onpropertychange",iT)):t==="focusout"&&Hg()}function jI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pd(hl)}function eC(t,e){if(t==="click")return pd(e)}function tC(t,e){if(t==="input"||t==="change")return pd(e)}function nC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:nC;function fl(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Fh.call(e,r)||!Jn(t[r],e[r]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=qg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qg(n)}}function rT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oT(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function Dp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iC(t){var e=oT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rT(n.ownerDocument.documentElement,n)){if(i!==null&&Dp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=$g(n,o);var a=$g(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rC=Ri&&"documentMode"in document&&11>=document.documentMode,Xo=null,nf=null,Qa=null,rf=!1;function Wg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rf||Xo==null||Xo!==wc(i)||(i=Xo,"selectionStart"in i&&Dp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qa&&fl(Qa,i)||(Qa=i,i=Rc(nf,"onSelect"),0<i.length&&(e=new Np("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Xo)))}function Fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jo={animationend:Fu("Animation","AnimationEnd"),animationiteration:Fu("Animation","AnimationIteration"),animationstart:Fu("Animation","AnimationStart"),transitionend:Fu("Transition","TransitionEnd")},dh={},sT={};Ri&&(sT=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function md(t){if(dh[t])return dh[t];if(!jo[t])return t;var e=jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sT)return dh[t]=e[n];return t}var aT=md("animationend"),lT=md("animationiteration"),uT=md("animationstart"),cT=md("transitionend"),dT=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){dT.set(t,e),ao(e,[t])}for(var hh=0;hh<Kg.length;hh++){var fh=Kg[hh],oC=fh.toLowerCase(),sC=fh[0].toUpperCase()+fh.slice(1);Sr(oC,"on"+sC)}Sr(aT,"onAnimationEnd");Sr(lT,"onAnimationIteration");Sr(uT,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(cT,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function Jg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,oI(i,e,void 0,t),t.currentTarget=null}function hT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;Jg(r,u,f),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,f=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;Jg(r,u,f),o=d}}}if(Sc)throw t=Xh,Sc=!1,Xh=null,t}function Je(t,e){var n=e[uf];n===void 0&&(n=e[uf]=new Set);var i=t+"__bubble";n.has(i)||(fT(e,t,2,!1),n.add(i))}function ph(t,e,n){var i=0;e&&(i|=4),fT(n,t,i,e)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function pl(t){if(!t[Uu]){t[Uu]=!0,T0.forEach(function(n){n!=="selectionchange"&&(aC.has(n)||ph(n,!1,t),ph(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uu]||(e[Uu]=!0,ph("selectionchange",!1,e))}}function fT(t,e,n,i){switch(Y0(e)){case 1:var r=EI;break;case 4:r=wI;break;default:r=Rp}n=r.bind(null,e,n,t),r=void 0,!Qh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function mh(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Wr(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}V0(function(){var f=o,g=Ip(n),y=[];e:{var v=dT.get(t);if(v!==void 0){var S=Np,D=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":S=FI;break;case"focusin":D="focus",S=lh;break;case"focusout":D="blur",S=lh;break;case"beforeblur":case"afterblur":S=lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=BI;break;case aT:case lT:case uT:S=PI;break;case cT:S=GI;break;case"scroll":S=xI;break;case"wheel":S=qI;break;case"copy":case"cut":case"paste":S=kI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Ug}var b=(e&4)!==0,B=!b&&t==="scroll",R=b?v!==null?v+"Capture":null:v;b=[];for(var N=f,k;N!==null;){k=N;var H=k.stateNode;if(k.tag===5&&H!==null&&(k=H,R!==null&&(H=ll(N,R),H!=null&&b.push(ml(N,H,k)))),B)break;N=N.return}0<b.length&&(v=new S(v,D,null,n,g),y.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==Zh&&(D=n.relatedTarget||n.fromElement)&&(Wr(D)||D[ki]))break e;if((S||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,S?(D=n.relatedTarget||n.toElement,S=f,D=D?Wr(D):null,D!==null&&(B=lo(D),D!==B||D.tag!==5&&D.tag!==6)&&(D=null)):(S=null,D=f),S!==D)){if(b=Vg,H="onMouseLeave",R="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ug,H="onPointerLeave",R="onPointerEnter",N="pointer"),B=S==null?v:es(S),k=D==null?v:es(D),v=new b(H,N+"leave",S,n,g),v.target=B,v.relatedTarget=k,H=null,Wr(g)===f&&(b=new b(R,N+"enter",D,n,g),b.target=k,b.relatedTarget=B,H=b),B=H,S&&D)t:{for(b=S,R=D,N=0,k=b;k;k=qo(k))N++;for(k=0,H=R;H;H=qo(H))k++;for(;0<N-k;)b=qo(b),N--;for(;0<k-N;)R=qo(R),k--;for(;N--;){if(b===R||R!==null&&b===R.alternate)break t;b=qo(b),R=qo(R)}b=null}else b=null;S!==null&&Zg(y,v,S,b,!1),D!==null&&B!==null&&Zg(y,B,D,b,!0)}}e:{if(v=f?es(f):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var J=QI;else if(zg(v))if(nT)J=tC;else{J=jI;var Z=XI}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(J=eC);if(J&&(J=J(t,f))){tT(y,J,n,g);break e}Z&&Z(t,v,f),t==="focusout"&&(Z=v._wrapperState)&&Z.controlled&&v.type==="number"&&qh(v,"number",v.value)}switch(Z=f?es(f):window,t){case"focusin":(zg(Z)||Z.contentEditable==="true")&&(Xo=Z,nf=f,Qa=null);break;case"focusout":Qa=nf=Xo=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Wg(y,n,g);break;case"selectionchange":if(rC)break;case"keydown":case"keyup":Wg(y,n,g)}var V;if(Lp)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qo?j0(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(X0&&n.locale!=="ko"&&(Qo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qo&&(V=Q0()):(nr=g,kp="value"in nr?nr.value:nr.textContent,Qo=!0)),Z=Rc(f,C),0<Z.length&&(C=new Fg(C,t,null,n,g),y.push({event:C,listeners:Z}),V?C.data=V:(V=eT(n),V!==null&&(C.data=V)))),(V=WI?KI(t,n):JI(t,n))&&(f=Rc(f,"onBeforeInput"),0<f.length&&(g=new Fg("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:f}),g.data=V))}hT(y,e)})}function ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ll(t,n),o!=null&&i.unshift(ml(t,o,r)),o=ll(t,e),o!=null&&i.push(ml(t,o,r))),t=t.return}return i}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zg(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&f!==null&&(u=f,r?(d=ll(n,o),d!=null&&a.unshift(ml(n,d,u))):r||(d=ll(n,o),d!=null&&a.push(ml(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var lC=/\r\n?/g,uC=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(lC,`
`).replace(uC,"")}function Ou(t,e,n){if(e=Yg(e),Yg(t)!==e&&n)throw Error(ee(425))}function kc(){}var of=null,sf=null;function af(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,cC=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,dC=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(t){return Qg.resolve(null).then(t).catch(hC)}:lf;function hC(t){setTimeout(function(){throw t})}function gh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),dl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);dl(e)}function ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),ri="__reactFiber$"+Fs,gl="__reactProps$"+Fs,ki="__reactContainer$"+Fs,uf="__reactEvents$"+Fs,fC="__reactListeners$"+Fs,pC="__reactHandles$"+Fs;function Wr(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[ri])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function Ul(t){return t=t[ri]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function gd(t){return t[gl]||null}var cf=[],ts=-1;function Ir(t){return{current:t}}function Ze(t){0>ts||(t.current=cf[ts],cf[ts]=null,ts--)}function We(t,e){ts++,cf[ts]=t.current,t.current=e}var vr={},Ht=Ir(vr),rn=Ir(!1),jr=vr;function Es(t,e){var n=t.type.contextTypes;if(!n)return vr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function on(t){return t=t.childContextTypes,t!=null}function Nc(){Ze(rn),Ze(Ht)}function jg(t,e,n){if(Ht.current!==vr)throw Error(ee(168));We(Ht,e),We(rn,n)}function pT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,XS(t)||"Unknown",r));return rt({},n,i)}function Mc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,jr=Ht.current,We(Ht,t),We(rn,rn.current),!0}function e_(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=pT(t,e,jr),i.__reactInternalMemoizedMergedChildContext=t,Ze(rn),Ze(Ht),We(Ht,t)):Ze(rn),We(rn,n)}var Ii=null,_d=!1,_h=!1;function mT(t){Ii===null?Ii=[t]:Ii.push(t)}function mC(t){_d=!0,mT(t)}function Cr(){if(!_h&&Ii!==null){_h=!0;var t=0,e=ze;try{var n=Ii;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ii=null,_d=!1}catch(r){throw Ii!==null&&(Ii=Ii.slice(t+1)),B0(Cp,Cr),r}finally{ze=e,_h=!1}}return null}var ns=[],is=0,Lc=null,Dc=0,Sn=[],In=0,eo=null,Ci=1,Ai="";function Gr(t,e){ns[is++]=Dc,ns[is++]=Lc,Lc=t,Dc=e}function gT(t,e,n){Sn[In++]=Ci,Sn[In++]=Ai,Sn[In++]=eo,eo=t;var i=Ci;t=Ai;var r=32-qn(i)-1;i&=~(1<<r),n+=1;var o=32-qn(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ci=1<<32-qn(e)+r|n<<r|i,Ai=o+t}else Ci=1<<o|n<<r|i,Ai=t}function bp(t){t.return!==null&&(Gr(t,1),gT(t,1,0))}function Vp(t){for(;t===Lc;)Lc=ns[--is],ns[is]=null,Dc=ns[--is],ns[is]=null;for(;t===eo;)eo=Sn[--In],Sn[In]=null,Ai=Sn[--In],Sn[In]=null,Ci=Sn[--In],Sn[In]=null}var hn=null,dn=null,Xe=!1,Gn=null;function _T(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,dn=ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eo!==null?{id:Ci,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,dn=null,!0):!1;default:return!1}}function df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hf(t){if(Xe){var e=dn;if(e){var n=e;if(!t_(t,e)){if(df(t))throw Error(ee(418));e=ur(n.nextSibling);var i=hn;e&&t_(t,e)?_T(i,n):(t.flags=t.flags&-4097|2,Xe=!1,hn=t)}}else{if(df(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Xe=!1,hn=t}}}function n_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Bu(t){if(t!==hn)return!1;if(!Xe)return n_(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!af(t.type,t.memoizedProps)),e&&(e=dn)){if(df(t))throw yT(),Error(ee(418));for(;e;)_T(t,e),e=ur(e.nextSibling)}if(n_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=hn?ur(t.stateNode.nextSibling):null;return!0}function yT(){for(var t=dn;t;)t=ur(t.nextSibling)}function ws(){dn=hn=null,Xe=!1}function Fp(t){Gn===null?Gn=[t]:Gn.push(t)}var gC=Fi.ReactCurrentBatchConfig;function La(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function zu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i_(t){var e=t._init;return e(t._payload)}function vT(t){function e(R,N){if(t){var k=R.deletions;k===null?(R.deletions=[N],R.flags|=16):k.push(N)}}function n(R,N){if(!t)return null;for(;N!==null;)e(R,N),N=N.sibling;return null}function i(R,N){for(R=new Map;N!==null;)N.key!==null?R.set(N.key,N):R.set(N.index,N),N=N.sibling;return R}function r(R,N){return R=fr(R,N),R.index=0,R.sibling=null,R}function o(R,N,k){return R.index=k,t?(k=R.alternate,k!==null?(k=k.index,k<N?(R.flags|=2,N):k):(R.flags|=2,N)):(R.flags|=1048576,N)}function a(R){return t&&R.alternate===null&&(R.flags|=2),R}function u(R,N,k,H){return N===null||N.tag!==6?(N=Sh(k,R.mode,H),N.return=R,N):(N=r(N,k),N.return=R,N)}function d(R,N,k,H){var J=k.type;return J===Yo?g(R,N,k.props.children,H,k.key):N!==null&&(N.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Xi&&i_(J)===N.type)?(H=r(N,k.props),H.ref=La(R,N,k),H.return=R,H):(H=pc(k.type,k.key,k.props,null,R.mode,H),H.ref=La(R,N,k),H.return=R,H)}function f(R,N,k,H){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=Ih(k,R.mode,H),N.return=R,N):(N=r(N,k.children||[]),N.return=R,N)}function g(R,N,k,H,J){return N===null||N.tag!==7?(N=Qr(k,R.mode,H,J),N.return=R,N):(N=r(N,k),N.return=R,N)}function y(R,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Sh(""+N,R.mode,k),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ku:return k=pc(N.type,N.key,N.props,null,R.mode,k),k.ref=La(R,null,N),k.return=R,k;case Zo:return N=Ih(N,R.mode,k),N.return=R,N;case Xi:var H=N._init;return y(R,H(N._payload),k)}if(Ba(N)||Pa(N))return N=Qr(N,R.mode,k,null),N.return=R,N;zu(R,N)}return null}function v(R,N,k,H){var J=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return J!==null?null:u(R,N,""+k,H);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ku:return k.key===J?d(R,N,k,H):null;case Zo:return k.key===J?f(R,N,k,H):null;case Xi:return J=k._init,v(R,N,J(k._payload),H)}if(Ba(k)||Pa(k))return J!==null?null:g(R,N,k,H,null);zu(R,k)}return null}function S(R,N,k,H,J){if(typeof H=="string"&&H!==""||typeof H=="number")return R=R.get(k)||null,u(N,R,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ku:return R=R.get(H.key===null?k:H.key)||null,d(N,R,H,J);case Zo:return R=R.get(H.key===null?k:H.key)||null,f(N,R,H,J);case Xi:var Z=H._init;return S(R,N,k,Z(H._payload),J)}if(Ba(H)||Pa(H))return R=R.get(k)||null,g(N,R,H,J,null);zu(N,H)}return null}function D(R,N,k,H){for(var J=null,Z=null,V=N,C=N=0,P=null;V!==null&&C<k.length;C++){V.index>C?(P=V,V=null):P=V.sibling;var U=v(R,V,k[C],H);if(U===null){V===null&&(V=P);break}t&&V&&U.alternate===null&&e(R,V),N=o(U,N,C),Z===null?J=U:Z.sibling=U,Z=U,V=P}if(C===k.length)return n(R,V),Xe&&Gr(R,C),J;if(V===null){for(;C<k.length;C++)V=y(R,k[C],H),V!==null&&(N=o(V,N,C),Z===null?J=V:Z.sibling=V,Z=V);return Xe&&Gr(R,C),J}for(V=i(R,V);C<k.length;C++)P=S(V,R,C,k[C],H),P!==null&&(t&&P.alternate!==null&&V.delete(P.key===null?C:P.key),N=o(P,N,C),Z===null?J=P:Z.sibling=P,Z=P);return t&&V.forEach(function(O){return e(R,O)}),Xe&&Gr(R,C),J}function b(R,N,k,H){var J=Pa(k);if(typeof J!="function")throw Error(ee(150));if(k=J.call(k),k==null)throw Error(ee(151));for(var Z=J=null,V=N,C=N=0,P=null,U=k.next();V!==null&&!U.done;C++,U=k.next()){V.index>C?(P=V,V=null):P=V.sibling;var O=v(R,V,U.value,H);if(O===null){V===null&&(V=P);break}t&&V&&O.alternate===null&&e(R,V),N=o(O,N,C),Z===null?J=O:Z.sibling=O,Z=O,V=P}if(U.done)return n(R,V),Xe&&Gr(R,C),J;if(V===null){for(;!U.done;C++,U=k.next())U=y(R,U.value,H),U!==null&&(N=o(U,N,C),Z===null?J=U:Z.sibling=U,Z=U);return Xe&&Gr(R,C),J}for(V=i(R,V);!U.done;C++,U=k.next())U=S(V,R,C,U.value,H),U!==null&&(t&&U.alternate!==null&&V.delete(U.key===null?C:U.key),N=o(U,N,C),Z===null?J=U:Z.sibling=U,Z=U);return t&&V.forEach(function(F){return e(R,F)}),Xe&&Gr(R,C),J}function B(R,N,k,H){if(typeof k=="object"&&k!==null&&k.type===Yo&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case ku:e:{for(var J=k.key,Z=N;Z!==null;){if(Z.key===J){if(J=k.type,J===Yo){if(Z.tag===7){n(R,Z.sibling),N=r(Z,k.props.children),N.return=R,R=N;break e}}else if(Z.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Xi&&i_(J)===Z.type){n(R,Z.sibling),N=r(Z,k.props),N.ref=La(R,Z,k),N.return=R,R=N;break e}n(R,Z);break}else e(R,Z);Z=Z.sibling}k.type===Yo?(N=Qr(k.props.children,R.mode,H,k.key),N.return=R,R=N):(H=pc(k.type,k.key,k.props,null,R.mode,H),H.ref=La(R,N,k),H.return=R,R=H)}return a(R);case Zo:e:{for(Z=k.key;N!==null;){if(N.key===Z)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){n(R,N.sibling),N=r(N,k.children||[]),N.return=R,R=N;break e}else{n(R,N);break}else e(R,N);N=N.sibling}N=Ih(k,R.mode,H),N.return=R,R=N}return a(R);case Xi:return Z=k._init,B(R,N,Z(k._payload),H)}if(Ba(k))return D(R,N,k,H);if(Pa(k))return b(R,N,k,H);zu(R,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,N!==null&&N.tag===6?(n(R,N.sibling),N=r(N,k),N.return=R,R=N):(n(R,N),N=Sh(k,R.mode,H),N.return=R,R=N),a(R)):n(R,N)}return B}var xs=vT(!0),TT=vT(!1),bc=Ir(null),Vc=null,rs=null,Up=null;function Op(){Up=rs=Vc=null}function Bp(t){var e=bc.current;Ze(bc),t._currentValue=e}function ff(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function fs(t,e){Vc=t,Up=rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(Up!==t)if(t={context:t,memoizedValue:e,next:null},rs===null){if(Vc===null)throw Error(ee(308));rs=t,Vc.dependencies={lanes:0,firstContext:t}}else rs=rs.next=t;return e}var Kr=null;function zp(t){Kr===null?Kr=[t]:Kr.push(t)}function ET(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,zp(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ni(t,i)}function Ni(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ji=!1;function Gp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ni(t,n)}return r=i.interleaved,r===null?(e.next=e,zp(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ni(t,n)}function lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ap(t,n)}}function r_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fc(t,e,n,i){var r=t.updateQueue;ji=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,f=d.next;d.next=null,a===null?o=f:a.next=f,a=d;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;a=0,g=f=d=null,u=o;do{var v=u.lane,S=u.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var D=t,b=u;switch(v=e,S=n,b.tag){case 1:if(D=b.payload,typeof D=="function"){y=D.call(S,y,v);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=b.payload,v=typeof D=="function"?D.call(S,y,v):D,v==null)break e;y=rt({},y,v);break e;case 2:ji=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=S,d=y):g=g.next=S,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(g===null&&(d=y),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);no|=a,t.lanes=a,t.memoizedState=y}}function o_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var Ol={},si=Ir(Ol),_l=Ir(Ol),yl=Ir(Ol);function Jr(t){if(t===Ol)throw Error(ee(174));return t}function Hp(t,e){switch(We(yl,e),We(_l,t),We(si,Ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wh(e,t)}Ze(si),We(si,e)}function Ss(){Ze(si),Ze(_l),Ze(yl)}function xT(t){Jr(yl.current);var e=Jr(si.current),n=Wh(e,t.type);e!==n&&(We(_l,t),We(si,n))}function qp(t){_l.current===t&&(Ze(si),Ze(_l))}var nt=Ir(0);function Uc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yh=[];function $p(){for(var t=0;t<yh.length;t++)yh[t]._workInProgressVersionPrimary=null;yh.length=0}var uc=Fi.ReactCurrentDispatcher,vh=Fi.ReactCurrentBatchConfig,to=0,it=null,_t=null,It=null,Oc=!1,Xa=!1,vl=0,_C=0;function Vt(){throw Error(ee(321))}function Wp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function Kp(t,e,n,i,r,o){if(to=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uc.current=t===null||t.memoizedState===null?EC:wC,t=n(i,r),Xa){o=0;do{if(Xa=!1,vl=0,25<=o)throw Error(ee(301));o+=1,It=_t=null,e.updateQueue=null,uc.current=xC,t=n(i,r)}while(Xa)}if(uc.current=Bc,e=_t!==null&&_t.next!==null,to=0,It=_t=it=null,Oc=!1,e)throw Error(ee(300));return t}function Jp(){var t=vl!==0;return vl=0,t}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?it.memoizedState=It=t:It=It.next=t,It}function Mn(){if(_t===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=It===null?it.memoizedState:It.next;if(e!==null)It=e,_t=t;else{if(t===null)throw Error(ee(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},It===null?it.memoizedState=It=t:It=It.next=t}return It}function Tl(t,e){return typeof e=="function"?e(t):e}function Th(t){var e=Mn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,f=o;do{var g=f.lane;if((to&g)===g)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var y={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=y,a=i):d=d.next=y,it.lanes|=g,no|=g}f=f.next}while(f!==null&&f!==o);d===null?a=i:d.next=u,Jn(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,it.lanes|=o,no|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Eh(t){var e=Mn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Jn(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ST(){}function IT(t,e){var n=it,i=Mn(),r=e(),o=!Jn(i.memoizedState,r);if(o&&(i.memoizedState=r,nn=!0),i=i.queue,Zp(PT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,El(9,AT.bind(null,n,i,r,e),void 0,null),Ct===null)throw Error(ee(349));to&30||CT(n,e,r)}return r}function CT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AT(t,e,n,i){e.value=n,e.getSnapshot=i,RT(e)&&kT(t)}function PT(t,e,n){return n(function(){RT(e)&&kT(t)})}function RT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function kT(t){var e=Ni(t,1);e!==null&&$n(e,t,1,-1)}function s_(t){var e=ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:t},e.queue=t,t=t.dispatch=TC.bind(null,it,t),[e.memoizedState,t]}function El(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function NT(){return Mn().memoizedState}function cc(t,e,n,i){var r=ni();it.flags|=t,r.memoizedState=El(1|e,n,void 0,i===void 0?null:i)}function yd(t,e,n,i){var r=Mn();i=i===void 0?null:i;var o=void 0;if(_t!==null){var a=_t.memoizedState;if(o=a.destroy,i!==null&&Wp(i,a.deps)){r.memoizedState=El(e,n,o,i);return}}it.flags|=t,r.memoizedState=El(1|e,n,o,i)}function a_(t,e){return cc(8390656,8,t,e)}function Zp(t,e){return yd(2048,8,t,e)}function MT(t,e){return yd(4,2,t,e)}function LT(t,e){return yd(4,4,t,e)}function DT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bT(t,e,n){return n=n!=null?n.concat([t]):null,yd(4,4,DT.bind(null,e,t),n)}function Yp(){}function VT(t,e){var n=Mn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Wp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function FT(t,e){var n=Mn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Wp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function UT(t,e,n){return to&21?(Jn(n,e)||(n=H0(),it.lanes|=n,no|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function yC(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=vh.transition;vh.transition={};try{t(!1),e()}finally{ze=n,vh.transition=i}}function OT(){return Mn().memoizedState}function vC(t,e,n){var i=hr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BT(t))zT(e,n);else if(n=ET(t,e,n,i),n!==null){var r=Jt();$n(n,t,i,r),GT(n,e,i)}}function TC(t,e,n){var i=hr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BT(t))zT(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Jn(u,a)){var d=e.interleaved;d===null?(r.next=r,zp(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=ET(t,e,r,i),n!==null&&(r=Jt(),$n(n,t,i,r),GT(n,e,i))}}function BT(t){var e=t.alternate;return t===it||e!==null&&e===it}function zT(t,e){Xa=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ap(t,n)}}var Bc={readContext:Nn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},EC={readContext:Nn,useCallback:function(t,e){return ni().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:a_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cc(4194308,4,DT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return cc(4,2,t,e)},useMemo:function(t,e){var n=ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ni();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=vC.bind(null,it,t),[i.memoizedState,t]},useRef:function(t){var e=ni();return t={current:t},e.memoizedState=t},useState:s_,useDebugValue:Yp,useDeferredValue:function(t){return ni().memoizedState=t},useTransition:function(){var t=s_(!1),e=t[0];return t=yC.bind(null,t[1]),ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=it,r=ni();if(Xe){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Ct===null)throw Error(ee(349));to&30||CT(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,a_(PT.bind(null,i,o,t),[t]),i.flags|=2048,El(9,AT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ni(),e=Ct.identifierPrefix;if(Xe){var n=Ai,i=Ci;n=(i&~(1<<32-qn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_C++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wC={readContext:Nn,useCallback:VT,useContext:Nn,useEffect:Zp,useImperativeHandle:bT,useInsertionEffect:MT,useLayoutEffect:LT,useMemo:FT,useReducer:Th,useRef:NT,useState:function(){return Th(Tl)},useDebugValue:Yp,useDeferredValue:function(t){var e=Mn();return UT(e,_t.memoizedState,t)},useTransition:function(){var t=Th(Tl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:ST,useSyncExternalStore:IT,useId:OT,unstable_isNewReconciler:!1},xC={readContext:Nn,useCallback:VT,useContext:Nn,useEffect:Zp,useImperativeHandle:bT,useInsertionEffect:MT,useLayoutEffect:LT,useMemo:FT,useReducer:Eh,useRef:NT,useState:function(){return Eh(Tl)},useDebugValue:Yp,useDeferredValue:function(t){var e=Mn();return _t===null?e.memoizedState=t:UT(e,_t.memoizedState,t)},useTransition:function(){var t=Eh(Tl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:ST,useSyncExternalStore:IT,useId:OT,unstable_isNewReconciler:!1};function Bn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vd={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=hr(t),o=Pi(i,r);o.payload=e,n!=null&&(o.callback=n),e=cr(t,o,r),e!==null&&($n(e,t,r,i),lc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=hr(t),o=Pi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=cr(t,o,r),e!==null&&($n(e,t,r,i),lc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=hr(t),r=Pi(n,i);r.tag=2,e!=null&&(r.callback=e),e=cr(t,r,i),e!==null&&($n(e,t,i,n),lc(e,t,i))}};function l_(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!fl(n,i)||!fl(r,o):!0}function HT(t,e,n){var i=!1,r=vr,o=e.contextType;return typeof o=="object"&&o!==null?o=Nn(o):(r=on(e)?jr:Ht.current,i=e.contextTypes,o=(i=i!=null)?Es(t,r):vr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function u_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vd.enqueueReplaceState(e,e.state,null)}function mf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Gp(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Nn(o):(o=on(e)?jr:Ht.current,r.context=Es(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&vd.enqueueReplaceState(r,r.state,null),Fc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Is(t,e){try{var n="",i=e;do n+=QS(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SC=typeof WeakMap=="function"?WeakMap:Map;function qT(t,e,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Gc||(Gc=!0,Cf=i),gf(t,e)},n}function $T(t,e,n){n=Pi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){gf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){gf(t,e),typeof i!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function c_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new SC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=UC.bind(null,t,e,n),e.then(t,t))}function d_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pi(-1,1),e.tag=2,cr(n,e,1))),n.lanes|=1),t)}var IC=Fi.ReactCurrentOwner,nn=!1;function Kt(t,e,n,i){e.child=t===null?TT(e,null,n,i):xs(e,t.child,n,i)}function f_(t,e,n,i,r){n=n.render;var o=e.ref;return fs(e,r),i=Kp(t,e,n,i,o,r),n=Jp(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Mi(t,e,r)):(Xe&&n&&bp(e),e.flags|=1,Kt(t,e,i,r),e.child)}function p_(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!rm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,WT(t,e,o,i,r)):(t=pc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(a,i)&&t.ref===e.ref)return Mi(t,e,r)}return e.flags|=1,t=fr(o,i),t.ref=e.ref,t.return=e,e.child=t}function WT(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(fl(o,i)&&t.ref===e.ref)if(nn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Mi(t,e,r)}return _f(t,e,n,i,r)}function KT(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ss,cn),cn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(ss,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,We(ss,cn),cn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,We(ss,cn),cn|=i;return Kt(t,e,r,n),e.child}function JT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _f(t,e,n,i,r){var o=on(n)?jr:Ht.current;return o=Es(e,o),fs(e,r),n=Kp(t,e,n,i,o,r),i=Jp(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Mi(t,e,r)):(Xe&&i&&bp(e),e.flags|=1,Kt(t,e,n,r),e.child)}function m_(t,e,n,i,r){if(on(n)){var o=!0;Mc(e)}else o=!1;if(fs(e,r),e.stateNode===null)dc(t,e),HT(e,n,i),mf(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Nn(f):(f=on(n)?jr:Ht.current,f=Es(e,f));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==f)&&u_(e,a,i,f),ji=!1;var v=e.memoizedState;a.state=v,Fc(e,i,a,r),d=e.memoizedState,u!==i||v!==d||rn.current||ji?(typeof g=="function"&&(pf(e,n,g,i),d=e.memoizedState),(u=ji||l_(e,n,u,i,v,d,f))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,wT(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Bn(e.type,u),a.props=f,y=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Nn(d):(d=on(n)?jr:Ht.current,d=Es(e,d));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||v!==d)&&u_(e,a,i,d),ji=!1,v=e.memoizedState,a.state=v,Fc(e,i,a,r);var D=e.memoizedState;u!==y||v!==D||rn.current||ji?(typeof S=="function"&&(pf(e,n,S,i),D=e.memoizedState),(f=ji||l_(e,n,f,i,v,D,d)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,D,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,D,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),a.props=i,a.state=D,a.context=d,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return yf(t,e,n,i,o,r)}function yf(t,e,n,i,r,o){JT(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&e_(e,n,!1),Mi(t,e,o);i=e.stateNode,IC.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=xs(e,t.child,null,o),e.child=xs(e,null,u,o)):Kt(t,e,u,o),e.memoizedState=i.state,r&&e_(e,n,!0),e.child}function ZT(t){var e=t.stateNode;e.pendingContext?jg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jg(t,e.context,!1),Hp(t,e.containerInfo)}function g_(t,e,n,i,r){return ws(),Fp(r),e.flags|=256,Kt(t,e,n,i),e.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function Tf(t){return{baseLanes:t,cachePool:null,transitions:null}}function YT(t,e,n){var i=e.pendingProps,r=nt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),We(nt,r&1),t===null)return hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=wd(a,i,0,null),t=Qr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Tf(n),e.memoizedState=vf,t):Qp(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return CC(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=fr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=fr(u,o):(o=Qr(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Tf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=vf,i}return o=t.child,t=o.sibling,i=fr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Qp(t,e){return e=wd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gu(t,e,n,i){return i!==null&&Fp(i),xs(e,t.child,null,n),t=Qp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CC(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=wh(Error(ee(422))),Gu(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=wd({mode:"visible",children:i.children},r,0,null),o=Qr(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&xs(e,t.child,null,a),e.child.memoizedState=Tf(a),e.memoizedState=vf,o);if(!(e.mode&1))return Gu(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=wh(o,i,void 0),Gu(t,e,a,i)}if(u=(a&t.childLanes)!==0,nn||u){if(i=Ct,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ni(t,r),$n(i,t,r,-1))}return im(),i=wh(Error(ee(421))),Gu(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=OC.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,dn=ur(r.nextSibling),hn=e,Xe=!0,Gn=null,t!==null&&(Sn[In++]=Ci,Sn[In++]=Ai,Sn[In++]=eo,Ci=t.id,Ai=t.overflow,eo=e),e=Qp(e,i.children),e.flags|=4096,e)}function __(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ff(t.return,e,n)}function xh(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function QT(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Kt(t,e,i.children,n),i=nt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&__(t,n,e);else if(t.tag===19)__(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(We(nt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Uc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),xh(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Uc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}xh(e,!0,n,null,o);break;case"together":xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AC(t,e,n){switch(e.tag){case 3:ZT(e),ws();break;case 5:xT(e);break;case 1:on(e.type)&&Mc(e);break;case 4:Hp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;We(bc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(We(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?YT(t,e,n):(We(nt,nt.current&1),t=Mi(t,e,n),t!==null?t.sibling:null);We(nt,nt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return QT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),We(nt,nt.current),i)break;return null;case 22:case 23:return e.lanes=0,KT(t,e,n)}return Mi(t,e,n)}var XT,Ef,jT,eE;XT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ef=function(){};jT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Jr(si.current);var o=null;switch(n){case"input":r=Gh(t,r),i=Gh(t,i),o=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),o=[];break;case"textarea":r=$h(t,r),i=$h(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=kc)}Kh(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(sl.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var d=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(sl.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Je("scroll",t),o||u===d||(o=[])):(o=o||[]).push(f,d))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};eE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Da(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function PC(t,e,n){var i=e.pendingProps;switch(Vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return on(e.type)&&Nc(),Ft(e),null;case 3:return i=e.stateNode,Ss(),Ze(rn),Ze(Ht),$p(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(Rf(Gn),Gn=null))),Ef(t,e),Ft(e),null;case 5:qp(e);var r=Jr(yl.current);if(n=e.type,t!==null&&e.stateNode!=null)jT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Ft(e),null}if(t=Jr(si.current),Bu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ri]=e,i[gl]=o,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(r=0;r<Ga.length;r++)Je(Ga[r],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Cg(i,o),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Je("invalid",i);break;case"textarea":Pg(i,o),Je("invalid",i)}Kh(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Ou(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Ou(i.textContent,u,t),r=["children",""+u]):sl.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Je("scroll",i)}switch(n){case"input":Nu(i),Ag(i,o,!0);break;case"textarea":Nu(i),Rg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=kc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ri]=e,t[gl]=i,XT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Jh(n,i),n){case"dialog":Je("cancel",t),Je("close",t),r=i;break;case"iframe":case"object":case"embed":Je("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ga.length;r++)Je(Ga[r],t);r=i;break;case"source":Je("error",t),r=i;break;case"img":case"image":case"link":Je("error",t),Je("load",t),r=i;break;case"details":Je("toggle",t),r=i;break;case"input":Cg(t,i),r=Gh(t,i),Je("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Je("invalid",t);break;case"textarea":Pg(t,i),r=$h(t,i),Je("invalid",t);break;default:r=i}Kh(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?N0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&R0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&al(t,d):typeof d=="number"&&al(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(sl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Je("scroll",t):d!=null&&Ep(t,o,d,a))}switch(n){case"input":Nu(t),Ag(t,i,!1);break;case"textarea":Nu(t),Rg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+yr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?us(t,!!i.multiple,o,!1):i.defaultValue!=null&&us(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=kc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)eE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Jr(yl.current),Jr(si.current),Bu(e)){if(i=e.stateNode,n=e.memoizedProps,i[ri]=e,(o=i.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Ou(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ou(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ri]=e,e.stateNode=i}return Ft(e),null;case 13:if(Ze(nt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&dn!==null&&e.mode&1&&!(e.flags&128))yT(),ws(),e.flags|=98560,o=!1;else if(o=Bu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[ri]=e}else ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),o=!1}else Gn!==null&&(Rf(Gn),Gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?vt===0&&(vt=3):im())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Ss(),Ef(t,e),t===null&&pl(e.stateNode.containerInfo),Ft(e),null;case 10:return Bp(e.type._context),Ft(e),null;case 17:return on(e.type)&&Nc(),Ft(e),null;case 19:if(Ze(nt),o=e.memoizedState,o===null)return Ft(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Da(o,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Uc(t),a!==null){for(e.flags|=128,Da(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(nt,nt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ct()>Cs&&(e.flags|=128,i=!0,Da(o,!1),e.lanes=4194304)}else{if(!i)if(t=Uc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Da(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Ft(e),null}else 2*ct()-o.renderingStartTime>Cs&&n!==1073741824&&(e.flags|=128,i=!0,Da(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ct(),e.sibling=null,n=nt.current,We(nt,i?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return nm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?cn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function RC(t,e){switch(Vp(e),e.tag){case 1:return on(e.type)&&Nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ss(),Ze(rn),Ze(Ht),$p(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qp(e),null;case 13:if(Ze(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(nt),null;case 4:return Ss(),null;case 10:return Bp(e.type._context),null;case 22:case 23:return nm(),null;case 24:return null;default:return null}}var Hu=!1,Bt=!1,kC=typeof WeakSet=="function"?WeakSet:Set,oe=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function wf(t,e,n){try{n()}catch(i){at(t,e,i)}}var y_=!1;function NC(t,e){if(of=Ac,t=oT(),Dp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,f=0,g=0,y=t,v=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(d=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++g===i&&(d=a),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:t,selectionRange:n},Ac=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var b=D.memoizedProps,B=D.memoizedState,R=e.stateNode,N=R.getSnapshotBeforeUpdate(e.elementType===e.type?b:Bn(e.type,b),B);R.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(H){at(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return D=y_,y_=!1,D}function ja(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&wf(e,n,o)}r=r.next}while(r!==i)}}function Td(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function xf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tE(t){var e=t.alternate;e!==null&&(t.alternate=null,tE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[gl],delete e[uf],delete e[fC],delete e[pC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nE(t){return t.tag===5||t.tag===3||t.tag===4}function v_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kc));else if(i!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}function If(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(If(t,e,n),t=t.sibling;t!==null;)If(t,e,n),t=t.sibling}var Rt=null,zn=!1;function Qi(t,e,n){for(n=n.child;n!==null;)iE(t,e,n),n=n.sibling}function iE(t,e,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(hd,n)}catch{}switch(n.tag){case 5:Bt||os(n,e);case 6:var i=Rt,r=zn;Rt=null,Qi(t,e,n),Rt=i,zn=r,Rt!==null&&(zn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(zn?(t=Rt,n=n.stateNode,t.nodeType===8?gh(t.parentNode,n):t.nodeType===1&&gh(t,n),dl(t)):gh(Rt,n.stateNode));break;case 4:i=Rt,r=zn,Rt=n.stateNode.containerInfo,zn=!0,Qi(t,e,n),Rt=i,zn=r;break;case 0:case 11:case 14:case 15:if(!Bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&wf(n,e,a),r=r.next}while(r!==i)}Qi(t,e,n);break;case 1:if(!Bt&&(os(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Qi(t,e,n);break;case 21:Qi(t,e,n);break;case 22:n.mode&1?(Bt=(i=Bt)||n.memoizedState!==null,Qi(t,e,n),Bt=i):Qi(t,e,n);break;default:Qi(t,e,n)}}function T_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kC),e.forEach(function(i){var r=BC.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Rt=u.stateNode,zn=!1;break e;case 3:Rt=u.stateNode.containerInfo,zn=!0;break e;case 4:Rt=u.stateNode.containerInfo,zn=!0;break e}u=u.return}if(Rt===null)throw Error(ee(160));iE(o,a,r),Rt=null,zn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rE(e,t),e=e.sibling}function rE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),ti(t),i&4){try{ja(3,t,t.return),Td(3,t)}catch(b){at(t,t.return,b)}try{ja(5,t,t.return)}catch(b){at(t,t.return,b)}}break;case 1:On(e,t),ti(t),i&512&&n!==null&&os(n,n.return);break;case 5:if(On(e,t),ti(t),i&512&&n!==null&&os(n,n.return),t.flags&32){var r=t.stateNode;try{al(r,"")}catch(b){at(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&C0(r,o),Jh(u,a);var f=Jh(u,o);for(a=0;a<d.length;a+=2){var g=d[a],y=d[a+1];g==="style"?N0(r,y):g==="dangerouslySetInnerHTML"?R0(r,y):g==="children"?al(r,y):Ep(r,g,y,f)}switch(u){case"input":Hh(r,o);break;case"textarea":A0(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?us(r,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?us(r,!!o.multiple,o.defaultValue,!0):us(r,!!o.multiple,o.multiple?[]:"",!1))}r[gl]=o}catch(b){at(t,t.return,b)}}break;case 6:if(On(e,t),ti(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){at(t,t.return,b)}}break;case 3:if(On(e,t),ti(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{dl(e.containerInfo)}catch(b){at(t,t.return,b)}break;case 4:On(e,t),ti(t);break;case 13:On(e,t),ti(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(em=ct())),i&4&&T_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(f=Bt)||g,On(e,t),Bt=f):On(e,t),ti(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(oe=t,g=t.child;g!==null;){for(y=oe=g;oe!==null;){switch(v=oe,S=v.child,v.tag){case 0:case 11:case 14:case 15:ja(4,v,v.return);break;case 1:os(v,v.return);var D=v.stateNode;if(typeof D.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(b){at(i,n,b)}}break;case 5:os(v,v.return);break;case 22:if(v.memoizedState!==null){w_(y);continue}}S!==null?(S.return=v,oe=S):w_(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{r=y.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=k0("display",a))}catch(b){at(t,t.return,b)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(b){at(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:On(e,t),ti(t),i&4&&T_(t);break;case 21:break;default:On(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nE(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(al(r,""),i.flags&=-33);var o=v_(t);If(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=v_(t);Sf(t,u,a);break;default:throw Error(ee(161))}}catch(d){at(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MC(t,e,n){oe=t,oE(t)}function oE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Hu;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||Bt;u=Hu;var f=Bt;if(Hu=a,(Bt=d)&&!f)for(oe=r;oe!==null;)a=oe,d=a.child,a.tag===22&&a.memoizedState!==null?x_(r):d!==null?(d.return=a,oe=d):x_(r);for(;o!==null;)oe=o,oE(o),o=o.sibling;oe=r,Hu=u,Bt=f}E_(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):E_(t)}}function E_(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Td(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&o_(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o_(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&dl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Bt||e.flags&512&&xf(e)}catch(v){at(e,e.return,v)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function w_(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function x_(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Td(4,e)}catch(d){at(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){at(e,r,d)}}var o=e.return;try{xf(e)}catch(d){at(e,o,d)}break;case 5:var a=e.return;try{xf(e)}catch(d){at(e,a,d)}}}catch(d){at(e,e.return,d)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var LC=Math.ceil,zc=Fi.ReactCurrentDispatcher,Xp=Fi.ReactCurrentOwner,Pn=Fi.ReactCurrentBatchConfig,be=0,Ct=null,mt=null,Mt=0,cn=0,ss=Ir(0),vt=0,wl=null,no=0,Ed=0,jp=0,el=null,tn=null,em=0,Cs=1/0,Si=null,Gc=!1,Cf=null,dr=null,qu=!1,ir=null,Hc=0,tl=0,Af=null,hc=-1,fc=0;function Jt(){return be&6?ct():hc!==-1?hc:hc=ct()}function hr(t){return t.mode&1?be&2&&Mt!==0?Mt&-Mt:gC.transition!==null?(fc===0&&(fc=H0()),fc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Y0(t.type)),t):1}function $n(t,e,n,i){if(50<tl)throw tl=0,Af=null,Error(ee(185));Vl(t,n,i),(!(be&2)||t!==Ct)&&(t===Ct&&(!(be&2)&&(Ed|=n),vt===4&&tr(t,Mt)),sn(t,i),n===1&&be===0&&!(e.mode&1)&&(Cs=ct()+500,_d&&Cr()))}function sn(t,e){var n=t.callbackNode;gI(t,e);var i=Cc(t,t===Ct?Mt:0);if(i===0)n!==null&&Mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Mg(n),e===1)t.tag===0?mC(S_.bind(null,t)):mT(S_.bind(null,t)),dC(function(){!(be&6)&&Cr()}),n=null;else{switch(q0(i)){case 1:n=Cp;break;case 4:n=z0;break;case 16:n=Ic;break;case 536870912:n=G0;break;default:n=Ic}n=fE(n,sE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sE(t,e){if(hc=-1,fc=0,be&6)throw Error(ee(327));var n=t.callbackNode;if(ps()&&t.callbackNode!==n)return null;var i=Cc(t,t===Ct?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=qc(t,i);else{e=i;var r=be;be|=2;var o=lE();(Ct!==t||Mt!==e)&&(Si=null,Cs=ct()+500,Yr(t,e));do try{VC();break}catch(u){aE(t,u)}while(!0);Op(),zc.current=o,be=r,mt!==null?e=0:(Ct=null,Mt=0,e=vt)}if(e!==0){if(e===2&&(r=jh(t),r!==0&&(i=r,e=Pf(t,r))),e===1)throw n=wl,Yr(t,0),tr(t,i),sn(t,ct()),n;if(e===6)tr(t,i);else{if(r=t.current.alternate,!(i&30)&&!DC(r)&&(e=qc(t,i),e===2&&(o=jh(t),o!==0&&(i=o,e=Pf(t,o))),e===1))throw n=wl,Yr(t,0),tr(t,i),sn(t,ct()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Hr(t,tn,Si);break;case 3:if(tr(t,i),(i&130023424)===i&&(e=em+500-ct(),10<e)){if(Cc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=lf(Hr.bind(null,t,tn,Si),e);break}Hr(t,tn,Si);break;case 4:if(tr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-qn(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ct()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*LC(i/1960))-i,10<i){t.timeoutHandle=lf(Hr.bind(null,t,tn,Si),i);break}Hr(t,tn,Si);break;case 5:Hr(t,tn,Si);break;default:throw Error(ee(329))}}}return sn(t,ct()),t.callbackNode===n?sE.bind(null,t):null}function Pf(t,e){var n=el;return t.current.memoizedState.isDehydrated&&(Yr(t,e).flags|=256),t=qc(t,e),t!==2&&(e=tn,tn=n,e!==null&&Rf(e)),t}function Rf(t){tn===null?tn=t:tn.push.apply(tn,t)}function DC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Jn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~jp,e&=~Ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),i=1<<n;t[n]=-1,e&=~i}}function S_(t){if(be&6)throw Error(ee(327));ps();var e=Cc(t,0);if(!(e&1))return sn(t,ct()),null;var n=qc(t,e);if(t.tag!==0&&n===2){var i=jh(t);i!==0&&(e=i,n=Pf(t,i))}if(n===1)throw n=wl,Yr(t,0),tr(t,e),sn(t,ct()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,tn,Si),sn(t,ct()),null}function tm(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Cs=ct()+500,_d&&Cr())}}function io(t){ir!==null&&ir.tag===0&&!(be&6)&&ps();var e=be;be|=1;var n=Pn.transition,i=ze;try{if(Pn.transition=null,ze=1,t)return t()}finally{ze=i,Pn.transition=n,be=e,!(be&6)&&Cr()}}function nm(){cn=ss.current,Ze(ss)}function Yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cC(n)),mt!==null)for(n=mt.return;n!==null;){var i=n;switch(Vp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nc();break;case 3:Ss(),Ze(rn),Ze(Ht),$p();break;case 5:qp(i);break;case 4:Ss();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:Bp(i.type._context);break;case 22:case 23:nm()}n=n.return}if(Ct=t,mt=t=fr(t.current,null),Mt=cn=e,vt=0,wl=null,jp=Ed=no=0,tn=el=null,Kr!==null){for(e=0;e<Kr.length;e++)if(n=Kr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Kr=null}return t}function aE(t,e){do{var n=mt;try{if(Op(),uc.current=Bc,Oc){for(var i=it.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Oc=!1}if(to=0,It=_t=it=null,Xa=!1,vl=0,Xp.current=null,n===null||n.return===null){vt=1,wl=e,mt=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=Mt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=d_(a);if(S!==null){S.flags&=-257,h_(S,a,u,o,e),S.mode&1&&c_(o,f,e),e=S,d=f;var D=e.updateQueue;if(D===null){var b=new Set;b.add(d),e.updateQueue=b}else D.add(d);break e}else{if(!(e&1)){c_(o,f,e),im();break e}d=Error(ee(426))}}else if(Xe&&u.mode&1){var B=d_(a);if(B!==null){!(B.flags&65536)&&(B.flags|=256),h_(B,a,u,o,e),Fp(Is(d,u));break e}}o=d=Is(d,u),vt!==4&&(vt=2),el===null?el=[o]:el.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=qT(o,d,e);r_(o,R);break e;case 1:u=d;var N=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof N.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(dr===null||!dr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=$T(o,u,e);r_(o,H);break e}}o=o.return}while(o!==null)}cE(n)}catch(J){e=J,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function lE(){var t=zc.current;return zc.current=Bc,t===null?Bc:t}function im(){(vt===0||vt===3||vt===2)&&(vt=4),Ct===null||!(no&268435455)&&!(Ed&268435455)||tr(Ct,Mt)}function qc(t,e){var n=be;be|=2;var i=lE();(Ct!==t||Mt!==e)&&(Si=null,Yr(t,e));do try{bC();break}catch(r){aE(t,r)}while(!0);if(Op(),be=n,zc.current=i,mt!==null)throw Error(ee(261));return Ct=null,Mt=0,vt}function bC(){for(;mt!==null;)uE(mt)}function VC(){for(;mt!==null&&!aI();)uE(mt)}function uE(t){var e=hE(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?cE(t):mt=e,Xp.current=null}function cE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RC(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,mt=null;return}}else if(n=PC(n,e,cn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);vt===0&&(vt=5)}function Hr(t,e,n){var i=ze,r=Pn.transition;try{Pn.transition=null,ze=1,FC(t,e,n,i)}finally{Pn.transition=r,ze=i}return null}function FC(t,e,n,i){do ps();while(ir!==null);if(be&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(_I(t,o),t===Ct&&(mt=Ct=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qu||(qu=!0,fE(Ic,function(){return ps(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pn.transition,Pn.transition=null;var a=ze;ze=1;var u=be;be|=4,Xp.current=null,NC(t,n),rE(n,t),iC(sf),Ac=!!of,sf=of=null,t.current=n,MC(n),lI(),be=u,ze=a,Pn.transition=o}else t.current=n;if(qu&&(qu=!1,ir=t,Hc=r),o=t.pendingLanes,o===0&&(dr=null),dI(n.stateNode),sn(t,ct()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gc)throw Gc=!1,t=Cf,Cf=null,t;return Hc&1&&t.tag!==0&&ps(),o=t.pendingLanes,o&1?t===Af?tl++:(tl=0,Af=t):tl=0,Cr(),null}function ps(){if(ir!==null){var t=q0(Hc),e=Pn.transition,n=ze;try{if(Pn.transition=null,ze=16>t?16:t,ir===null)var i=!1;else{if(t=ir,ir=null,Hc=0,be&6)throw Error(ee(331));var r=be;for(be|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(oe=f;oe!==null;){var g=oe;switch(g.tag){case 0:case 11:case 15:ja(8,g,o)}var y=g.child;if(y!==null)y.return=g,oe=y;else for(;oe!==null;){g=oe;var v=g.sibling,S=g.return;if(tE(g),g===f){oe=null;break}if(v!==null){v.return=S,oe=v;break}oe=S}}}var D=o.alternate;if(D!==null){var b=D.child;if(b!==null){D.child=null;do{var B=b.sibling;b.sibling=null,b=B}while(b!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ja(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,oe=R;break e}oe=o.return}}var N=t.current;for(oe=N;oe!==null;){a=oe;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,oe=k;else e:for(a=N;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Td(9,u)}}catch(J){at(u,u.return,J)}if(u===a){oe=null;break e}var H=u.sibling;if(H!==null){H.return=u.return,oe=H;break e}oe=u.return}}if(be=r,Cr(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(hd,t)}catch{}i=!0}return i}finally{ze=n,Pn.transition=e}}return!1}function I_(t,e,n){e=Is(n,e),e=qT(t,e,1),t=cr(t,e,1),e=Jt(),t!==null&&(Vl(t,1,e),sn(t,e))}function at(t,e,n){if(t.tag===3)I_(t,t,n);else for(;e!==null;){if(e.tag===3){I_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dr===null||!dr.has(i))){t=Is(n,t),t=$T(e,t,1),e=cr(e,t,1),t=Jt(),e!==null&&(Vl(e,1,t),sn(e,t));break}}e=e.return}}function UC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Mt&n)===n&&(vt===4||vt===3&&(Mt&130023424)===Mt&&500>ct()-em?Yr(t,0):jp|=n),sn(t,e)}function dE(t,e){e===0&&(t.mode&1?(e=Du,Du<<=1,!(Du&130023424)&&(Du=4194304)):e=1);var n=Jt();t=Ni(t,e),t!==null&&(Vl(t,e,n),sn(t,n))}function OC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dE(t,n)}function BC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),dE(t,n)}var hE;hE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,AC(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Xe&&e.flags&1048576&&gT(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;dc(t,e),t=e.pendingProps;var r=Es(e,Ht.current);fs(e,n),r=Kp(null,e,i,t,r,n);var o=Jp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(i)?(o=!0,Mc(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gp(e),r.updater=vd,e.stateNode=r,r._reactInternals=e,mf(e,i,t,n),e=yf(null,e,i,!0,o,n)):(e.tag=0,Xe&&o&&bp(e),Kt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(dc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=GC(i),t=Bn(i,t),r){case 0:e=_f(null,e,i,t,n);break e;case 1:e=m_(null,e,i,t,n);break e;case 11:e=f_(null,e,i,t,n);break e;case 14:e=p_(null,e,i,Bn(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),_f(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),m_(t,e,i,r,n);case 3:e:{if(ZT(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,wT(t,e),Fc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Is(Error(ee(423)),e),e=g_(t,e,i,n,r);break e}else if(i!==r){r=Is(Error(ee(424)),e),e=g_(t,e,i,n,r);break e}else for(dn=ur(e.stateNode.containerInfo.firstChild),hn=e,Xe=!0,Gn=null,n=TT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),i===r){e=Mi(t,e,n);break e}Kt(t,e,i,n)}e=e.child}return e;case 5:return xT(e),t===null&&hf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,af(i,r)?a=null:o!==null&&af(i,o)&&(e.flags|=32),JT(t,e),Kt(t,e,a,n),e.child;case 6:return t===null&&hf(e),null;case 13:return YT(t,e,n);case 4:return Hp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=xs(e,null,i,n):Kt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),f_(t,e,i,r,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,We(bc,i._currentValue),i._currentValue=a,o!==null)if(Jn(o.value,a)){if(o.children===r.children&&!rn.current){e=Mi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Pi(-1,n&-n),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?d.next=d:(d.next=g.next,g.next=d),f.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ff(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),ff(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Kt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,fs(e,n),r=Nn(r),i=i(r),e.flags|=1,Kt(t,e,i,n),e.child;case 14:return i=e.type,r=Bn(i,e.pendingProps),r=Bn(i.type,r),p_(t,e,i,r,n);case 15:return WT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bn(i,r),dc(t,e),e.tag=1,on(i)?(t=!0,Mc(e)):t=!1,fs(e,n),HT(e,i,r),mf(e,i,r,n),yf(null,e,i,!0,t,n);case 19:return QT(t,e,n);case 22:return KT(t,e,n)}throw Error(ee(156,e.tag))};function fE(t,e){return B0(t,e)}function zC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,i){return new zC(t,e,n,i)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GC(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xp)return 11;if(t===Sp)return 14}return 2}function fr(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")rm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Yo:return Qr(n.children,r,o,e);case wp:a=8,r|=8;break;case Uh:return t=An(12,n,e,r|2),t.elementType=Uh,t.lanes=o,t;case Oh:return t=An(13,n,e,r),t.elementType=Oh,t.lanes=o,t;case Bh:return t=An(19,n,e,r),t.elementType=Bh,t.lanes=o,t;case x0:return wd(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E0:a=10;break e;case w0:a=9;break e;case xp:a=11;break e;case Sp:a=14;break e;case Xi:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=An(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Qr(t,e,n,i){return t=An(7,t,i,e),t.lanes=n,t}function wd(t,e,n,i){return t=An(22,t,i,e),t.elementType=x0,t.lanes=n,t.stateNode={isHidden:!1},t}function Sh(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function Ih(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HC(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oh(0),this.expirationTimes=oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function om(t,e,n,i,r,o,a,u,d){return t=new HC(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=An(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gp(o),t}function qC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function pE(t){if(!t)return vr;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(on(n))return pT(t,n,e)}return e}function mE(t,e,n,i,r,o,a,u,d){return t=om(n,i,!0,t,r,o,a,u,d),t.context=pE(null),n=t.current,i=Jt(),r=hr(n),o=Pi(i,r),o.callback=e??null,cr(n,o,r),t.current.lanes=r,Vl(t,r,i),sn(t,i),t}function xd(t,e,n,i){var r=e.current,o=Jt(),a=hr(r);return n=pE(n),e.context===null?e.context=n:e.pendingContext=n,e=Pi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=cr(r,e,a),t!==null&&($n(t,r,a,o),lc(t,r,a)),a}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sm(t,e){C_(t,e),(t=t.alternate)&&C_(t,e)}function $C(){return null}var gE=typeof reportError=="function"?reportError:function(t){console.error(t)};function am(t){this._internalRoot=t}Sd.prototype.render=am.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));xd(t,e,null,null)};Sd.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){xd(null,t,null,null)}),e[ki]=null}};function Sd(t){this._internalRoot=t}Sd.prototype.unstable_scheduleHydration=function(t){if(t){var e=K0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&Z0(t)}};function lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function A_(){}function WC(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=$c(a);o.call(f)}}var a=mE(e,i,t,0,null,!1,!1,"",A_);return t._reactRootContainer=a,t[ki]=a.current,pl(t.nodeType===8?t.parentNode:t),io(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=$c(d);u.call(f)}}var d=om(t,0,!1,null,null,!1,!1,"",A_);return t._reactRootContainer=d,t[ki]=d.current,pl(t.nodeType===8?t.parentNode:t),io(function(){xd(e,d,n,i)}),d}function Cd(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=$c(a);u.call(d)}}xd(e,a,t,r)}else a=WC(n,e,t,r,i);return $c(a)}$0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=za(e.pendingLanes);n!==0&&(Ap(e,n|1),sn(e,ct()),!(be&6)&&(Cs=ct()+500,Cr()))}break;case 13:io(function(){var i=Ni(t,1);if(i!==null){var r=Jt();$n(i,t,1,r)}}),sm(t,1)}};Pp=function(t){if(t.tag===13){var e=Ni(t,134217728);if(e!==null){var n=Jt();$n(e,t,134217728,n)}sm(t,134217728)}};W0=function(t){if(t.tag===13){var e=hr(t),n=Ni(t,e);if(n!==null){var i=Jt();$n(n,t,e,i)}sm(t,e)}};K0=function(){return ze};J0=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Yh=function(t,e,n){switch(e){case"input":if(Hh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=gd(i);if(!r)throw Error(ee(90));I0(i),Hh(i,r)}}}break;case"textarea":A0(t,n);break;case"select":e=n.value,e!=null&&us(t,!!n.multiple,e,!1)}};D0=tm;b0=io;var KC={usingClientEntryPoint:!1,Events:[Ul,es,gd,M0,L0,tm]},ba={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JC={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U0(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{hd=$u.inject(JC),oi=$u}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lm(e))throw Error(ee(200));return qC(t,e,null,n)};pn.createRoot=function(t,e){if(!lm(t))throw Error(ee(299));var n=!1,i="",r=gE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=om(t,1,!1,null,null,n,!1,i,r),t[ki]=e.current,pl(t.nodeType===8?t.parentNode:t),new am(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=U0(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return io(t)};pn.hydrate=function(t,e,n){if(!Id(e))throw Error(ee(200));return Cd(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!lm(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=gE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=mE(e,null,t,1,n??null,r,!1,o,a),t[ki]=e.current,pl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Sd(e)};pn.render=function(t,e,n){if(!Id(e))throw Error(ee(200));return Cd(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Id(t))throw Error(ee(40));return t._reactRootContainer?(io(function(){Cd(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};pn.unstable_batchedUpdates=tm;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Id(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Cd(t,e,n,!1,i)};pn.version="18.3.1-next-f1338f8080-20240426";function _E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_E)}catch(t){console.error(t)}}_E(),_0.exports=pn;var ZC=_0.exports,P_=ZC;Vh.createRoot=P_.createRoot,Vh.hydrateRoot=P_.hydrateRoot;var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},YC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},vE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,S=f&63;d||(S=64,a||(v=64)),i.push(n[g],n[y],n[v],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||y==null)throw new QC;const v=o<<2|u>>4;if(i.push(v),f!==64){const S=u<<4&240|f>>2;if(i.push(S),y!==64){const D=f<<6&192|y;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XC=function(t){const e=yE(t);return vE.encodeByteArray(e,!0)},Wc=function(t){return XC(t).replace(/\./g,"")},jC=function(t){try{return vE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=()=>eA().__FIREBASE_DEFAULTS__,nA=()=>{if(typeof process>"u"||typeof R_>"u")return;const t=R_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jC(t[1]);return e&&JSON.parse(e)},um=()=>{try{return tA()||nA()||iA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rA=t=>{var e,n;return(n=(e=um())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oA=t=>{const e=rA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TE=()=>{var t;return(t=um())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wc(JSON.stringify(n)),Wc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uA(){var t;const e=(t=um())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cA(){return!uA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dA(){try{return typeof indexedDB=="object"}catch{return!1}}function hA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="FirebaseError";class Us extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=fA,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,EE.prototype.create)}}class EE{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?pA(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Us(r,u,i)}}function pA(t,e){return t.replace(mA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const mA=/\{\$([^}]+)}/g;function kf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(k_(o)&&k_(a)){if(!kf(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function k_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){return t&&t._delegate?t._delegate:t}class Sl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yA(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_A(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _A(t){return t===qr?void 0:t}function yA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const TA={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},EA=De.INFO,wA={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},xA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=wA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wE{constructor(e){this.name=e,this._logLevel=EA,this._logHandler=xA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const SA=(t,e)=>e.some(n=>t instanceof n);let N_,M_;function IA(){return N_||(N_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CA(){return M_||(M_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xE=new WeakMap,Nf=new WeakMap,SE=new WeakMap,Ch=new WeakMap,cm=new WeakMap;function AA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(pr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&xE.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function PA(t){if(Nf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Nf.set(t,e)}let Mf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RA(t){Mf=t(Mf)}function kA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ah(this),e,...n);return SE.set(i,e.sort?e.sort():[e]),pr(i)}:CA().includes(t)?function(...e){return t.apply(Ah(this),e),pr(xE.get(this))}:function(...e){return pr(t.apply(Ah(this),e))}}function NA(t){return typeof t=="function"?kA(t):(t instanceof IDBTransaction&&PA(t),SA(t,IA())?new Proxy(t,Mf):t)}function pr(t){if(t instanceof IDBRequest)return AA(t);if(Ch.has(t))return Ch.get(t);const e=NA(t);return e!==t&&(Ch.set(t,e),cm.set(e,t)),e}const Ah=t=>cm.get(t);function MA(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=pr(a);return i&&a.addEventListener("upgradeneeded",d=>{i(pr(a.result),d.oldVersion,d.newVersion,pr(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const LA=["get","getKey","getAll","getAllKeys","count"],DA=["put","add","delete","clear"],Ph=new Map;function L_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=DA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LA.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&d.done]))[0]};return Ph.set(e,o),o}RA(t=>({...t,get:(e,n,i)=>L_(e,n)||t.get(e,n,i),has:(e,n)=>!!L_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lf="@firebase/app",D_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new wE("@firebase/app"),FA="@firebase/app-compat",UA="@firebase/analytics-compat",OA="@firebase/analytics",BA="@firebase/app-check-compat",zA="@firebase/app-check",GA="@firebase/auth",HA="@firebase/auth-compat",qA="@firebase/database",$A="@firebase/data-connect",WA="@firebase/database-compat",KA="@firebase/functions",JA="@firebase/functions-compat",ZA="@firebase/installations",YA="@firebase/installations-compat",QA="@firebase/messaging",XA="@firebase/messaging-compat",jA="@firebase/performance",eP="@firebase/performance-compat",tP="@firebase/remote-config",nP="@firebase/remote-config-compat",iP="@firebase/storage",rP="@firebase/storage-compat",oP="@firebase/firestore",sP="@firebase/vertexai-preview",aP="@firebase/firestore-compat",lP="firebase",uP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="[DEFAULT]",cP={[Lf]:"fire-core",[FA]:"fire-core-compat",[OA]:"fire-analytics",[UA]:"fire-analytics-compat",[zA]:"fire-app-check",[BA]:"fire-app-check-compat",[GA]:"fire-auth",[HA]:"fire-auth-compat",[qA]:"fire-rtdb",[$A]:"fire-data-connect",[WA]:"fire-rtdb-compat",[KA]:"fire-fn",[JA]:"fire-fn-compat",[ZA]:"fire-iid",[YA]:"fire-iid-compat",[QA]:"fire-fcm",[XA]:"fire-fcm-compat",[jA]:"fire-perf",[eP]:"fire-perf-compat",[tP]:"fire-rc",[nP]:"fire-rc-compat",[iP]:"fire-gcs",[rP]:"fire-gcs-compat",[oP]:"fire-fst",[aP]:"fire-fst-compat",[sP]:"fire-vertex","fire-js":"fire-js",[lP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Map,dP=new Map,bf=new Map;function b_(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kc(t){const e=t.name;if(bf.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;bf.set(e,t);for(const n of Il.values())b_(n,t);for(const n of dP.values())b_(n,t);return!0}function hP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new EE("app","Firebase",fP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Sl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=uP;function IE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Df,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw mr.create("bad-app-name",{appName:String(r)});if(n||(n=TE()),!n)throw mr.create("no-options");const o=Il.get(r);if(o){if(kf(n,o.options)&&kf(i,o.config))return o;throw mr.create("duplicate-app",{appName:r})}const a=new vA(r);for(const d of bf.values())a.addComponent(d);const u=new pP(n,i,a);return Il.set(r,u),u}function gP(t=Df){const e=Il.get(t);if(!e&&t===Df&&TE())return IE();if(!e)throw mr.create("no-app",{appName:t});return e}function _P(){return Array.from(Il.values())}function ms(t,e,n){var i;let r=(i=cP[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(u.join(" "));return}Kc(new Sl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="firebase-heartbeat-database",vP=1,Cl="firebase-heartbeat-store";let Rh=null;function CE(){return Rh||(Rh=MA(yP,vP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cl)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),Rh}async function TP(t){try{const n=(await CE()).transaction(Cl),i=await n.objectStore(Cl).get(AE(t));return await n.done,i}catch(e){if(e instanceof Us)Li.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function V_(t,e){try{const i=(await CE()).transaction(Cl,"readwrite");await i.objectStore(Cl).put(e,AE(t)),await i.done}catch(n){if(n instanceof Us)Li.warn(n.message);else{const i=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(i.message)}}}function AE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=1024,wP=30*24*60*60*1e3;class xP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IP(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=F_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=wP}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F_(),{heartbeatsToSend:i,unsentEntries:r}=SP(this._heartbeatsCache.heartbeats),o=Wc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Li.warn(n),""}}}function F_(){return new Date().toISOString().substring(0,10)}function SP(t,e=EP){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),U_(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),U_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class IP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dA()?hA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return V_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return V_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U_(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){Kc(new Sl("platform-logger",e=>new bA(e),"PRIVATE")),Kc(new Sl("heartbeat",e=>new xP(e),"PRIVATE")),ms(Lf,D_,t),ms(Lf,D_,"esm2017"),ms("fire-js","")}CP("");var AP="firebase",PP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(AP,PP,"app");var O_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,PE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,C){function P(){}P.prototype=C.prototype,V.D=C.prototype,V.prototype=new P,V.prototype.constructor=V,V.C=function(U,O,F){for(var M=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)M[ae-2]=arguments[ae];return C.prototype[O].apply(U,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(V,C,P){P||(P=0);var U=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)U[O]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(O=0;16>O;++O)U[O]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=V.g[0],P=V.g[1],O=V.g[2];var F=V.g[3],M=C+(F^P&(O^F))+U[0]+3614090360&4294967295;C=P+(M<<7&4294967295|M>>>25),M=F+(O^C&(P^O))+U[1]+3905402710&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(P^F&(C^P))+U[2]+606105819&4294967295,O=F+(M<<17&4294967295|M>>>15),M=P+(C^O&(F^C))+U[3]+3250441966&4294967295,P=O+(M<<22&4294967295|M>>>10),M=C+(F^P&(O^F))+U[4]+4118548399&4294967295,C=P+(M<<7&4294967295|M>>>25),M=F+(O^C&(P^O))+U[5]+1200080426&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(P^F&(C^P))+U[6]+2821735955&4294967295,O=F+(M<<17&4294967295|M>>>15),M=P+(C^O&(F^C))+U[7]+4249261313&4294967295,P=O+(M<<22&4294967295|M>>>10),M=C+(F^P&(O^F))+U[8]+1770035416&4294967295,C=P+(M<<7&4294967295|M>>>25),M=F+(O^C&(P^O))+U[9]+2336552879&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(P^F&(C^P))+U[10]+4294925233&4294967295,O=F+(M<<17&4294967295|M>>>15),M=P+(C^O&(F^C))+U[11]+2304563134&4294967295,P=O+(M<<22&4294967295|M>>>10),M=C+(F^P&(O^F))+U[12]+1804603682&4294967295,C=P+(M<<7&4294967295|M>>>25),M=F+(O^C&(P^O))+U[13]+4254626195&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(P^F&(C^P))+U[14]+2792965006&4294967295,O=F+(M<<17&4294967295|M>>>15),M=P+(C^O&(F^C))+U[15]+1236535329&4294967295,P=O+(M<<22&4294967295|M>>>10),M=C+(O^F&(P^O))+U[1]+4129170786&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^O&(C^P))+U[6]+3225465664&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^P&(F^C))+U[11]+643717713&4294967295,O=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(O^F))+U[0]+3921069994&4294967295,P=O+(M<<20&4294967295|M>>>12),M=C+(O^F&(P^O))+U[5]+3593408605&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^O&(C^P))+U[10]+38016083&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^P&(F^C))+U[15]+3634488961&4294967295,O=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(O^F))+U[4]+3889429448&4294967295,P=O+(M<<20&4294967295|M>>>12),M=C+(O^F&(P^O))+U[9]+568446438&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^O&(C^P))+U[14]+3275163606&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^P&(F^C))+U[3]+4107603335&4294967295,O=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(O^F))+U[8]+1163531501&4294967295,P=O+(M<<20&4294967295|M>>>12),M=C+(O^F&(P^O))+U[13]+2850285829&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^O&(C^P))+U[2]+4243563512&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^P&(F^C))+U[7]+1735328473&4294967295,O=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(O^F))+U[12]+2368359562&4294967295,P=O+(M<<20&4294967295|M>>>12),M=C+(P^O^F)+U[5]+4294588738&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^O)+U[8]+2272392833&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^P)+U[11]+1839030562&4294967295,O=F+(M<<16&4294967295|M>>>16),M=P+(O^F^C)+U[14]+4259657740&4294967295,P=O+(M<<23&4294967295|M>>>9),M=C+(P^O^F)+U[1]+2763975236&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^O)+U[4]+1272893353&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^P)+U[7]+4139469664&4294967295,O=F+(M<<16&4294967295|M>>>16),M=P+(O^F^C)+U[10]+3200236656&4294967295,P=O+(M<<23&4294967295|M>>>9),M=C+(P^O^F)+U[13]+681279174&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^O)+U[0]+3936430074&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^P)+U[3]+3572445317&4294967295,O=F+(M<<16&4294967295|M>>>16),M=P+(O^F^C)+U[6]+76029189&4294967295,P=O+(M<<23&4294967295|M>>>9),M=C+(P^O^F)+U[9]+3654602809&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^O)+U[12]+3873151461&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^P)+U[15]+530742520&4294967295,O=F+(M<<16&4294967295|M>>>16),M=P+(O^F^C)+U[2]+3299628645&4294967295,P=O+(M<<23&4294967295|M>>>9),M=C+(O^(P|~F))+U[0]+4096336452&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~O))+U[7]+1126891415&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~P))+U[14]+2878612391&4294967295,O=F+(M<<15&4294967295|M>>>17),M=P+(F^(O|~C))+U[5]+4237533241&4294967295,P=O+(M<<21&4294967295|M>>>11),M=C+(O^(P|~F))+U[12]+1700485571&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~O))+U[3]+2399980690&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~P))+U[10]+4293915773&4294967295,O=F+(M<<15&4294967295|M>>>17),M=P+(F^(O|~C))+U[1]+2240044497&4294967295,P=O+(M<<21&4294967295|M>>>11),M=C+(O^(P|~F))+U[8]+1873313359&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~O))+U[15]+4264355552&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~P))+U[6]+2734768916&4294967295,O=F+(M<<15&4294967295|M>>>17),M=P+(F^(O|~C))+U[13]+1309151649&4294967295,P=O+(M<<21&4294967295|M>>>11),M=C+(O^(P|~F))+U[4]+4149444226&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~O))+U[11]+3174756917&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~P))+U[2]+718787259&4294967295,O=F+(M<<15&4294967295|M>>>17),M=P+(F^(O|~C))+U[9]+3951481745&4294967295,V.g[0]=V.g[0]+C&4294967295,V.g[1]=V.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,V.g[2]=V.g[2]+O&4294967295,V.g[3]=V.g[3]+F&4294967295}i.prototype.u=function(V,C){C===void 0&&(C=V.length);for(var P=C-this.blockSize,U=this.B,O=this.h,F=0;F<C;){if(O==0)for(;F<=P;)r(this,V,F),F+=this.blockSize;if(typeof V=="string"){for(;F<C;)if(U[O++]=V.charCodeAt(F++),O==this.blockSize){r(this,U),O=0;break}}else for(;F<C;)if(U[O++]=V[F++],O==this.blockSize){r(this,U),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var C=1;C<V.length-8;++C)V[C]=0;var P=8*this.o;for(C=V.length-8;C<V.length;++C)V[C]=P&255,P/=256;for(this.u(V),V=Array(16),C=P=0;4>C;++C)for(var U=0;32>U;U+=8)V[P++]=this.g[C]>>>U&255;return V};function o(V,C){var P=u;return Object.prototype.hasOwnProperty.call(P,V)?P[V]:P[V]=C(V)}function a(V,C){this.h=C;for(var P=[],U=!0,O=V.length-1;0<=O;O--){var F=V[O]|0;U&&F==C||(P[O]=F,U=!1)}this.g=P}var u={};function d(V){return-128<=V&&128>V?o(V,function(C){return new a([C|0],0>C?-1:0)}):new a([V|0],0>V?-1:0)}function f(V){if(isNaN(V)||!isFinite(V))return y;if(0>V)return B(f(-V));for(var C=[],P=1,U=0;V>=P;U++)C[U]=V/P|0,P*=4294967296;return new a(C,0)}function g(V,C){if(V.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V.charAt(0)=="-")return B(g(V.substring(1),C));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(C,8)),U=y,O=0;O<V.length;O+=8){var F=Math.min(8,V.length-O),M=parseInt(V.substring(O,O+F),C);8>F?(F=f(Math.pow(C,F)),U=U.j(F).add(f(M))):(U=U.j(P),U=U.add(f(M)))}return U}var y=d(0),v=d(1),S=d(16777216);t=a.prototype,t.m=function(){if(b(this))return-B(this).m();for(var V=0,C=1,P=0;P<this.g.length;P++){var U=this.i(P);V+=(0<=U?U:4294967296+U)*C,C*=4294967296}return V},t.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(D(this))return"0";if(b(this))return"-"+B(this).toString(V);for(var C=f(Math.pow(V,6)),P=this,U="";;){var O=H(P,C).g;P=R(P,O.j(C));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(V);if(P=O,D(P))return F+U;for(;6>F.length;)F="0"+F;U=F+U}},t.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function D(V){if(V.h!=0)return!1;for(var C=0;C<V.g.length;C++)if(V.g[C]!=0)return!1;return!0}function b(V){return V.h==-1}t.l=function(V){return V=R(this,V),b(V)?-1:D(V)?0:1};function B(V){for(var C=V.g.length,P=[],U=0;U<C;U++)P[U]=~V.g[U];return new a(P,~V.h).add(v)}t.abs=function(){return b(this)?B(this):this},t.add=function(V){for(var C=Math.max(this.g.length,V.g.length),P=[],U=0,O=0;O<=C;O++){var F=U+(this.i(O)&65535)+(V.i(O)&65535),M=(F>>>16)+(this.i(O)>>>16)+(V.i(O)>>>16);U=M>>>16,F&=65535,M&=65535,P[O]=M<<16|F}return new a(P,P[P.length-1]&-2147483648?-1:0)};function R(V,C){return V.add(B(C))}t.j=function(V){if(D(this)||D(V))return y;if(b(this))return b(V)?B(this).j(B(V)):B(B(this).j(V));if(b(V))return B(this.j(B(V)));if(0>this.l(S)&&0>V.l(S))return f(this.m()*V.m());for(var C=this.g.length+V.g.length,P=[],U=0;U<2*C;U++)P[U]=0;for(U=0;U<this.g.length;U++)for(var O=0;O<V.g.length;O++){var F=this.i(U)>>>16,M=this.i(U)&65535,ae=V.i(O)>>>16,Ke=V.i(O)&65535;P[2*U+2*O]+=M*Ke,N(P,2*U+2*O),P[2*U+2*O+1]+=F*Ke,N(P,2*U+2*O+1),P[2*U+2*O+1]+=M*ae,N(P,2*U+2*O+1),P[2*U+2*O+2]+=F*ae,N(P,2*U+2*O+2)}for(U=0;U<C;U++)P[U]=P[2*U+1]<<16|P[2*U];for(U=C;U<2*C;U++)P[U]=0;return new a(P,0)};function N(V,C){for(;(V[C]&65535)!=V[C];)V[C+1]+=V[C]>>>16,V[C]&=65535,C++}function k(V,C){this.g=V,this.h=C}function H(V,C){if(D(C))throw Error("division by zero");if(D(V))return new k(y,y);if(b(V))return C=H(B(V),C),new k(B(C.g),B(C.h));if(b(C))return C=H(V,B(C)),new k(B(C.g),C.h);if(30<V.g.length){if(b(V)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var P=v,U=C;0>=U.l(V);)P=J(P),U=J(U);var O=Z(P,1),F=Z(U,1);for(U=Z(U,2),P=Z(P,2);!D(U);){var M=F.add(U);0>=M.l(V)&&(O=O.add(P),F=M),U=Z(U,1),P=Z(P,1)}return C=R(V,O.j(C)),new k(O,C)}for(O=y;0<=V.l(C);){for(P=Math.max(1,Math.floor(V.m()/C.m())),U=Math.ceil(Math.log(P)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),F=f(P),M=F.j(C);b(M)||0<M.l(V);)P-=U,F=f(P),M=F.j(C);D(F)&&(F=v),O=O.add(F),V=R(V,M)}return new k(O,V)}t.A=function(V){return H(this,V).h},t.and=function(V){for(var C=Math.max(this.g.length,V.g.length),P=[],U=0;U<C;U++)P[U]=this.i(U)&V.i(U);return new a(P,this.h&V.h)},t.or=function(V){for(var C=Math.max(this.g.length,V.g.length),P=[],U=0;U<C;U++)P[U]=this.i(U)|V.i(U);return new a(P,this.h|V.h)},t.xor=function(V){for(var C=Math.max(this.g.length,V.g.length),P=[],U=0;U<C;U++)P[U]=this.i(U)^V.i(U);return new a(P,this.h^V.h)};function J(V){for(var C=V.g.length+1,P=[],U=0;U<C;U++)P[U]=V.i(U)<<1|V.i(U-1)>>>31;return new a(P,V.h)}function Z(V,C){var P=C>>5;C%=32;for(var U=V.g.length-P,O=[],F=0;F<U;F++)O[F]=0<C?V.i(F+P)>>>C|V.i(F+P+1)<<32-C:V.i(F+P);return new a(O,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,PE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Xr=a}).apply(typeof O_<"u"?O_:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RE,Ha,kE,mc,Vf,NE,ME,LE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,x){return h==Array.prototype||h==Object.prototype||(h[T]=x.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var T=0;T<h.length;++T){var x=h[T];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(h,T){if(T)e:{var x=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in x))break e;x=x[q]}h=h[h.length-1],A=x[h],T=T(A),T!=A&&T!=null&&e(x,h,{configurable:!0,writable:!0,value:T})}}function o(h,T){h instanceof String&&(h+="");var x=0,A=!1,q={next:function(){if(!A&&x<h.length){var K=x++;return{value:T(K,h[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}r("Array.prototype.values",function(h){return h||function(){return o(this,function(T,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function f(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function g(h,T,x){return h.call.apply(h.bind,arguments)}function y(h,T,x){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),h.apply(T,q)}}return function(){return h.apply(T,arguments)}}function v(h,T,x){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function S(h,T){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function D(h,T){function x(){}x.prototype=T.prototype,h.aa=T.prototype,h.prototype=new x,h.prototype.constructor=h,h.Qb=function(A,q,K){for(var te=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)te[Be-2]=arguments[Be];return T.prototype[q].apply(A,te)}}function b(h){const T=h.length;if(0<T){const x=Array(T);for(let A=0;A<T;A++)x[A]=h[A];return x}return[]}function B(h,T){for(let x=1;x<arguments.length;x++){const A=arguments[x];if(d(A)){const q=h.length||0,K=A.length||0;h.length=q+K;for(let te=0;te<K;te++)h[q+te]=A[te]}else h.push(A)}}class R{constructor(T,x){this.i=T,this.j=x,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function N(h){return/^[\s\xa0]*$/.test(h)}function k(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function H(h){return H[" "](h),h}H[" "]=function(){};var J=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function Z(h,T,x){for(const A in h)T.call(x,h[A],A,h)}function V(h,T){for(const x in h)T.call(void 0,h[x],x,h)}function C(h){const T={};for(const x in h)T[x]=h[x];return T}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,T){let x,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(x in A)h[x]=A[x];for(let K=0;K<P.length;K++)x=P[K],Object.prototype.hasOwnProperty.call(A,x)&&(h[x]=A[x])}}function O(h){var T=1;h=h.split(":");const x=[];for(;0<T&&h.length;)x.push(h.shift()),T--;return h.length&&x.push(h.join(":")),x}function F(h){u.setTimeout(()=>{throw h},0)}function M(){var h=ne;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class ae{constructor(){this.h=this.g=null}add(T,x){const A=Ke.get();A.set(T,x),this.h?this.h.next=A:this.g=A,this.h=A}}var Ke=new R(()=>new Ne,h=>h.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(T,x){this.h=T,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,G=!1,ne=new ae,j=()=>{const h=u.Promise.resolve(void 0);xe=()=>{h.then(de)}};var de=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(x){F(x)}var T=Ke;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}G=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};u.addEventListener("test",x,T),u.removeEventListener("test",x,T)}catch{}return h}();function Se(h,T){if(Pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var x=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(J){e:{try{H(T.nodeName);var q=!0;break e}catch{}q=!1}q||(T=null)}}else x=="mouseover"?T=h.fromElement:x=="mouseout"&&(T=h.toElement);this.relatedTarget=T,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Se.aa.h.call(this)}}D(Se,Pe);var ve={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Kl(h,T,x,A,q){this.listener=h,this.proxy=null,this.src=T,this.type=x,this.capture=!!A,this.ha=q,this.key=++Yn,this.da=this.fa=!1}function Bi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function zi(h){this.src=h,this.g={},this.h=0}zi.prototype.add=function(h,T,x,A,q){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var te=Pr(h,T,A,q);return-1<te?(T=h[te],x||(T.fa=!1)):(T=new Kl(T,this.src,K,!!A,q),T.fa=x,h.push(T)),T};function hi(h,T){var x=T.type;if(x in h.g){var A=h.g[x],q=Array.prototype.indexOf.call(A,T,void 0),K;(K=0<=q)&&Array.prototype.splice.call(A,q,1),K&&(Bi(T),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Pr(h,T,x,A){for(var q=0;q<h.length;++q){var K=h[q];if(!K.da&&K.listener==T&&K.capture==!!x&&K.ha==A)return q}return-1}var Ws="closure_lm_"+(1e6*Math.random()|0),fo={};function Ks(h,T,x,A,q){if(Array.isArray(T)){for(var K=0;K<T.length;K++)Ks(h,T[K],x,A,q);return null}return x=Yl(x),h&&h[gt]?h.K(T,x,f(A)?!!A.capture:!1,q):Js(h,T,x,!1,A,q)}function Js(h,T,x,A,q,K){if(!T)throw Error("Invalid event type");var te=f(q)?!!q.capture:!!q,Be=_o(h);if(Be||(h[Ws]=Be=new zi(h)),x=Be.add(T,x,A,te,K),x.proxy)return x;if(A=po(),x.proxy=A,A.src=h,A.listener=x,h.addEventListener)Oe||(q=te),q===void 0&&(q=!1),h.addEventListener(T.toString(),A,q);else if(h.attachEvent)h.attachEvent(go(T.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function po(){function h(x){return T.call(h.src,h.listener,x)}const T=Zl;return h}function Jl(h,T,x,A,q){if(Array.isArray(T))for(var K=0;K<T.length;K++)Jl(h,T[K],x,A,q);else A=f(A)?!!A.capture:!!A,x=Yl(x),h&&h[gt]?(h=h.i,T=String(T).toString(),T in h.g&&(K=h.g[T],x=Pr(K,x,A,q),-1<x&&(Bi(K[x]),Array.prototype.splice.call(K,x,1),K.length==0&&(delete h.g[T],h.h--)))):h&&(h=_o(h))&&(T=h.g[T.toString()],h=-1,T&&(h=Pr(T,x,A,q)),(x=-1<h?T[h]:null)&&mo(x))}function mo(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[gt])hi(T.i,h);else{var x=h.type,A=h.proxy;T.removeEventListener?T.removeEventListener(x,A,h.capture):T.detachEvent?T.detachEvent(go(x),A):T.addListener&&T.removeListener&&T.removeListener(A),(x=_o(T))?(hi(x,h),x.h==0&&(x.src=null,T[Ws]=null)):Bi(h)}}}function go(h){return h in fo?fo[h]:fo[h]="on"+h}function Zl(h,T){if(h.da)h=!0;else{T=new Se(T,this);var x=h.listener,A=h.ha||h.src;h.fa&&mo(h),h=x.call(A,T)}return h}function _o(h){return h=h[Ws],h instanceof zi?h:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yl(h){return typeof h=="function"?h:(h[Zs]||(h[Zs]=function(T){return h.handleEvent(T)}),h[Zs])}function dt(){ye.call(this),this.i=new zi(this),this.M=this,this.F=null}D(dt,ye),dt.prototype[gt]=!0,dt.prototype.removeEventListener=function(h,T,x,A){Jl(this,h,T,x,A)};function Et(h,T){var x,A=h.F;if(A)for(x=[];A;A=A.F)x.push(A);if(h=h.M,A=T.type||T,typeof T=="string")T=new Pe(T,h);else if(T instanceof Pe)T.target=T.target||h;else{var q=T;T=new Pe(A,h),U(T,q)}if(q=!0,x)for(var K=x.length-1;0<=K;K--){var te=T.g=x[K];q=Rr(te,A,!0,T)&&q}if(te=T.g=h,q=Rr(te,A,!0,T)&&q,q=Rr(te,A,!1,T)&&q,x)for(K=0;K<x.length;K++)te=T.g=x[K],q=Rr(te,A,!1,T)&&q}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var x=h.g[T],A=0;A<x.length;A++)Bi(x[A]);delete h.g[T],h.h--}}this.F=null},dt.prototype.K=function(h,T,x,A){return this.i.add(String(h),T,!1,x,A)},dt.prototype.L=function(h,T,x,A){return this.i.add(String(h),T,!0,x,A)};function Rr(h,T,x,A){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var q=!0,K=0;K<T.length;++K){var te=T[K];if(te&&!te.da&&te.capture==x){var Be=te.listener,ht=te.ha||te.src;te.fa&&hi(h.i,te),q=Be.call(ht,A)!==!1&&q}}return q&&!A.defaultPrevented}function Ql(h,T,x){if(typeof h=="function")x&&(h=v(h,x));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:u.setTimeout(h,T||0)}function Ys(h){h.g=Ql(()=>{h.g=null,h.i&&(h.i=!1,Ys(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class Xl extends ye{constructor(T,x){super(),this.m=T,this.l=x,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(h){ye.call(this),this.h=h,this.g={}}D(kr,ye);var Qs=[];function yo(h){Z(h.g,function(T,x){this.g.hasOwnProperty(x)&&mo(T)},h),h.g={}}kr.prototype.N=function(){kr.aa.N.call(this),yo(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vo=u.JSON.stringify,Wd=u.JSON.parse,Nr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Xs(){}Xs.prototype.h=null;function jl(h){return h.h||(h.h=h.i())}function js(){}var Gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function To(){Pe.call(this,"d")}D(To,Pe);function ea(){Pe.call(this,"c")}D(ea,Pe);var fi={},eu=null;function Eo(){return eu=eu||new dt}fi.La="serverreachability";function tu(h){Pe.call(this,fi.La,h)}D(tu,Pe);function Mr(h){const T=Eo();Et(T,new tu(T))}fi.STAT_EVENT="statevent";function wo(h,T){Pe.call(this,fi.STAT_EVENT,h),this.stat=T}D(wo,Pe);function Pt(h){const T=Eo();Et(T,new wo(T,h))}fi.Ma="timingevent";function nu(h,T){Pe.call(this,fi.Ma,h),this.size=T}D(nu,Pe);function Lr(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},T)}function Dr(){this.g=!0}Dr.prototype.xa=function(){this.g=!1};function gn(h,T,x,A,q,K){h.info(function(){if(h.g)if(K)for(var te="",Be=K.split("&"),ht=0;ht<Be.length;ht++){var Me=Be[ht].split("=");if(1<Me.length){var qe=Me[0];Me=Me[1];var tt=qe.split("_");te=2<=tt.length&&tt[1]=="type"?te+(qe+"="+Me+"&"):te+(qe+"=redacted&")}}else te=null;else te=K;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+T+`
`+x+`
`+te})}function le(h,T,x,A,q,K,te){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+T+`
`+x+`
`+K+" "+te})}function pi(h,T,x,A){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+ru(h,x)+(A?" "+A:"")})}function iu(h,T){h.info(function(){return"TIMEOUT: "+T})}Dr.prototype.info=function(){};function ru(h,T){if(!h.g)return T;if(!T)return null;try{var x=JSON.parse(T);if(x){for(h=0;h<x.length;h++)if(Array.isArray(x[h])){var A=x[h];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var K=q[0];if(K!="noop"&&K!="stop"&&K!="close")for(var te=1;te<q.length;te++)q[te]=""}}}}return vo(x)}catch{return T}}var br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},So;function Dn(){}D(Dn,Xs),Dn.prototype.g=function(){return new XMLHttpRequest},Dn.prototype.i=function(){return{}},So=new Dn;function bn(h,T,x,A){this.j=h,this.i=T,this.l=x,this.R=A||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var su={},ta={};function na(h,T,x){h.L=1,h.v=yn(st(T)),h.m=x,h.P=!0,ia(h,null)}function ia(h,T){h.F=Date.now(),Co(h),h.A=st(h.v);var x=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),uu(x.i,"t",A),h.C=0,x=h.j.J,h.h=new ou,h.g=gu(h.j,x?T:null,!h.m),0<h.O&&(h.M=new Xl(v(h.Y,h,h.g),h.O)),T=h.U,x=h.g,A=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Qs[0]=q.toString()),q=Qs);for(var K=0;K<q.length;K++){var te=Ks(x,q[K],A||T.handleEvent,!1,T.h||T);if(!te)break;T.g[te.key]=te}T=h.H?C(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Mr(),gn(h.i,h.u,h.A,h.l,h.R,h.m)}bn.prototype.ca=function(h){h=h.target;const T=this.M;T&&qt(h)==3?T.j():this.Y(h)},bn.prototype.Y=function(h){try{if(h==this.g)e:{const tt=qt(this.g);var T=this.g.Ba();const Zi=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||tt!=4||T==7||(T==8||0>=Zi?Mr(3):Mr(2)),ra(this);var x=this.g.Z();this.X=x;t:if(au(this)){var A=va(this.g);h="";var q=A.length,K=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),Vr(this);var te="";break t}this.h.i=new u.TextDecoder}for(T=0;T<q;T++)this.h.h=!0,h+=this.h.i.decode(A[T],{stream:!(K&&T==q-1)});A.length=0,this.h.g+=h,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=x==200,le(this.i,this.u,this.A,this.l,this.R,tt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,ht=this.g;if((Be=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Be)){var Me=Be;break t}}Me=null}if(x=Me)pi(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,x);else{this.o=!1,this.s=3,Pt(12),mi(this),Vr(this);break e}}if(this.P){x=!0;let lt;for(;!this.J&&this.C<te.length;)if(lt=Io(this,te),lt==ta){tt==4&&(this.s=4,Pt(14),x=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==su){this.s=4,Pt(15),pi(this.i,this.l,te,"[Invalid Chunk]"),x=!1;break}else pi(this.i,this.l,lt,null),Fr(this,lt);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||te.length!=0||this.h.h||(this.s=1,Pt(16),x=!1),this.o=this.o&&x,!x)pi(this.i,this.l,te,"[Invalid Chunked Response]"),mi(this),Vr(this);else if(0<te.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),bo(qe),qe.M=!0,Pt(11))}}else pi(this.i,this.l,te,null),Fr(this,te);tt==4&&mi(this),this.o&&!this.J&&(tt==4?Ea(this.j,this):(this.o=!1,Co(this)))}else Kd(this.g),x==400&&0<te.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),mi(this),Vr(this)}}}catch{}finally{}};function au(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Io(h,T){var x=h.C,A=T.indexOf(`
`,x);return A==-1?ta:(x=Number(T.substring(x,A)),isNaN(x)?su:(A+=1,A+x>T.length?ta:(T=T.slice(A,A+x),h.C=A+x,T)))}bn.prototype.cancel=function(){this.J=!0,mi(this)};function Co(h){h.S=Date.now()+h.I,lu(h,h.I)}function lu(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Lr(v(h.ba,h),T)}function ra(h){h.B&&(u.clearTimeout(h.B),h.B=null)}bn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(iu(this.i,this.A),this.L!=2&&(Mr(),Pt(17)),mi(this),this.s=2,Vr(this)):lu(this,this.S-h)};function Vr(h){h.j.G==0||h.J||Ea(h.j,h)}function mi(h){ra(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,yo(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Fr(h,T){try{var x=h.j;if(x.G!=0&&(x.g==h||Re(x.h,h))){if(!h.K&&Re(x.h,h)&&x.G==3){try{var A=x.Da.g.parse(T)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<h.F)Fo(x),Lo(x);else break e;Do(x),Pt(18)}}else x.za=q[1],0<x.za-x.T&&37500>q[2]&&x.F&&x.v==0&&!x.C&&(x.C=Lr(v(x.Za,x),6e3));if(1>=Hi(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ti(x,11)}else if((h.K||x.g==h)&&Fo(x),!N(T))for(q=x.Da.g.parse(T),T=0;T<q.length;T++){let Me=q[T];if(x.T=Me[0],Me=Me[1],x.G==2)if(Me[0]=="c"){x.K=Me[1],x.ia=Me[2];const qe=Me[3];qe!=null&&(x.la=qe,x.j.info("VER="+x.la));const tt=Me[4];tt!=null&&(x.Aa=tt,x.j.info("SVER="+x.Aa));const Zi=Me[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(A=1.5*Zi,x.L=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const lt=h.g;if(lt){const Oo=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var K=A.h;K.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&($e(K,K.h),K.h=null))}if(A.D){const jn=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;jn&&(A.ya=jn,me(A.I,A.D,jn))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-h.F,x.j.info("Handshake RTT: "+x.R+"ms")),A=x;var te=h;if(A.qa=Uo(A,A.J?A.ia:null,A.W),te.K){Or(A.h,te);var Be=te,ht=A.L;ht&&(Be.I=ht),Be.B&&(ra(Be),Co(Be)),A.g=te}else Un(A);0<x.i.length&&Ji(x)}else Me[0]!="stop"&&Me[0]!="close"||Ti(x,7);else x.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Ti(x,7):Mo(x):Me[0]!="noop"&&x.l&&x.l.ta(Me),x.v=0)}}Mr(4)}catch{}}var Ur=class{constructor(h,T){this.g=h,this.map=T}};function oa(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Hi(h){return h.h?1:h.g?h.g.size:0}function Re(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function $e(h,T){h.g?h.g.add(T):h.h=T}function Or(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}oa.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gi(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const x of h.g.values())T=T.concat(x.D);return T}return b(h.i)}function qi(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var T=[],x=h.length,A=0;A<x;A++)T.push(h[A]);return T}T=[],x=0;for(A in h)T[x++]=h[A];return T}function aa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var T=[];h=h.length;for(var x=0;x<h;x++)T.push(x);return T}T=[],x=0;for(const A in h)T[x++]=A;return T}}}function we(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var x=aa(h),A=qi(h),q=A.length,K=0;K<q;K++)T.call(void 0,A[K],x&&x[K],h)}var Ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function la(h,T){if(h){h=h.split("&");for(var x=0;x<h.length;x++){var A=h[x].indexOf("="),q=null;if(0<=A){var K=h[x].substring(0,A);q=h[x].substring(A+1)}else K=h[x];T(K,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function _n(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof _n){this.h=h.h,Ao(this,h.j),this.o=h.o,this.g=h.g,_i(this,h.s),this.l=h.l;var T=h.i,x=new yi;x.i=T.i,T.g&&(x.g=new Map(T.g),x.h=T.h),Qn(this,x),this.m=h.m}else h&&(T=String(h).match(Ye))?(this.h=!1,Ao(this,T[1]||"",!0),this.o=Vn(T[2]||""),this.g=Vn(T[3]||"",!0),_i(this,T[4]),this.l=Vn(T[5]||"",!0),Qn(this,T[6]||"",!0),this.m=Vn(T[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}_n.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Fn(T,$i,!0),":");var x=this.g;return(x||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Fn(T,$i,!0),"@"),h.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&h.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Fn(x,x.charAt(0)=="/"?da:ca,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Fn(x,ha)),h.join("")};function st(h){return new _n(h)}function Ao(h,T,x){h.j=x?Vn(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function _i(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Qn(h,T,x){T instanceof yi?(h.i=T,vn(h.i,h.h)):(x||(T=Fn(T,Po)),h.i=new yi(T,h.h))}function me(h,T,x){h.i.set(T,x)}function yn(h){return me(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Vn(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fn(h,T,x){return typeof h=="string"?(h=encodeURI(h).replace(T,ua),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ua(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $i=/[#\/\?@]/g,ca=/[#\?:]/g,da=/[#\?]/g,Po=/[#\?@]/g,ha=/#/g;function yi(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function an(h){h.g||(h.g=new Map,h.h=0,h.i&&la(h.i,function(T,x){h.add(decodeURIComponent(T.replace(/\+/g," ")),x)}))}t=yi.prototype,t.add=function(h,T){an(this),this.i=null,h=he(this,h);var x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(T),this.h+=1,this};function fa(h,T){an(h),T=he(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function Ro(h,T){return an(h),T=he(h,T),h.g.has(T)}t.forEach=function(h,T){an(this),this.g.forEach(function(x,A){x.forEach(function(q){h.call(T,q,A,this)},this)},this)},t.na=function(){an(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),x=[];for(let A=0;A<T.length;A++){const q=h[A];for(let K=0;K<q.length;K++)x.push(T[A])}return x},t.V=function(h){an(this);let T=[];if(typeof h=="string")Ro(this,h)&&(T=T.concat(this.g.get(he(this,h))));else{h=Array.from(this.g.values());for(let x=0;x<h.length;x++)T=T.concat(h[x])}return T},t.set=function(h,T){return an(this),this.i=null,h=he(this,h),Ro(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},t.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function uu(h,T,x){fa(h,T),0<x.length&&(h.i=null,h.g.set(he(h,T),b(x)),h.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var x=0;x<T.length;x++){var A=T[x];const K=encodeURIComponent(String(A)),te=this.V(A);for(A=0;A<te.length;A++){var q=K;te[A]!==""&&(q+="="+encodeURIComponent(String(te[A]))),h.push(q)}}return this.i=h.join("&")};function he(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function vn(h,T){T&&!h.j&&(an(h),h.i=null,h.g.forEach(function(x,A){var q=A.toLowerCase();A!=q&&(fa(this,A),uu(this,q,x))},h)),h.j=T}function He(h,T){const x=new Dr;if(u.Image){const A=new Image;A.onload=S(Tn,x,"TestLoadImage: loaded",!0,T,A),A.onerror=S(Tn,x,"TestLoadImage: error",!1,T,A),A.onabort=S(Tn,x,"TestLoadImage: abort",!1,T,A),A.ontimeout=S(Tn,x,"TestLoadImage: timeout",!1,T,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else T(!1)}function cu(h,T){const x=new Dr,A=new AbortController,q=setTimeout(()=>{A.abort(),Tn(x,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:A.signal}).then(K=>{clearTimeout(q),K.ok?Tn(x,"TestPingServer: ok",!0,T):Tn(x,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(q),Tn(x,"TestPingServer: error",!1,T)})}function Tn(h,T,x,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(x)}catch{}}function pa(){this.g=new Nr}function ma(h,T,x){const A=x||"";try{we(h,function(q,K){let te=q;f(q)&&(te=vo(q)),T.push(A+K+"="+encodeURIComponent(te))})}catch(q){throw T.push(A+"type="+encodeURIComponent("_badmap")),q}}function En(h){this.l=h.Ub||null,this.j=h.eb||!1}D(En,Xs),En.prototype.g=function(){return new Wi(this.l,this.j)},En.prototype.i=function(h){return function(){return h}}({});function Wi(h,T){dt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Wi,dt),t=Wi.prototype,t.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,ln(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||u).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,et(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ln(this)),this.g&&(this.readyState=3,ln(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ki(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ki(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?et(this):ln(this),this.readyState==3&&Ki(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,et(this))},t.Qa=function(h){this.g&&(this.response=h,et(this))},t.ga=function(){this.g&&et(this)};function et(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ln(h)}t.setRequestHeader=function(h,T){this.u.append(h,T)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var x=T.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=T.next();return h.join(`\r
`)};function ln(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ga(h){let T="";return Z(h,function(x,A){T+=A,T+=":",T+=x,T+=`\r
`}),T}function ko(h,T,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=ga(x),typeof h=="string"?x!=null&&encodeURIComponent(String(x)):me(h,T,x))}function Qe(h){dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Qe,dt);var du=/^https?$/i,_a=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,T,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():So.g(),this.v=this.o?jl(this.o):jl(So),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(K){hu(this,K);return}if(h=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)x.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())x.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(_a,T,void 0))||A||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,te]of x)this.g.setRequestHeader(K,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xt(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){hu(this,K)}};function hu(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,ya(h),No(h)}function ya(h){h.A||(h.A=!0,Et(h,"complete"),Et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Et(this,"complete"),Et(this,"abort"),No(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),No(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ce(this):this.bb())},t.bb=function(){Ce(this)};function Ce(h){if(h.h&&typeof a<"u"&&(!h.v[1]||qt(h)!=4||h.Z()!=2)){if(h.u&&qt(h)==4)Ql(h.Ea,0,h);else if(Et(h,"readystatechange"),qt(h)==4){h.h=!1;try{const te=h.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var x;if(!(x=T)){var A;if(A=te===0){var q=String(h.D).match(Ye)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),A=!du.test(q?q.toLowerCase():"")}x=A}if(x)Et(h,"complete"),Et(h,"success");else{h.m=6;try{var K=2<qt(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",ya(h)}}finally{No(h)}}}}function No(h,T){if(h.g){Xt(h);const x=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||Et(h,"ready");try{x.onreadystatechange=A}catch{}}}function Xt(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function qt(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),Wd(T)}};function va(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Kd(h){const T={};h=(h.g&&2<=qt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var x=O(h[A]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=T[q]||[];T[q]=K,K.push(x)}V(T,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(h,T,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||T}function fu(h){this.Aa=0,this.i=[],this.j=new Dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,h),this.cb=vi("retryDelaySeedMs",1e4,h),this.Wa=vi("forwardChannelMaxRetries",2,h),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new oa(h&&h.concurrentRequestLimit),this.Da=new pa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fu.prototype,t.la=8,t.G=1,t.connect=function(h,T,x,A){Pt(0),this.W=h,this.H=T||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.I=Uo(this,null,this.W),Ji(this)};function Mo(h){if(pu(h),h.G==3){var T=h.U++,x=st(h.I);if(me(x,"SID",h.K),me(x,"RID",T),me(x,"TYPE","terminate"),Br(h,x),T=new bn(h,h.j,T),T.L=2,T.v=yn(st(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(T.v.toString(),"")}catch{}!x&&u.Image&&(new Image().src=T.v,x=!0),x||(T.g=gu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Co(T)}mu(h)}function Lo(h){h.g&&(bo(h),h.g.cancel(),h.g=null)}function pu(h){Lo(h),h.u&&(u.clearTimeout(h.u),h.u=null),Fo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Ji(h){if(!sa(h.h)&&!h.s){h.s=!0;var T=h.Ga;xe||j(),G||(xe(),G=!0),ne.add(T,h),h.B=0}}function Jd(h,T){return Hi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Lr(v(h.Ga,h,T),wa(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new bn(this,this.j,h);let K=this.o;if(this.S&&(K?(K=C(K),U(K,this.S)):K=this.S),this.m!==null||this.O||(q.H=K,K=null),this.P)e:{for(var T=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(T+=A,4096<T){T=x;break e}if(T===4096||x===this.i.length-1){T=x+1;break e}}T=1e3}else T=1e3;T=Ta(this,q,T),x=st(this.I),me(x,"RID",h),me(x,"CVER",22),this.D&&me(x,"X-HTTP-Session-Id",this.D),Br(this,x),K&&(this.O?T="headers="+encodeURIComponent(String(ga(K)))+"&"+T:this.m&&ko(x,this.m,K)),$e(this.h,q),this.Ua&&me(x,"TYPE","init"),this.P?(me(x,"$req",T),me(x,"SID","null"),q.T=!0,na(q,x,null)):na(q,x,T),this.G=2}}else this.G==3&&(h?un(this,h):this.i.length==0||sa(this.h)||un(this))};function un(h,T){var x;T?x=T.l:x=h.U++;const A=st(h.I);me(A,"SID",h.K),me(A,"RID",x),me(A,"AID",h.T),Br(h,A),h.m&&h.o&&ko(A,h.m,h.o),x=new bn(h,h.j,x,h.B+1),h.m===null&&(x.H=h.o),T&&(h.i=T.D.concat(h.i)),T=Ta(h,x,1e3),x.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$e(h.h,x),na(x,A,T)}function Br(h,T){h.H&&Z(h.H,function(x,A){me(T,A,x)}),h.l&&we({},function(x,A){me(T,A,x)})}function Ta(h,T,x){x=Math.min(h.i.length,x);var A=h.l?v(h.l.Na,h.l,h):null;e:{var q=h.i;let K=-1;for(;;){const te=["count="+x];K==-1?0<x?(K=q[0].g,te.push("ofs="+K)):K=0:te.push("ofs="+K);let Be=!0;for(let ht=0;ht<x;ht++){let Me=q[ht].g;const qe=q[ht].map;if(Me-=K,0>Me)K=Math.max(0,q[ht].g-100),Be=!1;else try{ma(qe,te,"req"+Me+"_")}catch{A&&A(qe)}}if(Be){A=te.join("&");break e}}}return h=h.i.splice(0,x),T.D=h,A}function Un(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;xe||j(),G||(xe(),G=!0),ne.add(T,h),h.v=0}}function Do(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Lr(v(h.Fa,h),wa(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Vo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Lr(v(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Lo(this),Vo(this))};function bo(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Vo(h){h.g=new bn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=st(h.qa);me(T,"RID","rpc"),me(T,"SID",h.K),me(T,"AID",h.T),me(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&me(T,"TO",h.ja),me(T,"TYPE","xmlhttp"),Br(h,T),h.m&&h.o&&ko(T,h.m,h.o),h.L&&(h.g.I=h.L);var x=h.g;h=h.ia,x.L=1,x.v=yn(st(T)),x.m=null,x.P=!0,ia(x,h)}t.Za=function(){this.C!=null&&(this.C=null,Lo(this),Do(this),Pt(19))};function Fo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Ea(h,T){var x=null;if(h.g==T){Fo(h),bo(h),h.g=null;var A=2}else if(Re(h.h,T))x=T.D,Or(h.h,T),A=1;else return;if(h.G!=0){if(T.o)if(A==1){x=T.m?T.m.length:0,T=Date.now()-T.F;var q=h.B;A=Eo(),Et(A,new nu(A,x)),Ji(h)}else Un(h);else if(q=T.s,q==3||q==0&&0<T.X||!(A==1&&Jd(h,T)||A==2&&Do(h)))switch(x&&0<x.length&&(T=h.h,T.i=T.i.concat(x)),q){case 1:Ti(h,5);break;case 4:Ti(h,10);break;case 3:Ti(h,6);break;default:Ti(h,2)}}}function wa(h,T){let x=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(x*=2),x*T}function Ti(h,T){if(h.j.info("Error code "+T),T==2){var x=v(h.fb,h),A=h.Xa;const q=!A;A=new _n(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ao(A,"https"),yn(A),q?He(A.toString(),x):cu(A.toString(),x)}else Pt(2);h.G=0,h.l&&h.l.sa(T),mu(h),pu(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function mu(h){if(h.G=0,h.ka=[],h.l){const T=gi(h.h);(T.length!=0||h.i.length!=0)&&(B(h.ka,T),B(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function Uo(h,T,x){var A=x instanceof _n?st(x):new _n(x);if(A.g!="")T&&(A.g=T+"."+A.g),_i(A,A.s);else{var q=u.location;A=q.protocol,T=T?T+"."+q.hostname:q.hostname,q=+q.port;var K=new _n(null);A&&Ao(K,A),T&&(K.g=T),q&&_i(K,q),x&&(K.l=x),A=K}return x=h.D,T=h.ya,x&&T&&me(A,x,T),me(A,"VER",h.la),Br(h,A),A}function gu(h,T,x){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new Qe(new En({eb:x})):new Qe(h.pa),T.Ha(h.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xa(){}t=xa.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(h,T){return new wt(h,T)};function wt(h,T){dt.call(this),this.g=new fu(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!N(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!N(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new wn(this)}D(wt,dt),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){Mo(this.g)},wt.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.u&&(x={},x.__data__=vo(h),h=x);T.i.push(new Ur(T.Ya++,h)),T.G==3&&Ji(T)},wt.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,wt.aa.N.call(this)};function Xn(h){To.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const x in T){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}D(Xn,To);function _u(){ea.call(this),this.status=1}D(_u,ea);function wn(h){this.g=h}D(wn,xa),wn.prototype.ua=function(){Et(this.g,"a")},wn.prototype.ta=function(h){Et(this.g,new Xn(h))},wn.prototype.sa=function(h){Et(this.g,new _u)},wn.prototype.ra=function(){Et(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,LE=function(){return new zr},ME=function(){return Eo()},NE=fi,Vf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,mc=br,xo.COMPLETE="complete",kE=xo,js.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ha=js,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,RE=Qe}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const B_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new wE("@firebase/firestore");function Va(){return ro.logLevel}function se(t,...e){if(ro.logLevel<=De.DEBUG){const n=e.map(dm);ro.debug(`Firestore (${Os}): ${t}`,...n)}}function Di(t,...e){if(ro.logLevel<=De.ERROR){const n=e.map(dm);ro.error(`Firestore (${Os}): ${t}`,...n)}}function As(t,...e){if(ro.logLevel<=De.WARN){const n=e.map(dm);ro.warn(`Firestore (${Os}): ${t}`,...n)}}function dm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+t;throw Di(e),new Error(e)}function Ge(t,e){t||ge()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class kP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NP{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ge(typeof i.accessToken=="string"),new DE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Ot(e)}}class MP{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LP{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new MP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ge(this.o===void 0);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.R=n.token,new DP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=VP(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Fe(t,e){return t<e?-1:t>e?1:0}function Ps(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Tt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Tt(0,0))}static max(){return new Te(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,i){n===void 0?n=0:n>e.length&&ge(),i===void 0?i=e.length-n:i>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Al?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Al{construct(e,n,i){return new je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new je(n)}static emptyPath(){return new je([])}}const FP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Al{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return FP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(je.fromString(e))}static fromName(e){return new ce(je.fromString(e).popFirst(5))}static empty(){return new ce(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new je(e.slice()))}}function UP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new Tr(r,ce.empty(),e)}function OP(t){return new Tr(t.readTime,t.key,-1)}class Tr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Tr(Te.min(),ce.empty(),-1)}static max(){return new Tr(Te.max(),ce.empty(),-1)}}function BP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==zP)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(g=>{a[f]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function HP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hm.oe=-1;function Ad(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function qP(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??kt.RED,this.left=r??kt.EMPTY,this.right=o??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new kt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,i,r,o){return this}insert(e,n,i){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G_(this.data.getIterator())}getIteratorFrom(e){return new G_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class G_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Lt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ps(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new FE("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const $P=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(Ge(!!t),typeof t=="string"){let e=0;const n=$P.exec(t);if(Ge(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oo(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pm(t){const e=t.mapValue.fields.__previous_value__;return fm(e)?pm(e):e}function Pl(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n,i,r,o,a,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f}}class Rl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju={mapValue:{}};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fm(t)?4:JP(t)?9007199254740991:KP(t)?10:11:ge()}function ci(t,e){if(t===e)return!0;const n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pl(t).isEqual(Pl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=Er(r.timestampValue),u=Er(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return oo(r.bytesValue).isEqual(oo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ut(r.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(r.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ut(r.integerValue)===ut(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ut(r.doubleValue),u=ut(o.doubleValue);return a===u?Jc(a)===Jc(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ps(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(z_(a)!==z_(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!ci(a[d],u[d])))return!1;return!0}(t,e);default:return ge()}}function kl(t,e){return(t.values||[]).find(n=>ci(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;const n=so(t),i=so(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ut(o.integerValue||o.doubleValue),d=ut(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return H_(t.timestampValue,e.timestampValue);case 4:return H_(Pl(t),Pl(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(o,a){const u=oo(o),d=oo(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Fe(u[f],d[f]);if(g!==0)return g}return Fe(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Fe(ut(o.latitude),ut(a.latitude));return u!==0?u:Fe(ut(o.longitude),ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return q_(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,d,f,g;const y=o.fields||{},v=a.fields||{},S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,D=(d=v.value)===null||d===void 0?void 0:d.arrayValue,b=Fe(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0);return b!==0?b:q_(S,D)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ju.mapValue&&a===Ju.mapValue)return 0;if(o===Ju.mapValue)return 1;if(a===Ju.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=Fe(d[y],g[y]);if(v!==0)return v;const S=Rs(u[d[y]],f[g[y]]);if(S!==0)return S}return Fe(d.length,g.length)}(t.mapValue,e.mapValue);default:throw ge()}}function H_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Er(t),i=Er(e),r=Fe(n.seconds,i.seconds);return r!==0?r:Fe(n.nanos,i.nanos)}function q_(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Rs(n[r],i[r]);if(o)return o}return Fe(n.length,i.length)}function ks(t){return Ff(t)}function Ff(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Er(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Ff(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Ff(n.fields[a])}`;return r+"}"}(t.mapValue):ge()}function Uf(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function $_(t){return!!t&&"nullValue"in t}function W_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function KP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=nl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=nl(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];gc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Bs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Cn(nl(this.value))}}function UE(t){const e=[];return Bs(t.fields,(n,i)=>{const r=new Nt([n]);if(gc(i)){const o=UE(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new zt(e,0,Te.min(),Te.min(),Te.min(),Cn.empty(),0)}static newFoundDocument(e,n,i,r){return new zt(e,1,n,Te.min(),i,r,0)}static newNoDocument(e,n){return new zt(e,2,n,Te.min(),Te.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,Te.min(),Te.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function K_(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(a.referenceValue),n.key):i=Rs(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function J_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class yt extends OE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new QP(e,n,i):n==="array-contains"?new eR(e,i):n==="in"?new tR(e,i):n==="not-in"?new nR(e,i):n==="array-contains-any"?new iR(e,i):new yt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new XP(e,i):new jP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rs(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends OE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new di(e,n)}matches(e){return BE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BE(t){return t.op==="and"}function zE(t){return YP(t)&&BE(t)}function YP(t){for(const e of t.filters)if(e instanceof di)return!1;return!0}function Of(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+ks(t.value);if(zE(t))return t.filters.map(e=>Of(e)).join(",");{const e=t.filters.map(n=>Of(n)).join(",");return`${t.op}(${e})`}}function GE(t,e){return t instanceof yt?function(i,r){return r instanceof yt&&i.op===r.op&&i.field.isEqual(r.field)&&ci(i.value,r.value)}(t,e):t instanceof di?function(i,r){return r instanceof di&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&GE(a,r.filters[u]),!0):!1}(t,e):void ge()}function HE(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${ks(n.value)}`}(t):t instanceof di?function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"}(t):"Filter"}class QP extends yt{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class XP extends yt{constructor(e,n){super(e,"in",n),this.keys=qE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jP extends yt{constructor(e,n){super(e,"not-in",n),this.keys=qE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}class eR extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&kl(n.arrayValue,this.value)}}class tR extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kl(this.value.arrayValue,n)}}class nR extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!kl(this.value.arrayValue,n)}}class iR extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>kl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function Z_(t,e=null,n=[],i=[],r=null,o=null,a=null){return new rR(t,e,n,i,r,o,a)}function gm(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Of(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ks(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ks(i)).join(",")),e.ue=n}return e.ue}function _m(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J_(t.startAt,e.startAt)&&J_(t.endAt,e.endAt)}function Bf(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oR(t,e,n,i,r,o,a,u){return new Pd(t,e,n,i,r,o,a,u)}function $E(t){return new Pd(t)}function Y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sR(t){return t.collectionGroup!==null}function il(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Lt(Nt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Yc(o,i))}),n.has(Nt.keyField().canonicalString())||e.ce.push(new Yc(Nt.keyField(),i))}return e.ce}function ai(t){const e=Ee(t);return e.le||(e.le=aR(e,il(t))),e.le}function aR(t,e){if(t.limitType==="F")return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Yc(r.field,o)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function zf(t,e,n){return new Pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return _m(ai(t),ai(e))&&t.limitType===e.limitType}function WE(t){return`${gm(ai(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>HE(r)).join(", ")}]`),Ad(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ks(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ks(r)).join(",")),`Target(${i})`}(ai(t))}; limitType=${t.limitType})`}function kd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of il(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const f=K_(a,u,d);return a.inclusive?f<=0:f<0}(i.startAt,il(i),r)||i.endAt&&!function(a,u,d){const f=K_(a,u,d);return a.inclusive?f>=0:f>0}(i.endAt,il(i),r))}(t,e)}function lR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KE(t){return(e,n)=>{let i=!1;for(const r of il(t)){const o=uR(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function uR(t,e,n){const i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Rs(d,f):ge()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return VE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new ot(ce.comparator);function bi(){return cR}const JE=new ot(ce.comparator);function qa(...t){let e=JE;for(const n of t)e=e.insert(n.key,n);return e}function ZE(t){let e=JE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Zr(){return rl()}function YE(){return rl()}function rl(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const dR=new ot(ce.comparator),hR=new Lt(ce.comparator);function ke(...t){let e=hR;for(const n of t)e=e.add(n);return e}const fR=new Lt(Fe);function pR(){return fR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function QE(t){return{integerValue:""+t}}function mR(t,e){return qP(e)?QE(e):ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function gR(t,e,n){return t instanceof Qc?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&fm(o)&&(o=pm(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Nl?jE(t,e):t instanceof Ml?ew(t,e):function(r,o){const a=XE(r,o),u=Q_(a)+Q_(r.Pe);return Uf(a)&&Uf(r.Pe)?QE(u):ym(r.serializer,u)}(t,e)}function _R(t,e,n){return t instanceof Nl?jE(t,e):t instanceof Ml?ew(t,e):n}function XE(t,e){return t instanceof Xc?function(i){return Uf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Qc extends Nd{}class Nl extends Nd{constructor(e){super(),this.elements=e}}function jE(t,e){const n=tw(e);for(const i of t.elements)n.some(r=>ci(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ml extends Nd{constructor(e){super(),this.elements=e}}function ew(t,e){let n=tw(e);for(const i of t.elements)n=n.filter(r=>!ci(r,i));return{arrayValue:{values:n}}}class Xc extends Nd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Q_(t){return ut(t.integerValue||t.doubleValue)}function tw(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yR(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Nl&&r instanceof Nl||i instanceof Ml&&r instanceof Ml?Ps(i.elements,r.elements,ci):i instanceof Xc&&r instanceof Xc?ci(i.Pe,r.Pe):i instanceof Qc&&r instanceof Qc}(t.transform,e.transform)}class vR{constructor(e,n){this.version=e,this.transformResults=n}}class li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Md{}function nw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vm(t.key,li.none()):new Gl(t.key,t.data,li.none());{const n=t.data,i=Cn.empty();let r=new Lt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new uo(t.key,i,new Hn(r.toArray()),li.none())}}function TR(t,e,n){t instanceof Gl?function(r,o,a){const u=r.value.clone(),d=j_(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof uo?function(r,o,a){if(!_c(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=j_(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(iw(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ol(t,e,n,i){return t instanceof Gl?function(o,a,u,d){if(!_c(o.precondition,a))return u;const f=o.value.clone(),g=ey(o.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof uo?function(o,a,u,d){if(!_c(o.precondition,a))return u;const f=ey(o.fieldTransforms,d,a),g=a.data;return g.setAll(iw(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return _c(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function ER(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=XE(i.transform,r||null);o!=null&&(n===null&&(n=Cn.empty()),n.set(i.field,o))}return n||null}function X_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ps(i,r,(o,a)=>yR(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gl extends Md{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class uo extends Md{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function iw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function j_(t,e,n){const i=new Map;Ge(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,_R(a,u,n[r]))}return i}function ey(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,gR(o,a,e))}return i}class vm extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wR extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&TR(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ol(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ol(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=YE();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=nw(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ps(this.mutations,e.mutations,(n,i)=>X_(n,i))&&Ps(this.baseMutations,e.baseMutations,(n,i)=>X_(n,i))}}class Tm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ge(e.mutations.length===i.length);let r=function(){return dR}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Tm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Le;function CR(t){switch(t){default:return ge();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function rw(t){if(t===void 0)return Di("GRPC error has no .code"),X.UNKNOWN;switch(t){case pt.OK:return X.OK;case pt.CANCELLED:return X.CANCELLED;case pt.UNKNOWN:return X.UNKNOWN;case pt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case pt.INTERNAL:return X.INTERNAL;case pt.UNAVAILABLE:return X.UNAVAILABLE;case pt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case pt.NOT_FOUND:return X.NOT_FOUND;case pt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case pt.ABORTED:return X.ABORTED;case pt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case pt.DATA_LOSS:return X.DATA_LOSS;default:return ge()}}(Le=pt||(pt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Xr([4294967295,4294967295],0);function ty(t){const e=AR().encode(t),n=new PE;return n.update(e),new Uint8Array(n.digest())}function ny(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xr([n,i],0),new Xr([r,o],0)]}class Em{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(i<0)throw new $a(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Xr.fromNumber(i)));return r.compare(PR)===1&&(r=new Xr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ty(e),[i,r]=ny(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Em(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=ty(e),[i,r]=ny(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ld(Te.min(),r,new ot(Fe),bi(),ke())}}class Hl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Hl(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class ow{constructor(e,n){this.targetId=e,this.me=n}}class sw{constructor(e,n,i=bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class iy{constructor(){this.fe=0,this.ge=oy(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),i=ke();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ge()}}),new Hl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=oy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RR{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=ry(),this.Qe=new ot(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Bf(o))if(i===0){const a=new ce(o.path);this.Ue(n,a,zt.newNoDocument(a,Te.min()))}else Ge(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),d=u?this.Xe(u,e,a):1;if(d!==0){this.je(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=oo(i).toUint8Array()}catch(d){if(d instanceof FE)return As("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Em(a,r,o)}catch(d){return As(d instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&Bf(u.target)){const d=new ce(u.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,zt.newNoDocument(d,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=ke();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Ld(e,n,this.Qe,this.ke,i);return this.ke=bi(),this.qe=ry(),this.Qe=new ot(Fe),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Lt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ry(){return new ot(ce.comparator)}function oy(){return new ot(ce.comparator)}const kR={asc:"ASCENDING",desc:"DESCENDING"},NR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MR={and:"AND",or:"OR"};class LR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gf(t,e){return t.useProto3Json||Ad(e)?e:{value:e}}function jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DR(t,e){return jc(t,e.toTimestamp())}function ui(t){return Ge(!!t),Te.fromTimestamp(function(n){const i=Er(n);return new Tt(i.seconds,i.nanos)}(t))}function wm(t,e){return Hf(t,e).canonicalString()}function Hf(t,e){const n=function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lw(t){const e=je.fromString(t);return Ge(fw(e)),e}function qf(t,e){return wm(t.databaseId,e.path)}function kh(t,e){const n=lw(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(cw(n))}function uw(t,e){return wm(t.databaseId,e)}function bR(t){const e=lw(t);return e.length===4?je.emptyPath():cw(e)}function $f(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cw(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sy(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function VR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Ge(g===void 0||typeof g=="string"),bt.fromBase64String(g||"")):(Ge(g===void 0||g instanceof Buffer||g instanceof Uint8Array),bt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const g=f.code===void 0?X.UNKNOWN:rw(f.code);return new ue(g,f.message||"")}(a);n=new sw(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=kh(t,i.document.name),o=ui(i.document.updateTime),a=i.document.createTime?ui(i.document.createTime):Te.min(),u=new Cn({mapValue:{fields:i.document.fields}}),d=zt.newFoundDocument(r,o,a,u),f=i.targetIds||[],g=i.removedTargetIds||[];n=new yc(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=kh(t,i.document),o=i.readTime?ui(i.readTime):Te.min(),a=zt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new yc([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=kh(t,i.document),o=i.removedTargetIds||[];n=new yc([],o,r,null)}else{if(!("filter"in e))return ge();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new IR(r,o),u=i.targetId;n=new ow(u,a)}}return n}function FR(t,e){let n;if(e instanceof Gl)n={update:sy(t,e.key,e.value)};else if(e instanceof vm)n={delete:qf(t,e.key)};else if(e instanceof uo)n={update:sy(t,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof wR))return ge();n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Qc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Nl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ml)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Xc)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw ge()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:DR(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge()}(t,e.precondition)),n}function UR(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?ui(r.updateTime):ui(o);return a.isEqual(Te.min())&&(a=ui(o)),new vR(a,r.transformResults||[])}(n,e))):[]}function OR(t,e){return{documents:[uw(t,e.path)]}}function BR(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=uw(t,r);const o=function(f){if(f.length!==0)return hw(di.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:Wo(v.field),direction:HR(v.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Gf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function zR(t){let e=bR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ge(i===1);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=dw(y);return v instanceof di&&zE(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(D){return new Yc(Ko(D.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Ad(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(y){const v=!!y.before,S=y.values||[];return new Zc(S,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,S=y.values||[];return new Zc(S,v)}(n.endAt)),oR(e,r,a,o,u,"F",d,f)}function GR(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ko(n.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ko(n.unaryFilter.field);return yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ko(n.unaryFilter.field);return yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ko(n.unaryFilter.field);return yt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return yt.create(Ko(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return di.create(n.compositeFilter.filters.map(i=>dw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function HR(t){return kR[t]}function qR(t){return NR[t]}function $R(t){return MR[t]}function Wo(t){return{fieldPath:t.canonicalString()}}function Ko(t){return Nt.fromServerFormat(t.fieldPath)}function hw(t){return t instanceof yt?function(n){if(n.op==="=="){if(W_(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NAN"}};if($_(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W_(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NOT_NAN"}};if($_(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(n.field),op:qR(n.op),value:n.value}}}(t):t instanceof di?function(n){const i=n.getFilters().map(r=>hw(r));return i.length===1?i[0]:{compositeFilter:{op:$R(n.op),filters:i}}}(t):ge()}function WR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,i,r,o=Te.min(),a=Te.min(),u=bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.ct=e}}function JR(t){const e=zR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.un=new YR}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Tr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class YR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Lt(je.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Lt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ns(0)}static kn(){return new Ns(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ol(i.mutation,r,Hn.empty(),Tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=qa();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=bi();const a=rl(),u=function(){return rl()}();return n.forEach((d,f)=>{const g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof uo)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),ol(g.mutation,f,g.mutation.getFieldMask(),Tt.now())):a.set(f.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>a.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new XR(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const i=rl();let r=new ot((a,u)=>a-u),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=i.get(d)||Hn.empty();g=u.applyToLocalView(f,g),i.set(d,g);const y=(r.get(u.batchId)||ke()).add(d);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=YE();g.forEach(v=>{if(!o.has(v)){const S=nw(n.get(v),i.get(v));S!==null&&y.set(v,S),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(Zr());let u=-1,d=o;return a.next(f=>Q.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Q.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{d=d.insert(g,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,ke())).next(g=>({batchId:u,changes:ZE(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let r=qa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=qa();return this.indexManager.getCollectionParents(e,o).next(u=>Q.forEach(u,d=>{const f=function(y,v){return new Pd(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,zt.newInvalidDocument(g)))});let u=qa();return a.forEach((d,f)=>{const g=o.get(d);g!==void 0&&ol(g.mutation,f,Hn.empty(),Tt.now()),kd(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ui(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:JR(r.bundledQuery),readTime:ui(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.overlays=new ot(ce.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Zr();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=Zr(),o=n.length+1,a=new ce(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ot((f,g)=>f-g);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=Zr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Zr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=r)););return Q.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new SR(n,i));let o=this.Ir.get(n);o===void 0&&(o=ke(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Tr=new Lt(St.Er),this.dr=new Lt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new St(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new St(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ce(new je([])),i=new St(n,e),r=new St(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ce(new je([])),i=new St(n,e),r=new St(n,e+1);let o=ke();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new St(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ce.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Lt(St.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new xR(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new St(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new St(n,0),r=new St(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Lt(Fe);return n.forEach(r=>{const o=new St(r,0),a=new St(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ce.isDocumentKey(o)||(o=o.child(""));const a=new St(new ce(o),0);let u=new Lt(Fe);return this.br.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.wr)),!0)},a),Q.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,r=>{const o=new St(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new St(n,0),r=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.Mr=e,this.docs=function(){return new ot(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let i=bi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():zt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=bi();const a=n.path,u=new ce(a.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||BP(OP(g),i)<=0||(r.has(g.key)||kd(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ge()}Or(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ok(this)}getSize(e){return Q.resolve(this.size)}}class ok extends QR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.persistence=e,this.Nr=new zs(n=>gm(n),_m),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xm,this.targetCount=0,this.kr=Ns.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ns(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hm(0),this.Kr=!1,this.Kr=!0,this.$r=new nk,this.referenceDelegate=e(this),this.Ur=new sk(this),this.indexManager=new ZR,this.remoteDocumentCache=function(r){return new rk(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new KR(n),this.Gr=new ek(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new ik(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new lk(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class lk extends GP{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Jr=new xm,this.Yr=null}static Zr(e){return new Sm(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const r=ce.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,Te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ke(),r=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Im(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cA()?8:HP(lA())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new uk;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Va()<=De.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",$o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Va()<=De.DEBUG&&se("QueryEngine","Query:",$o(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Va()<=De.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",$o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):Q.resolve())}Yi(e,n){if(Y_(n))return Q.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=zf(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ke(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.ts(n,u);return this.ns(n,f,a,d.readTime)?this.Yi(e,zf(n,null,"F")):this.rs(e,f,n,d)}))})))}Zi(e,n,i,r){return Y_(n)||r.isEqual(Te.min())?Q.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?Q.resolve(null):(Va()<=De.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$o(n)),this.rs(e,a,n,UP(r,-1)).next(u=>u))})}ts(e,n){let i=new Lt(KE(e));return n.forEach((r,o)=>{kd(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Va()<=De.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",$o(n)),this.Ji.getDocumentsMatchingQuery(e,n,Tr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ot(Fe),this._s=new zs(o=>gm(o),_m),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function hk(t,e,n,i){return new dk(t,e,n,i)}async function pw(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=ke();for(const f of r){a.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function fk(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,g){const y=f.batch,v=y.keys();let S=Q.resolve();return v.forEach(D=>{S=S.next(()=>g.getEntry(d,D)).next(b=>{const B=f.docVersions.get(D);Ge(B!==null),b.version.compareTo(B)<0&&(y.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),g.addEntry(b)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=ke();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function mw(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function pk(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((g,y)=>{const v=r.get(y);if(!v)return;u.push(n.Ur.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,g.addedDocuments,y)));let S=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(bt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),r=r.insert(y,S),function(b,B,R){return b.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(v,S,g)&&u.push(n.Ur.updateTargetData(o,S))});let d=bi(),f=ke();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(mk(o,a,e.documentUpdates).next(g=>{d=g.Ps,f=g.Is})),!i.isEqual(Te.min())){const g=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return Q.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.os=r,o))}function mk(t,e,n){let i=ke(),r=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=bi();return n.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Te.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):se("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ps:a,Is:r}})}function gk(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _k(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new rr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Wf(t,e,n){const i=Ee(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!zl(a))throw a;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function ay(t,e,n){const i=Ee(t);let r=Te.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,g){const y=Ee(d),v=y._s.get(g);return v!==void 0?Q.resolve(y.os.get(v)):y.Ur.getTargetData(f,g)}(i,a,ai(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:Te.min(),n?o:ke())).next(u=>(yk(i,lR(e),u),{documents:u,Ts:o})))}function yk(t,e,n){let i=t.us.get(e)||Te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class ly{constructor(){this.activeTargetIds=pR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vk{constructor(){this.so=new ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ly,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu=null;function Nh(){return Zu===null?Zu=function(){return 268435456+Math.round(2147483648*Math.random())}():Zu++,"0x"+Zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class xk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=Nh(),d=this.xo(n,i.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(n,d,f,r).then(g=>(se("RestConnection",`Received RPC '${n}' ${u}: `,g),g),g=>{throw As("RestConnection",`RPC '${n}' ${u} failed with error: `,g,"url: ",d,"request:",r),g})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=Ek[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Nh();return new Promise((a,u)=>{const d=new RE;d.setWithCredentials(!0),d.listenOnce(kE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case mc.NO_ERROR:const g=d.getResponseJson();se(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case mc.TIMEOUT:se(Ut,`RPC '${e}' ${o} timed out`),u(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const y=d.getStatus();if(se(Ut,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const D=function(B){const R=B.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(R)>=0?R:X.UNKNOWN}(S.status);u(new ue(D,S.message))}else u(new ue(X.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ue(X.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{se(Ut,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);se(Ut,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,i,15)})}Bo(e,n,i){const r=Nh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LE(),u=ME(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const g=o.join("");se(Ut,`Creating RPC '${e}' stream ${r}: ${g}`,d);const y=a.createWebChannel(g,d);let v=!1,S=!1;const D=new wk({Io:B=>{S?se(Ut,`Not sending because RPC '${e}' stream ${r} is closed:`,B):(v||(se(Ut,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),se(Ut,`RPC '${e}' stream ${r} sending:`,B),y.send(B))},To:()=>y.close()}),b=(B,R,N)=>{B.listen(R,k=>{try{N(k)}catch(H){setTimeout(()=>{throw H},0)}})};return b(y,Ha.EventType.OPEN,()=>{S||(se(Ut,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),b(y,Ha.EventType.CLOSE,()=>{S||(S=!0,se(Ut,`RPC '${e}' stream ${r} transport closed`),D.So())}),b(y,Ha.EventType.ERROR,B=>{S||(S=!0,As(Ut,`RPC '${e}' stream ${r} transport errored:`,B),D.So(new ue(X.UNAVAILABLE,"The operation could not be completed")))}),b(y,Ha.EventType.MESSAGE,B=>{var R;if(!S){const N=B.data[0];Ge(!!N);const k=N,H=k.error||((R=k[0])===null||R===void 0?void 0:R.error);if(H){se(Ut,`RPC '${e}' stream ${r} received error:`,H);const J=H.status;let Z=function(P){const U=pt[P];if(U!==void 0)return rw(U)}(J),V=H.message;Z===void 0&&(Z=X.INTERNAL,V="Unknown error status: "+J+" with message "+H.message),S=!0,D.So(new ue(Z,V)),y.close()}else se(Ut,`RPC '${e}' stream ${r} received:`,N),D.bo(N)}}),b(u,NE.STAT_EVENT,B=>{B.stat===Vf.PROXY?se(Ut,`RPC '${e}' stream ${r} detected buffering proxy`):B.stat===Vf.NOPROXY&&se(Ut,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){return new LR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,i,r,o,a,u,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ue(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sk extends _w{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=VR(this.serializer,e),i=function(o){if(!("targetChange"in o))return Te.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?ui(a.readTime):Te.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=Bf(d)?{documents:OR(o,d)}:{query:BR(o,d)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=aw(o,a.resumeToken);const f=Gf(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Te.min())>0){u.readTime=jc(o,a.snapshotVersion.toTimestamp());const f=Gf(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=GR(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.a_(n)}}class Ik extends _w{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UR(e.writeResults,e.commitTime),i=ui(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=$f(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>FR(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Hf(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(X.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Hf(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(X.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ak{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{co(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Ee(d);f.L_.add(4),await ql(f),f.q_.set("Unknown"),f.L_.delete(4),await bd(f)}(this))})}),this.q_=new Ak(i,r)}}async function bd(t){if(co(t))for(const e of t.B_)await e(!0)}async function ql(t){for(const e of t.B_)await e(!1)}function yw(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rm(n)?Pm(n):Gs(n).r_()&&Am(n,e))}function Cm(t,e){const n=Ee(t),i=Gs(n);n.N_.delete(e),i.r_()&&vw(n,e),n.N_.size===0&&(i.r_()?i.o_():co(n)&&n.q_.set("Unknown"))}function Am(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gs(t).A_(e)}function vw(t,e){t.Q_.xe(e),Gs(t).R_(e)}function Pm(t){t.Q_=new RR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Gs(t).start(),t.q_.v_()}function Rm(t){return co(t)&&!Gs(t).n_()&&t.N_.size>0}function co(t){return Ee(t).L_.size===0}function Tw(t){t.Q_=void 0}async function Rk(t){t.q_.set("Online")}async function kk(t){t.N_.forEach((e,n)=>{Am(t,e)})}async function Nk(t,e){Tw(t),Rm(t)?(t.q_.M_(e),Pm(t)):t.q_.set("Unknown")}async function Mk(t,e,n){if(t.q_.set("Online"),e instanceof sw&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ed(t,i)}else if(e instanceof yc?t.Q_.Ke(e):e instanceof ow?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Te.min()))try{const i=await mw(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.N_.get(f);g&&o.N_.set(f,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,f)=>{const g=o.N_.get(d);if(!g)return;o.N_.set(d,g.withResumeToken(bt.EMPTY_BYTE_STRING,g.snapshotVersion)),vw(o,d);const y=new rr(g.target,d,f,g.sequenceNumber);Am(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await ed(t,i)}}async function ed(t,e,n){if(!zl(e))throw e;t.L_.add(1),await ql(t),t.q_.set("Offline"),n||(n=()=>mw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await bd(t)})}function Ew(t,e){return e().catch(n=>ed(t,n,e))}async function Vd(t){const e=Ee(t),n=wr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lk(e);)try{const r=await gk(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,Dk(e,r)}catch(r){await ed(e,r)}ww(e)&&xw(e)}function Lk(t){return co(t)&&t.O_.length<10}function Dk(t,e){t.O_.push(e);const n=wr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ww(t){return co(t)&&!wr(t).n_()&&t.O_.length>0}function xw(t){wr(t).start()}async function bk(t){wr(t).p_()}async function Vk(t){const e=wr(t);for(const n of t.O_)e.m_(n.mutations)}async function Fk(t,e,n){const i=t.O_.shift(),r=Tm.from(i,e,n);await Ew(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Vd(t)}async function Uk(t,e){e&&wr(t).V_&&await async function(i,r){if(function(a){return CR(a)&&a!==X.ABORTED}(r.code)){const o=i.O_.shift();wr(i).s_(),await Ew(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Vd(i)}}(t,e),ww(t)&&xw(t)}async function cy(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=co(n);n.L_.add(3),await ql(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await bd(n)}async function Ok(t,e){const n=Ee(t);e?(n.L_.delete(2),await bd(n)):e||(n.L_.add(2),await ql(n),n.q_.set("Unknown"))}function Gs(t){return t.K_||(t.K_=function(n,i,r){const o=Ee(n);return o.w_(),new Sk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:Rk.bind(null,t),Ro:kk.bind(null,t),mo:Nk.bind(null,t),d_:Mk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rm(t)?Pm(t):t.q_.set("Unknown")):(await t.K_.stop(),Tw(t))})),t.K_}function wr(t){return t.U_||(t.U_=function(n,i,r){const o=Ee(n);return o.w_(),new Ik(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bk.bind(null,t),mo:Uk.bind(null,t),f_:Vk.bind(null,t),g_:Fk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vd(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new km(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nm(t,e){if(Di("AsyncQueue",`${e}: ${t}`),zl(t))return new ue(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=qa(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new gs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.W_=new ot(ce.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ms{constructor(e,n,i,r,o,a,u,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ms(e,n,gs.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zk{constructor(){this.queries=hy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ee(n),o=r.queries;r.queries=hy(),o.forEach((a,u)=>{for(const d of u.j_)d.onError(i)})})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function hy(){return new zs(t=>WE(t),Rd)}async function Gk(t,e){const n=Ee(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Bk,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Nm(a,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Mm(n)}async function Hk(t,e){const n=Ee(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qk(t,e){const n=Ee(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&Mm(n)}function $k(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Mm(t){t.Y_.forEach(e=>{e.next()})}var Kf,fy;(fy=Kf||(Kf={})).ea="default",fy.Cache="cache";class Wk{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ms(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.key=e}}class Iw{constructor(e){this.key=e}}class Kk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=KE(e),this.Ra=new gs(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new dy,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,y)=>{const v=r.get(g),S=kd(this.query,y)?y:null,D=!!v&&this.mutatedKeys.has(v.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let B=!1;v&&S?v.data.isEqual(S.data)?D!==b&&(i.track({type:3,doc:S}),B=!0):this.ga(v,S)||(i.track({type:2,doc:S}),B=!0,(d&&this.Aa(S,d)>0||f&&this.Aa(S,f)<0)&&(u=!0)):!v&&S?(i.track({type:0,doc:S}),B=!0):v&&!S&&(i.track({type:1,doc:v}),B=!0,(d||f)&&(u=!0)),B&&(S?(a=a.add(S),o=b?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((g,y)=>function(S,D){const b=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return b(S)-b(D)}(g.type,y.type)||this.Aa(g.doc,y.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,f=d!==this.Ea;return this.Ea=d,a.length!==0||f?{snapshot:new Ms(this.query,e.Ra,o,a,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Iw(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Sw(i))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Jk{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Zk{constructor(e){this.key=e,this.va=!1}}class Yk{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zs(u=>WE(u),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ce.comparator),this.Na=new Map,this.La=new xm,this.Ba={},this.ka=new Map,this.qa=Ns.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Qk(t,e,n=!0){const i=Nw(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await Cw(i,e,n,!0),r}async function Xk(t,e){const n=Nw(t);await Cw(n,e,!0,!1)}async function Cw(t,e,n,i){const r=await _k(t.localStore,ai(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await jk(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&yw(t.remoteStore,r),u}async function jk(t,e,n,i,r){t.Ka=(y,v,S)=>async function(b,B,R,N){let k=B.view.ma(R);k.ns&&(k=await ay(b.localStore,B.query,!1).then(({documents:V})=>B.view.ma(V,k)));const H=N&&N.targetChanges.get(B.targetId),J=N&&N.targetMismatches.get(B.targetId)!=null,Z=B.view.applyChanges(k,b.isPrimaryClient,H,J);return my(b,B.targetId,Z.wa),Z.snapshot}(t,y,v,S);const o=await ay(t.localStore,e,!0),a=new Kk(e,o.Ts),u=a.ma(o.documents),d=Hl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,d);my(t,n,f.wa);const g=new Jk(e,n,a);return t.Fa.set(e,g),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function eN(t,e,n){const i=Ee(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!Rd(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Wf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Cm(i.remoteStore,r.targetId),Jf(i,r.targetId)}).catch(Bl)):(Jf(i,r.targetId),await Wf(i.localStore,r.targetId,!0))}async function tN(t,e){const n=Ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cm(n.remoteStore,i.targetId))}async function nN(t,e,n){const i=uN(t);try{const r=await function(a,u){const d=Ee(a),f=Tt.now(),g=u.reduce((S,D)=>S.add(D.key),ke());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=bi(),b=ke();return d.cs.getEntries(S,g).next(B=>{D=B,D.forEach((R,N)=>{N.isValidDocument()||(b=b.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,D)).next(B=>{y=B;const R=[];for(const N of u){const k=ER(N,y.get(N.key).overlayedDocument);k!=null&&R.push(new uo(N.key,k,UE(k.value.mapValue),li.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,R,u)}).next(B=>{v=B;const R=B.applyToLocalDocumentSet(y,b);return d.documentOverlayCache.saveOverlays(S,B.batchId,R)})}).then(()=>({batchId:v.batchId,changes:ZE(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let f=a.Ba[a.currentUser.toKey()];f||(f=new ot(Fe)),f=f.insert(u,d),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,n),await $l(i,r.changes),await Vd(i.remoteStore)}catch(r){const o=Nm(r,"Failed to persist write");n.reject(o)}}async function Aw(t,e){const n=Ee(t);try{const i=await pk(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(Ge(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Ge(a.va):r.removedDocuments.size>0&&(Ge(a.va),a.va=!1))}),await $l(n,i,e)}catch(i){await Bl(i)}}function py(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ee(a);d.onlineState=u;let f=!1;d.queries.forEach((g,y)=>{for(const v of y.j_)v.Z_(u)&&(f=!0)}),f&&Mm(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iN(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new ot(ce.comparator);a=a.insert(o,zt.newNoDocument(o,Te.min()));const u=ke().add(o),d=new Ld(Te.min(),new Map,new ot(Fe),a,u);await Aw(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Lm(i)}else await Wf(i.localStore,e,!1).then(()=>Jf(i,e,n)).catch(Bl)}async function rN(t,e){const n=Ee(t),i=e.batch.batchId;try{const r=await fk(n.localStore,e);Rw(n,i,null),Pw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await $l(n,r)}catch(r){await Bl(r)}}async function oN(t,e,n){const i=Ee(t);try{const r=await function(a,u){const d=Ee(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ge(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(i.localStore,e);Rw(i,e,n),Pw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await $l(i,r)}catch(r){await Bl(r)}}function Pw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Rw(t,e,n){const i=Ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||kw(t,i)})}function kw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lm(t))}function my(t,e,n){for(const i of n)i instanceof Sw?(t.La.addReference(i.key,e),sN(t,i)):i instanceof Iw?(se("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||kw(t,i.key)):ge()}function sN(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(i),Lm(t))}function Lm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ce(je.fromString(e)),i=t.qa.next();t.Na.set(i,new Zk(n)),t.Oa=t.Oa.insert(n,i),yw(t.remoteStore,new rr(ai($E(n.path)),i,"TargetPurposeLimboResolution",hm.oe))}}async function $l(t,e,n){const i=Ee(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,d)=>{a.push(i.Ka(d,e,n).then(f=>{var g;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){r.push(f);const y=Im.Wi(d.targetId,f);o.push(y)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(d,f){const g=Ee(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(f,v=>Q.forEach(v.$i,S=>g.persistence.referenceDelegate.addReference(y,v.targetId,S)).next(()=>Q.forEach(v.Ui,S=>g.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))}catch(y){if(!zl(y))throw y;se("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const S=g.os.get(v),D=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(D);g.os=g.os.insert(v,b)}}}(i.localStore,o))}async function aN(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await pw(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(d=>{d.reject(new ue(X.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await $l(n,i.hs)}}function lN(t,e){const n=Ee(t),i=n.Na.get(e);if(i&&i.va)return ke().add(i.key);{let r=ke();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function Nw(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iN.bind(null,e),e.Ca.d_=qk.bind(null,e.eventManager),e.Ca.$a=$k.bind(null,e.eventManager),e}function uN(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oN.bind(null,e),e}class td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return hk(this.persistence,new ck,e.initialUser,this.serializer)}Ga(e){return new ak(Sm.Zr,this.serializer)}Wa(e){return new vk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}td.provider={build:()=>new td};class Zf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>py(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aN.bind(null,this.syncEngine),await Ok(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zk}()}createDatastore(e){const n=Dd(e.databaseInfo.databaseId),i=function(o){return new xk(o)}(e.databaseInfo);return function(o,a,u,d){return new Ck(o,a,u,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Pk(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>py(this.syncEngine,n,0),function(){return uy.D()?new uy:new Tk}())}createSyncEngine(e,n){return function(r,o,a,u,d,f,g){const y=new Yk(r,o,a,u,d,f);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ee(r);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ql(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zf.provider={build:()=>new Zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=bE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Nm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lh(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await pw(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hN(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>cy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>cy(e.remoteStore,r)),t._onlineComponents=e}async function hN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Lh(t,new td)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Lh(t,new td);return t._offlineComponents}async function Mw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await gy(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await gy(t,new Zf))),t._onlineComponents}function fN(t){return Mw(t).then(e=>e.syncEngine)}async function pN(t){const e=await Mw(t),n=e.eventManager;return n.onListen=Qk.bind(null,e.syncEngine),n.onUnlisten=eN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tN.bind(null,e.syncEngine),n}function mN(t,e,n={}){const i=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,d,f){const g=new cN({next:v=>{g.Za(),a.enqueueAndForget(()=>Hk(o,y)),v.fromCache&&d.source==="server"?f.reject(new ue(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Wk(u,g,{includeMetadataChanges:!0,_a:!0});return Gk(o,y)}(await pN(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e,n){if(!n)throw new ue(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gN(t,e,n,i){if(e===!0&&i===!0)throw new ue(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yy(t){if(!ce.isDocumentKey(t))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vy(t){if(ce.isDocumentKey(t))throw new ue(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Dm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function Ls(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dm(t);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new RP;switch(i.type){case"firstParty":return new LP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=_y.get(n);i&&(se("ComponentProvider","Removing Datastore"),_y.delete(n),i.terminate())}(this),Promise.resolve()}}function _N(t,e,n,i={}){var r;const o=(t=Ls(t,Fd))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=Ot.MOCK_USER;else{u=aA(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(f)}t._authCredentials=new kP(new DE(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ud(this.firestore,e,this._query)}}class Rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class _r extends Ud{constructor(e,n,i){super(e,n,$E(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new ce(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function yN(t,e,...n){if(t=xl(t),Dw("collection","path",e),t instanceof Fd){const i=je.fromString(e,...n);return vy(i),new _r(t,null,i)}{if(!(t instanceof Rn||t instanceof _r))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return vy(i),new _r(t.firestore,null,i)}}function bw(t,e,...n){if(t=xl(t),arguments.length===1&&(e=bE.newId()),Dw("doc","path",e),t instanceof Fd){const i=je.fromString(e,...n);return yy(i),new Rn(t,null,new ce(i))}{if(!(t instanceof Rn||t instanceof _r))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return yy(i),new Rn(t.firestore,t instanceof _r?t.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gw(this,"async_queue_retry"),this.Vu=()=>{const i=Mh();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Mh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Mh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zl(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw Di("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=km.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Od extends Fd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Ey,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ey(e),this._firestoreClient=void 0,await e}}}function vN(t,e){const n=typeof t=="object"?t:gP(),i=typeof t=="string"?t:"(default)",r=hP(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=oA("firestore");o&&_N(r,...o)}return r}function Vw(t){if(t._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TN(t),t._firestoreClient}function TN(t){var e,n,i;const r=t._freezeSettings(),o=function(u,d,f,g){return new WP(u,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Lw(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new dN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(bt.fromBase64String(e))}catch(n){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ds(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^__.*__$/;class wN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}function Uw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Um{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Uw(this.Cu)&&EN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Dd(e)}Qu(e,n,i,r=!1){return new Um({Cu:e,methodName:n,qu:i,path:Nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SN(t){const e=t._freezeSettings(),n=Dd(t._databaseId);return new xN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IN(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);Gw("Data must be an object, but it was:",a,i);const u=Bw(i,a);let d,f;if(o.merge)d=new Hn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=CN(e,y,n);if(!a.contains(v))throw new ue(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);PN(g,v)||g.push(v)}d=new Hn(g),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new wN(new Cn(u),d,f)}function Ow(t,e){if(zw(t=xl(t)))return Gw("Unsupported field value:",e,t),Bw(t,e);if(t instanceof Fw)return function(i,r){if(!Uw(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=Ow(u,r.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=xl(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Tt.fromDate(i);return{timestampValue:jc(r.serializer,o)}}if(i instanceof Tt){const o=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jc(r.serializer,o)}}if(i instanceof Vm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ds)return{bytesValue:aw(r.serializer,i._byteString)};if(i instanceof Rn){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Fm)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return ym(u.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Dm(i)}`)}(t,e)}function Bw(t,e){const n={};return VE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(i,r)=>{const o=Ow(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function zw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Vm||t instanceof Ds||t instanceof Rn||t instanceof Fw||t instanceof Fm)}function Gw(t,e,n){if(!zw(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Dm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function CN(t,e,n){if((e=xl(e))instanceof bm)return e._internalPath;if(typeof e=="string")return Hw(t,e);throw nd("Field path arguments must be of type string or ",t,!1,void 0,n)}const AN=new RegExp("[~\\*/\\[\\]]");function Hw(t,e,n){if(e.search(AN)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bm(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new ue(X.INVALID_ARGUMENT,u+t+d)}function PN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($w("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RN extends qw{data(){return super.data()}}function $w(t,e){return typeof e=="string"?Hw(t,e):e instanceof bm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NN{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Bs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>ut(a.doubleValue));return new Fm(o)}convertGeoPoint(e){return new Vm(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=pm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const n=Er(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=je.fromString(e);Ge(fw(i));const r=new Rl(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return r.isEqual(n)||Di(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LN extends qw{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field($w("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vc extends LN{data(e={}){return super.data(e)}}class DN{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Yu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vc(this._firestore,this._userDataWriter,i.key,i,new Yu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new vc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new vc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:bN(u.type),doc:d,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}class VN extends NN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function FN(t){t=Ls(t,Ud);const e=Ls(t.firestore,Od),n=Vw(e),i=new VN(e);return kN(t._query),mN(n,t._query).then(r=>new DN(e,i,t,r))}function UN(t,e,n){t=Ls(t,Rn);const i=Ls(t.firestore,Od),r=MN(t.converter,e);return Ww(i,[IN(SN(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,li.none())])}function ON(t){return Ww(Ls(t.firestore,Od),[new vm(t._key,li.none())])}function Ww(t,e){return function(i,r){const o=new gr;return i.asyncQueue.enqueueAndForget(async()=>nN(await fN(i),r,o)),o.promise}(Vw(t),e)}(function(e,n=!0){(function(r){Os=r})(mP),Kc(new Sl("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Od(new NP(i.getProvider("auth-internal")),new bP(i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rl(f.options.projectId,g)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ms(B_,"4.7.3",e),ms(B_,"4.7.3","esm2017")})();const Kw={apiKey:"AIzaSyCAdwbA5u0oLe0m6oKryKwHx1XBiDEWnrk",authDomain:"izbb-taxi-management.firebaseapp.com",projectId:"izbb-taxi-management",storageBucket:"izbb-taxi-management.firebasestorage.app",messagingSenderId:"956551883987",appId:"1:956551883987:web:3f6bc14aad0c026f357826"},Jw=!!Kw.apiKey;let Qu,Zw;if(Jw)try{const t=_P();t.length===0?Qu=IE(Kw):Qu=t[0],Qu&&(Zw=vN(Qu),console.log("Firebase baaryla balatld."))}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn("Firebase yaplandrmas yaplmam. Ltfen .env dosyasn oluturun.");const wy=Zw,Om="taxi_stands",Bm=()=>{if(!Jw)throw new Error("Ltfen 'services/firebaseConfig.ts' dosyasn ap Firebase ayarlarnz giriniz. (apiKey, projectId vb.)");if(!wy)throw new Error("Firebase veritaban balants balatlamad. API anahtarlarnz ve internet balantnz kontrol edin.");return wy},BN=async()=>{const t=Bm();try{const e=await FN(yN(t,Om)),n=[];return e.forEach(i=>{n.push(i.data())}),n}catch(e){throw console.error("getStands Error:",e),e}},id=async t=>{const e=Bm(),n=bw(e,Om,t.id);await UN(n,t)},zN=async t=>{const e=Bm();await ON(bw(e,Om,t))},Yf=(t,e)=>{var a,u,d,f;const n=[];if(["name","phone","city","district","neighborhood","street","address","capacity","ukomeDecisionNo","ukomeDate","ukomeSummary","status","officeType","responsibility","notes"].forEach(g=>{const y=String(t[g]||"").trim(),v=String(e[g]||"").trim();if(y!==v){if(!t[g]&&!e[g])return;n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:g,oldValue:y||"(Bo)",newValue:v||"(Bo)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}}),((a=t.location)==null?void 0:a.lat)!==((u=e.location)==null?void 0:u.lat)||((d=t.location)==null?void 0:d.lng)!==((f=e.location)==null?void 0:f.lng)){const g=t.location?`${t.location.lat}, ${t.location.lng}`:"(Konum Yok)",y=e.location?`${e.location.lat}, ${e.location.lng}`:"(Konum Yok)";g!==y&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"location",oldValue:g,newValue:y,changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}const r=(t.plates||[]).sort().join(", "),o=(e.plates||[]).sort().join(", ");return r!==o&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"plates",oldValue:r||"(Plaka Yok)",newValue:o||"(Plaka Yok)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate}),n};var Qf=(t=>(t.ACTIVE="Aktif",t.PASSIVE="Pasif",t.PENDING="Onay Bekliyor",t))(Qf||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(t,e)=>{const n=pe.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:d,...f},g)=>pe.createElement("svg",{ref:g,...GN,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${HN(t)}`,u].join(" "),...f},[...e.map(([y,v])=>pe.createElement(y,v)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Ve("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=Ve("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Ve("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=Ve("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=Ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=Ve("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Ve("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=Ve("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ve("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Ve("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Ve("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Ve("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var l1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let u1,c1;function d1(){return{geminiUrl:u1,vertexUrl:c1}}function h1(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const a=d1();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(o=a.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ui{}function ie(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let f=0;f<d.length;f++){const g=d[f];p(g,e.slice(o+1),n[f])}else for(const f of d)p(f,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];p(d[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(u=>c(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function f1(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),a=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&o.length>u)for(let d=u;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&a.add(f)}jf(t,r,o,0,a)}}function jf(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])jf(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of u)d[f]=a[f];for(const[f,g]of Object.entries(d)){const y=[];for(const v of n.slice(i))v==="*"?y.push(f):y.push(v);p(a,y,g)}for(const f of u)delete a[f]}}else{const a=t;o in a&&jf(a[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p1(t){const e={},n=c(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function m1(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&p(e,["response"],_1(a)),e}function g1(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],y1(a)),e}function _1(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>v1(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function y1(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>T1(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function v1(t){const e={},n=c(t,["video"]);return n!=null&&p(e,["video"],C1(n)),e}function T1(t){const e={},n=c(t,["_self"]);return n!=null&&p(e,["video"],A1(n)),e}function E1(t){const e={},n=c(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function w1(t){const e={},n=c(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function x1(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],S1(a)),e}function S1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&p(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function tx(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],I1(a)),e}function I1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&p(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function C1(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Gm(i));const r=c(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function A1(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Gm(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cy||(Cy={}));var Ay;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ay||(Ay={}));var Py;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Py||(Py={}));var or;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(or||(or={}));var Ry;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ry||(Ry={}));var ky;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ky||(ky={}));var Ny;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ny||(Ny={}));var My;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(My||(My={}));var Ly;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ly||(Ly={}));var Dy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Dy||(Dy={}));var by;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(by||(by={}));var Vy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Vy||(Vy={}));var Fy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Fy||(Fy={}));var Uy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Uy||(Uy={}));var Oy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Oy||(Oy={}));var By;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(By||(By={}));var zy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zy||(zy={}));var Gy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gy||(Gy={}));var Hy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Hy||(Hy={}));var qy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(qy||(qy={}));var $y;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($y||($y={}));var od;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(od||(od={}));var Wy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wy||(Wy={}));var Ky;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ky||(Ky={}));var Jy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Jy||(Jy={}));var ep;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ep||(ep={}));var Zy;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Zy||(Zy={}));var Yy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Yy||(Yy={}));var tp;(function(t){t.COLLECTION="COLLECTION"})(tp||(tp={}));var Qy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Qy||(Qy={}));var Xy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Xy||(Xy={}));var jy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(jy||(jy={}));var ev;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ev||(ev={}));var tv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tv||(tv={}));var nv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nv||(nv={}));var iv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(iv||(iv={}));var rv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rv||(rv={}));var ov;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ov||(ov={}));var sv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(sv||(sv={}));var av;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(av||(av={}));var lv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(lv||(lv={}));var uv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(uv||(uv={}));var cv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cv||(cv={}));var dv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(dv||(dv={}));var hv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(hv||(hv={}));var fv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(fv||(fv={}));var pv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pv||(pv={}));var mv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(mv||(mv={}));var gv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gv||(gv={}));var _v;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(_v||(_v={}));var yv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yv||(yv={}));var vv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vv||(vv={}));var Tv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Tv||(Tv={}));var Ev;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ev||(Ev={}));var wv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wv||(wv={}));var xv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(xv||(xv={}));var as;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(as||(as={}));class np{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fa{get text(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const y=[];for(const v of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[S,D]of Object.entries(v))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(D!==null||D!==void 0)&&y.push(S);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;g=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const y of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,S]of Object.entries(y))v!=="inlineData"&&(S!==null||S!==void 0)&&g.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,a,u,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,a,u,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.output}}class Sv{}class Iv{}class P1{}class R1{}class k1{}class N1{}class Cv{}class Av{}class Pv{}class M1{}class sd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new sd;let r;const o=e;return n?r=g1(o):r=m1(o),Object.assign(i,r),i}}class Rv{}class kv{}class Nv{}class Mv{}class L1{}class D1{}class b1{}class Hm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Hm,o=x1(e);return Object.assign(i,o),i}}class V1{}class F1{}class U1{}class Lv{}class O1{get text(){var e,n,i;let r="",o=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="text"&&d!=="thought"&&f!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&o.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class B1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class qm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new qm,o=tx(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ue(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nx(t,e){const n=Ue(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ix(t){return Array.isArray(t)?t.map(e=>ad(e)):[ad(t)]}function ad(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function rx(t){const e=ad(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ox(t){const e=ad(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function sx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Dv(e)):[Dv(t)]}function ip(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function bv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gt(t){if(t==null)throw new Error("ContentUnion is required");return ip(t)?t:{role:"user",parts:sx(t)}}function $m(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Gt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Gt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gt(n)):[Gt(e)]}function kn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(bv(t)||Vv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gt(t)]}const e=[],n=[],i=ip(t[0]);for(const r of t){const o=ip(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(bv(r)||Vv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:sx(n)}),e}function z1(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(or).includes(n[0].toUpperCase())?n[0].toUpperCase():or.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(or).includes(i.toUpperCase())?i.toUpperCase():or.TYPE_UNSPECIFIED})}}function ys(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&z1(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(or).includes(u.toUpperCase())?u.toUpperCase():or.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=ys(u);else if(i.includes(a)){const d=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}d.push(ys(f))}e[a]=d}else if(r.includes(a)){const d={};for(const[f,g]of Object.entries(u))d[f]=ys(g);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Wm(t){return ys(t)}function Km(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Jm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Hs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ys(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ys(e.response));return t}function qs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function G1(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Oi(t,e){if(typeof e!="string")throw new Error("name must be a string");return G1(t,e,"cachedContents")}function ax(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ar(t){return Gm(t)}function H1(t){return t!=null&&typeof t=="object"&&"name"in t}function q1(t){return t!=null&&typeof t=="object"&&"video"in t}function $1(t){return t!=null&&typeof t=="object"&&"uri"in t}function lx(t){var e;let n;if(H1(t)&&(n=t.name),!($1(t)&&(n=t.uri,n===void 0))&&!(q1(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ux(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function cx(t){for(const e of["models","tunedModels","publisherModels"])if(W1(t,e))return t[e];return[]}function W1(t,e){return t!==null&&typeof t=="object"&&e in t}function K1(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function J1(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const a=K1(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function dx(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Z1(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function hx(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function $s(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y1(t){const e={},n=c(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>kM(a))),p(e,["inlinedResponses"],o)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["inlinedEmbedContentResponses"],o)}return e}function Q1(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function X1(t){const e={},n=c(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Tc(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&p(e,["state"],fx(r));const o=c(t,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);const a=c(t,["metadata","endTime"]);a!=null&&p(e,["endTime"],a);const u=c(t,["metadata","updateTime"]);u!=null&&p(e,["updateTime"],u);const d=c(t,["metadata","model"]);d!=null&&p(e,["model"],d);const f=c(t,["metadata","output"]);return f!=null&&p(e,["dest"],Y1(hx(f))),e}function rp(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["state"]);r!=null&&p(e,["state"],fx(r));const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["createTime"]);a!=null&&p(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&p(e,["startTime"],u);const d=c(t,["endTime"]);d!=null&&p(e,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&p(e,["updateTime"],f);const g=c(t,["model"]);g!=null&&p(e,["model"],g);const y=c(t,["inputConfig"]);y!=null&&p(e,["src"],j1(y));const v=c(t,["outputConfig"]);v!=null&&p(e,["dest"],Q1(hx(v)));const S=c(t,["completionStats"]);return S!=null&&p(e,["completionStats"],S),e}function j1(t){const e={},n=c(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function eM(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&p(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>RM(t,a))),p(n,["requests","requests"],o)}return n}function tM(t){const e={},n=c(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function nM(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function iM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],$s(t,i)),n}function rM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],$s(t,i)),n}function oM(t){const e={},n=c(t,["content"]);n!=null&&p(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],sM(i));const r=c(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&p(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&p(e,["index"],d);const f=c(t,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),p(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&p(e,["urlContextMetadata"],y),e}function sM(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function px(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>FM(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function aM(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function lM(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],X1(Z1(r))),n}function Fv(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["src"]);r!=null&&p(n,["batch","inputConfig"],eM(t,dx(t,r)));const o=c(e,["config"]);return o!=null&&aM(o,n),n}function uM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["model"],Ue(t,i));const r=c(e,["src"]);r!=null&&p(n,["inputConfig"],tM(dx(t,r)));const o=c(e,["config"]);return o!=null&&lM(o,n),n}function cM(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),n}function dM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["src"]);r!=null&&p(n,["batch","inputConfig"],yM(t,r));const o=c(e,["config"]);return o!=null&&cM(o,n),n}function hM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],$s(t,i)),n}function fM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],$s(t,i)),n}function pM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);return o!=null&&p(e,["error"],o),e}function mM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);return o!=null&&p(e,["error"],o),e}function gM(t,e){const n={},i=c(e,["contents"]);if(i!=null){let o=$m(t,i);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["requests[]","request","content"],o)}const r=c(e,["config"]);return r!=null&&(p(n,["_self"],_M(r,n)),f1(n,{"requests[].*":"requests[].request.*"})),n}function _M(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function yM(t,e){const n={},i=c(e,["fileName"]);i!=null&&p(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&p(n,["requests"],gM(t,r)),n}function vM(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TM(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EM(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&p(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wM(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],px(Gt(r)));const o=c(e,["temperature"]);o!=null&&p(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&p(i,["topP"],a);const u=c(e,["topK"]);u!=null&&p(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&p(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);const g=c(e,["stopSequences"]);g!=null&&p(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&p(i,["presencePenalty"],S);const D=c(e,["frequencyPenalty"]);D!=null&&p(i,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&p(i,["seed"],b);const B=c(e,["responseMimeType"]);B!=null&&p(i,["responseMimeType"],B);const R=c(e,["responseSchema"]);R!=null&&p(i,["responseSchema"],Wm(R));const N=c(e,["responseJsonSchema"]);if(N!=null&&p(i,["responseJsonSchema"],N),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(ae=>UM(ae))),p(n,["safetySettings"],M)}const H=c(e,["tools"]);if(n!==void 0&&H!=null){let M=qs(H);Array.isArray(M)&&(M=M.map(ae=>BM(Hs(ae)))),p(n,["tools"],M)}const J=c(e,["toolConfig"]);if(n!==void 0&&J!=null&&p(n,["toolConfig"],OM(J)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=c(e,["cachedContent"]);n!==void 0&&Z!=null&&p(n,["cachedContent"],Oi(t,Z));const V=c(e,["responseModalities"]);V!=null&&p(i,["responseModalities"],V);const C=c(e,["mediaResolution"]);C!=null&&p(i,["mediaResolution"],C);const P=c(e,["speechConfig"]);if(P!=null&&p(i,["speechConfig"],Km(P)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=c(e,["thinkingConfig"]);U!=null&&p(i,["thinkingConfig"],U);const O=c(e,["imageConfig"]);O!=null&&p(i,["imageConfig"],PM(O));const F=c(e,["enableEnhancedCivicAnswers"]);if(F!=null&&p(i,["enableEnhancedCivicAnswers"],F),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function xM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>oM(f))),p(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&p(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&p(e,["usageMetadata"],u),e}function SM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],$s(t,i)),n}function IM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],$s(t,i)),n}function CM(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function AM(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function PM(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function RM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["request","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let u=kn(r);Array.isArray(u)&&(u=u.map(d=>px(d))),p(n,["request","contents"],u)}const o=c(e,["metadata"]);o!=null&&p(n,["metadata"],o);const a=c(e,["config"]);return a!=null&&p(n,["request","generationConfig"],wM(t,a,c(n,["request"],{}))),n}function kM(t){const e={},n=c(t,["response"]);n!=null&&p(e,["response"],xM(n));const i=c(t,["error"]);return i!=null&&p(e,["error"],i),e}function NM(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function MM(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const o=c(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function LM(t){const e={},n=c(t,["config"]);return n!=null&&NM(n,e),e}function DM(t){const e={},n=c(t,["config"]);return n!=null&&MM(n,e),e}function bM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Tc(a))),p(e,["batchJobs"],o)}return e}function VM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>rp(a))),p(e,["batchJobs"],o)}return e}function FM(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],vM(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],TM(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],nM(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function UM(t){const e={},n=c(t,["category"]);if(n!=null&&p(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function OM(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],EM(i)),e}function BM(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],CM(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],AM(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Vi||(Vi={}));class ho{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zM extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ho(Vi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Fv(this.apiClient,e),i=n._url,r=ie("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,d=u.requests,f=[];for(const g of d){const y=Object.assign({},g);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const S=y.request;S.systemInstruction=v,y.request=S}f.push(y)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=uM(this.apiClient,e);return u=ie("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>rp(g))}else{const f=Fv(this.apiClient,e);return u=ie("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Tc(g))}}async createEmbeddingsInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dM(this.apiClient,e);return o=ie("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Tc(d))}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=IM(this.apiClient,e);return u=ie("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>rp(g))}else{const f=SM(this.apiClient,e);return u=ie("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Tc(g))}}async cancel(e){var n,i,r,o;let a="",u={};if(this.apiClient.isVertexAI()){const d=rM(this.apiClient,e);a=ie("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=iM(this.apiClient,e);a=ie("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=DM(e);return u=ie("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=VM(g),v=new Lv;return Object.assign(v,y),v})}else{const f=LM(e);return u=ie("batches",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=bM(g),v=new Lv;return Object.assign(v,y),v})}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=fM(this.apiClient,e);return u=ie("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>mM(g))}else{const f=hM(this.apiClient,e);return u=ie("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>pM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GM(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Uv(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>dL(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function HM(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let g=kn(a);Array.isArray(g)&&(g=g.map(y=>Uv(y))),p(e,["contents"],g)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&p(e,["systemInstruction"],Uv(Gt(u)));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>fL(y))),p(e,["tools"],g)}const f=c(t,["toolConfig"]);if(e!==void 0&&f!=null&&p(e,["toolConfig"],hL(f)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function qM(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let y=kn(a);Array.isArray(y)&&(y=y.map(v=>v)),p(e,["contents"],y)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&p(e,["systemInstruction"],Gt(u));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>pL(v))),p(e,["tools"],y)}const f=c(t,["toolConfig"]);e!==void 0&&f!=null&&p(e,["toolConfig"],f);const g=c(t,["kmsKeyName"]);return e!==void 0&&g!=null&&p(e,["encryption_spec","kmsKeyName"],g),n}function $M(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["model"],nx(t,i));const r=c(e,["config"]);return r!=null&&HM(r,n),n}function WM(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["model"],nx(t,i));const r=c(e,["config"]);return r!=null&&qM(r,n),n}function KM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function JM(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function ZM(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function YM(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function QM(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function XM(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jM(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&p(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eL(t){const e={},n=c(t,["description"]);n!=null&&p(e,["description"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["parameters"]);r!=null&&p(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&p(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&p(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tL(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function nL(t,e){const n={},i=c(e,["name"]);return i!=null&&p(n,["_url","name"],Oi(t,i)),n}function iL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rL(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function oL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function sL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function aL(t){const e={},n=c(t,["config"]);return n!=null&&oL(n,e),e}function lL(t){const e={},n=c(t,["config"]);return n!=null&&sL(n,e),e}function uL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["cachedContents"],o)}return e}function cL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["cachedContents"],o)}return e}function dL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],QM(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],XM(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],GM(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function hL(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],jM(i)),e}function fL(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],iL(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],rL(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function pL(t){const e={},n=c(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>eL(v))),p(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],d);const f=c(t,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const g=c(t,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function mL(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function gL(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function _L(t,e){const n={},i=c(e,["name"]);i!=null&&p(n,["_url","name"],Oi(t,i));const r=c(e,["config"]);return r!=null&&mL(r,n),n}function yL(t,e){const n={},i=c(e,["name"]);i!=null&&p(n,["_url","name"],Oi(t,i));const r=c(e,["config"]);return r!=null&&gL(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vL extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ho(Vi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=WM(this.apiClient,e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const f=$M(this.apiClient,e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=nL(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const f=tL(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=JM(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=YM(g),v=new Nv;return Object.assign(v,y),v})}else{const f=KM(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ZM(g),v=new Nv;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=yL(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const f=_L(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=lL(e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=cL(g),v=new Mv;return Object.assign(v,y),v})}else{const f=aL(e);return u=ie("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=uL(g),v=new Mv;return Object.assign(v,y),v})}}}function ld(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Ov(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _e(t){return this instanceof _e?(this.v=t,this):new _e(t)}function Wn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(S){return function(D){return Promise.resolve(D).then(S,y)}}function u(S,D){i[S]&&(r[S]=function(b){return new Promise(function(B,R){o.push([S,b,B,R])>1||d(S,b)})},D&&(r[S]=D(r[S])))}function d(S,D){try{f(i[S](D))}catch(b){v(o[0][3],b)}}function f(S){S.value instanceof _e?Promise.resolve(S.value.v).then(g,y):v(o[0][2],S)}function g(S){d("next",S)}function y(S){d("throw",S)}function v(S,D){S(D),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Kn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ov=="function"?Ov(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),r(u,d,a.done,a.value)})}}function r(o,a,u,d){Promise.resolve(d).then(function(f){o({value:f,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TL(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:mx(n)}function mx(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function EL(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!mx(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class wL{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xL{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),EL(o)}async sendMessage(e){var n;await this.sendPromise;const i=Gt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,u;const d=await r,f=(a=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,g=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];g!=null&&(v=(u=g.slice(y))!==null&&u!==void 0?u:[]);const S=f?[f]:[];this.recordHistory(i,S,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Gt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Bv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Wn(this,arguments,function*(){var r,o,a,u,d,f;const g=[];try{for(var y=!0,v=Kn(e),S;S=yield _e(v.next()),r=S.done,!r;y=!0){u=S.value,y=!1;const D=u;if(TL(D)){const b=(f=(d=D.candidates)===null||d===void 0?void 0:d[0])===null||f===void 0?void 0:f.content;b!==void 0&&g.push(b)}yield yield _e(D)}}catch(D){o={error:D}}finally{try{!y&&!r&&(a=v.return)&&(yield _e(a.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Bv(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Dl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SL(t){const e={},n=c(t,["file"]);return n!=null&&p(e,["file"],n),e}function IL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function CL(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","file"],lx(n)),e}function AL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function PL(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","file"],lx(n)),e}function RL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function kL(t){const e={},n=c(t,["config"]);return n!=null&&RL(n,e),e}function NL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ML extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ho(Vi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kL(e);return o=ie("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=NL(d),g=new V1;return Object.assign(g,f),g})}}async createInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=SL(e);return o=ie("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=IL(d),g=new F1;return Object.assign(g,f),g})}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PL(e);return o=ie("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=CL(e);return o=ie("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=AL(d),g=new U1;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ec(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function LL(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ZL(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function DL(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function bL(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VL(t){const e={},n=c(t,["description"]);n!=null&&p(e,["description"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["parameters"]);r!=null&&p(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&p(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&p(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function FL(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&p(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&p(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&p(e,["logprobs"],d);const f=c(t,["maxOutputTokens"]);f!=null&&p(e,["maxOutputTokens"],f);const g=c(t,["mediaResolution"]);g!=null&&p(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&p(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&p(e,["responseMimeType"],S);const D=c(t,["responseModalities"]);D!=null&&p(e,["responseModalities"],D);const b=c(t,["responseSchema"]);b!=null&&p(e,["responseSchema"],b);const B=c(t,["routingConfig"]);B!=null&&p(e,["routingConfig"],B);const R=c(t,["seed"]);R!=null&&p(e,["seed"],R);const N=c(t,["speechConfig"]);N!=null&&p(e,["speechConfig"],N);const k=c(t,["stopSequences"]);k!=null&&p(e,["stopSequences"],k);const H=c(t,["temperature"]);H!=null&&p(e,["temperature"],H);const J=c(t,["thinkingConfig"]);J!=null&&p(e,["thinkingConfig"],J);const Z=c(t,["topK"]);Z!=null&&p(e,["topK"],Z);const V=c(t,["topP"]);if(V!=null&&p(e,["topP"],V),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function UL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function OL(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function BL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const g=c(t,["seed"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],Jm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=c(t,["systemInstruction"]);e!==void 0&&D!=null&&p(e,["setup","systemInstruction"],LL(Gt(D)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let Z=qs(b);Array.isArray(Z)&&(Z=Z.map(V=>QL(Hs(V)))),p(e,["setup","tools"],Z)}const B=c(t,["sessionResumption"]);e!==void 0&&B!=null&&p(e,["setup","sessionResumption"],YL(B));const R=c(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const k=c(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const H=c(t,["contextWindowCompression"]);e!==void 0&&H!=null&&p(e,["setup","contextWindowCompression"],H);const J=c(t,["proactivity"]);if(e!==void 0&&J!=null&&p(e,["setup","proactivity"],J),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function zL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],FL(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const g=c(t,["seed"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],Jm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=c(t,["systemInstruction"]);e!==void 0&&D!=null&&p(e,["setup","systemInstruction"],Gt(D));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let V=qs(b);Array.isArray(V)&&(V=V.map(C=>XL(Hs(C)))),p(e,["setup","tools"],V)}const B=c(t,["sessionResumption"]);e!==void 0&&B!=null&&p(e,["setup","sessionResumption"],B);const R=c(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const k=c(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const H=c(t,["contextWindowCompression"]);e!==void 0&&H!=null&&p(e,["setup","contextWindowCompression"],H);const J=c(t,["proactivity"]);e!==void 0&&J!=null&&p(e,["setup","proactivity"],J);const Z=c(t,["explicitVadSignal"]);return e!==void 0&&Z!=null&&p(e,["setup","explicitVadSignal"],Z),n}function GL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&p(n,["config"],BL(r,n)),n}function HL(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&p(n,["config"],zL(r,n)),n}function qL(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function $L(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function WL(t){const e={},n=c(t,["media"]);if(n!=null){let f=ix(n);Array.isArray(f)&&(f=f.map(g=>Ec(g))),p(e,["mediaChunks"],f)}const i=c(t,["audio"]);i!=null&&p(e,["audio"],Ec(ox(i)));const r=c(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&p(e,["video"],Ec(rx(o)));const a=c(t,["text"]);a!=null&&p(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&p(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&p(e,["activityEnd"],d),e}function KL(t){const e={},n=c(t,["media"]);if(n!=null){let f=ix(n);Array.isArray(f)&&(f=f.map(g=>g)),p(e,["mediaChunks"],f)}const i=c(t,["audio"]);i!=null&&p(e,["audio"],ox(i));const r=c(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&p(e,["video"],rx(o));const a=c(t,["text"]);a!=null&&p(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&p(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&p(e,["activityEnd"],d),e}function JL(t){const e={},n=c(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&p(e,["toolCall"],r);const o=c(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],o);const a=c(t,["usageMetadata"]);a!=null&&p(e,["usageMetadata"],jL(a));const u=c(t,["goAway"]);u!=null&&p(e,["goAway"],u);const d=c(t,["sessionResumptionUpdate"]);d!=null&&p(e,["sessionResumptionUpdate"],d);const f=c(t,["voiceActivityDetectionSignal"]);f!=null&&p(e,["voiceActivityDetectionSignal"],f);const g=c(t,["voiceActivity"]);return g!=null&&p(e,["voiceActivity"],eD(g)),e}function ZL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],DL(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],bL(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],Ec(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function YL(t){const e={},n=c(t,["handle"]);if(n!=null&&p(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QL(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],UL(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],OL(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function XL(t){const e={},n=c(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>VL(v))),p(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],d);const f=c(t,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const g=c(t,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function jL(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const o=c(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const a=c(t,["thoughtsTokenCount"]);a!=null&&p(e,["thoughtsTokenCount"],a);const u=c(t,["totalTokenCount"]);u!=null&&p(e,["totalTokenCount"],u);const d=c(t,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(D=>D)),p(e,["promptTokensDetails"],S)}const f=c(t,["cacheTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(D=>D)),p(e,["cacheTokensDetails"],S)}const g=c(t,["candidatesTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(D=>D)),p(e,["responseTokensDetails"],S)}const y=c(t,["toolUsePromptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(D=>D)),p(e,["toolUsePromptTokensDetails"],S)}const v=c(t,["trafficType"]);return v!=null&&p(e,["trafficType"],v),e}function eD(t){const e={},n=c(t,["type"]);return n!=null&&p(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tD(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function nD(t){const e={},n=c(t,["content"]);n!=null&&p(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],iD(i));const r=c(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&p(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&p(e,["index"],d);const f=c(t,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),p(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&p(e,["urlContextMetadata"],y),e}function iD(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function rD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let o=kn(r);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}return n}function oD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(e,["tokensInfo"],r)}return e}function sD(t){const e={},n=c(t,["values"]);n!=null&&p(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&p(e,["statistics"],aD(i)),e}function aD(t){const e={},n=c(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function Bd(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>gb(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function lD(t){const e={},n=c(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function uD(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function cD(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],Gt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>vx(u))),p(e,["tools"],a)}const o=c(t,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],tb(o)),n}function dD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>Bd(u))),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&uD(o),n}function hD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&cD(o,n),n}function fD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function pD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function mD(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function gD(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function _D(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function yD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function vD(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&p(e,["parameters","language"],S);const D=c(t,["outputMimeType"]);e!==void 0&&D!=null&&p(e,["parameters","outputOptions","mimeType"],D);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);const B=c(t,["addWatermark"]);e!==void 0&&B!=null&&p(e,["parameters","addWatermark"],B);const R=c(t,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const N=c(t,["editMode"]);e!==void 0&&N!=null&&p(e,["parameters","editMode"],N);const k=c(t,["baseSteps"]);return e!==void 0&&k!=null&&p(e,["parameters","editConfig","baseSteps"],k),n}function TD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>wb(d))),p(n,["instances[0]","referenceImages"],u)}const a=c(e,["config"]);return a!=null&&vD(a,n),n}function ED(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>zd(o))),p(e,["generatedImages"],r)}return e}function wD(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xD(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const o=c(t,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&p(e,["instances[]","mimeType"],a);const u=c(t,["autoTruncate"]);return e!==void 0&&u!=null&&p(e,["parameters","autoTruncate"],u),n}function SD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let u=$m(t,r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["requests[]","content"],u)}const o=c(e,["config"]);o!=null&&wD(o,n);const a=c(e,["model"]);return a!==void 0&&p(n,["requests[]","model"],Ue(t,a)),n}function ID(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=$m(t,r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["instances[]","content"],a)}const o=c(e,["config"]);return o!=null&&xD(o,n),n}function CD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function AD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>sD(a))),p(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function PD(t){const e={},n=c(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function RD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function kD(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ND(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&p(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function MD(t){const e={},n=c(t,["description"]);n!=null&&p(e,["description"],n);const i=c(t,["name"]);i!=null&&p(e,["name"],i);const r=c(t,["parameters"]);r!=null&&p(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&p(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&p(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LD(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],Bd(Gt(r)));const o=c(e,["temperature"]);o!=null&&p(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&p(i,["topP"],a);const u=c(e,["topK"]);u!=null&&p(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&p(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);const g=c(e,["stopSequences"]);g!=null&&p(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&p(i,["presencePenalty"],S);const D=c(e,["frequencyPenalty"]);D!=null&&p(i,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&p(i,["seed"],b);const B=c(e,["responseMimeType"]);B!=null&&p(i,["responseMimeType"],B);const R=c(e,["responseSchema"]);R!=null&&p(i,["responseSchema"],Wm(R));const N=c(e,["responseJsonSchema"]);if(N!=null&&p(i,["responseJsonSchema"],N),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(ae=>xb(ae))),p(n,["safetySettings"],M)}const H=c(e,["tools"]);if(n!==void 0&&H!=null){let M=qs(H);Array.isArray(M)&&(M=M.map(ae=>kb(Hs(ae)))),p(n,["tools"],M)}const J=c(e,["toolConfig"]);if(n!==void 0&&J!=null&&p(n,["toolConfig"],Rb(J)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=c(e,["cachedContent"]);n!==void 0&&Z!=null&&p(n,["cachedContent"],Oi(t,Z));const V=c(e,["responseModalities"]);V!=null&&p(i,["responseModalities"],V);const C=c(e,["mediaResolution"]);C!=null&&p(i,["mediaResolution"],C);const P=c(e,["speechConfig"]);if(P!=null&&p(i,["speechConfig"],Km(P)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=c(e,["thinkingConfig"]);U!=null&&p(i,["thinkingConfig"],U);const O=c(e,["imageConfig"]);O!=null&&p(i,["imageConfig"],sb(O));const F=c(e,["enableEnhancedCivicAnswers"]);if(F!=null&&p(i,["enableEnhancedCivicAnswers"],F),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function DD(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],Gt(r));const o=c(e,["temperature"]);o!=null&&p(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&p(i,["topP"],a);const u=c(e,["topK"]);u!=null&&p(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&p(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);const g=c(e,["stopSequences"]);g!=null&&p(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&p(i,["presencePenalty"],S);const D=c(e,["frequencyPenalty"]);D!=null&&p(i,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&p(i,["seed"],b);const B=c(e,["responseMimeType"]);B!=null&&p(i,["responseMimeType"],B);const R=c(e,["responseSchema"]);R!=null&&p(i,["responseSchema"],Wm(R));const N=c(e,["responseJsonSchema"]);N!=null&&p(i,["responseJsonSchema"],N);const k=c(e,["routingConfig"]);k!=null&&p(i,["routingConfig"],k);const H=c(e,["modelSelectionConfig"]);H!=null&&p(i,["modelConfig"],H);const J=c(e,["safetySettings"]);if(n!==void 0&&J!=null){let xe=J;Array.isArray(xe)&&(xe=xe.map(G=>G)),p(n,["safetySettings"],xe)}const Z=c(e,["tools"]);if(n!==void 0&&Z!=null){let xe=qs(Z);Array.isArray(xe)&&(xe=xe.map(G=>vx(Hs(G)))),p(n,["tools"],xe)}const V=c(e,["toolConfig"]);n!==void 0&&V!=null&&p(n,["toolConfig"],V);const C=c(e,["labels"]);n!==void 0&&C!=null&&p(n,["labels"],C);const P=c(e,["cachedContent"]);n!==void 0&&P!=null&&p(n,["cachedContent"],Oi(t,P));const U=c(e,["responseModalities"]);U!=null&&p(i,["responseModalities"],U);const O=c(e,["mediaResolution"]);O!=null&&p(i,["mediaResolution"],O);const F=c(e,["speechConfig"]);F!=null&&p(i,["speechConfig"],Km(F));const M=c(e,["audioTimestamp"]);M!=null&&p(i,["audioTimestamp"],M);const ae=c(e,["thinkingConfig"]);ae!=null&&p(i,["thinkingConfig"],ae);const Ke=c(e,["imageConfig"]);if(Ke!=null&&p(i,["imageConfig"],ab(Ke)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Ne=c(e,["modelArmorConfig"]);return n!==void 0&&Ne!=null&&p(n,["modelArmorConfig"],Ne),i}function zv(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>Bd(u))),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&p(n,["generationConfig"],LD(t,o,n)),n}function Gv(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=kn(r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&p(n,["generationConfig"],DD(t,o,n)),n}function Hv(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>nD(f))),p(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&p(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&p(e,["usageMetadata"],u),e}function qv(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["candidates"],f)}const r=c(t,["createTime"]);r!=null&&p(e,["createTime"],r);const o=c(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=c(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function bD(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const o=c(t,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=c(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&p(e,["parameters","includeSafetyAttributes"],d);const f=c(t,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const g=c(t,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const v=c(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=c(t,["imageSize"]);if(e!==void 0&&S!=null&&p(e,["parameters","sampleImageSize"],S),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function VD(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&p(e,["parameters","language"],S);const D=c(t,["outputMimeType"]);e!==void 0&&D!=null&&p(e,["parameters","outputOptions","mimeType"],D);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);const B=c(t,["addWatermark"]);e!==void 0&&B!=null&&p(e,["parameters","addWatermark"],B);const R=c(t,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const N=c(t,["imageSize"]);e!==void 0&&N!=null&&p(e,["parameters","sampleImageSize"],N);const k=c(t,["enhancePrompt"]);return e!==void 0&&k!=null&&p(e,["parameters","enhancePrompt"],k),n}function FD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&bD(o,n),n}function UD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&VD(o,n),n}function OD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>QD(a))),p(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],_x(r)),e}function BD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>zd(a))),p(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],yx(r)),e}function zD(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=c(t,["resolution"]);e!==void 0&&a!=null&&p(e,["parameters","resolution"],a);const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(t,["negativePrompt"]);e!==void 0&&d!=null&&p(e,["parameters","negativePrompt"],d);const f=c(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&p(e,["parameters","enhancePrompt"],f),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=c(t,["lastFrame"]);e!==void 0&&g!=null&&p(e,["instances[0]","lastFrame"],Gd(g));const y=c(t,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>Hb(S))),p(e,["instances[0]","referenceImages"],v)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function GD(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const o=c(t,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=c(t,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const f=c(t,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const y=c(t,["pubsubTopic"]);e!==void 0&&y!=null&&p(e,["parameters","pubsubTopic"],y);const v=c(t,["negativePrompt"]);e!==void 0&&v!=null&&p(e,["parameters","negativePrompt"],v);const S=c(t,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const D=c(t,["generateAudio"]);e!==void 0&&D!=null&&p(e,["parameters","generateAudio"],D);const b=c(t,["lastFrame"]);e!==void 0&&b!=null&&p(e,["instances[0]","lastFrame"],Zn(b));const B=c(t,["referenceImages"]);if(e!==void 0&&B!=null){let k=B;Array.isArray(k)&&(k=k.map(H=>qb(H))),p(e,["instances[0]","referenceImages"],k)}const R=c(t,["mask"]);e!==void 0&&R!=null&&p(e,["instances[0]","mask"],Gb(R));const N=c(t,["compressionQuality"]);return e!==void 0&&N!=null&&p(e,["parameters","compressionQuality"],N),n}function HD(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&p(e,["response"],KD(a)),e}function qD(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],JD(a)),e}function $D(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&p(n,["instances[0]","image"],Gd(o));const a=c(e,["video"]);a!=null&&p(n,["instances[0]","video"],Tx(a));const u=c(e,["source"]);u!=null&&ZD(u,n);const d=c(e,["config"]);return d!=null&&zD(d,n),n}function WD(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&p(n,["instances[0]","image"],Zn(o));const a=c(e,["video"]);a!=null&&p(n,["instances[0]","video"],Ex(a));const u=c(e,["source"]);u!=null&&YD(u,n);const d=c(e,["config"]);return d!=null&&GD(d,n),n}function KD(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>jD(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function JD(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>eb(a))),p(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function ZD(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Gd(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],Tx(o)),n}function YD(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Zn(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],Ex(o)),n}function QD(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["image"],lb(n));const i=c(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&p(e,["safetyAttributes"],_x(r)),e}function zd(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["image"],gx(n));const i=c(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&p(e,["safetyAttributes"],yx(r));const o=c(t,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function XD(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["mask"],gx(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(e,["labels"],r)}return e}function jD(t){const e={},n=c(t,["video"]);return n!=null&&p(e,["video"],Bb(n)),e}function eb(t){const e={},n=c(t,["_self"]);return n!=null&&p(e,["video"],zb(n)),e}function tb(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&p(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&p(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&p(e,["logprobs"],d);const f=c(t,["maxOutputTokens"]);f!=null&&p(e,["maxOutputTokens"],f);const g=c(t,["mediaResolution"]);g!=null&&p(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&p(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&p(e,["responseMimeType"],S);const D=c(t,["responseModalities"]);D!=null&&p(e,["responseModalities"],D);const b=c(t,["responseSchema"]);b!=null&&p(e,["responseSchema"],b);const B=c(t,["routingConfig"]);B!=null&&p(e,["routingConfig"],B);const R=c(t,["seed"]);R!=null&&p(e,["seed"],R);const N=c(t,["speechConfig"]);N!=null&&p(e,["speechConfig"],N);const k=c(t,["stopSequences"]);k!=null&&p(e,["stopSequences"],k);const H=c(t,["temperature"]);H!=null&&p(e,["temperature"],H);const J=c(t,["thinkingConfig"]);J!=null&&p(e,["thinkingConfig"],J);const Z=c(t,["topK"]);Z!=null&&p(e,["topK"],Z);const V=c(t,["topP"]);if(V!=null&&p(e,["topP"],V),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nb(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function ib(t,e){const n={},i=c(e,["model"]);return i!=null&&p(n,["_url","name"],Ue(t,i)),n}function rb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function ob(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sb(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ab(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=c(t,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=c(t,["personGeneration"]);r!=null&&p(e,["personGeneration"],r);const o=c(t,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=c(t,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function lb(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],Ar(n));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gx(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Gd(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],Ar(n));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Zn(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ub(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&p(n,["_url","models_url"],ux(t,u)),i}function cb(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&p(n,["_url","models_url"],ux(t,u)),i}function db(t,e){const n={},i=c(e,["config"]);return i!=null&&ub(t,i,n),n}function hb(t,e){const n={},i=c(e,["config"]);return i!=null&&cb(t,i,n),n}function fb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=cx(r);Array.isArray(o)&&(o=o.map(a=>op(a))),p(e,["models"],o)}return e}function pb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=cx(r);Array.isArray(o)&&(o=o.map(a=>sp(a))),p(e,["models"],o)}return e}function mb(t){const e={},n=c(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function op(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);r!=null&&p(e,["description"],r);const o=c(t,["version"]);o!=null&&p(e,["version"],o);const a=c(t,["_self"]);a!=null&&p(e,["tunedModelInfo"],Nb(a));const u=c(t,["inputTokenLimit"]);u!=null&&p(e,["inputTokenLimit"],u);const d=c(t,["outputTokenLimit"]);d!=null&&p(e,["outputTokenLimit"],d);const f=c(t,["supportedGenerationMethods"]);f!=null&&p(e,["supportedActions"],f);const g=c(t,["temperature"]);g!=null&&p(e,["temperature"],g);const y=c(t,["maxTemperature"]);y!=null&&p(e,["maxTemperature"],y);const v=c(t,["topP"]);v!=null&&p(e,["topP"],v);const S=c(t,["topK"]);S!=null&&p(e,["topK"],S);const D=c(t,["thinking"]);return D!=null&&p(e,["thinking"],D),e}function sp(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);r!=null&&p(e,["description"],r);const o=c(t,["versionId"]);o!=null&&p(e,["version"],o);const a=c(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>PD(v))),p(e,["endpoints"],y)}const u=c(t,["labels"]);u!=null&&p(e,["labels"],u);const d=c(t,["_self"]);d!=null&&p(e,["tunedModelInfo"],Mb(d));const f=c(t,["defaultCheckpointId"]);f!=null&&p(e,["defaultCheckpointId"],f);const g=c(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["checkpoints"],y)}return e}function gb(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],RD(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],kD(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],tD(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function _b(t){const e={},n=c(t,["productImage"]);return n!=null&&p(e,["image"],Zn(n)),e}function yb(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const f=c(t,["addWatermark"]);e!==void 0&&f!=null&&p(e,["parameters","addWatermark"],f);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","mimeType"],g);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","compressionQuality"],y);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v);const S=c(t,["labels"]);return e!==void 0&&S!=null&&p(e,["labels"],S),n}function vb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["source"]);r!=null&&Eb(r,n);const o=c(e,["config"]);return o!=null&&yb(o,n),n}function Tb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>zd(r))),p(e,["generatedImages"],i)}return e}function Eb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Zn(r));const o=c(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>_b(u))),p(e,["instances[0]","productImages"],a)}return n}function wb(t){const e={},n=c(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Zn(n));const i=c(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&p(e,["referenceType"],r);const o=c(t,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],mb(o));const a=c(t,["controlImageConfig"]);a!=null&&p(e,["controlImageConfig"],lD(a));const u=c(t,["styleImageConfig"]);u!=null&&p(e,["styleImageConfig"],u);const d=c(t,["subjectImageConfig"]);return d!=null&&p(e,["subjectImageConfig"],d),e}function _x(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function yx(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function xb(t){const e={},n=c(t,["category"]);if(n!=null&&p(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function Sb(t){const e={},n=c(t,["image"]);return n!=null&&p(e,["image"],Zn(n)),e}function Ib(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const o=c(t,["confidenceThreshold"]);e!==void 0&&o!=null&&p(e,["parameters","confidenceThreshold"],o);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&p(e,["parameters","maskDilation"],a);const u=c(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","binaryColorThreshold"],u);const d=c(t,["labels"]);return e!==void 0&&d!=null&&p(e,["labels"],d),n}function Cb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["source"]);r!=null&&Pb(r,n);const o=c(e,["config"]);return o!=null&&Ib(o,n),n}function Ab(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>XD(r))),p(e,["generatedMasks"],i)}return e}function Pb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Zn(r));const o=c(t,["scribbleImage"]);return e!==void 0&&o!=null&&p(e,["instances[0]","scribble"],Sb(o)),n}function Rb(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],ND(i)),e}function kb(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],rb(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],ob(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function vx(t){const e={},n=c(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>MD(v))),p(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],d);const f=c(t,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const g=c(t,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function Nb(t){const e={},n=c(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function Mb(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function Lb(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function Db(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function bb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","name"],Ue(t,i));const r=c(e,["config"]);return r!=null&&Lb(r,n),n}function Vb(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&Db(r,n),n}function Fb(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const o=c(t,["personGeneration"]);e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&p(e,["parameters","includeRaiReason"],a);const u=c(t,["outputMimeType"]);e!==void 0&&u!=null&&p(e,["parameters","outputOptions","mimeType"],u);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","compressionQuality"],d);const f=c(t,["enhanceInputImage"]);e!==void 0&&f!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],f);const g=c(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=c(t,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);const v=c(t,["numberOfImages"]);e!==void 0&&v!=null&&p(e,["parameters","sampleCount"],v);const S=c(t,["mode"]);return e!==void 0&&S!=null&&p(e,["parameters","mode"],S),n}function Ub(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["_url","model"],Ue(t,i));const r=c(e,["image"]);r!=null&&p(n,["instances[0]","image"],Zn(r));const o=c(e,["upscaleFactor"]);o!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=c(e,["config"]);return a!=null&&Fb(a,n),n}function Ob(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>zd(o))),p(e,["generatedImages"],r)}return e}function Bb(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Ar(i));const r=c(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function zb(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Gb(t){const e={},n=c(t,["image"]);n!=null&&p(e,["_self"],Zn(n));const i=c(t,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function Hb(t){const e={},n=c(t,["image"]);n!=null&&p(e,["image"],Gd(n));const i=c(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function qb(t){const e={},n=c(t,["image"]);n!=null&&p(e,["image"],Zn(n));const i=c(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function Tx(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function Ex(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Ar(i));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $b(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),n}function Wb(t){const e={},n=c(t,["config"]);return n!=null&&$b(n,e),e}function Kb(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function Jb(t){const e={},n=c(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&Kb(i,e),e}function Zb(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function Yb(t,e){const n={},i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["customMetadata"],o)}const r=c(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function Qb(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const i=c(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=c(t,["done"]);r!=null&&p(e,["done"],r);const o=c(t,["error"]);o!=null&&p(e,["error"],o);const a=c(t,["response"]);return a!=null&&p(e,["response"],jb(a)),e}function Xb(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=c(t,["fileName"]);i!=null&&p(e,["fileName"],i);const r=c(t,["config"]);return r!=null&&Yb(r,e),e}function jb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&p(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function e2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function t2(t){const e={},n=c(t,["config"]);return n!=null&&e2(n,e),e}function n2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["fileSearchStores"],o)}return e}function wx(t,e){const n={},i=c(t,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=c(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),p(e,["customMetadata"],u)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&p(e,["chunkingConfig"],a),n}function i2(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=c(t,["config"]);return i!=null&&wx(i,e),e}function r2(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o2="Content-Type",s2="X-Server-Timeout",a2="User-Agent",ap="x-goog-api-client",l2="1.38.0",u2=`google-genai-sdk/${l2}`,c2="v1beta1",d2="v1beta";class h2{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:c2}else{if(!this.clientOptions.apiKey)throw new Dl({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:d2,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===tp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&f2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await $v(r),new np(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await $v(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Wn(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:g}=yield _e(r.read());if(f){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(g,{stream:!0});try{const D=JSON.parse(y);if("error"in D){const b=JSON.parse(JSON.stringify(D.error)),B=b.status,R=b.code,N=`got status: ${B}. ${JSON.stringify(D)}`;if(R>=400&&R<600)throw new Dl({message:N,status:R})}}catch(D){if(D.name==="ApiError")throw D}a+=y;let v=-1,S=0;for(;;){v=-1,S=0;for(const B of d){const R=a.indexOf(B);R!==-1&&(v===-1||R<v)&&(v=R,S=B.length)}if(v===-1)break;const D=a.substring(0,v);a=a.substring(v+S);const b=D.trim();if(b.startsWith(u)){const B=b.substring(u.length).trim();try{const R=new Response(B,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield _e(new np(R))}catch(R){throw new Error(`exception parsing stream chunk ${B}. ${R}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=u2+" "+this.clientOptions.userAgentExtra;return e[a2]=n,e[ap]=n,e[o2]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(s2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},f=this.getFileName(e),g=ie("upload/v1beta/files",d._url),y=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,a=await o.stat(n),u=String(a.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),y={};i!=null&&wx(i,y);const v=await this.fetchUploadUrl(f,u,d,g,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function $v(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Dl({message:r,status:n}):new Error(r)}}function f2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,a){const u=Object.assign({},o);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const f=a[d],g=u[d];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?u[d]=i(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),u[d]=f)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p2="mcp_used/unknown";let m2=!1;function xx(t){for(const e of t)if(g2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return m2}function Sx(t){var e;const n=(e=t[ap])!==null&&e!==void 0?e:"";t[ap]=(n+` ${p2}`).trimStart()}function g2(t){return t!==null&&typeof t=="object"&&t instanceof Zm}function _2(t){return Wn(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const a=yield _e(n.listTools({cursor:r}));for(const u of a.tools)yield yield _e(u),o++;if(!a.nextCursor)break;r=a.nextCursor}})}class Zm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Zm(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},a=[];for(const g of this.mcpClients)try{for(var u=!0,d=(n=void 0,Kn(_2(g))),f;f=await d.next(),e=f.done,!e;u=!0){r=f.value,u=!1;const y=r;a.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=g}}catch(y){n={error:y}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),J1(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y2(t,e,n){const i=new B1;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class v2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=w2(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const g=new Promise(k=>{f=k}),y=e.callbacks,v=function(){f({})},S=this.apiClient,D={onopen:v,onmessage:k=>{y2(S,y.onmessage,k)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(k){}},b=this.webSocketFactory.create(d,E2(a),D);b.connect(),await g;const N={setup:{model:Ue(this.apiClient,e.model)}};return b.send(JSON.stringify(N)),new T2(b,this.apiClient)}}class T2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=$L(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=qL(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(as.PLAY)}pause(){this.sendPlaybackControl(as.PAUSE)}stop(){this.sendPlaybackControl(as.STOP)}resetContext(){this.sendPlaybackControl(as.RESET_CONTEXT)}close(){this.conn.close()}}function E2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function w2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function S2(t,e,n){const i=new O1;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const a=JL(o);Object.assign(i,a)}else Object.assign(i,o);e(i)}class I2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new v2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&xx(e.config.tools)&&Sx(y);const v=R2(y);if(this.apiClient.isVertexAI()){const P=this.apiClient.getProject(),U=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),F=!!P&&!!U||!!O;this.apiClient.getCustomBaseUrl()&&!F?g=d:(g=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,g))}else{const P=this.apiClient.getApiKey();let U="BidiGenerateContent",O="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",O="access_token"),g=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${U}?${O}=${P}`}let S=()=>{};const D=new Promise(P=>{S=P}),b=e.callbacks,B=function(){var P;(P=b==null?void 0:b.onopen)===null||P===void 0||P.call(b),S({})},R=this.apiClient,N={onopen:B,onmessage:P=>{S2(R,b.onmessage,P)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(P){}},k=this.webSocketFactory.create(g,P2(v),N);k.connect(),await D;let H=Ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const P=this.apiClient.getProject(),U=this.apiClient.getLocation();P&&U&&(H=`projects/${P}/locations/${U}/`+H)}let J={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[od.AUDIO]}:e.config.responseModalities=[od.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],V=[];for(const P of Z)if(this.isCallableTool(P)){const U=P;V.push(await U.tool())}else V.push(P);V.length>0&&(e.config.tools=V);const C={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=HL(this.apiClient,C):J=GL(this.apiClient,C),delete J.config,k.send(JSON.stringify(J)),new A2(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const C2={turnComplete:!0};class A2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=kn(n.turns),e.isVertexAI()||(i=i.map(r=>Bd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(x2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},C2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:KL(e)}:n={realtimeInput:WL(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function P2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function R2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wv=10;function Kv(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(vs(a)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function vs(t){return"callTool"in t&&typeof t.callTool=="function"}function k2(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>vs(r)))!==null&&i!==void 0?i:!1}function Jv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(vs(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function Zv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N2 extends Ui{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!k2(n)||Kv(n.config))return await this.generateContentInternal(d);const f=Jv(n);if(f.length>0){const b=f.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let g,y;const v=kn(d.contents),S=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Wv;let D=0;for(;D<S&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const b=g.candidates[0].content,B=[];for(const R of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(vs(R)){const k=await R.callTool(g.functionCalls);B.push(...k)}D++,y={role:"user",parts:B},d.contents=kn(d.contents),d.contents.push(b),d.contents.push(y),Zv(d.config)&&(v.push(b),v.push(y))}return Zv(d.config)&&(g.automaticFunctionCallingHistory=v),g},this.generateContentStream=async n=>{var i,r,o,a,u;if(this.maybeMoveToResponseJsonSchem(n),Kv(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const d=Jv(n);if(d.length>0){const y=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,g=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const a=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:a.push(d);let u;return o?u={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new ho(Vi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async d=>vs(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&xx(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Sx(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(vs(a)){const u=a,d=await u.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Wv;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(f,g,y){return Wn(this,arguments,function*(){for(var v,S,D,b,B,R;u<o;){a&&(u++,a=!1);const J=yield _e(f.processParamsMaybeAddMcpUsage(y)),Z=yield _e(f.generateContentStreamInternal(J)),V=[],C=[];try{for(var N=!0,k=(S=void 0,Kn(Z)),H;H=yield _e(k.next()),v=H.done,!v;N=!0){b=H.value,N=!1;const P=b;if(yield yield _e(P),P.candidates&&(!((B=P.candidates[0])===null||B===void 0)&&B.content)){C.push(P.candidates[0].content);for(const U of(R=P.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(u<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(U.functionCall.name)){const O=yield _e(g.get(U.functionCall.name).callTool([U.functionCall]));V.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(P){S={error:P}}finally{try{!N&&!v&&(D=k.return)&&(yield _e(D.call(k)))}finally{if(S)throw S.error}}if(V.length>0){a=!0;const P=new Fa;P.candidates=[{content:{role:"user",parts:V}}],yield yield _e(P);const U=[];U.push(...C),U.push({role:"user",parts:V});const O=kn(y.contents).concat(U);y.contents=O}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Gv(this.apiClient,e);return u=ie("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=qv(g),v=new Fa;return Object.assign(v,y),v})}else{const f=zv(this.apiClient,e);return u=ie("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Hv(g),v=new Fa;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Gv(this.apiClient,e);return u=ie("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(y){return Wn(this,arguments,function*(){var v,S,D,b;try{for(var B=!0,R=Kn(y),N;N=yield _e(R.next()),v=N.done,!v;B=!0){b=N.value,B=!1;const k=b,H=qv(yield _e(k.json()));H.sdkHttpResponse={headers:k.headers};const J=new Fa;Object.assign(J,H),yield yield _e(J)}}catch(k){S={error:k}}finally{try{!B&&!v&&(D=R.return)&&(yield _e(D.call(R)))}finally{if(S)throw S.error}}})})}else{const f=zv(this.apiClient,e);return u=ie("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(y){return Wn(this,arguments,function*(){var v,S,D,b;try{for(var B=!0,R=Kn(y),N;N=yield _e(R.next()),v=N.done,!v;B=!0){b=N.value,B=!1;const k=b,H=Hv(yield _e(k.json()));H.sdkHttpResponse={headers:k.headers};const J=new Fa;Object.assign(J,H),yield yield _e(J)}}catch(k){S={error:k}}finally{try{!B&&!v&&(D=R.return)&&(yield _e(D.call(R)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=ID(this.apiClient,e);return u=ie("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=AD(g),v=new Sv;return Object.assign(v,y),v})}else{const f=SD(this.apiClient,e);return u=ie("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=CD(g),v=new Sv;return Object.assign(v,y),v})}}async generateImagesInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=UD(this.apiClient,e);return u=ie("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=BD(g),v=new Iv;return Object.assign(v,y),v})}else{const f=FD(this.apiClient,e);return u=ie("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=OD(g),v=new Iv;return Object.assign(v,y),v})}}async editImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=TD(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=ED(d),g=new P1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=Ub(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=Ob(d),g=new R1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=vb(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=Tb(d),g=new k1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=Cb(this.apiClient,e);return o=ie("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=Ab(d),g=new N1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=ib(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>sp(g))}else{const f=nb(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>op(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=hb(this.apiClient,e);return u=ie("{models_url}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=pb(g),v=new Cv;return Object.assign(v,y),v})}else{const f=db(this.apiClient,e);return u=ie("{models_url}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=fb(g),v=new Cv;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Vb(this.apiClient,e);return u=ie("{model}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>sp(g))}else{const f=bb(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>op(g))}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=gD(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=yD(g),v=new Av;return Object.assign(v,y),v})}else{const f=mD(this.apiClient,e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=_D(g),v=new Av;return Object.assign(v,y),v})}}async countTokens(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=hD(this.apiClient,e);return u=ie("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=pD(g),v=new Pv;return Object.assign(v,y),v})}else{const f=dD(this.apiClient,e);return u=ie("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=fD(g),v=new Pv;return Object.assign(v,y),v})}}async computeTokens(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=rD(this.apiClient,e);return o=ie("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const f=oD(d),g=new M1;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=WD(this.apiClient,e);return u=ie("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>{const y=qD(g),v=new sd;return Object.assign(v,y),v})}else{const f=$D(this.apiClient,e);return u=ie("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const y=HD(g),v=new sd;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M2 extends Ui{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=w1(e);return u=ie("{operationName}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a}else{const f=E1(e);return u=ie("{operationName}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=p1(e);return o=ie("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L2(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function D2(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>H2(o))),p(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&p(e,["role"],i),e}function b2(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const o=c(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const a=c(e,["uses"]);n!==void 0&&a!=null&&p(n,["uses"],a);const u=c(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&p(n,["bidiGenerateContentSetup"],G2(t,u));const d=c(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&p(n,["fieldMask"],d),i}function V2(t,e){const n={},i=c(e,["config"]);return i!=null&&p(n,["config"],b2(t,i,n)),n}function F2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function U2(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const i=c(t,["args"]);i!=null&&p(e,["args"],i);const r=c(t,["name"]);if(r!=null&&p(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function O2(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function B2(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function z2(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const g=c(t,["seed"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],Jm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=c(t,["systemInstruction"]);e!==void 0&&D!=null&&p(e,["setup","systemInstruction"],D2(Gt(D)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let Z=qs(b);Array.isArray(Z)&&(Z=Z.map(V=>$2(Hs(V)))),p(e,["setup","tools"],Z)}const B=c(t,["sessionResumption"]);e!==void 0&&B!=null&&p(e,["setup","sessionResumption"],q2(B));const R=c(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const k=c(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const H=c(t,["contextWindowCompression"]);e!==void 0&&H!=null&&p(e,["setup","contextWindowCompression"],H);const J=c(t,["proactivity"]);if(e!==void 0&&J!=null&&p(e,["setup","proactivity"],J),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function G2(t,e){const n={},i=c(e,["model"]);i!=null&&p(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&p(n,["config"],z2(r,n)),n}function H2(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&p(e,["fileData"],F2(o));const a=c(t,["functionCall"]);a!=null&&p(e,["functionCall"],U2(a));const u=c(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&p(e,["inlineData"],L2(d));const f=c(t,["text"]);f!=null&&p(e,["text"],f);const g=c(t,["thought"]);g!=null&&p(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function q2(t){const e={},n=c(t,["handle"]);if(n!=null&&p(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $2(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],O2(a));const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],B2(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&p(e,["googleSearchRetrieval"],d);const f=c(t,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function K2(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=W2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(f=>a.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class J2 extends Ui{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=V2(this.apiClient,e);o=ie("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=K2(u,e.config);return r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function Y2(t){const e={},n=c(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&Z2(i,e),e}function Q2(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function X2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function j2(t){const e={},n=c(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const i=c(t,["config"]);return i!=null&&X2(i,e),e}function eV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=c(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tV extends Ui{constructor(e){super(),this.apiClient=e,this.list=async n=>new ho(Vi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Q2(e);return o=ie("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Y2(e);r=ie("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=j2(e);return o=ie("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=eV(d),g=new L1;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nV extends Ui{constructor(e,n=new tV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ho(Vi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wb(e);return o=ie("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zb(e);return o=ie("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Jb(e);r=ie("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=t2(e);return o=ie("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=n2(d),g=new D1;return Object.assign(g,f),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=i2(e);return o=ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=r2(d),g=new b1;return Object.assign(g,f),g})}}async importFile(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xb(e);return o=ie("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=Qb(d),g=new Hm;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ix=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Ix=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const iV=()=>Ix();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const up=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ln extends Error{}class Zt extends Ln{constructor(e,n,i,r){super(`${Zt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Hd({message:i,cause:up(n)});const o=n;return e===400?new Ax(e,o,i,r):e===401?new Px(e,o,i,r):e===403?new Rx(e,o,i,r):e===404?new kx(e,o,i,r):e===409?new Nx(e,o,i,r):e===422?new Mx(e,o,i,r):e===429?new Lx(e,o,i,r):e>=500?new Dx(e,o,i,r):new Zt(e,o,i,r)}}class cp extends Zt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Hd extends Zt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Cx extends Hd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ax extends Zt{}class Px extends Zt{}class Rx extends Zt{}class kx extends Zt{}class Nx extends Zt{}class Mx extends Zt{}class Lx extends Zt{}class Dx extends Zt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rV=/^[a-z][a-z0-9+.-]*:/i,oV=t=>rV.test(t);let dp=t=>(dp=Array.isArray,dp(t));const sV=dp;let aV=sV;const Yv=aV;function lV(t){if(!t)return!0;for(const e in t)return!1;return!0}function uV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const cV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ln(`${t} must be an integer`);if(e<0)throw new Ln(`${t} must be a positive integer`);return e},dV=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hV=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const pV=()=>{var t,e,n,i,r;const o=fV();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jo,"X-Stainless-OS":Xv(Deno.build.os),"X-Stainless-Arch":Qv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jo,"X-Stainless-OS":Xv((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Qv((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=mV();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${o}.${a}`}}}return null}const Qv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Xv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Xu;const gV=()=>Xu??(Xu=pV());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _V(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function yV(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bx({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Vx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function vV(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fx=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Dh(t,e,n){return Fx(),new File(t,e??"unknown_file",n)}function EV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const wV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ux=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",xV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ux(t),SV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function IV(t,e,n){if(Fx(),t=await t,xV(t))return t instanceof File?t:Dh([await t.arrayBuffer()],t.name);if(SV(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Dh(await hp(r),e,n)}const i=await hp(t);if(e||(e=EV(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Dh(i,e,n)}async function hp(t){var e,n,i,r,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Ux(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(wV(t))try{for(var u=!0,d=Kn(t),f;f=await d.next(),e=f.done,!e;u=!0){r=f.value,u=!1;const g=r;a.push(...await hp(g))}}catch(g){n={error:g}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const g=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${CV(t)}`)}return a}function CV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ox{constructor(e){this._client=e}}Ox._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bx(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const jv=Object.freeze(Object.create(null)),AV=(t=Bx)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],a=n.reduce((g,y,v)=>{var S,D,b;/[?#]/.test(y)&&(r=!0);const B=i[v];let R=(r?encodeURIComponent:t)(""+B);return v!==i.length&&(B==null||typeof B=="object"&&B.toString===((b=Object.getPrototypeOf((D=Object.getPrototypeOf((S=B.hasOwnProperty)!==null&&S!==void 0?S:jv))!==null&&D!==void 0?D:jv))===null||b===void 0?void 0:b.toString))&&(R=B+"",o.push({start:g.length+y.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(B).slice(8,-1)} is not a valid path parameter`})),g+y+(v===i.length?"":R)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=d.exec(u))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((g,y)=>g.start-y.start),o.length>0){let g=0;const y=o.reduce((v,S)=>{const D=" ".repeat(S.start-g),b="^".repeat(S.length);return g=S.start+S.length,v+D+b},"");throw new Ln(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${a}
${y}`)}return a},ju=AV(Bx);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zx extends Ox{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=ld(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Ln("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Ln("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ju`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(ju`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(ju`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:a=this._client.apiVersion}=o,u=ld(o,["api_version"]);return this._client.get(ju`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}zx._key=Object.freeze(["interactions"]);class Gx extends zx{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PV(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let ec;function Ym(t){let e;return(ec??(e=new globalThis.TextEncoder,ec=e.encode.bind(e)))(t)}let tc;function e0(t){let e;return(tc??(e=new globalThis.TextDecoder,tc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ym(e):e;this.buffer=PV([this.buffer,n]);const i=[];let r;for(;(r=RV(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(e0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=e0(this.buffer.subarray(0,o));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}qd.NEWLINE_CHARS=new Set([`
`,"\r"]);qd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function RV(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function kV(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ud={off:0,error:200,warn:300,info:400,debug:500},t0=(t,e,n)=>{if(t){if(uV(ud,t))return t;Wt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ud))}`)}};function Wa(){}function nc(t,e,n){return!e||ud[t]>ud[n]?Wa:e[t].bind(e)}const NV={error:Wa,warn:Wa,info:Wa,debug:Wa};let n0=new WeakMap;function Wt(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return NV;const r=n0.get(n);if(r&&r[0]===i)return r[1];const o={error:nc("error",n,i),warn:nc("warn",n,i),info:nc("info",n,i),debug:nc("debug",n,i)};return n0.set(n,[i,o]),o}const $r=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ls{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Wt(i):console;function a(){return Wn(this,arguments,function*(){var d,f,g,y;if(r)throw new Ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var S=!0,D=Kn(MV(e,n)),b;b=yield _e(D.next()),d=b.done,!d;S=!0){y=b.value,S=!1;const B=y;if(!v)if(B.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield _e(JSON.parse(B.data))}catch(R){throw o.error("Could not parse message into JSON:",B.data),o.error("From chunk:",B.raw),R}}}catch(B){f={error:B}}finally{try{!S&&!d&&(g=D.return)&&(yield _e(g.call(D)))}finally{if(f)throw f.error}}v=!0}catch(B){if(lp(B))return yield _e(void 0);throw B}finally{v||n.abort()}})}return new ls(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Wn(this,arguments,function*(){var d,f,g,y;const v=new qd,S=Vx(e);try{for(var D=!0,b=Kn(S),B;B=yield _e(b.next()),d=B.done,!d;D=!0){y=B.value,D=!1;const R=y;for(const N of v.decode(R))yield yield _e(N)}}catch(R){f={error:R}}finally{try{!D&&!d&&(g=b.return)&&(yield _e(g.call(b)))}finally{if(f)throw f.error}}for(const R of v.flush())yield yield _e(R)})}function a(){return Wn(this,arguments,function*(){var d,f,g,y;if(r)throw new Ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var S=!0,D=Kn(o()),b;b=yield _e(D.next()),d=b.done,!d;S=!0){y=b.value,S=!1;const B=y;v||B&&(yield yield _e(JSON.parse(B)))}}catch(B){f={error:B}}finally{try{!S&&!d&&(g=D.return)&&(yield _e(g.call(D)))}finally{if(f)throw f.error}}v=!0}catch(B){if(lp(B))return yield _e(void 0);throw B}finally{v||n.abort()}})}return new ls(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const a=i.next();e.push(a),n.push(a)}return o.shift()}});return[new ls(()=>r(e),this.controller,this.client),new ls(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return bx({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const a=Ym(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function MV(t,e){return Wn(this,arguments,function*(){var i,r,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ln("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ln("Attempted to iterate over a response with no body");const u=new DV,d=new qd,f=Vx(t.body);try{for(var g=!0,y=Kn(LV(f)),v;v=yield _e(y.next()),i=v.done,!i;g=!0){a=v.value,g=!1;const S=a;for(const D of d.decode(S)){const b=u.decode(D);b&&(yield yield _e(b))}}}catch(S){r={error:S}}finally{try{!g&&!i&&(o=y.return)&&(yield _e(o.call(y)))}finally{if(r)throw r.error}}for(const S of d.flush()){const D=u.decode(S);D&&(yield yield _e(D))}})}function LV(t){return Wn(this,arguments,function*(){var n,i,r,o;let a=new Uint8Array;try{for(var u=!0,d=Kn(t),f;f=yield _e(d.next()),n=f.done,!n;u=!0){o=f.value,u=!1;const g=o;if(g==null)continue;const y=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Ym(g):g;let v=new Uint8Array(a.length+y.length);v.set(a),v.set(y,a.length),a=v;let S;for(;(S=kV(a))!==-1;)yield yield _e(a.slice(0,S)),a=a.slice(S)}}catch(g){i={error:g}}finally{try{!u&&!n&&(r=d.return)&&(yield _e(r.call(d)))}finally{if(i)throw i.error}}a.length>0&&(yield yield _e(a))})}class DV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=bV(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function bV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VV(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,a=await(async()=>{var u;if(e.options.stream)return Wt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ls.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),f=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await n.json():await n.text()})();return Wt(t).debug(`[${i}] response parsed`,$r({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qm extends Promise{constructor(e,n,i=VV){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Qm(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hx=Symbol("brand.privateNullableHeaders");function*FV(t){if(!t)return;if(Hx in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Yv(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=Yv(i[1])?i[1]:[i[1]];let a=!1;for(const u of o)u!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,u])}}const Ua=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,a]of FV(i)){const u=o.toLowerCase();r.has(u)||(e.delete(o),r.add(u)),a===null?(e.delete(o),n.add(u)):(e.append(o,a),n.delete(u))}}return{[Hx]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bh=t=>{var e,n,i,r,o,a;if(typeof globalThis.process<"u")return(i=(n=(e=l1)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qx;class $d{constructor(e){var n,i,r,o,a,u,d,{baseURL:f=bh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(n=bh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:y="v1beta"}=e,v=ld(e,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:g,apiVersion:y},v),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(i=S.timeout)!==null&&i!==void 0?i:$d.DEFAULT_TIMEOUT,this.logger=(r=S.logger)!==null&&r!==void 0?r:console;const D="warn";this.logLevel=D,this.logLevel=(a=(o=t0(S.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:t0(bh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:D,this.fetchOptions=S.fetchOptions,this.maxRetries=(u=S.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=S.fetch)!==null&&d!==void 0?d:_V(),this.encoder=TV,this._options=S,this.apiKey=g,this.apiVersion=y,this.clientAdapter=S.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ua([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ua([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ua([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ln(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Jo}`}defaultIdempotencyKey(){return`stainless-node-retry-${iV()}`}makeStatusError(e,n,i,r){return Zt.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=oV(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return lV(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Qm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,a;const u=await e,d=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:f,url:g,timeout:y}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(f,{url:g,options:u});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=i===void 0?"":`, retryOf: ${i}`,D=Date.now();if(Wt(this).debug(`[${v}] sending request`,$r({retryOfRequestLogID:i,method:u.method,url:g,options:u,headers:f.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new cp;const b=new AbortController,B=await this.fetchWithTimeout(g,f,y,b).catch(up),R=Date.now();if(B instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new cp;const H=lp(B)||/timed? ?out/i.test(String(B)+("cause"in B?String(B.cause):""));if(n)return Wt(this).info(`[${v}] connection ${H?"timed out":"failed"} - ${k}`),Wt(this).debug(`[${v}] connection ${H?"timed out":"failed"} (${k})`,$r({retryOfRequestLogID:i,url:g,durationMs:R-D,message:B.message})),this.retryRequest(u,n,i??v);throw Wt(this).info(`[${v}] connection ${H?"timed out":"failed"} - error; no more retries left`),Wt(this).debug(`[${v}] connection ${H?"timed out":"failed"} (error; no more retries left)`,$r({retryOfRequestLogID:i,url:g,durationMs:R-D,message:B.message})),H?new Cx:new Hd({cause:B})}const N=`[${v}${S}] ${f.method} ${g} ${B.ok?"succeeded":"failed"} with status ${B.status} in ${R-D}ms`;if(!B.ok){const k=await this.shouldRetry(B);if(n&&k){const P=`retrying, ${n} attempts remaining`;return await vV(B.body),Wt(this).info(`${N} - ${P}`),Wt(this).debug(`[${v}] response error (${P})`,$r({retryOfRequestLogID:i,url:B.url,status:B.status,headers:B.headers,durationMs:R-D})),this.retryRequest(u,n,i??v,B.headers)}const H=k?"error; no more retries left":"error; not retryable";Wt(this).info(`${N} - ${H}`);const J=await B.text().catch(P=>up(P).message),Z=dV(J),V=Z?void 0:J;throw Wt(this).debug(`[${v}] response error (${H})`,$r({retryOfRequestLogID:i,url:B.url,status:B.status,headers:B.headers,message:V,durationMs:Date.now()-D})),this.makeStatusError(B.status,Z,V,B.headers)}return Wt(this).info(N),Wt(this).debug(`[${v}] response start`,$r({retryOfRequestLogID:i,url:B.url,status:B.status,headers:B.headers,durationMs:R-D})),{response:B,options:u,controller:b,requestLogID:v,retryOfRequestLogID:i,startTime:D}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:a,method:u}=o,d=ld(o,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const f=setTimeout(()=>r.abort(),i),g=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},g?{duplex:"half"}:{}),{method:"GET"}),d);u&&(y.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const f=parseFloat(u);Number.isNaN(f)||(a=f)}const d=r==null?void 0:r.get("retry-after");if(d&&!a){const f=parseFloat(d);Number.isNaN(f)?a=Date.parse(d)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await hV(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const a=Object.assign({},e),{method:u,path:d,query:f,defaultBaseURL:g}=a,y=this.buildURL(d,f,g);"timeout"in a&&cV("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:v,body:S}=this.buildBody({options:a}),D=await this.buildHeaders({options:e,method:u,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:D},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=Ua([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),gV()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Ua([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:yV(e)}:this.encoder({body:e,headers:i})}}$d.DEFAULT_TIMEOUT=6e4;class At extends $d{constructor(){super(...arguments),this.interactions=new Gx(this)}}qx=At;At.GeminiNextGenAPIClient=qx;At.GeminiNextGenAPIClientError=Ln;At.APIError=Zt;At.APIConnectionError=Hd;At.APIConnectionTimeoutError=Cx;At.APIUserAbortError=cp;At.NotFoundError=kx;At.ConflictError=Nx;At.RateLimitError=Lx;At.BadRequestError=Ax;At.AuthenticationError=Px;At.InternalServerError=Dx;At.PermissionDeniedError=Rx;At.UnprocessableEntityError=Mx;At.toFile=IV;At.Interactions=Gx;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UV(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function OV(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function BV(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function zV(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function GV(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);if(a!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&p(e,["tuningTask","hyperparameters","batchSize"],u);const d=c(t,["learningRate"]);if(e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","learningRate"],d),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function HV(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec"],i0(S))}else if(r==="PREFERENCE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec"],i0(S))}const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&p(e,["tunedModelDisplayName"],o);const a=c(t,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(u==="PREFERENCE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="PREFERENCE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(f==="PREFERENCE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let g=c(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(g==="PREFERENCE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=c(t,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);const v=c(t,["beta"]);return e!==void 0&&v!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function qV(t,e){const n={},i=c(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&tF(o);const a=c(t,["config"]);return a!=null&&GV(a,n),n}function $V(t,e){const n={},i=c(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&nF(o,n,e);const a=c(t,["config"]);return a!=null&&HV(a,n,e),n}function WV(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function KV(t,e){const n={},i=c(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function JV(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),i}function ZV(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),i}function YV(t,e){const n={},i=c(t,["config"]);return i!=null&&JV(i,n),n}function QV(t,e){const n={},i=c(t,["config"]);return i!=null&&ZV(i,n),n}function XV(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const o=c(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>$x(u))),p(n,["tuningJobs"],a)}return n}function jV(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const o=c(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>fp(u))),p(n,["tuningJobs"],a)}return n}function eF(t,e){const n={},i=c(t,["name"]);i!=null&&p(n,["model"],i);const r=c(t,["name"]);return r!=null&&p(n,["endpoint"],r),n}function tF(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(n,["examples","examples"],r)}return n}function nF(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function $x(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&p(n,["name"],r);const o=c(t,["state"]);o!=null&&p(n,["state"],ax(o));const a=c(t,["createTime"]);a!=null&&p(n,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&p(n,["startTime"],u);const d=c(t,["tuningTask","completeTime"]);d!=null&&p(n,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&p(n,["updateTime"],f);const g=c(t,["description"]);g!=null&&p(n,["description"],g);const y=c(t,["baseModel"]);y!=null&&p(n,["baseModel"],y);const v=c(t,["_self"]);return v!=null&&p(n,["tunedModel"],eF(v)),n}function fp(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&p(n,["name"],r);const o=c(t,["state"]);o!=null&&p(n,["state"],ax(o));const a=c(t,["createTime"]);a!=null&&p(n,["createTime"],a);const u=c(t,["startTime"]);u!=null&&p(n,["startTime"],u);const d=c(t,["endTime"]);d!=null&&p(n,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&p(n,["updateTime"],f);const g=c(t,["error"]);g!=null&&p(n,["error"],g);const y=c(t,["description"]);y!=null&&p(n,["description"],y);const v=c(t,["baseModel"]);v!=null&&p(n,["baseModel"],v);const S=c(t,["tunedModel"]);S!=null&&p(n,["tunedModel"],S);const D=c(t,["preTunedModel"]);D!=null&&p(n,["preTunedModel"],D);const b=c(t,["supervisedTuningSpec"]);b!=null&&p(n,["supervisedTuningSpec"],b);const B=c(t,["preferenceOptimizationSpec"]);B!=null&&p(n,["preferenceOptimizationSpec"],B);const R=c(t,["tuningDataStats"]);R!=null&&p(n,["tuningDataStats"],R);const N=c(t,["encryptionSpec"]);N!=null&&p(n,["encryptionSpec"],N);const k=c(t,["partnerModelTuningSpec"]);k!=null&&p(n,["partnerModelTuningSpec"],k);const H=c(t,["customBaseModel"]);H!=null&&p(n,["customBaseModel"],H);const J=c(t,["experiment"]);J!=null&&p(n,["experiment"],J);const Z=c(t,["labels"]);Z!=null&&p(n,["labels"],Z);const V=c(t,["outputUri"]);V!=null&&p(n,["outputUri"],V);const C=c(t,["pipelineJob"]);C!=null&&p(n,["pipelineJob"],C);const P=c(t,["serviceAccount"]);P!=null&&p(n,["serviceAccount"],P);const U=c(t,["tunedModelDisplayName"]);U!=null&&p(n,["tunedModelDisplayName"],U);const O=c(t,["veoTuningSpec"]);return O!=null&&p(n,["veoTuningSpec"],O),n}function iF(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&p(n,["name"],r);const o=c(t,["metadata"]);o!=null&&p(n,["metadata"],o);const a=c(t,["done"]);a!=null&&p(n,["done"],a);const u=c(t,["error"]);return u!=null&&p(n,["error"],u),n}function i0(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&p(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&p(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rF extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ho(Vi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:ep.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=KV(e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>fp(g))}else{const f=WV(e);return u=ie("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>$x(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=QV(e);return u=ie("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=jV(g),v=new Rv;return Object.assign(v,y),v})}else{const f=YV(e);return u=ie("tunedModels",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=XV(g),v=new Rv;return Object.assign(v,y),v})}}async cancel(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=OV(e);return u=ie("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=zV(g),v=new kv;return Object.assign(v,y),v})}else{const f=UV(e);return u=ie("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=BV(g),v=new kv;return Object.assign(v,y),v})}}async tuneInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=$V(e,e);return o=ie("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>fp(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qV(e);return o=ie("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>iF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oF{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sF=1024*1024*8,aF=3,lF=1e3,uF=2,cd="x-goog-upload-status";async function cF(t,e,n){var i;const r=await Wx(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[cd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function dF(t,e,n){var i;const r=await Wx(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[cd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=tx(o),u=new qm;return Object.assign(u,a),u}async function Wx(t,e,n){var i,r;let o=0,a=0,u=new np(new Response),d="upload";for(o=t.size;a<o;){const f=Math.min(sF,o-a),g=t.slice(a,a+f);a+f>=o&&(d+=", finalize");let y=0,v=lF;for(;y<aF&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[cd]));)y++,await fF(v),v=v*uF;if(a+=f,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[cd])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function hF(t){return{size:t.size,type:t.type}}function fF(t){return new Promise(e=>setTimeout(e,t))}class pF{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cF(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dF(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hF(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mF{create(e,n,i){return new gF(e,n,i)}}class gF{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r0="x-goog-api-key";class _F{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(r0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(r0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yF="gl-node/";class vF{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new At({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=h1(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new _F(this.apiKey);this.apiClient=new h2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:yF+"web",uploader:new pF,downloader:new oF}),this.models=new N2(this.apiClient),this.live=new I2(this.apiClient,r,new mF),this.batches=new zM(this.apiClient),this.chats=new wL(this.models,this.apiClient),this.caches=new vL(this.apiClient),this.files=new ML(this.apiClient),this.operations=new M2(this.apiClient),this.authTokens=new J2(this.apiClient),this.tunings=new rF(this.apiClient),this.fileSearchStores=new nV(this.apiClient)}}const TF=new vF({apiKey:"AIzaSy... (Gemini API Anahtarnz)"}),EF=async(t,e,n)=>{var i;try{const r=`${n} ilesindeki ${t} isimli, ${e} ara kapasiteli taksi dura iin ksa, resmi bir tantm/bilgi notu yaz. 1 cmleyi gemesin.`;return((i=(await TF.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text)==null?void 0:i.trim())||""}catch(r){return console.error("Gemini AI Error:",r),""}};var pp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(wS,function(n){var i="1.9.4";function r(s){var l,m,_,w;for(m=1,_=arguments.length;m<_;m++){w=arguments[m];for(l in w)s[l]=w[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var _=m.call(arguments,2);return function(){return s.apply(l,_.length?_.concat(m.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,m){var _,w,I,z;return z=function(){_=!1,w&&(I.apply(m,w),w=!1)},I=function(){_?w=arguments:(s.apply(m,arguments),setTimeout(z,l),_=!0)},I}function g(s,l,m){var _=l[1],w=l[0],I=_-w;return s===_&&m?s:((s-w)%I+I)%I+w}function y(){return!1}function v(s,l){if(l===!1)return s;var m=Math.pow(10,l===void 0?6:l);return Math.round(s*m)/m}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function D(s){return S(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var m in l)s.options[m]=l[m];return s.options}function B(s,l,m){var _=[];for(var w in s)_.push(encodeURIComponent(m?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function N(s,l){return s.replace(R,function(m,_){var w=l[_];if(w===void 0)throw new Error("No value provided for variable "+m);return typeof w=="function"&&(w=w(l)),w})}var k=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,l){for(var m=0;m<s.length;m++)if(s[m]===l)return m;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var V=0;function C(s){var l=+new Date,m=Math.max(0,16-(l-V));return V=l+m,window.setTimeout(s,m)}var P=window.requestAnimationFrame||Z("RequestAnimationFrame")||C,U=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,m){if(m&&P===C)s.call(l);else return P.call(window,a(s,l))}function F(s){s&&U.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:f,wrapNum:g,falseFn:y,formatNum:v,trim:S,splitWords:D,setOptions:b,getParamString:B,template:N,isArray:k,indexOf:H,emptyImageUrl:J,requestFn:P,cancelFn:U,requestAnimFrame:O,cancelAnimFrame:F};function ae(){}ae.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,_=o(m);_.constructor=l,l.prototype=_;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return s.statics&&r(l,s.statics),s.includes&&(Ke(s.includes),r.apply(null,[_].concat(s.includes))),r(_,s),delete _.statics,delete _.includes,_.options&&(_.options=m.options?o(m.options):{},r(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,z=_._initHooks.length;I<z;I++)_._initHooks[I].call(this)}},l},ae.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ae.mergeOptions=function(s){return r(this.prototype.options,s),this},ae.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Ke(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=k(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l);else{s=D(s);for(var w=0,I=s.length;w<I;w++)this._on(s[w],l,m)}return this},off:function(s,l,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],l);else{s=D(s);for(var w=arguments.length===1,I=0,z=s.length;I<z;I++)w?this._off(s[I]):this._off(s[I],l,m)}return this},_on:function(s,l,m,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,m)===!1){m===this&&(m=void 0);var w={fn:l,ctx:m};_&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,l,m){var _,w,I;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(w=0,I=_.length;w<I;w++)_[w].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(s,l,m);if(z!==!1){var $=_[z];this._firingCount&&($.fn=y,this._events[s]=_=_.slice()),_.splice(z,1)}}},fire:function(s,l,m){if(!this.listens(s,m))return this;var _=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var I=0,z=w.length;I<z;I++){var $=w[I],W=$.fn;$.once&&this.off(s,W,$.ctx),W.call($.ctx||this,_)}this._firingCount--}}return m&&this._propagateEvent(_),this},listens:function(s,l,m,_){typeof s!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(_=!!l,w=void 0,m=void 0);var I=this._events&&this._events[s];if(I&&I.length&&this._listens(s,w,m)!==!1)return!0;if(_){for(var z in this._eventParents)if(this._eventParents[z].listens(s,l,m,_))return!0}return!1},_listens:function(s,l,m){if(!this._events)return!1;var _=this._events[s]||[];if(!l)return!!_.length;m===this&&(m=void 0);for(var w=0,I=_.length;w<I;w++)if(_[w].fn===l&&_[w].ctx===m)return w;return!1},once:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l,!0);else{s=D(s);for(var w=0,I=s.length;w<I;w++)this._on(s[w],l,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var xe=ae.extend(Ne);function G(s,l,m){this.x=m?Math.round(s):s,this.y=m?Math.round(l):l}var ne=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(j(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(j(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(s){s=j(s);var l=s.x-this.x,m=s.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(s){return s=j(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=j(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function j(s,l,m){return s instanceof G?s:k(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,m)}function de(s,l){if(s)for(var m=l?[s,l]:s,_=0,w=m.length;_<w;_++)this.extend(m[_])}de.prototype={extend:function(s){var l,m;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=m=j(s);else if(s=ye(s),l=s.min,m=s.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,m;return typeof s[0]=="number"||s instanceof G?s=j(s):s=ye(s),s instanceof de?(l=s.min,m=s.max):l=m=s,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=ye(s);var l=this.min,m=this.max,_=s.min,w=s.max,I=w.x>=l.x&&_.x<=m.x,z=w.y>=l.y&&_.y<=m.y;return I&&z},overlaps:function(s){s=ye(s);var l=this.min,m=this.max,_=s.min,w=s.max,I=w.x>l.x&&_.x<m.x,z=w.y>l.y&&_.y<m.y;return I&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,m=this.max,_=Math.abs(l.x-m.x)*s,w=Math.abs(l.y-m.y)*s;return ye(j(l.x-_,l.y-w),j(m.x+_,m.y+w))},equals:function(s){return s?(s=ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ye(s,l){return!s||s instanceof de?s:new de(s,l)}function Pe(s,l){if(s)for(var m=l?[s,l]:s,_=0,w=m.length;_<w;_++)this.extend(m[_])}Pe.prototype={extend:function(s){var l=this._southWest,m=this._northEast,_,w;if(s instanceof Se)_=s,w=s;else if(s instanceof Pe){if(_=s._southWest,w=s._northEast,!_||!w)return this}else return s?this.extend(ve(s)||Oe(s)):this;return!l&&!m?(this._southWest=new Se(_.lat,_.lng),this._northEast=new Se(w.lat,w.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),m.lat=Math.max(w.lat,m.lat),m.lng=Math.max(w.lng,m.lng)),this},pad:function(s){var l=this._southWest,m=this._northEast,_=Math.abs(l.lat-m.lat)*s,w=Math.abs(l.lng-m.lng)*s;return new Pe(new Se(l.lat-_,l.lng-w),new Se(m.lat+_,m.lng+w))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Se||"lat"in s?s=ve(s):s=Oe(s);var l=this._southWest,m=this._northEast,_,w;return s instanceof Pe?(_=s.getSouthWest(),w=s.getNorthEast()):_=w=s,_.lat>=l.lat&&w.lat<=m.lat&&_.lng>=l.lng&&w.lng<=m.lng},intersects:function(s){s=Oe(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),w=s.getNorthEast(),I=w.lat>=l.lat&&_.lat<=m.lat,z=w.lng>=l.lng&&_.lng<=m.lng;return I&&z},overlaps:function(s){s=Oe(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),w=s.getNorthEast(),I=w.lat>l.lat&&_.lat<m.lat,z=w.lng>l.lng&&_.lng<m.lng;return I&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Oe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Oe(s,l){return s instanceof Pe?s:new Pe(s,l)}function Se(s,l,m){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,m!==void 0&&(this.alt=+m)}Se.prototype={equals:function(s,l){if(!s)return!1;s=ve(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Yn.distance(this,ve(s))},wrap:function(){return Yn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,m=l/Math.cos(Math.PI/180*this.lat);return Oe([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function ve(s,l,m){return s instanceof Se?s:k(s)&&typeof s[0]!="object"?s.length===3?new Se(s[0],s[1],s[2]):s.length===2?new Se(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Se(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Se(s,l,m)}var gt={latLngToPoint:function(s,l){var m=this.projection.project(s),_=this.scale(l);return this.transformation._transform(m,_)},pointToLatLng:function(s,l){var m=this.scale(l),_=this.transformation.untransform(s,m);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(s),_=this.transformation.transform(l.min,m),w=this.transformation.transform(l.max,m);return new de(_,w)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new Se(m,l,_)},wrapLatLngBounds:function(s){var l=s.getCenter(),m=this.wrapLatLng(l),_=l.lat-m.lat,w=l.lng-m.lng;if(_===0&&w===0)return s;var I=s.getSouthWest(),z=s.getNorthEast(),$=new Se(I.lat-_,I.lng-w),W=new Se(z.lat-_,z.lng-w);return new Pe($,W)}},Yn=r({},gt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var m=Math.PI/180,_=s.lat*m,w=l.lat*m,I=Math.sin((l.lat-s.lat)*m/2),z=Math.sin((l.lng-s.lng)*m/2),$=I*I+Math.cos(_)*Math.cos(w)*z*z,W=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*W}}),Kl=6378137,Bi={R:Kl,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,m=this.MAX_LATITUDE,_=Math.max(Math.min(m,s.lat),-m),w=Math.sin(_*l);return new G(this.R*s.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Kl*Math.PI;return new de([-s,-s],[s,s])}()};function zi(s,l,m,_){if(k(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=m,this._d=_}zi.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function hi(s,l,m,_){return new zi(s,l,m,_)}var Pr=r({},Yn,{code:"EPSG:3857",projection:Bi,transformation:function(){var s=.5/(Math.PI*Bi.R);return hi(s,.5,-s,.5)}()}),Ws=r({},Pr,{code:"EPSG:900913"});function fo(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ks(s,l){var m="",_,w,I,z,$,W;for(_=0,I=s.length;_<I;_++){for($=s[_],w=0,z=$.length;w<z;w++)W=$[w],m+=(w?"L":"M")+W.x+" "+W.y;m+=l?le.svg?"z":"x":""}return m||"M0 0"}var Js=document.documentElement.style,po="ActiveXObject"in window,Jl=po&&!document.addEventListener,mo="msLaunchUri"in navigator&&!("documentMode"in document),go=gn("webkit"),Zl=gn("android"),_o=gn("android 2")||gn("android 3"),Zs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Yl=Zl&&gn("Google")&&Zs<537&&!("AudioNode"in window),dt=!!window.opera,Et=!mo&&gn("chrome"),Rr=gn("gecko")&&!go&&!dt&&!po,Ql=!Et&&gn("safari"),Ys=gn("phantom"),Xl="OTransition"in Js,kr=navigator.platform.indexOf("Win")===0,Qs=po&&"transition"in Js,yo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_o,vo="MozPerspective"in Js,Wd=!window.L_DISABLE_3D&&(Qs||yo||vo)&&!Xl&&!Ys,Nr=typeof orientation<"u"||gn("mobile"),Xs=Nr&&go,jl=Nr&&yo,js=!window.PointerEvent&&window.MSPointerEvent,Gi=!!(window.PointerEvent||js),To="ontouchstart"in window||!!window.TouchEvent,ea=!window.L_NO_TOUCH&&(To||Gi),fi=Nr&&dt,eu=Nr&&Rr,Eo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tu=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),Mr=function(){return!!document.createElement("canvas").getContext}(),wo=!!(document.createElementNS&&fo("svg").createSVGRect),Pt=!!wo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),nu=!wo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Lr=navigator.platform.indexOf("Mac")===0,Dr=navigator.platform.indexOf("Linux")===0;function gn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:po,ielt9:Jl,edge:mo,webkit:go,android:Zl,android23:_o,androidStock:Yl,opera:dt,chrome:Et,gecko:Rr,safari:Ql,phantom:Ys,opera12:Xl,win:kr,ie3d:Qs,webkit3d:yo,gecko3d:vo,any3d:Wd,mobile:Nr,mobileWebkit:Xs,mobileWebkit3d:jl,msPointer:js,pointer:Gi,touch:ea,touchNative:To,mobileOpera:fi,mobileGecko:eu,retina:Eo,passiveEvents:tu,canvas:Mr,svg:wo,vml:nu,inlineSvg:Pt,mac:Lr,linux:Dr},pi=le.msPointer?"MSPointerDown":"pointerdown",iu=le.msPointer?"MSPointerMove":"pointermove",ru=le.msPointer?"MSPointerUp":"pointerup",br=le.msPointer?"MSPointerCancel":"pointercancel",xo={touchstart:pi,touchmove:iu,touchend:ru,touchcancel:br},So={touchstart:Co,touchmove:Io,touchend:Io,touchcancel:Io},Dn={},bn=!1;function ou(s,l,m){return l==="touchstart"&&au(),So[l]?(m=So[l].bind(this,m),s.addEventListener(xo[l],m,!1),m):(console.warn("wrong event specified:",l),y)}function su(s,l,m){if(!xo[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(xo[l],m,!1)}function ta(s){Dn[s.pointerId]=s}function na(s){Dn[s.pointerId]&&(Dn[s.pointerId]=s)}function ia(s){delete Dn[s.pointerId]}function au(){bn||(document.addEventListener(pi,ta,!0),document.addEventListener(iu,na,!0),document.addEventListener(ru,ia,!0),document.addEventListener(br,ia,!0),bn=!0)}function Io(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in Dn)l.touches.push(Dn[m]);l.changedTouches=[l],s(l)}}function Co(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&et(l),Io(s,l)}function lu(s){var l={},m,_;for(_ in s)m=s[_],l[_]=m&&m.bind?m.bind(s):m;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var ra=200;function Vr(s,l){s.addEventListener("dblclick",l);var m=0,_;function w(I){if(I.detail!==1){_=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var z=ga(I);if(!(z.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!z.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var $=Date.now();$-m<=ra?(_++,_===2&&l(lu(I))):_=1,m=$}}}return s.addEventListener("click",w),{dblclick:l,simDblclick:w}}function mi(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Fr=_i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ur=_i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),oa=Ur==="webkitTransition"||Ur==="OTransition"?Ur+"End":"transitionend";function sa(s){return typeof s=="string"?document.getElementById(s):s}function Hi(s,l){var m=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);m=_?_[l]:null}return m==="auto"?null:m}function Re(s,l,m){var _=document.createElement(s);return _.className=l||"",m&&m.appendChild(_),_}function $e(s){var l=s.parentNode;l&&l.removeChild(s)}function Or(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function gi(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function qi(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function aa(s,l){if(s.classList!==void 0)return s.classList.contains(l);var m=_n(s);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function we(s,l){if(s.classList!==void 0)for(var m=D(l),_=0,w=m.length;_<w;_++)s.classList.add(m[_]);else if(!aa(s,l)){var I=_n(s);la(s,(I?I+" ":"")+l)}}function Ye(s,l){s.classList!==void 0?s.classList.remove(l):la(s,S((" "+_n(s)+" ").replace(" "+l+" "," ")))}function la(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function _n(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function st(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Ao(s,l)}function Ao(s,l){var m=!1,_="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):s.style.filter+=" progid:"+_+"(opacity="+l+")"}function _i(s){for(var l=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in l)return s[m];return!1}function Qn(s,l,m){var _=l||new G(0,0);s.style[Fr]=(le.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(m?" scale("+m+")":"")}function me(s,l){s._leaflet_pos=l,le.any3d?Qn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function yn(s){return s._leaflet_pos||new G(0,0)}var Vn,Fn,ua;if("onselectstart"in document)Vn=function(){he(window,"selectstart",et)},Fn=function(){He(window,"selectstart",et)};else{var $i=_i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vn=function(){if($i){var s=document.documentElement.style;ua=s[$i],s[$i]="none"}},Fn=function(){$i&&(document.documentElement.style[$i]=ua,ua=void 0)}}function ca(){he(window,"dragstart",et)}function da(){He(window,"dragstart",et)}var Po,ha;function yi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(an(),Po=s,ha=s.style.outlineStyle,s.style.outlineStyle="none",he(window,"keydown",an))}function an(){Po&&(Po.style.outlineStyle=ha,Po=void 0,ha=void 0,He(window,"keydown",an))}function fa(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ro(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var uu={__proto__:null,TRANSFORM:Fr,TRANSITION:Ur,TRANSITION_END:oa,get:sa,getStyle:Hi,create:Re,remove:$e,empty:Or,toFront:gi,toBack:qi,hasClass:aa,addClass:we,removeClass:Ye,setClass:la,getClass:_n,setOpacity:st,testProp:_i,setTransform:Qn,setPosition:me,getPosition:yn,get disableTextSelection(){return Vn},get enableTextSelection(){return Fn},disableImageDrag:ca,enableImageDrag:da,preventOutline:yi,restoreOutline:an,getSizedParentNode:fa,getScale:Ro};function he(s,l,m,_){if(l&&typeof l=="object")for(var w in l)pa(s,w,l[w],m);else{l=D(l);for(var I=0,z=l.length;I<z;I++)pa(s,l[I],m,_)}return this}var vn="_leaflet_events";function He(s,l,m,_){if(arguments.length===1)cu(s),delete s[vn];else if(l&&typeof l=="object")for(var w in l)ma(s,w,l[w],m);else if(l=D(l),arguments.length===2)cu(s,function($){return H(l,$)!==-1});else for(var I=0,z=l.length;I<z;I++)ma(s,l[I],m,_);return this}function cu(s,l){for(var m in s[vn]){var _=m.split(/\d/)[0];(!l||l(_))&&ma(s,_,null,null,m)}}var Tn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function pa(s,l,m,_){var w=l+d(m)+(_?"_"+d(_):"");if(s[vn]&&s[vn][w])return this;var I=function($){return m.call(_||s,$||window.event)},z=I;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?I=ou(s,l,I):le.touch&&l==="dblclick"?I=Vr(s,I):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Tn[l]||l,I,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(I=function($){$=$||window.event,_a(s,$)&&z($)},s.addEventListener(Tn[l],I,!1)):s.addEventListener(l,z,!1):s.attachEvent("on"+l,I),s[vn]=s[vn]||{},s[vn][w]=I}function ma(s,l,m,_,w){w=w||l+d(m)+(_?"_"+d(_):"");var I=s[vn]&&s[vn][w];if(!I)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?su(s,l,I):le.touch&&l==="dblclick"?mi(s,I):"removeEventListener"in s?s.removeEventListener(Tn[l]||l,I,!1):s.detachEvent("on"+l,I),s[vn][w]=null}function En(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Wi(s){return pa(s,"wheel",En),this}function Ki(s){return he(s,"mousedown touchstart dblclick contextmenu",En),s._leaflet_disable_click=!0,this}function et(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ln(s){return et(s),En(s),this}function ga(s){if(s.composedPath)return s.composedPath();for(var l=[],m=s.target;m;)l.push(m),m=m.parentNode;return l}function ko(s,l){if(!l)return new G(s.clientX,s.clientY);var m=Ro(l),_=m.boundingClientRect;return new G((s.clientX-_.left)/m.x-l.clientLeft,(s.clientY-_.top)/m.y-l.clientTop)}var Qe=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function du(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Qe:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function _a(s,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var hu={__proto__:null,on:he,off:He,stopPropagation:En,disableScrollPropagation:Wi,disableClickPropagation:Ki,preventDefault:et,stop:ln,getPropagationPath:ga,getMousePosition:ko,getWheelDelta:du,isExternalTarget:_a,addListener:he,removeListener:He},ya=xe.extend({run:function(s,l,m,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=yn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var m=this._startPos.add(this._offset.multiplyBy(s));l&&m._round(),me(this._el,m),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ce=xe.extend({options:{crs:Pr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ve(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ur&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,oa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ve(s),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=r({animate:m.animate},m.zoom),m.pan=r({animate:m.animate,duration:m.duration},m.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,m.zoom):this._tryAnimatedPan(s,m.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,m){var _=this.getZoomScale(l),w=this.getSize().divideBy(2),I=s instanceof G?s:this.latLngToContainerPoint(s),z=I.subtract(w).multiplyBy(1-1/_),$=this.containerPointToLatLng(w.add(z));return this.setView($,l,{zoom:m})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Oe(s);var m=j(l.paddingTopLeft||l.padding||[0,0]),_=j(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(s,!1,m.add(_));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var I=_.subtract(m).divideBy(2),z=this.project(s.getSouthWest(),w),$=this.project(s.getNorthEast(),w),W=this.unproject(z.add($).divideBy(2).add(I),w);return{center:W,zoom:w}},fitBounds:function(s,l){if(s=Oe(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=j(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ya,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,m){if(m=m||{},m.animate===!1||!le.any3d)return this.setView(s,l,m);this._stop();var _=this.project(this.getCenter()),w=this.project(s),I=this.getSize(),z=this._zoom;s=ve(s),l=l===void 0?z:l;var $=Math.max(I.x,I.y),W=$*this.getZoomScale(z,l),Y=w.distanceTo(_)||1,re=1.42,fe=re*re;function Ie(ft){var Pu=ft?-1:1,yS=ft?W:$,vS=W*W-$*$+Pu*fe*fe*Y*Y,TS=2*yS*fe*Y,jd=vS/TS,vg=Math.sqrt(jd*jd+1)-jd,ES=vg<1e-9?-18:Math.log(vg);return ES}function $t(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function xt(ft){return(Math.exp(ft)+Math.exp(-ft))/2}function xn(ft){return $t(ft)/xt(ft)}var jt=Ie(0);function Ho(ft){return $*(xt(jt)/xt(jt+re*ft))}function pS(ft){return $*(xt(jt)*xn(jt+re*ft)-$t(jt))/fe}function mS(ft){return 1-Math.pow(1-ft,1.5)}var gS=Date.now(),_g=(Ie(1)-jt)/re,_S=m.duration?1e3*m.duration:1e3*_g*.8;function yg(){var ft=(Date.now()-gS)/_S,Pu=mS(ft)*_g;ft<=1?(this._flyToFrame=O(yg,this),this._move(this.unproject(_.add(w.subtract(_).multiplyBy(pS(Pu)/Y)),z),this.getScaleZoom($/Ho(Pu),z),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),yg.call(this),this},flyToBounds:function(s,l){var m=this._getBoundsCenterZoom(s,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(s){return s=Oe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var m=this.getCenter(),_=this._limitCenter(m,this._zoom,Oe(s));return m.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var m=j(l.paddingTopLeft||l.padding||[0,0]),_=j(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),I=this.project(s),z=this.getPixelBounds(),$=ye([z.min.add(m),z.max.subtract(_)]),W=$.getSize();if(!$.contains(I)){this._enforcingBounds=!0;var Y=I.subtract($.getCenter()),re=$.extend(I).getSize().subtract(W);w.x+=Y.x<0?-re.x:re.x,w.y+=Y.y<0?-re.y:re.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),_=l.divideBy(2).round(),w=m.divideBy(2).round(),I=_.subtract(w);return!I.x&&!I.y?this:(s.animate&&s.pan?this.panBy(I):(s.pan&&this._rawPanBy(I),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),m=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,s):navigator.geolocation.getCurrentPosition(l,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,m=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,m=s.coords.longitude,_=new Se(l,m),w=_.toBounds(s.coords.accuracy*2),I=this._locateOptions;if(I.setView){var z=this.getBoundsZoom(w);this.setView(_,I.maxZoom?Math.min(z,I.maxZoom):z)}var $={latlng:_,bounds:w,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&($[W]=s.coords[W]);this.fire("locationfound",$)}},addHandler:function(s,l){if(!l)return this;var m=this[s]=new l(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)$e(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=Re("div",m,l||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new Pe(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,m){s=Oe(s),m=j(m||[0,0]);var _=this.getZoom()||0,w=this.getMinZoom(),I=this.getMaxZoom(),z=s.getNorthWest(),$=s.getSouthEast(),W=this.getSize().subtract(m),Y=ye(this.project($,_),this.project(z,_)).getSize(),re=le.any3d?this.options.zoomSnap:1,fe=W.x/Y.x,Ie=W.y/Y.y,$t=l?Math.max(fe,Ie):Math.min(fe,Ie);return _=this.getScaleZoom($t,_),re&&(_=Math.round(_/(re/100))*(re/100),_=l?Math.ceil(_/re)*re:Math.floor(_/re)*re),Math.max(w,Math.min(I,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var m=this._getTopLeftPoint(s,l);return new de(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(s)/m.scale(l)},getScaleZoom:function(s,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var _=m.zoom(s*m.scale(l));return isNaN(_)?1/0:_},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ve(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(j(s),l)},layerPointToLatLng:function(s){var l=j(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ve(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ve(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Oe(s))},distance:function(s,l){return this.options.crs.distance(ve(s),ve(l))},containerPointToLayerPoint:function(s){return j(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return j(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(j(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ve(s)))},mouseEventToContainerPoint:function(s){return ko(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=sa(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,we(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Hi(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,m){me(this._mapPane,new G(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,m)._move(s,l)._moveEnd(w),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,m,_){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?m&&m.pinch&&this.fire("zoom",m):((w||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){me(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?He:he;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var m=[],_,w=l==="mouseout"||l==="mouseover",I=s.target||s.srcElement,z=!1;I;){if(_=this._targets[d(I)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){z=!0;break}if(_&&_.listens(l,!0)&&(w&&!_a(I,s)||(m.push(_),w))||I===this._container)break;I=I.parentNode}return!m.length&&!z&&!w&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var m=s.type;m==="mousedown"&&yi(l),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,m){if(s.type==="click"){var _=r({},s);_.type="preclick",this._fireDOMEvent(_,_.type,m)}var w=this._findEventTargets(s,l);if(m){for(var I=[],z=0;z<m.length;z++)m[z].listens(l,!0)&&I.push(m[z]);w=I.concat(w)}if(w.length){l==="contextmenu"&&et(s);var $=w[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=$.getLatLng&&(!$._radius||$._radius<=10);W.containerPoint=Y?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Y?$.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(z=0;z<w.length;z++)if(w[z].fire(l,W,!0),W.originalEvent._stopped||w[z].options.bubblingMouseEvents===!1&&H(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return yn(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var m=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var m=this.getSize()._divideBy(2);return this.project(s,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return this.project(s,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return ye([this.project(s.getSouthWest(),l)._subtract(_),this.project(s.getNorthWest(),l)._subtract(_),this.project(s.getSouthEast(),l)._subtract(_),this.project(s.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,m){if(!m)return s;var _=this.project(s,l),w=this.getSize().divideBy(2),I=new de(_.subtract(w),_.add(w)),z=this._getBoundsOffset(I,m,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(_.add(z),l)},_limitOffset:function(s,l){if(!l)return s;var m=this.getPixelBounds(),_=new de(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(s,l,m){var _=ye(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),w=_.min.subtract(s.min),I=_.max.subtract(s.max),z=this._rebound(w.x,-I.x),$=this._rebound(w.y,-I.y);return new G(z,$)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),m=this.getMaxZoom(),_=le.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(l,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var m=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var s=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var m=Fr,_=this._proxy.style[m];Qn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Qn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),w=this._getCenterOffset(s)._divideBy(1-1/_);return m.animate!==!0&&!this.getSize().contains(w)?!1:(O(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,m,_){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function No(s,l){return new Ce(s,l)}var Xt=ae.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),m=this.getPosition(),_=s._controlCorners[m];return we(l,"leaflet-control"),m.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),qt=function(s){return new Xt(s)};Ce.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",m=this._controlContainer=Re("div",l+"control-container",this._container);function _(w,I){var z=l+w+" "+l+I;s[w+I]=Re("div",z,m)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)$e(this._controlCorners[s]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var va=Xt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,m,_){return m<_?-1:_<m?1:0}},initialize:function(s,l,m){b(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Xt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Re("div",s),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ki(l),Wi(l);var _=this._section=Re("section",s+"-list");m&&(this._map.on("click",this.collapse,this),he(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Re("a",s+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),he(w,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){et(I),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Re("div",s+"-base",_),this._separator=Re("div",s+"-separator",_),this._overlaysList=Re("div",s+"-overlays",_),l.appendChild(_)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(a(function(_,w){return this.options.sortFunction(_.layer,w.layer,_.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Or(this._baseLayersList),Or(this._overlaysList),this._layerControlInputs=[];var s,l,m,_,w=0;for(m=0;m<this._layers.length;m++)_=this._layers[m],this._addItem(_),l=l||_.overlay,s=s||!_.overlay,w+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),m=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(s,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=m,_.firstChild},_addItem:function(s){var l=document.createElement("label"),m=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=m):_=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(_),_.layerId=d(s.layer),he(_,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var I=document.createElement("span");l.appendChild(I),I.appendChild(_),I.appendChild(w);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,m,_=[],w=[];this._handlingClick=!0;for(var I=s.length-1;I>=0;I--)l=s[I],m=this._getLayer(l.layerId).layer,l.checked?_.push(m):l.checked||w.push(m);for(I=0;I<w.length;I++)this._map.hasLayer(w[I])&&this._map.removeLayer(w[I]);for(I=0;I<_.length;I++)this._map.hasLayer(_[I])||this._map.addLayer(_[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,m,_=this._map.getZoom(),w=s.length-1;w>=0;w--)l=s[w],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&_<m.options.minZoom||m.options.maxZoom!==void 0&&_>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,he(s,"click",et),this.expand();var l=this;setTimeout(function(){He(s,"click",et),l._preventClick=!1})}}),Kd=function(s,l,m){return new va(s,l,m)},vi=Xt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",m=Re("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,m,_,w){var I=Re("a",m,_);return I.innerHTML=s,I.href="#",I.title=l,I.setAttribute("role","button"),I.setAttribute("aria-label",l),Ki(I),he(I,"click",ln),he(I,"click",w,this),he(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ye(this._zoomInButton,l),Ye(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vi,this.addControl(this.zoomControl))});var fu=function(s){return new vi(s)},Mo=Xt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",m=Re("div",l),_=this.options;return this._addScales(_,l+"-line",m),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,m){s.metric&&(this._mScale=Re("div",l,m)),s.imperial&&(this._iScale=Re("div",l,m))},_update:function(){var s=this._map,l=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/s)},_updateImperial:function(s){var l=s*3.2808399,m,_,w;l>5280?(m=l/5280,_=this._getRoundNum(m),this._updateScale(this._iScale,_+" mi",_/m)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(s,l,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),m=s/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),Lo=function(s){return new Mo(s)},pu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ji=Xt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?pu+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),Ki(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new Ji().addTo(this)});var Jd=function(s){return new Ji(s)};Xt.Layers=va,Xt.Zoom=vi,Xt.Scale=Mo,Xt.Attribution=Ji,qt.layers=Kd,qt.zoom=fu,qt.scale=Lo,qt.attribution=Jd;var un=ae.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});un.addTo=function(s,l){return s.addHandler(l,this),this};var Br={Events:Ne},Ta=le.touch?"touchstart mousedown":"mousedown",Un=xe.extend({options:{clickTolerance:3},initialize:function(s,l,m,_){b(this,_),this._element=s,this._dragStartTarget=l||s,this._preventOutline=m},enable:function(){this._enabled||(he(this._dragStartTarget,Ta,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Un._dragging===this&&this.finishDrag(!0),He(this._dragStartTarget,Ta,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!aa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Un._dragging===this&&this.finishDrag();return}if(!(Un._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Un._dragging=this,this._preventOutline&&yi(this._element),ca(),Vn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,m=fa(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=yn(this._element),this._parentScale=Ro(m);var _=s.type==="mousedown";he(document,_?"mousemove":"touchmove",this._onMove,this),he(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,m=new G(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,et(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),me(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ye(document.body,"leaflet-dragging"),this._lastTarget&&(Ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He(document,"mousemove touchmove",this._onMove,this),He(document,"mouseup touchend touchcancel",this._onUp,this),da(),Fn();var l=this._moved&&this._moving;this._moving=!1,Un._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Do(s,l,m){var _,w=[1,4,2,8],I,z,$,W,Y,re,fe,Ie;for(I=0,re=s.length;I<re;I++)s[I]._code=Xn(s[I],l);for($=0;$<4;$++){for(fe=w[$],_=[],I=0,re=s.length,z=re-1;I<re;z=I++)W=s[I],Y=s[z],W._code&fe?Y._code&fe||(Ie=wt(Y,W,fe,l,m),Ie._code=Xn(Ie,l),_.push(Ie)):(Y._code&fe&&(Ie=wt(Y,W,fe,l,m),Ie._code=Xn(Ie,l),_.push(Ie)),_.push(W));s=_}return s}function bo(s,l){var m,_,w,I,z,$,W,Y,re;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=ve([0,0]),Ie=Oe(s),$t=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());$t<1700&&(fe=Vo(s));var xt=s.length,xn=[];for(m=0;m<xt;m++){var jt=ve(s[m]);xn.push(l.project(ve([jt.lat-fe.lat,jt.lng-fe.lng])))}for($=W=Y=0,m=0,_=xt-1;m<xt;_=m++)w=xn[m],I=xn[_],z=w.y*I.x-I.y*w.x,W+=(w.x+I.x)*z,Y+=(w.y+I.y)*z,$+=z*3;$===0?re=xn[0]:re=[W/$,Y/$];var Ho=l.unproject(j(re));return ve([Ho.lat+fe.lat,Ho.lng+fe.lng])}function Vo(s){for(var l=0,m=0,_=0,w=0;w<s.length;w++){var I=ve(s[w]);l+=I.lat,m+=I.lng,_++}return ve([l/_,m/_])}var Fo={__proto__:null,clipPolygon:Do,polygonCenter:bo,centroid:Vo};function Ea(s,l){if(!l||!s.length)return s.slice();var m=l*l;return s=gu(s,m),s=mu(s,m),s}function wa(s,l,m){return Math.sqrt(wn(s,l,m,!0))}function Ti(s,l,m){return wn(s,l,m)}function mu(s,l){var m=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,w=new _(m);w[0]=w[m-1]=1,Uo(s,w,l,0,m-1);var I,z=[];for(I=0;I<m;I++)w[I]&&z.push(s[I]);return z}function Uo(s,l,m,_,w){var I=0,z,$,W;for($=_+1;$<=w-1;$++)W=wn(s[$],s[_],s[w],!0),W>I&&(z=$,I=W);I>m&&(l[z]=1,Uo(s,l,m,_,z),Uo(s,l,m,z,w))}function gu(s,l){for(var m=[s[0]],_=1,w=0,I=s.length;_<I;_++)_u(s[_],s[w])>l&&(m.push(s[_]),w=_);return w<I-1&&m.push(s[I-1]),m}var xa;function zr(s,l,m,_,w){var I=_?xa:Xn(s,m),z=Xn(l,m),$,W,Y;for(xa=z;;){if(!(I|z))return[s,l];if(I&z)return!1;$=I||z,W=wt(s,l,$,m,w),Y=Xn(W,m),$===I?(s=W,I=Y):(l=W,z=Y)}}function wt(s,l,m,_,w){var I=l.x-s.x,z=l.y-s.y,$=_.min,W=_.max,Y,re;return m&8?(Y=s.x+I*(W.y-s.y)/z,re=W.y):m&4?(Y=s.x+I*($.y-s.y)/z,re=$.y):m&2?(Y=W.x,re=s.y+z*(W.x-s.x)/I):m&1&&(Y=$.x,re=s.y+z*($.x-s.x)/I),new G(Y,re,w)}function Xn(s,l){var m=0;return s.x<l.min.x?m|=1:s.x>l.max.x&&(m|=2),s.y<l.min.y?m|=4:s.y>l.max.y&&(m|=8),m}function _u(s,l){var m=l.x-s.x,_=l.y-s.y;return m*m+_*_}function wn(s,l,m,_){var w=l.x,I=l.y,z=m.x-w,$=m.y-I,W=z*z+$*$,Y;return W>0&&(Y=((s.x-w)*z+(s.y-I)*$)/W,Y>1?(w=m.x,I=m.y):Y>0&&(w+=z*Y,I+=$*Y)),z=s.x-w,$=s.y-I,_?z*z+$*$:new G(w,I)}function h(s){return!k(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function T(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(s)}function x(s,l){var m,_,w,I,z,$,W,Y;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=ve([0,0]),fe=Oe(s),Ie=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ie<1700&&(re=Vo(s));var $t=s.length,xt=[];for(m=0;m<$t;m++){var xn=ve(s[m]);xt.push(l.project(ve([xn.lat-re.lat,xn.lng-re.lng])))}for(m=0,_=0;m<$t-1;m++)_+=xt[m].distanceTo(xt[m+1])/2;if(_===0)Y=xt[0];else for(m=0,I=0;m<$t-1;m++)if(z=xt[m],$=xt[m+1],w=z.distanceTo($),I+=w,I>_){W=(I-_)/w,Y=[$.x-W*($.x-z.x),$.y-W*($.y-z.y)];break}var jt=l.unproject(j(Y));return ve([jt.lat+re.lat,jt.lng+re.lng])}var A={__proto__:null,simplify:Ea,pointToSegmentDistance:wa,closestPointOnSegment:Ti,clipSegment:zr,_getEdgeIntersection:wt,_getBitCode:Xn,_sqClosestPointOnSegment:wn,isFlat:h,_flat:T,polylineCenter:x},q={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new Se(s.y,s.x)},bounds:new de([-180,-90],[180,90])},K={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,m=this.R,_=s.lat*l,w=this.R_MINOR/m,I=Math.sqrt(1-w*w),z=I*Math.sin(_),$=Math.tan(Math.PI/4-_/2)/Math.pow((1-z)/(1+z),I/2);return _=-m*Math.log(Math.max($,1e-10)),new G(s.lng*l*m,_)},unproject:function(s){for(var l=180/Math.PI,m=this.R,_=this.R_MINOR/m,w=Math.sqrt(1-_*_),I=Math.exp(-s.y/m),z=Math.PI/2-2*Math.atan(I),$=0,W=.1,Y;$<15&&Math.abs(W)>1e-7;$++)Y=w*Math.sin(z),Y=Math.pow((1-Y)/(1+Y),w/2),W=Math.PI/2-2*Math.atan(I*Y)-z,z+=W;return new Se(z*l,s.x*l/m)}},te={__proto__:null,LonLat:q,Mercator:K,SphericalMercator:Bi},Be=r({},Yn,{code:"EPSG:3395",projection:K,transformation:function(){var s=.5/(Math.PI*K.R);return hi(s,.5,-s,.5)}()}),ht=r({},Yn,{code:"EPSG:4326",projection:q,transformation:hi(1/180,1,-1/180,.5)}),Me=r({},gt,{projection:q,transformation:hi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var m=l.lng-s.lng,_=l.lat-s.lat;return Math.sqrt(m*m+_*_)},infinite:!0});gt.Earth=Yn,gt.EPSG3395=Be,gt.EPSG3857=Pr,gt.EPSG900913=Ws,gt.EPSG4326=ht,gt.Simple=Me;var qe=xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},_addLayers:function(s){s=s?k(s)?s:[s]:[];for(var l=0,m=s.length;l<m;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,m=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var w=this._zoomBoundLayers[_].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var tt=qe.extend({initialize:function(s,l){b(this,l),this._layers={};var m,_;if(s)for(m=0,_=s.length;m<_;m++)this.addLayer(s[m])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),m,_;for(m in this._layers)_=this._layers[m],_[s]&&_[s].apply(_,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Zi=function(s,l){return new tt(s,l)},lt=tt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),tt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),tt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Pe;for(var l in this._layers){var m=this._layers[l];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),Oo=function(s,l){return new lt(s,l)},jn=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,l){var m=this.options,_=m[l+"Size"];typeof _=="number"&&(_=[_,_]);var w=j(_),I=j(l==="shadow"&&m.shadowAnchor||m.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(m.className||""),I&&(s.style.marginLeft=-I.x+"px",s.style.marginTop=-I.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Zx(s){return new jn(s)}var Sa=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Sa.imagePath!="string"&&(Sa.imagePath=this._detectIconPath()),(this.options.imagePath||Sa.imagePath)+jn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(m,_,w){var I=_.exec(m);return I&&I[w]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Re("div","leaflet-default-icon-path",document.body),l=Hi(s,"background-image")||Hi(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Xm=un.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Un(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,m=l._map,_=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,I=yn(l._icon),z=m.getPixelBounds(),$=m.getPixelOrigin(),W=ye(z.min._subtract($).add(w),z.max._subtract($).subtract(w));if(!W.contains(I)){var Y=j((Math.max(W.max.x,I.x)-W.max.x)/(z.max.x-W.max.x)-(Math.min(W.min.x,I.x)-W.min.x)/(z.min.x-W.min.x),(Math.max(W.max.y,I.y)-W.max.y)/(z.max.y-W.max.y)-(Math.min(W.min.y,I.y)-W.min.y)/(z.min.y-W.min.y)).multiplyBy(_);m.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),me(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,m=l._shadow,_=yn(l._icon),w=l._map.layerPointToLatLng(_);m&&me(m,_),l._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),yu=qe.extend({options:{icon:new Sa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ve(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),_=!1;m!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),we(m,l),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(m,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),I=!1;w!==this._shadow&&(this._removeShadow(),I=!0),w&&(we(w,l),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&I&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&me(this._icon,s),this._shadow&&me(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xm)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xm(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,m=l.iconSize?j(l.iconSize):j(0,0),_=l.iconAnchor?j(l.iconAnchor):j(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:m.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Yx(s,l){return new yu(s,l)}var Yi=qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vu=Yi.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ve(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Yi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,m=this._clickTolerance(),_=[s+m,l+m];this._pxBounds=new de(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Qx(s,l){return new vu(s,l)}var Zd=vu.extend({initialize:function(s,l,m){if(typeof l=="number"&&(l=r({},m,{radius:l})),b(this,l),this._latlng=ve(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Yi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,m=this._map,_=m.options.crs;if(_.distance===Yn.distance){var w=Math.PI/180,I=this._mRadius/Yn.R/w,z=m.project([l+I,s]),$=m.project([l-I,s]),W=z.add($).divideBy(2),Y=m.unproject(W).lat,re=Math.acos((Math.cos(I*w)-Math.sin(l*w)*Math.sin(Y*w))/(Math.cos(l*w)*Math.cos(Y*w)))/w;(isNaN(re)||re===0)&&(re=I/Math.cos(Math.PI/180*l)),this._point=W.subtract(m.getPixelOrigin()),this._radius=isNaN(re)?0:W.x-m.project([Y,s-re]).x,this._radiusY=W.y-z.y}else{var fe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(fe).x}this._updateBounds()}});function Xx(s,l,m){return new Zd(s,l,m)}var Ei=Yi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,m=null,_=wn,w,I,z=0,$=this._parts.length;z<$;z++)for(var W=this._parts[z],Y=1,re=W.length;Y<re;Y++){w=W[Y-1],I=W[Y];var fe=_(s,w,I,!0);fe<l&&(l=fe,m=_(s,w,I))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ve(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Pe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],m=h(s),_=0,w=s.length;_<w;_++)m?(l[_]=ve(s[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(s[_]);return l},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,m){var _=s[0]instanceof Se,w=s.length,I,z;if(_){for(z=[],I=0;I<w;I++)z[I]=this._map.latLngToLayerPoint(s[I]),m.extend(z[I]);l.push(z)}else for(I=0;I<w;I++)this._projectLatlngs(s[I],l,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,_,w,I,z,$,W;for(m=0,w=0,I=this._rings.length;m<I;m++)for(W=this._rings[m],_=0,z=W.length;_<z-1;_++)$=zr(W[_],W[_+1],s,_,!0),$&&(l[w]=l[w]||[],l[w].push($[0]),($[1]!==W[_+1]||_===z-2)&&(l[w].push($[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,m=0,_=s.length;m<_;m++)s[m]=Ea(s[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var m,_,w,I,z,$,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,I=this._parts.length;m<I;m++)for($=this._parts[m],_=0,z=$.length,w=z-1;_<z;w=_++)if(!(!l&&_===0)&&wa(s,$[w],$[_])<=W)return!0;return!1}});function jx(s,l){return new Ei(s,l)}Ei._flat=T;var Bo=Ei.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Ei.prototype._convertLatLngs.call(this,s),m=l.length;return m>=2&&l[0]instanceof Se&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(s){Ei.prototype._setLatLngs.call(this,s),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,m=new G(l,l);if(s=new de(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,w=this._rings.length,I;_<w;_++)I=Do(this._rings[_],s,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,m,_,w,I,z,$,W,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(I=0,W=this._parts.length;I<W;I++)for(m=this._parts[I],z=0,Y=m.length,$=Y-1;z<Y;$=z++)_=m[z],w=m[$],_.y>s.y!=w.y>s.y&&s.x<(w.x-_.x)*(s.y-_.y)/(w.y-_.y)+_.x&&(l=!l);return l||Ei.prototype._containsPoint.call(this,s,!0)}});function eS(s,l){return new Bo(s,l)}var wi=lt.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=k(s)?s:s.features,m,_,w;if(l){for(m=0,_=l.length;m<_;m++)w=l[m],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var I=this.options;if(I.filter&&!I.filter(s))return this;var z=Tu(s,I);return z?(z.feature=xu(s),z.defaultOptions=z.options,this.resetStyle(z),I.onEachFeature&&I.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Tu(s,l){var m=s.type==="Feature"?s.geometry:s,_=m?m.coordinates:null,w=[],I=l&&l.pointToLayer,z=l&&l.coordsToLatLng||Yd,$,W,Y,re;if(!_&&!m)return null;switch(m.type){case"Point":return $=z(_),jm(I,s,$,l);case"MultiPoint":for(Y=0,re=_.length;Y<re;Y++)$=z(_[Y]),w.push(jm(I,s,$,l));return new lt(w);case"LineString":case"MultiLineString":return W=Eu(_,m.type==="LineString"?0:1,z),new Ei(W,l);case"Polygon":case"MultiPolygon":return W=Eu(_,m.type==="Polygon"?1:2,z),new Bo(W,l);case"GeometryCollection":for(Y=0,re=m.geometries.length;Y<re;Y++){var fe=Tu({geometry:m.geometries[Y],type:"Feature",properties:s.properties},l);fe&&w.push(fe)}return new lt(w);case"FeatureCollection":for(Y=0,re=m.features.length;Y<re;Y++){var Ie=Tu(m.features[Y],l);Ie&&w.push(Ie)}return new lt(w);default:throw new Error("Invalid GeoJSON object.")}}function jm(s,l,m,_){return s?s(l,m):new yu(m,_&&_.markersInheritOptions&&_)}function Yd(s){return new Se(s[1],s[0],s[2])}function Eu(s,l,m){for(var _=[],w=0,I=s.length,z;w<I;w++)z=l?Eu(s[w],l-1,m):(m||Yd)(s[w]),_.push(z);return _}function Qd(s,l){return s=ve(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function wu(s,l,m,_){for(var w=[],I=0,z=s.length;I<z;I++)w.push(l?wu(s[I],h(s[I])?0:l-1,m,_):Qd(s[I],_));return!l&&m&&w.length>0&&w.push(w[0].slice()),w}function zo(s,l){return s.feature?r({},s.feature,{geometry:l}):xu(l)}function xu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Xd={toGeoJSON:function(s){return zo(this,{type:"Point",coordinates:Qd(this.getLatLng(),s)})}};yu.include(Xd),Zd.include(Xd),vu.include(Xd),Ei.include({toGeoJSON:function(s){var l=!h(this._latlngs),m=wu(this._latlngs,l?1:0,!1,s);return zo(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Bo.include({toGeoJSON:function(s){var l=!h(this._latlngs),m=l&&!h(this._latlngs[0]),_=wu(this._latlngs,m?2:l?1:0,!0,s);return l||(_=[_]),zo(this,{type:(m?"Multi":"")+"Polygon",coordinates:_})}}),tt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(s).geometry.coordinates)}),zo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var m=l==="GeometryCollection",_=[];return this.eachLayer(function(w){if(w.toGeoJSON){var I=w.toGeoJSON(s);if(m)_.push(I.geometry);else{var z=xu(I);z.type==="FeatureCollection"?_.push.apply(_,z.features):_.push(z)}}}),m?zo(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function eg(s,l){return new wi(s,l)}var tS=eg,Su=qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,m){this._url=s,this._bounds=Oe(l),b(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&gi(this._image),this},bringToBack:function(){return this._map&&qi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Oe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Re("img");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Qn(this._image,m,l)},_reset:function(){var s=this._image,l=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();me(s,l.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){st(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),nS=function(s,l,m){return new Su(s,l,m)},tg=Su.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Re("video");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var m=l.getElementsByTagName("source"),_=[],w=0;w<m.length;w++)_.push(m[w].src);this._url=m.length>0?_:[l.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var z=Re("source");z.src=this._url[I],l.appendChild(z)}}});function iS(s,l,m){return new tg(s,l,m)}var ng=Su.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function rS(s,l,m){return new ng(s,l,m)}var ei=qe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Se||k(s))?(this._latlng=ve(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&st(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&st(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(st(this._container,0),this._removeTimeout=setTimeout(a($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(Ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ve(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gi(this._container),this},bringToBack:function(){return this._map&&qi(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof lt){l=null;var m=this._source._layers;for(var _ in m)if(m[_]._map){l=m[_];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=j(this.options.offset),m=this._getAnchor();this._zoomAnimated?me(this._container,s.add(m)):l=l.add(s).add(m);var _=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(s,l,m,_){var w=l;return w instanceof s||(w=new s(_).setContent(l)),m&&w.setLatLng(m),w}}),qe.include({_initOverlay:function(s,l,m,_){var w=m;return w instanceof s?(b(w,_),w._source=this):(w=l&&!_?l:new s(_,this),w.setContent(m)),w}});var Iu=ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ei.prototype.openOn.call(this,s)},onAdd:function(s){ei.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yi||this._source.on("preclick",En))},onRemove:function(s){ei.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yi||this._source.off("preclick",En))},getEvents:function(){var s=ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Re("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Re("div",s+"-content-wrapper",l);if(this._contentNode=Re("div",s+"-content",m),Ki(l),Wi(this._contentNode),he(l,"contextmenu",En),this._tipContainer=Re("div",s+"-tip-container",l),this._tip=Re("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Re("a",s+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',he(_,"click",function(w){et(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var _=s.offsetHeight,w=this.options.maxHeight,I="leaflet-popup-scrolled";w&&_>w?(l.height=w+"px",we(s,I)):Ye(s,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();me(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Hi(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,_=this._containerWidth,w=new G(this._containerLeft,-m-this._containerBottom);w._add(yn(this._container));var I=s.layerPointToContainerPoint(w),z=j(this.options.autoPanPadding),$=j(this.options.autoPanPaddingTopLeft||z),W=j(this.options.autoPanPaddingBottomRight||z),Y=s.getSize(),re=0,fe=0;I.x+_+W.x>Y.x&&(re=I.x+_-Y.x+W.x),I.x-re-$.x<0&&(re=I.x-$.x),I.y+m+W.y>Y.y&&(fe=I.y+m-Y.y+W.y),I.y-fe-$.y<0&&(fe=I.y-$.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oS=function(s,l){return new Iu(s,l)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(s,l,m){return this._initOverlay(Iu,s,l,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),qe.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Iu,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ln(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Yi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Cu=ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ei.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ei.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ei.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,m,_=this._map,w=this._container,I=_.latLngToContainerPoint(_.getCenter()),z=_.layerPointToContainerPoint(s),$=this.options.direction,W=w.offsetWidth,Y=w.offsetHeight,re=j(this.options.offset),fe=this._getAnchor();$==="top"?(l=W/2,m=Y):$==="bottom"?(l=W/2,m=0):$==="center"?(l=W/2,m=Y/2):$==="right"?(l=0,m=Y/2):$==="left"?(l=W,m=Y/2):z.x<I.x?($="right",l=0,m=Y/2):($="left",l=W+(re.x+fe.x)*2,m=Y/2),s=s.subtract(j(l,m,!0)).add(re).add(fe),Ye(w,"leaflet-tooltip-right"),Ye(w,"leaflet-tooltip-left"),Ye(w,"leaflet-tooltip-top"),Ye(w,"leaflet-tooltip-bottom"),we(w,"leaflet-tooltip-"+$),me(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&st(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sS=function(s,l){return new Cu(s,l)};Ce.include({openTooltip:function(s,l,m){return this._initOverlay(Cu,s,l,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),qe.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Cu,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(he(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),he(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,m,_;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var ig=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Or(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var _=j(m.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function aS(s){return new ig(s)}jn.Default=Sa;var Ia=qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),$e(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,m=-s(-1/0,1/0),_=0,w=l.length,I;_<w;_++)I=l[_].style.zIndex,l[_]!==this._container&&I&&(m=s(m,+I));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){st(this._container,this.options.opacity);var s=+new Date,l=!1,m=!1;for(var _ in this._tiles){var w=this._tiles[_];if(!(!w.current||!w.loaded)){var I=Math.min(1,(s-w.loaded)/200);st(w.el,I),I<1?l=!0:(w.active?m=!0:this._onOpaqueTile(w),w.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(F(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=l-Math.abs(s-m),this._onUpdateLevel(m)):($e(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var _=this._levels[s],w=this._map;return _||(_=this._levels[s]={},_.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,w.getCenter(),w.getZoom()),y(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)$e(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,m,_){var w=Math.floor(s/2),I=Math.floor(l/2),z=m-1,$=new G(+w,+I);$.z=+z;var W=this._tileCoordsToKey($),Y=this._tiles[W];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),z>_?this._retainParent(w,I,z,_):!1)},_retainChildren:function(s,l,m,_){for(var w=2*s;w<2*s+2;w++)for(var I=2*l;I<2*l+2;I++){var z=new G(w,I);z.z=m+1;var $=this._tileCoordsToKey(z),W=this._tiles[$];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);m+1<_&&this._retainChildren(w,I,m+1,_)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,m,_){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var I=this.options.updateWhenZooming&&w!==this._tileZoom;(!_||I)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,l)},_setZoomTransform:function(s,l,m){var _=this._map.getZoomScale(m,s.zoom),w=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,m)).round();le.any3d?Qn(s.el,w,_):me(s.el,w)},_resetGrid:function(){var s=this._map,l=s.options.crs,m=this._tileSize=this.getTileSize(),_=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],_).x/m.x),Math.ceil(s.project([0,l.wrapLng[1]],_).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],_).y/m.x),Math.ceil(s.project([l.wrapLat[1],0],_).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(m,this._tileZoom),w=l.project(s,this._tileZoom).floor(),I=l.getSize().divideBy(_*2);return new de(w.subtract(I),w.add(I))},_update:function(s){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(_),I=w.getCenter(),z=[],$=this.options.keepBuffer,W=new de(w.getBottomLeft().subtract([$,-$]),w.getTopRight().add([$,-$]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var re=this._tiles[Y].coords;(re.z!==this._tileZoom||!W.contains(new G(re.x,re.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var fe=w.min.y;fe<=w.max.y;fe++)for(var Ie=w.min.x;Ie<=w.max.x;Ie++){var $t=new G(Ie,fe);if($t.z=this._tileZoom,!!this._isValidTile($t)){var xt=this._tiles[this._tileCoordsToKey($t)];xt?xt.current=!0:z.push($t)}}if(z.sort(function(jt,Ho){return jt.distanceTo(I)-Ho.distanceTo(I)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xn=document.createDocumentFragment();for(Ie=0;Ie<z.length;Ie++)this._addTile(z[Ie],xn);this._level.el.appendChild(xn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!l.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return Oe(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,m=this.getTileSize(),_=s.scaleBy(m),w=_.add(m),I=l.unproject(_,s.z),z=l.unproject(w,s.z);return[I,z]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),m=new Pe(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),m=new G(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(s){var l=this._tiles[s];l&&($e(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,le.ielt9&&this.options.opacity<1&&st(s,this.options.opacity)},_addTile:function(s,l){var m=this._getTilePos(s),_=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&O(a(this._tileReady,this,s,null,w)),me(w,m),this._tiles[_]={el:w,coords:s,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:s});var _=this._tileCoordsToKey(s);m=this._tiles[_],m&&(m.loaded=+new Date,this._map._fadeAnimated?(st(m.el,0),F(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(we(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new de(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function lS(s){return new Ia(s)}var Go=Ia.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var m=document.createElement("img");return he(m,"load",a(this._tileOnLoad,this,l,m)),he(m,"error",a(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=m),l["-y"]=m}return N(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,m){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),s(m,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,_=this.options.zoomOffset;return m&&(s=l-s),s+_},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=J;var m=this._tiles[s].coords;$e(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",J),Ia.prototype._removeTile.call(this,s)},_tileReady:function(s,l,m){if(!(!this._map||m&&m.getAttribute("src")===J))return Ia.prototype._tileReady.call(this,s,l,m)}});function rg(s,l){return new Go(s,l)}var og=Go.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var m=r({},this.defaultWmsParams);for(var _ in l)_ in this.options||(m[_]=l[_]);l=b(this,l);var w=l.detectRetina&&le.retina?2:1,I=this.getTileSize();m.width=I.x*w,m.height=I.y*w,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Go.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),m=this._crs,_=ye(m.project(l[0]),m.project(l[1])),w=_.min,I=_.max,z=(this._wmsVersion>=1.3&&this._crs===ht?[w.y,w.x,I.y,I.x]:[w.x,w.y,I.x,I.y]).join(","),$=Go.prototype.getTileUrl.call(this,s);return $+B(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function uS(s,l){return new og(s,l)}Go.WMS=og,rg.wms=uS;var xi=qe.extend({options:{padding:.1},initialize:function(s){b(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var m=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),I=_.multiplyBy(-m).add(w).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Qn(this._container,I,m):me(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new de(m,m.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sg=xi.extend({options:{tolerance:0},getEvents:function(){var s=xi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");he(s,"mousemove",this._onMouseMove,this),he(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,$e(this._container),He(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var s=this._bounds,l=this._container,m=s.getSize(),_=le.retina?2:1;me(l,s.min),l.width=_*m.x,l.height=_*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){xi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,m=l.next,_=l.prev;m?m.prev=_:this._drawLast=_,_?_.next=m:this._drawFirst=m,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),m=[],_,w;for(w=0;w<l.length;w++){if(_=Number(l[w]),isNaN(_))return;m.push(_)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var m,_,w,I,z=s._parts,$=z.length,W=this._ctx;if($){for(W.beginPath(),m=0;m<$;m++){for(_=0,w=z[m].length;_<w;_++)I=z[m][_],W[_?"lineTo":"moveTo"](I.x,I.y);l&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,m=this._ctx,_=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||_)/_;w!==1&&(m.save(),m.scale(1,w)),m.beginPath(),m.arc(l.x,l.y/w,_,0,Math.PI*2,!1),w!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,l){var m=l.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),m,_,w=this._drawFirst;w;w=w.next)m=w.layer,m.options.interactive&&m._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(_=m);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ye(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var m,_,w=this._drawFirst;w;w=w.next)m=w.layer,m.options.interactive&&m._containsPoint(l)&&(_=m);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(we(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,m){this._map._fireDOMEvent(l,m||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(m)m.prev=_;else return;_?_.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(_)_.next=m;else return;m?m.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function ag(s){return le.canvas?new sg(s):null}var Ca=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),cS={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ca("shape");we(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ca("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;$e(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,m=s._fill,_=s.options,w=s._container;w.stroked=!!_.stroke,w.filled=!!_.fill,_.stroke?(l||(l=s._stroke=Ca("stroke")),w.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=k(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(w.removeChild(l),s._stroke=null),_.fill?(m||(m=s._fill=Ca("fill")),w.appendChild(m),m.color=_.fillColor||_.color,m.opacity=_.fillOpacity):m&&(w.removeChild(m),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),m=Math.round(s._radius),_=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+_+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){gi(s._container)},_bringToBack:function(s){qi(s._container)}},Au=le.vml?Ca:fo,Aa=xi.extend({_initContainer:function(){this._container=Au("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Au("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),He(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),me(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Au("path");s.options.className&&we(l,s.options.className),s.options.interactive&&we(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){$e(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,m=s.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ks(s._parts,l))},_updateCircle:function(s){var l=s._point,m=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||m,w="a"+m+","+_+" 0 1,0 ",I=s._empty()?"M0 0":"M"+(l.x-m)+","+l.y+w+m*2+",0 "+w+-m*2+",0 ";this._setPath(s,I)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){gi(s._path)},_bringToBack:function(s){qi(s._path)}});le.vml&&Aa.include(cS);function lg(s){return le.svg||le.vml?new Aa(s):null}Ce.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&ag(s)||lg(s)}});var ug=Bo.extend({initialize:function(s,l){Bo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Oe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function dS(s,l){return new ug(s,l)}Aa.create=Au,Aa.pointsToPath=Ks,wi.geometryToLayer=Tu,wi.coordsToLatLng=Yd,wi.coordsToLatLngs=Eu,wi.latLngToCoords=Qd,wi.latLngsToCoords=wu,wi.getFeature=zo,wi.asFeature=xu,Ce.mergeOptions({boxZoom:!0});var cg=un.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vn(),ca(),this._startPoint=this._map.mouseEventToContainerPoint(s),he(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new de(this._point,this._startPoint),m=l.getSize();me(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&($e(this._box),Ye(this._container,"leaflet-crosshair")),Fn(),da(),He(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",cg),Ce.mergeOptions({doubleClickZoom:!0});var dg=un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,m=l.getZoom(),_=l.options.zoomDelta,w=s.originalEvent.shiftKey?m-_:m+_;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(s.containerPoint,w)}});Ce.addInitHook("addHandler","doubleClickZoom",dg),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hg=un.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Un(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ye(this._map._container,"leaflet-grab"),Ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Oe(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),m=this._initialWorldOffset,_=this._draggable._newPos.x,w=(_-l+m)%s+l-m,I=(_+l+m)%s-l-m,z=Math.abs(w+m)<Math.abs(I+m)?w:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var l=this._map,m=l.options,_=!m.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),_)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,z=m.easeLinearity,$=w.multiplyBy(z/I),W=$.distanceTo([0,0]),Y=Math.min(m.inertiaMaxSpeed,W),re=$.multiplyBy(Y/W),fe=Y/(m.inertiaDeceleration*z),Ie=re.multiplyBy(-fe/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),O(function(){l.panBy(Ie,{duration:fe,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",hg),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fg=un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),he(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),He(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,m=s.scrollTop||l.scrollTop,_=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},m=this.keyCodes,_,w;for(_=0,w=m.left.length;_<w;_++)l[m.left[_]]=[-1*s,0];for(_=0,w=m.right.length;_<w;_++)l[m.right[_]]=[s,0];for(_=0,w=m.down.length;_<w;_++)l[m.down[_]]=[0,s];for(_=0,w=m.up.length;_<w;_++)l[m.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},m=this.keyCodes,_,w;for(_=0,w=m.zoomIn.length;_<w;_++)l[m.zoomIn[_]]=s;for(_=0,w=m.zoomOut.length;_<w;_++)l[m.zoomOut[_]]=-s},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){He(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,m=this._map,_;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(_=this._panKeys[l],s.shiftKey&&(_=j(_).multiplyBy(3)),m.options.maxBounds&&(_=m._limitOffset(j(_),m.options.maxBounds)),m.options.worldCopyJump){var w=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(_)));m.panTo(w)}else m.panBy(_)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;ln(s)}}});Ce.addInitHook("addHandler","keyboard",fg),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pg=un.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=du(s),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),_),ln(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,I=m?Math.ceil(w/m)*m:w,z=s._limitZoom(l+(this._delta>0?I:-I))-l;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+z):s.setZoomAround(this._lastMousePos,l+z))}});Ce.addInitHook("addHandler","scrollWheelZoom",pg);var hS=600;Ce.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var mg=un.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",et),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),hS),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){He(document,"touchend",et),He(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Ce.addInitHook("addHandler","tapHold",mg),Ce.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var gg=un.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ye(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(_)._divideBy(2))),this._startDist=m.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),et(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]),w=m.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var I=m._add(_)._divideBy(2)._subtract(this._centerPoint);if(w===1&&I.x===0&&I.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var z=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(z,this,!0),et(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",gg),Ce.BoxZoom=cg,Ce.DoubleClickZoom=dg,Ce.Drag=hg,Ce.Keyboard=fg,Ce.ScrollWheelZoom=pg,Ce.TapHold=mg,Ce.TouchZoom=gg,n.Bounds=de,n.Browser=le,n.CRS=gt,n.Canvas=sg,n.Circle=Zd,n.CircleMarker=vu,n.Class=ae,n.Control=Xt,n.DivIcon=ig,n.DivOverlay=ei,n.DomEvent=hu,n.DomUtil=uu,n.Draggable=Un,n.Evented=xe,n.FeatureGroup=lt,n.GeoJSON=wi,n.GridLayer=Ia,n.Handler=un,n.Icon=jn,n.ImageOverlay=Su,n.LatLng=Se,n.LatLngBounds=Pe,n.Layer=qe,n.LayerGroup=tt,n.LineUtil=A,n.Map=Ce,n.Marker=yu,n.Mixin=Br,n.Path=Yi,n.Point=G,n.PolyUtil=Fo,n.Polygon=Bo,n.Polyline=Ei,n.Popup=Iu,n.PosAnimation=ya,n.Projection=te,n.Rectangle=ug,n.Renderer=xi,n.SVG=Aa,n.SVGOverlay=ng,n.TileLayer=Go,n.Tooltip=Cu,n.Transformation=zi,n.Util=M,n.VideoOverlay=tg,n.bind=a,n.bounds=ye,n.canvas=ag,n.circle=Xx,n.circleMarker=Qx,n.control=qt,n.divIcon=aS,n.extend=r,n.featureGroup=Oo,n.geoJSON=eg,n.geoJson=tS,n.gridLayer=lS,n.icon=Zx,n.imageOverlay=nS,n.latLng=ve,n.latLngBounds=Oe,n.layerGroup=Zi,n.map=No,n.marker=Yx,n.point=j,n.polygon=eS,n.polyline=jx,n.popup=oS,n.rectangle=dS,n.setOptions=b,n.stamp=d,n.svg=lg,n.svgOverlay=rS,n.tileLayer=rg,n.tooltip=sS,n.transformation=hi,n.version=i,n.videoOverlay=iS;var fS=window.L;n.noConflict=function(){return window.L=fS,this},window.L=n})})(pp,pp.exports);var wF=pp.exports;const ii=o0(wF),xF=({initialLat:t,initialLng:e,onLocationSelect:n,onAddressFound:i})=>{const r=pe.useRef(null),o=pe.useRef(null),a=pe.useRef(null),[u,d]=pe.useState(!1),f=38.4237,g=27.1428;pe.useEffect(()=>{if(!r.current)return;if(o.current){o.current.invalidateSize();return}const b=ii.map(r.current).setView([t||f,e||g],t?16:12);return ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(b),t&&e&&S(t,e,b),b.on("click",B=>{v(B.latlng.lat,B.latlng.lng,b)}),o.current=b,()=>{o.current&&(o.current.remove(),o.current=null)}},[]),pe.useEffect(()=>{var b;if(o.current&&t&&e){const B=(b=a.current)==null?void 0:b.getLatLng();(!B||B.lat!==t||B.lng!==e)&&(S(t,e,o.current),o.current.setView([t,e],16))}},[t,e]);const y=async(b,B)=>{if(i){d(!0);try{const R=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${b}&lon=${B}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"tr-TR"}});if(!R.ok)throw new Error("Adres alnamad");const N=await R.json(),k=N.address;if(k){const H=k.town||k.county||k.city_district||"",J=k.suburb||k.neighbourhood||k.quarter||"",Z=k.road||"",V=k.province||k.city||"zmir";i({district:H,neighborhood:J,street:Z,city:V,fullAddress:N.display_name})}}catch(R){console.error("Adres zmleme hatas:",R)}finally{d(!1)}}},v=(b,B,R)=>{S(b,B,R),n(b,B),y(b,B)},S=(b,B,R)=>{a.current&&a.current.remove();const N=ii.divIcon({className:"custom-div-icon",html:`<div style="background-color: #2563eb; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; color: white;">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
             </div>`,iconSize:[30,30],iconAnchor:[15,30]});a.current=ii.marker([b,B],{icon:N}).addTo(R)},D=()=>{if(!navigator.geolocation){alert("Taraycnz konum servisini desteklemiyor.");return}d(!0),navigator.geolocation.getCurrentPosition(b=>{const{latitude:B,longitude:R}=b.coords;o.current&&(o.current.setView([B,R],16),v(B,R,o.current)),d(!1)},()=>{alert("Konum alnamad. Ltfen izinleri kontrol edin."),d(!1)})};return E.jsxs("div",{className:"relative w-full h-full group",children:[E.jsx("div",{ref:r,className:"w-full h-full rounded-lg z-0",style:{minHeight:"300px"}}),u&&E.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-blue-100 z-[400] flex items-center gap-2 text-xs font-semibold text-blue-600 animate-in fade-in slide-in-from-top-2",children:[E.jsx(rd,{size:14,className:"animate-spin"}),"Adres zmleniyor..."]}),E.jsx("button",{type:"button",onClick:D,className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md border border-slate-200 text-slate-700 hover:text-blue-600 hover:bg-slate-50 z-[400]",title:"Mevcut Konumumu Bul",children:E.jsx(YN,{size:24})}),E.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-md text-xs font-semibold text-slate-600 shadow-sm border border-slate-200 z-[400]",children:"Konum semek iin haritaya tklayn"})]})},en={Konak:{Alsancak:["Kbrs ehitleri Cad.","Talatpaa Bulv.","1456. Sokak","Plevne Bulv."],Gztepe:["Mithatpaa Cad.","Susuzdede Park","100. Sokak","Mustafa Kemal Sahil Bulv."],Pasaport:["Cumhuriyet Bulv.","Akdeniz Cad.","1382. Sokak"],"Mimar Sinan":["air Eref Bulv.","Ziya Gkalp Bulv."],Kltr:["evket zelik Sok.","1390. Sokak"]},Karyaka:{Bostanl:["Cemal Grsel Cad.","ehitler Bulv.","2010. Sokak","Bostanl skelesi"],Maviehir:["Cahar Dudayev Bulv.","Aziz Nesin Bulv.","2040. Sokak"],ar:["Kemalpaa Cad.","Salah Birsel Sok.","1710. Sokak"],Bahelievler:["Zbeyde Hanm Cad.","1671. Sokak"]},Bornova:{zkanlar:["Mustafa Kemal Cad.","Sakarya Cad.","252. Sokak"],Kkpark:["Svari Cad.","Zafer Cad.","160. Sokak"],Kazmdirik:["Gediz Cad.","372. Sokak"]},Buca:{irinyer:["Menderes Cad.","Kouyolu Cad.","Forbes Cad."],Tnaztepe:["Dou Cad.","202. Sokak"]}},SF=["TP1","TP2","TP3","DER","YOK"],IF=["Bykehir","le","zel Mlkiyet","Kamu","Dier"],CF=({initialData:t,existingStands:e=[],onSave:n,onCancel:i})=>{var C,P,U,O;const[r,o]=pe.useState({id:"",name:"",phone:"",city:"zmir",district:"",neighborhood:"",street:"",address:"",location:void 0,capacity:0,plates:[],ukomeDecisionNo:"",ukomeDate:"",ukomeSummary:"",status:Qf.ACTIVE,officeType:"TP1",responsibility:"Bykehir",notes:"",history:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[a,u]=pe.useState(!1),[d,f]=pe.useState(!1),[g,y]=pe.useState(Object.keys(en)),[v,S]=pe.useState([]),[D,b]=pe.useState([]);pe.useEffect(()=>{t?(o({...t,plates:t.plates||[]}),t.district&&en[t.district]&&(S(Object.keys(en[t.district])),t.neighborhood&&en[t.district][t.neighborhood]&&b(en[t.district][t.neighborhood]))):o(F=>({...F,id:Date.now().toString()}))},[t]);const B=F=>{const{name:M,value:ae}=F.target;o(Ke=>({...Ke,[M]:ae}))},R=F=>{const M=F.target.value;N(M)},N=F=>{o(M=>({...M,district:F,neighborhood:"",street:""})),S(F&&en[F]?Object.keys(en[F]):[]),b([])},k=F=>{const M=F.target.value;H(M,r.district)},H=(F,M)=>{o(ae=>({...ae,neighborhood:F,street:""})),M&&F&&en[M]&&en[M][F]?b(en[M][F]||[]):b([])},J=F=>{let M="",ae="",Ke=[],Ne=[];if(F.district){const xe=F.district.replace(/(lesi|le)$/i,"").trim(),G=Object.keys(en).find(ne=>ne.toLocaleLowerCase("tr-TR")===xe.toLocaleLowerCase("tr-TR"));G&&(M=G,Ke=Object.keys(en[M]))}if(M&&F.neighborhood){const xe=F.neighborhood.replace(/(Mahallesi|Mah\.|Mah|Mh\.|Mh)$/i,"").trim(),G=en[M];if(G){const ne=Object.keys(G).find(j=>j.toLocaleLowerCase("tr-TR")===xe.toLocaleLowerCase("tr-TR"));ne&&(ae=ne,Ne=en[M][ae]||[])}}M&&(S(Ke),b(Ne),o(xe=>({...xe,district:M,neighborhood:ae,street:F.street||xe.street})))},Z=async()=>{if(!r.district||!r.name){alert("Ltfen nce le ve Durak Ad giriniz.");return}u(!0);const F=await EF(r.name,r.capacity,r.district);o(M=>({...M,notes:M.notes?M.notes+`
`+F:F})),u(!1)},V=async F=>{if(F.preventDefault(),!d){f(!0);try{const M=`${r.street||""} ${r.neighborhood||""} Mah. ${r.district||""}/ZMR`;await n({...r,address:M,capacity:Number(r.capacity),updatedAt:new Date().toISOString()})}catch(M){console.error("Kaydetme hatas:",M),alert("Kayt srasnda bir hata olutu."),f(!1)}}};return E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 animate-in fade-in zoom-in duration-300",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t&&t.createdAt?"Dura Revize Et":"Yeni Taksi Dura Kayd"}),(t==null?void 0:t.ukomeDecisionNo)&&E.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[E.jsx(xr,{size:14})," lem Yaplan Karar No: ",E.jsx("strong",{children:t.ukomeDecisionNo})]})]}),E.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700",children:E.jsx(ex,{size:24})})]}),E.jsxs("form",{onSubmit:V,className:"space-y-6",children:[E.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl border border-blue-200 shadow-sm",children:[E.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[E.jsx(xr,{size:18})," GRLEN UKOME KARAR BLGLER"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar No"}),E.jsx("input",{name:"ukomeDecisionNo",value:r.ukomeDecisionNo,onChange:B,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-bold text-slate-800",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar Tarihi"}),E.jsx("input",{type:"date",name:"ukomeDate",value:r.ukomeDate,onChange:B,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar zeti"}),E.jsx("textarea",{name:"ukomeSummary",rows:2,value:r.ukomeSummary,onChange:B,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Ad"}),E.jsx("input",{required:!0,name:"name",value:r.name,onChange:B,placeholder:"rn: Alsancak Gar Taksi",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Telefonu"}),E.jsxs("div",{className:"relative",children:[E.jsx(Xw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),E.jsx("input",{name:"phone",value:r.phone,onChange:B,placeholder:"0232 123 45 67",className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ara Park Kapasitesi"}),E.jsx("input",{required:!0,type:"number",name:"capacity",value:r.capacity,onChange:B,min:"0",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yazhane Tipi"}),E.jsx("select",{name:"officeType",value:r.officeType,onChange:B,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:SF.map(F=>E.jsx("option",{value:F,children:F},F))})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sorumluluk / Yetki Alan"}),E.jsx("select",{name:"responsibility",value:r.responsibility,onChange:B,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:IF.map(F=>E.jsx("option",{value:F,children:F},F))})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Durumu"}),E.jsx("select",{name:"status",value:r.status,onChange:B,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:Object.values(Qf).map(F=>E.jsx("option",{value:F,children:F},F))})]})]}),E.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[E.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[E.jsx(Ll,{size:16})," Konum Bilgileri"]}),E.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[E.jsxs("div",{className:"flex-1 space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"md:col-span-2",children:[E.jsxs("label",{className:"block text-xs font-medium text-slate-500 mb-1 flex justify-between",children:["le",r.location&&!r.district&&E.jsx("span",{className:"text-[10px] text-blue-500 animate-pulse",children:"Konumdan bekleniyor..."})]}),E.jsxs("select",{required:!0,name:"district",value:r.district,onChange:R,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[E.jsx("option",{value:"",children:"Seiniz"}),g.map(F=>E.jsx("option",{value:F,children:F},F))]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Mahalle"}),E.jsxs("select",{required:!0,name:"neighborhood",value:r.neighborhood,onChange:k,disabled:!r.district,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",children:[E.jsx("option",{value:"",children:"Seiniz"}),v.map(F=>E.jsx("option",{value:F,children:F},F))]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Sokak / Cadde"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{list:"streets-list",name:"street",value:r.street,onChange:B,disabled:!r.neighborhood,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",placeholder:D.length>0?"Seiniz veya yaznz":"Yaznz"}),E.jsx("datalist",{id:"streets-list",children:D.map(F=>E.jsx("option",{value:F},F))})]})]})]}),E.jsxs("div",{className:"bg-white border border-slate-200 p-3 rounded-lg",children:[E.jsxs("div",{className:"text-xs font-semibold text-slate-400 mb-2 flex items-center justify-between",children:[E.jsx("span",{children:"SELEN KOORDNATLAR"}),E.jsxs("span",{className:"text-[10px] text-blue-500 flex items-center gap-1",children:[E.jsx(a1,{size:10})," Otomatik Adres Aktif"]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-slate-500",children:"Enlem:"})," ",E.jsx("span",{className:"font-mono text-slate-800",children:((C=r.location)==null?void 0:C.lat.toFixed(6))||"-"})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-slate-500",children:"Boylam:"})," ",E.jsx("span",{className:"font-mono text-slate-800",children:((P=r.location)==null?void 0:P.lng.toFixed(6))||"-"})]})]}),!r.location&&E.jsx("div",{className:"text-xs text-red-500 mt-1",children:"* Haritadan konum seiniz"})]}),E.jsxs("div",{className:"mt-3 text-xs text-slate-500 italic border-t border-slate-200 pt-2",children:["nizleme: ",r.street," ",r.neighborhood," ",r.district&&r.neighborhood?"Mah.":""," ",r.district," / ZMR"]})]}),E.jsx("div",{className:"flex-1 min-h-[300px] border border-slate-300 rounded-lg overflow-hidden shadow-inner relative",children:E.jsx(xF,{initialLat:(U=r.location)==null?void 0:U.lat,initialLng:(O=r.location)==null?void 0:O.lng,onLocationSelect:(F,M)=>o(ae=>({...ae,location:{lat:F,lng:M}})),onAddressFound:J})})]})]}),E.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[E.jsxs("h3",{className:"text-sm font-semibold text-yellow-900 mb-2 flex items-center gap-2",children:[E.jsx(Wl,{size:16})," Durakta alan Plakalar",E.jsxs("span",{className:"ml-2 bg-yellow-200 text-yellow-800 text-xs px-2 py-0.5 rounded-full",children:["Toplam: ",r.plates.length]})]}),E.jsxs("div",{className:"bg-white/50 p-3 rounded-lg border border-yellow-100 mb-3 flex items-start gap-2 text-xs text-yellow-800",children:[E.jsx(zm,{size:14,className:"shrink-0 mt-0.5"}),E.jsxs("p",{children:[E.jsx("strong",{children:"Bilgilendirme:"})," Veri btnln salamak amacyla; duraklara plaka ekleme, karma veya transfer ilemleri sadece ana mendeki ",E.jsx("strong",{children:'"Plaka Ynetim Paneli"'})," zerinden yaplmaktadr. Bu ekranda sadece mevcut bal plakalar grntlenir."]})]}),r.plates.length>0?E.jsx("div",{className:"flex flex-wrap gap-2",children:r.plates.map((F,M)=>E.jsx("div",{className:"flex items-center gap-2 bg-white border border-slate-200 px-3 py-1.5 rounded-md shadow-sm opacity-80",children:E.jsx("span",{className:"font-mono font-bold text-slate-800 text-sm",children:F})},M))}):E.jsx("p",{className:"text-xs text-yellow-700/60 italic",children:"Bu duraa henz plaka balanmam."})]}),E.jsxs("div",{className:"relative",children:[E.jsxs("div",{className:"flex justify-between items-end mb-1",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Notlar"}),E.jsxs("button",{type:"button",onClick:Z,disabled:a,className:"text-xs flex items-center gap-1 text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50",children:[a?E.jsx(rd,{size:14,className:"animate-spin"}):E.jsx(r1,{size:14}),"AI ile Tantm Yazs"]})]}),E.jsx("textarea",{name:"notes",rows:3,value:r.notes,onChange:B,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),E.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[E.jsx("button",{type:"button",onClick:i,disabled:d,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:"ptal"}),E.jsxs("button",{type:"submit",disabled:d||a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors shadow-sm disabled:opacity-70 disabled:cursor-not-allowed",children:[d?E.jsx(rd,{size:18,className:"animate-spin"}):E.jsx(n1,{size:18}),d?"Kaydediliyor...":"Kaydet"]})]})]})]})},Kx=({stands:t})=>{const e=pe.useRef(null),n=pe.useRef(null),i=38.4237,r=27.1428;return pe.useEffect(()=>{if(!e.current)return;if(!n.current){const d=ii.map(e.current).setView([i,r],11);ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(d),n.current=d}const o=n.current;o.eachLayer(d=>{d instanceof ii.Marker&&o.removeLayer(d)});const a=t.filter(d=>d.location&&d.location.lat&&d.location.lng),u=ii.latLngBounds([]);a.forEach(d=>{var y;if(!d.location)return;const f=ii.divIcon({className:"custom-stand-icon",html:`<div style="
                    background-color: ${d.status==="Aktif"?"#facc15":"#ef4444"}; 
                    width: 36px; height: 36px; 
                    border-radius: 50%; 
                    border: 3px solid white; 
                    box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
                    display: flex; align-items: center; justify-content: center; 
                    color: ${d.status==="Aktif"?"#854d0e":"white"};
                    font-size: 10px; font-weight: bold;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>
                   </div>`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});ii.marker([d.location.lat,d.location.lng],{icon:f}).bindPopup(`
                <div style="font-family: 'Inter', sans-serif;">
                    <h3 style="font-weight: bold; margin-bottom: 4px; font-size: 14px;">${d.name}</h3>
                    <p style="margin: 0; color: #64748b; font-size: 12px;">${d.district} / ${d.neighborhood}</p>
                    <div style="margin-top: 8px; display: flex; gap: 8px;">
                        <span style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${((y=d.plates)==null?void 0:y.length)||0} Ara</span>
                        <span style="background: ${d.status==="Aktif"?"#f0fdf4":"#fef2f2"}; color: ${d.status==="Aktif"?"#166534":"#991b1b"}; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${d.status}</span>
                    </div>
                </div>
            `).addTo(o),u.extend([d.location.lat,d.location.lng])}),a.length>0&&o.fitBounds(u,{padding:[50,50]})},[t]),E.jsxs("div",{className:"w-full h-full bg-slate-100 rounded-xl overflow-hidden shadow-inner border border-slate-200 relative",children:[E.jsx("div",{ref:e,className:"w-full h-full z-0"}),E.jsxs("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-lg z-[400] border border-slate-200 text-xs",children:[E.jsx("h4",{className:"font-bold mb-2 text-slate-700",children:"Durak Durumlar"}),E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 border border-yellow-600"}),E.jsx("span",{children:"Aktif Durak"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-red-700"}),E.jsx("span",{children:"Pasif Durak"})]})]})]})},AF=({stand:t,onBack:e,onRevise:n,onViewHistory:i})=>{var a;const r=pe.useMemo(()=>{const u=[...t.history||[]],d={};return u.forEach(f=>{const g=f.relatedUkomeNo?`UKOME_${f.relatedUkomeNo}`:`MANUAL_${f.timestamp}`;d[g]||(d[g]={id:g,timestamp:f.timestamp,ukomeNo:f.relatedUkomeNo,ukomeDate:f.relatedUkomeDate,user:f.changedBy,changes:[]}),d[g].changes.push(f)}),Object.values(d).sort((f,g)=>new Date(g.timestamp).getTime()-new Date(f.timestamp).getTime())},[t.history]),o=()=>{};return E.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-300",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[E.jsxs("div",{children:[E.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-2 text-sm font-medium",children:[E.jsx(_s,{size:16})," Listeye Dn"]}),E.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.name,E.jsx("span",{className:`text-sm px-3 py-1 rounded-full border ${t.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:t.status})]}),E.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-1 text-sm",children:[E.jsx(Ll,{size:14})," ",t.district," / ",t.city]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("button",{disabled:!0,onClick:o,className:"px-4 py-2.5 bg-white border border-slate-300 text-slate-400 font-medium rounded-lg shadow-sm flex items-center gap-2 cursor-not-allowed opacity-60",title:"u an hizmet d",children:[E.jsx(Qw,{size:18}),"Durak Raporu"]}),E.jsxs("button",{onClick:()=>n(t),className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm flex items-center gap-2",children:[E.jsx(xr,{size:18}),"Revize Et (UKOME)"]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(zm,{size:18,className:"text-blue-500"})," Temel Bilgiler"]})}),E.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Durak Ad"}),E.jsx("div",{className:"text-slate-900 font-medium mt-1",children:t.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Telefon"}),E.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[E.jsx(Xw,{size:14,className:"text-slate-400"}),t.phone||"-"]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Yazhane Tipi"}),E.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[E.jsx(JN,{size:14,className:"text-slate-400"}),t.officeType]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Sorumluluk Alan"}),E.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[E.jsx(i1,{size:14,className:"text-slate-400"}),t.responsibility]})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Ak Adres"}),E.jsx("div",{className:"text-slate-900 mt-1 bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm",children:t.address})]}),t.notes&&E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Notlar"}),E.jsx("div",{className:"text-slate-700 mt-1 text-sm",children:t.notes})]})]})]}),E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(Ll,{size:18,className:"text-red-500"})," Konum"]})}),E.jsx("div",{className:"h-[300px] w-full relative",children:t.location?E.jsx(Kx,{stands:[t]}):E.jsx("div",{className:"flex items-center justify-center h-full text-slate-400 bg-slate-50",children:"Konum bilgisi yok."})})]}),E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[E.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[E.jsx("div",{className:"flex items-center gap-4",children:E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(Xf,{size:18,className:"text-purple-500"})," Revize Gemii"]})}),E.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-md",children:[r.length," Kayt"]})]}),E.jsx("div",{className:"overflow-x-auto",children:r.length>0?E.jsxs("table",{className:"w-full text-left text-sm",children:[E.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-200",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"lem Tarihi"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"UKOME Karar No"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Karar Tarihi"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Aklama"}),E.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600 text-right",children:"Detay"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(u=>{const d=u.changes.find(g=>g.fieldName==="ukomeSummary"),f=d?d.newValue:u.changes.length>0?"-":"Deiiklik Yok";return E.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[E.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:new Date(u.timestamp).toLocaleDateString("tr-TR")}),E.jsx("td",{className:"px-6 py-4 font-bold text-slate-800",children:u.ukomeNo||"Manuel"}),E.jsx("td",{className:"px-6 py-4 text-slate-600",children:u.ukomeDate?new Date(u.ukomeDate).toLocaleDateString("tr-TR"):"-"}),E.jsx("td",{className:"px-6 py-4 text-slate-600 max-w-xs truncate",children:f}),E.jsx("td",{className:"px-6 py-4 text-right",children:E.jsx("button",{onClick:()=>i(u.ukomeNo),className:"text-xs bg-blue-50 text-blue-600 px-3 py-1.5 rounded-md hover:bg-blue-100 font-medium transition-colors border border-blue-100",children:"ncele"})})]},u.id)})})]}):E.jsx("div",{className:"p-8 text-center text-slate-400",children:"Bu durak iin henz bir deiiklik kayd bulunmuyor."})})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[E.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-b border-yellow-100",children:E.jsxs("h3",{className:"font-semibold text-yellow-800 flex items-center gap-2",children:[E.jsx(Wl,{size:18})," Ara Plakalar"]})}),E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4 text-sm text-slate-500",children:[E.jsxs("span",{children:["Park Kapasitesi: ",E.jsx("strong",{className:"text-slate-900",children:t.capacity})]}),E.jsxs("span",{children:["Kaytl: ",E.jsx("strong",{className:"text-blue-600",children:((a=t.plates)==null?void 0:a.length)||0})]})]}),t.plates&&t.plates.length>0?E.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.plates.map((u,d)=>E.jsx("div",{className:"bg-slate-50 border border-slate-200 text-center py-2 rounded font-mono font-bold text-slate-800 text-sm",children:u},d))}):E.jsx("p",{className:"text-sm text-slate-400 italic text-center py-4",children:"Kaytl plaka yok."})]})]}),E.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-6",children:[E.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[E.jsx(xr,{size:18})," Son UKOME Durumu"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Numaras"}),E.jsx("div",{className:"text-lg font-bold text-blue-900",children:t.ukomeDecisionNo||"-"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Tarihi"}),E.jsx("div",{className:"text-sm font-medium text-blue-800",children:t.ukomeDate?new Date(t.ukomeDate).toLocaleDateString("tr-TR"):"-"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar zeti"}),E.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.ukomeSummary||"zet bilgisi girilmemi."})]})]})]})]})]})]})},PF=(t,e)=>{if(!e)return t;const n=JSON.parse(JSON.stringify(t)),i=[...t.history||[]].sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),r=i.filter(u=>u.relatedUkomeNo===e);if(r.length===0)return t;const o=new Date(r[0].timestamp).getTime();return i.filter(u=>new Date(u.timestamp).getTime()>o).forEach(u=>{const d=u.fieldName;d==="capacity"?n[d]=Number(u.oldValue):d==="plates"?n[d]=u.oldValue==="(Plaka Yok)"?[]:u.oldValue.split(", ").filter(Boolean):n[d]=u.oldValue}),n},RF=({stand:t,initialUkomeNo:e,onClose:n})=>{var f;const[i,r]=pe.useState(e||null),o=pe.useMemo(()=>{const g={};return t.history.forEach(y=>{const v=y.relatedUkomeNo||"Manuel Dzenleme";g[v]||(g[v]={no:v,date:y.relatedUkomeDate||"-",timestamp:y.timestamp,summary:"",logs:[],user:y.changedBy}),g[v].logs.push(y),new Date(y.timestamp)>new Date(g[v].timestamp)&&(g[v].timestamp=y.timestamp)}),Object.values(g).sort((y,v)=>new Date(v.timestamp).getTime()-new Date(y.timestamp).getTime())},[t.history]),a=pe.useMemo(()=>PF(t,i),[t,i]),u=o.find(g=>g.no===i),d=g=>{switch(g){case"ukomeDecisionNo":return"Karar No";case"ukomeDate":return"Karar Tarihi";case"address":return"Ak Adres";case"district":return"le";case"capacity":return"Kapasite";case"plates":return"Plakalar";case"status":return"Durum";case"name":return"Durak Ad";case"notes":return"Notlar";default:return g}};return E.jsxs("div",{className:"fixed inset-0 z-[2000] flex justify-end",children:[E.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:n}),E.jsxs("div",{className:"relative w-full max-w-4xl bg-white h-full shadow-2xl flex flex-col md:flex-row animate-in slide-in-from-right duration-300",children:[E.jsxs("div",{className:`w-full md:w-1/3 bg-slate-50 border-r border-slate-200 flex flex-col h-full ${i?"hidden md:flex":"flex"}`,children:[E.jsxs("div",{className:"p-5 border-b border-slate-200 bg-white",children:[E.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[E.jsx(Sy,{className:"text-blue-600",size:20}),"Karar Gemii"]}),E.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Grntlemek iin bir ilem sein."})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[E.jsxs("div",{onClick:()=>r(null),className:`p-4 rounded-xl border cursor-pointer transition-all ${i===null?"bg-blue-600 text-white border-blue-600 shadow-md ring-2 ring-blue-100":"bg-white border-slate-200 hover:border-blue-300 text-slate-700"}`,children:[E.jsxs("div",{className:"flex justify-between items-start mb-1",children:[E.jsx("span",{className:"font-bold text-sm",children:"Mevcut Durum"}),E.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${i===null?"bg-blue-500 text-white":"bg-slate-100 text-slate-500"}`,children:"MD"})]}),E.jsx("div",{className:`text-xs ${i===null?"text-blue-100":"text-slate-500"}`,children:"Duran u anki gncel hali."})]}),o.map(g=>E.jsxs("div",{onClick:()=>r(g.no),className:`p-4 rounded-xl border cursor-pointer transition-all relative overflow-hidden group ${i===g.no?"bg-white border-blue-500 ring-2 ring-blue-100 shadow-md":"bg-white border-slate-200 hover:border-blue-300"}`,children:[E.jsx("div",{className:"flex justify-between items-start mb-2",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(xr,{size:16,className:i===g.no?"text-blue-600":"text-slate-400"}),E.jsx("span",{className:"font-bold text-slate-800 text-sm",children:g.no==="Manuel Dzenleme"?"Dzenleme":g.no})]})}),E.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[E.jsx(Yw,{size:12}),new Date(g.date!=="-"?g.date:g.timestamp).toLocaleDateString("tr-TR")]}),E.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[E.jsx(s1,{size:12})," ",g.user," tarafndan"]}),E.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:[g.logs.length," Deiiklik"]})]},g.no))]})]}),E.jsxs("div",{className:`w-full md:w-2/3 bg-white flex flex-col h-full ${i?"flex":"hidden md:flex"}`,children:[E.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-full",children:E.jsx(_s,{size:20})}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:i?`${i} Karar Sonras`:"Gncel Durum"}),E.jsx("p",{className:"text-xs text-slate-500",children:i?"Duran bu karar uygulandktan sonraki grnm.":"Duran sistemdeki en son hali."})]})]}),E.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:E.jsx(ex,{size:24})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/30",children:[E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-6",children:[E.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white px-6 py-3 border-b border-slate-200 flex justify-between items-center",children:[E.jsxs("div",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[E.jsx(zm,{size:18,className:"text-blue-500"}),"Durak Bilgileri (",i?"Ariv":"Gncel",")"]}),i&&E.jsx("span",{className:"text-[10px] uppercase font-bold text-white bg-orange-400 px-2 py-1 rounded",children:"Gemi Kayt"})]}),E.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durak Ad"}),E.jsx("div",{className:"text-lg font-bold text-slate-800 mt-1",children:a.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durum"}),E.jsx("div",{className:"mt-1",children:E.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-bold rounded border ${a.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:a.status})})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"le / Mahalle"}),E.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[a.district," / ",a.neighborhood]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Kapasite"}),E.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[a.capacity," Ara"]})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1",children:[E.jsx(Ll,{size:12})," Adres"]}),E.jsx("div",{className:"text-slate-600 mt-1 text-sm bg-slate-50 p-2 rounded border border-slate-100",children:a.address})]}),E.jsxs("div",{className:"md:col-span-2",children:[E.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1 mb-2",children:[E.jsx(Wl,{size:12})," Kaytl Plakalar (",((f=a.plates)==null?void 0:f.length)||0,")"]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:a.plates&&a.plates.length>0?a.plates.map((g,y)=>E.jsx("span",{className:"text-xs font-mono font-bold bg-yellow-50 text-slate-800 border border-yellow-200 px-2 py-1 rounded",children:g},y)):E.jsx("span",{className:"text-xs text-slate-400 italic",children:"Plaka kayd yok"})})]})]})]}),u&&E.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[E.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:E.jsx("h4",{className:"font-semibold text-slate-700 text-sm",children:"Bu Kararda Yaplan Deiiklikler"})}),E.jsxs("table",{className:"w-full text-left text-sm",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-slate-100 text-xs text-slate-500",children:[E.jsx("th",{className:"px-6 py-2 font-medium",children:"Alan"}),E.jsx("th",{className:"px-6 py-2 font-medium",children:"Eski Deer"}),E.jsx("th",{className:"px-6 py-2 font-medium",children:"Yeni Deer"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-50",children:u.logs.map(g=>E.jsxs("tr",{children:[E.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:d(g.fieldName)}),E.jsx("td",{className:"px-6 py-3 text-red-500 text-xs opacity-70",children:g.oldValue}),E.jsx("td",{className:"px-6 py-3 text-green-600 font-bold text-xs",children:g.newValue})]},g.id))})]})]}),i===null&&E.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 text-slate-400",children:[E.jsx(Sy,{size:48,className:"mb-4 text-slate-200"}),E.jsxs("p",{children:["Gemite duran nasl grndn incelemek iin",E.jsx("br",{}),"sol menden bir UKOME karar sein."]})]})]})]})]})]})},kF=({stands:t,onRefresh:e,onBack:n})=>{const[i,r]=pe.useState(""),[o,a]=pe.useState(null),[u,d]=pe.useState(""),[f,g]=pe.useState(""),[y,v]=pe.useState(new Date().toISOString().split("T")[0]),[S,D]=pe.useState(!1),[b,B]=pe.useState(null),R=o?o.trim().toUpperCase():"",N=pe.useMemo(()=>{const C=new Set;return t.forEach(P=>{P.plates&&P.plates.forEach(U=>C.add(U))}),Array.from(C).sort()},[t]),k=pe.useMemo(()=>R?t.find(C=>C.plates.includes(R)):null,[t,R]),H=pe.useMemo(()=>{if(!R)return[];const C=[];t.forEach(O=>{O.history.forEach(F=>{if(F.fieldName==="plates"){const M=F.oldValue==="(Plaka Yok)"?[]:F.oldValue.split(", ").map(xe=>xe.trim()),ae=F.newValue==="(Plaka Yok)"?[]:F.newValue.split(", ").map(xe=>xe.trim()),Ke=M.includes(R),Ne=ae.includes(R);!Ke&&Ne?C.push({id:F.id,date:F.timestamp,ukomeNo:F.relatedUkomeNo,standName:O.name,action:"GR",user:F.changedBy}):Ke&&!Ne&&C.push({id:F.id,date:F.timestamp,ukomeNo:F.relatedUkomeNo,standName:O.name,action:"IKI",user:F.changedBy})}})});const P=[];C.sort((O,F)=>new Date(F.date).getTime()-new Date(O.date).getTime());const U=new Set;return C.forEach(O=>{if(!U.has(O.id)){if(O.ukomeNo){const F=C.find(M=>M.id!==O.id&&!U.has(M.id)&&M.ukomeNo===O.ukomeNo&&M.action!==O.action);if(F){const M=O.action==="IKI"?O:F,ae=O.action==="GR"?O:F;P.push({id:O.id+F.id,date:ae.date,type:"TRANSFER",from:M.standName,to:ae.standName,ukomeNo:O.ukomeNo,user:O.user}),U.add(O.id),U.add(F.id);return}}P.push({id:O.id,date:O.date,type:O.action,stand:O.standName,ukomeNo:O.ukomeNo,user:O.user}),U.add(O.id)}}),P.sort((O,F)=>new Date(F.date).getTime()-new Date(O.date).getTime())},[t,R]),J=C=>{if(C.preventDefault(),i.trim()){const P=i.trim().toUpperCase();a(P),B(null),d(""),g("")}},Z=()=>{},V=async()=>{if(!o||!u)return;if(!f.trim()){alert("Plaka ilemleri resmi bir ilem olduu iin UKOME Karar Numaras girilmesi zorunludur.");return}if(k&&k.id===u){alert("Plaka zaten bu durakta.");return}const C=k?`${o} plakasn ${k.name} durandan alp seilen duraa transfer etmek istiyor musunuz?`:`${o} plakasn seilen duraa eklemek (ilk atama) istiyor musunuz?`;if(confirm(C)){D(!0);try{const P=t.find(ae=>ae.id===u);if(!P)throw new Error("Hedef durak bulunamad.");const U=new Date().toISOString();if(k){const ae={...k,plates:k.plates.filter(Ne=>Ne!==o),ukomeDecisionNo:f,ukomeDate:y,updatedAt:U},Ke=Yf(k,ae);Ke.forEach(Ne=>{Ne.changedBy="PlakaYnetim"}),ae.history=[...k.history,...Ke],await id(ae)}const O={...P,plates:[...P.plates,o].sort(),ukomeDecisionNo:f,ukomeDate:y,updatedAt:U},F=Yf(P,O);F.forEach(ae=>{ae.changedBy="PlakaYnetim"}),O.history=[...P.history,...F],await id(O),await e();const M=k?"baaryla tand":"baaryla eklendi";B(`${o} ${P.name} durana ${M}. (Karar: ${f})`),d(""),g("")}catch(P){console.error(P),alert("lem srasnda hata olutu.")}finally{D(!1)}}};return E.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[E.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",children:E.jsx(_s,{size:20})}),E.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[E.jsx(Wl,{className:"text-purple-600"}),"Plaka Ynetim Paneli"]})]})})}),E.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 py-8",children:[E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:E.jsxs("form",{onSubmit:J,className:"flex gap-4 items-end",children:[E.jsxs("div",{className:"flex-1 max-w-md",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Plaka Sorgula"}),E.jsxs("div",{className:"relative",children:[E.jsx(jw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),E.jsx("input",{type:"text",list:"plate-search-suggestions",value:i,onChange:C=>r(C.target.value),placeholder:"rn: 35 T 1234",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-lg font-mono uppercase",autoFocus:!0}),E.jsx("datalist",{id:"plate-search-suggestions",children:N.map(C=>E.jsx("option",{value:C},C))})]})]}),E.jsx("button",{type:"submit",className:"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:"Sorgula"})]})}),o&&E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[E.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("h3",{className:"font-semibold text-slate-800",children:"Mevcut Durum"}),E.jsx("span",{className:"font-mono font-bold text-lg bg-slate-200 px-3 py-1 rounded text-slate-800",children:o})]}),E.jsxs("button",{disabled:!0,onClick:Z,className:"flex items-center gap-2 text-xs bg-white border border-slate-300 px-3 py-1.5 rounded-lg text-slate-400 cursor-not-allowed opacity-60",title:"Bakmda",children:[E.jsx(Qw,{size:16})," PDF Rapor"]})]}),E.jsx("div",{className:"p-8 text-center",children:k?E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4",children:E.jsx(Ll,{size:32})}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:k.name}),E.jsxs("p",{className:"text-slate-500",children:[k.district," / ",k.neighborhood]}),E.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-50 text-green-700 text-sm font-medium border border-green-200",children:[E.jsx(xy,{size:14})," Aktif Olarak alyor"]})]}):E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4",children:E.jsx(qN,{size:32})}),E.jsx("h2",{className:"text-xl font-bold text-slate-700 mb-2",children:"Bota / Kaytsz"}),E.jsx("p",{className:"text-slate-500",children:"Bu plaka u anda hibir duraa kaytl grnmyor."})]})})]}),E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[E.jsx("div",{className:"bg-purple-50 px-6 py-4 border-b border-purple-100",children:E.jsxs("h3",{className:"font-semibold text-purple-900 flex items-center gap-2",children:[E.jsx(WN,{size:18})," Duraa Ekle / Dura Deitir"]})}),E.jsxs("div",{className:"p-6",children:[b&&E.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center gap-2",children:[E.jsx(xy,{size:18}),b]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-100 shadow-sm",children:[E.jsxs("h4",{className:"text-xs font-bold text-purple-800 uppercase mb-3 flex items-center gap-1",children:[E.jsx(xr,{size:12})," lem Dayana (UKOME)"]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{children:[E.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Karar No ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:f,onChange:C=>g(C.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"rn: 2024/5-12"})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Karar Tarihi ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"date",value:y,onChange:C=>v(C.target.value),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-purple-500 outline-none"})]})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:k?"Yeni Durak Sein":"Duraa Ekle (lk Atama)"}),E.jsxs("select",{value:u,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[E.jsx("option",{value:"",children:"Durak Seiniz..."}),t.sort((C,P)=>C.name.localeCompare(P.name)).map(C=>E.jsxs("option",{value:C.id,disabled:(k==null?void 0:k.id)===C.id,children:[C.name," (",C.district,") ",(k==null?void 0:k.id)===C.id?"(Mevcut)":""]},C.id))]})]}),E.jsx("button",{onClick:V,disabled:!u||S,className:"w-full py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2",children:S?"leniyor...":k?"Transferi Tamamla":"Duraa Ekle"})]})]})]})]}),E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[600px]",children:[E.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[E.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[E.jsx(Xf,{size:18,className:"text-blue-500"})," alma Gemii"]}),E.jsxs("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded text-slate-600",children:[H.length," Kayt"]})]}),E.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:H.length>0?E.jsx("div",{className:"divide-y divide-slate-100",children:H.map(C=>E.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${C.type==="TRANSFER"?"bg-purple-100 text-purple-700 border-purple-200":C.type==="GR"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:C.type}),C.ukomeNo&&E.jsxs("span",{className:"text-[10px] font-mono text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:["UKOME: ",C.ukomeNo]})]}),E.jsx("div",{className:"mb-2",children:C.type==="TRANSFER"?E.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-800",children:[E.jsx("span",{className:"text-slate-500 font-normal",children:C.from}),E.jsx(KN,{size:14,className:"text-slate-400"}),E.jsx("span",{className:"text-blue-700",children:C.to})]}):E.jsx("div",{className:"font-bold text-slate-800 text-sm",children:C.stand})}),E.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Yw,{size:12}),new Date(C.date).toLocaleDateString("tr-TR")]}),E.jsxs("div",{children:["lem: ",C.user]})]})]},C.id))}):E.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-8 text-center",children:[E.jsx(Xf,{size:48,className:"mb-4 opacity-20"}),E.jsx("p",{children:"Bu plaka iin gemi kayd bulunamad."})]})})]})]})]})]})},NF=()=>{const[t,e]=pe.useState("LANDING"),[n,i]=pe.useState("LIST"),[r,o]=pe.useState("CREATE"),[a,u]=pe.useState([]),[d,f]=pe.useState(void 0),[g,y]=pe.useState(void 0),[v,S]=pe.useState(null),[D,b]=pe.useState(""),[B,R]=pe.useState(!0),[N,k]=pe.useState(null),[H,J]=pe.useState(!1),[Z,V]=pe.useState({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""});pe.useEffect(()=>{C()},[]);const C=async()=>{R(!0),k(null);try{const G=await BN();u(G)}catch(G){console.error("Firebase Error:",G);let ne="Veritabanna balanlamad.";G.message&&G.message.includes("services/firebaseConfig.ts")?ne=G.message:G.code==="permission-denied"?ne="Yetki Hatas: Firestore veritaban kurallar okuma/yazmay engelliyor. (Test modunu an: allow read, write: if true;)":G.code==="unavailable"?ne="Sunucuya ulalamyor. nternet balantnz kontrol edin.":G.message&&G.message.includes("project")?ne="Proje Bulunamad: Firebase Console'da 'Firestore Database' oluturduunuzdan emin olun. Sadece proje amak yetmez, veritabann da 'Create Database' diyerek oluturmalsnz.":ne=`Veritaban Hatas (${G.code||"Bilinmeyen"}): ${G.message}`,k(ne)}finally{R(!1)}},P=()=>{o("CREATE"),f(void 0),i("FORM")},U=G=>{f(G),i("VIEW")},O=G=>{o("EDIT"),f(G),i("FORM")},F=G=>{f(G),V({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""}),J(!0)},M=G=>{if(G.preventDefault(),J(!1),d){const ne={...d,ukomeDecisionNo:Z.decisionNo,ukomeDate:Z.date,ukomeSummary:Z.summary};o("REVISION"),f(ne),i("FORM")}},ae=async G=>{if(confirm("Bu dura silmek istediinize emin misiniz?"))try{await zN(G),await C(),n==="VIEW"&&i("LIST")}catch{alert("Silme ilemi baarsz oldu.")}},Ke=async G=>{try{const ne=a.find(j=>j.id===G.id);if(ne){let j=ne.history;if(r==="REVISION"){const ye=Yf(ne,G);j=[...ne.history,...ye]}const de={...G,history:j};await id(de)}else await id(G);await C(),i("LIST")}catch(ne){console.error(ne),alert("Kayt ilemi baarsz oldu. Hata detaylar konsolda.")}},Ne=(G,ne=null)=>{y(G),S(ne)},xe=a.filter(G=>{var ne,j;return G.name.toLowerCase().includes(D.toLowerCase())||G.district.toLowerCase().includes(D.toLowerCase())||((ne=G.neighborhood)==null?void 0:ne.toLowerCase().includes(D.toLowerCase()))||((j=G.ukomeDecisionNo)==null?void 0:j.toLowerCase().includes(D.toLowerCase()))});return t==="LANDING"?E.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"max-w-4xl w-full",children:[E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("div",{className:"flex justify-center mb-6",children:E.jsxs("svg",{width:"110",height:"150",viewBox:"0 0 100 130",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"drop-shadow-2xl hover:scale-105 transition-transform duration-300",children:[E.jsx("path",{d:"M50 0C22.4 0 0 22.4 0 50C0 85 50 130 50 130C50 130 100 85 100 50C100 22.4 77.6 0 50 0Z",fill:"#FACC15",stroke:"#EAB308",strokeWidth:"1"}),E.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"#09090b"}),E.jsx("text",{x:"50",y:"60",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontWeight:"900",fontSize:"23",fill:"#FACC15",letterSpacing:"-0.5",children:"TAKS"})]})}),E.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 tracking-tight mb-2",children:"TaksiYnetim"}),E.jsx("p",{className:"text-slate-500 text-lg",children:"zmir Taksi Duraklar ve Plaka Ynetim Sistemi"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("button",{onClick:()=>e("STANDS"),className:"group relative bg-white hover:bg-blue-600 border border-slate-200 hover:border-blue-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[E.jsx("div",{className:"bg-blue-50 group-hover:bg-blue-500 p-4 rounded-xl mb-6 transition-colors",children:E.jsx(Iy,{size:32,className:"text-blue-600 group-hover:text-white transition-colors"})}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Durak Ynetim Paneli"}),E.jsx("p",{className:"text-slate-500 group-hover:text-blue-100",children:"Taksi duraklarn harita zerinde grntleyin, kapasite bilgilerini ynetin, UKOME kararlarn ileyin."}),E.jsxs("div",{className:"mt-auto pt-6 flex items-center text-blue-600 group-hover:text-white font-medium",children:["Paneli A ",E.jsx(_s,{className:"rotate-180 ml-2"})]})]}),E.jsxs("button",{onClick:()=>e("PLATES"),className:"group relative bg-white hover:bg-purple-600 border border-slate-200 hover:border-purple-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[E.jsx("div",{className:"bg-purple-50 group-hover:bg-purple-500 p-4 rounded-xl mb-6 transition-colors",children:E.jsx(Wl,{size:32,className:"text-purple-600 group-hover:text-white transition-colors"})}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Plaka Ynetim Paneli"}),E.jsx("p",{className:"text-slate-500 group-hover:text-purple-100",children:"Plaka sorgulayn, aralarn hangi durakta altn grn ve durak transfer ilemlerini gerekletirin."}),E.jsxs("div",{className:"mt-auto pt-6 flex items-center text-purple-600 group-hover:text-white font-medium",children:["Paneli A ",E.jsx(_s,{className:"rotate-180 ml-2"})]})]})]})]})}):t==="PLATES"?E.jsx(kF,{stands:a,onRefresh:C,onBack:()=>e("LANDING")}):E.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col animate-in fade-in duration-300",children:[E.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>e("LANDING"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",title:"Ana Menye Dn",children:E.jsx(_s,{size:20})}),E.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>i("LIST"),children:[E.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:E.jsx(Iy,{size:20})}),E.jsx("h1",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"Durak Ynetim Paneli"})]})]}),E.jsx("div",{className:"text-sm text-slate-500 hidden sm:block",children:"Durak Kayt Sistemi v1.2"})]})}),E.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&E.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-start gap-3 shadow-sm animate-in fade-in slide-in-from-top-2",children:[E.jsx($N,{className:"shrink-0 mt-0.5",size:20}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"font-bold",children:"Balant Hatas"}),E.jsx("p",{className:"text-sm mt-1",children:N})]})]}),(n==="LIST"||n==="MAP")&&E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[E.jsxs("div",{className:"relative w-full sm:w-96",children:[E.jsx(jw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),E.jsx("input",{type:"text",placeholder:"Durak ara (sim, le, UKOME No)...",value:D,onChange:G=>b(G.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),E.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[E.jsxs("div",{className:"bg-white border border-slate-300 rounded-lg p-1 flex",children:[E.jsxs("button",{onClick:()=>i("LIST"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="LIST"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[E.jsx(XN,{size:18}),"Liste"]}),E.jsxs("button",{onClick:()=>i("MAP"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="MAP"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[E.jsx(jN,{size:18}),"Harita"]})]}),E.jsxs("button",{onClick:P,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm font-medium",children:[E.jsx(t1,{size:20}),"Yeni Durak Ekle"]})]})]}),E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[500px]",children:B?E.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[E.jsx(rd,{size:32,className:"animate-spin mb-2 text-blue-600"}),E.jsx("p",{children:"Veriler Ykleniyor..."})]}):E.jsx(E.Fragment,{children:n==="LIST"?E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[E.jsx("th",{className:"p-4",children:"Durak Ad"}),E.jsx("th",{className:"p-4",children:"le / Mahalle"}),E.jsx("th",{className:"p-4",children:"DURAKTA ALIAN ARA SAYISI"}),E.jsx("th",{className:"p-4",children:"Son UKOME Karar"}),E.jsx("th",{className:"p-4",children:"Durum"}),E.jsx("th",{className:"p-4 text-right",children:"lemler"})]})}),E.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:xe.length>0?xe.map(G=>{var ne;return E.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[E.jsx("td",{className:"p-4 font-medium text-slate-900",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600",children:E.jsx(ZN,{size:16})}),G.name]})}),E.jsxs("td",{className:"p-4",children:[E.jsx("div",{className:"font-medium text-slate-700",children:G.district}),G.neighborhood&&E.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[G.neighborhood," Mah."]})]}),E.jsx("td",{className:"p-4",children:E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsxs("div",{className:"flex items-baseline gap-2",children:[E.jsx("span",{className:"text-lg font-bold text-slate-700",children:((ne=G.plates)==null?void 0:ne.length)||0}),E.jsx("span",{className:"text-xs text-slate-500",children:"Ara"})]}),E.jsxs("span",{className:"text-xs text-slate-400",children:["(Kapasite: ",G.capacity,")"]})]})}),E.jsx("td",{className:"p-4 text-slate-600",children:G.ukomeDecisionNo?E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-medium text-slate-700",children:G.ukomeDecisionNo}),E.jsx("span",{className:"text-xs text-slate-400",children:new Date(G.ukomeDate).toLocaleDateString("tr-TR")})]}):"-"}),E.jsx("td",{className:"p-4",children:E.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${G.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":G.status==="Pasif"?"bg-red-50 text-red-700 border-red-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:G.status})}),E.jsx("td",{className:"p-4 text-right",children:E.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E.jsx("button",{onClick:()=>U(G),className:"p-2 bg-white border border-slate-200 text-slate-600 hover:text-blue-600 hover:border-blue-200 rounded-lg transition-all shadow-sm",title:"Detayl Grntle",children:E.jsx(QN,{size:18})}),E.jsx("button",{onClick:()=>O(G),className:"p-2 bg-orange-50 border border-orange-100 text-orange-600 hover:bg-orange-100 hover:border-orange-200 rounded-lg transition-all shadow-sm",title:"Dzenle (Hatal Giri Dzeltme)",children:E.jsx(e1,{size:18})}),E.jsxs("button",{onClick:()=>F(G),className:"px-3 py-2 bg-blue-50 border border-blue-100 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-medium flex items-center gap-1 transition-all",title:"UKOME Karar ile Revize Et",children:[E.jsx(xr,{size:16}),"Revize"]}),E.jsx("button",{onClick:()=>ae(G.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg ml-1",title:"Sil",children:E.jsx(o1,{size:18})})]})})]},G.id)}):E.jsx("tr",{children:E.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:N?E.jsxs("div",{className:"flex flex-col items-center gap-2",children:[E.jsx("span",{className:"font-semibold text-red-500",children:"Balant Sorunu"}),E.jsx("span",{className:"text-xs",children:"Yukardaki hata mesajn kontrol edin."})]}):"Kayt bulunamad."})})})]})}):E.jsx("div",{className:"h-[600px] w-full",children:E.jsx(Kx,{stands:xe})})})})]}),n==="VIEW"&&d&&E.jsx(AF,{stand:d,onBack:()=>i("LIST"),onRevise:F,onViewHistory:G=>Ne(d,G)}),n==="FORM"&&E.jsx(CF,{initialData:d,existingStands:a,onSave:Ke,onCancel:()=>i("LIST")})]}),g&&E.jsx(RF,{stand:g,initialUkomeNo:v,onClose:()=>{y(void 0),S(null)}}),H&&E.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4",children:[E.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>J(!1)}),E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md relative z-10 p-6 animate-in fade-in zoom-in duration-200",children:[E.jsxs("div",{className:"mb-5",children:[E.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[E.jsx(xr,{className:"text-blue-600"}),"UKOME Revizyon Karar"]}),E.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Dura revize etmeden nce ilgili UKOME karar numarasn giriniz."})]}),E.jsxs("form",{onSubmit:M,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Numaras"}),E.jsx("input",{required:!0,type:"text",placeholder:"rn: 2025/12-05",value:Z.decisionNo,onChange:G=>V({...Z,decisionNo:G.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Tarihi"}),E.jsx("input",{required:!0,type:"date",value:Z.date,onChange:G=>V({...Z,date:G.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar zeti (Opsiyonel)"}),E.jsx("textarea",{rows:2,placeholder:"Deiiklik sebebi...",value:Z.summary,onChange:G=>V({...Z,summary:G.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),E.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[E.jsx("button",{type:"button",onClick:()=>J(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg",children:"ptal"}),E.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Devam Et & Revize Et"})]})]})]})]})]})},Jx=document.getElementById("root");if(!Jx)throw new Error("Could not find root element to mount to");const MF=Vh.createRoot(Jx);MF.render(E.jsx(US.StrictMode,{children:E.jsx(NF,{})}));
