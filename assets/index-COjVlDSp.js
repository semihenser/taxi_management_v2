(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var pI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z0={exports:{}},_d={},G0={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),mI=Symbol.for("react.portal"),gI=Symbol.for("react.fragment"),_I=Symbol.for("react.strict_mode"),yI=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),TI=Symbol.for("react.context"),EI=Symbol.for("react.forward_ref"),wI=Symbol.for("react.suspense"),SI=Symbol.for("react.memo"),CI=Symbol.for("react.lazy"),Bg=Symbol.iterator;function II(t){return t===null||typeof t!="object"?null:(t=Bg&&t[Bg]||t["@@iterator"],typeof t=="function"?t:null)}var H0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q0=Object.assign,$0={};function Js(t,e,n){this.props=t,this.context=e,this.refs=$0,this.updater=n||H0}Js.prototype.isReactComponent={};Js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W0(){}W0.prototype=Js.prototype;function Lp(t,e,n){this.props=t,this.context=e,this.refs=$0,this.updater=n||H0}var Dp=Lp.prototype=new W0;Dp.constructor=Lp;q0(Dp,Js.prototype);Dp.isPureReactComponent=!0;var zg=Array.isArray,K0=Object.prototype.hasOwnProperty,bp={current:null},J0={key:!0,ref:!0,__self:!0,__source:!0};function Z0(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)K0.call(e,i)&&!J0.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:zl,type:t,key:o,ref:a,props:r,_owner:bp.current}}function xI(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vp(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function AI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gg=/\/+/g;function fh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AI(""+t.key):e.toString(36)}function oc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zl:case mI:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+fh(a,0):i,zg(r)?(n="",t!=null&&(n=t.replace(Gg,"$&/")+"/"),oc(r,e,n,"",function(h){return h})):r!=null&&(Vp(r)&&(r=xI(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Gg,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",zg(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+fh(o,u);a+=oc(o,e,n,d,r)}else if(d=II(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+fh(o,u++),a+=oc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ku(t,e,n){if(t==null)return t;var i=[],r=0;return oc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function PI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},sc={transition:null},RI={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:sc,ReactCurrentOwner:bp};function Y0(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:ku,forEach:function(t,e,n){ku(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ku(t,function(){e++}),e},toArray:function(t){return ku(t,function(e){return e})||[]},only:function(t){if(!Vp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Js;Ae.Fragment=gI;Ae.Profiler=yI;Ae.PureComponent=Lp;Ae.StrictMode=_I;Ae.Suspense=wI;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RI;Ae.act=Y0;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=q0({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=bp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)K0.call(e,d)&&!J0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:zl,type:t.type,key:r,ref:o,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:TI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vI,_context:t},t.Consumer=t};Ae.createElement=Z0;Ae.createFactory=function(t){var e=Z0.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:EI,render:t}};Ae.isValidElement=Vp;Ae.lazy=function(t){return{$$typeof:CI,_payload:{_status:-1,_result:t},_init:PI}};Ae.memo=function(t,e){return{$$typeof:SI,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=sc.transition;sc.transition={};try{t()}finally{sc.transition=e}};Ae.unstable_act=Y0;Ae.useCallback=function(t,e){return Yt.current.useCallback(t,e)};Ae.useContext=function(t){return Yt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Yt.current.useEffect(t,e)};Ae.useId=function(){return Yt.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Yt.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};Ae.useRef=function(t){return Yt.current.useRef(t)};Ae.useState=function(t){return Yt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Yt.current.useTransition()};Ae.version="18.3.1";G0.exports=Ae;var xe=G0.exports;const NI=B0(xe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=xe,MI=Symbol.for("react.element"),LI=Symbol.for("react.fragment"),DI=Object.prototype.hasOwnProperty,bI=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VI={key:!0,ref:!0,__self:!0,__source:!0};function Q0(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)DI.call(e,i)&&!VI.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:MI,type:t,key:o,ref:a,props:r,_owner:bI.current}}_d.Fragment=LI;_d.jsx=Q0;_d.jsxs=Q0;z0.exports=_d;var S=z0.exports,Qh={},X0={exports:{}},gn={},j0={exports:{}},eT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,de){var te=J.length;J.push(de);e:for(;0<te;){var he=te-1>>>1,Se=J[he];if(0<r(Se,de))J[he]=de,J[te]=Se,te=he;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var de=J[0],te=J.pop();if(te!==de){J[0]=te;e:for(var he=0,Se=J.length,$e=Se>>>1;he<$e;){var ke=2*(he+1)-1,Pe=J[ke],ge=ke+1,yt=J[ge];if(0>r(Pe,te))ge<Se&&0>r(yt,Pe)?(J[he]=yt,J[ge]=te,he=ge):(J[he]=Pe,J[ke]=te,he=ke);else if(ge<Se&&0>r(yt,te))J[he]=yt,J[ge]=te,he=ge;else break e}}return de}function r(J,de){var te=J.sortIndex-de.sortIndex;return te!==0?te:J.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],h=[],g=1,y=null,v=3,C=!1,b=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(J){for(var de=n(h);de!==null;){if(de.callback===null)i(h);else if(de.startTime<=J)i(h),de.sortIndex=de.expirationTime,e(d,de);else break;de=n(h)}}function G(J){if(D=!1,M(J),!b)if(n(d)!==null)b=!0,$(Z);else{var de=n(h);de!==null&&ne(G,de.startTime-J)}}function Z(J,de){b=!1,D&&(D=!1,x(P),P=-1),C=!0;var te=v;try{for(M(de),y=n(d);y!==null&&(!(y.expirationTime>de)||J&&!O());){var he=y.callback;if(typeof he=="function"){y.callback=null,v=y.priorityLevel;var Se=he(y.expirationTime<=de);de=t.unstable_now(),typeof Se=="function"?y.callback=Se:y===n(d)&&i(d),M(de)}else i(d);y=n(d)}if(y!==null)var $e=!0;else{var ke=n(h);ke!==null&&ne(G,ke.startTime-de),$e=!1}return $e}finally{y=null,v=te,C=!1}}var Y=!1,k=null,P=-1,N=5,F=-1;function O(){return!(t.unstable_now()-F<N)}function z(){if(k!==null){var J=t.unstable_now();F=J;var de=!0;try{de=k(!0,J)}finally{de?V():(Y=!1,k=null)}}else Y=!1}var V;if(typeof R=="function")V=function(){R(z)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ot=we.port2;we.port1.onmessage=z,V=function(){ot.postMessage(null)}}else V=function(){U(z,0)};function $(J){k=J,Y||(Y=!0,V())}function ne(J,de){P=U(function(){J(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,$(Z))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(J){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var te=v;v=de;try{return J()}finally{v=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,de){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=v;v=J;try{return de()}finally{v=te}},t.unstable_scheduleCallback=function(J,de,te){var he=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?he+te:he):te=he,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=te+Se,J={id:g++,callback:de,priorityLevel:J,startTime:te,expirationTime:Se,sortIndex:-1},te>he?(J.sortIndex=te,e(h,J),n(d)===null&&J===n(h)&&(D?(x(P),P=-1):D=!0,ne(G,te-he))):(J.sortIndex=Se,e(d,J),b||C||(b=!0,$(Z))),J},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(J){var de=v;return function(){var te=v;v=de;try{return J.apply(this,arguments)}finally{v=te}}}})(eT);j0.exports=eT;var FI=j0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI=xe,mn=FI;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tT=new Set,fl={};function To(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(fl[t]=e,t=0;t<e.length;t++)tT.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,OI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hg={},qg={};function BI(t){return Xh.call(qg,t)?!0:Xh.call(Hg,t)?!1:OI.test(t)?qg[t]=!0:(Hg[t]=!0,!1)}function zI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GI(t,e,n,i){if(e===null||typeof e>"u"||zI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fp=/[\-:]([a-z])/g;function Up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fp,Up);Mt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fp,Up);Mt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fp,Up);Mt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Op(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GI(e,n,r,i)&&(n=null),i||r===null?BI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $i=UI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mu=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),Bp=Symbol.for("react.strict_mode"),jh=Symbol.for("react.profiler"),nT=Symbol.for("react.provider"),iT=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),Gp=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),rT=Symbol.for("react.offscreen"),$g=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,ph;function $a(t){if(ph===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ph=e&&e[1]||""}return`
`+ph+t}var mh=!1;function gh(t,e){if(!t||mh)return"";mh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{mh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$a(t):""}function HI(t){switch(t.tag){case 5:return $a(t.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 2:case 15:return t=gh(t.type,!1),t;case 11:return t=gh(t.type.render,!1),t;case 1:return t=gh(t.type,!0),t;default:return""}}function nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ls:return"Fragment";case as:return"Portal";case jh:return"Profiler";case Bp:return"StrictMode";case ef:return"Suspense";case tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iT:return(t.displayName||"Context")+".Consumer";case nT:return(t._context.displayName||"Context")+".Provider";case zp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gp:return e=t.displayName||null,e!==null?e:nf(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return nf(t(e))}catch{}}return null}function qI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nf(e);case 8:return e===Bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $I(t){var e=oT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lu(t){t._valueTracker||(t._valueTracker=$I(t))}function sT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=oT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ic(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rf(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aT(t,e){e=e.checked,e!=null&&Op(t,"checked",e,!1)}function of(t,e){aT(t,e);var n=Ar(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&sf(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sf(t,e,n){(e!=="number"||Ic(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wa=Array.isArray;function Es(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Wa(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function lT(t,e){var n=Ar(e.value),i=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Zg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Du,cT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WI=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){WI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function dT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function hT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=dT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var KI=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uf(t,e){if(e){if(KI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function cf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=null;function Hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hf=null,ws=null,Ss=null;function Yg(t){if(t=ql(t)){if(typeof hf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=wd(e),hf(t.stateNode,t.type,e))}}function fT(t){ws?Ss?Ss.push(t):Ss=[t]:ws=t}function pT(){if(ws){var t=ws,e=Ss;if(Ss=ws=null,Yg(t),e)for(t=0;t<e.length;t++)Yg(e[t])}}function mT(t,e){return t(e)}function gT(){}var _h=!1;function _T(t,e,n){if(_h)return t(e,n);_h=!0;try{return mT(t,e,n)}finally{_h=!1,(ws!==null||Ss!==null)&&(gT(),pT())}}function ml(t,e){var n=t.stateNode;if(n===null)return null;var i=wd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var ff=!1;if(Fi)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){ff=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{ff=!1}function JI(t,e,n,i,r,o,a,u,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(g){this.onError(g)}}var el=!1,xc=null,Ac=!1,pf=null,ZI={onError:function(t){el=!0,xc=t}};function YI(t,e,n,i,r,o,a,u,d){el=!1,xc=null,JI.apply(ZI,arguments)}function QI(t,e,n,i,r,o,a,u,d){if(YI.apply(this,arguments),el){if(el){var h=xc;el=!1,xc=null}else throw Error(ee(198));Ac||(Ac=!0,pf=h)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qg(t){if(Eo(t)!==t)throw Error(ee(188))}function XI(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Qg(r),t;if(o===i)return Qg(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function vT(t){return t=XI(t),t!==null?TT(t):null}function TT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TT(t);if(e!==null)return e;t=t.sibling}return null}var ET=mn.unstable_scheduleCallback,Xg=mn.unstable_cancelCallback,jI=mn.unstable_shouldYield,ex=mn.unstable_requestPaint,lt=mn.unstable_now,tx=mn.unstable_getCurrentPriorityLevel,qp=mn.unstable_ImmediatePriority,wT=mn.unstable_UserBlockingPriority,Pc=mn.unstable_NormalPriority,nx=mn.unstable_LowPriority,ST=mn.unstable_IdlePriority,yd=null,hi=null;function ix(t){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(yd,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:sx,rx=Math.log,ox=Math.LN2;function sx(t){return t>>>=0,t===0?32:31-(rx(t)/ox|0)|0}var bu=64,Vu=4194304;function Ka(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Ka(u):(o&=a,o!==0&&(i=Ka(o)))}else a=n&~r,a!==0?i=Ka(a):o!==0&&(i=Ka(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Wn(e),r=1<<n,i|=t[n],e&=~r;return i}function ax(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lx(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Wn(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=ax(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function mf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CT(){var t=bu;return bu<<=1,!(bu&4194240)&&(bu=64),t}function yh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function ux(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Wn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function $p(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Wn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var He=0;function IT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xT,Wp,AT,PT,RT,gf=!1,Fu=[],pr=null,mr=null,gr=null,gl=new Map,_l=new Map,lr=[],cx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jg(t,e){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Va(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ql(e),e!==null&&Wp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function dx(t,e,n,i,r){switch(e){case"focusin":return pr=Va(pr,t,e,n,i,r),!0;case"dragenter":return mr=Va(mr,t,e,n,i,r),!0;case"mouseover":return gr=Va(gr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return gl.set(o,Va(gl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,_l.set(o,Va(_l.get(o)||null,t,e,n,i,r)),!0}return!1}function NT(t){var e=oo(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=yT(n),e!==null){t.blockedOn=e,RT(t.priority,function(){AT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_f(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);df=i,n.target.dispatchEvent(i),df=null}else return e=ql(n),e!==null&&Wp(e),t.blockedOn=n,!1;e.shift()}return!0}function e_(t,e,n){ac(t)&&n.delete(e)}function hx(){gf=!1,pr!==null&&ac(pr)&&(pr=null),mr!==null&&ac(mr)&&(mr=null),gr!==null&&ac(gr)&&(gr=null),gl.forEach(e_),_l.forEach(e_)}function Fa(t,e){t.blockedOn===e&&(t.blockedOn=null,gf||(gf=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,hx)))}function yl(t){function e(r){return Fa(r,t)}if(0<Fu.length){Fa(Fu[0],t);for(var n=1;n<Fu.length;n++){var i=Fu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(pr!==null&&Fa(pr,t),mr!==null&&Fa(mr,t),gr!==null&&Fa(gr,t),gl.forEach(e),_l.forEach(e),n=0;n<lr.length;n++)i=lr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)NT(n),n.blockedOn===null&&lr.shift()}var Cs=$i.ReactCurrentBatchConfig,Nc=!0;function fx(t,e,n,i){var r=He,o=Cs.transition;Cs.transition=null;try{He=1,Kp(t,e,n,i)}finally{He=r,Cs.transition=o}}function px(t,e,n,i){var r=He,o=Cs.transition;Cs.transition=null;try{He=4,Kp(t,e,n,i)}finally{He=r,Cs.transition=o}}function Kp(t,e,n,i){if(Nc){var r=_f(t,e,n,i);if(r===null)Ph(t,e,i,kc,n),jg(t,i);else if(dx(r,t,e,n,i))i.stopPropagation();else if(jg(t,i),e&4&&-1<cx.indexOf(t)){for(;r!==null;){var o=ql(r);if(o!==null&&xT(o),o=_f(t,e,n,i),o===null&&Ph(t,e,i,kc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Ph(t,e,i,null,n)}}var kc=null;function _f(t,e,n,i){if(kc=null,t=Hp(i),t=oo(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kc=t,null}function kT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tx()){case qp:return 1;case wT:return 4;case Pc:case nx:return 16;case ST:return 536870912;default:return 16}default:return 16}}var cr=null,Jp=null,lc=null;function MT(){if(lc)return lc;var t,e=Jp,n=e.length,i,r="value"in cr?cr.value:cr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return lc=r.slice(t,1<i?1-i:void 0)}function uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uu(){return!0}function t_(){return!1}function _n(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Uu:t_,this.isPropagationStopped=t_,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),e}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zp=_n(Zs),Hl=tt({},Zs,{view:0,detail:0}),mx=_n(Hl),vh,Th,Ua,vd=tt({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ua&&(Ua&&t.type==="mousemove"?(vh=t.screenX-Ua.screenX,Th=t.screenY-Ua.screenY):Th=vh=0,Ua=t),vh)},movementY:function(t){return"movementY"in t?t.movementY:Th}}),n_=_n(vd),gx=tt({},vd,{dataTransfer:0}),_x=_n(gx),yx=tt({},Hl,{relatedTarget:0}),Eh=_n(yx),vx=tt({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Tx=_n(vx),Ex=tt({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wx=_n(Ex),Sx=tt({},Zs,{data:0}),i_=_n(Sx),Cx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ix={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ax(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xx[t])?!!e[t]:!1}function Yp(){return Ax}var Px=tt({},Hl,{key:function(t){if(t.key){var e=Cx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ix[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yp,charCode:function(t){return t.type==="keypress"?uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rx=_n(Px),Nx=tt({},vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r_=_n(Nx),kx=tt({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yp}),Mx=_n(kx),Lx=tt({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dx=_n(Lx),bx=tt({},vd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=_n(bx),Fx=[9,13,27,32],Qp=Fi&&"CompositionEvent"in window,tl=null;Fi&&"documentMode"in document&&(tl=document.documentMode);var Ux=Fi&&"TextEvent"in window&&!tl,LT=Fi&&(!Qp||tl&&8<tl&&11>=tl),o_=" ",s_=!1;function DT(t,e){switch(t){case"keyup":return Fx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function Ox(t,e){switch(t){case"compositionend":return bT(e);case"keypress":return e.which!==32?null:(s_=!0,o_);case"textInput":return t=e.data,t===o_&&s_?null:t;default:return null}}function Bx(t,e){if(us)return t==="compositionend"||!Qp&&DT(t,e)?(t=MT(),lc=Jp=cr=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LT&&e.locale!=="ko"?null:e.data;default:return null}}var zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zx[t.type]:e==="textarea"}function VT(t,e,n,i){fT(i),e=Mc(e,"onChange"),0<e.length&&(n=new Zp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var nl=null,vl=null;function Gx(t){KT(t,0)}function Td(t){var e=hs(t);if(sT(e))return t}function Hx(t,e){if(t==="change")return e}var FT=!1;if(Fi){var wh;if(Fi){var Sh="oninput"in document;if(!Sh){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),Sh=typeof l_.oninput=="function"}wh=Sh}else wh=!1;FT=wh&&(!document.documentMode||9<document.documentMode)}function u_(){nl&&(nl.detachEvent("onpropertychange",UT),vl=nl=null)}function UT(t){if(t.propertyName==="value"&&Td(vl)){var e=[];VT(e,vl,t,Hp(t)),_T(Gx,e)}}function qx(t,e,n){t==="focusin"?(u_(),nl=e,vl=n,nl.attachEvent("onpropertychange",UT)):t==="focusout"&&u_()}function $x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Td(vl)}function Wx(t,e){if(t==="click")return Td(e)}function Kx(t,e){if(t==="input"||t==="change")return Td(e)}function Jx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:Jx;function Tl(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Xh.call(e,r)||!Qn(t[r],e[r]))return!1}return!0}function c_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d_(t,e){var n=c_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c_(n)}}function OT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BT(){for(var t=window,e=Ic();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ic(t.document)}return e}function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zx(t){var e=BT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OT(n.ownerDocument.documentElement,n)){if(i!==null&&Xp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=d_(n,o);var a=d_(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yx=Fi&&"documentMode"in document&&11>=document.documentMode,cs=null,yf=null,il=null,vf=!1;function h_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vf||cs==null||cs!==Ic(i)||(i=cs,"selectionStart"in i&&Xp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),il&&Tl(il,i)||(il=i,i=Mc(yf,"onSelect"),0<i.length&&(e=new Zp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=cs)))}function Ou(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ds={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionend:Ou("Transition","TransitionEnd")},Ch={},zT={};Fi&&(zT=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Ed(t){if(Ch[t])return Ch[t];if(!ds[t])return t;var e=ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zT)return Ch[t]=e[n];return t}var GT=Ed("animationend"),HT=Ed("animationiteration"),qT=Ed("animationstart"),$T=Ed("transitionend"),WT=new Map,f_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(t,e){WT.set(t,e),To(e,[t])}for(var Ih=0;Ih<f_.length;Ih++){var xh=f_[Ih],Qx=xh.toLowerCase(),Xx=xh[0].toUpperCase()+xh.slice(1);br(Qx,"on"+Xx)}br(GT,"onAnimationEnd");br(HT,"onAnimationIteration");br(qT,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br($T,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function p_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,QI(i,e,void 0,t),t.currentTarget=null}function KT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;p_(r,u,h),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,h=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;p_(r,u,h),o=d}}}if(Ac)throw t=pf,Ac=!1,pf=null,t}function Je(t,e){var n=e[Cf];n===void 0&&(n=e[Cf]=new Set);var i=t+"__bubble";n.has(i)||(JT(e,t,2,!1),n.add(i))}function Ah(t,e,n){var i=0;e&&(i|=4),JT(n,t,i,e)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function El(t){if(!t[Bu]){t[Bu]=!0,tT.forEach(function(n){n!=="selectionchange"&&(jx.has(n)||Ah(n,!1,t),Ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bu]||(e[Bu]=!0,Ah("selectionchange",!1,e))}}function JT(t,e,n,i){switch(kT(e)){case 1:var r=fx;break;case 4:r=px;break;default:r=Kp}n=r.bind(null,e,n,t),r=void 0,!ff||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ph(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=oo(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}_T(function(){var h=o,g=Hp(n),y=[];e:{var v=WT.get(t);if(v!==void 0){var C=Zp,b=t;switch(t){case"keypress":if(uc(n)===0)break e;case"keydown":case"keyup":C=Rx;break;case"focusin":b="focus",C=Eh;break;case"focusout":b="blur",C=Eh;break;case"beforeblur":case"afterblur":C=Eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=n_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=_x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Mx;break;case GT:case HT:case qT:C=Tx;break;case $T:C=Dx;break;case"scroll":C=mx;break;case"wheel":C=Vx;break;case"copy":case"cut":case"paste":C=wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=r_}var D=(e&4)!==0,U=!D&&t==="scroll",x=D?v!==null?v+"Capture":null:v;D=[];for(var R=h,M;R!==null;){M=R;var G=M.stateNode;if(M.tag===5&&G!==null&&(M=G,x!==null&&(G=ml(R,x),G!=null&&D.push(wl(R,G,M)))),U)break;R=R.return}0<D.length&&(v=new C(v,b,null,n,g),y.push({event:v,listeners:D}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",v&&n!==df&&(b=n.relatedTarget||n.fromElement)&&(oo(b)||b[Ui]))break e;if((C||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=h,b=b?oo(b):null,b!==null&&(U=Eo(b),b!==U||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=h),C!==b)){if(D=n_,G="onMouseLeave",x="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(D=r_,G="onPointerLeave",x="onPointerEnter",R="pointer"),U=C==null?v:hs(C),M=b==null?v:hs(b),v=new D(G,R+"leave",C,n,g),v.target=U,v.relatedTarget=M,G=null,oo(g)===h&&(D=new D(x,R+"enter",b,n,g),D.target=M,D.relatedTarget=U,G=D),U=G,C&&b)t:{for(D=C,x=b,R=0,M=D;M;M=ts(M))R++;for(M=0,G=x;G;G=ts(G))M++;for(;0<R-M;)D=ts(D),R--;for(;0<M-R;)x=ts(x),M--;for(;R--;){if(D===x||x!==null&&D===x.alternate)break t;D=ts(D),x=ts(x)}D=null}else D=null;C!==null&&m_(y,v,C,D,!1),b!==null&&U!==null&&m_(y,U,b,D,!0)}}e:{if(v=h?hs(h):window,C=v.nodeName&&v.nodeName.toLowerCase(),C==="select"||C==="input"&&v.type==="file")var Z=Hx;else if(a_(v))if(FT)Z=Kx;else{Z=$x;var Y=qx}else(C=v.nodeName)&&C.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(Z=Wx);if(Z&&(Z=Z(t,h))){VT(y,Z,n,g);break e}Y&&Y(t,v,h),t==="focusout"&&(Y=v._wrapperState)&&Y.controlled&&v.type==="number"&&sf(v,"number",v.value)}switch(Y=h?hs(h):window,t){case"focusin":(a_(Y)||Y.contentEditable==="true")&&(cs=Y,yf=h,il=null);break;case"focusout":il=yf=cs=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,h_(y,n,g);break;case"selectionchange":if(Yx)break;case"keydown":case"keyup":h_(y,n,g)}var k;if(Qp)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else us?DT(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(LT&&n.locale!=="ko"&&(us||P!=="onCompositionStart"?P==="onCompositionEnd"&&us&&(k=MT()):(cr=g,Jp="value"in cr?cr.value:cr.textContent,us=!0)),Y=Mc(h,P),0<Y.length&&(P=new i_(P,t,null,n,g),y.push({event:P,listeners:Y}),k?P.data=k:(k=bT(n),k!==null&&(P.data=k)))),(k=Ux?Ox(t,n):Bx(t,n))&&(h=Mc(h,"onBeforeInput"),0<h.length&&(g=new i_("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:h}),g.data=k))}KT(y,e)})}function wl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ml(t,n),o!=null&&i.unshift(wl(t,o,r)),o=ml(t,e),o!=null&&i.push(wl(t,o,r))),t=t.return}return i}function ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m_(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,h=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&h!==null&&(u=h,r?(d=ml(n,o),d!=null&&a.unshift(wl(n,d,u))):r||(d=ml(n,o),d!=null&&a.push(wl(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function g_(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function zu(t,e,n){if(e=g_(e),g_(t)!==e&&n)throw Error(ee(425))}function Lc(){}var Tf=null,Ef=null;function wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(t){return __.resolve(null).then(t).catch(rA)}:Sf;function rA(t){setTimeout(function(){throw t})}function Rh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),yl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);yl(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),di="__reactFiber$"+Ys,Sl="__reactProps$"+Ys,Ui="__reactContainer$"+Ys,Cf="__reactEvents$"+Ys,oA="__reactListeners$"+Ys,sA="__reactHandles$"+Ys;function oo(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ui]||n[di]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y_(t);t!==null;){if(n=t[di])return n;t=y_(t)}return e}t=n,n=t.parentNode}return null}function ql(t){return t=t[di]||t[Ui],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function wd(t){return t[Sl]||null}var If=[],fs=-1;function Vr(t){return{current:t}}function Qe(t){0>fs||(t.current=If[fs],If[fs]=null,fs--)}function Ke(t,e){fs++,If[fs]=t.current,t.current=e}var Pr={},Gt=Vr(Pr),an=Vr(!1),ho=Pr;function bs(t,e){var n=t.type.contextTypes;if(!n)return Pr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ln(t){return t=t.childContextTypes,t!=null}function Dc(){Qe(an),Qe(Gt)}function v_(t,e,n){if(Gt.current!==Pr)throw Error(ee(168));Ke(Gt,e),Ke(an,n)}function ZT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,qI(t)||"Unknown",r));return tt({},n,i)}function bc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,ho=Gt.current,Ke(Gt,t),Ke(an,an.current),!0}function T_(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=ZT(t,e,ho),i.__reactInternalMemoizedMergedChildContext=t,Qe(an),Qe(Gt),Ke(Gt,t)):Qe(an),Ke(an,n)}var Li=null,Sd=!1,Nh=!1;function YT(t){Li===null?Li=[t]:Li.push(t)}function aA(t){Sd=!0,YT(t)}function Fr(){if(!Nh&&Li!==null){Nh=!0;var t=0,e=He;try{var n=Li;for(He=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Li=null,Sd=!1}catch(r){throw Li!==null&&(Li=Li.slice(t+1)),ET(qp,Fr),r}finally{He=e,Nh=!1}}return null}var ps=[],ms=0,Vc=null,Fc=0,xn=[],An=0,fo=null,Di=1,bi="";function to(t,e){ps[ms++]=Fc,ps[ms++]=Vc,Vc=t,Fc=e}function QT(t,e,n){xn[An++]=Di,xn[An++]=bi,xn[An++]=fo,fo=t;var i=Di;t=bi;var r=32-Wn(i)-1;i&=~(1<<r),n+=1;var o=32-Wn(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Di=1<<32-Wn(e)+r|n<<r|i,bi=o+t}else Di=1<<o|n<<r|i,bi=t}function jp(t){t.return!==null&&(to(t,1),QT(t,1,0))}function em(t){for(;t===Vc;)Vc=ps[--ms],ps[ms]=null,Fc=ps[--ms],ps[ms]=null;for(;t===fo;)fo=xn[--An],xn[An]=null,bi=xn[--An],xn[An]=null,Di=xn[--An],xn[An]=null}var pn=null,fn=null,Xe=!1,qn=null;function XT(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,fn=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fo!==null?{id:Di,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,fn=null,!0):!1;default:return!1}}function xf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Af(t){if(Xe){var e=fn;if(e){var n=e;if(!E_(t,e)){if(xf(t))throw Error(ee(418));e=_r(n.nextSibling);var i=pn;e&&E_(t,e)?XT(i,n):(t.flags=t.flags&-4097|2,Xe=!1,pn=t)}}else{if(xf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Xe=!1,pn=t}}}function w_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function Gu(t){if(t!==pn)return!1;if(!Xe)return w_(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wf(t.type,t.memoizedProps)),e&&(e=fn)){if(xf(t))throw jT(),Error(ee(418));for(;e;)XT(t,e),e=_r(e.nextSibling)}if(w_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=pn?_r(t.stateNode.nextSibling):null;return!0}function jT(){for(var t=fn;t;)t=_r(t.nextSibling)}function Vs(){fn=pn=null,Xe=!1}function tm(t){qn===null?qn=[t]:qn.push(t)}var lA=$i.ReactCurrentBatchConfig;function Oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Hu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S_(t){var e=t._init;return e(t._payload)}function eE(t){function e(x,R){if(t){var M=x.deletions;M===null?(x.deletions=[R],x.flags|=16):M.push(R)}}function n(x,R){if(!t)return null;for(;R!==null;)e(x,R),R=R.sibling;return null}function i(x,R){for(x=new Map;R!==null;)R.key!==null?x.set(R.key,R):x.set(R.index,R),R=R.sibling;return x}function r(x,R){return x=Er(x,R),x.index=0,x.sibling=null,x}function o(x,R,M){return x.index=M,t?(M=x.alternate,M!==null?(M=M.index,M<R?(x.flags|=2,R):M):(x.flags|=2,R)):(x.flags|=1048576,R)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function u(x,R,M,G){return R===null||R.tag!==6?(R=Fh(M,x.mode,G),R.return=x,R):(R=r(R,M),R.return=x,R)}function d(x,R,M,G){var Z=M.type;return Z===ls?g(x,R,M.props.children,G,M.key):R!==null&&(R.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===sr&&S_(Z)===R.type)?(G=r(R,M.props),G.ref=Oa(x,R,M),G.return=x,G):(G=gc(M.type,M.key,M.props,null,x.mode,G),G.ref=Oa(x,R,M),G.return=x,G)}function h(x,R,M,G){return R===null||R.tag!==4||R.stateNode.containerInfo!==M.containerInfo||R.stateNode.implementation!==M.implementation?(R=Uh(M,x.mode,G),R.return=x,R):(R=r(R,M.children||[]),R.return=x,R)}function g(x,R,M,G,Z){return R===null||R.tag!==7?(R=co(M,x.mode,G,Z),R.return=x,R):(R=r(R,M),R.return=x,R)}function y(x,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Fh(""+R,x.mode,M),R.return=x,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Mu:return M=gc(R.type,R.key,R.props,null,x.mode,M),M.ref=Oa(x,null,R),M.return=x,M;case as:return R=Uh(R,x.mode,M),R.return=x,R;case sr:var G=R._init;return y(x,G(R._payload),M)}if(Wa(R)||Da(R))return R=co(R,x.mode,M,null),R.return=x,R;Hu(x,R)}return null}function v(x,R,M,G){var Z=R!==null?R.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return Z!==null?null:u(x,R,""+M,G);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Mu:return M.key===Z?d(x,R,M,G):null;case as:return M.key===Z?h(x,R,M,G):null;case sr:return Z=M._init,v(x,R,Z(M._payload),G)}if(Wa(M)||Da(M))return Z!==null?null:g(x,R,M,G,null);Hu(x,M)}return null}function C(x,R,M,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number")return x=x.get(M)||null,u(R,x,""+G,Z);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Mu:return x=x.get(G.key===null?M:G.key)||null,d(R,x,G,Z);case as:return x=x.get(G.key===null?M:G.key)||null,h(R,x,G,Z);case sr:var Y=G._init;return C(x,R,M,Y(G._payload),Z)}if(Wa(G)||Da(G))return x=x.get(M)||null,g(R,x,G,Z,null);Hu(R,G)}return null}function b(x,R,M,G){for(var Z=null,Y=null,k=R,P=R=0,N=null;k!==null&&P<M.length;P++){k.index>P?(N=k,k=null):N=k.sibling;var F=v(x,k,M[P],G);if(F===null){k===null&&(k=N);break}t&&k&&F.alternate===null&&e(x,k),R=o(F,R,P),Y===null?Z=F:Y.sibling=F,Y=F,k=N}if(P===M.length)return n(x,k),Xe&&to(x,P),Z;if(k===null){for(;P<M.length;P++)k=y(x,M[P],G),k!==null&&(R=o(k,R,P),Y===null?Z=k:Y.sibling=k,Y=k);return Xe&&to(x,P),Z}for(k=i(x,k);P<M.length;P++)N=C(k,x,P,M[P],G),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?P:N.key),R=o(N,R,P),Y===null?Z=N:Y.sibling=N,Y=N);return t&&k.forEach(function(O){return e(x,O)}),Xe&&to(x,P),Z}function D(x,R,M,G){var Z=Da(M);if(typeof Z!="function")throw Error(ee(150));if(M=Z.call(M),M==null)throw Error(ee(151));for(var Y=Z=null,k=R,P=R=0,N=null,F=M.next();k!==null&&!F.done;P++,F=M.next()){k.index>P?(N=k,k=null):N=k.sibling;var O=v(x,k,F.value,G);if(O===null){k===null&&(k=N);break}t&&k&&O.alternate===null&&e(x,k),R=o(O,R,P),Y===null?Z=O:Y.sibling=O,Y=O,k=N}if(F.done)return n(x,k),Xe&&to(x,P),Z;if(k===null){for(;!F.done;P++,F=M.next())F=y(x,F.value,G),F!==null&&(R=o(F,R,P),Y===null?Z=F:Y.sibling=F,Y=F);return Xe&&to(x,P),Z}for(k=i(x,k);!F.done;P++,F=M.next())F=C(k,x,P,F.value,G),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?P:F.key),R=o(F,R,P),Y===null?Z=F:Y.sibling=F,Y=F);return t&&k.forEach(function(z){return e(x,z)}),Xe&&to(x,P),Z}function U(x,R,M,G){if(typeof M=="object"&&M!==null&&M.type===ls&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Mu:e:{for(var Z=M.key,Y=R;Y!==null;){if(Y.key===Z){if(Z=M.type,Z===ls){if(Y.tag===7){n(x,Y.sibling),R=r(Y,M.props.children),R.return=x,x=R;break e}}else if(Y.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===sr&&S_(Z)===Y.type){n(x,Y.sibling),R=r(Y,M.props),R.ref=Oa(x,Y,M),R.return=x,x=R;break e}n(x,Y);break}else e(x,Y);Y=Y.sibling}M.type===ls?(R=co(M.props.children,x.mode,G,M.key),R.return=x,x=R):(G=gc(M.type,M.key,M.props,null,x.mode,G),G.ref=Oa(x,R,M),G.return=x,x=G)}return a(x);case as:e:{for(Y=M.key;R!==null;){if(R.key===Y)if(R.tag===4&&R.stateNode.containerInfo===M.containerInfo&&R.stateNode.implementation===M.implementation){n(x,R.sibling),R=r(R,M.children||[]),R.return=x,x=R;break e}else{n(x,R);break}else e(x,R);R=R.sibling}R=Uh(M,x.mode,G),R.return=x,x=R}return a(x);case sr:return Y=M._init,U(x,R,Y(M._payload),G)}if(Wa(M))return b(x,R,M,G);if(Da(M))return D(x,R,M,G);Hu(x,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,R!==null&&R.tag===6?(n(x,R.sibling),R=r(R,M),R.return=x,x=R):(n(x,R),R=Fh(M,x.mode,G),R.return=x,x=R),a(x)):n(x,R)}return U}var Fs=eE(!0),tE=eE(!1),Uc=Vr(null),Oc=null,gs=null,nm=null;function im(){nm=gs=Oc=null}function rm(t){var e=Uc.current;Qe(Uc),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){Oc=t,nm=gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(nm!==t)if(t={context:t,memoizedValue:e,next:null},gs===null){if(Oc===null)throw Error(ee(308));gs=t,Oc.dependencies={lanes:0,firstContext:t}}else gs=gs.next=t;return e}var so=null;function om(t){so===null?so=[t]:so.push(t)}function nE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,om(e)):(n.next=r.next,r.next=n),e.interleaved=n,Oi(t,i)}function Oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Oi(t,n)}return r=i.interleaved,r===null?(e.next=e,om(i)):(e.next=r.next,r.next=e),i.interleaved=e,Oi(t,n)}function cc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,$p(t,n)}}function C_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bc(t,e,n,i){var r=t.updateQueue;ar=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,h=d.next;d.next=null,a===null?o=h:a.next=h,a=d;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=h:u.next=h,g.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;a=0,g=h=d=null,u=o;do{var v=u.lane,C=u.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:C,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,D=u;switch(v=e,C=n,D.tag){case 1:if(b=D.payload,typeof b=="function"){y=b.call(C,y,v);break e}y=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=D.payload,v=typeof b=="function"?b.call(C,y,v):b,v==null)break e;y=tt({},y,v);break e;case 2:ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else C={eventTime:C,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(h=g=C,d=y):g=g.next=C,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(g===null&&(d=y),r.baseState=d,r.firstBaseUpdate=h,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);mo|=a,t.lanes=a,t.memoizedState=y}}function I_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var $l={},fi=Vr($l),Cl=Vr($l),Il=Vr($l);function ao(t){if(t===$l)throw Error(ee(174));return t}function am(t,e){switch(Ke(Il,e),Ke(Cl,t),Ke(fi,$l),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lf(e,t)}Qe(fi),Ke(fi,e)}function Us(){Qe(fi),Qe(Cl),Qe(Il)}function rE(t){ao(Il.current);var e=ao(fi.current),n=lf(e,t.type);e!==n&&(Ke(Cl,t),Ke(fi,n))}function lm(t){Cl.current===t&&(Qe(fi),Qe(Cl))}var je=Vr(0);function zc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kh=[];function um(){for(var t=0;t<kh.length;t++)kh[t]._workInProgressVersionPrimary=null;kh.length=0}var dc=$i.ReactCurrentDispatcher,Mh=$i.ReactCurrentBatchConfig,po=0,et=null,pt=null,Ct=null,Gc=!1,rl=!1,xl=0,uA=0;function bt(){throw Error(ee(321))}function cm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function dm(t,e,n,i,r,o){if(po=o,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?fA:pA,t=n(i,r),rl){o=0;do{if(rl=!1,xl=0,25<=o)throw Error(ee(301));o+=1,Ct=pt=null,e.updateQueue=null,dc.current=mA,t=n(i,r)}while(rl)}if(dc.current=Hc,e=pt!==null&&pt.next!==null,po=0,Ct=pt=et=null,Gc=!1,e)throw Error(ee(300));return t}function hm(){var t=xl!==0;return xl=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?et.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Dn(){if(pt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Ct===null?et.memoizedState:Ct.next;if(e!==null)Ct=e,pt=t;else{if(t===null)throw Error(ee(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Ct===null?et.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Al(t,e){return typeof e=="function"?e(t):e}function Lh(t){var e=Dn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=pt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,h=o;do{var g=h.lane;if((po&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var y={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=y,a=i):d=d.next=y,et.lanes|=g,mo|=g}h=h.next}while(h!==null&&h!==o);d===null?a=i:d.next=u,Qn(i,e.memoizedState)||(sn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,et.lanes|=o,mo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dh(t){var e=Dn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Qn(o,e.memoizedState)||(sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function oE(){}function sE(t,e){var n=et,i=Dn(),r=e(),o=!Qn(i.memoizedState,r);if(o&&(i.memoizedState=r,sn=!0),i=i.queue,fm(uE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Pl(9,lE.bind(null,n,i,r,e),void 0,null),xt===null)throw Error(ee(349));po&30||aE(n,e,r)}return r}function aE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lE(t,e,n,i){e.value=n,e.getSnapshot=i,cE(e)&&dE(t)}function uE(t,e,n){return n(function(){cE(e)&&dE(t)})}function cE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function dE(t){var e=Oi(t,1);e!==null&&Kn(e,t,1,-1)}function x_(t){var e=li();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:t},e.queue=t,t=t.dispatch=hA.bind(null,et,t),[e.memoizedState,t]}function Pl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function hE(){return Dn().memoizedState}function hc(t,e,n,i){var r=li();et.flags|=t,r.memoizedState=Pl(1|e,n,void 0,i===void 0?null:i)}function Cd(t,e,n,i){var r=Dn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var a=pt.memoizedState;if(o=a.destroy,i!==null&&cm(i,a.deps)){r.memoizedState=Pl(e,n,o,i);return}}et.flags|=t,r.memoizedState=Pl(1|e,n,o,i)}function A_(t,e){return hc(8390656,8,t,e)}function fm(t,e){return Cd(2048,8,t,e)}function fE(t,e){return Cd(4,2,t,e)}function pE(t,e){return Cd(4,4,t,e)}function mE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gE(t,e,n){return n=n!=null?n.concat([t]):null,Cd(4,4,mE.bind(null,e,t),n)}function pm(){}function _E(t,e){var n=Dn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function yE(t,e){var n=Dn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function vE(t,e,n){return po&21?(Qn(n,e)||(n=CT(),et.lanes|=n,mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function cA(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var i=Mh.transition;Mh.transition={};try{t(!1),e()}finally{He=n,Mh.transition=i}}function TE(){return Dn().memoizedState}function dA(t,e,n){var i=Tr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},EE(t))wE(e,n);else if(n=nE(t,e,n,i),n!==null){var r=Jt();Kn(n,t,i,r),SE(n,e,i)}}function hA(t,e,n){var i=Tr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(EE(t))wE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Qn(u,a)){var d=e.interleaved;d===null?(r.next=r,om(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=nE(t,e,r,i),n!==null&&(r=Jt(),Kn(n,t,i,r),SE(n,e,i))}}function EE(t){var e=t.alternate;return t===et||e!==null&&e===et}function wE(t,e){rl=Gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function SE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,$p(t,n)}}var Hc={readContext:Ln,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},fA={readContext:Ln,useCallback:function(t,e){return li().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:A_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hc(4194308,4,mE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var n=li();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=li();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=dA.bind(null,et,t),[i.memoizedState,t]},useRef:function(t){var e=li();return t={current:t},e.memoizedState=t},useState:x_,useDebugValue:pm,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=x_(!1),e=t[0];return t=cA.bind(null,t[1]),li().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=et,r=li();if(Xe){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),xt===null)throw Error(ee(349));po&30||aE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,A_(uE.bind(null,i,o,t),[t]),i.flags|=2048,Pl(9,lE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=li(),e=xt.identifierPrefix;if(Xe){var n=bi,i=Di;n=(i&~(1<<32-Wn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=xl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pA={readContext:Ln,useCallback:_E,useContext:Ln,useEffect:fm,useImperativeHandle:gE,useInsertionEffect:fE,useLayoutEffect:pE,useMemo:yE,useReducer:Lh,useRef:hE,useState:function(){return Lh(Al)},useDebugValue:pm,useDeferredValue:function(t){var e=Dn();return vE(e,pt.memoizedState,t)},useTransition:function(){var t=Lh(Al)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:sE,useId:TE,unstable_isNewReconciler:!1},mA={readContext:Ln,useCallback:_E,useContext:Ln,useEffect:fm,useImperativeHandle:gE,useInsertionEffect:fE,useLayoutEffect:pE,useMemo:yE,useReducer:Dh,useRef:hE,useState:function(){return Dh(Al)},useDebugValue:pm,useDeferredValue:function(t){var e=Dn();return pt===null?e.memoizedState=t:vE(e,pt.memoizedState,t)},useTransition:function(){var t=Dh(Al)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:sE,useId:TE,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Id={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Tr(t),o=Vi(i,r);o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,r),e!==null&&(Kn(e,t,r,i),cc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Tr(t),o=Vi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,r),e!==null&&(Kn(e,t,r,i),cc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=Tr(t),r=Vi(n,i);r.tag=2,e!=null&&(r.callback=e),e=yr(t,r,i),e!==null&&(Kn(e,t,i,n),cc(e,t,i))}};function P_(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Tl(n,i)||!Tl(r,o):!0}function CE(t,e,n){var i=!1,r=Pr,o=e.contextType;return typeof o=="object"&&o!==null?o=Ln(o):(r=ln(e)?ho:Gt.current,i=e.contextTypes,o=(i=i!=null)?bs(t,r):Pr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Id,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function R_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Id.enqueueReplaceState(e,e.state,null)}function Nf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},sm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Ln(o):(o=ln(e)?ho:Gt.current,r.context=bs(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Rf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Id.enqueueReplaceState(r,r.state,null),Bc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Os(t,e){try{var n="",i=e;do n+=HI(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function bh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gA=typeof WeakMap=="function"?WeakMap:Map;function IE(t,e,n){n=Vi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){$c||($c=!0,zf=i),kf(t,e)},n}function xE(t,e,n){n=Vi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){kf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){kf(t,e),typeof i!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function N_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new gA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=NA.bind(null,t,e,n),e.then(t,t))}function k_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vi(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var _A=$i.ReactCurrentOwner,sn=!1;function Kt(t,e,n,i){e.child=t===null?tE(e,null,n,i):Fs(e,t.child,n,i)}function L_(t,e,n,i,r){n=n.render;var o=e.ref;return Is(e,r),i=dm(t,e,n,i,o,r),n=hm(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bi(t,e,r)):(Xe&&n&&jp(e),e.flags|=1,Kt(t,e,i,r),e.child)}function D_(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!wm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,AE(t,e,o,i,r)):(t=gc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(a,i)&&t.ref===e.ref)return Bi(t,e,r)}return e.flags|=1,t=Er(o,i),t.ref=e.ref,t.return=e,e.child=t}function AE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Tl(o,i)&&t.ref===e.ref)if(sn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Bi(t,e,r)}return Mf(t,e,n,i,r)}function PE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ys,hn),hn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(ys,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ke(ys,hn),hn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ke(ys,hn),hn|=i;return Kt(t,e,r,n),e.child}function RE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mf(t,e,n,i,r){var o=ln(n)?ho:Gt.current;return o=bs(e,o),Is(e,r),n=dm(t,e,n,i,o,r),i=hm(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bi(t,e,r)):(Xe&&i&&jp(e),e.flags|=1,Kt(t,e,n,r),e.child)}function b_(t,e,n,i,r){if(ln(n)){var o=!0;bc(e)}else o=!1;if(Is(e,r),e.stateNode===null)fc(t,e),CE(e,n,i),Nf(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ln(h):(h=ln(n)?ho:Gt.current,h=bs(e,h));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==h)&&R_(e,a,i,h),ar=!1;var v=e.memoizedState;a.state=v,Bc(e,i,a,r),d=e.memoizedState,u!==i||v!==d||an.current||ar?(typeof g=="function"&&(Rf(e,n,g,i),d=e.memoizedState),(u=ar||P_(e,n,u,i,v,d,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=h,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,iE(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Gn(e.type,u),a.props=h,y=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ln(d):(d=ln(n)?ho:Gt.current,d=bs(e,d));var C=n.getDerivedStateFromProps;(g=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||v!==d)&&R_(e,a,i,d),ar=!1,v=e.memoizedState,a.state=v,Bc(e,i,a,r);var b=e.memoizedState;u!==y||v!==b||an.current||ar?(typeof C=="function"&&(Rf(e,n,C,i),b=e.memoizedState),(h=ar||P_(e,n,h,i,v,b,d)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=d,i=h):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Lf(t,e,n,i,o,r)}function Lf(t,e,n,i,r,o){RE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&T_(e,n,!1),Bi(t,e,o);i=e.stateNode,_A.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Fs(e,t.child,null,o),e.child=Fs(e,null,u,o)):Kt(t,e,u,o),e.memoizedState=i.state,r&&T_(e,n,!0),e.child}function NE(t){var e=t.stateNode;e.pendingContext?v_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&v_(t,e.context,!1),am(t,e.containerInfo)}function V_(t,e,n,i,r){return Vs(),tm(r),e.flags|=256,Kt(t,e,n,i),e.child}var Df={dehydrated:null,treeContext:null,retryLane:0};function bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function kE(t,e,n){var i=e.pendingProps,r=je.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ke(je,r&1),t===null)return Af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Pd(a,i,0,null),t=co(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=bf(n),e.memoizedState=Df,t):mm(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return yA(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Er(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Er(u,o):(o=co(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?bf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Df,i}return o=t.child,t=o.sibling,i=Er(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function mm(t,e){return e=Pd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,n,i){return i!==null&&tm(i),Fs(e,t.child,null,n),t=mm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yA(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=bh(Error(ee(422))),qu(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Pd({mode:"visible",children:i.children},r,0,null),o=co(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Fs(e,t.child,null,a),e.child.memoizedState=bf(a),e.memoizedState=Df,o);if(!(e.mode&1))return qu(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=bh(o,i,void 0),qu(t,e,a,i)}if(u=(a&t.childLanes)!==0,sn||u){if(i=xt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Oi(t,r),Kn(i,t,r,-1))}return Em(),i=bh(Error(ee(421))),qu(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=kA.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,fn=_r(r.nextSibling),pn=e,Xe=!0,qn=null,t!==null&&(xn[An++]=Di,xn[An++]=bi,xn[An++]=fo,Di=t.id,bi=t.overflow,fo=e),e=mm(e,i.children),e.flags|=4096,e)}function F_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Pf(t.return,e,n)}function Vh(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function ME(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Kt(t,e,i.children,n),i=je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F_(t,n,e);else if(t.tag===19)F_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ke(je,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&zc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Vh(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&zc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Vh(e,!0,n,null,o);break;case"together":Vh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vA(t,e,n){switch(e.tag){case 3:NE(e),Vs();break;case 5:rE(e);break;case 1:ln(e.type)&&bc(e);break;case 4:am(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ke(Uc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ke(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?kE(t,e,n):(Ke(je,je.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Ke(je,je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ME(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ke(je,je.current),i)break;return null;case 22:case 23:return e.lanes=0,PE(t,e,n)}return Bi(t,e,n)}var LE,Vf,DE,bE;LE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vf=function(){};DE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ao(fi.current);var o=null;switch(n){case"input":r=rf(t,r),i=rf(t,i),o=[];break;case"select":r=tt({},r,{value:void 0}),i=tt({},i,{value:void 0}),o=[];break;case"textarea":r=af(t,r),i=af(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Lc)}uf(n,i);var a;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var u=r[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(fl.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var d=i[h];if(u=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(fl.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Je("scroll",t),o||u===d||(o=[])):(o=o||[]).push(h,d))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};bE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ba(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function TA(t,e,n){var i=e.pendingProps;switch(em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return ln(e.type)&&Dc(),Vt(e),null;case 3:return i=e.stateNode,Us(),Qe(an),Qe(Gt),um(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(qf(qn),qn=null))),Vf(t,e),Vt(e),null;case 5:lm(e);var r=ao(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)DE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Vt(e),null}if(t=ao(fi.current),Gu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[di]=e,i[Sl]=o,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(r=0;r<Ja.length;r++)Je(Ja[r],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Wg(i,o),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Je("invalid",i);break;case"textarea":Jg(i,o),Je("invalid",i)}uf(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&zu(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&zu(i.textContent,u,t),r=["children",""+u]):fl.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Je("scroll",i)}switch(n){case"input":Lu(i),Kg(i,o,!0);break;case"textarea":Lu(i),Zg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Lc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[di]=e,t[Sl]=i,LE(t,e,!1,!1),e.stateNode=t;e:{switch(a=cf(n,i),n){case"dialog":Je("cancel",t),Je("close",t),r=i;break;case"iframe":case"object":case"embed":Je("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ja.length;r++)Je(Ja[r],t);r=i;break;case"source":Je("error",t),r=i;break;case"img":case"image":case"link":Je("error",t),Je("load",t),r=i;break;case"details":Je("toggle",t),r=i;break;case"input":Wg(t,i),r=rf(t,i),Je("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=tt({},i,{value:void 0}),Je("invalid",t);break;case"textarea":Jg(t,i),r=af(t,i),Je("invalid",t);break;default:r=i}uf(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?hT(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&cT(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&pl(t,d):typeof d=="number"&&pl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Je("scroll",t):d!=null&&Op(t,o,d,a))}switch(n){case"input":Lu(t),Kg(t,i,!1);break;case"textarea":Lu(t),Zg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ar(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Es(t,!!i.multiple,o,!1):i.defaultValue!=null&&Es(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Lc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)bE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ao(Il.current),ao(fi.current),Gu(e)){if(i=e.stateNode,n=e.memoizedProps,i[di]=e,(o=i.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:zu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[di]=e,e.stateNode=i}return Vt(e),null;case 13:if(Qe(je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&fn!==null&&e.mode&1&&!(e.flags&128))jT(),Vs(),e.flags|=98560,o=!1;else if(o=Gu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[di]=e}else Vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),o=!1}else qn!==null&&(qf(qn),qn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?gt===0&&(gt=3):Em())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Us(),Vf(t,e),t===null&&El(e.stateNode.containerInfo),Vt(e),null;case 10:return rm(e.type._context),Vt(e),null;case 17:return ln(e.type)&&Dc(),Vt(e),null;case 19:if(Qe(je),o=e.memoizedState,o===null)return Vt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Ba(o,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zc(t),a!==null){for(e.flags|=128,Ba(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(je,je.current&1|2),e.child}t=t.sibling}o.tail!==null&&lt()>Bs&&(e.flags|=128,i=!0,Ba(o,!1),e.lanes=4194304)}else{if(!i)if(t=zc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ba(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Vt(e),null}else 2*lt()-o.renderingStartTime>Bs&&n!==1073741824&&(e.flags|=128,i=!0,Ba(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=lt(),e.sibling=null,n=je.current,Ke(je,i?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Tm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?hn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function EA(t,e){switch(em(e),e.tag){case 1:return ln(e.type)&&Dc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Us(),Qe(an),Qe(Gt),um(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lm(e),null;case 13:if(Qe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(je),null;case 4:return Us(),null;case 10:return rm(e.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var $u=!1,Ot=!1,wA=typeof WeakSet=="function"?WeakSet:Set,le=null;function _s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){rt(t,e,i)}else n.current=null}function Ff(t,e,n){try{n()}catch(i){rt(t,e,i)}}var U_=!1;function SA(t,e){if(Tf=Nc,t=BT(),Xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,h=0,g=0,y=t,v=null;t:for(;;){for(var C;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(d=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(C=y.firstChild)!==null;)v=y,y=C;for(;;){if(y===t)break t;if(v===n&&++h===r&&(u=a),v===o&&++g===i&&(d=a),(C=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=C}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ef={focusedElem:t,selectionRange:n},Nc=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var D=b.memoizedProps,U=b.memoizedState,x=e.stateNode,R=x.getSnapshotBeforeUpdate(e.elementType===e.type?D:Gn(e.type,D),U);x.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(G){rt(e,e.return,G)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return b=U_,U_=!1,b}function ol(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Ff(e,n,o)}r=r.next}while(r!==i)}}function xd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VE(t){var e=t.alternate;e!==null&&(t.alternate=null,VE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[di],delete e[Sl],delete e[Cf],delete e[oA],delete e[sA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FE(t){return t.tag===5||t.tag===3||t.tag===4}function O_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Of(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lc));else if(i!==4&&(t=t.child,t!==null))for(Of(t,e,n),t=t.sibling;t!==null;)Of(t,e,n),t=t.sibling}function Bf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}var Pt=null,Hn=!1;function or(t,e,n){for(n=n.child;n!==null;)UE(t,e,n),n=n.sibling}function UE(t,e,n){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(yd,n)}catch{}switch(n.tag){case 5:Ot||_s(n,e);case 6:var i=Pt,r=Hn;Pt=null,or(t,e,n),Pt=i,Hn=r,Pt!==null&&(Hn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Hn?(t=Pt,n=n.stateNode,t.nodeType===8?Rh(t.parentNode,n):t.nodeType===1&&Rh(t,n),yl(t)):Rh(Pt,n.stateNode));break;case 4:i=Pt,r=Hn,Pt=n.stateNode.containerInfo,Hn=!0,or(t,e,n),Pt=i,Hn=r;break;case 0:case 11:case 14:case 15:if(!Ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ff(n,e,a),r=r.next}while(r!==i)}or(t,e,n);break;case 1:if(!Ot&&(_s(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){rt(n,e,u)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(Ot=(i=Ot)||n.memoizedState!==null,or(t,e,n),Ot=i):or(t,e,n);break;default:or(t,e,n)}}function B_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wA),e.forEach(function(i){var r=MA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Pt=u.stateNode,Hn=!1;break e;case 3:Pt=u.stateNode.containerInfo,Hn=!0;break e;case 4:Pt=u.stateNode.containerInfo,Hn=!0;break e}u=u.return}if(Pt===null)throw Error(ee(160));UE(o,a,r),Pt=null,Hn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(h){rt(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OE(e,t),e=e.sibling}function OE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),ai(t),i&4){try{ol(3,t,t.return),xd(3,t)}catch(D){rt(t,t.return,D)}try{ol(5,t,t.return)}catch(D){rt(t,t.return,D)}}break;case 1:zn(e,t),ai(t),i&512&&n!==null&&_s(n,n.return);break;case 5:if(zn(e,t),ai(t),i&512&&n!==null&&_s(n,n.return),t.flags&32){var r=t.stateNode;try{pl(r,"")}catch(D){rt(t,t.return,D)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&aT(r,o),cf(u,a);var h=cf(u,o);for(a=0;a<d.length;a+=2){var g=d[a],y=d[a+1];g==="style"?hT(r,y):g==="dangerouslySetInnerHTML"?cT(r,y):g==="children"?pl(r,y):Op(r,g,y,h)}switch(u){case"input":of(r,o);break;case"textarea":lT(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var C=o.value;C!=null?Es(r,!!o.multiple,C,!1):v!==!!o.multiple&&(o.defaultValue!=null?Es(r,!!o.multiple,o.defaultValue,!0):Es(r,!!o.multiple,o.multiple?[]:"",!1))}r[Sl]=o}catch(D){rt(t,t.return,D)}}break;case 6:if(zn(e,t),ai(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(D){rt(t,t.return,D)}}break;case 3:if(zn(e,t),ai(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{yl(e.containerInfo)}catch(D){rt(t,t.return,D)}break;case 4:zn(e,t),ai(t);break;case 13:zn(e,t),ai(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(ym=lt())),i&4&&B_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(h=Ot)||g,zn(e,t),Ot=h):zn(e,t),ai(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(le=t,g=t.child;g!==null;){for(y=le=g;le!==null;){switch(v=le,C=v.child,v.tag){case 0:case 11:case 14:case 15:ol(4,v,v.return);break;case 1:_s(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(D){rt(i,n,D)}}break;case 5:_s(v,v.return);break;case 22:if(v.memoizedState!==null){G_(y);continue}}C!==null?(C.return=v,le=C):G_(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{r=y.stateNode,h?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=dT("display",a))}catch(D){rt(t,t.return,D)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(D){rt(t,t.return,D)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:zn(e,t),ai(t),i&4&&B_(t);break;case 21:break;default:zn(e,t),ai(t)}}function ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(FE(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(pl(r,""),i.flags&=-33);var o=O_(t);Bf(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=O_(t);Of(t,u,a);break;default:throw Error(ee(161))}}catch(d){rt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CA(t,e,n){le=t,BE(t)}function BE(t,e,n){for(var i=(t.mode&1)!==0;le!==null;){var r=le,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||$u;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||Ot;u=$u;var h=Ot;if($u=a,(Ot=d)&&!h)for(le=r;le!==null;)a=le,d=a.child,a.tag===22&&a.memoizedState!==null?H_(r):d!==null?(d.return=a,le=d):H_(r);for(;o!==null;)le=o,BE(o),o=o.sibling;le=r,$u=u,Ot=h}z_(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,le=o):z_(t)}}function z_(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||xd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ot)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&I_(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I_(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&yl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Ot||e.flags&512&&Uf(e)}catch(v){rt(e,e.return,v)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function G_(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function H_(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xd(4,e)}catch(d){rt(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){rt(e,r,d)}}var o=e.return;try{Uf(e)}catch(d){rt(e,o,d)}break;case 5:var a=e.return;try{Uf(e)}catch(d){rt(e,a,d)}}}catch(d){rt(e,e.return,d)}if(e===t){le=null;break}var u=e.sibling;if(u!==null){u.return=e.return,le=u;break}le=e.return}}var IA=Math.ceil,qc=$i.ReactCurrentDispatcher,gm=$i.ReactCurrentOwner,kn=$i.ReactCurrentBatchConfig,be=0,xt=null,ht=null,kt=0,hn=0,ys=Vr(0),gt=0,Rl=null,mo=0,Ad=0,_m=0,sl=null,on=null,ym=0,Bs=1/0,Mi=null,$c=!1,zf=null,vr=null,Wu=!1,dr=null,Wc=0,al=0,Gf=null,pc=-1,mc=0;function Jt(){return be&6?lt():pc!==-1?pc:pc=lt()}function Tr(t){return t.mode&1?be&2&&kt!==0?kt&-kt:lA.transition!==null?(mc===0&&(mc=CT()),mc):(t=He,t!==0||(t=window.event,t=t===void 0?16:kT(t.type)),t):1}function Kn(t,e,n,i){if(50<al)throw al=0,Gf=null,Error(ee(185));Gl(t,n,i),(!(be&2)||t!==xt)&&(t===xt&&(!(be&2)&&(Ad|=n),gt===4&&ur(t,kt)),un(t,i),n===1&&be===0&&!(e.mode&1)&&(Bs=lt()+500,Sd&&Fr()))}function un(t,e){var n=t.callbackNode;lx(t,e);var i=Rc(t,t===xt?kt:0);if(i===0)n!==null&&Xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Xg(n),e===1)t.tag===0?aA(q_.bind(null,t)):YT(q_.bind(null,t)),iA(function(){!(be&6)&&Fr()}),n=null;else{switch(IT(i)){case 1:n=qp;break;case 4:n=wT;break;case 16:n=Pc;break;case 536870912:n=ST;break;default:n=Pc}n=JE(n,zE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zE(t,e){if(pc=-1,mc=0,be&6)throw Error(ee(327));var n=t.callbackNode;if(xs()&&t.callbackNode!==n)return null;var i=Rc(t,t===xt?kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Kc(t,i);else{e=i;var r=be;be|=2;var o=HE();(xt!==t||kt!==e)&&(Mi=null,Bs=lt()+500,uo(t,e));do try{PA();break}catch(u){GE(t,u)}while(!0);im(),qc.current=o,be=r,ht!==null?e=0:(xt=null,kt=0,e=gt)}if(e!==0){if(e===2&&(r=mf(t),r!==0&&(i=r,e=Hf(t,r))),e===1)throw n=Rl,uo(t,0),ur(t,i),un(t,lt()),n;if(e===6)ur(t,i);else{if(r=t.current.alternate,!(i&30)&&!xA(r)&&(e=Kc(t,i),e===2&&(o=mf(t),o!==0&&(i=o,e=Hf(t,o))),e===1))throw n=Rl,uo(t,0),ur(t,i),un(t,lt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:no(t,on,Mi);break;case 3:if(ur(t,i),(i&130023424)===i&&(e=ym+500-lt(),10<e)){if(Rc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Sf(no.bind(null,t,on,Mi),e);break}no(t,on,Mi);break;case 4:if(ur(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Wn(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*IA(i/1960))-i,10<i){t.timeoutHandle=Sf(no.bind(null,t,on,Mi),i);break}no(t,on,Mi);break;case 5:no(t,on,Mi);break;default:throw Error(ee(329))}}}return un(t,lt()),t.callbackNode===n?zE.bind(null,t):null}function Hf(t,e){var n=sl;return t.current.memoizedState.isDehydrated&&(uo(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=on,on=n,e!==null&&qf(e)),t}function qf(t){on===null?on=t:on.push.apply(on,t)}function xA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Qn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~_m,e&=~Ad,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),i=1<<n;t[n]=-1,e&=~i}}function q_(t){if(be&6)throw Error(ee(327));xs();var e=Rc(t,0);if(!(e&1))return un(t,lt()),null;var n=Kc(t,e);if(t.tag!==0&&n===2){var i=mf(t);i!==0&&(e=i,n=Hf(t,i))}if(n===1)throw n=Rl,uo(t,0),ur(t,e),un(t,lt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,no(t,on,Mi),un(t,lt()),null}function vm(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Bs=lt()+500,Sd&&Fr())}}function go(t){dr!==null&&dr.tag===0&&!(be&6)&&xs();var e=be;be|=1;var n=kn.transition,i=He;try{if(kn.transition=null,He=1,t)return t()}finally{He=i,kn.transition=n,be=e,!(be&6)&&Fr()}}function Tm(){hn=ys.current,Qe(ys)}function uo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nA(n)),ht!==null)for(n=ht.return;n!==null;){var i=n;switch(em(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Dc();break;case 3:Us(),Qe(an),Qe(Gt),um();break;case 5:lm(i);break;case 4:Us();break;case 13:Qe(je);break;case 19:Qe(je);break;case 10:rm(i.type._context);break;case 22:case 23:Tm()}n=n.return}if(xt=t,ht=t=Er(t.current,null),kt=hn=e,gt=0,Rl=null,_m=Ad=mo=0,on=sl=null,so!==null){for(e=0;e<so.length;e++)if(n=so[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}so=null}return t}function GE(t,e){do{var n=ht;try{if(im(),dc.current=Hc,Gc){for(var i=et.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Gc=!1}if(po=0,Ct=pt=et=null,rl=!1,xl=0,gm.current=null,n===null||n.return===null){gt=1,Rl=e,ht=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var C=k_(a);if(C!==null){C.flags&=-257,M_(C,a,u,o,e),C.mode&1&&N_(o,h,e),e=C,d=h;var b=e.updateQueue;if(b===null){var D=new Set;D.add(d),e.updateQueue=D}else b.add(d);break e}else{if(!(e&1)){N_(o,h,e),Em();break e}d=Error(ee(426))}}else if(Xe&&u.mode&1){var U=k_(a);if(U!==null){!(U.flags&65536)&&(U.flags|=256),M_(U,a,u,o,e),tm(Os(d,u));break e}}o=d=Os(d,u),gt!==4&&(gt=2),sl===null?sl=[o]:sl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=IE(o,d,e);C_(o,x);break e;case 1:u=d;var R=o.type,M=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(vr===null||!vr.has(M)))){o.flags|=65536,e&=-e,o.lanes|=e;var G=xE(o,u,e);C_(o,G);break e}}o=o.return}while(o!==null)}$E(n)}catch(Z){e=Z,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function HE(){var t=qc.current;return qc.current=Hc,t===null?Hc:t}function Em(){(gt===0||gt===3||gt===2)&&(gt=4),xt===null||!(mo&268435455)&&!(Ad&268435455)||ur(xt,kt)}function Kc(t,e){var n=be;be|=2;var i=HE();(xt!==t||kt!==e)&&(Mi=null,uo(t,e));do try{AA();break}catch(r){GE(t,r)}while(!0);if(im(),be=n,qc.current=i,ht!==null)throw Error(ee(261));return xt=null,kt=0,gt}function AA(){for(;ht!==null;)qE(ht)}function PA(){for(;ht!==null&&!jI();)qE(ht)}function qE(t){var e=KE(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?$E(t):ht=e,gm.current=null}function $E(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EA(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ht=null;return}}else if(n=TA(n,e,hn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);gt===0&&(gt=5)}function no(t,e,n){var i=He,r=kn.transition;try{kn.transition=null,He=1,RA(t,e,n,i)}finally{kn.transition=r,He=i}return null}function RA(t,e,n,i){do xs();while(dr!==null);if(be&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ux(t,o),t===xt&&(ht=xt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wu||(Wu=!0,JE(Pc,function(){return xs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var a=He;He=1;var u=be;be|=4,gm.current=null,SA(t,n),OE(n,t),Zx(Ef),Nc=!!Tf,Ef=Tf=null,t.current=n,CA(n),ex(),be=u,He=a,kn.transition=o}else t.current=n;if(Wu&&(Wu=!1,dr=t,Wc=r),o=t.pendingLanes,o===0&&(vr=null),ix(n.stateNode),un(t,lt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if($c)throw $c=!1,t=zf,zf=null,t;return Wc&1&&t.tag!==0&&xs(),o=t.pendingLanes,o&1?t===Gf?al++:(al=0,Gf=t):al=0,Fr(),null}function xs(){if(dr!==null){var t=IT(Wc),e=kn.transition,n=He;try{if(kn.transition=null,He=16>t?16:t,dr===null)var i=!1;else{if(t=dr,dr=null,Wc=0,be&6)throw Error(ee(331));var r=be;for(be|=4,le=t.current;le!==null;){var o=le,a=o.child;if(le.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(le=h;le!==null;){var g=le;switch(g.tag){case 0:case 11:case 15:ol(8,g,o)}var y=g.child;if(y!==null)y.return=g,le=y;else for(;le!==null;){g=le;var v=g.sibling,C=g.return;if(VE(g),g===h){le=null;break}if(v!==null){v.return=C,le=v;break}le=C}}}var b=o.alternate;if(b!==null){var D=b.child;if(D!==null){b.child=null;do{var U=D.sibling;D.sibling=null,D=U}while(D!==null)}}le=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,le=a;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,le=x;break e}le=o.return}}var R=t.current;for(le=R;le!==null;){a=le;var M=a.child;if(a.subtreeFlags&2064&&M!==null)M.return=a,le=M;else e:for(a=R;le!==null;){if(u=le,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:xd(9,u)}}catch(Z){rt(u,u.return,Z)}if(u===a){le=null;break e}var G=u.sibling;if(G!==null){G.return=u.return,le=G;break e}le=u.return}}if(be=r,Fr(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(yd,t)}catch{}i=!0}return i}finally{He=n,kn.transition=e}}return!1}function $_(t,e,n){e=Os(n,e),e=IE(t,e,1),t=yr(t,e,1),e=Jt(),t!==null&&(Gl(t,1,e),un(t,e))}function rt(t,e,n){if(t.tag===3)$_(t,t,n);else for(;e!==null;){if(e.tag===3){$_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vr===null||!vr.has(i))){t=Os(n,t),t=xE(e,t,1),e=yr(e,t,1),t=Jt(),e!==null&&(Gl(e,1,t),un(e,t));break}}e=e.return}}function NA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(kt&n)===n&&(gt===4||gt===3&&(kt&130023424)===kt&&500>lt()-ym?uo(t,0):_m|=n),un(t,e)}function WE(t,e){e===0&&(t.mode&1?(e=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):e=1);var n=Jt();t=Oi(t,e),t!==null&&(Gl(t,e,n),un(t,n))}function kA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WE(t,n)}function MA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),WE(t,n)}var KE;KE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,vA(t,e,n);sn=!!(t.flags&131072)}else sn=!1,Xe&&e.flags&1048576&&QT(e,Fc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;fc(t,e),t=e.pendingProps;var r=bs(e,Gt.current);Is(e,n),r=dm(null,e,i,t,r,n);var o=hm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(i)?(o=!0,bc(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,sm(e),r.updater=Id,e.stateNode=r,r._reactInternals=e,Nf(e,i,t,n),e=Lf(null,e,i,!0,o,n)):(e.tag=0,Xe&&o&&jp(e),Kt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=DA(i),t=Gn(i,t),r){case 0:e=Mf(null,e,i,t,n);break e;case 1:e=b_(null,e,i,t,n);break e;case 11:e=L_(null,e,i,t,n);break e;case 14:e=D_(null,e,i,Gn(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),Mf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),b_(t,e,i,r,n);case 3:e:{if(NE(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,iE(t,e),Bc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Os(Error(ee(423)),e),e=V_(t,e,i,n,r);break e}else if(i!==r){r=Os(Error(ee(424)),e),e=V_(t,e,i,n,r);break e}else for(fn=_r(e.stateNode.containerInfo.firstChild),pn=e,Xe=!0,qn=null,n=tE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vs(),i===r){e=Bi(t,e,n);break e}Kt(t,e,i,n)}e=e.child}return e;case 5:return rE(e),t===null&&Af(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,wf(i,r)?a=null:o!==null&&wf(i,o)&&(e.flags|=32),RE(t,e),Kt(t,e,a,n),e.child;case 6:return t===null&&Af(e),null;case 13:return kE(t,e,n);case 4:return am(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fs(e,null,i,n):Kt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),L_(t,e,i,r,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Ke(Uc,i._currentValue),i._currentValue=a,o!==null)if(Qn(o.value,a)){if(o.children===r.children&&!an.current){e=Bi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Vi(-1,n&-n),d.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Pf(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Pf(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Kt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Is(e,n),r=Ln(r),i=i(r),e.flags|=1,Kt(t,e,i,n),e.child;case 14:return i=e.type,r=Gn(i,e.pendingProps),r=Gn(i.type,r),D_(t,e,i,r,n);case 15:return AE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),fc(t,e),e.tag=1,ln(i)?(t=!0,bc(e)):t=!1,Is(e,n),CE(e,i,r),Nf(e,i,r,n),Lf(null,e,i,!0,t,n);case 19:return ME(t,e,n);case 22:return PE(t,e,n)}throw Error(ee(156,e.tag))};function JE(t,e){return ET(t,e)}function LA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,i){return new LA(t,e,n,i)}function wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DA(t){if(typeof t=="function")return wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zp)return 11;if(t===Gp)return 14}return 2}function Er(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")wm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ls:return co(n.children,r,o,e);case Bp:a=8,r|=8;break;case jh:return t=Nn(12,n,e,r|2),t.elementType=jh,t.lanes=o,t;case ef:return t=Nn(13,n,e,r),t.elementType=ef,t.lanes=o,t;case tf:return t=Nn(19,n,e,r),t.elementType=tf,t.lanes=o,t;case rT:return Pd(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nT:a=10;break e;case iT:a=9;break e;case zp:a=11;break e;case Gp:a=14;break e;case sr:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Nn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function co(t,e,n,i){return t=Nn(7,t,i,e),t.lanes=n,t}function Pd(t,e,n,i){return t=Nn(22,t,i,e),t.elementType=rT,t.lanes=n,t.stateNode={isHidden:!1},t}function Fh(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function Uh(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yh(0),this.expirationTimes=yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Sm(t,e,n,i,r,o,a,u,d){return t=new bA(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Nn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(o),t}function VA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ZE(t){if(!t)return Pr;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(ln(n))return ZT(t,n,e)}return e}function YE(t,e,n,i,r,o,a,u,d){return t=Sm(n,i,!0,t,r,o,a,u,d),t.context=ZE(null),n=t.current,i=Jt(),r=Tr(n),o=Vi(i,r),o.callback=e??null,yr(n,o,r),t.current.lanes=r,Gl(t,r,i),un(t,i),t}function Rd(t,e,n,i){var r=e.current,o=Jt(),a=Tr(r);return n=ZE(n),e.context===null?e.context=n:e.pendingContext=n,e=Vi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=yr(r,e,a),t!==null&&(Kn(t,r,a,o),cc(t,r,a)),a}function Jc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cm(t,e){W_(t,e),(t=t.alternate)&&W_(t,e)}function FA(){return null}var QE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Im(t){this._internalRoot=t}Nd.prototype.render=Im.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Rd(t,e,null,null)};Nd.prototype.unmount=Im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){Rd(null,t,null,null)}),e[Ui]=null}};function Nd(t){this._internalRoot=t}Nd.prototype.unstable_scheduleHydration=function(t){if(t){var e=PT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&NT(t)}};function xm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K_(){}function UA(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var h=Jc(a);o.call(h)}}var a=YE(e,i,t,0,null,!1,!1,"",K_);return t._reactRootContainer=a,t[Ui]=a.current,El(t.nodeType===8?t.parentNode:t),go(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var h=Jc(d);u.call(h)}}var d=Sm(t,0,!1,null,null,!1,!1,"",K_);return t._reactRootContainer=d,t[Ui]=d.current,El(t.nodeType===8?t.parentNode:t),go(function(){Rd(e,d,n,i)}),d}function Md(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=Jc(a);u.call(d)}}Rd(e,a,t,r)}else a=UA(n,e,t,r,i);return Jc(a)}xT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ka(e.pendingLanes);n!==0&&($p(e,n|1),un(e,lt()),!(be&6)&&(Bs=lt()+500,Fr()))}break;case 13:go(function(){var i=Oi(t,1);if(i!==null){var r=Jt();Kn(i,t,1,r)}}),Cm(t,1)}};Wp=function(t){if(t.tag===13){var e=Oi(t,134217728);if(e!==null){var n=Jt();Kn(e,t,134217728,n)}Cm(t,134217728)}};AT=function(t){if(t.tag===13){var e=Tr(t),n=Oi(t,e);if(n!==null){var i=Jt();Kn(n,t,e,i)}Cm(t,e)}};PT=function(){return He};RT=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};hf=function(t,e,n){switch(e){case"input":if(of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wd(i);if(!r)throw Error(ee(90));sT(i),of(i,r)}}}break;case"textarea":lT(t,n);break;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}};mT=vm;gT=go;var OA={usingClientEntryPoint:!1,Events:[ql,hs,wd,fT,pT,vm]},za={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BA={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vT(t),t===null?null:t.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||FA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{yd=Ku.inject(BA),hi=Ku}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OA;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(e))throw Error(ee(200));return VA(t,e,null,n)};gn.createRoot=function(t,e){if(!xm(t))throw Error(ee(299));var n=!1,i="",r=QE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Sm(t,1,!1,null,null,n,!1,i,r),t[Ui]=e.current,El(t.nodeType===8?t.parentNode:t),new Im(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=vT(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return go(t)};gn.hydrate=function(t,e,n){if(!kd(e))throw Error(ee(200));return Md(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!xm(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=QE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=YE(e,null,t,1,n??null,r,!1,o,a),t[Ui]=e.current,El(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Nd(e)};gn.render=function(t,e,n){if(!kd(e))throw Error(ee(200));return Md(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!kd(t))throw Error(ee(40));return t._reactRootContainer?(go(function(){Md(null,null,t,!1,function(){t._reactRootContainer=null,t[Ui]=null})}),!0):!1};gn.unstable_batchedUpdates=vm;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!kd(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Md(t,e,n,!1,i)};gn.version="18.3.1-next-f1338f8080-20240426";function XE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XE)}catch(t){console.error(t)}}XE(),X0.exports=gn;var zA=X0.exports,J_=zA;Qh.createRoot=J_.createRoot,Qh.hydrateRoot=J_.hydrateRoot;const GA=()=>{};var Z_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,h=d?t[r+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|h>>6,C=h&63;d||(C=64,a||(v=64)),i.push(n[g],n[y],n[v],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||h==null||y==null)throw new qA;const v=o<<2|u>>4;if(i.push(v),h!==64){const C=u<<4&240|h>>2;if(i.push(C),y!==64){const b=h<<6&192|y;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $A=function(t){const e=jE(t);return ew.encodeByteArray(e,!0)},Zc=function(t){return $A(t).replace(/\./g,"")},WA=function(t){try{return ew.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=()=>KA().__FIREBASE_DEFAULTS__,ZA=()=>{if(typeof process>"u"||typeof Z_>"u")return;const t=Z_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WA(t[1]);return e&&JSON.parse(e)},Am=()=>{try{return GA()||JA()||ZA()||YA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QA=t=>{var e,n;return(n=(e=Am())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},XA=t=>{const e=QA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},tw=()=>{var t;return(t=Am())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eP(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zc(JSON.stringify(n)),Zc(JSON.stringify(a)),""].join(".")}const ll={};function nP(){const t={prod:[],emulator:[]};for(const e of Object.keys(ll))ll[e]?t.emulator.push(e):t.prod.push(e);return t}function iP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Y_=!1;function rP(t,e){if(typeof window>"u"||typeof document>"u"||!Pm(window.location.host)||ll[t]===e||ll[t]||Y_)return;ll[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=nP().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,C){v.setAttribute("width","24"),v.setAttribute("id",C),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Y_=!0,a()},v}function g(v,C){v.setAttribute("id",C),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=iP(i),C=n("text"),b=document.getElementById(C)||document.createElement("span"),D=n("learnmore"),U=document.getElementById(D)||document.createElement("a"),x=n("preprendIcon"),R=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;u(M),g(U,D);const G=h();d(R,x),M.append(R,b,U,G),document.body.appendChild(M)}o?(b.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sP(){var e;const t=(e=Am())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aP(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lP(){try{return typeof indexedDB=="object"}catch{return!1}}function uP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="FirebaseError";class Qs extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cP,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nw.prototype.create)}}class nw{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?dP(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Qs(r,u,i)}}function dP(t,e){return t.replace(hP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hP=/\{\$([^}]+)}/g;function Yc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Q_(o)&&Q_(a)){if(!Yc(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Q_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){return t&&t._delegate?t._delegate:t}class kl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new jA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mP(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pP(t){return t===io?void 0:t}function mP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const _P={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},yP=De.INFO,vP={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},TP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=vP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iw{constructor(e){this.name=e,this._logLevel=yP,this._logHandler=TP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const EP=(t,e)=>e.some(n=>t instanceof n);let X_,j_;function wP(){return X_||(X_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SP(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rw=new WeakMap,$f=new WeakMap,ow=new WeakMap,Oh=new WeakMap,Rm=new WeakMap;function CP(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(wr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&rw.set(n,t)}).catch(()=>{}),Rm.set(e,t),e}function IP(t){if($f.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});$f.set(t,e)}let Wf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ow.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xP(t){Wf=t(Wf)}function AP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bh(this),e,...n);return ow.set(i,e.sort?e.sort():[e]),wr(i)}:SP().includes(t)?function(...e){return t.apply(Bh(this),e),wr(rw.get(this))}:function(...e){return wr(t.apply(Bh(this),e))}}function PP(t){return typeof t=="function"?AP(t):(t instanceof IDBTransaction&&IP(t),EP(t,wP())?new Proxy(t,Wf):t)}function wr(t){if(t instanceof IDBRequest)return CP(t);if(Oh.has(t))return Oh.get(t);const e=PP(t);return e!==t&&(Oh.set(t,e),Rm.set(e,t)),e}const Bh=t=>Rm.get(t);function RP(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=wr(a);return i&&a.addEventListener("upgradeneeded",d=>{i(wr(a.result),d.oldVersion,d.newVersion,wr(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const NP=["get","getKey","getAll","getAllKeys","count"],kP=["put","add","delete","clear"],zh=new Map;function ey(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=kP.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||NP.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),r&&d.done]))[0]};return zh.set(e,o),o}xP(t=>({...t,get:(e,n,i)=>ey(e,n)||t.get(e,n,i),has:(e,n)=>!!ey(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LP(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function LP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kf="@firebase/app",ty="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new iw("@firebase/app"),DP="@firebase/app-compat",bP="@firebase/analytics-compat",VP="@firebase/analytics",FP="@firebase/app-check-compat",UP="@firebase/app-check",OP="@firebase/auth",BP="@firebase/auth-compat",zP="@firebase/database",GP="@firebase/data-connect",HP="@firebase/database-compat",qP="@firebase/functions",$P="@firebase/functions-compat",WP="@firebase/installations",KP="@firebase/installations-compat",JP="@firebase/messaging",ZP="@firebase/messaging-compat",YP="@firebase/performance",QP="@firebase/performance-compat",XP="@firebase/remote-config",jP="@firebase/remote-config-compat",e1="@firebase/storage",t1="@firebase/storage-compat",n1="@firebase/firestore",i1="@firebase/ai",r1="@firebase/firestore-compat",o1="firebase",s1="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]",a1={[Kf]:"fire-core",[DP]:"fire-core-compat",[VP]:"fire-analytics",[bP]:"fire-analytics-compat",[UP]:"fire-app-check",[FP]:"fire-app-check-compat",[OP]:"fire-auth",[BP]:"fire-auth-compat",[zP]:"fire-rtdb",[GP]:"fire-data-connect",[HP]:"fire-rtdb-compat",[qP]:"fire-fn",[$P]:"fire-fn-compat",[WP]:"fire-iid",[KP]:"fire-iid-compat",[JP]:"fire-fcm",[ZP]:"fire-fcm-compat",[YP]:"fire-perf",[QP]:"fire-perf-compat",[XP]:"fire-rc",[jP]:"fire-rc-compat",[e1]:"fire-gcs",[t1]:"fire-gcs-compat",[n1]:"fire-fst",[r1]:"fire-fst-compat",[i1]:"fire-vertex","fire-js":"fire-js",[o1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Map,l1=new Map,Zf=new Map;function ny(t,e){try{t.container.addComponent(e)}catch(n){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qc(t){const e=t.name;if(Zf.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;Zf.set(e,t);for(const n of Ml.values())ny(n,t);for(const n of l1.values())ny(n,t);return!0}function u1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function c1(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new nw("app","Firebase",d1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=s1;function sw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Jf,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Sr.create("bad-app-name",{appName:String(r)});if(n||(n=tw()),!n)throw Sr.create("no-options");const o=Ml.get(r);if(o){if(Yc(n,o.options)&&Yc(i,o.config))return o;throw Sr.create("duplicate-app",{appName:r})}const a=new gP(r);for(const d of Zf.values())a.addComponent(d);const u=new h1(n,i,a);return Ml.set(r,u),u}function p1(t=Jf){const e=Ml.get(t);if(!e&&t===Jf&&tw())return sw();if(!e)throw Sr.create("no-app",{appName:t});return e}function iy(){return Array.from(Ml.values())}function As(t,e,n){let i=a1[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(a.join(" "));return}Qc(new kl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firebase-heartbeat-database",g1=1,Ll="firebase-heartbeat-store";let Gh=null;function aw(){return Gh||(Gh=RP(m1,g1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function _1(t){try{const n=(await aw()).transaction(Ll),i=await n.objectStore(Ll).get(lw(t));return await n.done,i}catch(e){if(e instanceof Qs)zi.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zi.warn(n.message)}}}async function ry(t,e){try{const i=(await aw()).transaction(Ll,"readwrite");await i.objectStore(Ll).put(e,lw(t)),await i.done}catch(n){if(n instanceof Qs)zi.warn(n.message);else{const i=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zi.warn(i.message)}}}function lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=1024,v1=30;class T1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new w1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>v1){const a=S1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){zi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oy(),{heartbeatsToSend:i,unsentEntries:r}=E1(this._heartbeatsCache.heartbeats),o=Zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return zi.warn(n),""}}}function oy(){return new Date().toISOString().substring(0,10)}function E1(t,e=y1){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),sy(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),sy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class w1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lP()?uP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ry(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ry(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sy(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}function S1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t){Qc(new kl("platform-logger",e=>new MP(e),"PRIVATE")),Qc(new kl("heartbeat",e=>new T1(e),"PRIVATE")),As(Kf,ty,t),As(Kf,ty,"esm2020"),As("fire-js","")}C1("");var I1="firebase",x1="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(I1,x1,"app");var ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,uw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,P){function N(){}N.prototype=P.prototype,k.F=P.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(F,O,z){for(var V=Array(arguments.length-2),we=2;we<arguments.length;we++)V[we-2]=arguments[we];return P.prototype[O].apply(F,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,P,N){N||(N=0);const F=Array(16);if(typeof P=="string")for(var O=0;O<16;++O)F[O]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(O=0;O<16;++O)F[O]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=k.g[0],N=k.g[1],O=k.g[2];let z=k.g[3],V;V=P+(z^N&(O^z))+F[0]+3614090360&4294967295,P=N+(V<<7&4294967295|V>>>25),V=z+(O^P&(N^O))+F[1]+3905402710&4294967295,z=P+(V<<12&4294967295|V>>>20),V=O+(N^z&(P^N))+F[2]+606105819&4294967295,O=z+(V<<17&4294967295|V>>>15),V=N+(P^O&(z^P))+F[3]+3250441966&4294967295,N=O+(V<<22&4294967295|V>>>10),V=P+(z^N&(O^z))+F[4]+4118548399&4294967295,P=N+(V<<7&4294967295|V>>>25),V=z+(O^P&(N^O))+F[5]+1200080426&4294967295,z=P+(V<<12&4294967295|V>>>20),V=O+(N^z&(P^N))+F[6]+2821735955&4294967295,O=z+(V<<17&4294967295|V>>>15),V=N+(P^O&(z^P))+F[7]+4249261313&4294967295,N=O+(V<<22&4294967295|V>>>10),V=P+(z^N&(O^z))+F[8]+1770035416&4294967295,P=N+(V<<7&4294967295|V>>>25),V=z+(O^P&(N^O))+F[9]+2336552879&4294967295,z=P+(V<<12&4294967295|V>>>20),V=O+(N^z&(P^N))+F[10]+4294925233&4294967295,O=z+(V<<17&4294967295|V>>>15),V=N+(P^O&(z^P))+F[11]+2304563134&4294967295,N=O+(V<<22&4294967295|V>>>10),V=P+(z^N&(O^z))+F[12]+1804603682&4294967295,P=N+(V<<7&4294967295|V>>>25),V=z+(O^P&(N^O))+F[13]+4254626195&4294967295,z=P+(V<<12&4294967295|V>>>20),V=O+(N^z&(P^N))+F[14]+2792965006&4294967295,O=z+(V<<17&4294967295|V>>>15),V=N+(P^O&(z^P))+F[15]+1236535329&4294967295,N=O+(V<<22&4294967295|V>>>10),V=P+(O^z&(N^O))+F[1]+4129170786&4294967295,P=N+(V<<5&4294967295|V>>>27),V=z+(N^O&(P^N))+F[6]+3225465664&4294967295,z=P+(V<<9&4294967295|V>>>23),V=O+(P^N&(z^P))+F[11]+643717713&4294967295,O=z+(V<<14&4294967295|V>>>18),V=N+(z^P&(O^z))+F[0]+3921069994&4294967295,N=O+(V<<20&4294967295|V>>>12),V=P+(O^z&(N^O))+F[5]+3593408605&4294967295,P=N+(V<<5&4294967295|V>>>27),V=z+(N^O&(P^N))+F[10]+38016083&4294967295,z=P+(V<<9&4294967295|V>>>23),V=O+(P^N&(z^P))+F[15]+3634488961&4294967295,O=z+(V<<14&4294967295|V>>>18),V=N+(z^P&(O^z))+F[4]+3889429448&4294967295,N=O+(V<<20&4294967295|V>>>12),V=P+(O^z&(N^O))+F[9]+568446438&4294967295,P=N+(V<<5&4294967295|V>>>27),V=z+(N^O&(P^N))+F[14]+3275163606&4294967295,z=P+(V<<9&4294967295|V>>>23),V=O+(P^N&(z^P))+F[3]+4107603335&4294967295,O=z+(V<<14&4294967295|V>>>18),V=N+(z^P&(O^z))+F[8]+1163531501&4294967295,N=O+(V<<20&4294967295|V>>>12),V=P+(O^z&(N^O))+F[13]+2850285829&4294967295,P=N+(V<<5&4294967295|V>>>27),V=z+(N^O&(P^N))+F[2]+4243563512&4294967295,z=P+(V<<9&4294967295|V>>>23),V=O+(P^N&(z^P))+F[7]+1735328473&4294967295,O=z+(V<<14&4294967295|V>>>18),V=N+(z^P&(O^z))+F[12]+2368359562&4294967295,N=O+(V<<20&4294967295|V>>>12),V=P+(N^O^z)+F[5]+4294588738&4294967295,P=N+(V<<4&4294967295|V>>>28),V=z+(P^N^O)+F[8]+2272392833&4294967295,z=P+(V<<11&4294967295|V>>>21),V=O+(z^P^N)+F[11]+1839030562&4294967295,O=z+(V<<16&4294967295|V>>>16),V=N+(O^z^P)+F[14]+4259657740&4294967295,N=O+(V<<23&4294967295|V>>>9),V=P+(N^O^z)+F[1]+2763975236&4294967295,P=N+(V<<4&4294967295|V>>>28),V=z+(P^N^O)+F[4]+1272893353&4294967295,z=P+(V<<11&4294967295|V>>>21),V=O+(z^P^N)+F[7]+4139469664&4294967295,O=z+(V<<16&4294967295|V>>>16),V=N+(O^z^P)+F[10]+3200236656&4294967295,N=O+(V<<23&4294967295|V>>>9),V=P+(N^O^z)+F[13]+681279174&4294967295,P=N+(V<<4&4294967295|V>>>28),V=z+(P^N^O)+F[0]+3936430074&4294967295,z=P+(V<<11&4294967295|V>>>21),V=O+(z^P^N)+F[3]+3572445317&4294967295,O=z+(V<<16&4294967295|V>>>16),V=N+(O^z^P)+F[6]+76029189&4294967295,N=O+(V<<23&4294967295|V>>>9),V=P+(N^O^z)+F[9]+3654602809&4294967295,P=N+(V<<4&4294967295|V>>>28),V=z+(P^N^O)+F[12]+3873151461&4294967295,z=P+(V<<11&4294967295|V>>>21),V=O+(z^P^N)+F[15]+530742520&4294967295,O=z+(V<<16&4294967295|V>>>16),V=N+(O^z^P)+F[2]+3299628645&4294967295,N=O+(V<<23&4294967295|V>>>9),V=P+(O^(N|~z))+F[0]+4096336452&4294967295,P=N+(V<<6&4294967295|V>>>26),V=z+(N^(P|~O))+F[7]+1126891415&4294967295,z=P+(V<<10&4294967295|V>>>22),V=O+(P^(z|~N))+F[14]+2878612391&4294967295,O=z+(V<<15&4294967295|V>>>17),V=N+(z^(O|~P))+F[5]+4237533241&4294967295,N=O+(V<<21&4294967295|V>>>11),V=P+(O^(N|~z))+F[12]+1700485571&4294967295,P=N+(V<<6&4294967295|V>>>26),V=z+(N^(P|~O))+F[3]+2399980690&4294967295,z=P+(V<<10&4294967295|V>>>22),V=O+(P^(z|~N))+F[10]+4293915773&4294967295,O=z+(V<<15&4294967295|V>>>17),V=N+(z^(O|~P))+F[1]+2240044497&4294967295,N=O+(V<<21&4294967295|V>>>11),V=P+(O^(N|~z))+F[8]+1873313359&4294967295,P=N+(V<<6&4294967295|V>>>26),V=z+(N^(P|~O))+F[15]+4264355552&4294967295,z=P+(V<<10&4294967295|V>>>22),V=O+(P^(z|~N))+F[6]+2734768916&4294967295,O=z+(V<<15&4294967295|V>>>17),V=N+(z^(O|~P))+F[13]+1309151649&4294967295,N=O+(V<<21&4294967295|V>>>11),V=P+(O^(N|~z))+F[4]+4149444226&4294967295,P=N+(V<<6&4294967295|V>>>26),V=z+(N^(P|~O))+F[11]+3174756917&4294967295,z=P+(V<<10&4294967295|V>>>22),V=O+(P^(z|~N))+F[2]+718787259&4294967295,O=z+(V<<15&4294967295|V>>>17),V=N+(z^(O|~P))+F[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+z&4294967295}i.prototype.v=function(k,P){P===void 0&&(P=k.length);const N=P-this.blockSize,F=this.C;let O=this.h,z=0;for(;z<P;){if(O==0)for(;z<=N;)r(this,k,z),z+=this.blockSize;if(typeof k=="string"){for(;z<P;)if(F[O++]=k.charCodeAt(z++),O==this.blockSize){r(this,F),O=0;break}}else for(;z<P;)if(F[O++]=k[z++],O==this.blockSize){r(this,F),O=0;break}}this.h=O,this.o+=P},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;P=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=P&255,P/=256;for(this.v(k),k=Array(16),P=0,N=0;N<4;++N)for(let F=0;F<32;F+=8)k[P++]=this.g[N]>>>F&255;return k};function o(k,P){var N=u;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=P(k)}function a(k,P){this.h=P;const N=[];let F=!0;for(let O=k.length-1;O>=0;O--){const z=k[O]|0;F&&z==P||(N[O]=z,F=!1)}this.g=N}var u={};function d(k){return-128<=k&&k<128?o(k,function(P){return new a([P|0],P<0?-1:0)}):new a([k|0],k<0?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return y;if(k<0)return U(h(-k));const P=[];let N=1;for(let F=0;k>=N;F++)P[F]=k/N|0,N*=4294967296;return new a(P,0)}function g(k,P){if(k.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(k.charAt(0)=="-")return U(g(k.substring(1),P));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(P,8));let F=y;for(let z=0;z<k.length;z+=8){var O=Math.min(8,k.length-z);const V=parseInt(k.substring(z,z+O),P);O<8?(O=h(Math.pow(P,O)),F=F.j(O).add(h(V))):(F=F.j(N),F=F.add(h(V)))}return F}var y=d(0),v=d(1),C=d(16777216);t=a.prototype,t.m=function(){if(D(this))return-U(this).m();let k=0,P=1;for(let N=0;N<this.g.length;N++){const F=this.i(N);k+=(F>=0?F:4294967296+F)*P,P*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(D(this))return"-"+U(this).toString(k);const P=h(Math.pow(k,6));var N=this;let F="";for(;;){const O=G(N,P).g;N=x(N,O.j(P));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=O,b(N))return z+F;for(;z.length<6;)z="0"+z;F=z+F}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(let P=0;P<k.g.length;P++)if(k.g[P]!=0)return!1;return!0}function D(k){return k.h==-1}t.l=function(k){return k=x(this,k),D(k)?-1:b(k)?0:1};function U(k){const P=k.g.length,N=[];for(let F=0;F<P;F++)N[F]=~k.g[F];return new a(N,~k.h).add(v)}t.abs=function(){return D(this)?U(this):this},t.add=function(k){const P=Math.max(this.g.length,k.g.length),N=[];let F=0;for(let O=0;O<=P;O++){let z=F+(this.i(O)&65535)+(k.i(O)&65535),V=(z>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);F=V>>>16,z&=65535,V&=65535,N[O]=V<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function x(k,P){return k.add(U(P))}t.j=function(k){if(b(this)||b(k))return y;if(D(this))return D(k)?U(this).j(U(k)):U(U(this).j(k));if(D(k))return U(this.j(U(k)));if(this.l(C)<0&&k.l(C)<0)return h(this.m()*k.m());const P=this.g.length+k.g.length,N=[];for(var F=0;F<2*P;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(let O=0;O<k.g.length;O++){const z=this.i(F)>>>16,V=this.i(F)&65535,we=k.i(O)>>>16,ot=k.i(O)&65535;N[2*F+2*O]+=V*ot,R(N,2*F+2*O),N[2*F+2*O+1]+=z*ot,R(N,2*F+2*O+1),N[2*F+2*O+1]+=V*we,R(N,2*F+2*O+1),N[2*F+2*O+2]+=z*we,R(N,2*F+2*O+2)}for(k=0;k<P;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=P;k<2*P;k++)N[k]=0;return new a(N,0)};function R(k,P){for(;(k[P]&65535)!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function M(k,P){this.g=k,this.h=P}function G(k,P){if(b(P))throw Error("division by zero");if(b(k))return new M(y,y);if(D(k))return P=G(U(k),P),new M(U(P.g),U(P.h));if(D(P))return P=G(k,U(P)),new M(U(P.g),P.h);if(k.g.length>30){if(D(k)||D(P))throw Error("slowDivide_ only works with positive integers.");for(var N=v,F=P;F.l(k)<=0;)N=Z(N),F=Z(F);var O=Y(N,1),z=Y(F,1);for(F=Y(F,2),N=Y(N,2);!b(F);){var V=z.add(F);V.l(k)<=0&&(O=O.add(N),z=V),F=Y(F,1),N=Y(N,1)}return P=x(k,O.j(P)),new M(O,P)}for(O=y;k.l(P)>=0;){for(N=Math.max(1,Math.floor(k.m()/P.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),z=h(N),V=z.j(P);D(V)||V.l(k)>0;)N-=F,z=h(N),V=z.j(P);b(z)&&(z=v),O=O.add(z),k=x(k,V)}return new M(O,k)}t.B=function(k){return G(this,k).h},t.and=function(k){const P=Math.max(this.g.length,k.g.length),N=[];for(let F=0;F<P;F++)N[F]=this.i(F)&k.i(F);return new a(N,this.h&k.h)},t.or=function(k){const P=Math.max(this.g.length,k.g.length),N=[];for(let F=0;F<P;F++)N[F]=this.i(F)|k.i(F);return new a(N,this.h|k.h)},t.xor=function(k){const P=Math.max(this.g.length,k.g.length),N=[];for(let F=0;F<P;F++)N[F]=this.i(F)^k.i(F);return new a(N,this.h^k.h)};function Z(k){const P=k.g.length+1,N=[];for(let F=0;F<P;F++)N[F]=k.i(F)<<1|k.i(F-1)>>>31;return new a(N,k.h)}function Y(k,P){const N=P>>5;P%=32;const F=k.g.length-N,O=[];for(let z=0;z<F;z++)O[z]=P>0?k.i(z+N)>>>P|k.i(z+N+1)<<32-P:k.i(z+N);return new a(O,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,uw=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=g,Cr=a}).apply(typeof ay<"u"?ay:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cw,Za,dw,_c,Yf,hw,fw,pw;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var T=0;T<p.length;++T){var w=p[T];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(p,T){if(T)e:{var w=i;p=p.split(".");for(var A=0;A<p.length-1;A++){var H=p[A];if(!(H in w))break e;w=w[H]}p=p[p.length-1],A=w[p],T=T(A),T!=A&&T!=null&&e(w,p,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(T){var w=[],A;for(A in T)Object.prototype.hasOwnProperty.call(T,A)&&w.push([A,T[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function d(p,T,w){return p.call.apply(p.bind,arguments)}function h(p,T,w){return h=d,h.apply(null,arguments)}function g(p,T){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),p.apply(this,A)}}function y(p,T){function w(){}w.prototype=T.prototype,p.Z=T.prototype,p.prototype=new w,p.prototype.constructor=p,p.Ob=function(A,H,W){for(var ie=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)ie[ye-2]=arguments[ye];return T.prototype[H].apply(A,ie)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function C(p){const T=p.length;if(T>0){const w=Array(T);for(let A=0;A<T;A++)w[A]=p[A];return w}return[]}function b(p,T){for(let A=1;A<arguments.length;A++){const H=arguments[A];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=p.length||0;const W=H.length||0;p.length=w+W;for(let ie=0;ie<W;ie++)p[w+ie]=H[ie]}else p.push(H)}}class D{constructor(T,w){this.i=T,this.j=w,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function U(p){a.setTimeout(()=>{throw p},0)}function x(){var p=k;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class R{constructor(){this.h=this.g=null}add(T,w){const A=M.get();A.set(T,w),this.h?this.h.next=A:this.g=A,this.h=A}}var M=new D(()=>new G,p=>p.reset());class G{constructor(){this.next=this.g=this.h=null}set(T,w){this.h=T,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,Y=!1,k=new R,P=()=>{const p=Promise.resolve(void 0);Z=()=>{p.then(N)}};function N(){for(var p;p=x();){try{p.h.call(p.g)}catch(w){U(w)}var T=M;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}Y=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const w=()=>{};a.addEventListener("test",w,T),a.removeEventListener("test",w,T)}catch{}return p}();function V(p){return/^[\s\xa0]*$/.test(p)}function we(p,T){O.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}y(we,O),we.prototype.init=function(p,T){const w=this.type=p.type,A=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(w=="mouseover"?T=p.fromElement:w=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),$=0;function ne(p,T,w,A,H){this.listener=p,this.proxy=null,this.src=T,this.type=w,this.capture=!!A,this.ha=H,this.key=++$,this.da=this.fa=!1}function J(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function de(p,T,w){for(const A in p)T.call(w,p[A],A,p)}function te(p,T){for(const w in p)T.call(void 0,p[w],w,p)}function he(p){const T={};for(const w in p)T[w]=p[w];return T}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(p,T){let w,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(w in A)p[w]=A[w];for(let W=0;W<Se.length;W++)w=Se[W],Object.prototype.hasOwnProperty.call(A,w)&&(p[w]=A[w])}}function ke(p){this.src=p,this.g={},this.h=0}ke.prototype.add=function(p,T,w,A,H){const W=p.toString();p=this.g[W],p||(p=this.g[W]=[],this.h++);const ie=ge(p,T,A,H);return ie>-1?(T=p[ie],w||(T.fa=!1)):(T=new ne(T,this.src,W,!!A,H),T.fa=w,p.push(T)),T};function Pe(p,T){const w=T.type;if(w in p.g){var A=p.g[w],H=Array.prototype.indexOf.call(A,T,void 0),W;(W=H>=0)&&Array.prototype.splice.call(A,H,1),W&&(J(T),p.g[w].length==0&&(delete p.g[w],p.h--))}}function ge(p,T,w,A){for(let H=0;H<p.length;++H){const W=p[H];if(!W.da&&W.listener==T&&W.capture==!!w&&W.ha==A)return H}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),yn={};function oa(p,T,w,A,H){if(Array.isArray(T)){for(let W=0;W<T.length;W++)oa(p,T[W],w,A,H);return null}return w=zr(w),p&&p[ot]?p.J(T,w,u(A)?!!A.capture:!1,H):sa(p,T,w,!1,A,H)}function sa(p,T,w,A,H,W){if(!T)throw Error("Invalid event type");const ie=u(H)?!!H.capture:!!H;let ye=Ao(p);if(ye||(p[yt]=ye=new ke(p)),w=ye.add(T,w,A,ie,W),w.proxy)return w;if(A=aa(),w.proxy=A,A.src=p,A.listener=w,p.addEventListener)z||(H=ie),H===void 0&&(H=!1),p.addEventListener(T.toString(),A,H);else if(p.attachEvent)p.attachEvent(Ql(T.toString()),A);else if(p.addListener&&p.removeListener)p.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function aa(){function p(w){return T.call(p.src,p.listener,w)}const T=Xl;return p}function Ji(p,T,w,A,H){if(Array.isArray(T))for(var W=0;W<T.length;W++)Ji(p,T[W],w,A,H);else A=u(A)?!!A.capture:!!A,w=zr(w),p&&p[ot]?(p=p.i,W=String(T).toString(),W in p.g&&(T=p.g[W],w=ge(T,w,A,H),w>-1&&(J(T[w]),Array.prototype.splice.call(T,w,1),T.length==0&&(delete p.g[W],p.h--)))):p&&(p=Ao(p))&&(T=p.g[T.toString()],p=-1,T&&(p=ge(T,w,A,H)),(w=p>-1?T[p]:null)&&Or(w))}function Or(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[ot])Pe(T.i,p);else{var w=p.type,A=p.proxy;T.removeEventListener?T.removeEventListener(w,A,p.capture):T.detachEvent?T.detachEvent(Ql(w),A):T.addListener&&T.removeListener&&T.removeListener(A),(w=Ao(T))?(Pe(w,p),w.h==0&&(w.src=null,T[yt]=null)):J(p)}}}function Ql(p){return p in yn?yn[p]:yn[p]="on"+p}function Xl(p,T){if(p.da)p=!0;else{T=new we(T,this);const w=p.listener,A=p.ha||p.src;p.fa&&Or(p),p=w.call(A,T)}return p}function Ao(p){return p=p[yt],p instanceof ke?p:null}var Br="__closure_events_fn_"+(Math.random()*1e9>>>0);function zr(p){return typeof p=="function"?p:(p[Br]||(p[Br]=function(T){return p.handleEvent(T)}),p[Br])}function vt(){F.call(this),this.i=new ke(this),this.M=this,this.G=null}y(vt,F),vt.prototype[ot]=!0,vt.prototype.removeEventListener=function(p,T,w,A){Ji(this,p,T,w,A)};function Tt(p,T){var w,A=p.G;if(A)for(w=[];A;A=A.G)w.push(A);if(p=p.M,A=T.type||T,typeof T=="string")T=new O(T,p);else if(T instanceof O)T.target=T.target||p;else{var H=T;T=new O(A,p),$e(T,H)}H=!0;let W,ie;if(w)for(ie=w.length-1;ie>=0;ie--)W=T.g=w[ie],H=Zi(W,A,!0,T)&&H;if(W=T.g=p,H=Zi(W,A,!0,T)&&H,H=Zi(W,A,!1,T)&&H,w)for(ie=0;ie<w.length;ie++)W=T.g=w[ie],H=Zi(W,A,!1,T)&&H}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const w=p.g[T];for(let A=0;A<w.length;A++)J(w[A]);delete p.g[T],p.h--}}this.G=null},vt.prototype.J=function(p,T,w,A){return this.i.add(String(p),T,!1,w,A)},vt.prototype.K=function(p,T,w,A){return this.i.add(String(p),T,!0,w,A)};function Zi(p,T,w,A){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let H=!0;for(let W=0;W<T.length;++W){const ie=T[W];if(ie&&!ie.da&&ie.capture==w){const ye=ie.listener,Fe=ie.ha||ie.src;ie.fa&&Pe(p.i,ie),H=ye.call(Fe,A)!==!1&&H}}return H&&!A.defaultPrevented}function jl(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:a.setTimeout(p,T||0)}function la(p){p.g=jl(()=>{p.g=null,p.i&&(p.i=!1,la(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class eh extends F{constructor(T,w){super(),this.m=T,this.l=w,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:la(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(p){F.call(this),this.h=p,this.g={}}y(Gr,F);var Po=[];function ua(p){de(p.g,function(T,w){this.g.hasOwnProperty(w)&&Or(T)},p),p.g={}}Gr.prototype.N=function(){Gr.Z.N.call(this),ua(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ro=a.JSON.stringify,th=a.JSON.parse,eu=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function ca(){}function tu(){}var Yi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hr(){O.call(this,"d")}y(Hr,O);function No(){O.call(this,"c")}y(No,O);var Ti={},Qi=null;function ko(){return Qi=Qi||new vt}Ti.Ia="serverreachability";function nu(p){O.call(this,Ti.Ia,p)}y(nu,O);function Xi(p){const T=ko();Tt(T,new nu(T))}Ti.STAT_EVENT="statevent";function da(p,T){O.call(this,Ti.STAT_EVENT,p),this.stat=T}y(da,O);function Et(p){const T=ko();Tt(T,new da(T,p))}Ti.Ja="timingevent";function iu(p,T){O.call(this,Ti.Ja,p),this.size=T}y(iu,O);function qr(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},T)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function nh(p,T,w,A,H,W){p.info(function(){if(p.g)if(W){var ie="",ye=W.split("&");for(let Be=0;Be<ye.length;Be++){var Fe=ye[Be].split("=");if(Fe.length>1){const st=Fe[0];Fe=Fe[1];const Sn=st.split("_");ie=Sn.length>=2&&Sn[1]=="type"?ie+(st+"="+Fe+"&"):ie+(st+"=redacted&")}}}else ie=null;else ie=W;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+T+`
`+w+`
`+ie})}function ih(p,T,w,A,H,W,ie){p.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+T+`
`+w+`
`+W+" "+ie})}function ji(p,T,w,A){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+rh(p,w)+(A?" "+A:"")})}function ha(p,T){p.info(function(){return"TIMEOUT: "+T})}$r.prototype.info=function(){};function rh(p,T){if(!p.g)return T;if(!T)return null;try{const W=JSON.parse(T);if(W){for(p=0;p<W.length;p++)if(Array.isArray(W[p])){var w=W[p];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ie=1;ie<A.length;ie++)A[ie]=""}}}}return Ro(W)}catch{return T}}var Mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ru={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ou;function Xt(){}y(Xt,ca),Xt.prototype.g=function(){return new XMLHttpRequest},ou=new Xt;function ue(p){return encodeURIComponent(String(p))}function su(p){var T=1;p=p.split(":");const w=[];for(;T>0&&p.length;)w.push(p.shift()),T--;return p.length&&w.push(p.join(":")),w}function Vn(p,T,w,A){this.j=p,this.i=T,this.l=w,this.S=A||1,this.V=new Gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fa}function fa(){this.i=null,this.g="",this.h=!1}var pa={},Wr={};function Lo(p,T,w){p.M=1,p.A=We(Ht(T)),p.u=w,p.R=!0,Ei(p,null)}function Ei(p,T){p.F=Date.now(),Do(p),p.B=Ht(p.A);var w=p.B,A=p.S;Array.isArray(A)||(A=[String(A)]),Oo(w.i,"t",A),p.C=0,w=p.j.L,p.h=new fa,p.g=Pa(p.j,w?T:null,!p.u),p.P>0&&(p.O=new eh(h(p.Y,p,p.g),p.P)),T=p.V,w=p.g,A=p.ba;var H="readystatechange";Array.isArray(H)||(H&&(Po[0]=H.toString()),H=Po);for(let W=0;W<H.length;W++){const ie=oa(w,H[W],A||T.handleEvent,!1,T.h||T);if(!ie)break;T.g[ie.key]=ie}T=p.J?he(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),Xi(),nh(p.i,p.v,p.B,p.l,p.S,p.u)}Vn.prototype.ba=function(p){p=p.target;const T=this.O;T&&ni(p)==3?T.j():this.Y(p)},Vn.prototype.Y=function(p){try{if(p==this.g)e:{const ye=ni(this.g),Fe=this.g.ya(),Be=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Ea(this.g)))){this.K||ye!=4||Fe==7||(Fe==8||Be<=0?Xi(3):Xi(2)),bo(this);var T=this.g.ca();this.X=T;var w=au(this);if(this.o=T==200,ih(this.i,this.v,this.B,this.l,this.S,ye,T),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(A)){var W=A;break t}}W=null}if(p=W)ji(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ma(this,p);else{this.o=!1,this.m=3,Et(12),vn(this),Kr(this);break e}}if(this.R){p=!0;let st;for(;!this.K&&this.C<w.length;)if(st=oh(this,w),st==Wr){ye==4&&(this.m=4,Et(14),p=!1),ji(this.i,this.l,null,"[Incomplete Response]");break}else if(st==pa){this.m=4,Et(15),ji(this.i,this.l,w,"[Invalid Chunk]"),p=!1;break}else ji(this.i,this.l,st,null),ma(this,st);if(lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||w.length!=0||this.h.h||(this.m=1,Et(16),p=!1),this.o=this.o&&p,!p)ji(this.i,this.l,w,"[Invalid Chunked Response]"),vn(this),Kr(this);else if(w.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),xa(ie),ie.P=!0,Et(11))}}else ji(this.i,this.l,w,null),ma(this,w);ye==4&&vn(this),this.o&&!this.K&&(ye==4?dn(this.j,this):(this.o=!1,Do(this)))}else wa(this.g),T==400&&w.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),vn(this),Kr(this)}}}catch{}finally{}};function au(p){if(!lu(p))return p.g.la();const T=Ea(p.g);if(T==="")return"";let w="";const A=T.length,H=ni(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return vn(p),Kr(p),"";p.h.i=new a.TextDecoder}for(let W=0;W<A;W++)p.h.h=!0,w+=p.h.i.decode(T[W],{stream:!(H&&W==A-1)});return T.length=0,p.h.g+=w,p.C=0,p.h.g}function lu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function oh(p,T){var w=p.C,A=T.indexOf(`
`,w);return A==-1?Wr:(w=Number(T.substring(w,A)),isNaN(w)?pa:(A+=1,A+w>T.length?Wr:(T=T.slice(A,A+w),p.C=A+w,T)))}Vn.prototype.cancel=function(){this.K=!0,vn(this)};function Do(p){p.T=Date.now()+p.H,uu(p,p.H)}function uu(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=qr(h(p.aa,p),T)}function bo(p){p.D&&(a.clearTimeout(p.D),p.D=null)}Vn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(ha(this.i,this.B),this.M!=2&&(Xi(),Et(17)),vn(this),this.m=2,Kr(this)):uu(this,this.T-p)};function Kr(p){p.j.I==0||p.K||dn(p.j,p)}function vn(p){bo(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,ua(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function ma(p,T){try{var w=p.j;if(w.I!=0&&(w.g==p||Jr(w.h,p))){if(!p.L&&Jr(w.h,p)&&w.I==3){try{var A=w.Ba.g.parse(T)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<p.F)qo(w),Go(w);else break e;Ia(w),Et(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=qr(h(w.Va,w),6e3));hu(w.h)<=1&&w.ta&&(w.ta=void 0)}else ri(w,11)}else if((p.L||w.g==p)&&qo(w),!V(T))for(H=w.Ba.g.parse(T),T=0;T<H.length;T++){let Be=H[T];const st=Be[0];if(!(st<=w.K))if(w.K=st,Be=Be[1],w.I==2)if(Be[0]=="c"){w.M=Be[1],w.ba=Be[2];const Sn=Be[3];Sn!=null&&(w.ka=Sn,w.j.info("VER="+w.ka));const On=Be[4];On!=null&&(w.za=On,w.j.info("SVER="+w.za));const Cn=Be[5];Cn!=null&&typeof Cn=="number"&&Cn>0&&(A=1.5*Cn,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const oi=p.g;if(oi){const Ko=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var W=A.h;W.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wi(W,W.h),W.h=null))}if(A.G){const Jo=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(A.wa=Jo,ae(A.J,A.G,Jo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-p.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ie=p;if(A.na=Aa(A,A.L?A.ba:null,A.W),ie.L){ga(A.h,ie);var ye=ie,Fe=A.O;Fe&&(ye.H=Fe),ye.D&&(bo(ye),Do(ye)),A.g=ie}else Ca(A);w.i.length>0&&ii(w)}else Be[0]!="stop"&&Be[0]!="close"||ri(w,7);else w.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ri(w,7):Ce(w):Be[0]!="noop"&&w.l&&w.l.qa(Be),w.A=0)}}Xi(4)}catch{}}var sh=class{constructor(p,T){this.g=p,this.map=T}};function cu(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function du(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function hu(p){return p.h?1:p.g?p.g.size:0}function Jr(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function wi(p,T){p.g?p.g.add(T):p.h=T}function ga(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}cu.prototype.cancel=function(){if(this.i=_a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function _a(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const w of p.g.values())T=T.concat(w.G);return T}return C(p.i)}var er=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Me(p,T){if(p){p=p.split("&");for(let w=0;w<p.length;w++){const A=p[w].indexOf("=");let H,W=null;A>=0?(H=p[w].substring(0,A),W=p[w].substring(A+1)):H=p[w],T(H,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ve(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof Ve?(this.l=p.l,Tn(this,p.j),this.o=p.o,this.g=p.g,En(this,p.u),this.h=p.h,Zr(this,Yr(p.i)),this.m=p.m):p&&(T=String(p).match(er))?(this.l=!1,Tn(this,T[1]||"",!0),this.o=Si(T[2]||""),this.g=Si(T[3]||"",!0),En(this,T[4]),this.h=Si(T[5]||"",!0),Zr(this,T[6]||"",!0),this.m=Si(T[7]||"")):(this.l=!1,this.i=new Fn(null,this.l))}Ve.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(jn(T,fu,!0),":");var w=this.g;return(w||T=="file")&&(p.push("//"),(T=this.o)&&p.push(jn(T,fu,!0),"@"),p.push(ue(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&p.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&p.push("/"),p.push(jn(w,w.charAt(0)=="/"?Ci:Vo,!0))),(w=this.i.toString())&&p.push("?",w),(w=this.m)&&p.push("#",jn(w,Ii)),p.join("")},Ve.prototype.resolve=function(p){const T=Ht(this);let w=!!p.j;w?Tn(T,p.j):w=!!p.o,w?T.o=p.o:w=!!p.g,w?T.g=p.g:w=p.u!=null;var A=p.h;if(w)En(T,p.u);else if(w=!!p.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=T.h.lastIndexOf("/");H!=-1&&(A=T.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const W=[];for(let ie=0;ie<H.length;){const ye=H[ie++];ye=="."?A&&ie==H.length&&W.push(""):ye==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ie==H.length&&W.push("")):(W.push(ye),A=!0)}A=W.join("/")}else A=H}return w?T.h=A:w=p.i.toString()!=="",w?Zr(T,Yr(p.i)):w=!!p.m,w&&(T.m=p.m),T};function Ht(p){return new Ve(p)}function Tn(p,T,w){p.j=w?Si(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function En(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Zr(p,T,w){T instanceof Fn?(p.i=T,ya(p.i,p.l)):(w||(T=jn(T,it)),p.i=new Fn(T,p.l))}function ae(p,T,w){p.i.set(T,w)}function We(p){return ae(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Si(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function jn(p,T,w){return typeof p=="string"?(p=encodeURI(p).replace(T,jt),w&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function jt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var fu=/[#\/\?@]/g,Vo=/[#\?:]/g,Ci=/[#\?]/g,it=/[#\?@]/g,Ii=/#/g;function Fn(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function cn(p){p.g||(p.g=new Map,p.h=0,p.i&&Me(p.i,function(T,w){p.add(decodeURIComponent(T.replace(/\+/g," ")),w)}))}t=Fn.prototype,t.add=function(p,T){cn(this),this.i=null,p=ei(this,p);let w=this.g.get(p);return w||this.g.set(p,w=[]),w.push(T),this.h+=1,this};function Fo(p,T){cn(p),T=ei(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function tr(p,T){return cn(p),T=ei(p,T),p.g.has(T)}t.forEach=function(p,T){cn(this),this.g.forEach(function(w,A){w.forEach(function(H){p.call(T,H,A,this)},this)},this)};function Uo(p,T){cn(p);let w=[];if(typeof T=="string")tr(p,T)&&(w=w.concat(p.g.get(ei(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)w=w.concat(p[T]);return w}t.set=function(p,T){return cn(this),this.i=null,p=ei(this,p),tr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=Uo(this,p),p.length>0?String(p[0]):T):T};function Oo(p,T,w){Fo(p,T),w.length>0&&(p.i=null,p.g.set(ei(p,T),C(w)),p.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let A=0;A<T.length;A++){var w=T[A];const H=ue(w);w=Uo(this,w);for(let W=0;W<w.length;W++){let ie=H;w[W]!==""&&(ie+="="+ue(w[W])),p.push(ie)}}return this.i=p.join("&")};function Yr(p){const T=new Fn;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function ei(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function ya(p,T){T&&!p.j&&(cn(p),p.i=null,p.g.forEach(function(w,A){const H=A.toLowerCase();A!=H&&(Fo(this,A),Oo(this,H,w))},p)),p.j=T}function Bo(p,T){const w=new $r;if(a.Image){const A=new Image;A.onload=g(wn,w,"TestLoadImage: loaded",!0,T,A),A.onerror=g(wn,w,"TestLoadImage: error",!1,T,A),A.onabort=g(wn,w,"TestLoadImage: abort",!1,T,A),A.ontimeout=g(wn,w,"TestLoadImage: timeout",!1,T,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=p}else T(!1)}function pu(p,T){const w=new $r,A=new AbortController,H=setTimeout(()=>{A.abort(),wn(w,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:A.signal}).then(W=>{clearTimeout(H),W.ok?wn(w,"TestPingServer: ok",!0,T):wn(w,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),wn(w,"TestPingServer: error",!1,T)})}function wn(p,T,w,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(w)}catch{}}function ah(){this.g=new eu}function _e(p){this.i=p.Sb||null,this.h=p.ab||!1}y(_e,ca),_e.prototype.g=function(){return new qt(this.i,this.h)};function qt(p,T){vt.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(qt,vt),t=qt.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,xi(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||a).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ge(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ge(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?nr(this):xi(this),this.readyState==3&&Ge(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,nr(this))},t.Na=function(p){this.g&&(this.response=p,nr(this))},t.ga=function(){this.g&&nr(this)};function nr(p){p.readyState=4,p.l=null,p.j=null,p.B=null,xi(p)}t.setRequestHeader=function(p,T){this.A.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var w=T.next();!w.done;)w=w.value,p.push(w[0]+": "+w[1]),w=T.next();return p.join(`\r
`)};function xi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(qt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function zo(p){let T="";return de(p,function(w,A){T+=A,T+=":",T+=w,T+=`\r
`}),T}function Qr(p,T,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=zo(w),typeof p=="string"?w!=null&&ue(w):ae(p,T,w))}function Oe(p){vt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Oe,vt);var va=/^https?$/i,Xr=["POST","PUT"];t=Oe.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,T,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ou.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(W){ut(this,W);return}if(p=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)w.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())w.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),H=a.FormData&&p instanceof a.FormData,!(Array.prototype.indexOf.call(Xr,T,void 0)>=0)||A||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of w)this.g.setRequestHeader(W,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(W){ut(this,W)}};function ut(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,ti(p),jr(p)}function ti(p){p.A||(p.A=!0,Tt(p,"complete"),Tt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Tt(this,"complete"),Tt(this,"abort"),jr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ta(this):this.Xa())},t.Xa=function(){Ta(this)};function Ta(p){if(p.h&&typeof o<"u"){if(p.v&&ni(p)==4)setTimeout(p.Ca.bind(p),0);else if(Tt(p,"readystatechange"),ni(p)==4){p.h=!1;try{const W=p.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var w;if(!(w=T)){var A;if(A=W===0){let ie=String(p.D).match(er)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),A=!va.test(ie?ie.toLowerCase():"")}w=A}if(w)Tt(p,"complete"),Tt(p,"success");else{p.o=6;try{var H=ni(p)>2?p.g.statusText:""}catch{H=""}p.l=H+" ["+p.ca()+"]",ti(p)}}finally{jr(p)}}}}function jr(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const w=p.g;p.g=null,T||Tt(p,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ni(p){return p.g?p.g.readyState:0}t.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),th(T)}};function Ea(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function wa(p){const T={};p=(p.g&&ni(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<p.length;A++){if(V(p[A]))continue;var w=su(p[A]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=T[H]||[];T[H]=W,W.push(w)}te(T,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(p,T,w){return w&&w.internalChannelParams&&w.internalChannelParams[p]||T}function Sa(p){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=eo("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=eo("baseRetryDelayMs",5e3,p),this.Za=eo("retryDelaySeedMs",1e4,p),this.Ta=eo("forwardChannelMaxRetries",2,p),this.va=eo("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new cu(p&&p.concurrentRequestLimit),this.Ba=new ah,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sa.prototype,t.ka=8,t.I=1,t.connect=function(p,T,w,A){Et(0),this.W=p,this.H=T||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Aa(this,null,this.W),ii(this)};function Ce(p){if(en(p),p.I==3){var T=p.V++,w=Ht(p.J);if(ae(w,"SID",p.M),ae(w,"RID",T),ae(w,"TYPE","terminate"),Ai(p,w),T=new Vn(p,p.j,T),T.M=2,T.A=We(Ht(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(T.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=T.A,w=!0),w||(T.g=Pa(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Do(T)}Un(p)}function Go(p){p.g&&(xa(p),p.g.cancel(),p.g=null)}function en(p){Go(p),p.v&&(a.clearTimeout(p.v),p.v=null),qo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&a.clearTimeout(p.m),p.m=null)}function ii(p){if(!du(p.h)&&!p.m){p.m=!0;var T=p.Ea;Z||P(),Y||(Z(),Y=!0),k.add(T,p),p.D=0}}function mu(p,T){return hu(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=qr(h(p.Ea,p,T),yu(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const H=new Vn(this,this.j,p);let W=this.o;if(this.U&&(W?(W=he(W),$e(W,this.U)):W=this.U),this.u!==null||this.R||(H.J=W,W=null),this.S)e:{for(var T=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(T+=A,T>4096){T=w;break e}if(T===4096||w===this.i.length-1){T=w+1;break e}}T=1e3}else T=1e3;T=_u(this,H,T),w=Ht(this.J),ae(w,"RID",p),ae(w,"CVER",22),this.G&&ae(w,"X-HTTP-Session-Id",this.G),Ai(this,w),W&&(this.R?T="headers="+ue(zo(W))+"&"+T:this.u&&Qr(w,this.u,W)),wi(this.h,H),this.Ra&&ae(w,"TYPE","init"),this.S?(ae(w,"$req",T),ae(w,"SID","null"),H.U=!0,Lo(H,w,null)):Lo(H,w,T),this.I=2}}else this.I==3&&(p?gu(this,p):this.i.length==0||du(this.h)||gu(this))};function gu(p,T){var w;T?w=T.l:w=p.V++;const A=Ht(p.J);ae(A,"SID",p.M),ae(A,"RID",w),ae(A,"AID",p.K),Ai(p,A),p.u&&p.o&&Qr(A,p.u,p.o),w=new Vn(p,p.j,w,p.D+1),p.u===null&&(w.J=p.o),T&&(p.i=T.G.concat(p.i)),T=_u(p,w,1e3),w.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),wi(p.h,w),Lo(w,A,T)}function Ai(p,T){p.H&&de(p.H,function(w,A){ae(T,A,w)}),p.l&&de({},function(w,A){ae(T,A,w)})}function _u(p,T,w){w=Math.min(p.i.length,w);const A=p.l?h(p.l.Ka,p.l,p):null;e:{var H=p.i;let ye=-1;for(;;){const Fe=["count="+w];ye==-1?w>0?(ye=H[0].g,Fe.push("ofs="+ye)):ye=0:Fe.push("ofs="+ye);let Be=!0;for(let st=0;st<w;st++){var W=H[st].g;const Sn=H[st].map;if(W-=ye,W<0)ye=Math.max(0,H[st].g-100),Be=!1;else try{W="req"+W+"_"||"";try{var ie=Sn instanceof Map?Sn:Object.entries(Sn);for(const[On,Cn]of ie){let oi=Cn;u(Cn)&&(oi=Ro(Cn)),Fe.push(W+On+"="+encodeURIComponent(oi))}}catch(On){throw Fe.push(W+"type="+encodeURIComponent("_badmap")),On}}catch{A&&A(Sn)}}if(Be){ie=Fe.join("&");break e}}ie=void 0}return p=p.i.splice(0,w),T.G=p,ie}function Ca(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;Z||P(),Y||(Z(),Y=!0),k.add(T,p),p.A=0}}function Ia(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=qr(h(p.Da,p),yu(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,Ho(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=qr(h(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Go(this),Ho(this))};function xa(p){p.B!=null&&(a.clearTimeout(p.B),p.B=null)}function Ho(p){p.g=new Vn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=Ht(p.na);ae(T,"RID","rpc"),ae(T,"SID",p.M),ae(T,"AID",p.K),ae(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&ae(T,"TO",p.ia),ae(T,"TYPE","xmlhttp"),Ai(p,T),p.u&&p.o&&Qr(T,p.u,p.o),p.O&&(p.g.H=p.O);var w=p.g;p=p.ba,w.M=1,w.A=We(Ht(T)),w.u=null,w.R=!0,Ei(w,p)}t.Va=function(){this.C!=null&&(this.C=null,Go(this),Ia(this),Et(19))};function qo(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function dn(p,T){var w=null;if(p.g==T){qo(p),xa(p),p.g=null;var A=2}else if(Jr(p.h,T))w=T.G,ga(p.h,T),A=1;else return;if(p.I!=0){if(T.o)if(A==1){w=T.u?T.u.length:0,T=Date.now()-T.F;var H=p.D;A=ko(),Tt(A,new iu(A,w)),ii(p)}else Ca(p);else if(H=T.m,H==3||H==0&&T.X>0||!(A==1&&mu(p,T)||A==2&&Ia(p)))switch(w&&w.length>0&&(T=p.h,T.i=T.i.concat(w)),H){case 1:ri(p,5);break;case 4:ri(p,10);break;case 3:ri(p,6);break;default:ri(p,2)}}}function yu(p,T){let w=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(w*=2),w*T}function ri(p,T){if(p.j.info("Error code "+T),T==2){var w=h(p.bb,p),A=p.Ua;const H=!A;A=new Ve(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tn(A,"https"),We(A),H?Bo(A.toString(),w):pu(A.toString(),w)}else Et(2);p.I=0,p.l&&p.l.pa(T),Un(p),en(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Un(p){if(p.I=0,p.ja=[],p.l){const T=_a(p.h);(T.length!=0||p.i.length!=0)&&(b(p.ja,T),b(p.ja,p.i),p.h.i.length=0,C(p.i),p.i.length=0),p.l.oa()}}function Aa(p,T,w){var A=w instanceof Ve?Ht(w):new Ve(w);if(A.g!="")T&&(A.g=T+"."+A.g),En(A,A.u);else{var H=a.location;A=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;const W=new Ve(null);A&&Tn(W,A),T&&(W.g=T),H&&En(W,H),w&&(W.h=w),A=W}return w=p.G,T=p.wa,w&&T&&ae(A,w,T),ae(A,"VER",p.ka),Ai(p,A),A}function Pa(p,T,w){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new Oe(new _e({ab:w})):new Oe(p.ma),T.Fa(p.L),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $o(){}t=$o.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wo(){}Wo.prototype.g=function(p,T){return new Dt(p,T)};function Dt(p,T){vt.call(this),this.g=new Sa(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!V(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!V(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new ir(this)}y(Dt,vt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Ce(this.g)},Dt.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var w={};w.__data__=p,p=w}else this.v&&(w={},w.__data__=Ro(p),p=w);T.i.push(new sh(T.Ya++,p)),T.I==3&&ii(T)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Ce(this.g),delete this.g,Dt.Z.N.call(this)};function Ra(p){Hr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const w in T){p=w;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}y(Ra,Hr);function vu(){No.call(this),this.status=1}y(vu,No);function ir(p){this.g=p}y(ir,$o),ir.prototype.ra=function(){Tt(this.g,"a")},ir.prototype.qa=function(p){Tt(this.g,new Ra(p))},ir.prototype.pa=function(p){Tt(this.g,new vu)},ir.prototype.oa=function(){Tt(this.g,"b")},Wo.prototype.createWebChannel=Wo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,pw=function(){return new Wo},fw=function(){return ko()},hw=Ti,Yf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,_c=Mo,ru.COMPLETE="complete",dw=ru,tu.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Za=tu,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,cw=Oe}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs="12.8.0";function A1(t){Xs=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new iw("@firebase/firestore");function ns(){return _o.logLevel}function se(t,...e){if(_o.logLevel<=De.DEBUG){const n=e.map(Nm);_o.debug(`Firestore (${Xs}): ${t}`,...n)}}function Gi(t,...e){if(_o.logLevel<=De.ERROR){const n=e.map(Nm);_o.error(`Firestore (${Xs}): ${t}`,...n)}}function zs(t,...e){if(_o.logLevel<=De.WARN){const n=e.map(Nm);_o.warn(`Firestore (${Xs}): ${t}`,...n)}}function Nm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,mw(t,i,n)}function mw(t,e,n){let i=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Gi(i),new Error(i)}function ze(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||mw(e,r,i)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Qs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class R1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class N1{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ir,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ir)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string",31837,{l:i}),new gw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class k1{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class M1{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new k1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,c1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ly(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ly(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=D1(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Re(t,e){return t<e?-1:t>e?1:0}function Qf(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Hh(r)===Hh(o)?Re(r,o):Hh(r)?1:-1}return Re(t.length,e.length)}const b1=55296,V1=57343;function Hh(t){const e=t.charCodeAt(0);return e>=b1&&e<=V1}function Gs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="__name__";class ui{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=ui.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Re(e.length,n.length)}static compareSegments(e,n){const i=ui.isNumericId(e),r=ui.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ui.extractNumericId(e).compare(ui.extractNumericId(n)):Qf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class Ze extends ui{construct(e,n,i){return new Ze(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const F1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ui{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return F1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uy}static keyField(){return new Nt([uy])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ce(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ce(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ce(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ce(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ze.fromString(e))}static fromName(e){return new fe(Ze.fromString(e).popFirst(5))}static empty(){return new fe(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e,n){if(!n)throw new ce(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function U1(t,e,n,i){if(e===!0&&i===!0)throw new ce(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cy(t){if(!fe.isDocumentKey(t))throw new ce(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dy(t){if(fe.isDocumentKey(t))throw new ce(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function Hs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new ce(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wl(t,e){if(!yw(t))throw new ce(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ce(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-62135596800,fy=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*fy);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hy)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fy}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:ft("string",Ye._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ye(0,0))}static max(){return new Te(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=-1;function O1(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new Rr(r,fe.empty(),e)}function B1(t){return new Rr(t.readTime,t.key,Dl)}class Rr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Rr(Te.min(),fe.empty(),Dl)}static max(){return new Rr(Te.max(),fe.empty(),Dl)}}function z1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==G1)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const h=d;n(e[h]).next(g=>{a[h]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function q1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=-1;function Dd(t){return t==null}function Xc(t){return t===0&&1/t==-1/0}function $1(t){return typeof t=="number"&&Number.isInteger(t)&&!Xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="";function W1(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=py(e)),e=K1(t.get(n),e);return py(e)}function K1(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case vw:n+="";break;default:n+=o}}return n}function py(t){return t+vw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=r??Rt.EMPTY,this.right=o??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Rt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gy(this.data.getIterator())}getIteratorFrom(e){return new gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new $n([])}unionWith(e){let n=new _t(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ew("Invalid base64 string: "+o):o}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const J1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=J1.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="server_timestamp",Sw="__type__",Cw="__previous_value__",Iw="__local_write_time__";function Dm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Sw])==null?void 0:i.stringValue)===ww}function bd(t){const e=t.mapValue.fields[Cw];return Dm(e)?bd(e):e}function bl(t){const e=Nr(t.mapValue.fields[Iw].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,i,r,o,a,u,d,h,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=g,this.apiKey=y}}const jc="(default)";class Vl{constructor(e,n){this.projectId=e,this.database=n||jc}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===jc}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}function Y1(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ce(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="__type__",Q1="__max__",Yu={mapValue:{}},Aw="__vector__",ed="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dm(t)?4:j1(t)?9007199254740991:X1(t)?10:11:me(28295,{value:t})}function yi(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bl(t).isEqual(bl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=Nr(r.timestampValue),u=Nr(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return kr(r.bytesValue).isEqual(kr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return at(r.geoPointValue.latitude)===at(o.geoPointValue.latitude)&&at(r.geoPointValue.longitude)===at(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return at(r.integerValue)===at(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=at(r.doubleValue),u=at(o.doubleValue);return a===u?Xc(a)===Xc(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Gs(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(my(a)!==my(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!yi(a[d],u[d])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Fl(t,e){return(t.values||[]).find(n=>yi(n,e))!==void 0}function qs(t,e){if(t===e)return 0;const n=Mr(t),i=Mr(e);if(n!==i)return Re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=at(o.integerValue||o.doubleValue),d=at(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return _y(t.timestampValue,e.timestampValue);case 4:return _y(bl(t),bl(e));case 5:return Qf(t.stringValue,e.stringValue);case 6:return function(o,a){const u=kr(o),d=kr(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const g=Re(u[h],d[h]);if(g!==0)return g}return Re(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Re(at(o.latitude),at(a.latitude));return u!==0?u:Re(at(o.longitude),at(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yy(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,C,b,D;const u=o.fields||{},d=a.fields||{},h=(v=u[ed])==null?void 0:v.arrayValue,g=(C=d[ed])==null?void 0:C.arrayValue,y=Re(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((D=g==null?void 0:g.values)==null?void 0:D.length)||0);return y!==0?y:yy(h,g)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Yu.mapValue&&a===Yu.mapValue)return 0;if(o===Yu.mapValue)return 1;if(a===Yu.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),h=a.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=Qf(d[y],g[y]);if(v!==0)return v;const C=qs(u[d[y]],h[g[y]]);if(C!==0)return C}return Re(d.length,g.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function _y(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Nr(t),i=Nr(e),r=Re(n.seconds,i.seconds);return r!==0?r:Re(n.nanos,i.nanos)}function yy(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=qs(n[r],i[r]);if(o)return o}return Re(n.length,i.length)}function $s(t){return Xf(t)}function Xf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Nr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Xf(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Xf(n.fields[a])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function yc(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bd(t);return e?16+yc(e):16;case 5:return 2*t.stringValue.length;case 6:return kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+yc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return wo(i.fields,(o,a)=>{r+=o.length+yc(a)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function jf(t){return!!t&&"integerValue"in t}function bm(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function Ty(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function X1(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[xw])==null?void 0:i.stringValue)===Aw}function ul(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ul(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ul(t.arrayValue.values[n]);return e}return{...t}}function j1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Q1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=ul(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];vc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){wo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Pn(ul(this.value))}}function Pw(t){const e=[];return wo(t.fields,(n,i)=>{const r=new Nt([n]);if(vc(i)){const o=Pw(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Bt(e,0,Te.min(),Te.min(),Te.min(),Pn.empty(),0)}static newFoundDocument(e,n,i,r){return new Bt(e,1,n,Te.min(),i,r,0)}static newNoDocument(e,n){return new Bt(e,2,n,Te.min(),Te.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,Te.min(),Te.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.position=e,this.inclusive=n}}function Ey(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=fe.comparator(fe.fromName(a.referenceValue),n.key):i=qs(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function eR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{}class mt extends Rw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new nR(e,n,i):n==="array-contains"?new oR(e,i):n==="in"?new sR(e,i):n==="not-in"?new aR(e,i):n==="array-contains-any"?new lR(e,i):new mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new iR(e,i):new rR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qs(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends Rw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vi(e,n)}matches(e){return Nw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nw(t){return t.op==="and"}function kw(t){return tR(t)&&Nw(t)}function tR(t){for(const e of t.filters)if(e instanceof vi)return!1;return!0}function ep(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+$s(t.value);if(kw(t))return t.filters.map(e=>ep(e)).join(",");{const e=t.filters.map(n=>ep(n)).join(",");return`${t.op}(${e})`}}function Mw(t,e){return t instanceof mt?function(i,r){return r instanceof mt&&i.op===r.op&&i.field.isEqual(r.field)&&yi(i.value,r.value)}(t,e):t instanceof vi?function(i,r){return r instanceof vi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&Mw(a,r.filters[u]),!0):!1}(t,e):void me(19439)}function Lw(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${$s(n.value)}`}(t):t instanceof vi?function(n){return n.op.toString()+" {"+n.getFilters().map(Lw).join(" ,")+"}"}(t):"Filter"}class nR extends mt{constructor(e,n,i){super(e,n,i),this.key=fe.fromName(i.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class iR extends mt{constructor(e,n){super(e,"in",n),this.keys=Dw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rR extends mt{constructor(e,n){super(e,"not-in",n),this.keys=Dw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Dw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>fe.fromName(i.referenceValue))}class oR extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bm(n)&&Fl(n.arrayValue,this.value)}}class sR extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class aR extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fl(this.value.arrayValue,n)}}class lR extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Fl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Sy(t,e=null,n=[],i=[],r=null,o=null,a=null){return new uR(t,e,n,i,r,o,a)}function Vm(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ep(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>$s(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>$s(i)).join(",")),e.Te=n}return e.Te}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function tp(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cR(t,e,n,i,r,o,a,u){return new Vd(t,e,n,i,r,o,a,u)}function bw(t){return new Vd(t)}function Cy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dR(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hR(t){return t.collectionGroup!==null}function cl(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new _t(Nt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new nd(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new nd(Nt.keyField(),i))}return e.Ie}function pi(t){const e=Ee(t);return e.Ee||(e.Ee=fR(e,cl(t))),e.Ee}function fR(t,e){if(t.limitType==="F")return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new nd(r.field,o)});const n=t.endAt?new td(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new td(t.startAt.position,t.startAt.inclusive):null;return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function np(t,e,n){return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fd(t,e){return Fm(pi(t),pi(e))&&t.limitType===e.limitType}function Vw(t){return`${Vm(pi(t))}|lt:${t.limitType}`}function is(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Lw(r)).join(", ")}]`),Dd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>$s(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>$s(r)).join(",")),`Target(${i})`}(pi(t))}; limitType=${t.limitType})`}function Ud(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):fe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of cl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const h=Ey(a,u,d);return a.inclusive?h<=0:h<0}(i.startAt,cl(i),r)||i.endAt&&!function(a,u,d){const h=Ey(a,u,d);return a.inclusive?h>=0:h>0}(i.endAt,cl(i),r))}(t,e)}function pR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fw(t){return(e,n)=>{let i=!1;for(const r of cl(t)){const o=mR(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function mR(t,e,n){const i=t.field.isKeyField()?fe.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),h=u.data.field(o);return d!==null&&h!==null?qs(d,h):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return Tw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new nt(fe.comparator);function Hi(){return gR}const Uw=new nt(fe.comparator);function Ya(...t){let e=Uw;for(const n of t)e=e.insert(n.key,n);return e}function Ow(t){let e=Uw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function lo(){return dl()}function Bw(){return dl()}function dl(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const _R=new nt(fe.comparator),yR=new _t(fe.comparator);function Ne(...t){let e=yR;for(const n of t)e=e.add(n);return e}const vR=new _t(Re);function TR(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function zw(t){return{integerValue:""+t}}function ER(t,e){return $1(e)?zw(e):Um(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this._=void 0}}function wR(t,e,n){return t instanceof id?function(r,o){const a={fields:{[Sw]:{stringValue:ww},[Iw]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Dm(o)&&(o=bd(o)),o&&(a.fields[Cw]=o),{mapValue:a}}(n,e):t instanceof Ul?Hw(t,e):t instanceof Ol?qw(t,e):function(r,o){const a=Gw(r,o),u=Iy(a)+Iy(r.Ae);return jf(a)&&jf(r.Ae)?zw(u):Um(r.serializer,u)}(t,e)}function SR(t,e,n){return t instanceof Ul?Hw(t,e):t instanceof Ol?qw(t,e):n}function Gw(t,e){return t instanceof rd?function(i){return jf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class id extends Od{}class Ul extends Od{constructor(e){super(),this.elements=e}}function Hw(t,e){const n=$w(e);for(const i of t.elements)n.some(r=>yi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ol extends Od{constructor(e){super(),this.elements=e}}function qw(t,e){let n=$w(e);for(const i of t.elements)n=n.filter(r=>!yi(r,i));return{arrayValue:{values:n}}}class rd extends Od{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Iy(t){return at(t.integerValue||t.doubleValue)}function $w(t){return bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CR(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Ul&&r instanceof Ul||i instanceof Ol&&r instanceof Ol?Gs(i.elements,r.elements,yi):i instanceof rd&&r instanceof rd?yi(i.Ae,r.Ae):i instanceof id&&r instanceof id}(t.transform,e.transform)}class IR{constructor(e,n){this.version=e,this.transformResults=n}}class mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bd{}function Ww(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Om(t.key,mi.none()):new Kl(t.key,t.data,mi.none());{const n=t.data,i=Pn.empty();let r=new _t(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Co(t.key,i,new $n(r.toArray()),mi.none())}}function xR(t,e,n){t instanceof Kl?function(r,o,a){const u=r.value.clone(),d=Ay(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Co?function(r,o,a){if(!Tc(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Ay(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(Kw(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function hl(t,e,n,i){return t instanceof Kl?function(o,a,u,d){if(!Tc(o.precondition,a))return u;const h=o.value.clone(),g=Py(o.fieldTransforms,d,a);return h.setAll(g),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof Co?function(o,a,u,d){if(!Tc(o.precondition,a))return u;const h=Py(o.fieldTransforms,d,a),g=a.data;return g.setAll(Kw(o)),g.setAll(h),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return Tc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function AR(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=Gw(i.transform,r||null);o!=null&&(n===null&&(n=Pn.empty()),n.set(i.field,o))}return n||null}function xy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Gs(i,r,(o,a)=>CR(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kl extends Bd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Co extends Bd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Kw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ay(t,e,n){const i=new Map;ze(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,SR(a,u,n[r]))}return i}function Py(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,wR(o,a,e))}return i}class Om extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PR extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&xR(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Bw();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=Ww(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(n,i)=>xy(n,i))&&Gs(this.baseMutations,e.baseMutations,(n,i)=>xy(n,i))}}class Bm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return _R}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Bm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Le;function MR(t){switch(t){case j.OK:return me(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function Jw(t){if(t===void 0)return Gi("GRPC error has no .code"),j.UNKNOWN;switch(t){case dt.OK:return j.OK;case dt.CANCELLED:return j.CANCELLED;case dt.UNKNOWN:return j.UNKNOWN;case dt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case dt.INTERNAL:return j.INTERNAL;case dt.UNAVAILABLE:return j.UNAVAILABLE;case dt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case dt.NOT_FOUND:return j.NOT_FOUND;case dt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case dt.ABORTED:return j.ABORTED;case dt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case dt.DATA_LOSS:return j.DATA_LOSS;default:return me(39323,{code:t})}}(Le=dt||(dt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Cr([4294967295,4294967295],0);function Ry(t){const e=LR().encode(t),n=new uw;return n.update(e),new Uint8Array(n.digest())}function Ny(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Cr([n,i],0),new Cr([r,o],0)]}class zm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Cr.fromNumber(i)));return r.compare(DR)===1&&(r=new Cr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ry(e),[i,r]=Ny(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new zm(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Ry(e),[i,r]=Ny(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.be(a)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new zd(Te.min(),r,new nt(Re),Hi(),Ne())}}class Jl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Jl(i,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=r}}class Zw{constructor(e,n){this.targetId=e,this.Ce=n}}class Yw{constructor(e,n,i=Lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class ky{constructor(){this.ve=0,this.Fe=My(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),i=Ne();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me(38017,{changeType:o})}}),new Jl(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=My()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class bR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.He=Qu(),this.Je=Qu(),this.Ze=new nt(Re)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(tp(o))if(i===0){const a=new fe(o.path);this.et(n,a,Bt.newNoDocument(a,Te.min()))}else ze(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=kr(i).toUint8Array()}catch(d){if(d instanceof Ew)return zs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new zm(a,r,o)}catch(d){return zs(d instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&tp(u.target)){const d=new fe(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Bt.newNoDocument(d,e))}o.Be&&(n.set(a,o.ke()),o.Ke())}});let i=Ne();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new zd(e,n,this.Ze,this.je,i);return this.je=Hi(),this.He=Qu(),this.Je=Qu(),this.Ze=new nt(Re),r}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.qe(n,1):r.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ky,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new _t(Re),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new _t(Re),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ky),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qu(){return new nt(fe.comparator)}function My(){return new nt(fe.comparator)}const VR={asc:"ASCENDING",desc:"DESCENDING"},FR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class OR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ip(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BR(t,e){return od(t,e.toTimestamp())}function gi(t){return ze(!!t,49232),Te.fromTimestamp(function(n){const i=Nr(n);return new Ye(i.seconds,i.nanos)}(t))}function Gm(t,e){return rp(t,e).canonicalString()}function rp(t,e){const n=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Xw(t){const e=Ze.fromString(t);return ze(iS(e),10190,{key:e.toString()}),e}function op(t,e){return Gm(t.databaseId,e.path)}function qh(t,e){const n=Xw(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(eS(n))}function jw(t,e){return Gm(t.databaseId,e)}function zR(t){const e=Xw(t);return e.length===4?Ze.emptyPath():eS(e)}function sp(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eS(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ly(t,e,n){return{name:op(t,e),fields:n.value.mapValue.fields}}function GR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:me(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(ze(g===void 0||typeof g=="string",58123),Lt.fromBase64String(g||"")):(ze(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Lt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){const g=h.code===void 0?j.UNKNOWN:Jw(h.code);return new ce(g,h.message||"")}(a);n=new Yw(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qh(t,i.document.name),o=gi(i.document.updateTime),a=i.document.createTime?gi(i.document.createTime):Te.min(),u=new Pn({mapValue:{fields:i.document.fields}}),d=Bt.newFoundDocument(r,o,a,u),h=i.targetIds||[],g=i.removedTargetIds||[];n=new Ec(h,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qh(t,i.document),o=i.readTime?gi(i.readTime):Te.min(),a=Bt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Ec([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qh(t,i.document),o=i.removedTargetIds||[];n=new Ec([],o,r,null)}else{if(!("filter"in e))return me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new kR(r,o),u=i.targetId;n=new Zw(u,a)}}return n}function HR(t,e){let n;if(e instanceof Kl)n={update:Ly(t,e.key,e.value)};else if(e instanceof Om)n={delete:op(t,e.key)};else if(e instanceof Co)n={update:Ly(t,e.key,e.data),updateMask:XR(e.fieldMask)};else{if(!(e instanceof PR))return me(16599,{dt:e.type});n={verify:op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof id)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ul)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ol)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof rd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw me(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:BR(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function qR(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?gi(r.updateTime):gi(o);return a.isEqual(Te.min())&&(a=gi(o)),new IR(a,r.transformResults||[])}(n,e))):[]}function $R(t,e){return{documents:[jw(t,e.path)]}}function WR(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=jw(t,r);const o=function(h){if(h.length!==0)return nS(vi.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(h){if(h.length!==0)return h.map(g=>function(v){return{field:rs(v.field),direction:ZR(v.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=ip(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function KR(t){let e=zR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ze(i===1,65062);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=tS(y);return v instanceof vi&&kw(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(b){return new nd(os(b.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Dd(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(y){const v=!!y.before,C=y.values||[];return new td(C,v)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const v=!y.before,C=y.values||[];return new td(C,v)}(n.endAt)),cR(e,r,a,o,u,"F",d,h)}function JR(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=os(n.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=os(n.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=os(n.unaryFilter.field);return mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=os(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(os(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vi.create(n.compositeFilter.filters.map(i=>tS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function ZR(t){return VR[t]}function YR(t){return FR[t]}function QR(t){return UR[t]}function rs(t){return{fieldPath:t.canonicalString()}}function os(t){return Nt.fromServerFormat(t.fieldPath)}function nS(t){return t instanceof mt?function(n){if(n.op==="=="){if(Ty(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ty(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(n.field),op:YR(n.op),value:n.value}}}(t):t instanceof vi?function(n){const i=n.getFilters().map(r=>nS(r));return i.length===1?i[0]:{compositeFilter:{op:QR(n.op),filters:i}}}(t):me(54877,{filter:t})}function XR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function rS(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,i,r,o=Te.min(),a=Te.min(),u=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.yt=e}}function eN(t){const e=KR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.Sn=new nN}addToCollectionParentIndex(e,n){return this.Sn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Rr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class nN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new _t(Ze.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new _t(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oS=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(oS,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ws(0)}static ar(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="LruGarbageCollector",iN=1048576;function Vy([t,e],[n,i]){const r=Re(t,n);return r===0?Re(e,i):r}class rN{constructor(e){this.Pr=e,this.buffer=new _t(Vy),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Vy(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){se(by,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?se(by,"Ignoring IndexedDB error during garbage collection: ",n):await js(n)}await this.Ar(3e5)})}}class sN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Ld.ce);const i=new rN(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.mr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Dy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,r,o,a,u,d,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,a=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,u=Date.now(),this.removeTargets(e,i,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(h=Date.now(),ns()<=De.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}}function aN(t,e){return new sN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&hl(i.mutation,r,$n.empty(),Ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ne()){const r=lo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Ya();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=lo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ne()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Hi();const a=dl(),u=function(){return dl()}();return n.forEach((d,h)=>{const g=i.get(h.key);r.has(h.key)&&(g===void 0||g.mutation instanceof Co)?o=o.insert(h.key,h):g!==void 0?(a.set(h.key,g.mutation.getFieldMask()),hl(g.mutation,h,g.mutation.getFieldMask(),Ye.now())):a.set(h.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((h,g)=>a.set(h,g)),n.forEach((h,g)=>u.set(h,new uN(g,a.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const i=dl();let r=new nt((a,u)=>a-u),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const h=n.get(d);if(h===null)return;let g=i.get(d)||$n.empty();g=u.applyToLocalView(h,g),i.set(d,g);const y=(r.get(u.batchId)||Ne()).add(d);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,g=d.value,y=Bw();g.forEach(v=>{if(!o.has(v)){const C=Ww(n.get(v),i.get(v));C!==null&&y.set(v,C),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return Q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return dR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(lo());let u=Dl,d=o;return a.next(h=>Q.forEach(h,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Q.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{d=d.insert(g,v)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,d,h,Ne())).next(g=>({batchId:u,changes:Ow(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(i=>{let r=Ya();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Ya();return this.indexManager.getCollectionParents(e,o).next(u=>Q.forEach(u,d=>{const h=function(y,v){return new Vd(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(g=>{g.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,h)=>{const g=h.getKey();a.get(g)===null&&(a=a.insert(g,Bt.newInvalidDocument(g)))});let u=Ya();return a.forEach((d,h)=>{const g=o.get(d);g!==void 0&&hl(g.mutation,h,$n.empty(),Ye.now()),Ud(n,h)&&(u=u.insert(d,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Q.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:gi(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(r){return{name:r.name,query:eN(r.bundledQuery),readTime:gi(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.overlays=new nt(fe.comparator),this.Lr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=lo();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.bt(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=lo(),o=n.length+1,a=new fe(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new nt((h,g)=>h-g);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let g=o.get(h.largestBatchId);g===null&&(g=lo(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=lo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=r)););return Q.resolve(u)}bt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new NR(n,i));let o=this.Lr.get(n);o===void 0&&(o=Ne(),this.Lr.set(n,o)),this.Lr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.kr=new _t(St.Kr),this.qr=new _t(St.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new St(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new St(e,n))}Qr(e,n){e.forEach(i=>this.removeReference(i,n))}Gr(e){const n=new fe(new Ze([])),i=new St(n,e),r=new St(n,e+1),o=[];return this.qr.forEachInRange([i,r],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new fe(new Ze([])),i=new St(n,e),r=new St(n,e+1);let o=Ne();return this.qr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new St(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return fe.comparator(e.key,n.key)||Re(e.Hr,n.Hr)}static Ur(e,n){return Re(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new _t(St.Kr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new RR(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Jr=this.Jr.add(new St(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,n){return Q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Lm:this.Yn-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new St(n,0),r=new St(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,r],a=>{const u=this.Zr(a.Hr);o.push(u)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _t(Re);return n.forEach(r=>{const o=new St(r,0),a=new St(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],u=>{i=i.add(u.Hr)})}),Q.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;fe.isDocumentKey(o)||(o=o.child(""));const a=new St(new fe(o),0);let u=new _t(Re);return this.Jr.forEachWhile(d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(u=u.add(d.Hr)),!0)},a),Q.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ze(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Q.forEach(n.mutations,r=>{const o=new St(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,n){const i=new St(n,0),r=this.Jr.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.ti=e,this.docs=function(){return new nt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let i=Hi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Bt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Hi();const a=n.path,u=new fe(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||z1(B1(g),i)<=0||(r.has(g.key)||Ud(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){me(9500)}ni(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new gN(this)}getSize(e){return Q.resolve(this.size)}}class gN extends lN{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.persistence=e,this.ri=new So(n=>Vm(n),Fm),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.ii=0,this.si=new Hm,this.targetCount=0,this.oi=Ws._r()}forEachTarget(e,n){return this.ri.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Q.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.lr(n),Q.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ri.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this._i={},this.overlays={},this.ai=new Ld(0),this.ui=!1,this.ui=!0,this.ci=new fN,this.referenceDelegate=e(this),this.li=new _N(this),this.indexManager=new tN,this.remoteDocumentCache=function(r){return new mN(r)}(i=>this.referenceDelegate.hi(i)),this.serializer=new jR(n),this.Pi=new dN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new pN(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new yN(this.ai.next());return this.referenceDelegate.Ti(),i(r).next(o=>this.referenceDelegate.Ii(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,n){return Q.or(Object.values(this._i).map(i=>()=>i.containsKey(e,n)))}}class yN extends H1{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Ri=new Hm,this.Ai=null}static Vi(e){return new qm(e)}get di(){if(this.Ai)return this.Ai;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(r=>this.di.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.di,i=>{const r=fe.fromPath(i);return this.mi(e,r).next(o=>{o||n.removeEntry(r,Te.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class sd{constructor(e,n){this.persistence=e,this.fi=new So(i=>W1(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=aN(this,n)}static Vi(e,n){return new sd(e,n)}Ti(){}Ii(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}pr(e){let n=0;return this.mr(e,i=>{n++}).next(()=>n)}mr(e,n){return Q.forEach(this.fi,(i,r)=>this.wr(e,i,r).next(o=>o?Q.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ni(e,a=>this.wr(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Te.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Q.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yc(e.data.value)),n}wr(e,n,i){return Q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.fi.get(n);return Q.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=r}static Es(e,n){let i=Ne(),r=Ne();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new $m(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return aP()?8:q1(oP())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.gs(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new vN;return this.ys(e,n,a).next(u=>{if(o.result=u,this.As)return this.ws(e,n,a,u.size)})}).next(()=>o.result)}ws(e,n,i,r){return i.documentReadCount<this.Vs?(ns()<=De.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(ns()<=De.DEBUG&&se("QueryEngine","Query:",is(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(ns()<=De.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(n))):Q.resolve())}gs(e,n){if(Cy(n))return Q.resolve(null);let i=pi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=np(n,null,"F"),i=pi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Ne(...o);return this.fs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const h=this.bs(n,u);return this.Ss(n,h,a,d.readTime)?this.gs(e,np(n,null,"F")):this.Ds(e,h,n,d)}))})))}ps(e,n,i,r){return Cy(n)||r.isEqual(Te.min())?Q.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(n,o);return this.Ss(n,a,i,r)?Q.resolve(null):(ns()<=De.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),is(n)),this.Ds(e,a,n,O1(r,Dl)).next(u=>u))})}bs(e,n){let i=new _t(Fw(e));return n.forEach((r,o)=>{Ud(e,o)&&(i=i.add(o))}),i}Ss(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ys(e,n,i){return ns()<=De.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",is(n)),this.fs.getDocumentsMatchingQuery(e,n,Rr.min(),i)}Ds(e,n,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",EN=3e8;class wN{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.vs=new nt(Re),this.Fs=new So(o=>Vm(o),Fm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function SN(t,e,n,i){return new wN(t,e,n,i)}async function aS(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=Ne();for(const h of r){a.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(h=>({Ns:h,removedBatchIds:a,addedBatchIds:u}))})})}function CN(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return function(u,d,h,g){const y=h.batch,v=y.keys();let C=Q.resolve();return v.forEach(b=>{C=C.next(()=>g.getEntry(d,b)).next(D=>{const U=h.docVersions.get(b);ze(U!==null,48541),D.version.compareTo(U)<0&&(y.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),g.addEntry(D)))})}),C.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=Ne();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function lS(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function IN(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});r=n.vs;const u=[];e.targetChanges.forEach((g,y)=>{const v=r.get(y);if(!v)return;u.push(n.li.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.li.addMatchingKeys(o,g.addedDocuments,y)));let C=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?C=C.withResumeToken(Lt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,i)),r=r.insert(y,C),function(D,U,x){return D.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=EN?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(v,C,g)&&u.push(n.li.updateTargetData(o,C))});let d=Hi(),h=Ne();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(xN(o,a,e.documentUpdates).next(g=>{d=g.Bs,h=g.Ls})),!i.isEqual(Te.min())){const g=n.li.getLastRemoteSnapshotVersion(o).next(y=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return Q.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,h)).next(()=>d)}).then(o=>(n.vs=r,o))}function xN(t,e,n){let i=Ne(),r=Ne();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Hi();return n.forEach((u,d)=>{const h=o.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Te.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):se(Wm,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)}),{Bs:a,Ls:r}})}function AN(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Lm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function PN(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.li.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.li.allocateTargetId(i).next(a=>(r=new hr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i})}async function ap(t,e,n){const i=Ee(t),r=i.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ea(a))throw a;se(Wm,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function Fy(t,e,n){const i=Ee(t);let r=Te.min(),o=Ne();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,h,g){const y=Ee(d),v=y.Fs.get(g);return v!==void 0?Q.resolve(y.vs.get(v)):y.li.getTargetData(h,g)}(i,a,pi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?r:Te.min(),n?o:Ne())).next(u=>(RN(i,pR(e),u),{documents:u,ks:o})))}function RN(t,e,n){let i=t.Ms.get(e)||Te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Ms.set(e,i)}class Uy{constructor(){this.activeTargetIds=TR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NN{constructor(){this.vo=new Uy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Uy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="ConnectivityMonitor";class By{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){se(Oy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){se(Oy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function lp(){return Xu===null?Xu=function(){return 268435456+Math.round(2147483648*Math.random())}():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="RestConnection",MN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class LN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===jc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const a=lp(),u=this.Qo(e,n.toUriEncodedString());se($h,`Sending RPC '${e}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,r,o);const{host:h}=new URL(u),g=Pm(h);return this.zo(e,u,d,i,g).then(y=>(se($h,`Received RPC '${e}' ${a}: `,y),y),y=>{throw zs($h,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",i),y})}jo(e,n,i,r,o,a){return this.Wo(e,n,i,r,o)}Go(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Qo(e,n){const i=MN[e];let r=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection",Ga=(t,e,n)=>{t.listen(e,i=>{try{n(i)}catch(r){setTimeout(()=>{throw r},0)}})};class Ps extends LN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ps.c_){const e=fw();Ga(e,hw.STAT_EVENT,n=>{n.stat===Yf.PROXY?se(Ft,"STAT_EVENT: detected buffering proxy"):n.stat===Yf.NOPROXY&&se(Ft,"STAT_EVENT: detected no buffering proxy")}),Ps.c_=!0}}zo(e,n,i,r,o){const a=lp();return new Promise((u,d)=>{const h=new cw;h.setWithCredentials(!0),h.listenOnce(dw.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case _c.NO_ERROR:const y=h.getResponseJson();se(Ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case _c.TIMEOUT:se(Ft,`RPC '${e}' ${a} timed out`),d(new ce(j.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const v=h.getStatus();if(se(Ft,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const b=C==null?void 0:C.error;if(b&&b.status&&b.message){const D=function(x){const R=x.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(R)>=0?R:j.UNKNOWN}(b.status);d(new ce(D,b.message))}else d(new ce(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new ce(j.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{se(Ft,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(r);se(Ft,`RPC '${e}' ${a} sending request:`,r),h.send(n,"POST",g,i,15)})}T_(e,n,i){const r=lp(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const h=o.join("");se(Ft,`Creating RPC '${e}' stream ${r}: ${h}`,u);const g=a.createWebChannel(h,u);this.I_(g);let y=!1,v=!1;const C=new DN({Ho:b=>{v?se(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(y||(se(Ft,`Opening RPC '${e}' stream ${r} transport.`),g.open(),y=!0),se(Ft,`RPC '${e}' stream ${r} sending:`,b),g.send(b))},Jo:()=>g.close()});return Ga(g,Za.EventType.OPEN,()=>{v||(se(Ft,`RPC '${e}' stream ${r} transport opened.`),C.i_())}),Ga(g,Za.EventType.CLOSE,()=>{v||(v=!0,se(Ft,`RPC '${e}' stream ${r} transport closed`),C.o_(),this.E_(g))}),Ga(g,Za.EventType.ERROR,b=>{v||(v=!0,zs(Ft,`RPC '${e}' stream ${r} transport errored. Name:`,b.name,"Message:",b.message),C.o_(new ce(j.UNAVAILABLE,"The operation could not be completed")))}),Ga(g,Za.EventType.MESSAGE,b=>{var D;if(!v){const U=b.data[0];ze(!!U,16349);const x=U,R=(x==null?void 0:x.error)||((D=x[0])==null?void 0:D.error);if(R){se(Ft,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let G=function(k){const P=dt[k];if(P!==void 0)return Jw(P)}(M),Z=R.message;G===void 0&&(G=j.INTERNAL,Z="Unknown error status: "+M+" with message "+R.message),v=!0,C.o_(new ce(G,Z)),g.close()}else se(Ft,`RPC '${e}' stream ${r} received:`,U),C.__(U)}}),Ps.u_(),setTimeout(()=>{C.s_()},0),C}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return pw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){return new Ps(t)}function Wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){return new OR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ps.c_=!1;class uS{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=r,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="PersistentStream";class cS{constructor(e,n,i,r,o,a,u,d){this.Ci=e,this.b_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new ce(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.H_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(se(zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VN extends cS{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GR(this.serializer,e),i=function(o){if(!("targetChange"in o))return Te.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?gi(a.readTime):Te.min()}(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=sp(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=tp(d)?{documents:$R(o,d)}:{query:WR(o,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Qw(o,a.resumeToken);const h=ip(o,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Te.min())>0){u.readTime=od(o,a.snapshotVersion.toTimestamp());const h=ip(o,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const i=JR(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.K_(n)}}class FN extends cS{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qR(e.writeResults,e.commitTime),i=gi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=sp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>HR(this.serializer,i))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{}class ON extends UN{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,rp(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(j.UNKNOWN,o.toString())})}jo(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.jo(e,rp(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(j.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function BN(t,e,n,i){return new ON(t,e,n,i)}class zN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gi(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class GN{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{Io(this)&&(se(yo,"Restarting streams for network reachability change."),await async function(d){const h=Ee(d);h.Ea.add(4),await Zl(h),h.Va.set("Unknown"),h.Ea.delete(4),await Hd(h)}(this))})}),this.Va=new zN(i,r)}}async function Hd(t){if(Io(t))for(const e of t.Ra)await e(!0)}async function Zl(t){for(const e of t.Ra)await e(!1)}function dS(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ym(n)?Zm(n):ta(n).O_()&&Jm(n,e))}function Km(t,e){const n=Ee(t),i=ta(n);n.Ia.delete(e),i.O_()&&hS(n,e),n.Ia.size===0&&(i.O_()?i.L_():Io(n)&&n.Va.set("Unknown"))}function Jm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ta(t).Z_(e)}function hS(t,e){t.da.$e(e),ta(t).X_(e)}function Zm(t){t.da=new bR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ta(t).start(),t.Va.ua()}function Ym(t){return Io(t)&&!ta(t).x_()&&t.Ia.size>0}function Io(t){return Ee(t).Ea.size===0}function fS(t){t.da=void 0}async function HN(t){t.Va.set("Online")}async function qN(t){t.Ia.forEach((e,n)=>{Jm(t,e)})}async function $N(t,e){fS(t),Ym(t)?(t.Va.ha(e),Zm(t)):t.Va.set("Unknown")}async function WN(t,e,n){if(t.Va.set("Online"),e instanceof Yw&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.da.removeTarget(u))}(t,e)}catch(i){se(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ad(t,i)}else if(e instanceof Ec?t.da.Xe(e):e instanceof Zw?t.da.st(e):t.da.tt(e),!n.isEqual(Te.min()))try{const i=await lS(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.da.Tt(a);return u.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(h);g&&o.Ia.set(h,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,h)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(Lt.EMPTY_BYTE_STRING,g.snapshotVersion)),hS(o,d);const y=new hr(g.target,d,h,g.sequenceNumber);Jm(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se(yo,"Failed to raise snapshot:",i),await ad(t,i)}}async function ad(t,e,n){if(!ea(e))throw e;t.Ea.add(1),await Zl(t),t.Va.set("Offline"),n||(n=()=>lS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(yo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hd(t)})}function pS(t,e){return e().catch(n=>ad(t,n,e))}async function qd(t){const e=Ee(t),n=Lr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lm;for(;KN(e);)try{const r=await AN(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,JN(e,r)}catch(r){await ad(e,r)}mS(e)&&gS(e)}function KN(t){return Io(t)&&t.Ta.length<10}function JN(t,e){t.Ta.push(e);const n=Lr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function mS(t){return Io(t)&&!Lr(t).x_()&&t.Ta.length>0}function gS(t){Lr(t).start()}async function ZN(t){Lr(t).ra()}async function YN(t){const e=Lr(t);for(const n of t.Ta)e.ea(n.mutations)}async function QN(t,e,n){const i=t.Ta.shift(),r=Bm.from(i,e,n);await pS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await qd(t)}async function XN(t,e){e&&Lr(t).Y_&&await async function(i,r){if(function(a){return MR(a)&&a!==j.ABORTED}(r.code)){const o=i.Ta.shift();Lr(i).B_(),await pS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await qd(i)}}(t,e),mS(t)&&gS(t)}async function Gy(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),se(yo,"RemoteStore received new credentials");const i=Io(n);n.Ea.add(3),await Zl(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hd(n)}async function jN(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Hd(n)):e||(n.Ea.add(2),await Zl(n),n.Va.set("Unknown"))}function ta(t){return t.ma||(t.ma=function(n,i,r){const o=Ee(n);return o.sa(),new VN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Zo:HN.bind(null,t),Yo:qN.bind(null,t),t_:$N.bind(null,t),J_:WN.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Ym(t)?Zm(t):t.Va.set("Unknown")):(await t.ma.stop(),fS(t))})),t.ma}function Lr(t){return t.fa||(t.fa=function(n,i,r){const o=Ee(n);return o.sa(),new FN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:ZN.bind(null,t),t_:XN.bind(null,t),ta:YN.bind(null,t),na:QN.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await qd(t)):(await t.fa.stop(),t.Ta.length>0&&(se(yo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Qm(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(Gi("AsyncQueue",`${e}: ${t}`),ea(t))return new ce(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{static emptySet(e){return new Rs(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||fe.comparator(n.key,i.key):(n,i)=>fe.comparator(n.key,i.key),this.keyedMap=Ya(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Rs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.ga=new nt(fe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ks{constructor(e,n,i,r,o,a,u,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ks(e,n,Rs.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class tk{constructor(){this.queries=qy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ee(n),o=r.queries;r.queries=qy(),o.forEach((a,u)=>{for(const d of u.ba)d.onError(i)})})(this,new ce(j.ABORTED,"Firestore shutting down"))}}function qy(){return new So(t=>Vw(t),Fd)}async function nk(t,e){const n=Ee(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.Da()&&(i=2):(o=new ek,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Xm(a,`Initialization of query '${is(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&jm(n)}async function ik(t,e){const n=Ee(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?r=e.Da()?0:1:!o.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function rk(t,e){const n=Ee(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.ba)u.Fa(r)&&(i=!0);a.wa=r}}i&&jm(n)}function ok(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const o of r.ba)o.onError(n);i.queries.delete(e)}function jm(t){t.Ca.forEach(e=>{e.next()})}var up,$y;($y=up||(up={})).Ma="default",$y.Cache="cache";class sk{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ks(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class ak{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ne(),this.mutatedKeys=Ne(),this.eu=Fw(e),this.tu=new Rs(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Hy,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,y)=>{const v=r.get(g),C=Ud(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),D=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;v&&C?v.data.isEqual(C.data)?b!==D&&(i.track({type:3,doc:C}),U=!0):this.su(v,C)||(i.track({type:2,doc:C}),U=!0,(d&&this.eu(C,d)>0||h&&this.eu(C,h)<0)&&(u=!0)):!v&&C?(i.track({type:0,doc:C}),U=!0):v&&!C&&(i.track({type:1,doc:v}),U=!0,(d||h)&&(u=!0)),U&&(C?(a=a.add(C),o=D?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:a,iu:i,Ss:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((g,y)=>function(C,b){const D=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Vt:U})}};return D(C)-D(b)}(g.type,y.type)||this.eu(g.doc,y.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],d=this.Ya.size===0&&this.current&&!r?1:0,h=d!==this.Xa;return this.Xa=d,a.length!==0||h?{snapshot:new Ks(this.query,e.tu,o,a,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ne(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new yS(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new _S(i))}),n}cu(e){this.Za=e.ks,this.Ya=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ks.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const eg="SyncEngine";class lk{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class uk{constructor(e){this.key=e,this.hu=!1}}class ck{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new So(u=>Vw(u),Fd),this.Iu=new Map,this.Eu=new Set,this.Ru=new nt(fe.comparator),this.Au=new Map,this.Vu=new Hm,this.du={},this.mu=new Map,this.fu=Ws.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dk(t,e,n=!0){const i=CS(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await vS(i,e,n,!0),r}async function hk(t,e){const n=CS(t);await vS(n,e,!0,!1)}async function vS(t,e,n,i){const r=await PN(t.localStore,pi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await fk(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&dS(t.remoteStore,r),u}async function fk(t,e,n,i,r){t.pu=(y,v,C)=>async function(D,U,x,R){let M=U.view.ru(x);M.Ss&&(M=await Fy(D.localStore,U.query,!1).then(({documents:k})=>U.view.ru(k,M)));const G=R&&R.targetChanges.get(U.targetId),Z=R&&R.targetMismatches.get(U.targetId)!=null,Y=U.view.applyChanges(M,D.isPrimaryClient,G,Z);return Ky(D,U.targetId,Y.au),Y.snapshot}(t,y,v,C);const o=await Fy(t.localStore,e,!0),a=new ak(e,o.ks),u=a.ru(o.documents),d=Jl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(u,t.isPrimaryClient,d);Ky(t,n,h.au);const g=new lk(e,n,a);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function pk(t,e,n){const i=Ee(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Fd(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ap(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Km(i.remoteStore,r.targetId),cp(i,r.targetId)}).catch(js)):(cp(i,r.targetId),await ap(i.localStore,r.targetId,!0))}async function mk(t,e){const n=Ee(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Km(n.remoteStore,i.targetId))}async function gk(t,e,n){const i=Sk(t);try{const r=await function(a,u){const d=Ee(a),h=Ye.now(),g=u.reduce((C,b)=>C.add(b.key),Ne());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=Hi(),D=Ne();return d.xs.getEntries(C,g).next(U=>{b=U,b.forEach((x,R)=>{R.isValidDocument()||(D=D.add(x))})}).next(()=>d.localDocuments.getOverlayedDocuments(C,b)).next(U=>{y=U;const x=[];for(const R of u){const M=AR(R,y.get(R.key).overlayedDocument);M!=null&&x.push(new Co(R.key,M,Pw(M.value.mapValue),mi.exists(!0)))}return d.mutationQueue.addMutationBatch(C,h,x,u)}).next(U=>{v=U;const x=U.applyToLocalDocumentSet(y,D);return d.documentOverlayCache.saveOverlays(C,U.batchId,x)})}).then(()=>({batchId:v.batchId,changes:Ow(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let h=a.du[a.currentUser.toKey()];h||(h=new nt(Re)),h=h.insert(u,d),a.du[a.currentUser.toKey()]=h}(i,r.batchId,n),await Yl(i,r.changes),await qd(i.remoteStore)}catch(r){const o=Xm(r,"Failed to persist write");n.reject(o)}}async function TS(t,e){const n=Ee(t);try{const i=await IN(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ze(a.hu,14607):r.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))}),await Yl(n,i,e)}catch(i){await js(i)}}function Wy(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ee(a);d.onlineState=u;let h=!1;d.queries.forEach((g,y)=>{for(const v of y.ba)v.va(u)&&(h=!0)}),h&&jm(d)}(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _k(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new nt(fe.comparator);a=a.insert(o,Bt.newNoDocument(o,Te.min()));const u=Ne().add(o),d=new zd(Te.min(),new Map,new nt(Re),a,u);await TS(i,d),i.Ru=i.Ru.remove(o),i.Au.delete(e),tg(i)}else await ap(i.localStore,e,!1).then(()=>cp(i,e,n)).catch(js)}async function yk(t,e){const n=Ee(t),i=e.batch.batchId;try{const r=await CN(n.localStore,e);wS(n,i,null),ES(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Yl(n,r)}catch(r){await js(r)}}async function vk(t,e,n){const i=Ee(t);try{const r=await function(a,u){const d=Ee(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return d.mutationQueue.lookupMutationBatch(h,u).next(y=>(ze(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(h,y))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>d.localDocuments.getDocuments(h,g))})}(i.localStore,e);wS(i,e,n),ES(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Yl(i,r)}catch(r){await js(r)}}function ES(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function wS(t,e,n){const i=Ee(t);let r=i.du[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function cp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(i=>{t.Vu.containsKey(i)||SS(t,i)})}function SS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Km(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),tg(t))}function Ky(t,e,n){for(const i of n)i instanceof _S?(t.Vu.addReference(i.key,e),Tk(t,i)):i instanceof yS?(se(eg,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||SS(t,i.key)):me(19791,{wu:i})}function Tk(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(se(eg,"New document in limbo: "+n),t.Eu.add(i),tg(t))}function tg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new fe(Ze.fromString(e)),i=t.fu.next();t.Au.set(i,new uk(n)),t.Ru=t.Ru.insert(n,i),dS(t.remoteStore,new hr(pi(bw(n.path)),i,"TargetPurposeLimboResolution",Ld.ce))}}async function Yl(t,e,n){const i=Ee(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,d)=>{a.push(i.pu(d,e,n).then(h=>{var g;if((h||n)&&i.isPrimaryClient){const y=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(h){r.push(h);const y=$m.Es(d.targetId,h);o.push(y)}}))}),await Promise.all(a),i.Pu.J_(r),await async function(d,h){const g=Ee(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(h,v=>Q.forEach(v.Ts,C=>g.persistence.referenceDelegate.addReference(y,v.targetId,C)).next(()=>Q.forEach(v.Is,C=>g.persistence.referenceDelegate.removeReference(y,v.targetId,C)))))}catch(y){if(!ea(y))throw y;se(Wm,"Failed to update sequence numbers: "+y)}for(const y of h){const v=y.targetId;if(!y.fromCache){const C=g.vs.get(v),b=C.snapshotVersion,D=C.withLastLimboFreeSnapshotVersion(b);g.vs=g.vs.insert(v,D)}}}(i.localStore,o))}async function Ek(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){se(eg,"User change. New user:",e.toKey());const i=await aS(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(d=>{d.reject(new ce(j.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Yl(n,i.Ns)}}function wk(t,e){const n=Ee(t),i=n.Au.get(e);if(i&&i.hu)return Ne().add(i.key);{let r=Ne();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function CS(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_k.bind(null,e),e.Pu.J_=rk.bind(null,e.eventManager),e.Pu.yu=ok.bind(null,e.eventManager),e}function Sk(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vk.bind(null,e),e}class ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return SN(this.persistence,new TN,e.initialUser,this.serializer)}Cu(e){return new sS(qm.Vi,this.serializer)}Du(e){return new NN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ld.provider={build:()=>new ld};class Ck extends ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof sd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oN(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new sS(i=>sd.Vi(i,n),this.serializer)}}class dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ek.bind(null,this.syncEngine),await jN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tk}()}createDatastore(e){const n=Gd(e.databaseInfo.databaseId),i=bN(e.databaseInfo);return BN(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new GN(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Wy(this.syncEngine,n,0),function(){return By.v()?new By:new kN}())}createSyncEngine(e,n){return function(r,o,a,u,d,h,g){const y=new ck(r,o,a,u,d,h);return g&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ee(r);se(yo,"RemoteStore shutting down."),o.Ea.add(5),await Zl(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dp.provider={build:()=>new dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class xk{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se(Dr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se(Dr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kh(t,e){t.asyncQueue.verifyOperationInProgress(),se(Dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await aS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ak(t);se(Dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Gy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Gy(e.remoteStore,r)),t._onlineComponents=e}async function Ak(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Dr,"Using user provided OfflineComponentProvider");try{await Kh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await Kh(t,new ld)}}else se(Dr,"Using default OfflineComponentProvider"),await Kh(t,new Ck(void 0));return t._offlineComponents}async function IS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Dr,"Using user provided OnlineComponentProvider"),await Jy(t,t._uninitializedComponentsProvider._online)):(se(Dr,"Using default OnlineComponentProvider"),await Jy(t,new dp))),t._onlineComponents}function Pk(t){return IS(t).then(e=>e.syncEngine)}async function Rk(t){const e=await IS(t),n=e.eventManager;return n.onListen=dk.bind(null,e.syncEngine),n.onUnlisten=pk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mk.bind(null,e.syncEngine),n}function Nk(t,e,n={}){const i=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,d,h){const g=new Ik({next:v=>{g.Nu(),a.enqueueAndForget(()=>ik(o,y)),v.fromCache&&d.source==="server"?h.reject(new ce(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new sk(u,g,{includeMetadataChanges:!0,Ka:!0});return nk(o,y)}(await Rk(t),t.asyncQueue,e,n,i)),i.promise}function kk(t,e){const n=new Ir;return t.asyncQueue.enqueueAndForget(async()=>gk(await Pk(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="ComponentProvider",Zy=new Map;function Lk(t,e,n,i,r){return new Z1(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firestore.googleapis.com",Yy=!0;class Qy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AS,this.ssl=Yy}else this.host=e.host,this.ssl=e.ssl??Yy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new ce(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new P1;switch(i.type){case"firstParty":return new M1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Zy.get(n);i&&(se(Mk,"Removing Datastore"),Zy.delete(n),i.terminate())}(this),Promise.resolve()}}function Dk(t,e,n,i={}){var h;t=Hs(t,$d);const r=Pm(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(eP(`https://${u}`),rP("Firestore",!0)),o.host!==AS&&o.host!==u&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:r,emulatorOptions:i};if(!Yc(d,a)&&(t._setSettings(d),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=Ut.MOCK_USER;else{g=tP(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ce(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ut(v)}t._authCredentials=new R1(new gw(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wd(this.firestore,e,this._query)}}class It{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Wl(n,It._jsonSchema))return new It(e,i||null,new fe(Ze.fromString(n.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:ft("string",It._jsonSchemaVersion),referencePath:ft("string")};class xr extends Wd{constructor(e,n,i){super(e,n,bw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new fe(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function bk(t,e,...n){if(t=Nl(t),_w("collection","path",e),t instanceof $d){const i=Ze.fromString(e,...n);return dy(i),new xr(t,null,i)}{if(!(t instanceof It||t instanceof xr))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ze.fromString(e,...n));return dy(i),new xr(t.firestore,null,i)}}function PS(t,e,...n){if(t=Nl(t),arguments.length===1&&(e=km.newId()),_w("doc","path",e),t instanceof $d){const i=Ze.fromString(e,...n);return cy(i),new It(t,null,new fe(i))}{if(!(t instanceof It||t instanceof xr))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ze.fromString(e,...n));return cy(i),new It(t.firestore,t instanceof xr?t.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="AsyncQueue";class jy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uS(this,"async_queue_retry"),this._c=()=>{const i=Wh();i&&se(Xy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ir;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ea(e))throw e;se(Xy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",ev(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Qm.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&me(47125,{Pc:ev(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ev(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Kd extends $d{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new jy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jy(e),this._firestoreClient=void 0,await e}}}function Vk(t,e){const n=typeof t=="object"?t:p1(),i=typeof t=="string"?t:jc,r=u1(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=XA("firestore");o&&Dk(r,...o)}return r}function RS(t){if(t._terminated)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fk(t),t._firestoreClient}function Fk(t){var i,r,o,a;const e=t._freezeSettings(),n=Lk(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(r=t._app)==null?void 0:r.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Lt.fromBase64String(e))}catch(n){throw new ce(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:ft("string",Rn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:ft("string",_i._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jn(e.vectorValues);throw new ce(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:ft("string",Jn._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=/^__.*__$/;class Ok{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}function MS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{dataSource:t})}}class ng{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ud(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(MS(this.dataSource)&&Uk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Bk{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Gd(e)}createContext(e,n,i,r=!1){return new ng({dataSource:e,methodName:n,targetDoc:i,path:Nt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zk(t){const e=t._freezeSettings(),n=Gd(t._databaseId);return new Bk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gk(t,e,n,i,r,o={}){const a=t.createContext(o.merge||o.mergeFields?2:0,e,n,r);VS("Data must be an object, but it was:",a,i);const u=DS(i,a);let d,h;if(o.merge)d=new $n(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=ig(e,y,n);if(!a.contains(v))throw new ce(j.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);$k(g,v)||g.push(v)}d=new $n(g),h=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,h=a.fieldTransforms;return new Ok(new Pn(u),d,h)}function LS(t,e){if(bS(t=Nl(t)))return VS("Unsupported field value:",e,t),DS(t,e);if(t instanceof kS)return function(i,r){if(!MS(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=LS(u,r.childContextForArray(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Nl(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ER(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ye.fromDate(i);return{timestampValue:od(r.serializer,o)}}if(i instanceof Ye){const o=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:od(r.serializer,o)}}if(i instanceof _i)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:Qw(r.serializer,i._byteString)};if(i instanceof It){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Jn)return function(a,u){const d=a instanceof Jn?a.toArray():a;return{mapValue:{fields:{[xw]:{stringValue:Aw},[ed]:{arrayValue:{values:d.map(g=>{if(typeof g!="number")throw u.createError("VectorValues must only contain numeric values.");return Um(u.serializer,g)})}}}}}}(i,r);if(rS(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Mm(i)}`)}(t,e)}function DS(t,e){const n={};return Tw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(i,r)=>{const o=LS(r,e.childContextForField(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function bS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof _i||t instanceof Rn||t instanceof It||t instanceof kS||t instanceof Jn||rS(t))}function VS(t,e,n){if(!bS(n)||!yw(n)){const i=Mm(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function ig(t,e,n){if((e=Nl(e))instanceof NS)return e._internalPath;if(typeof e=="string")return qk(t,e);throw ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const Hk=new RegExp("[~\\*/\\[\\]]");function qk(t,e,n){if(e.search(Hk)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new NS(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ud(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new ce(j.INVALID_ARGUMENT,u+t+d)}function $k(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return wo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[ed].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>at(a.doubleValue));return new Jn(n)}convertGeoPoint(e){return new _i(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=bd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ze.fromString(e);ze(iS(i),9688,{name:e});const r=new Vl(i.get(1),i.get(3)),o=new fe(i.popFirst(5));return r.isEqual(n)||Gi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk extends Wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}const tv="@firebase/firestore",nv="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Jk extends FS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Yk(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ns extends FS{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ig("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ns._jsonSchema={type:ft("string",Ns._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class wc extends Ns{data(e={}){return super.data(e)}}class ks{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ju(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new wc(this._firestore,this._userDataWriter,i.key,i,new ju(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new wc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ju(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new wc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ju(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,g=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:Qk(u.type),doc:d,oldIndex:h,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Qk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks._jsonSchemaVersion="firestore/querySnapshot/1.0",ks._jsonSchema={type:ft("string",ks._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};function Xk(t){t=Hs(t,Wd);const e=Hs(t.firestore,Kd),n=RS(e),i=new Kk(e);return Zk(t._query),Nk(n,t._query).then(r=>new ks(e,i,t,r))}function jk(t,e,n){t=Hs(t,It);const i=Hs(t.firestore,Kd),r=Yk(t.converter,e),o=zk(i);return US(i,[Gk(o,"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,mi.none())])}function eM(t){return US(Hs(t.firestore,Kd),[new Om(t._key,mi.none())])}function US(t,e){const n=RS(t);return kk(n,e)}(function(e,n=!0){A1(f1),Qc(new kl("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Kd(new N1(i.getProvider("auth-internal")),new L1(a,i.getProvider("app-check-internal")),Y1(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),As(tv,nv,e),As(tv,nv,"esm2020")})();const hp={apiKey:"AIzaSyCAdwbA5u0oLe0m6oKryKwHx1XBiDEWnrk",authDomain:"izbb-taxi-management.firebaseapp.com",projectId:"izbb-taxi-management",storageBucket:"izbb-taxi-management.firebasestorage.app",messagingSenderId:"956551883987",appId:"1:956551883987:web:3f6bc14aad0c026f357826"},OS=hp.apiKey&&hp.apiKey!=="BURAYA_API_KEY_GELECEK";let Jh,BS;if(OS)try{iy().length===0?Jh=sw(hp):Jh=iy()[0],BS=Vk(Jh),console.log("Firebase baaryla balatld.")}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn("Firebase yaplandrmas yaplmam.");const iv=BS,rg="taxi_stands",og=()=>{if(!OS)throw new Error("Ltfen 'services/firebaseConfig.ts' dosyasn ap Firebase ayarlarnz giriniz. (apiKey, projectId vb.)");if(!iv)throw new Error("Firebase veritaban balants balatlamad. API anahtarlarnz ve internet balantnz kontrol edin.");return iv},tM=async()=>{const t=og();try{const e=await Xk(bk(t,rg)),n=[];return e.forEach(i=>{n.push(i.data())}),n}catch(e){throw console.error("getStands Error:",e),e}},rv=async t=>{const e=og(),n=PS(e,rg,t.id);await jk(n,t)},nM=async t=>{const e=og();await eM(PS(e,rg,t))},iM=(t,e)=>{var a,u,d,h;const n=[];if(["name","phone","city","district","neighborhood","street","address","capacity","ukomeDecisionNo","ukomeDate","ukomeSummary","status","officeType","responsibility","notes"].forEach(g=>{const y=String(t[g]||"").trim(),v=String(e[g]||"").trim();if(y!==v){if(!t[g]&&!e[g])return;n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:g,oldValue:y||"(Bo)",newValue:v||"(Bo)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}}),((a=t.location)==null?void 0:a.lat)!==((u=e.location)==null?void 0:u.lat)||((d=t.location)==null?void 0:d.lng)!==((h=e.location)==null?void 0:h.lng)){const g=t.location?`${t.location.lat}, ${t.location.lng}`:"(Konum Yok)",y=e.location?`${e.location.lat}, ${e.location.lng}`:"(Konum Yok)";g!==y&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"location",oldValue:g,newValue:y,changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}const r=(t.plates||[]).sort().join(", "),o=(e.plates||[]).sort().join(", ");return r!==o&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"plates",oldValue:r||"(Plaka Yok)",newValue:o||"(Plaka Yok)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate}),n};var fp=(t=>(t.ACTIVE="Aktif",t.PASSIVE="Pasif",t.PENDING="Onay Bekliyor",t))(fp||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),qe=(t,e)=>{const n=xe.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:d,...h},g)=>xe.createElement("svg",{ref:g,...rM,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${oM(t)}`,u].join(" "),...h},[...e.map(([y,v])=>xe.createElement(y,v)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=qe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=qe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=qe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=qe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=qe("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=qe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=qe("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=qe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=qe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=qe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=qe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=qe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=qe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=qe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=qe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=qe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=qe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=qe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=qe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=qe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=qe("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var SM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let CM,IM;function xM(){return{geminiUrl:CM,vertexUrl:IM}}function AM(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const a=xM();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(o=a.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wi{}function re(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let h=0;h<d.length;h++){const g=d[h];f(g,e.slice(o+1),n[h])}else for(const h of d)f(h,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];f(d[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(u=>c(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function PM(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),a=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&o.length>u)for(let d=u;d<o.length;d++){const h=o[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&a.add(h)}gp(t,r,o,0,a)}}function gp(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])gp(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(h=>!h.startsWith("_")&&!r.has(h)),d={};for(const h of u)d[h]=a[h];for(const[h,g]of Object.entries(d)){const y=[];for(const v of n.slice(i))v==="*"?y.push(h):y.push(v);f(a,y,g)}for(const h of u)delete a[h]}}else{const a=t;o in a&&gp(a[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RM(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function NM(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&f(e,["response"],MM(a)),e}function kM(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],LM(a)),e}function MM(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>DM(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function LM(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>bM(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function DM(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],zM(n)),e}function bM(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],GM(n)),e}function VM(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function FM(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function UM(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],OM(a)),e}function OM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function $S(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],BM(a)),e}function BM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function zM(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],lg(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function GM(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],lg(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sv||(sv={}));var av;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(av||(av={}));var lv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(lv||(lv={}));var fr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(fr||(fr={}));var uv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(uv||(uv={}));var cv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(cv||(cv={}));var dv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dv||(dv={}));var hv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(hv||(hv={}));var fv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(fv||(fv={}));var pv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pv||(pv={}));var mv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(mv||(mv={}));var gv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(gv||(gv={}));var _v;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_v||(_v={}));var yv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(yv||(yv={}));var vv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(vv||(vv={}));var Tv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Tv||(Tv={}));var Ev;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Ev||(Ev={}));var wv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wv||(wv={}));var Sv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Sv||(Sv={}));var Cv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Cv||(Cv={}));var Iv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Iv||(Iv={}));var dd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(dd||(dd={}));var xv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(xv||(xv={}));var Av;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Av||(Av={}));var Pv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Pv||(Pv={}));var _p;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_p||(_p={}));var Rv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Rv||(Rv={}));var Nv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Nv||(Nv={}));var yp;(function(t){t.COLLECTION="COLLECTION"})(yp||(yp={}));var kv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(kv||(kv={}));var Mv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Mv||(Mv={}));var Lv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Lv||(Lv={}));var Dv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Dv||(Dv={}));var bv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(bv||(bv={}));var Vv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Vv||(Vv={}));var Fv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fv||(Fv={}));var Uv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Uv||(Uv={}));var Ov;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ov||(Ov={}));var Bv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Bv||(Bv={}));var zv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(zv||(zv={}));var Gv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Gv||(Gv={}));var Hv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Hv||(Hv={}));var qv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(qv||(qv={}));var $v;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})($v||($v={}));var Wv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Wv||(Wv={}));var Kv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Kv||(Kv={}));var Jv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Jv||(Jv={}));var Zv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Zv||(Zv={}));var Yv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Yv||(Yv={}));var Qv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Qv||(Qv={}));var Xv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Xv||(Xv={}));var jv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jv||(jv={}));var e0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(e0||(e0={}));var t0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(t0||(t0={}));var n0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(n0||(n0={}));var i0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(i0||(i0={}));var vs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(vs||(vs={}));class vp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ha{get text(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const y=[];for(const v of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[C,b]of Object.entries(v))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(b!==null||b!==void 0)&&y.push(C);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;g=!0,h+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const y of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,C]of Object.entries(y))v!=="inlineData"&&(C!==null||C!==void 0)&&g.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(h+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,r,o,a,u,d,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,r,o,a,u,d,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.output}}class r0{}class o0{}class HM{}class qM{}class $M{}class WM{}class s0{}class a0{}class l0{}class KM{}class hd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hd;let r;const o=e;return n?r=kM(o):r=NM(o),Object.assign(i,r),i}}class u0{}class c0{}class d0{}class h0{}class JM{}class ZM{}class YM{}class ug{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ug,o=UM(e);return Object.assign(i,o),i}}class QM{}class XM{}class jM{}class f0{}class eL{get text(){var e,n,i;let r="",o=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(u))d!=="text"&&d!=="thought"&&h!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&o.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class tL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class cg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new cg,o=$S(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ue(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function WS(t,e){const n=Ue(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function KS(t){return Array.isArray(t)?t.map(e=>fd(e)):[fd(t)]}function fd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function JS(t){const e=fd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ZS(t){const e=fd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function p0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function YS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>p0(e)):[p0(t)]}function Tp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function m0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function g0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function zt(t){if(t==null)throw new Error("ContentUnion is required");return Tp(t)?t:{role:"user",parts:YS(t)}}function dg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=zt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=zt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>zt(n)):[zt(e)]}function Mn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(m0(t)||g0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zt(t)]}const e=[],n=[],i=Tp(t[0]);for(const r of t){const o=Tp(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(m0(r)||g0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:YS(n)}),e}function nL(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(fr).includes(n[0].toUpperCase())?n[0].toUpperCase():fr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(fr).includes(i.toUpperCase())?i.toUpperCase():fr.TYPE_UNSPECIFIED})}}function Ms(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&nL(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(fr).includes(u.toUpperCase())?u.toUpperCase():fr.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ms(u);else if(i.includes(a)){const d=[];for(const h of u){if(h.type=="null"){e.nullable=!0;continue}d.push(Ms(h))}e[a]=d}else if(r.includes(a)){const d={};for(const[h,g]of Object.entries(u))d[h]=Ms(g);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function hg(t){return Ms(t)}function fg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function pg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function na(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ms(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ms(e.response));return t}function ia(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function iL(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ki(t,e){if(typeof e!="string")throw new Error("name must be a string");return iL(t,e,"cachedContents")}function QS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ur(t){return lg(t)}function rL(t){return t!=null&&typeof t=="object"&&"name"in t}function oL(t){return t!=null&&typeof t=="object"&&"video"in t}function sL(t){return t!=null&&typeof t=="object"&&"uri"in t}function XS(t){var e;let n;if(rL(t)&&(n=t.name),!(sL(t)&&(n=t.uri,n===void 0))&&!(oL(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function jS(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function eC(t){for(const e of["models","tunedModels","publisherModels"])if(aL(t,e))return t[e];return[]}function aL(t,e){return t!==null&&typeof t=="object"&&e in t}function lL(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function uL(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const a=lL(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function tC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function cL(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ra(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function iC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dL(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$L(a))),f(e,["inlinedResponses"],o)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["inlinedEmbedContentResponses"],o)}return e}function hL(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function fL(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Sc(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&f(e,["state"],iC(r));const o=c(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const a=c(t,["metadata","endTime"]);a!=null&&f(e,["endTime"],a);const u=c(t,["metadata","updateTime"]);u!=null&&f(e,["updateTime"],u);const d=c(t,["metadata","model"]);d!=null&&f(e,["model"],d);const h=c(t,["metadata","output"]);return h!=null&&f(e,["dest"],dL(nC(h))),e}function Ep(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["state"]);r!=null&&f(e,["state"],iC(r));const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&f(e,["startTime"],u);const d=c(t,["endTime"]);d!=null&&f(e,["endTime"],d);const h=c(t,["updateTime"]);h!=null&&f(e,["updateTime"],h);const g=c(t,["model"]);g!=null&&f(e,["model"],g);const y=c(t,["inputConfig"]);y!=null&&f(e,["src"],pL(y));const v=c(t,["outputConfig"]);v!=null&&f(e,["dest"],hL(nC(v)));const C=c(t,["completionStats"]);return C!=null&&f(e,["completionStats"],C),e}function pL(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function mL(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>qL(t,a))),f(n,["requests","requests"],o)}return n}function gL(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _L(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function yL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],ra(t,i)),n}function vL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],ra(t,i)),n}function TL(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],EL(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&f(e,["index"],d);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(C=>C)),f(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&f(e,["urlContextMetadata"],y),e}function EL(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function rC(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>XL(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function wL(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function SL(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],fL(cL(r))),n}function _0(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],mL(t,tC(t,r)));const o=c(e,["config"]);return o!=null&&wL(o,n),n}function CL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Ue(t,i));const r=c(e,["src"]);r!=null&&f(n,["inputConfig"],gL(tC(t,r)));const o=c(e,["config"]);return o!=null&&SL(o,n),n}function IL(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function xL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],LL(t,r));const o=c(e,["config"]);return o!=null&&IL(o,n),n}function AL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],ra(t,i)),n}function PL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],ra(t,i)),n}function RL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function NL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function kL(t,e){const n={},i=c(e,["contents"]);if(i!=null){let o=dg(t,i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["requests[]","request","content"],o)}const r=c(e,["config"]);return r!=null&&(f(n,["_self"],ML(r,n)),PM(n,{"requests[].*":"requests[].request.*"})),n}function ML(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function LL(t,e){const n={},i=c(e,["fileName"]);i!=null&&f(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&f(n,["requests"],kL(t,r)),n}function DL(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function bL(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VL(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&f(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FL(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],rC(zt(r)));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const h=c(e,["maxOutputTokens"]);h!=null&&f(i,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const C=c(e,["presencePenalty"]);C!=null&&f(i,["presencePenalty"],C);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const D=c(e,["seed"]);D!=null&&f(i,["seed"],D);const U=c(e,["responseMimeType"]);U!=null&&f(i,["responseMimeType"],U);const x=c(e,["responseSchema"]);x!=null&&f(i,["responseSchema"],hg(x));const R=c(e,["responseJsonSchema"]);if(R!=null&&f(i,["responseJsonSchema"],R),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=c(e,["safetySettings"]);if(n!==void 0&&M!=null){let V=M;Array.isArray(V)&&(V=V.map(we=>jL(we))),f(n,["safetySettings"],V)}const G=c(e,["tools"]);if(n!==void 0&&G!=null){let V=ia(G);Array.isArray(V)&&(V=V.map(we=>tD(na(we)))),f(n,["tools"],V)}const Z=c(e,["toolConfig"]);if(n!==void 0&&Z!=null&&f(n,["toolConfig"],eD(Z)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=c(e,["cachedContent"]);n!==void 0&&Y!=null&&f(n,["cachedContent"],Ki(t,Y));const k=c(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const P=c(e,["mediaResolution"]);P!=null&&f(i,["mediaResolution"],P);const N=c(e,["speechConfig"]);if(N!=null&&f(i,["speechConfig"],fg(N)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=c(e,["thinkingConfig"]);F!=null&&f(i,["thinkingConfig"],F);const O=c(e,["imageConfig"]);O!=null&&f(i,["imageConfig"],HL(O));const z=c(e,["enableEnhancedCivicAnswers"]);if(z!=null&&f(i,["enableEnhancedCivicAnswers"],z),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function UL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>TL(h))),f(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function OL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],ra(t,i)),n}function BL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],ra(t,i)),n}function zL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function GL(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function HL(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["request","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let u=Mn(r);Array.isArray(u)&&(u=u.map(d=>rC(d))),f(n,["request","contents"],u)}const o=c(e,["metadata"]);o!=null&&f(n,["metadata"],o);const a=c(e,["config"]);return a!=null&&f(n,["request","generationConfig"],FL(t,a,c(n,["request"],{}))),n}function $L(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],UL(n));const i=c(t,["error"]);return i!=null&&f(e,["error"],i),e}function WL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function KL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const o=c(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function JL(t){const e={},n=c(t,["config"]);return n!=null&&WL(n,e),e}function ZL(t){const e={},n=c(t,["config"]);return n!=null&&KL(n,e),e}function YL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Sc(a))),f(e,["batchJobs"],o)}return e}function QL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Ep(a))),f(e,["batchJobs"],o)}return e}function XL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],DL(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],bL(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],_L(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function jL(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function eD(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&f(e,["functionCallingConfig"],VL(i)),e}function tD(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],zL(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],GL(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(qi||(qi={}));class xo{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nD extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xo(qi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=_0(this.apiClient,e),i=n._url,r=re("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,d=u.requests,h=[];for(const g of d){const y=Object.assign({},g);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const C=y.request;C.systemInstruction=v,y.request=C}h.push(y)}return u.requests=h,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=CL(this.apiClient,e);return u=re("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Ep(g))}else{const h=_0(this.apiClient,e);return u=re("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Sc(g))}}async createEmbeddingsInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xL(this.apiClient,e);return o=re("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Sc(d))}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=BL(this.apiClient,e);return u=re("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Ep(g))}else{const h=OL(this.apiClient,e);return u=re("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Sc(g))}}async cancel(e){var n,i,r,o;let a="",u={};if(this.apiClient.isVertexAI()){const d=vL(this.apiClient,e);a=re("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=yL(this.apiClient,e);a=re("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=ZL(e);return u=re("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=QL(g),v=new f0;return Object.assign(v,y),v})}else{const h=JL(e);return u=re("batches",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=YL(g),v=new f0;return Object.assign(v,y),v})}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=PL(this.apiClient,e);return u=re("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>NL(g))}else{const h=AL(this.apiClient,e);return u=re("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>RL(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iD(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function y0(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>xD(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function rD(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let g=Mn(a);Array.isArray(g)&&(g=g.map(y=>y0(y))),f(e,["contents"],g)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],y0(zt(u)));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>PD(y))),f(e,["tools"],g)}const h=c(t,["toolConfig"]);if(e!==void 0&&h!=null&&f(e,["toolConfig"],AD(h)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function oD(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let y=Mn(a);Array.isArray(y)&&(y=y.map(v=>v)),f(e,["contents"],y)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],zt(u));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>RD(v))),f(e,["tools"],y)}const h=c(t,["toolConfig"]);e!==void 0&&h!=null&&f(e,["toolConfig"],h);const g=c(t,["kmsKeyName"]);return e!==void 0&&g!=null&&f(e,["encryption_spec","kmsKeyName"],g),n}function sD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],WS(t,i));const r=c(e,["config"]);return r!=null&&rD(r,n),n}function aD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],WS(t,i));const r=c(e,["config"]);return r!=null&&oD(r,n),n}function lD(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function uD(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function cD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function dD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function hD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function fD(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pD(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&f(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mD(t){const e={},n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function gD(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function _D(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function yD(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function vD(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function TD(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function ED(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function wD(t){const e={},n=c(t,["config"]);return n!=null&&TD(n,e),e}function SD(t){const e={},n=c(t,["config"]);return n!=null&&ED(n,e),e}function CD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["cachedContents"],o)}return e}function ID(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["cachedContents"],o)}return e}function xD(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],hD(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],fD(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],iD(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function AD(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&f(e,["functionCallingConfig"],pD(i)),e}function PD(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],yD(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],vD(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function RD(t){const e={},n=c(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&f(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>mD(v))),f(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],d);const h=c(t,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function ND(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function kD(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function MD(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ki(t,i));const r=c(e,["config"]);return r!=null&&ND(r,n),n}function LD(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ki(t,i));const r=c(e,["config"]);return r!=null&&kD(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DD extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xo(qi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=aD(this.apiClient,e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const h=sD(this.apiClient,e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=_D(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const h=gD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=uD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=dD(g),v=new d0;return Object.assign(v,y),v})}else{const h=lD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=cD(g),v=new d0;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=LD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const h=MD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=SD(e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ID(g),v=new h0;return Object.assign(v,y),v})}else{const h=wD(e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=CD(g),v=new h0;return Object.assign(v,y),v})}}}function pd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function v0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function Zn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(C){return function(b){return Promise.resolve(b).then(C,y)}}function u(C,b){i[C]&&(r[C]=function(D){return new Promise(function(U,x){o.push([C,D,U,x])>1||d(C,D)})},b&&(r[C]=b(r[C])))}function d(C,b){try{h(i[C](b))}catch(D){v(o[0][3],D)}}function h(C){C.value instanceof ve?Promise.resolve(C.value.v).then(g,y):v(o[0][2],C)}function g(C){d("next",C)}function y(C){d("throw",C)}function v(C,b){C(b),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Yn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof v0=="function"?v0(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),r(u,d,a.done,a.value)})}}function r(o,a,u,d){Promise.resolve(d).then(function(h){o({value:h,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bD(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:oC(n)}function oC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function VD(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function T0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!oC(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class FD{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new UD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class UD{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),VD(o)}async sendMessage(e){var n;await this.sendPromise;const i=zt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,u;const d=await r,h=(a=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,g=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];g!=null&&(v=(u=g.slice(y))!==null&&u!==void 0?u:[]);const C=h?[h]:[];this.recordHistory(i,C,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=zt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?T0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Zn(this,arguments,function*(){var r,o,a,u,d,h;const g=[];try{for(var y=!0,v=Yn(e),C;C=yield ve(v.next()),r=C.done,!r;y=!0){u=C.value,y=!1;const b=u;if(bD(b)){const D=(h=(d=b.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content;D!==void 0&&g.push(D)}yield yield ve(b)}}catch(b){o={error:b}}finally{try{!y&&!r&&(a=v.return)&&(yield ve(a.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...T0(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Bl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OD(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function BD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function zD(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],XS(n)),e}function GD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function HD(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],XS(n)),e}function qD(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function $D(t){const e={},n=c(t,["config"]);return n!=null&&qD(n,e),e}function WD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KD extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xo(qi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$D(e);return o=re("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=WD(d),g=new QM;return Object.assign(g,h),g})}}async createInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OD(e);return o=re("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=BD(d),g=new XM;return Object.assign(g,h),g})}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HD(e);return o=re("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zD(e);return o=re("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=GD(d),g=new jM;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cc(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function JD(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>c2(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function ZD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function YD(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QD(t){const e={},n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function XD(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&f(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&f(e,["logprobs"],d);const h=c(t,["maxOutputTokens"]);h!=null&&f(e,["maxOutputTokens"],h);const g=c(t,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&f(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const C=c(t,["responseMimeType"]);C!=null&&f(e,["responseMimeType"],C);const b=c(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const D=c(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const U=c(t,["routingConfig"]);U!=null&&f(e,["routingConfig"],U);const x=c(t,["seed"]);x!=null&&f(e,["seed"],x);const R=c(t,["speechConfig"]);R!=null&&f(e,["speechConfig"],R);const M=c(t,["stopSequences"]);M!=null&&f(e,["stopSequences"],M);const G=c(t,["temperature"]);G!=null&&f(e,["temperature"],G);const Z=c(t,["thinkingConfig"]);Z!=null&&f(e,["thinkingConfig"],Z);const Y=c(t,["topK"]);Y!=null&&f(e,["topK"],Y);const k=c(t,["topP"]);if(k!=null&&f(e,["topP"],k),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jD(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function e2(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function t2(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const h=c(t,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],pg(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const C=c(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],JD(zt(b)));const D=c(t,["tools"]);if(e!==void 0&&D!=null){let Y=ia(D);Array.isArray(Y)&&(Y=Y.map(k=>h2(na(k)))),f(e,["setup","tools"],Y)}const U=c(t,["sessionResumption"]);e!==void 0&&U!=null&&f(e,["setup","sessionResumption"],d2(U));const x=c(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","inputAudioTranscription"],x);const R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const M=c(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const Z=c(t,["proactivity"]);if(e!==void 0&&Z!=null&&f(e,["setup","proactivity"],Z),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function n2(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],XD(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const h=c(t,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],pg(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const C=c(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],zt(b));const D=c(t,["tools"]);if(e!==void 0&&D!=null){let k=ia(D);Array.isArray(k)&&(k=k.map(P=>f2(na(P)))),f(e,["setup","tools"],k)}const U=c(t,["sessionResumption"]);e!==void 0&&U!=null&&f(e,["setup","sessionResumption"],U);const x=c(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","inputAudioTranscription"],x);const R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const M=c(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const Z=c(t,["proactivity"]);e!==void 0&&Z!=null&&f(e,["setup","proactivity"],Z);const Y=c(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&f(e,["setup","explicitVadSignal"],Y),n}function i2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],t2(r,n)),n}function r2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],n2(r,n)),n}function o2(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function s2(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["weightedPrompts"],i)}return e}function a2(t){const e={},n=c(t,["media"]);if(n!=null){let h=KS(n);Array.isArray(h)&&(h=h.map(g=>Cc(g))),f(e,["mediaChunks"],h)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],Cc(ZS(i)));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&f(e,["video"],Cc(JS(o)));const a=c(t,["text"]);a!=null&&f(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&f(e,["activityEnd"],d),e}function l2(t){const e={},n=c(t,["media"]);if(n!=null){let h=KS(n);Array.isArray(h)&&(h=h.map(g=>g)),f(e,["mediaChunks"],h)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],ZS(i));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&f(e,["video"],JS(o));const a=c(t,["text"]);a!=null&&f(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&f(e,["activityEnd"],d),e}function u2(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&f(e,["toolCall"],r);const o=c(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const a=c(t,["usageMetadata"]);a!=null&&f(e,["usageMetadata"],p2(a));const u=c(t,["goAway"]);u!=null&&f(e,["goAway"],u);const d=c(t,["sessionResumptionUpdate"]);d!=null&&f(e,["sessionResumptionUpdate"],d);const h=c(t,["voiceActivityDetectionSignal"]);h!=null&&f(e,["voiceActivityDetectionSignal"],h);const g=c(t,["voiceActivity"]);return g!=null&&f(e,["voiceActivity"],m2(g)),e}function c2(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],ZD(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],YD(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],Cc(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function d2(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function h2(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],jD(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],e2(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function f2(t){const e={},n=c(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&f(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>QD(v))),f(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],d);const h=c(t,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function p2(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const o=c(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const a=c(t,["thoughtsTokenCount"]);a!=null&&f(e,["thoughtsTokenCount"],a);const u=c(t,["totalTokenCount"]);u!=null&&f(e,["totalTokenCount"],u);const d=c(t,["promptTokensDetails"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(b=>b)),f(e,["promptTokensDetails"],C)}const h=c(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(b=>b)),f(e,["cacheTokensDetails"],C)}const g=c(t,["candidatesTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(b=>b)),f(e,["responseTokensDetails"],C)}const y=c(t,["toolUsePromptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(b=>b)),f(e,["toolUsePromptTokensDetails"],C)}const v=c(t,["trafficType"]);return v!=null&&f(e,["trafficType"],v),e}function m2(t){const e={},n=c(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _2(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],y2(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&f(e,["index"],d);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(C=>C)),f(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&f(e,["urlContextMetadata"],y),e}function y2(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function v2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let o=Mn(r);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}return n}function T2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["tokensInfo"],r)}return e}function E2(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&f(e,["statistics"],w2(i)),e}function w2(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Jd(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>kb(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function S2(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function C2(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function I2(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],zt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>uC(u))),f(e,["tools"],a)}const o=c(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],gb(o)),n}function x2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>Jd(u))),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&C2(o),n}function A2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&I2(o,n),n}function P2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function R2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function N2(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ue(t,i)),n}function k2(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ue(t,i)),n}function M2(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function L2(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function D2(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const h=c(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const C=c(t,["language"]);e!==void 0&&C!=null&&f(e,["parameters","language"],C);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const D=c(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const U=c(t,["addWatermark"]);e!==void 0&&U!=null&&f(e,["parameters","addWatermark"],U);const x=c(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const R=c(t,["editMode"]);e!==void 0&&R!=null&&f(e,["parameters","editMode"],R);const M=c(t,["baseSteps"]);return e!==void 0&&M!=null&&f(e,["parameters","editConfig","baseSteps"],M),n}function b2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Fb(d))),f(n,["instances[0]","referenceImages"],u)}const a=c(e,["config"]);return a!=null&&D2(a,n),n}function V2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Zd(o))),f(e,["generatedImages"],r)}return e}function F2(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function U2(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const o=c(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&f(e,["instances[]","mimeType"],a);const u=c(t,["autoTruncate"]);return e!==void 0&&u!=null&&f(e,["parameters","autoTruncate"],u),n}function O2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let u=dg(t,r);Array.isArray(u)&&(u=u.map(d=>d)),f(n,["requests[]","content"],u)}const o=c(e,["config"]);o!=null&&F2(o,n);const a=c(e,["model"]);return a!==void 0&&f(n,["requests[]","model"],Ue(t,a)),n}function B2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=dg(t,r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["instances[]","content"],a)}const o=c(e,["config"]);return o!=null&&U2(o,n),n}function z2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function G2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>E2(a))),f(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function H2(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function q2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function $2(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W2(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&f(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K2(t){const e={},n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function J2(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Jd(zt(r)));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const h=c(e,["maxOutputTokens"]);h!=null&&f(i,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const C=c(e,["presencePenalty"]);C!=null&&f(i,["presencePenalty"],C);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const D=c(e,["seed"]);D!=null&&f(i,["seed"],D);const U=c(e,["responseMimeType"]);U!=null&&f(i,["responseMimeType"],U);const x=c(e,["responseSchema"]);x!=null&&f(i,["responseSchema"],hg(x));const R=c(e,["responseJsonSchema"]);if(R!=null&&f(i,["responseJsonSchema"],R),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=c(e,["safetySettings"]);if(n!==void 0&&M!=null){let V=M;Array.isArray(V)&&(V=V.map(we=>Ub(we))),f(n,["safetySettings"],V)}const G=c(e,["tools"]);if(n!==void 0&&G!=null){let V=ia(G);Array.isArray(V)&&(V=V.map(we=>$b(na(we)))),f(n,["tools"],V)}const Z=c(e,["toolConfig"]);if(n!==void 0&&Z!=null&&f(n,["toolConfig"],qb(Z)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=c(e,["cachedContent"]);n!==void 0&&Y!=null&&f(n,["cachedContent"],Ki(t,Y));const k=c(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const P=c(e,["mediaResolution"]);P!=null&&f(i,["mediaResolution"],P);const N=c(e,["speechConfig"]);if(N!=null&&f(i,["speechConfig"],fg(N)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=c(e,["thinkingConfig"]);F!=null&&f(i,["thinkingConfig"],F);const O=c(e,["imageConfig"]);O!=null&&f(i,["imageConfig"],Eb(O));const z=c(e,["enableEnhancedCivicAnswers"]);if(z!=null&&f(i,["enableEnhancedCivicAnswers"],z),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Z2(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],zt(r));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const h=c(e,["maxOutputTokens"]);h!=null&&f(i,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const C=c(e,["presencePenalty"]);C!=null&&f(i,["presencePenalty"],C);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const D=c(e,["seed"]);D!=null&&f(i,["seed"],D);const U=c(e,["responseMimeType"]);U!=null&&f(i,["responseMimeType"],U);const x=c(e,["responseSchema"]);x!=null&&f(i,["responseSchema"],hg(x));const R=c(e,["responseJsonSchema"]);R!=null&&f(i,["responseJsonSchema"],R);const M=c(e,["routingConfig"]);M!=null&&f(i,["routingConfig"],M);const G=c(e,["modelSelectionConfig"]);G!=null&&f(i,["modelConfig"],G);const Z=c(e,["safetySettings"]);if(n!==void 0&&Z!=null){let ne=Z;Array.isArray(ne)&&(ne=ne.map(J=>J)),f(n,["safetySettings"],ne)}const Y=c(e,["tools"]);if(n!==void 0&&Y!=null){let ne=ia(Y);Array.isArray(ne)&&(ne=ne.map(J=>uC(na(J)))),f(n,["tools"],ne)}const k=c(e,["toolConfig"]);n!==void 0&&k!=null&&f(n,["toolConfig"],k);const P=c(e,["labels"]);n!==void 0&&P!=null&&f(n,["labels"],P);const N=c(e,["cachedContent"]);n!==void 0&&N!=null&&f(n,["cachedContent"],Ki(t,N));const F=c(e,["responseModalities"]);F!=null&&f(i,["responseModalities"],F);const O=c(e,["mediaResolution"]);O!=null&&f(i,["mediaResolution"],O);const z=c(e,["speechConfig"]);z!=null&&f(i,["speechConfig"],fg(z));const V=c(e,["audioTimestamp"]);V!=null&&f(i,["audioTimestamp"],V);const we=c(e,["thinkingConfig"]);we!=null&&f(i,["thinkingConfig"],we);const ot=c(e,["imageConfig"]);if(ot!=null&&f(i,["imageConfig"],wb(ot)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const $=c(e,["modelArmorConfig"]);return n!==void 0&&$!=null&&f(n,["modelArmorConfig"],$),i}function E0(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>Jd(u))),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],J2(t,o,n)),n}function w0(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],Z2(t,o,n)),n}function S0(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>_2(h))),f(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function C0(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["candidates"],h)}const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&f(e,["responseId"],u);const d=c(t,["usageMetadata"]);return d!=null&&f(e,["usageMetadata"],d),e}function Y2(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const o=c(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const u=c(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&f(e,["parameters","includeSafetyAttributes"],d);const h=c(t,["includeRaiReason"]);e!==void 0&&h!=null&&f(e,["parameters","includeRaiReason"],h);const g=c(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const v=c(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(t,["imageSize"]);if(e!==void 0&&C!=null&&f(e,["parameters","sampleImageSize"],C),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Q2(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const h=c(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const C=c(t,["language"]);e!==void 0&&C!=null&&f(e,["parameters","language"],C);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const D=c(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const U=c(t,["addWatermark"]);e!==void 0&&U!=null&&f(e,["parameters","addWatermark"],U);const x=c(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const R=c(t,["imageSize"]);e!==void 0&&R!=null&&f(e,["parameters","sampleImageSize"],R);const M=c(t,["enhancePrompt"]);return e!==void 0&&M!=null&&f(e,["parameters","enhancePrompt"],M),n}function X2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&Y2(o,n),n}function j2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&Q2(o,n),n}function eb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>hb(a))),f(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],aC(r)),e}function tb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Zd(a))),f(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],lC(r)),e}function nb(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["resolution"]);e!==void 0&&a!=null&&f(e,["parameters","resolution"],a);const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(t,["negativePrompt"]);e!==void 0&&d!=null&&f(e,["parameters","negativePrompt"],d);const h=c(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&f(e,["parameters","enhancePrompt"],h),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=c(t,["lastFrame"]);e!==void 0&&g!=null&&f(e,["instances[0]","lastFrame"],Yd(g));const y=c(t,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(C=>rV(C))),f(e,["instances[0]","referenceImages"],v)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ib(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const d=c(t,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const h=c(t,["resolution"]);e!==void 0&&h!=null&&f(e,["parameters","resolution"],h);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["pubsubTopic"]);e!==void 0&&y!=null&&f(e,["parameters","pubsubTopic"],y);const v=c(t,["negativePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","negativePrompt"],v);const C=c(t,["enhancePrompt"]);e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C);const b=c(t,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const D=c(t,["lastFrame"]);e!==void 0&&D!=null&&f(e,["instances[0]","lastFrame"],Xn(D));const U=c(t,["referenceImages"]);if(e!==void 0&&U!=null){let M=U;Array.isArray(M)&&(M=M.map(G=>oV(G))),f(e,["instances[0]","referenceImages"],M)}const x=c(t,["mask"]);e!==void 0&&x!=null&&f(e,["instances[0]","mask"],iV(x));const R=c(t,["compressionQuality"]);return e!==void 0&&R!=null&&f(e,["parameters","compressionQuality"],R),n}function rb(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&f(e,["response"],lb(a)),e}function ob(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],ub(a)),e}function sb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],Yd(o));const a=c(e,["video"]);a!=null&&f(n,["instances[0]","video"],cC(a));const u=c(e,["source"]);u!=null&&cb(u,n);const d=c(e,["config"]);return d!=null&&nb(d,n),n}function ab(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],Xn(o));const a=c(e,["video"]);a!=null&&f(n,["instances[0]","video"],dC(a));const u=c(e,["source"]);u!=null&&db(u,n);const d=c(e,["config"]);return d!=null&&ib(d,n),n}function lb(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>pb(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function ub(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>mb(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function cb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Yd(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],cC(o)),n}function db(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Xn(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],dC(o)),n}function hb(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],Sb(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],aC(r)),e}function Zd(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],sC(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&f(e,["safetyAttributes"],lC(r));const o=c(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function fb(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],sC(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["labels"],r)}return e}function pb(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],tV(n)),e}function mb(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],nV(n)),e}function gb(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&f(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&f(e,["logprobs"],d);const h=c(t,["maxOutputTokens"]);h!=null&&f(e,["maxOutputTokens"],h);const g=c(t,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&f(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const C=c(t,["responseMimeType"]);C!=null&&f(e,["responseMimeType"],C);const b=c(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const D=c(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const U=c(t,["routingConfig"]);U!=null&&f(e,["routingConfig"],U);const x=c(t,["seed"]);x!=null&&f(e,["seed"],x);const R=c(t,["speechConfig"]);R!=null&&f(e,["speechConfig"],R);const M=c(t,["stopSequences"]);M!=null&&f(e,["stopSequences"],M);const G=c(t,["temperature"]);G!=null&&f(e,["temperature"],G);const Z=c(t,["thinkingConfig"]);Z!=null&&f(e,["thinkingConfig"],Z);const Y=c(t,["topK"]);Y!=null&&f(e,["topK"],Y);const k=c(t,["topP"]);if(k!=null&&f(e,["topP"],k),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _b(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ue(t,i)),n}function yb(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ue(t,i)),n}function vb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Tb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Eb(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wb(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);i!=null&&f(e,["imageSize"],i);const r=c(t,["personGeneration"]);r!=null&&f(e,["personGeneration"],r);const o=c(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const a=c(t,["outputCompressionQuality"]);return a!=null&&f(e,["imageOutputOptions","compressionQuality"],a),e}function Sb(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Ur(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function sC(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Yd(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Ur(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Xn(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Cb(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&f(n,["_url","models_url"],jS(t,u)),i}function Ib(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&f(n,["_url","models_url"],jS(t,u)),i}function xb(t,e){const n={},i=c(e,["config"]);return i!=null&&Cb(t,i,n),n}function Ab(t,e){const n={},i=c(e,["config"]);return i!=null&&Ib(t,i,n),n}function Pb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=eC(r);Array.isArray(o)&&(o=o.map(a=>wp(a))),f(e,["models"],o)}return e}function Rb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=eC(r);Array.isArray(o)&&(o=o.map(a=>Sp(a))),f(e,["models"],o)}return e}function Nb(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function wp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const o=c(t,["version"]);o!=null&&f(e,["version"],o);const a=c(t,["_self"]);a!=null&&f(e,["tunedModelInfo"],Wb(a));const u=c(t,["inputTokenLimit"]);u!=null&&f(e,["inputTokenLimit"],u);const d=c(t,["outputTokenLimit"]);d!=null&&f(e,["outputTokenLimit"],d);const h=c(t,["supportedGenerationMethods"]);h!=null&&f(e,["supportedActions"],h);const g=c(t,["temperature"]);g!=null&&f(e,["temperature"],g);const y=c(t,["maxTemperature"]);y!=null&&f(e,["maxTemperature"],y);const v=c(t,["topP"]);v!=null&&f(e,["topP"],v);const C=c(t,["topK"]);C!=null&&f(e,["topK"],C);const b=c(t,["thinking"]);return b!=null&&f(e,["thinking"],b),e}function Sp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const o=c(t,["versionId"]);o!=null&&f(e,["version"],o);const a=c(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>H2(v))),f(e,["endpoints"],y)}const u=c(t,["labels"]);u!=null&&f(e,["labels"],u);const d=c(t,["_self"]);d!=null&&f(e,["tunedModelInfo"],Kb(d));const h=c(t,["defaultCheckpointId"]);h!=null&&f(e,["defaultCheckpointId"],h);const g=c(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["checkpoints"],y)}return e}function kb(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],q2(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],$2(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],g2(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function Mb(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],Xn(n)),e}function Lb(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","baseSteps"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);const h=c(t,["addWatermark"]);e!==void 0&&h!=null&&f(e,["parameters","addWatermark"],h);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","mimeType"],g);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const C=c(t,["labels"]);return e!==void 0&&C!=null&&f(e,["labels"],C),n}function Db(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["source"]);r!=null&&Vb(r,n);const o=c(e,["config"]);return o!=null&&Lb(o,n),n}function bb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Zd(r))),f(e,["generatedImages"],i)}return e}function Vb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],Xn(r));const o=c(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Mb(u))),f(e,["instances[0]","productImages"],a)}return n}function Fb(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Xn(n));const i=c(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const o=c(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],Nb(o));const a=c(t,["controlImageConfig"]);a!=null&&f(e,["controlImageConfig"],S2(a));const u=c(t,["styleImageConfig"]);u!=null&&f(e,["styleImageConfig"],u);const d=c(t,["subjectImageConfig"]);return d!=null&&f(e,["subjectImageConfig"],d),e}function aC(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function lC(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Ub(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function Ob(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],Xn(n)),e}function Bb(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);const o=c(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&f(e,["parameters","maskDilation"],a);const u=c(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&f(e,["parameters","binaryColorThreshold"],u);const d=c(t,["labels"]);return e!==void 0&&d!=null&&f(e,["labels"],d),n}function zb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["source"]);r!=null&&Hb(r,n);const o=c(e,["config"]);return o!=null&&Bb(o,n),n}function Gb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>fb(r))),f(e,["generatedMasks"],i)}return e}function Hb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Xn(r));const o=c(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],Ob(o)),n}function qb(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&f(e,["functionCallingConfig"],W2(i)),e}function $b(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],vb(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],Tb(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function uC(t){const e={},n=c(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&f(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>K2(v))),f(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],d);const h=c(t,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function Wb(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Kb(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Jb(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function Zb(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function Yb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],Ue(t,i));const r=c(e,["config"]);return r!=null&&Jb(r,n),n}function Qb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&Zb(r,n),n}function Xb(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const o=c(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&f(e,["parameters","includeRaiReason"],a);const u=c(t,["outputMimeType"]);e!==void 0&&u!=null&&f(e,["parameters","outputOptions","mimeType"],u);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&f(e,["parameters","outputOptions","compressionQuality"],d);const h=c(t,["enhanceInputImage"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=c(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=c(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);const v=c(t,["numberOfImages"]);e!==void 0&&v!=null&&f(e,["parameters","sampleCount"],v);const C=c(t,["mode"]);return e!==void 0&&C!=null&&f(e,["parameters","mode"],C),n}function jb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ue(t,i));const r=c(e,["image"]);r!=null&&f(n,["instances[0]","image"],Xn(r));const o=c(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=c(e,["config"]);return a!=null&&Xb(a,n),n}function eV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Zd(o))),f(e,["generatedImages"],r)}return e}function tV(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Ur(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function nV(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function iV(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],Xn(n));const i=c(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function rV(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Yd(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function oV(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Xn(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function cC(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function dC(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sV(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),n}function aV(t){const e={},n=c(t,["config"]);return n!=null&&sV(n,e),e}function lV(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function uV(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&lV(i,e),e}function cV(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function dV(t,e){const n={},i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["customMetadata"],o)}const r=c(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function hV(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],pV(a)),e}function fV(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=c(t,["fileName"]);i!=null&&f(e,["fileName"],i);const r=c(t,["config"]);return r!=null&&dV(r,e),e}function pV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function mV(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function gV(t){const e={},n=c(t,["config"]);return n!=null&&mV(n,e),e}function _V(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["fileSearchStores"],o)}return e}function hC(t,e){const n={},i=c(t,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);const r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),n}function yV(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=c(t,["config"]);return i!=null&&hC(i,e),e}function vV(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TV="Content-Type",EV="X-Server-Timeout",wV="User-Agent",Cp="x-goog-api-client",SV="1.38.0",CV=`google-genai-sdk/${SV}`,IV="v1beta1",xV="v1beta";class AV{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:IV}else{if(!this.clientOptions.apiKey)throw new Bl({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:xV,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===yp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&PV(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await I0(r),new vp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await I0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Zn(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:g}=yield ve(r.read());if(h){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(g,{stream:!0});try{const b=JSON.parse(y);if("error"in b){const D=JSON.parse(JSON.stringify(b.error)),U=D.status,x=D.code,R=`got status: ${U}. ${JSON.stringify(b)}`;if(x>=400&&x<600)throw new Bl({message:R,status:x})}}catch(b){if(b.name==="ApiError")throw b}a+=y;let v=-1,C=0;for(;;){v=-1,C=0;for(const U of d){const x=a.indexOf(U);x!==-1&&(v===-1||x<v)&&(v=x,C=U.length)}if(v===-1)break;const b=a.substring(0,v);a=a.substring(v+C);const D=b.trim();if(D.startsWith(u)){const U=D.substring(u.length).trim();try{const x=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ve(new vp(x))}catch(x){throw new Error(`exception parsing stream chunk ${U}. ${x}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=CV+" "+this.clientOptions.userAgentExtra;return e[wV]=n,e[Cp]=n,e[TV]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(EV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},h=this.getFileName(e),g=re("upload/v1beta/files",d._url),y=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,h,d,n==null?void 0:n.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,a=await o.stat(n),u=String(a.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),y={};i!=null&&hC(i,y);const v=await this.fetchUploadUrl(h,u,d,g,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=h==null?void 0:h.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function I0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Bl({message:r,status:n}):new Error(r)}}function PV(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,a){const u=Object.assign({},o);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=a[d],g=u[d];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?u[d]=i(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),u[d]=h)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RV="mcp_used/unknown";let NV=!1;function fC(t){for(const e of t)if(kV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return NV}function pC(t){var e;const n=(e=t[Cp])!==null&&e!==void 0?e:"";t[Cp]=(n+` ${RV}`).trimStart()}function kV(t){return t!==null&&typeof t=="object"&&t instanceof mg}function MV(t){return Zn(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const a=yield ve(n.listTools({cursor:r}));for(const u of a.tools)yield yield ve(u),o++;if(!a.nextCursor)break;r=a.nextCursor}})}class mg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new mg(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},a=[];for(const g of this.mcpClients)try{for(var u=!0,d=(n=void 0,Yn(MV(g))),h;h=await d.next(),e=h.done,!e;u=!0){r=h.value,u=!1;const y=r;a.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=g}}catch(y){n={error:y}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),uL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LV(t,e,n){const i=new tL;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class DV{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=FV(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let h=()=>{};const g=new Promise(M=>{h=M}),y=e.callbacks,v=function(){h({})},C=this.apiClient,b={onopen:v,onmessage:M=>{LV(C,y.onmessage,M)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(M){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(M){}},D=this.webSocketFactory.create(d,VV(a),b);D.connect(),await g;const R={setup:{model:Ue(this.apiClient,e.model)}};return D.send(JSON.stringify(R)),new bV(D,this.apiClient)}}class bV{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=s2(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=o2(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vs.PLAY)}pause(){this.sendPlaybackControl(vs.PAUSE)}stop(){this.sendPlaybackControl(vs.STOP)}resetContext(){this.sendPlaybackControl(vs.RESET_CONTEXT)}close(){this.conn.close()}}function VV(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function FV(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function OV(t,e,n){const i=new eL;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const a=u2(o);Object.assign(i,a)}else Object.assign(i,o);e(i)}class BV{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new DV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&fC(e.config.tools)&&pC(y);const v=qV(y);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),F=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),z=!!N&&!!F||!!O;this.apiClient.getCustomBaseUrl()&&!z?g=d:(g=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,g))}else{const N=this.apiClient.getApiKey();let F="BidiGenerateContent",O="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",O="access_token"),g=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${F}?${O}=${N}`}let C=()=>{};const b=new Promise(N=>{C=N}),D=e.callbacks,U=function(){var N;(N=D==null?void 0:D.onopen)===null||N===void 0||N.call(D),C({})},x=this.apiClient,R={onopen:U,onmessage:N=>{OV(x,D.onmessage,N)},onerror:(n=D==null?void 0:D.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=D==null?void 0:D.onclose)!==null&&i!==void 0?i:function(N){}},M=this.webSocketFactory.create(g,HV(v),R);M.connect(),await b;let G=Ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const N=this.apiClient.getProject(),F=this.apiClient.getLocation();N&&F&&(G=`projects/${N}/locations/${F}/`+G)}let Z={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[dd.AUDIO]}:e.config.responseModalities=[dd.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],k=[];for(const N of Y)if(this.isCallableTool(N)){const F=N;k.push(await F.tool())}else k.push(N);k.length>0&&(e.config.tools=k);const P={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=r2(this.apiClient,P):Z=i2(this.apiClient,P),delete Z.config,M.send(JSON.stringify(Z)),new GV(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const zV={turnComplete:!0};class GV{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Mn(n.turns),e.isVertexAI()||(i=i.map(r=>Jd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(UV)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},zV),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:l2(e)}:n={realtimeInput:a2(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function HV(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function qV(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x0=10;function A0(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ls(a)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ls(t){return"callTool"in t&&typeof t.callTool=="function"}function $V(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ls(r)))!==null&&i!==void 0?i:!1}function P0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(Ls(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function R0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WV extends Wi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$V(n)||A0(n.config))return await this.generateContentInternal(d);const h=P0(n);if(h.length>0){const D=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let g,y;const v=Mn(d.contents),C=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:x0;let b=0;for(;b<C&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const D=g.candidates[0].content,U=[];for(const x of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Ls(x)){const M=await x.callTool(g.functionCalls);U.push(...M)}b++,y={role:"user",parts:U},d.contents=Mn(d.contents),d.contents.push(D),d.contents.push(y),R0(d.config)&&(v.push(D),v.push(y))}return R0(d.config)&&(g.automaticFunctionCallingHistory=v),g},this.generateContentStream=async n=>{var i,r,o,a,u;if(this.maybeMoveToResponseJsonSchem(n),A0(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const d=P0(n);if(d.length>0){const y=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,g=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(h&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const a=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:a.push(d);let u;return o?u={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new xo(qi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async d=>Ls(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&fC(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),pC(h),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ls(a)){const u=a,d=await u.tool();for(const h of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(o.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);o.set(h.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:x0;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(h,g,y){return Zn(this,arguments,function*(){for(var v,C,b,D,U,x;u<o;){a&&(u++,a=!1);const Z=yield ve(h.processParamsMaybeAddMcpUsage(y)),Y=yield ve(h.generateContentStreamInternal(Z)),k=[],P=[];try{for(var R=!0,M=(C=void 0,Yn(Y)),G;G=yield ve(M.next()),v=G.done,!v;R=!0){D=G.value,R=!1;const N=D;if(yield yield ve(N),N.candidates&&(!((U=N.candidates[0])===null||U===void 0)&&U.content)){P.push(N.candidates[0].content);for(const F of(x=N.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(u<o&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(F.functionCall.name)){const O=yield ve(g.get(F.functionCall.name).callTool([F.functionCall]));k.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(N){C={error:N}}finally{try{!R&&!v&&(b=M.return)&&(yield ve(b.call(M)))}finally{if(C)throw C.error}}if(k.length>0){a=!0;const N=new Ha;N.candidates=[{content:{role:"user",parts:k}}],yield yield ve(N);const F=[];F.push(...P),F.push({role:"user",parts:k});const O=Mn(y.contents).concat(F);y.contents=O}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=w0(this.apiClient,e);return u=re("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=C0(g),v=new Ha;return Object.assign(v,y),v})}else{const h=E0(this.apiClient,e);return u=re("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=S0(g),v=new Ha;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=w0(this.apiClient,e);return u=re("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(y){return Zn(this,arguments,function*(){var v,C,b,D;try{for(var U=!0,x=Yn(y),R;R=yield ve(x.next()),v=R.done,!v;U=!0){D=R.value,U=!1;const M=D,G=C0(yield ve(M.json()));G.sdkHttpResponse={headers:M.headers};const Z=new Ha;Object.assign(Z,G),yield yield ve(Z)}}catch(M){C={error:M}}finally{try{!U&&!v&&(b=x.return)&&(yield ve(b.call(x)))}finally{if(C)throw C.error}}})})}else{const h=E0(this.apiClient,e);return u=re("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(y){return Zn(this,arguments,function*(){var v,C,b,D;try{for(var U=!0,x=Yn(y),R;R=yield ve(x.next()),v=R.done,!v;U=!0){D=R.value,U=!1;const M=D,G=S0(yield ve(M.json()));G.sdkHttpResponse={headers:M.headers};const Z=new Ha;Object.assign(Z,G),yield yield ve(Z)}}catch(M){C={error:M}}finally{try{!U&&!v&&(b=x.return)&&(yield ve(b.call(x)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=B2(this.apiClient,e);return u=re("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=G2(g),v=new r0;return Object.assign(v,y),v})}else{const h=O2(this.apiClient,e);return u=re("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=z2(g),v=new r0;return Object.assign(v,y),v})}}async generateImagesInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=j2(this.apiClient,e);return u=re("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=tb(g),v=new o0;return Object.assign(v,y),v})}else{const h=X2(this.apiClient,e);return u=re("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=eb(g),v=new o0;return Object.assign(v,y),v})}}async editImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=b2(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=V2(d),g=new HM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=jb(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=eV(d),g=new qM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=Db(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=bb(d),g=new $M;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=zb(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=Gb(d),g=new WM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=yb(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Sp(g))}else{const h=_b(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>wp(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=Ab(this.apiClient,e);return u=re("{models_url}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Rb(g),v=new s0;return Object.assign(v,y),v})}else{const h=xb(this.apiClient,e);return u=re("{models_url}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Pb(g),v=new s0;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=Qb(this.apiClient,e);return u=re("{model}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Sp(g))}else{const h=Yb(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>wp(g))}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=k2(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=L2(g),v=new a0;return Object.assign(v,y),v})}else{const h=N2(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=M2(g),v=new a0;return Object.assign(v,y),v})}}async countTokens(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=A2(this.apiClient,e);return u=re("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=R2(g),v=new l0;return Object.assign(v,y),v})}else{const h=x2(this.apiClient,e);return u=re("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=P2(g),v=new l0;return Object.assign(v,y),v})}}async computeTokens(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=v2(this.apiClient,e);return o=re("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=T2(d),g=new KM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=ab(this.apiClient,e);return u=re("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>{const y=ob(g),v=new hd;return Object.assign(v,y),v})}else{const h=sb(this.apiClient,e);return u=re("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const y=rb(g),v=new hd;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KV extends Wi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=FM(e);return u=re("{operationName}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a}else{const h=VM(e);return u=re("{operationName}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=RM(e);return o=re("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JV(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function ZV(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>rF(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function YV(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const o=c(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const a=c(e,["uses"]);n!==void 0&&a!=null&&f(n,["uses"],a);const u=c(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&f(n,["bidiGenerateContentSetup"],iF(t,u));const d=c(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&f(n,["fieldMask"],d),i}function QV(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],YV(t,i,n)),n}function XV(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function jV(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eF(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function tF(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function nF(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const h=c(t,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],pg(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const C=c(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],ZV(zt(b)));const D=c(t,["tools"]);if(e!==void 0&&D!=null){let Y=ia(D);Array.isArray(Y)&&(Y=Y.map(k=>sF(na(k)))),f(e,["setup","tools"],Y)}const U=c(t,["sessionResumption"]);e!==void 0&&U!=null&&f(e,["setup","sessionResumption"],oF(U));const x=c(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","inputAudioTranscription"],x);const R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const M=c(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const Z=c(t,["proactivity"]);if(e!==void 0&&Z!=null&&f(e,["setup","proactivity"],Z),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Ue(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],nF(r,n)),n}function rF(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],XV(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],jV(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],JV(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function oF(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sF(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],eF(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],tF(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function lF(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=aF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(h=>a.includes(h)?`generationConfig.${h}`:h));const d=[];o&&d.push(o),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class uF extends Wi{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=QV(this.apiClient,e);o=re("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=lF(u,e.config);return r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cF(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function dF(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&cF(i,e),e}function hF(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function fF(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function pF(t){const e={},n=c(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const i=c(t,["config"]);return i!=null&&fF(i,e),e}function mF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gF extends Wi{constructor(e){super(),this.apiClient=e,this.list=async n=>new xo(qi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hF(e);return o=re("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dF(e);r=re("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=pF(e);return o=re("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=mF(d),g=new JM;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _F extends Wi{constructor(e,n=new gF(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new xo(qi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aV(e);return o=re("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cV(e);return o=re("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uV(e);r=re("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=gV(e);return o=re("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=_V(d),g=new ZM;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yV(e);return o=re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=vV(d),g=new YM;return Object.assign(g,h),g})}}async importFile(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fV(e);return o=re("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=hV(d),g=new ug;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return mC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const yF=()=>mC();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ip(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const xp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bn extends Error{}class Zt extends bn{constructor(e,n,i,r){super(`${Zt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Qd({message:i,cause:xp(n)});const o=n;return e===400?new _C(e,o,i,r):e===401?new yC(e,o,i,r):e===403?new vC(e,o,i,r):e===404?new TC(e,o,i,r):e===409?new EC(e,o,i,r):e===422?new wC(e,o,i,r):e===429?new SC(e,o,i,r):e>=500?new CC(e,o,i,r):new Zt(e,o,i,r)}}class Ap extends Zt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Qd extends Zt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class gC extends Qd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _C extends Zt{}class yC extends Zt{}class vC extends Zt{}class TC extends Zt{}class EC extends Zt{}class wC extends Zt{}class SC extends Zt{}class CC extends Zt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vF=/^[a-z][a-z0-9+.-]*:/i,TF=t=>vF.test(t);let Pp=t=>(Pp=Array.isArray,Pp(t));const EF=Pp;let wF=EF;const N0=wF;function SF(t){if(!t)return!0;for(const e in t)return!1;return!0}function CF(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const IF=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bn(`${t} must be an integer`);if(e<0)throw new bn(`${t} must be a positive integer`);return e},xF=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AF=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ss="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const RF=()=>{var t,e,n,i,r;const o=PF();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":M0(Deno.build.os),"X-Stainless-Arch":k0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":M0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":k0((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=NF();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function NF(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${o}.${a}`}}}return null}const k0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",M0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ec;const kF=()=>ec??(ec=RF());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function IC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function LF(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return IC({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function xC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function DF(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Zh(t,e,n){return AC(),new File(t,e??"unknown_file",n)}function VF(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const FF=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",UF=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&PC(t),OF=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function BF(t,e,n){if(AC(),t=await t,UF(t))return t instanceof File?t:Zh([await t.arrayBuffer()],t.name);if(OF(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Zh(await Rp(r),e,n)}const i=await Rp(t);if(e||(e=VF(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Zh(i,e,n)}async function Rp(t){var e,n,i,r,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(PC(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(FF(t))try{for(var u=!0,d=Yn(t),h;h=await d.next(),e=h.done,!e;u=!0){r=h.value,u=!1;const g=r;a.push(...await Rp(g))}}catch(g){n={error:g}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const g=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${zF(t)}`)}return a}function zF(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RC{constructor(e){this._client=e}}RC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const L0=Object.freeze(Object.create(null)),GF=(t=NC)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],a=n.reduce((g,y,v)=>{var C,b,D;/[?#]/.test(y)&&(r=!0);const U=i[v];let x=(r?encodeURIComponent:t)(""+U);return v!==i.length&&(U==null||typeof U=="object"&&U.toString===((D=Object.getPrototypeOf((b=Object.getPrototypeOf((C=U.hasOwnProperty)!==null&&C!==void 0?C:L0))!==null&&b!==void 0?b:L0))===null||D===void 0?void 0:D.toString))&&(x=U+"",o.push({start:g.length+y.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),g+y+(v===i.length?"":x)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=d.exec(u))!==null;)o.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(o.sort((g,y)=>g.start-y.start),o.length>0){let g=0;const y=o.reduce((v,C)=>{const b=" ".repeat(C.start-g),D="^".repeat(C.length);return g=C.start+C.length,v+b+D},"");throw new bn(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${a}
${y}`)}return a},tc=GF(NC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kC extends RC{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=pd(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(tc`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(tc`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(tc`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:a=this._client.apiVersion}=o,u=pd(o,["api_version"]);return this._client.get(tc`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}kC._key=Object.freeze(["interactions"]);class MC extends kC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HF(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let nc;function gg(t){let e;return(nc??(e=new globalThis.TextEncoder,nc=e.encode.bind(e)))(t)}let ic;function D0(t){let e;return(ic??(e=new globalThis.TextDecoder,ic=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?gg(e):e;this.buffer=HF([this.buffer,n]);const i=[];let r;for(;(r=qF(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(D0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=D0(this.buffer.subarray(0,o));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Xd.NEWLINE_CHARS=new Set([`
`,"\r"]);Xd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qF(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function $F(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const md={off:0,error:200,warn:300,info:400,debug:500},b0=(t,e,n)=>{if(t){if(CF(md,t))return t;Wt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(md))}`)}};function Xa(){}function rc(t,e,n){return!e||md[t]>md[n]?Xa:e[t].bind(e)}const WF={error:Xa,warn:Xa,info:Xa,debug:Xa};let V0=new WeakMap;function Wt(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return WF;const r=V0.get(n);if(r&&r[0]===i)return r[1];const o={error:rc("error",n,i),warn:rc("warn",n,i),info:rc("info",n,i),debug:rc("debug",n,i)};return V0.set(n,[i,o]),o}const ro=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ts{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Wt(i):console;function a(){return Zn(this,arguments,function*(){var d,h,g,y;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var C=!0,b=Yn(KF(e,n)),D;D=yield ve(b.next()),d=D.done,!d;C=!0){y=D.value,C=!1;const U=y;if(!v)if(U.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield ve(JSON.parse(U.data))}catch(x){throw o.error("Could not parse message into JSON:",U.data),o.error("From chunk:",U.raw),x}}}catch(U){h={error:U}}finally{try{!C&&!d&&(g=b.return)&&(yield ve(g.call(b)))}finally{if(h)throw h.error}}v=!0}catch(U){if(Ip(U))return yield ve(void 0);throw U}finally{v||n.abort()}})}return new Ts(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Zn(this,arguments,function*(){var d,h,g,y;const v=new Xd,C=xC(e);try{for(var b=!0,D=Yn(C),U;U=yield ve(D.next()),d=U.done,!d;b=!0){y=U.value,b=!1;const x=y;for(const R of v.decode(x))yield yield ve(R)}}catch(x){h={error:x}}finally{try{!b&&!d&&(g=D.return)&&(yield ve(g.call(D)))}finally{if(h)throw h.error}}for(const x of v.flush())yield yield ve(x)})}function a(){return Zn(this,arguments,function*(){var d,h,g,y;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var C=!0,b=Yn(o()),D;D=yield ve(b.next()),d=D.done,!d;C=!0){y=D.value,C=!1;const U=y;v||U&&(yield yield ve(JSON.parse(U)))}}catch(U){h={error:U}}finally{try{!C&&!d&&(g=b.return)&&(yield ve(g.call(b)))}finally{if(h)throw h.error}}v=!0}catch(U){if(Ip(U))return yield ve(void 0);throw U}finally{v||n.abort()}})}return new Ts(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const a=i.next();e.push(a),n.push(a)}return o.shift()}});return[new Ts(()=>r(e),this.controller,this.client),new Ts(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return IC({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const a=gg(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function KF(t,e){return Zn(this,arguments,function*(){var i,r,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bn("Attempted to iterate over a response with no body");const u=new ZF,d=new Xd,h=xC(t.body);try{for(var g=!0,y=Yn(JF(h)),v;v=yield ve(y.next()),i=v.done,!i;g=!0){a=v.value,g=!1;const C=a;for(const b of d.decode(C)){const D=u.decode(b);D&&(yield yield ve(D))}}}catch(C){r={error:C}}finally{try{!g&&!i&&(o=y.return)&&(yield ve(o.call(y)))}finally{if(r)throw r.error}}for(const C of d.flush()){const b=u.decode(C);b&&(yield yield ve(b))}})}function JF(t){return Zn(this,arguments,function*(){var n,i,r,o;let a=new Uint8Array;try{for(var u=!0,d=Yn(t),h;h=yield ve(d.next()),n=h.done,!n;u=!0){o=h.value,u=!1;const g=o;if(g==null)continue;const y=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?gg(g):g;let v=new Uint8Array(a.length+y.length);v.set(a),v.set(y,a.length),a=v;let C;for(;(C=$F(a))!==-1;)yield yield ve(a.slice(0,C)),a=a.slice(C)}}catch(g){i={error:g}}finally{try{!u&&!n&&(r=d.return)&&(yield ve(r.call(d)))}finally{if(i)throw i.error}}a.length>0&&(yield yield ve(a))})}class ZF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=YF(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function YF(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QF(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,a=await(async()=>{var u;if(e.options.stream)return Wt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ts.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),h=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return Wt(t).debug(`[${i}] response parsed`,ro({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _g extends Promise{constructor(e,n,i=QF){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new _g(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LC=Symbol("brand.privateNullableHeaders");function*XF(t){if(!t)return;if(LC in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():N0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=N0(i[1])?i[1]:[i[1]];let a=!1;for(const u of o)u!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,u])}}const qa=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,a]of XF(i)){const u=o.toLowerCase();r.has(u)||(e.delete(o),r.add(u)),a===null?(e.delete(o),n.add(u)):(e.append(o,a),n.delete(u))}}return{[LC]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yh=t=>{var e,n,i,r,o,a;if(typeof globalThis.process<"u")return(i=(n=(e=SM)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var DC;class jd{constructor(e){var n,i,r,o,a,u,d,{baseURL:h=Yh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(n=Yh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:y="v1beta"}=e,v=pd(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:g,apiVersion:y},v),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:jd.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const b="warn";this.logLevel=b,this.logLevel=(a=(o=b0(C.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:b0(Yh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:b,this.fetchOptions=C.fetchOptions,this.maxRetries=(u=C.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=C.fetch)!==null&&d!==void 0?d:MF(),this.encoder=bF,this._options=C,this.apiKey=g,this.apiVersion=y,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=qa([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return qa([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return qa([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new bn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ss}`}defaultIdempotencyKey(){return`stainless-node-retry-${yF()}`}makeStatusError(e,n,i,r){return Zt.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=TF(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return SF(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new _g(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,a;const u=await e,d=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:h,url:g,timeout:y}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(h,{url:g,options:u});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=i===void 0?"":`, retryOf: ${i}`,b=Date.now();if(Wt(this).debug(`[${v}] sending request`,ro({retryOfRequestLogID:i,method:u.method,url:g,options:u,headers:h.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new Ap;const D=new AbortController,U=await this.fetchWithTimeout(g,h,y,D).catch(xp),x=Date.now();if(U instanceof globalThis.Error){const M=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Ap;const G=Ip(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(n)return Wt(this).info(`[${v}] connection ${G?"timed out":"failed"} - ${M}`),Wt(this).debug(`[${v}] connection ${G?"timed out":"failed"} (${M})`,ro({retryOfRequestLogID:i,url:g,durationMs:x-b,message:U.message})),this.retryRequest(u,n,i??v);throw Wt(this).info(`[${v}] connection ${G?"timed out":"failed"} - error; no more retries left`),Wt(this).debug(`[${v}] connection ${G?"timed out":"failed"} (error; no more retries left)`,ro({retryOfRequestLogID:i,url:g,durationMs:x-b,message:U.message})),G?new gC:new Qd({cause:U})}const R=`[${v}${C}] ${h.method} ${g} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${x-b}ms`;if(!U.ok){const M=await this.shouldRetry(U);if(n&&M){const N=`retrying, ${n} attempts remaining`;return await DF(U.body),Wt(this).info(`${R} - ${N}`),Wt(this).debug(`[${v}] response error (${N})`,ro({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,durationMs:x-b})),this.retryRequest(u,n,i??v,U.headers)}const G=M?"error; no more retries left":"error; not retryable";Wt(this).info(`${R} - ${G}`);const Z=await U.text().catch(N=>xp(N).message),Y=xF(Z),k=Y?void 0:Z;throw Wt(this).debug(`[${v}] response error (${G})`,ro({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,message:k,durationMs:Date.now()-b})),this.makeStatusError(U.status,Y,k,U.headers)}return Wt(this).info(R),Wt(this).debug(`[${v}] response start`,ro({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,durationMs:x-b})),{response:U,options:u,controller:D,requestLogID:v,retryOfRequestLogID:i,startTime:b}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:a,method:u}=o,d=pd(o,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),g=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},g?{duplex:"half"}:{}),{method:"GET"}),d);u&&(y.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const h=parseFloat(u);Number.isNaN(h)||(a=h)}const d=r==null?void 0:r.get("retry-after");if(d&&!a){const h=parseFloat(d);Number.isNaN(h)?a=Date.parse(d)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await AF(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const a=Object.assign({},e),{method:u,path:d,query:h,defaultBaseURL:g}=a,y=this.buildURL(d,h,g);"timeout"in a&&IF("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:v,body:C}=this.buildBody({options:a}),b=await this.buildHeaders({options:e,method:u,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:b},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=qa([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),kF()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=qa([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:LF(e)}:this.encoder({body:e,headers:i})}}jd.DEFAULT_TIMEOUT=6e4;class At extends jd{constructor(){super(...arguments),this.interactions=new MC(this)}}DC=At;At.GeminiNextGenAPIClient=DC;At.GeminiNextGenAPIClientError=bn;At.APIError=Zt;At.APIConnectionError=Qd;At.APIConnectionTimeoutError=gC;At.APIUserAbortError=Ap;At.NotFoundError=TC;At.ConflictError=EC;At.RateLimitError=SC;At.BadRequestError=_C;At.AuthenticationError=yC;At.InternalServerError=CC;At.PermissionDeniedError=vC;At.UnprocessableEntityError=wC;At.toFile=BF;At.Interactions=MC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jF(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function eU(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function tU(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function nU(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function iU(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);if(a!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","batchSize"],u);const d=c(t,["learningRate"]);if(e!==void 0&&d!=null&&f(e,["tuningTask","hyperparameters","learningRate"],d),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function rU(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=c(t,["validationDataset"]);e!==void 0&&C!=null&&f(e,["supervisedTuningSpec"],F0(C))}else if(r==="PREFERENCE_TUNING"){const C=c(t,["validationDataset"]);e!==void 0&&C!=null&&f(e,["preferenceOptimizationSpec"],F0(C))}const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const a=c(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const C=c(t,["epochCount"]);e!==void 0&&C!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(u==="PREFERENCE_TUNING"){const C=c(t,["epochCount"]);e!==void 0&&C!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=c(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(d==="PREFERENCE_TUNING"){const C=c(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=c(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=c(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=c(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let g=c(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const C=c(t,["adapterSize"]);e!==void 0&&C!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(g==="PREFERENCE_TUNING"){const C=c(t,["adapterSize"]);e!==void 0&&C!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=c(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);const v=c(t,["beta"]);return e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function oU(t,e){const n={},i=c(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&gU(o);const a=c(t,["config"]);return a!=null&&iU(a,n),n}function sU(t,e){const n={},i=c(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&_U(o,n,e);const a=c(t,["config"]);return a!=null&&rU(a,n,e),n}function aU(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function lU(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function uU(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function cU(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function dU(t,e){const n={},i=c(t,["config"]);return i!=null&&uU(i,n),n}function hU(t,e){const n={},i=c(t,["config"]);return i!=null&&cU(i,n),n}function fU(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const o=c(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>bC(u))),f(n,["tuningJobs"],a)}return n}function pU(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const o=c(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Np(u))),f(n,["tuningJobs"],a)}return n}function mU(t,e){const n={},i=c(t,["name"]);i!=null&&f(n,["model"],i);const r=c(t,["name"]);return r!=null&&f(n,["endpoint"],r),n}function gU(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(n,["examples","examples"],r)}return n}function _U(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bC(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["state"]);o!=null&&f(n,["state"],QS(o));const a=c(t,["createTime"]);a!=null&&f(n,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&f(n,["startTime"],u);const d=c(t,["tuningTask","completeTime"]);d!=null&&f(n,["endTime"],d);const h=c(t,["updateTime"]);h!=null&&f(n,["updateTime"],h);const g=c(t,["description"]);g!=null&&f(n,["description"],g);const y=c(t,["baseModel"]);y!=null&&f(n,["baseModel"],y);const v=c(t,["_self"]);return v!=null&&f(n,["tunedModel"],mU(v)),n}function Np(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["state"]);o!=null&&f(n,["state"],QS(o));const a=c(t,["createTime"]);a!=null&&f(n,["createTime"],a);const u=c(t,["startTime"]);u!=null&&f(n,["startTime"],u);const d=c(t,["endTime"]);d!=null&&f(n,["endTime"],d);const h=c(t,["updateTime"]);h!=null&&f(n,["updateTime"],h);const g=c(t,["error"]);g!=null&&f(n,["error"],g);const y=c(t,["description"]);y!=null&&f(n,["description"],y);const v=c(t,["baseModel"]);v!=null&&f(n,["baseModel"],v);const C=c(t,["tunedModel"]);C!=null&&f(n,["tunedModel"],C);const b=c(t,["preTunedModel"]);b!=null&&f(n,["preTunedModel"],b);const D=c(t,["supervisedTuningSpec"]);D!=null&&f(n,["supervisedTuningSpec"],D);const U=c(t,["preferenceOptimizationSpec"]);U!=null&&f(n,["preferenceOptimizationSpec"],U);const x=c(t,["tuningDataStats"]);x!=null&&f(n,["tuningDataStats"],x);const R=c(t,["encryptionSpec"]);R!=null&&f(n,["encryptionSpec"],R);const M=c(t,["partnerModelTuningSpec"]);M!=null&&f(n,["partnerModelTuningSpec"],M);const G=c(t,["customBaseModel"]);G!=null&&f(n,["customBaseModel"],G);const Z=c(t,["experiment"]);Z!=null&&f(n,["experiment"],Z);const Y=c(t,["labels"]);Y!=null&&f(n,["labels"],Y);const k=c(t,["outputUri"]);k!=null&&f(n,["outputUri"],k);const P=c(t,["pipelineJob"]);P!=null&&f(n,["pipelineJob"],P);const N=c(t,["serviceAccount"]);N!=null&&f(n,["serviceAccount"],N);const F=c(t,["tunedModelDisplayName"]);F!=null&&f(n,["tunedModelDisplayName"],F);const O=c(t,["veoTuningSpec"]);return O!=null&&f(n,["veoTuningSpec"],O),n}function yU(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["metadata"]);o!=null&&f(n,["metadata"],o);const a=c(t,["done"]);a!=null&&f(n,["done"],a);const u=c(t,["error"]);return u!=null&&f(n,["error"],u),n}function F0(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&f(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vU extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xo(qi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:_p.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=lU(e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>Np(g))}else{const h=aU(e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>bC(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=hU(e);return u=re("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=pU(g),v=new u0;return Object.assign(v,y),v})}else{const h=dU(e);return u=re("tunedModels",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=fU(g),v=new u0;return Object.assign(v,y),v})}}async cancel(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=eU(e);return u=re("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=nU(g),v=new c0;return Object.assign(v,y),v})}else{const h=jF(e);return u=re("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=tU(g),v=new c0;return Object.assign(v,y),v})}}async tuneInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=sU(e,e);return o=re("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>Np(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oU(e);return o=re("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>yU(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TU{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EU=1024*1024*8,wU=3,SU=1e3,CU=2,gd="x-goog-upload-status";async function IU(t,e,n){var i;const r=await VC(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[gd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function xU(t,e,n){var i;const r=await VC(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[gd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=$S(o),u=new cg;return Object.assign(u,a),u}async function VC(t,e,n){var i,r;let o=0,a=0,u=new vp(new Response),d="upload";for(o=t.size;a<o;){const h=Math.min(EU,o-a),g=t.slice(a,a+h);a+h>=o&&(d+=", finalize");let y=0,v=SU;for(;y<wU&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[gd]));)y++,await PU(v),v=v*CU;if(a+=h,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[gd])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function AU(t){return{size:t.size,type:t.type}}function PU(t){return new Promise(e=>setTimeout(e,t))}class RU{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IU(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xU(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NU{create(e,n,i){return new kU(e,n,i)}}class kU{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U0="x-goog-api-key";class MU{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(U0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(U0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LU="gl-node/";class DU{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new At({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=AM(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new MU(this.apiKey);this.apiClient=new AV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LU+"web",uploader:new RU,downloader:new TU}),this.models=new WV(this.apiClient),this.live=new BV(this.apiClient,r,new NU),this.batches=new nD(this.apiClient),this.chats=new FD(this.models,this.apiClient),this.caches=new DD(this.apiClient),this.files=new KD(this.apiClient),this.operations=new KV(this.apiClient),this.authTokens=new uF(this.apiClient),this.tunings=new vU(this.apiClient),this.fileSearchStores=new _F(this.apiClient)}}var bU={};const O0=bU.API_KEY||"";let kp=null;O0&&(kp=new DU({apiKey:O0}));const VU=async(t,e,n)=>{var i;if(!kp)return"";try{const r=`${n} ilesindeki ${t} isimli, ${e} ara kapasiteli taksi dura iin ksa, resmi bir tantm/bilgi notu yaz. 1 cmleyi gemesin.`;return((i=(await kp.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text)==null?void 0:i.trim())||""}catch(r){return console.error("Gemini AI Error:",r),""}};var Mp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(pI,function(n){var i="1.9.4";function r(s){var l,m,_,E;for(m=1,_=arguments.length;m<_;m++){E=arguments[m];for(l in E)s[l]=E[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var _=m.call(arguments,2);return function(){return s.apply(l,_.length?_.concat(m.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function h(s,l,m){var _,E,I,B;return B=function(){_=!1,E&&(I.apply(m,E),E=!1)},I=function(){_?E=arguments:(s.apply(m,arguments),setTimeout(B,l),_=!0)},I}function g(s,l,m){var _=l[1],E=l[0],I=_-E;return s===_&&m?s:((s-E)%I+I)%I+E}function y(){return!1}function v(s,l){if(l===!1)return s;var m=Math.pow(10,l===void 0?6:l);return Math.round(s*m)/m}function C(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return C(s).split(/\s+/)}function D(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var m in l)s.options[m]=l[m];return s.options}function U(s,l,m){var _=[];for(var E in s)_.push(encodeURIComponent(m?E.toUpperCase():E)+"="+encodeURIComponent(s[E]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function R(s,l){return s.replace(x,function(m,_){var E=l[_];if(E===void 0)throw new Error("No value provided for variable "+m);return typeof E=="function"&&(E=E(l)),E})}var M=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function G(s,l){for(var m=0;m<s.length;m++)if(s[m]===l)return m;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var k=0;function P(s){var l=+new Date,m=Math.max(0,16-(l-k));return k=l+m,window.setTimeout(s,m)}var N=window.requestAnimationFrame||Y("RequestAnimationFrame")||P,F=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,m){if(m&&N===P)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&F.call(window,s)}var V={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:h,wrapNum:g,falseFn:y,formatNum:v,trim:C,splitWords:b,setOptions:D,getParamString:U,template:R,isArray:M,indexOf:G,emptyImageUrl:Z,requestFn:N,cancelFn:F,requestAnimFrame:O,cancelAnimFrame:z};function we(){}we.extend=function(s){var l=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,_=o(m);_.constructor=l,l.prototype=_;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return s.statics&&r(l,s.statics),s.includes&&(ot(s.includes),r.apply(null,[_].concat(s.includes))),r(_,s),delete _.statics,delete _.includes,_.options&&(_.options=m.options?o(m.options):{},r(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,B=_._initHooks.length;I<B;I++)_._initHooks[I].call(this)}},l},we.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},we.mergeOptions=function(s){return r(this.prototype.options,s),this},we.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function ot(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=M(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l);else{s=b(s);for(var E=0,I=s.length;E<I;E++)this._on(s[E],l,m)}return this},off:function(s,l,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],l);else{s=b(s);for(var E=arguments.length===1,I=0,B=s.length;I<B;I++)E?this._off(s[I]):this._off(s[I],l,m)}return this},_on:function(s,l,m,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,m)===!1){m===this&&(m=void 0);var E={fn:l,ctx:m};_&&(E.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(E)}},_off:function(s,l,m){var _,E,I;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(E=0,I=_.length;E<I;E++)_[E].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var B=this._listens(s,l,m);if(B!==!1){var q=_[B];this._firingCount&&(q.fn=y,this._events[s]=_=_.slice()),_.splice(B,1)}}},fire:function(s,l,m){if(!this.listens(s,m))return this;var _=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[s];if(E){this._firingCount=this._firingCount+1||1;for(var I=0,B=E.length;I<B;I++){var q=E[I],K=q.fn;q.once&&this.off(s,K,q.ctx),K.call(q.ctx||this,_)}this._firingCount--}}return m&&this._propagateEvent(_),this},listens:function(s,l,m,_){typeof s!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(_=!!l,E=void 0,m=void 0);var I=this._events&&this._events[s];if(I&&I.length&&this._listens(s,E,m)!==!1)return!0;if(_){for(var B in this._eventParents)if(this._eventParents[B].listens(s,l,m,_))return!0}return!1},_listens:function(s,l,m){if(!this._events)return!1;var _=this._events[s]||[];if(!l)return!!_.length;m===this&&(m=void 0);for(var E=0,I=_.length;E<I;E++)if(_[E].fn===l&&_[E].ctx===m)return E;return!1},once:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l,!0);else{s=b(s);for(var E=0,I=s.length;E<I;E++)this._on(s[E],l,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var ne=we.extend($);function J(s,l,m){this.x=m?Math.round(s):s,this.y=m?Math.round(l):l}var de=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(s){return this.clone()._add(te(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(te(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new J(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new J(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(s){s=te(s);var l=s.x-this.x,m=s.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(s){return s=te(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=te(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function te(s,l,m){return s instanceof J?s:M(s)?new J(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new J(s.x,s.y):new J(s,l,m)}function he(s,l){if(s)for(var m=l?[s,l]:s,_=0,E=m.length;_<E;_++)this.extend(m[_])}he.prototype={extend:function(s){var l,m;if(!s)return this;if(s instanceof J||typeof s[0]=="number"||"x"in s)l=m=te(s);else if(s=Se(s),l=s.min,m=s.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return te(this.min.x,this.max.y)},getTopRight:function(){return te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,m;return typeof s[0]=="number"||s instanceof J?s=te(s):s=Se(s),s instanceof he?(l=s.min,m=s.max):l=m=s,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=Se(s);var l=this.min,m=this.max,_=s.min,E=s.max,I=E.x>=l.x&&_.x<=m.x,B=E.y>=l.y&&_.y<=m.y;return I&&B},overlaps:function(s){s=Se(s);var l=this.min,m=this.max,_=s.min,E=s.max,I=E.x>l.x&&_.x<m.x,B=E.y>l.y&&_.y<m.y;return I&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,m=this.max,_=Math.abs(l.x-m.x)*s,E=Math.abs(l.y-m.y)*s;return Se(te(l.x-_,l.y-E),te(m.x+_,m.y+E))},equals:function(s){return s?(s=Se(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Se(s,l){return!s||s instanceof he?s:new he(s,l)}function $e(s,l){if(s)for(var m=l?[s,l]:s,_=0,E=m.length;_<E;_++)this.extend(m[_])}$e.prototype={extend:function(s){var l=this._southWest,m=this._northEast,_,E;if(s instanceof Pe)_=s,E=s;else if(s instanceof $e){if(_=s._southWest,E=s._northEast,!_||!E)return this}else return s?this.extend(ge(s)||ke(s)):this;return!l&&!m?(this._southWest=new Pe(_.lat,_.lng),this._northEast=new Pe(E.lat,E.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),m.lat=Math.max(E.lat,m.lat),m.lng=Math.max(E.lng,m.lng)),this},pad:function(s){var l=this._southWest,m=this._northEast,_=Math.abs(l.lat-m.lat)*s,E=Math.abs(l.lng-m.lng)*s;return new $e(new Pe(l.lat-_,l.lng-E),new Pe(m.lat+_,m.lng+E))},getCenter:function(){return new Pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Pe||"lat"in s?s=ge(s):s=ke(s);var l=this._southWest,m=this._northEast,_,E;return s instanceof $e?(_=s.getSouthWest(),E=s.getNorthEast()):_=E=s,_.lat>=l.lat&&E.lat<=m.lat&&_.lng>=l.lng&&E.lng<=m.lng},intersects:function(s){s=ke(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),I=E.lat>=l.lat&&_.lat<=m.lat,B=E.lng>=l.lng&&_.lng<=m.lng;return I&&B},overlaps:function(s){s=ke(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),I=E.lat>l.lat&&_.lat<m.lat,B=E.lng>l.lng&&_.lng<m.lng;return I&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ke(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(s,l){return s instanceof $e?s:new $e(s,l)}function Pe(s,l,m){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,m!==void 0&&(this.alt=+m)}Pe.prototype={equals:function(s,l){if(!s)return!1;s=ge(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return yn.distance(this,ge(s))},wrap:function(){return yn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,m=l/Math.cos(Math.PI/180*this.lat);return ke([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new Pe(this.lat,this.lng,this.alt)}};function ge(s,l,m){return s instanceof Pe?s:M(s)&&typeof s[0]!="object"?s.length===3?new Pe(s[0],s[1],s[2]):s.length===2?new Pe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Pe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Pe(s,l,m)}var yt={latLngToPoint:function(s,l){var m=this.projection.project(s),_=this.scale(l);return this.transformation._transform(m,_)},pointToLatLng:function(s,l){var m=this.scale(l),_=this.transformation.untransform(s,m);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(s),_=this.transformation.transform(l.min,m),E=this.transformation.transform(l.max,m);return new he(_,E)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new Pe(m,l,_)},wrapLatLngBounds:function(s){var l=s.getCenter(),m=this.wrapLatLng(l),_=l.lat-m.lat,E=l.lng-m.lng;if(_===0&&E===0)return s;var I=s.getSouthWest(),B=s.getNorthEast(),q=new Pe(I.lat-_,I.lng-E),K=new Pe(B.lat-_,B.lng-E);return new $e(q,K)}},yn=r({},yt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var m=Math.PI/180,_=s.lat*m,E=l.lat*m,I=Math.sin((l.lat-s.lat)*m/2),B=Math.sin((l.lng-s.lng)*m/2),q=I*I+Math.cos(_)*Math.cos(E)*B*B,K=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*K}}),oa=6378137,sa={R:oa,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,m=this.MAX_LATITUDE,_=Math.max(Math.min(m,s.lat),-m),E=Math.sin(_*l);return new J(this.R*s.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(s){var l=180/Math.PI;return new Pe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=oa*Math.PI;return new he([-s,-s],[s,s])}()};function aa(s,l,m,_){if(M(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=m,this._d=_}aa.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new J((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ji(s,l,m,_){return new aa(s,l,m,_)}var Or=r({},yn,{code:"EPSG:3857",projection:sa,transformation:function(){var s=.5/(Math.PI*sa.R);return Ji(s,.5,-s,.5)}()}),Ql=r({},Or,{code:"EPSG:900913"});function Xl(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ao(s,l){var m="",_,E,I,B,q,K;for(_=0,I=s.length;_<I;_++){for(q=s[_],E=0,B=q.length;E<B;E++)K=q[E],m+=(E?"L":"M")+K.x+" "+K.y;m+=l?ue.svg?"z":"x":""}return m||"M0 0"}var Br=document.documentElement.style,zr="ActiveXObject"in window,vt=zr&&!document.addEventListener,Tt="msLaunchUri"in navigator&&!("documentMode"in document),Zi=Xt("webkit"),jl=Xt("android"),la=Xt("android 2")||Xt("android 3"),eh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gr=jl&&Xt("Google")&&eh<537&&!("AudioNode"in window),Po=!!window.opera,ua=!Tt&&Xt("chrome"),Ro=Xt("gecko")&&!Zi&&!Po&&!zr,th=!ua&&Xt("safari"),eu=Xt("phantom"),ca="OTransition"in Br,tu=navigator.platform.indexOf("Win")===0,Yi=zr&&"transition"in Br,Hr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!la,No="MozPerspective"in Br,Ti=!window.L_DISABLE_3D&&(Yi||Hr||No)&&!ca&&!eu,Qi=typeof orientation<"u"||Xt("mobile"),ko=Qi&&Zi,nu=Qi&&Hr,Xi=!window.PointerEvent&&window.MSPointerEvent,da=!!(window.PointerEvent||Xi),Et="ontouchstart"in window||!!window.TouchEvent,iu=!window.L_NO_TOUCH&&(Et||da),qr=Qi&&Po,$r=Qi&&Ro,nh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ih=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),ji=function(){return!!document.createElement("canvas").getContext}(),ha=!!(document.createElementNS&&Xl("svg").createSVGRect),rh=!!ha&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Mo=!ha&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),ru=navigator.platform.indexOf("Mac")===0,ou=navigator.platform.indexOf("Linux")===0;function Xt(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:zr,ielt9:vt,edge:Tt,webkit:Zi,android:jl,android23:la,androidStock:Gr,opera:Po,chrome:ua,gecko:Ro,safari:th,phantom:eu,opera12:ca,win:tu,ie3d:Yi,webkit3d:Hr,gecko3d:No,any3d:Ti,mobile:Qi,mobileWebkit:ko,mobileWebkit3d:nu,msPointer:Xi,pointer:da,touch:iu,touchNative:Et,mobileOpera:qr,mobileGecko:$r,retina:nh,passiveEvents:ih,canvas:ji,svg:ha,vml:Mo,inlineSvg:rh,mac:ru,linux:ou},su=ue.msPointer?"MSPointerDown":"pointerdown",Vn=ue.msPointer?"MSPointerMove":"pointermove",fa=ue.msPointer?"MSPointerUp":"pointerup",pa=ue.msPointer?"MSPointerCancel":"pointercancel",Wr={touchstart:su,touchmove:Vn,touchend:fa,touchcancel:pa},Lo={touchstart:ma,touchmove:vn,touchend:vn,touchcancel:vn},Ei={},au=!1;function lu(s,l,m){return l==="touchstart"&&Kr(),Lo[l]?(m=Lo[l].bind(this,m),s.addEventListener(Wr[l],m,!1),m):(console.warn("wrong event specified:",l),y)}function oh(s,l,m){if(!Wr[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Wr[l],m,!1)}function Do(s){Ei[s.pointerId]=s}function uu(s){Ei[s.pointerId]&&(Ei[s.pointerId]=s)}function bo(s){delete Ei[s.pointerId]}function Kr(){au||(document.addEventListener(su,Do,!0),document.addEventListener(Vn,uu,!0),document.addEventListener(fa,bo,!0),document.addEventListener(pa,bo,!0),au=!0)}function vn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in Ei)l.touches.push(Ei[m]);l.changedTouches=[l],s(l)}}function ma(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ut(l),vn(s,l)}function sh(s){var l={},m,_;for(_ in s)m=s[_],l[_]=m&&m.bind?m.bind(s):m;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var cu=200;function du(s,l){s.addEventListener("dblclick",l);var m=0,_;function E(I){if(I.detail!==1){_=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var B=Ta(I);if(!(B.some(function(K){return K instanceof HTMLLabelElement&&K.attributes.for})&&!B.some(function(K){return K instanceof HTMLInputElement||K instanceof HTMLSelectElement}))){var q=Date.now();q-m<=cu?(_++,_===2&&l(sh(I))):_=1,m=q}}}return s.addEventListener("click",E),{dblclick:l,simDblclick:E}}function hu(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Jr=Vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=Vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ga=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function _a(s){return typeof s=="string"?document.getElementById(s):s}function er(s,l){var m=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);m=_?_[l]:null}return m==="auto"?null:m}function Me(s,l,m){var _=document.createElement(s);return _.className=l||"",m&&m.appendChild(_),_}function Ve(s){var l=s.parentNode;l&&l.removeChild(s)}function Ht(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Tn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function En(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Zr(s,l){if(s.classList!==void 0)return s.classList.contains(l);var m=jn(s);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function ae(s,l){if(s.classList!==void 0)for(var m=b(l),_=0,E=m.length;_<E;_++)s.classList.add(m[_]);else if(!Zr(s,l)){var I=jn(s);Si(s,(I?I+" ":"")+l)}}function We(s,l){s.classList!==void 0?s.classList.remove(l):Si(s,C((" "+jn(s)+" ").replace(" "+l+" "," ")))}function Si(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function jn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function jt(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&fu(s,l)}function fu(s,l){var m=!1,_="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):s.style.filter+=" progid:"+_+"(opacity="+l+")"}function Vo(s){for(var l=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in l)return s[m];return!1}function Ci(s,l,m){var _=l||new J(0,0);s.style[Jr]=(ue.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(m?" scale("+m+")":"")}function it(s,l){s._leaflet_pos=l,ue.any3d?Ci(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Ii(s){return s._leaflet_pos||new J(0,0)}var Fn,cn,Fo;if("onselectstart"in document)Fn=function(){_e(window,"selectstart",ut)},cn=function(){Ge(window,"selectstart",ut)};else{var tr=Vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Fn=function(){if(tr){var s=document.documentElement.style;Fo=s[tr],s[tr]="none"}},cn=function(){tr&&(document.documentElement.style[tr]=Fo,Fo=void 0)}}function Uo(){_e(window,"dragstart",ut)}function Oo(){Ge(window,"dragstart",ut)}var Yr,ei;function ya(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Bo(),Yr=s,ei=s.style.outlineStyle,s.style.outlineStyle="none",_e(window,"keydown",Bo))}function Bo(){Yr&&(Yr.style.outlineStyle=ei,Yr=void 0,ei=void 0,Ge(window,"keydown",Bo))}function pu(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function wn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var ah={__proto__:null,TRANSFORM:Jr,TRANSITION:wi,TRANSITION_END:ga,get:_a,getStyle:er,create:Me,remove:Ve,empty:Ht,toFront:Tn,toBack:En,hasClass:Zr,addClass:ae,removeClass:We,setClass:Si,getClass:jn,setOpacity:jt,testProp:Vo,setTransform:Ci,setPosition:it,getPosition:Ii,get disableTextSelection(){return Fn},get enableTextSelection(){return cn},disableImageDrag:Uo,enableImageDrag:Oo,preventOutline:ya,restoreOutline:Bo,getSizedParentNode:pu,getScale:wn};function _e(s,l,m,_){if(l&&typeof l=="object")for(var E in l)zo(s,E,l[E],m);else{l=b(l);for(var I=0,B=l.length;I<B;I++)zo(s,l[I],m,_)}return this}var qt="_leaflet_events";function Ge(s,l,m,_){if(arguments.length===1)nr(s),delete s[qt];else if(l&&typeof l=="object")for(var E in l)Qr(s,E,l[E],m);else if(l=b(l),arguments.length===2)nr(s,function(q){return G(l,q)!==-1});else for(var I=0,B=l.length;I<B;I++)Qr(s,l[I],m,_);return this}function nr(s,l){for(var m in s[qt]){var _=m.split(/\d/)[0];(!l||l(_))&&Qr(s,_,null,null,m)}}var xi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zo(s,l,m,_){var E=l+d(m)+(_?"_"+d(_):"");if(s[qt]&&s[qt][E])return this;var I=function(q){return m.call(_||s,q||window.event)},B=I;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?I=lu(s,l,I):ue.touch&&l==="dblclick"?I=du(s,I):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(xi[l]||l,I,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(I=function(q){q=q||window.event,wa(s,q)&&B(q)},s.addEventListener(xi[l],I,!1)):s.addEventListener(l,B,!1):s.attachEvent("on"+l,I),s[qt]=s[qt]||{},s[qt][E]=I}function Qr(s,l,m,_,E){E=E||l+d(m)+(_?"_"+d(_):"");var I=s[qt]&&s[qt][E];if(!I)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?oh(s,l,I):ue.touch&&l==="dblclick"?hu(s,I):"removeEventListener"in s?s.removeEventListener(xi[l]||l,I,!1):s.detachEvent("on"+l,I),s[qt][E]=null}function Oe(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function va(s){return zo(s,"wheel",Oe),this}function Xr(s){return _e(s,"mousedown touchstart dblclick contextmenu",Oe),s._leaflet_disable_click=!0,this}function ut(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ti(s){return ut(s),Oe(s),this}function Ta(s){if(s.composedPath)return s.composedPath();for(var l=[],m=s.target;m;)l.push(m),m=m.parentNode;return l}function jr(s,l){if(!l)return new J(s.clientX,s.clientY);var m=wn(l),_=m.boundingClientRect;return new J((s.clientX-_.left)/m.x-l.clientLeft,(s.clientY-_.top)/m.y-l.clientTop)}var ni=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ea(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ni:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function wa(s,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var eo={__proto__:null,on:_e,off:Ge,stopPropagation:Oe,disableScrollPropagation:va,disableClickPropagation:Xr,preventDefault:ut,stop:ti,getPropagationPath:Ta,getMousePosition:jr,getWheelDelta:Ea,isExternalTarget:wa,addListener:_e,removeListener:Ge},Sa=ne.extend({run:function(s,l,m,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Ii(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var m=this._startPos.add(this._offset.multiplyBy(s));l&&m._round(),it(this._el,m),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ce=ne.extend({options:{crs:Or,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=D(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ge(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,ga,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ge(s),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=r({animate:m.animate},m.zoom),m.pan=r({animate:m.animate,duration:m.duration},m.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,m.zoom):this._tryAnimatedPan(s,m.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,m){var _=this.getZoomScale(l),E=this.getSize().divideBy(2),I=s instanceof J?s:this.latLngToContainerPoint(s),B=I.subtract(E).multiplyBy(1-1/_),q=this.containerPointToLatLng(E.add(B));return this.setView(q,l,{zoom:m})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ke(s);var m=te(l.paddingTopLeft||l.padding||[0,0]),_=te(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(s,!1,m.add(_));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:s.getCenter(),zoom:E};var I=_.subtract(m).divideBy(2),B=this.project(s.getSouthWest(),E),q=this.project(s.getNorthEast(),E),K=this.unproject(B.add(q).divideBy(2).add(I),E);return{center:K,zoom:E}},fitBounds:function(s,l){if(s=ke(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=te(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ae(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,m){if(m=m||{},m.animate===!1||!ue.any3d)return this.setView(s,l,m);this._stop();var _=this.project(this.getCenter()),E=this.project(s),I=this.getSize(),B=this._zoom;s=ge(s),l=l===void 0?B:l;var q=Math.max(I.x,I.y),K=q*this.getZoomScale(B,l),X=E.distanceTo(_)||1,oe=1.42,pe=oe*oe;function Ie(ct){var Nu=ct?-1:1,cI=ct?K:q,dI=K*K-q*q+Nu*pe*pe*X*X,hI=2*cI*pe*X,hh=dI/hI,Og=Math.sqrt(hh*hh+1)-hh,fI=Og<1e-9?-18:Math.log(Og);return fI}function $t(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function wt(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function In(ct){return $t(ct)/wt(ct)}var tn=Ie(0);function es(ct){return q*(wt(tn)/wt(tn+oe*ct))}function sI(ct){return q*(wt(tn)*In(tn+oe*ct)-$t(tn))/pe}function aI(ct){return 1-Math.pow(1-ct,1.5)}var lI=Date.now(),Fg=(Ie(1)-tn)/oe,uI=m.duration?1e3*m.duration:1e3*Fg*.8;function Ug(){var ct=(Date.now()-lI)/uI,Nu=aI(ct)*Fg;ct<=1?(this._flyToFrame=O(Ug,this),this._move(this.unproject(_.add(E.subtract(_).multiplyBy(sI(Nu)/X)),B),this.getScaleZoom(q/es(Nu),B),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Ug.call(this),this},flyToBounds:function(s,l){var m=this._getBoundsCenterZoom(s,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(s){return s=ke(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var m=this.getCenter(),_=this._limitCenter(m,this._zoom,ke(s));return m.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var m=te(l.paddingTopLeft||l.padding||[0,0]),_=te(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),I=this.project(s),B=this.getPixelBounds(),q=Se([B.min.add(m),B.max.subtract(_)]),K=q.getSize();if(!q.contains(I)){this._enforcingBounds=!0;var X=I.subtract(q.getCenter()),oe=q.extend(I).getSize().subtract(K);E.x+=X.x<0?-oe.x:oe.x,E.y+=X.y<0?-oe.y:oe.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),_=l.divideBy(2).round(),E=m.divideBy(2).round(),I=_.subtract(E);return!I.x&&!I.y?this:(s.animate&&s.pan?this.panBy(I):(s.pan&&this._rawPanBy(I),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),m=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,s):navigator.geolocation.getCurrentPosition(l,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,m=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,m=s.coords.longitude,_=new Pe(l,m),E=_.toBounds(s.coords.accuracy*2),I=this._locateOptions;if(I.setView){var B=this.getBoundsZoom(E);this.setView(_,I.maxZoom?Math.min(B,I.maxZoom):B)}var q={latlng:_,bounds:E,timestamp:s.timestamp};for(var K in s.coords)typeof s.coords[K]=="number"&&(q[K]=s.coords[K]);this.fire("locationfound",q)}},addHandler:function(s,l){if(!l)return this;var m=this[s]=new l(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ve(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=Me("div",m,l||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new $e(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,m){s=ke(s),m=te(m||[0,0]);var _=this.getZoom()||0,E=this.getMinZoom(),I=this.getMaxZoom(),B=s.getNorthWest(),q=s.getSouthEast(),K=this.getSize().subtract(m),X=Se(this.project(q,_),this.project(B,_)).getSize(),oe=ue.any3d?this.options.zoomSnap:1,pe=K.x/X.x,Ie=K.y/X.y,$t=l?Math.max(pe,Ie):Math.min(pe,Ie);return _=this.getScaleZoom($t,_),oe&&(_=Math.round(_/(oe/100))*(oe/100),_=l?Math.ceil(_/oe)*oe:Math.floor(_/oe)*oe),Math.max(E,Math.min(I,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var m=this._getTopLeftPoint(s,l);return new he(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(s)/m.scale(l)},getScaleZoom:function(s,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var _=m.zoom(s*m.scale(l));return isNaN(_)?1/0:_},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ge(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(te(s),l)},layerPointToLatLng:function(s){var l=te(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ge(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ke(s))},distance:function(s,l){return this.options.crs.distance(ge(s),ge(l))},containerPointToLayerPoint:function(s){return te(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return te(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(te(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(s)))},mouseEventToContainerPoint:function(s){return jr(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=_a(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ae(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=er(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),it(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(s.markerPane,"leaflet-zoom-hide"),ae(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,m){it(this._mapPane,new J(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,m)._move(s,l)._moveEnd(E),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,m,_){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?m&&m.pinch&&this.fire("zoom",m):((E||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){it(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?Ge:_e;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var m=[],_,E=l==="mouseout"||l==="mouseover",I=s.target||s.srcElement,B=!1;I;){if(_=this._targets[d(I)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){B=!0;break}if(_&&_.listens(l,!0)&&(E&&!wa(I,s)||(m.push(_),E))||I===this._container)break;I=I.parentNode}return!m.length&&!B&&!E&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var m=s.type;m==="mousedown"&&ya(l),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,m){if(s.type==="click"){var _=r({},s);_.type="preclick",this._fireDOMEvent(_,_.type,m)}var E=this._findEventTargets(s,l);if(m){for(var I=[],B=0;B<m.length;B++)m[B].listens(l,!0)&&I.push(m[B]);E=I.concat(E)}if(E.length){l==="contextmenu"&&ut(s);var q=E[0],K={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var X=q.getLatLng&&(!q._radius||q._radius<=10);K.containerPoint=X?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(s),K.layerPoint=this.containerPointToLayerPoint(K.containerPoint),K.latlng=X?q.getLatLng():this.layerPointToLatLng(K.layerPoint)}for(B=0;B<E.length;B++)if(E[B].fire(l,K,!0),K.originalEvent._stopped||E[B].options.bubblingMouseEvents===!1&&G(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Ii(this._mapPane)||new J(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var m=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var m=this.getSize()._divideBy(2);return this.project(s,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return this.project(s,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return Se([this.project(s.getSouthWest(),l)._subtract(_),this.project(s.getNorthWest(),l)._subtract(_),this.project(s.getSouthEast(),l)._subtract(_),this.project(s.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,m){if(!m)return s;var _=this.project(s,l),E=this.getSize().divideBy(2),I=new he(_.subtract(E),_.add(E)),B=this._getBoundsOffset(I,m,l);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?s:this.unproject(_.add(B),l)},_limitOffset:function(s,l){if(!l)return s;var m=this.getPixelBounds(),_=new he(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(s,l,m){var _=Se(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),E=_.min.subtract(s.min),I=_.max.subtract(s.max),B=this._rebound(E.x,-I.x),q=this._rebound(E.y,-I.y);return new J(B,q)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),m=this.getMaxZoom(),_=ue.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(l,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var m=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var s=this._proxy=Me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var m=Jr,_=this._proxy.style[m];Ci(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ci(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),E=this._getCenterOffset(s)._divideBy(1-1/_);return m.animate!==!0&&!this.getSize().contains(E)?!1:(O(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,m,_){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Go(s,l){return new Ce(s,l)}var en=we.extend({options:{position:"topright"},initialize:function(s){D(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),m=this.getPosition(),_=s._controlCorners[m];return ae(l,"leaflet-control"),m.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ii=function(s){return new en(s)};Ce.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",m=this._controlContainer=Me("div",l+"control-container",this._container);function _(E,I){var B=l+E+" "+l+I;s[E+I]=Me("div",B,m)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ve(this._controlCorners[s]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mu=en.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,m,_){return m<_?-1:_<m?1:0}},initialize:function(s,l,m){D(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return en.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Me("div",s),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Xr(l),va(l);var _=this._section=Me("section",s+"-list");m&&(this._map.on("click",this.collapse,this),_e(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Me("a",s+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),_e(E,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){ut(I),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Me("div",s+"-base",_),this._separator=Me("div",s+"-separator",_),this._overlaysList=Me("div",s+"-overlays",_),l.appendChild(_)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(a(function(_,E){return this.options.sortFunction(_.layer,E.layer,_.name,E.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ht(this._baseLayersList),Ht(this._overlaysList),this._layerControlInputs=[];var s,l,m,_,E=0;for(m=0;m<this._layers.length;m++)_=this._layers[m],this._addItem(_),l=l||_.overlay,s=s||!_.overlay,E+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&E>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),m=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(s,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=m,_.firstChild},_addItem:function(s){var l=document.createElement("label"),m=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=m):_=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(_),_.layerId=d(s.layer),_e(_,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+s.name;var I=document.createElement("span");l.appendChild(I),I.appendChild(_),I.appendChild(E);var B=s.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,m,_=[],E=[];this._handlingClick=!0;for(var I=s.length-1;I>=0;I--)l=s[I],m=this._getLayer(l.layerId).layer,l.checked?_.push(m):l.checked||E.push(m);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])&&this._map.removeLayer(E[I]);for(I=0;I<_.length;I++)this._map.hasLayer(_[I])||this._map.addLayer(_[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,m,_=this._map.getZoom(),E=s.length-1;E>=0;E--)l=s[E],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&_<m.options.minZoom||m.options.maxZoom!==void 0&&_>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,_e(s,"click",ut),this.expand();var l=this;setTimeout(function(){Ge(s,"click",ut),l._preventClick=!1})}}),gu=function(s,l,m){return new mu(s,l,m)},Ai=en.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",m=Me("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,m,_,E){var I=Me("a",m,_);return I.innerHTML=s,I.href="#",I.title=l,I.setAttribute("role","button"),I.setAttribute("aria-label",l),Xr(I),_e(I,"click",ti),_e(I,"click",E,this),_e(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";We(this._zoomInButton,l),We(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ae(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ae(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ai,this.addControl(this.zoomControl))});var _u=function(s){return new Ai(s)},Ca=en.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",m=Me("div",l),_=this.options;return this._addScales(_,l+"-line",m),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,m){s.metric&&(this._mScale=Me("div",l,m)),s.imperial&&(this._iScale=Me("div",l,m))},_update:function(){var s=this._map,l=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/s)},_updateImperial:function(s){var l=s*3.2808399,m,_,E;l>5280?(m=l/5280,_=this._getRoundNum(m),this._updateScale(this._iScale,_+" mi",_/m)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(s,l,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),m=s/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),Ia=function(s){return new Ca(s)},xa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ho=en.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?xa+" ":"")+"Leaflet</a>"},initialize:function(s){D(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Me("div","leaflet-control-attribution"),Xr(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new Ho().addTo(this)});var qo=function(s){return new Ho(s)};en.Layers=mu,en.Zoom=Ai,en.Scale=Ca,en.Attribution=Ho,ii.layers=gu,ii.zoom=_u,ii.scale=Ia,ii.attribution=qo;var dn=we.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});dn.addTo=function(s,l){return s.addHandler(l,this),this};var yu={Events:$},ri=ue.touch?"touchstart mousedown":"mousedown",Un=ne.extend({options:{clickTolerance:3},initialize:function(s,l,m,_){D(this,_),this._element=s,this._dragStartTarget=l||s,this._preventOutline=m},enable:function(){this._enabled||(_e(this._dragStartTarget,ri,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Un._dragging===this&&this.finishDrag(!0),Ge(this._dragStartTarget,ri,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Zr(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Un._dragging===this&&this.finishDrag();return}if(!(Un._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Un._dragging=this,this._preventOutline&&ya(this._element),Uo(),Fn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,m=pu(this._element);this._startPoint=new J(l.clientX,l.clientY),this._startPos=Ii(this._element),this._parentScale=wn(m);var _=s.type==="mousedown";_e(document,_?"mousemove":"touchmove",this._onMove,this),_e(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,m=new J(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,ut(s),this._moved||(this.fire("dragstart"),this._moved=!0,ae(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),it(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ge(document,"mousemove touchmove",this._onMove,this),Ge(document,"mouseup touchend touchcancel",this._onUp,this),Oo(),cn();var l=this._moved&&this._moving;this._moving=!1,Un._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Aa(s,l,m){var _,E=[1,4,2,8],I,B,q,K,X,oe,pe,Ie;for(I=0,oe=s.length;I<oe;I++)s[I]._code=W(s[I],l);for(q=0;q<4;q++){for(pe=E[q],_=[],I=0,oe=s.length,B=oe-1;I<oe;B=I++)K=s[I],X=s[B],K._code&pe?X._code&pe||(Ie=H(X,K,pe,l,m),Ie._code=W(Ie,l),_.push(Ie)):(X._code&pe&&(Ie=H(X,K,pe,l,m),Ie._code=W(Ie,l),_.push(Ie)),_.push(K));s=_}return s}function Pa(s,l){var m,_,E,I,B,q,K,X,oe;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var pe=ge([0,0]),Ie=ke(s),$t=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());$t<1700&&(pe=$o(s));var wt=s.length,In=[];for(m=0;m<wt;m++){var tn=ge(s[m]);In.push(l.project(ge([tn.lat-pe.lat,tn.lng-pe.lng])))}for(q=K=X=0,m=0,_=wt-1;m<wt;_=m++)E=In[m],I=In[_],B=E.y*I.x-I.y*E.x,K+=(E.x+I.x)*B,X+=(E.y+I.y)*B,q+=B*3;q===0?oe=In[0]:oe=[K/q,X/q];var es=l.unproject(te(oe));return ge([es.lat+pe.lat,es.lng+pe.lng])}function $o(s){for(var l=0,m=0,_=0,E=0;E<s.length;E++){var I=ge(s[E]);l+=I.lat,m+=I.lng,_++}return ge([l/_,m/_])}var Wo={__proto__:null,clipPolygon:Aa,polygonCenter:Pa,centroid:$o};function Dt(s,l){if(!l||!s.length)return s.slice();var m=l*l;return s=T(s,m),s=ir(s,m),s}function Ra(s,l,m){return Math.sqrt(ye(s,l,m,!0))}function vu(s,l,m){return ye(s,l,m)}function ir(s,l){var m=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,E=new _(m);E[0]=E[m-1]=1,p(s,E,l,0,m-1);var I,B=[];for(I=0;I<m;I++)E[I]&&B.push(s[I]);return B}function p(s,l,m,_,E){var I=0,B,q,K;for(q=_+1;q<=E-1;q++)K=ye(s[q],s[_],s[E],!0),K>I&&(B=q,I=K);I>m&&(l[B]=1,p(s,l,m,_,B),p(s,l,m,B,E))}function T(s,l){for(var m=[s[0]],_=1,E=0,I=s.length;_<I;_++)ie(s[_],s[E])>l&&(m.push(s[_]),E=_);return E<I-1&&m.push(s[I-1]),m}var w;function A(s,l,m,_,E){var I=_?w:W(s,m),B=W(l,m),q,K,X;for(w=B;;){if(!(I|B))return[s,l];if(I&B)return!1;q=I||B,K=H(s,l,q,m,E),X=W(K,m),q===I?(s=K,I=X):(l=K,B=X)}}function H(s,l,m,_,E){var I=l.x-s.x,B=l.y-s.y,q=_.min,K=_.max,X,oe;return m&8?(X=s.x+I*(K.y-s.y)/B,oe=K.y):m&4?(X=s.x+I*(q.y-s.y)/B,oe=q.y):m&2?(X=K.x,oe=s.y+B*(K.x-s.x)/I):m&1&&(X=q.x,oe=s.y+B*(q.x-s.x)/I),new J(X,oe,E)}function W(s,l){var m=0;return s.x<l.min.x?m|=1:s.x>l.max.x&&(m|=2),s.y<l.min.y?m|=4:s.y>l.max.y&&(m|=8),m}function ie(s,l){var m=l.x-s.x,_=l.y-s.y;return m*m+_*_}function ye(s,l,m,_){var E=l.x,I=l.y,B=m.x-E,q=m.y-I,K=B*B+q*q,X;return K>0&&(X=((s.x-E)*B+(s.y-I)*q)/K,X>1?(E=m.x,I=m.y):X>0&&(E+=B*X,I+=q*X)),B=s.x-E,q=s.y-I,_?B*B+q*q:new J(E,I)}function Fe(s){return!M(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Be(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fe(s)}function st(s,l){var m,_,E,I,B,q,K,X;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var oe=ge([0,0]),pe=ke(s),Ie=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Ie<1700&&(oe=$o(s));var $t=s.length,wt=[];for(m=0;m<$t;m++){var In=ge(s[m]);wt.push(l.project(ge([In.lat-oe.lat,In.lng-oe.lng])))}for(m=0,_=0;m<$t-1;m++)_+=wt[m].distanceTo(wt[m+1])/2;if(_===0)X=wt[0];else for(m=0,I=0;m<$t-1;m++)if(B=wt[m],q=wt[m+1],E=B.distanceTo(q),I+=E,I>_){K=(I-_)/E,X=[q.x-K*(q.x-B.x),q.y-K*(q.y-B.y)];break}var tn=l.unproject(te(X));return ge([tn.lat+oe.lat,tn.lng+oe.lng])}var Sn={__proto__:null,simplify:Dt,pointToSegmentDistance:Ra,closestPointOnSegment:vu,clipSegment:A,_getEdgeIntersection:H,_getBitCode:W,_sqClosestPointOnSegment:ye,isFlat:Fe,_flat:Be,polylineCenter:st},On={project:function(s){return new J(s.lng,s.lat)},unproject:function(s){return new Pe(s.y,s.x)},bounds:new he([-180,-90],[180,90])},Cn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,m=this.R,_=s.lat*l,E=this.R_MINOR/m,I=Math.sqrt(1-E*E),B=I*Math.sin(_),q=Math.tan(Math.PI/4-_/2)/Math.pow((1-B)/(1+B),I/2);return _=-m*Math.log(Math.max(q,1e-10)),new J(s.lng*l*m,_)},unproject:function(s){for(var l=180/Math.PI,m=this.R,_=this.R_MINOR/m,E=Math.sqrt(1-_*_),I=Math.exp(-s.y/m),B=Math.PI/2-2*Math.atan(I),q=0,K=.1,X;q<15&&Math.abs(K)>1e-7;q++)X=E*Math.sin(B),X=Math.pow((1-X)/(1+X),E/2),K=Math.PI/2-2*Math.atan(I*X)-B,B+=K;return new Pe(B*l,s.x*l/m)}},oi={__proto__:null,LonLat:On,Mercator:Cn,SphericalMercator:sa},Ko=r({},yn,{code:"EPSG:3395",projection:Cn,transformation:function(){var s=.5/(Math.PI*Cn.R);return Ji(s,.5,-s,.5)}()}),Jo=r({},yn,{code:"EPSG:4326",projection:On,transformation:Ji(1/180,1,-1/180,.5)}),UC=r({},yt,{projection:On,transformation:Ji(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var m=l.lng-s.lng,_=l.lat-s.lat;return Math.sqrt(m*m+_*_)},infinite:!0});yt.Earth=yn,yt.EPSG3395=Ko,yt.EPSG3857=Or,yt.EPSG900913=Ql,yt.EPSG4326=Jo,yt.Simple=UC;var Bn=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},_addLayers:function(s){s=s?M(s)?s:[s]:[];for(var l=0,m=s.length;l<m;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,m=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var E=this._zoomBoundLayers[_].options;s=E.minZoom===void 0?s:Math.min(s,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zo=Bn.extend({initialize:function(s,l){D(this,l),this._layers={};var m,_;if(s)for(m=0,_=s.length;m<_;m++)this.addLayer(s[m])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),m,_;for(m in this._layers)_=this._layers[m],_[s]&&_[s].apply(_,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),OC=function(s,l){return new Zo(s,l)},Pi=Zo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Zo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Zo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new $e;for(var l in this._layers){var m=this._layers[l];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),BC=function(s,l){return new Pi(s,l)},Yo=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){D(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,l){var m=this.options,_=m[l+"Size"];typeof _=="number"&&(_=[_,_]);var E=te(_),I=te(l==="shadow"&&m.shadowAnchor||m.iconAnchor||E&&E.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(m.className||""),I&&(s.style.marginLeft=-I.x+"px",s.style.marginTop=-I.y+"px"),E&&(s.style.width=E.x+"px",s.style.height=E.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function zC(s){return new Yo(s)}var Na=Yo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Na.imagePath!="string"&&(Na.imagePath=this._detectIconPath()),(this.options.imagePath||Na.imagePath)+Yo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(m,_,E){var I=_.exec(m);return I&&I[E]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Me("div","leaflet-default-icon-path",document.body),l=er(s,"background-image")||er(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),yg=dn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Un(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,m=l._map,_=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,I=Ii(l._icon),B=m.getPixelBounds(),q=m.getPixelOrigin(),K=Se(B.min._subtract(q).add(E),B.max._subtract(q).subtract(E));if(!K.contains(I)){var X=te((Math.max(K.max.x,I.x)-K.max.x)/(B.max.x-K.max.x)-(Math.min(K.min.x,I.x)-K.min.x)/(B.min.x-K.min.x),(Math.max(K.max.y,I.y)-K.max.y)/(B.max.y-K.max.y)-(Math.min(K.min.y,I.y)-K.min.y)/(B.min.y-K.min.y)).multiplyBy(_);m.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),it(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,m=l._shadow,_=Ii(l._icon),E=l._map.layerPointToLatLng(_);m&&it(m,_),l._latlng=E,s.latlng=E,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Tu=Bn.extend({options:{icon:new Na,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){D(this,l),this._latlng=ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ge(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),_=!1;m!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),ae(m,l),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(m,"focus",this._panOnFocus,this);var E=s.icon.createShadow(this._shadow),I=!1;E!==this._shadow&&(this._removeShadow(),I=!0),E&&(ae(E,l),E.alt=""),this._shadow=E,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&I&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ge(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&it(this._icon,s),this._shadow&&it(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&jt(this._icon,s),this._shadow&&jt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,m=l.iconSize?te(l.iconSize):te(0,0),_=l.iconAnchor?te(l.iconAnchor):te(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:m.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function GC(s,l){return new Tu(s,l)}var rr=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return D(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Eu=rr.extend({options:{fill:!0,radius:10},initialize:function(s,l){D(this,l),this._latlng=ge(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ge(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return rr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,m=this._clickTolerance(),_=[s+m,l+m];this._pxBounds=new he(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function HC(s,l){return new Eu(s,l)}var lh=Eu.extend({initialize:function(s,l,m){if(typeof l=="number"&&(l=r({},m,{radius:l})),D(this,l),this._latlng=ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:rr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,m=this._map,_=m.options.crs;if(_.distance===yn.distance){var E=Math.PI/180,I=this._mRadius/yn.R/E,B=m.project([l+I,s]),q=m.project([l-I,s]),K=B.add(q).divideBy(2),X=m.unproject(K).lat,oe=Math.acos((Math.cos(I*E)-Math.sin(l*E)*Math.sin(X*E))/(Math.cos(l*E)*Math.cos(X*E)))/E;(isNaN(oe)||oe===0)&&(oe=I/Math.cos(Math.PI/180*l)),this._point=K.subtract(m.getPixelOrigin()),this._radius=isNaN(oe)?0:K.x-m.project([X,s-oe]).x,this._radiusY=K.y-B.y}else{var pe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(pe).x}this._updateBounds()}});function qC(s,l,m){return new lh(s,l,m)}var Ri=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){D(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,m=null,_=ye,E,I,B=0,q=this._parts.length;B<q;B++)for(var K=this._parts[B],X=1,oe=K.length;X<oe;X++){E=K[X-1],I=K[X];var pe=_(s,E,I,!0);pe<l&&(l=pe,m=_(s,E,I))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return st(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ge(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new $e,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Fe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],m=Fe(s),_=0,E=s.length;_<E;_++)m?(l[_]=ge(s[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(s[_]);return l},_project:function(){var s=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new J(s,s);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,m){var _=s[0]instanceof Pe,E=s.length,I,B;if(_){for(B=[],I=0;I<E;I++)B[I]=this._map.latLngToLayerPoint(s[I]),m.extend(B[I]);l.push(B)}else for(I=0;I<E;I++)this._projectLatlngs(s[I],l,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,_,E,I,B,q,K;for(m=0,E=0,I=this._rings.length;m<I;m++)for(K=this._rings[m],_=0,B=K.length;_<B-1;_++)q=A(K[_],K[_+1],s,_,!0),q&&(l[E]=l[E]||[],l[E].push(q[0]),(q[1]!==K[_+1]||_===B-2)&&(l[E].push(q[1]),E++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,m=0,_=s.length;m<_;m++)s[m]=Dt(s[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var m,_,E,I,B,q,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,I=this._parts.length;m<I;m++)for(q=this._parts[m],_=0,B=q.length,E=B-1;_<B;E=_++)if(!(!l&&_===0)&&Ra(s,q[E],q[_])<=K)return!0;return!1}});function $C(s,l){return new Ri(s,l)}Ri._flat=Be;var Qo=Ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Ri.prototype._convertLatLngs.call(this,s),m=l.length;return m>=2&&l[0]instanceof Pe&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(s){Ri.prototype._setLatLngs.call(this,s),Fe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,m=new J(l,l);if(s=new he(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,E=this._rings.length,I;_<E;_++)I=Aa(this._rings[_],s,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,m,_,E,I,B,q,K,X;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(I=0,K=this._parts.length;I<K;I++)for(m=this._parts[I],B=0,X=m.length,q=X-1;B<X;q=B++)_=m[B],E=m[q],_.y>s.y!=E.y>s.y&&s.x<(E.x-_.x)*(s.y-_.y)/(E.y-_.y)+_.x&&(l=!l);return l||Ri.prototype._containsPoint.call(this,s,!0)}});function WC(s,l){return new Qo(s,l)}var Ni=Pi.extend({initialize:function(s,l){D(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=M(s)?s:s.features,m,_,E;if(l){for(m=0,_=l.length;m<_;m++)E=l[m],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var I=this.options;if(I.filter&&!I.filter(s))return this;var B=wu(s,I);return B?(B.feature=Iu(s),B.defaultOptions=B.options,this.resetStyle(B),I.onEachFeature&&I.onEachFeature(s,B),this.addLayer(B)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function wu(s,l){var m=s.type==="Feature"?s.geometry:s,_=m?m.coordinates:null,E=[],I=l&&l.pointToLayer,B=l&&l.coordsToLatLng||uh,q,K,X,oe;if(!_&&!m)return null;switch(m.type){case"Point":return q=B(_),vg(I,s,q,l);case"MultiPoint":for(X=0,oe=_.length;X<oe;X++)q=B(_[X]),E.push(vg(I,s,q,l));return new Pi(E);case"LineString":case"MultiLineString":return K=Su(_,m.type==="LineString"?0:1,B),new Ri(K,l);case"Polygon":case"MultiPolygon":return K=Su(_,m.type==="Polygon"?1:2,B),new Qo(K,l);case"GeometryCollection":for(X=0,oe=m.geometries.length;X<oe;X++){var pe=wu({geometry:m.geometries[X],type:"Feature",properties:s.properties},l);pe&&E.push(pe)}return new Pi(E);case"FeatureCollection":for(X=0,oe=m.features.length;X<oe;X++){var Ie=wu(m.features[X],l);Ie&&E.push(Ie)}return new Pi(E);default:throw new Error("Invalid GeoJSON object.")}}function vg(s,l,m,_){return s?s(l,m):new Tu(m,_&&_.markersInheritOptions&&_)}function uh(s){return new Pe(s[1],s[0],s[2])}function Su(s,l,m){for(var _=[],E=0,I=s.length,B;E<I;E++)B=l?Su(s[E],l-1,m):(m||uh)(s[E]),_.push(B);return _}function ch(s,l){return s=ge(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Cu(s,l,m,_){for(var E=[],I=0,B=s.length;I<B;I++)E.push(l?Cu(s[I],Fe(s[I])?0:l-1,m,_):ch(s[I],_));return!l&&m&&E.length>0&&E.push(E[0].slice()),E}function Xo(s,l){return s.feature?r({},s.feature,{geometry:l}):Iu(l)}function Iu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var dh={toGeoJSON:function(s){return Xo(this,{type:"Point",coordinates:ch(this.getLatLng(),s)})}};Tu.include(dh),lh.include(dh),Eu.include(dh),Ri.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),m=Cu(this._latlngs,l?1:0,!1,s);return Xo(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Qo.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),m=l&&!Fe(this._latlngs[0]),_=Cu(this._latlngs,m?2:l?1:0,!0,s);return l||(_=[_]),Xo(this,{type:(m?"Multi":"")+"Polygon",coordinates:_})}}),Zo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(s).geometry.coordinates)}),Xo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var m=l==="GeometryCollection",_=[];return this.eachLayer(function(E){if(E.toGeoJSON){var I=E.toGeoJSON(s);if(m)_.push(I.geometry);else{var B=Iu(I);B.type==="FeatureCollection"?_.push.apply(_,B.features):_.push(B)}}}),m?Xo(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function Tg(s,l){return new Ni(s,l)}var KC=Tg,xu=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,m){this._url=s,this._bounds=ke(l),D(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Tn(this._image),this},bringToBack:function(){return this._map&&En(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ke(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Me("img");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ci(this._image,m,l)},_reset:function(){var s=this._image,l=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();it(s,l.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),JC=function(s,l,m){return new xu(s,l,m)},Eg=xu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Me("video");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var m=l.getElementsByTagName("source"),_=[],E=0;E<m.length;E++)_.push(m[E].src);this._url=m.length>0?_:[l.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var B=Me("source");B.src=this._url[I],l.appendChild(B)}}});function ZC(s,l,m){return new Eg(s,l,m)}var wg=xu.extend({_initImage:function(){var s=this._image=this._url;ae(s,"leaflet-image-layer"),this._zoomAnimated&&ae(s,"leaflet-zoom-animated"),this.options.className&&ae(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function YC(s,l,m){return new wg(s,l,m)}var si=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Pe||M(s))?(this._latlng=ge(s),D(this,l)):(D(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&jt(this._container,1),this.bringToFront(),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(jt(this._container,0),this._removeTimeout=setTimeout(a(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Tn(this._container),this},bringToBack:function(){return this._map&&En(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Pi){l=null;var m=this._source._layers;for(var _ in m)if(m[_]._map){l=m[_];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=te(this.options.offset),m=this._getAnchor();this._zoomAnimated?it(this._container,s.add(m)):l=l.add(s).add(m);var _=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(s,l,m,_){var E=l;return E instanceof s||(E=new s(_).setContent(l)),m&&E.setLatLng(m),E}}),Bn.include({_initOverlay:function(s,l,m,_){var E=m;return E instanceof s?(D(E,_),E._source=this):(E=l&&!_?l:new s(_,this),E.setContent(m)),E}});var Au=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,si.prototype.openOn.call(this,s)},onAdd:function(s){si.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Oe))},onRemove:function(s){si.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Oe))},getEvents:function(){var s=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Me("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Me("div",s+"-content-wrapper",l);if(this._contentNode=Me("div",s+"-content",m),Xr(l),va(this._contentNode),_e(l,"contextmenu",Oe),this._tipContainer=Me("div",s+"-tip-container",l),this._tip=Me("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Me("a",s+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',_e(_,"click",function(E){ut(E),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var _=s.offsetHeight,E=this.options.maxHeight,I="leaflet-popup-scrolled";E&&_>E?(l.height=E+"px",ae(s,I)):We(s,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();it(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(er(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,_=this._containerWidth,E=new J(this._containerLeft,-m-this._containerBottom);E._add(Ii(this._container));var I=s.layerPointToContainerPoint(E),B=te(this.options.autoPanPadding),q=te(this.options.autoPanPaddingTopLeft||B),K=te(this.options.autoPanPaddingBottomRight||B),X=s.getSize(),oe=0,pe=0;I.x+_+K.x>X.x&&(oe=I.x+_-X.x+K.x),I.x-oe-q.x<0&&(oe=I.x-q.x),I.y+m+K.y>X.y&&(pe=I.y+m-X.y+K.y),I.y-pe-q.y<0&&(pe=I.y-q.y),(oe||pe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([oe,pe]))}},_getAnchor:function(){return te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),QC=function(s,l){return new Au(s,l)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(s,l,m){return this._initOverlay(Au,s,l,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Bn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Au,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Pi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ti(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Pu=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){si.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){si.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=si.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Me("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,m,_=this._map,E=this._container,I=_.latLngToContainerPoint(_.getCenter()),B=_.layerPointToContainerPoint(s),q=this.options.direction,K=E.offsetWidth,X=E.offsetHeight,oe=te(this.options.offset),pe=this._getAnchor();q==="top"?(l=K/2,m=X):q==="bottom"?(l=K/2,m=0):q==="center"?(l=K/2,m=X/2):q==="right"?(l=0,m=X/2):q==="left"?(l=K,m=X/2):B.x<I.x?(q="right",l=0,m=X/2):(q="left",l=K+(oe.x+pe.x)*2,m=X/2),s=s.subtract(te(l,m,!0)).add(oe).add(pe),We(E,"leaflet-tooltip-right"),We(E,"leaflet-tooltip-left"),We(E,"leaflet-tooltip-top"),We(E,"leaflet-tooltip-bottom"),ae(E,"leaflet-tooltip-"+q),it(E,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&jt(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),XC=function(s,l){return new Pu(s,l)};Ce.include({openTooltip:function(s,l,m){return this._initOverlay(Pu,s,l,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Bn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pu,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Pi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(_e(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),_e(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,m,_;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var Sg=Yo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Ht(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var _=te(m.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function jC(s){return new Sg(s)}Yo.Default=Na;var ka=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){D(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ve(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Tn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(En(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof J?s:new J(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,m=-s(-1/0,1/0),_=0,E=l.length,I;_<E;_++)I=l[_].style.zIndex,l[_]!==this._container&&I&&(m=s(m,+I));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){jt(this._container,this.options.opacity);var s=+new Date,l=!1,m=!1;for(var _ in this._tiles){var E=this._tiles[_];if(!(!E.current||!E.loaded)){var I=Math.min(1,(s-E.loaded)/200);jt(E.el,I),I<1?l=!0:(E.active?m=!0:this._onOpaqueTile(E),E.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=l-Math.abs(s-m),this._onUpdateLevel(m)):(Ve(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var _=this._levels[s],E=this._map;return _||(_=this._levels[s]={},_.el=Me("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=E.project(E.unproject(E.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,E.getCenter(),E.getZoom()),y(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ve(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,m,_){var E=Math.floor(s/2),I=Math.floor(l/2),B=m-1,q=new J(+E,+I);q.z=+B;var K=this._tileCoordsToKey(q),X=this._tiles[K];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),B>_?this._retainParent(E,I,B,_):!1)},_retainChildren:function(s,l,m,_){for(var E=2*s;E<2*s+2;E++)for(var I=2*l;I<2*l+2;I++){var B=new J(E,I);B.z=m+1;var q=this._tileCoordsToKey(B),K=this._tiles[q];if(K&&K.active){K.retain=!0;continue}else K&&K.loaded&&(K.retain=!0);m+1<_&&this._retainChildren(E,I,m+1,_)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,m,_){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var I=this.options.updateWhenZooming&&E!==this._tileZoom;(!_||I)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,l)},_setZoomTransform:function(s,l,m){var _=this._map.getZoomScale(m,s.zoom),E=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,m)).round();ue.any3d?Ci(s.el,E,_):it(s.el,E)},_resetGrid:function(){var s=this._map,l=s.options.crs,m=this._tileSize=this.getTileSize(),_=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],_).x/m.x),Math.ceil(s.project([0,l.wrapLng[1]],_).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],_).y/m.x),Math.ceil(s.project([l.wrapLat[1],0],_).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(m,this._tileZoom),E=l.project(s,this._tileZoom).floor(),I=l.getSize().divideBy(_*2);return new he(E.subtract(I),E.add(I))},_update:function(s){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),E=this._pxBoundsToTileRange(_),I=E.getCenter(),B=[],q=this.options.keepBuffer,K=new he(E.getBottomLeft().subtract([q,-q]),E.getTopRight().add([q,-q]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var oe=this._tiles[X].coords;(oe.z!==this._tileZoom||!K.contains(new J(oe.x,oe.y)))&&(this._tiles[X].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var pe=E.min.y;pe<=E.max.y;pe++)for(var Ie=E.min.x;Ie<=E.max.x;Ie++){var $t=new J(Ie,pe);if($t.z=this._tileZoom,!!this._isValidTile($t)){var wt=this._tiles[this._tileCoordsToKey($t)];wt?wt.current=!0:B.push($t)}}if(B.sort(function(tn,es){return tn.distanceTo(I)-es.distanceTo(I)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var In=document.createDocumentFragment();for(Ie=0;Ie<B.length;Ie++)this._addTile(B[Ie],In);this._level.el.appendChild(In)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!l.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return ke(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,m=this.getTileSize(),_=s.scaleBy(m),E=_.add(m),I=l.unproject(_,s.z),B=l.unproject(E,s.z);return[I,B]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),m=new $e(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),m=new J(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(s){var l=this._tiles[s];l&&(Ve(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ae(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,ue.ielt9&&this.options.opacity<1&&jt(s,this.options.opacity)},_addTile:function(s,l){var m=this._getTilePos(s),_=this._tileCoordsToKey(s),E=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(E),this.createTile.length<2&&O(a(this._tileReady,this,s,null,E)),it(E,m),this._tiles[_]={el:E,coords:s,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:s})},_tileReady:function(s,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:s});var _=this._tileCoordsToKey(s);m=this._tiles[_],m&&(m.loaded=+new Date,this._map._fadeAnimated?(jt(m.el,0),z(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(ae(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new J(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new he(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function eI(s){return new ka(s)}var jo=ka.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=D(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var m=document.createElement("img");return _e(m,"load",a(this._tileOnLoad,this,l,m)),_e(m,"error",a(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=m),l["-y"]=m}return R(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ue.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,m){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),s(m,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,_=this.options.zoomOffset;return m&&(s=l-s),s+_},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=Z;var m=this._tiles[s].coords;Ve(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",Z),ka.prototype._removeTile.call(this,s)},_tileReady:function(s,l,m){if(!(!this._map||m&&m.getAttribute("src")===Z))return ka.prototype._tileReady.call(this,s,l,m)}});function Cg(s,l){return new jo(s,l)}var Ig=jo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var m=r({},this.defaultWmsParams);for(var _ in l)_ in this.options||(m[_]=l[_]);l=D(this,l);var E=l.detectRetina&&ue.retina?2:1,I=this.getTileSize();m.width=I.x*E,m.height=I.y*E,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,jo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),m=this._crs,_=Se(m.project(l[0]),m.project(l[1])),E=_.min,I=_.max,B=(this._wmsVersion>=1.3&&this._crs===Jo?[E.y,E.x,I.y,I.x]:[E.x,E.y,I.x,I.y]).join(","),q=jo.prototype.getTileUrl.call(this,s);return q+U(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function tI(s,l){return new Ig(s,l)}jo.WMS=Ig,Cg.wms=tI;var ki=Bn.extend({options:{padding:.1},initialize:function(s){D(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var m=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),I=_.multiplyBy(-m).add(E).subtract(this._map._getNewPixelOrigin(s,l));ue.any3d?Ci(this._container,I,m):it(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new he(m,m.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xg=ki.extend({options:{tolerance:0},getEvents:function(){var s=ki.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ki.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");_e(s,"mousemove",this._onMouseMove,this),_e(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Ve(this._container),Ge(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var s=this._bounds,l=this._container,m=s.getSize(),_=ue.retina?2:1;it(l,s.min),l.width=_*m.x,l.height=_*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ki.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,m=l.next,_=l.prev;m?m.prev=_:this._drawLast=_,_?_.next=m:this._drawFirst=m,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),m=[],_,E;for(E=0;E<l.length;E++){if(_=Number(l[E]),isNaN(_))return;m.push(_)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var m,_,E,I,B=s._parts,q=B.length,K=this._ctx;if(q){for(K.beginPath(),m=0;m<q;m++){for(_=0,E=B[m].length;_<E;_++)I=B[m][_],K[_?"lineTo":"moveTo"](I.x,I.y);l&&K.closePath()}this._fillStroke(K,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,m=this._ctx,_=Math.max(Math.round(s._radius),1),E=(Math.max(Math.round(s._radiusY),1)||_)/_;E!==1&&(m.save(),m.scale(1,E)),m.beginPath(),m.arc(l.x,l.y/E,_,0,Math.PI*2,!1),E!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,l){var m=l.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),m,_,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(_=m);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(We(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var m,_,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(l)&&(_=m);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(ae(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,m){this._map._fireDOMEvent(l,m||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(m)m.prev=_;else return;_?_.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(_)_.next=m;else return;m?m.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Ag(s){return ue.canvas?new xg(s):null}var Ma=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),nI={_initContainer:function(){this._container=Me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ki.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ma("shape");ae(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ma("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ve(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,m=s._fill,_=s.options,E=s._container;E.stroked=!!_.stroke,E.filled=!!_.fill,_.stroke?(l||(l=s._stroke=Ma("stroke")),E.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=M(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(E.removeChild(l),s._stroke=null),_.fill?(m||(m=s._fill=Ma("fill")),E.appendChild(m),m.color=_.fillColor||_.color,m.opacity=_.fillOpacity):m&&(E.removeChild(m),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),m=Math.round(s._radius),_=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+_+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Tn(s._container)},_bringToBack:function(s){En(s._container)}},Ru=ue.vml?Ma:Xl,La=ki.extend({_initContainer:function(){this._container=Ru("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ru("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),Ge(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var s=this._bounds,l=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),it(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Ru("path");s.options.className&&ae(l,s.options.className),s.options.interactive&&ae(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ve(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,m=s.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ao(s._parts,l))},_updateCircle:function(s){var l=s._point,m=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||m,E="a"+m+","+_+" 0 1,0 ",I=s._empty()?"M0 0":"M"+(l.x-m)+","+l.y+E+m*2+",0 "+E+-m*2+",0 ";this._setPath(s,I)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Tn(s._path)},_bringToBack:function(s){En(s._path)}});ue.vml&&La.include(nI);function Pg(s){return ue.svg||ue.vml?new La(s):null}Ce.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Ag(s)||Pg(s)}});var Rg=Qo.extend({initialize:function(s,l){Qo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ke(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function iI(s,l){return new Rg(s,l)}La.create=Ru,La.pointsToPath=Ao,Ni.geometryToLayer=wu,Ni.coordsToLatLng=uh,Ni.coordsToLatLngs=Su,Ni.latLngToCoords=ch,Ni.latLngsToCoords=Cu,Ni.getFeature=Xo,Ni.asFeature=Iu,Ce.mergeOptions({boxZoom:!0});var Ng=dn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ge(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Fn(),Uo(),this._startPoint=this._map.mouseEventToContainerPoint(s),_e(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Me("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new he(this._point,this._startPoint),m=l.getSize();it(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Ve(this._box),We(this._container,"leaflet-crosshair")),cn(),Oo(),Ge(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",Ng),Ce.mergeOptions({doubleClickZoom:!0});var kg=dn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,m=l.getZoom(),_=l.options.zoomDelta,E=s.originalEvent.shiftKey?m-_:m+_;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(s.containerPoint,E)}});Ce.addInitHook("addHandler","doubleClickZoom",kg),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mg=dn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Un(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ke(this._map.options.maxBounds);this._offsetLimit=Se(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),m=this._initialWorldOffset,_=this._draggable._newPos.x,E=(_-l+m)%s+l-m,I=(_+l+m)%s-l-m,B=Math.abs(E+m)<Math.abs(I+m)?E:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(s){var l=this._map,m=l.options,_=!m.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),_)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,B=m.easeLinearity,q=E.multiplyBy(B/I),K=q.distanceTo([0,0]),X=Math.min(m.inertiaMaxSpeed,K),oe=q.multiplyBy(X/K),pe=X/(m.inertiaDeceleration*B),Ie=oe.multiplyBy(-pe/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),O(function(){l.panBy(Ie,{duration:pe,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",Mg),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Lg=dn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),_e(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ge(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,m=s.scrollTop||l.scrollTop,_=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},m=this.keyCodes,_,E;for(_=0,E=m.left.length;_<E;_++)l[m.left[_]]=[-1*s,0];for(_=0,E=m.right.length;_<E;_++)l[m.right[_]]=[s,0];for(_=0,E=m.down.length;_<E;_++)l[m.down[_]]=[0,s];for(_=0,E=m.up.length;_<E;_++)l[m.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},m=this.keyCodes,_,E;for(_=0,E=m.zoomIn.length;_<E;_++)l[m.zoomIn[_]]=s;for(_=0,E=m.zoomOut.length;_<E;_++)l[m.zoomOut[_]]=-s},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ge(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,m=this._map,_;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(_=this._panKeys[l],s.shiftKey&&(_=te(_).multiplyBy(3)),m.options.maxBounds&&(_=m._limitOffset(te(_),m.options.maxBounds)),m.options.worldCopyJump){var E=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(_)));m.panTo(E)}else m.panBy(_)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;ti(s)}}});Ce.addInitHook("addHandler","keyboard",Lg),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dg=dn.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ge(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Ea(s),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),_),ti(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,I=m?Math.ceil(E/m)*m:E,B=s._limitZoom(l+(this._delta>0?I:-I))-l;this._delta=0,this._startTime=null,B&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+B):s.setZoomAround(this._lastMousePos,l+B))}});Ce.addInitHook("addHandler","scrollWheelZoom",Dg);var rI=600;Ce.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var bg=dn.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ge(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new J(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",ut),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),rI),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ge(document,"touchend",ut),Ge(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ge(document,"touchend touchcancel contextmenu",this._cancel,this),Ge(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new J(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Ce.addInitHook("addHandler","tapHold",bg),Ce.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Vg=dn.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Ge(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(_)._divideBy(2))),this._startDist=m.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),ut(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]),E=m.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var I=m._add(_)._divideBy(2)._subtract(this._centerPoint);if(E===1&&I.x===0&&I.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var B=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(B,this,!0),ut(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Ge(document,"touchmove",this._onTouchMove,this),Ge(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",Vg),Ce.BoxZoom=Ng,Ce.DoubleClickZoom=kg,Ce.Drag=Mg,Ce.Keyboard=Lg,Ce.ScrollWheelZoom=Dg,Ce.TapHold=bg,Ce.TouchZoom=Vg,n.Bounds=he,n.Browser=ue,n.CRS=yt,n.Canvas=xg,n.Circle=lh,n.CircleMarker=Eu,n.Class=we,n.Control=en,n.DivIcon=Sg,n.DivOverlay=si,n.DomEvent=eo,n.DomUtil=ah,n.Draggable=Un,n.Evented=ne,n.FeatureGroup=Pi,n.GeoJSON=Ni,n.GridLayer=ka,n.Handler=dn,n.Icon=Yo,n.ImageOverlay=xu,n.LatLng=Pe,n.LatLngBounds=$e,n.Layer=Bn,n.LayerGroup=Zo,n.LineUtil=Sn,n.Map=Ce,n.Marker=Tu,n.Mixin=yu,n.Path=rr,n.Point=J,n.PolyUtil=Wo,n.Polygon=Qo,n.Polyline=Ri,n.Popup=Au,n.PosAnimation=Sa,n.Projection=oi,n.Rectangle=Rg,n.Renderer=ki,n.SVG=La,n.SVGOverlay=wg,n.TileLayer=jo,n.Tooltip=Pu,n.Transformation=aa,n.Util=V,n.VideoOverlay=Eg,n.bind=a,n.bounds=Se,n.canvas=Ag,n.circle=qC,n.circleMarker=HC,n.control=ii,n.divIcon=jC,n.extend=r,n.featureGroup=BC,n.geoJSON=Tg,n.geoJson=KC,n.gridLayer=eI,n.icon=zC,n.imageOverlay=JC,n.latLng=ge,n.latLngBounds=ke,n.layerGroup=OC,n.map=Go,n.marker=GC,n.point=te,n.polygon=WC,n.polyline=$C,n.popup=QC,n.rectangle=iI,n.setOptions=D,n.stamp=d,n.svg=Pg,n.svgOverlay=YC,n.tileLayer=Cg,n.tooltip=XC,n.transformation=Ji,n.version=i,n.videoOverlay=ZC;var oI=window.L;n.noConflict=function(){return window.L=oI,this},window.L=n})})(Mp,Mp.exports);var FU=Mp.exports;const ci=B0(FU),UU=({initialLat:t,initialLng:e,onLocationSelect:n,onAddressFound:i})=>{const r=xe.useRef(null),o=xe.useRef(null),a=xe.useRef(null),[u,d]=xe.useState(!1),h=38.4237,g=27.1428;xe.useEffect(()=>{if(!r.current)return;if(o.current){o.current.invalidateSize();return}const D=ci.map(r.current).setView([t||h,e||g],t?16:12);return ci.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(D),t&&e&&C(t,e,D),D.on("click",U=>{v(U.latlng.lat,U.latlng.lng,D)}),o.current=D,()=>{o.current&&(o.current.remove(),o.current=null)}},[]),xe.useEffect(()=>{var D;if(o.current&&t&&e){const U=(D=a.current)==null?void 0:D.getLatLng();(!U||U.lat!==t||U.lng!==e)&&(C(t,e,o.current),o.current.setView([t,e],16))}},[t,e]);const y=async(D,U)=>{if(i){d(!0);try{const x=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${D}&lon=${U}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"tr-TR"}});if(!x.ok)throw new Error("Adres alnamad");const R=await x.json(),M=R.address;if(M){const G=M.town||M.county||M.city_district||"",Z=M.suburb||M.neighbourhood||M.quarter||"",Y=M.road||"",k=M.province||M.city||"zmir";i({district:G,neighborhood:Z,street:Y,city:k,fullAddress:R.display_name})}}catch(x){console.error("Adres zmleme hatas:",x)}finally{d(!1)}}},v=(D,U,x)=>{C(D,U,x),n(D,U),y(D,U)},C=(D,U,x)=>{a.current&&a.current.remove();const R=ci.divIcon({className:"custom-div-icon",html:`<div style="background-color: #2563eb; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; color: white;">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
             </div>`,iconSize:[30,30],iconAnchor:[15,30]});a.current=ci.marker([D,U],{icon:R}).addTo(x)},b=()=>{if(!navigator.geolocation){alert("Taraycnz konum servisini desteklemiyor.");return}d(!0),navigator.geolocation.getCurrentPosition(D=>{const{latitude:U,longitude:x}=D.coords;o.current&&(o.current.setView([U,x],16),v(U,x,o.current)),d(!1)},()=>{alert("Konum alnamad. Ltfen izinleri kontrol edin."),d(!1)})};return S.jsxs("div",{className:"relative w-full h-full group",children:[S.jsx("div",{ref:r,className:"w-full h-full rounded-lg z-0",style:{minHeight:"300px"}}),u&&S.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-blue-100 z-[400] flex items-center gap-2 text-xs font-semibold text-blue-600 animate-in fade-in slide-in-from-top-2",children:[S.jsx(cd,{size:14,className:"animate-spin"}),"Adres zmleniyor..."]}),S.jsx("button",{type:"button",onClick:b,className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md border border-slate-200 text-slate-700 hover:text-blue-600 hover:bg-slate-50 z-[400]",title:"Mevcut Konumumu Bul",children:S.jsx(cM,{size:24})}),S.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-md text-xs font-semibold text-slate-600 shadow-sm border border-slate-200 z-[400]",children:"Konum semek iin haritaya tklayn"})]})},nn={Konak:{Alsancak:["Kbrs ehitleri Cad.","Talatpaa Bulv.","1456. Sokak","Plevne Bulv."],Gztepe:["Mithatpaa Cad.","Susuzdede Park","100. Sokak","Mustafa Kemal Sahil Bulv."],Pasaport:["Cumhuriyet Bulv.","Akdeniz Cad.","1382. Sokak"],"Mimar Sinan":["air Eref Bulv.","Ziya Gkalp Bulv."],Kltr:["evket zelik Sok.","1390. Sokak"]},Karyaka:{Bostanl:["Cemal Grsel Cad.","ehitler Bulv.","2010. Sokak","Bostanl skelesi"],Maviehir:["Cahar Dudayev Bulv.","Aziz Nesin Bulv.","2040. Sokak"],ar:["Kemalpaa Cad.","Salah Birsel Sok.","1710. Sokak"],Bahelievler:["Zbeyde Hanm Cad.","1671. Sokak"]},Bornova:{zkanlar:["Mustafa Kemal Cad.","Sakarya Cad.","252. Sokak"],Kkpark:["Svari Cad.","Zafer Cad.","160. Sokak"],Kazmdirik:["Gediz Cad.","372. Sokak"]},Buca:{irinyer:["Menderes Cad.","Kouyolu Cad.","Forbes Cad."],Tnaztepe:["Dou Cad.","202. Sokak"]}},OU=["TP1","TP2","TP3","DER"],BU=["Bykehir","le","zel Mlkiyet","Kamu","Dier"],zU=({initialData:t,onSave:e,onCancel:n})=>{var z,V,we,ot;const[i,r]=xe.useState({id:"",name:"",phone:"",city:"zmir",district:"",neighborhood:"",street:"",address:"",location:void 0,capacity:0,plates:[],ukomeDecisionNo:"",ukomeDate:"",ukomeSummary:"",status:fp.ACTIVE,officeType:"TP1",responsibility:"Bykehir",notes:"",history:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[o,a]=xe.useState(""),[u,d]=xe.useState(!1),[h,g]=xe.useState(!1),[y,v]=xe.useState(Object.keys(nn)),[C,b]=xe.useState([]),[D,U]=xe.useState([]);xe.useEffect(()=>{t?(r({...t,plates:t.plates||[]}),t.district&&nn[t.district]&&(b(Object.keys(nn[t.district])),t.neighborhood&&nn[t.district][t.neighborhood]&&U(nn[t.district][t.neighborhood]))):r($=>({...$,id:Date.now().toString()}))},[t]);const x=$=>{const{name:ne,value:J}=$.target;r(de=>({...de,[ne]:J}))},R=$=>{const ne=$.target.value;M(ne)},M=$=>{r(ne=>({...ne,district:$,neighborhood:"",street:""})),b($&&nn[$]?Object.keys(nn[$]):[]),U([])},G=$=>{const ne=$.target.value;Z(ne,i.district)},Z=($,ne)=>{r(J=>({...J,neighborhood:$,street:""})),ne&&$&&nn[ne]&&nn[ne][$]?U(nn[ne][$]||[]):U([])},Y=$=>{let ne="",J="",de=[],te=[];if($.district){const he=$.district.replace(/(lesi|le)$/i,"").trim(),Se=Object.keys(nn).find($e=>$e.toLocaleLowerCase("tr-TR")===he.toLocaleLowerCase("tr-TR"));Se&&(ne=Se,de=Object.keys(nn[ne]))}if(ne&&$.neighborhood){const he=$.neighborhood.replace(/(Mahallesi|Mah\.|Mah|Mh\.|Mh)$/i,"").trim(),Se=nn[ne];if(Se){const $e=Object.keys(Se).find(ke=>ke.toLocaleLowerCase("tr-TR")===he.toLocaleLowerCase("tr-TR"));$e&&(J=$e,te=nn[ne][J]||[])}}ne&&(b(de),U(te),r(he=>({...he,district:ne,neighborhood:J,street:$.street||he.street})))},k=async()=>{if(!i.district||!i.name){alert("Ltfen nce le ve Durak Ad giriniz.");return}d(!0);const $=await VU(i.name,i.capacity,i.district);r(ne=>({...ne,notes:ne.notes?ne.notes+`
`+$:$})),d(!1)},P=()=>{if(!o.trim())return;const $=o.toUpperCase().trim();if(i.plates.includes($)){alert("Bu plaka zaten ekli.");return}r(ne=>({...ne,plates:[...ne.plates,$]})),a("")},N=$=>{r(ne=>({...ne,plates:ne.plates.filter(J=>J!==$)}))},F=$=>{$.key==="Enter"&&($.preventDefault(),P())},O=async $=>{if($.preventDefault(),!h){g(!0);try{const ne=`${i.street||""} ${i.neighborhood||""} Mah. ${i.district||""}/ZMR`;await e({...i,address:ne,capacity:Number(i.capacity),updatedAt:new Date().toISOString()})}catch(ne){console.error("Kaydetme hatas:",ne),alert("Kayt srasnda bir hata olutu."),g(!1)}}};return S.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 animate-in fade-in zoom-in duration-300",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t&&t.createdAt?"Dura Revize Et":"Yeni Taksi Dura Kayd"}),(t==null?void 0:t.ukomeDecisionNo)&&S.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[S.jsx(vo,{size:14})," lem Yaplan Karar No: ",S.jsx("strong",{children:t.ukomeDecisionNo})]})]}),S.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-700",children:S.jsx(mp,{size:24})})]}),S.jsxs("form",{onSubmit:O,className:"space-y-6",children:[S.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl border border-blue-200 shadow-sm",children:[S.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[S.jsx(vo,{size:18})," GRLEN UKOME KARAR BLGLER"]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar No"}),S.jsx("input",{name:"ukomeDecisionNo",value:i.ukomeDecisionNo,onChange:x,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-bold text-slate-800",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar Tarihi"}),S.jsx("input",{type:"date",name:"ukomeDate",value:i.ukomeDate,onChange:x,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar zeti"}),S.jsx("textarea",{name:"ukomeSummary",rows:2,value:i.ukomeSummary,onChange:x,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Ad"}),S.jsx("input",{required:!0,name:"name",value:i.name,onChange:x,placeholder:"rn: Alsancak Gar Taksi",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Telefonu"}),S.jsxs("div",{className:"relative",children:[S.jsx(HS,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),S.jsx("input",{name:"phone",value:i.phone,onChange:x,placeholder:"0232 123 45 67",className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ara Park Kapasitesi"}),S.jsx("input",{required:!0,type:"number",name:"capacity",value:i.capacity,onChange:x,min:"0",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yazhane Tipi"}),S.jsx("select",{name:"officeType",value:i.officeType,onChange:x,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:OU.map($=>S.jsx("option",{value:$,children:$},$))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sorumluluk / Yetki Alan"}),S.jsx("select",{name:"responsibility",value:i.responsibility,onChange:x,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:BU.map($=>S.jsx("option",{value:$,children:$},$))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Durumu"}),S.jsx("select",{name:"status",value:i.status,onChange:x,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:Object.values(fp).map($=>S.jsx("option",{value:$,children:$},$))})]})]}),S.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[S.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[S.jsx(ag,{size:16})," Konum Bilgileri"]}),S.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[S.jsxs("div",{className:"flex-1 space-y-4",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{className:"md:col-span-2",children:[S.jsxs("label",{className:"block text-xs font-medium text-slate-500 mb-1 flex justify-between",children:["le",i.location&&!i.district&&S.jsx("span",{className:"text-[10px] text-blue-500 animate-pulse",children:"Konumdan bekleniyor..."})]}),S.jsxs("select",{required:!0,name:"district",value:i.district,onChange:R,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[S.jsx("option",{value:"",children:"Seiniz"}),y.map($=>S.jsx("option",{value:$,children:$},$))]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Mahalle"}),S.jsxs("select",{required:!0,name:"neighborhood",value:i.neighborhood,onChange:G,disabled:!i.district,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",children:[S.jsx("option",{value:"",children:"Seiniz"}),C.map($=>S.jsx("option",{value:$,children:$},$))]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Sokak / Cadde"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{list:"streets-list",name:"street",value:i.street,onChange:x,disabled:!i.neighborhood,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",placeholder:D.length>0?"Seiniz veya yaznz":"Yaznz"}),S.jsx("datalist",{id:"streets-list",children:D.map($=>S.jsx("option",{value:$},$))})]})]})]}),S.jsxs("div",{className:"bg-white border border-slate-200 p-3 rounded-lg",children:[S.jsxs("div",{className:"text-xs font-semibold text-slate-400 mb-2 flex items-center justify-between",children:[S.jsx("span",{children:"SELEN KOORDNATLAR"}),S.jsxs("span",{className:"text-[10px] text-blue-500 flex items-center gap-1",children:[S.jsx(wM,{size:10})," Otomatik Adres Aktif"]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-slate-500",children:"Enlem:"})," ",S.jsx("span",{className:"font-mono text-slate-800",children:((z=i.location)==null?void 0:z.lat.toFixed(6))||"-"})]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-slate-500",children:"Boylam:"})," ",S.jsx("span",{className:"font-mono text-slate-800",children:((V=i.location)==null?void 0:V.lng.toFixed(6))||"-"})]})]}),!i.location&&S.jsx("div",{className:"text-xs text-red-500 mt-1",children:"* Haritadan konum seiniz"})]}),S.jsxs("div",{className:"mt-3 text-xs text-slate-500 italic border-t border-slate-200 pt-2",children:["nizleme: ",i.street," ",i.neighborhood," ",i.district&&i.neighborhood?"Mah.":""," ",i.district," / ZMR"]})]}),S.jsx("div",{className:"flex-1 min-h-[300px] border border-slate-300 rounded-lg overflow-hidden shadow-inner relative",children:S.jsx(UU,{initialLat:(we=i.location)==null?void 0:we.lat,initialLng:(ot=i.location)==null?void 0:ot.lng,onLocationSelect:($,ne)=>r(J=>({...J,location:{lat:$,lng:ne}})),onAddressFound:Y})})]})]}),S.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[S.jsxs("h3",{className:"text-sm font-semibold text-yellow-900 mb-4 flex items-center gap-2",children:[S.jsx(sg,{size:16})," Durak Plaka Listesi",S.jsxs("span",{className:"ml-2 bg-yellow-200 text-yellow-800 text-xs px-2 py-0.5 rounded-full",children:["Toplam: ",i.plates.length]})]}),S.jsxs("div",{className:"flex gap-2 mb-4",children:[S.jsx("input",{type:"text",value:o,onChange:$=>a($.target.value),onKeyDown:F,placeholder:"Plaka Giriniz (rn: 35 T 1234)",className:"flex-1 px-3 py-2 bg-white border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 outline-none"}),S.jsxs("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-500 text-white font-medium rounded-lg hover:bg-yellow-600 transition-colors flex items-center gap-2",children:[S.jsx(qS,{size:18})," Ekle"]})]}),i.plates.length>0?S.jsx("div",{className:"flex flex-wrap gap-2",children:i.plates.map(($,ne)=>S.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 pl-3 pr-2 py-1.5 rounded-md shadow-sm",children:[S.jsx("span",{className:"font-mono font-bold text-slate-800 text-sm",children:$}),S.jsx("button",{type:"button",onClick:()=>N($),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 p-1 rounded transition-colors",children:S.jsx(mp,{size:14})})]},ne))}):S.jsx("p",{className:"text-xs text-yellow-700/60 italic",children:"Henz plaka eklenmemi."})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("div",{className:"flex justify-between items-end mb-1",children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Notlar"}),S.jsxs("button",{type:"button",onClick:k,disabled:u,className:"text-xs flex items-center gap-1 text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50",children:[u?S.jsx(cd,{size:14,className:"animate-spin"}):S.jsx(vM,{size:14}),"AI ile Tantm Yazs"]})]}),S.jsx("textarea",{name:"notes",rows:3,value:i.notes,onChange:x,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),S.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[S.jsx("button",{type:"button",onClick:n,disabled:h,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:"ptal"}),S.jsxs("button",{type:"submit",disabled:h||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors shadow-sm disabled:opacity-70 disabled:cursor-not-allowed",children:[h?S.jsx(cd,{size:18,className:"animate-spin"}):S.jsx(gM,{size:18}),h?"Kaydediliyor...":"Kaydet"]})]})]})]})},GU=({stand:t,onBack:e,onRevise:n,onViewHistory:i})=>{var a;const r=[...t.history||[]].sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),o=u=>{switch(u){case"ukomeDecisionNo":return"UKOME Karar No";case"ukomeDate":return"UKOME Tarihi";case"ukomeSummary":return"UKOME Karar zeti";case"address":return"Ak Adres";case"district":return"le";case"neighborhood":return"Mahalle";case"street":return"Sokak / Cadde";case"capacity":return"Ara Park Kapasitesi";case"plates":return"Plaka Listesi";case"status":return"Durum";case"officeType":return"Yazhane Tipi";case"responsibility":return"Sorumluluk";case"name":return"Durak Ad";case"phone":return"Telefon";case"notes":return"Notlar";default:return u}};return S.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-300",children:[S.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[S.jsxs("div",{children:[S.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-2 text-sm font-medium",children:[S.jsx(zS,{size:16})," Listeye Dn"]}),S.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.name,S.jsx("span",{className:`text-sm px-3 py-1 rounded-full border ${t.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:t.status})]}),S.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-1 text-sm",children:[S.jsx(ag,{size:14})," ",t.district," / ",t.city]})]}),S.jsxs("button",{onClick:()=>n(t),className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm flex items-center gap-2",children:[S.jsx(vo,{size:18}),"Revize Et (UKOME)"]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[S.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[S.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:S.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[S.jsx(GS,{size:18,className:"text-blue-500"})," Temel Bilgiler"]})}),S.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Durak Ad"}),S.jsx("div",{className:"text-slate-900 font-medium mt-1",children:t.name})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Telefon"}),S.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[S.jsx(HS,{size:14,className:"text-slate-400"}),t.phone||"-"]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Yazhane Tipi"}),S.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[S.jsx(lM,{size:14,className:"text-slate-400"}),t.officeType]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Sorumluluk Alan"}),S.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[S.jsx(yM,{size:14,className:"text-slate-400"}),t.responsibility]})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Ak Adres"}),S.jsx("div",{className:"text-slate-900 mt-1 bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm",children:t.address})]}),t.notes&&S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Notlar"}),S.jsx("div",{className:"text-slate-700 mt-1 text-sm",children:t.notes})]})]})]}),S.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[S.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[S.jsx(hM,{size:18,className:"text-purple-500"})," Revize Gemii"]}),S.jsxs("button",{onClick:()=>i(),className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded-full hover:bg-purple-200 font-medium transition-colors flex items-center gap-1",children:[S.jsx(pp,{size:12})," Zaman Makinesi / Detayl ncele"]})]}),S.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-md",children:[r.length," lem"]})]}),S.jsx("div",{className:"overflow-x-auto",children:r.length>0?S.jsxs("table",{className:"w-full text-left text-sm",children:[S.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-200",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"lem Tarihi"}),S.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"UKOME Karar/Tarih"}),S.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Deien zellik"}),S.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Deiiklik"})]})}),S.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(u=>S.jsxs("tr",{className:"hover:bg-slate-50",children:[S.jsx("td",{className:"px-6 py-3 text-slate-500",children:new Date(u.timestamp).toLocaleDateString("tr-TR")}),S.jsx("td",{className:"px-6 py-3",children:u.relatedUkomeNo?S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{onClick:()=>i(u.relatedUkomeNo),className:"font-mono text-xs font-medium bg-blue-50 text-blue-700 px-2 py-1 rounded w-fit cursor-pointer hover:bg-blue-100 hover:underline",title:"Gemi durumunu grmek iin tkla",children:u.relatedUkomeNo}),u.relatedUkomeDate&&S.jsx("span",{className:"text-[10px] text-slate-500 mt-1",children:new Date(u.relatedUkomeDate).toLocaleDateString("tr-TR")})]}):S.jsx("span",{className:"text-slate-400 text-xs",children:"-"})}),S.jsx("td",{className:"px-6 py-3 text-slate-900 font-medium",children:o(u.fieldName)}),S.jsx("td",{className:"px-6 py-3",children:S.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[S.jsx("span",{className:"text-red-500 line-through text-xs",children:u.oldValue}),S.jsx(aM,{size:14,className:"text-slate-400"}),S.jsx("span",{className:"text-green-600 font-medium",children:u.newValue})]})})]},u.id))})]}):S.jsx("div",{className:"p-8 text-center text-slate-400",children:"Bu durak iin henz bir deiiklik kayd bulunmuyor."})})]})]}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[S.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-b border-yellow-100",children:S.jsxs("h3",{className:"font-semibold text-yellow-800 flex items-center gap-2",children:[S.jsx(sg,{size:18})," Ara Plakalar"]})}),S.jsxs("div",{className:"p-6",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4 text-sm text-slate-500",children:[S.jsxs("span",{children:["Park Kapasitesi: ",S.jsx("strong",{className:"text-slate-900",children:t.capacity})]}),S.jsxs("span",{children:["Kaytl: ",S.jsx("strong",{className:"text-blue-600",children:((a=t.plates)==null?void 0:a.length)||0})]})]}),t.plates&&t.plates.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.plates.map((u,d)=>S.jsx("div",{className:"bg-slate-50 border border-slate-200 text-center py-2 rounded font-mono font-bold text-slate-800 text-sm",children:u},d))}):S.jsx("p",{className:"text-sm text-slate-400 italic text-center py-4",children:"Kaytl plaka yok."})]})]}),S.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-6",children:[S.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[S.jsx(vo,{size:18})," Son UKOME Durumu"]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Numaras"}),S.jsx("div",{className:"text-lg font-bold text-blue-900",children:t.ukomeDecisionNo||"-"})]}),S.jsxs("div",{children:[S.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Tarihi"}),S.jsx("div",{className:"text-sm font-medium text-blue-800",children:t.ukomeDate?new Date(t.ukomeDate).toLocaleDateString("tr-TR"):"-"})]}),S.jsxs("div",{children:[S.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar zeti"}),S.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.ukomeSummary||"zet bilgisi girilmemi."})]})]})]})]})]})]})},HU=(t,e)=>{if(!e)return t;const n=JSON.parse(JSON.stringify(t)),i=[...t.history||[]].sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),r=i.filter(u=>u.relatedUkomeNo===e);if(r.length===0)return t;const o=new Date(r[0].timestamp).getTime();return i.filter(u=>new Date(u.timestamp).getTime()>o).forEach(u=>{const d=u.fieldName;d==="capacity"?n[d]=Number(u.oldValue):d==="plates"?n[d]=u.oldValue==="(Plaka Yok)"?[]:u.oldValue.split(", ").filter(Boolean):n[d]=u.oldValue}),n},qU=({stand:t,initialUkomeNo:e,onClose:n})=>{var h;const[i,r]=xe.useState(e||null),o=xe.useMemo(()=>{const g={};return t.history.forEach(y=>{const v=y.relatedUkomeNo||"Manuel Dzenleme";g[v]||(g[v]={no:v,date:y.relatedUkomeDate||"-",timestamp:y.timestamp,summary:"",logs:[],user:y.changedBy}),g[v].logs.push(y),new Date(y.timestamp)>new Date(g[v].timestamp)&&(g[v].timestamp=y.timestamp)}),Object.values(g).sort((y,v)=>new Date(v.timestamp).getTime()-new Date(y.timestamp).getTime())},[t.history]),a=xe.useMemo(()=>HU(t,i),[t,i]),u=o.find(g=>g.no===i),d=g=>{switch(g){case"ukomeDecisionNo":return"Karar No";case"ukomeDate":return"Karar Tarihi";case"address":return"Ak Adres";case"district":return"le";case"capacity":return"Kapasite";case"plates":return"Plakalar";case"status":return"Durum";case"name":return"Durak Ad";case"notes":return"Notlar";default:return g}};return S.jsxs("div",{className:"fixed inset-0 z-[2000] flex justify-end",children:[S.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:n}),S.jsxs("div",{className:"relative w-full max-w-4xl bg-white h-full shadow-2xl flex flex-col md:flex-row animate-in slide-in-from-right duration-300",children:[S.jsxs("div",{className:`w-full md:w-1/3 bg-slate-50 border-r border-slate-200 flex flex-col h-full ${i?"hidden md:flex":"flex"}`,children:[S.jsxs("div",{className:"p-5 border-b border-slate-200 bg-white",children:[S.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[S.jsx(pp,{className:"text-blue-600",size:20}),"Karar Gemii"]}),S.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Grntlemek iin bir ilem sein."})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[S.jsxs("div",{onClick:()=>r(null),className:`p-4 rounded-xl border cursor-pointer transition-all ${i===null?"bg-blue-600 text-white border-blue-600 shadow-md ring-2 ring-blue-100":"bg-white border-slate-200 hover:border-blue-300 text-slate-700"}`,children:[S.jsxs("div",{className:"flex justify-between items-start mb-1",children:[S.jsx("span",{className:"font-bold text-sm",children:"Mevcut Durum"}),S.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${i===null?"bg-blue-500 text-white":"bg-slate-100 text-slate-500"}`,children:"MD"})]}),S.jsx("div",{className:`text-xs ${i===null?"text-blue-100":"text-slate-500"}`,children:"Duran u anki gncel hali."})]}),o.map(g=>S.jsxs("div",{onClick:()=>r(g.no),className:`p-4 rounded-xl border cursor-pointer transition-all relative overflow-hidden group ${i===g.no?"bg-white border-blue-500 ring-2 ring-blue-100 shadow-md":"bg-white border-slate-200 hover:border-blue-300"}`,children:[S.jsx("div",{className:"flex justify-between items-start mb-2",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(vo,{size:16,className:i===g.no?"text-blue-600":"text-slate-400"}),S.jsx("span",{className:"font-bold text-slate-800 text-sm",children:g.no==="Manuel Dzenleme"?"Dzenleme":g.no})]})}),S.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[S.jsx(uM,{size:12}),new Date(g.date!=="-"?g.date:g.timestamp).toLocaleDateString("tr-TR")]}),S.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[S.jsx(EM,{size:12})," ",g.user," tarafndan"]}),S.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:[g.logs.length," Deiiklik"]})]},g.no))]})]}),S.jsxs("div",{className:`w-full md:w-2/3 bg-white flex flex-col h-full ${i?"flex":"hidden md:flex"}`,children:[S.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-full",children:S.jsx(zS,{size:20})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:i?`${i} Karar Sonras`:"Gncel Durum"}),S.jsx("p",{className:"text-xs text-slate-500",children:i?"Duran bu karar uygulandktan sonraki grnm.":"Duran sistemdeki en son hali."})]})]}),S.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:S.jsx(mp,{size:24})})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/30",children:[S.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-6",children:[S.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white px-6 py-3 border-b border-slate-200 flex justify-between items-center",children:[S.jsxs("div",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[S.jsx(GS,{size:18,className:"text-blue-500"}),"Durak Bilgileri (",i?"Ariv":"Gncel",")"]}),i&&S.jsx("span",{className:"text-[10px] uppercase font-bold text-white bg-orange-400 px-2 py-1 rounded",children:"Gemi Kayt"})]}),S.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durak Ad"}),S.jsx("div",{className:"text-lg font-bold text-slate-800 mt-1",children:a.name})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durum"}),S.jsx("div",{className:"mt-1",children:S.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-bold rounded border ${a.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:a.status})})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"le / Mahalle"}),S.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[a.district," / ",a.neighborhood]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Kapasite"}),S.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[a.capacity," Ara"]})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1",children:[S.jsx(ag,{size:12})," Adres"]}),S.jsx("div",{className:"text-slate-600 mt-1 text-sm bg-slate-50 p-2 rounded border border-slate-100",children:a.address})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1 mb-2",children:[S.jsx(sg,{size:12})," Kaytl Plakalar (",((h=a.plates)==null?void 0:h.length)||0,")"]}),S.jsx("div",{className:"flex flex-wrap gap-2",children:a.plates&&a.plates.length>0?a.plates.map((g,y)=>S.jsx("span",{className:"text-xs font-mono font-bold bg-yellow-50 text-slate-800 border border-yellow-200 px-2 py-1 rounded",children:g},y)):S.jsx("span",{className:"text-xs text-slate-400 italic",children:"Plaka kayd yok"})})]})]})]}),u&&S.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[S.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:S.jsx("h4",{className:"font-semibold text-slate-700 text-sm",children:"Bu Kararda Yaplan Deiiklikler"})}),S.jsxs("table",{className:"w-full text-left text-sm",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"border-b border-slate-100 text-xs text-slate-500",children:[S.jsx("th",{className:"px-6 py-2 font-medium",children:"Alan"}),S.jsx("th",{className:"px-6 py-2 font-medium",children:"Eski Deer"}),S.jsx("th",{className:"px-6 py-2 font-medium",children:"Yeni Deer"})]})}),S.jsx("tbody",{className:"divide-y divide-slate-50",children:u.logs.map(g=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:d(g.fieldName)}),S.jsx("td",{className:"px-6 py-3 text-red-500 text-xs line-through opacity-70",children:g.oldValue}),S.jsx("td",{className:"px-6 py-3 text-green-600 font-bold text-xs",children:g.newValue})]},g.id))})]})]}),i===null&&S.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 text-slate-400",children:[S.jsx(pp,{size:48,className:"mb-4 text-slate-200"}),S.jsxs("p",{children:["Gemite duran nasl grndn incelemek iin",S.jsx("br",{}),"sol menden bir UKOME karar sein."]})]})]})]})]})]})},$U=({stands:t})=>{const e=xe.useRef(null),n=xe.useRef(null),i=38.4237,r=27.1428;return xe.useEffect(()=>{if(!e.current)return;if(!n.current){const d=ci.map(e.current).setView([i,r],11);ci.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(d),n.current=d}const o=n.current;o.eachLayer(d=>{d instanceof ci.Marker&&o.removeLayer(d)});const a=t.filter(d=>d.location&&d.location.lat&&d.location.lng),u=ci.latLngBounds([]);a.forEach(d=>{var y;if(!d.location)return;const h=ci.divIcon({className:"custom-stand-icon",html:`<div style="
                    background-color: ${d.status==="Aktif"?"#facc15":"#ef4444"}; 
                    width: 36px; height: 36px; 
                    border-radius: 50%; 
                    border: 3px solid white; 
                    box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
                    display: flex; align-items: center; justify-content: center; 
                    color: ${d.status==="Aktif"?"#854d0e":"white"};
                    font-size: 10px; font-weight: bold;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>
                   </div>`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});ci.marker([d.location.lat,d.location.lng],{icon:h}).bindPopup(`
                <div style="font-family: 'Inter', sans-serif;">
                    <h3 style="font-weight: bold; margin-bottom: 4px; font-size: 14px;">${d.name}</h3>
                    <p style="margin: 0; color: #64748b; font-size: 12px;">${d.district} / ${d.neighborhood}</p>
                    <div style="margin-top: 8px; display: flex; gap: 8px;">
                        <span style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${((y=d.plates)==null?void 0:y.length)||0} Ara</span>
                        <span style="background: ${d.status==="Aktif"?"#f0fdf4":"#fef2f2"}; color: ${d.status==="Aktif"?"#166534":"#991b1b"}; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${d.status}</span>
                    </div>
                </div>
            `).addTo(o),u.extend([d.location.lat,d.location.lng])}),a.length>0&&o.fitBounds(u,{padding:[50,50]})},[t]),S.jsxs("div",{className:"w-full h-full bg-slate-100 rounded-xl overflow-hidden shadow-inner border border-slate-200 relative",children:[S.jsx("div",{ref:e,className:"w-full h-full z-0"}),S.jsxs("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-lg z-[400] border border-slate-200 text-xs",children:[S.jsx("h4",{className:"font-bold mb-2 text-slate-700",children:"Durak Durumlar"}),S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 border border-yellow-600"}),S.jsx("span",{children:"Aktif Durak"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-red-700"}),S.jsx("span",{children:"Pasif Durak"})]})]})]})},WU=()=>{const[t,e]=xe.useState("LIST"),[n,i]=xe.useState("CREATE"),[r,o]=xe.useState([]),[a,u]=xe.useState(void 0),[d,h]=xe.useState(void 0),[g,y]=xe.useState(null),[v,C]=xe.useState(""),[b,D]=xe.useState(!0),[U,x]=xe.useState(null),[R,M]=xe.useState(!1),[G,Z]=xe.useState({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""});xe.useEffect(()=>{Y()},[]);const Y=async()=>{D(!0),x(null);try{const $=await tM();o($)}catch($){console.error("Firebase Error:",$);let ne="Veritabanna balanlamad.";$.message&&$.message.includes("services/firebaseConfig.ts")?ne=$.message:$.code==="permission-denied"?ne="Yetki Hatas: Firestore veritaban kurallar okuma/yazmay engelliyor. (Test modunu an: allow read, write: if true;)":$.code==="unavailable"?ne="Sunucuya ulalamyor. nternet balantnz kontrol edin.":$.message&&$.message.includes("project")?ne="Proje Bulunamad: Firebase Console'da 'Firestore Database' oluturduunuzdan emin olun. Sadece proje amak yetmez, veritabann da 'Create Database' diyerek oluturmalsnz.":ne=`Veritaban Hatas (${$.code||"Bilinmeyen"}): ${$.message}`,x(ne)}finally{D(!1)}},k=()=>{i("CREATE"),u(void 0),e("FORM")},P=$=>{u($),e("VIEW")},N=$=>{i("EDIT"),u($),e("FORM")},F=$=>{u($),Z({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""}),M(!0)},O=$=>{if($.preventDefault(),M(!1),a){const ne={...a,ukomeDecisionNo:G.decisionNo,ukomeDate:G.date,ukomeSummary:G.summary};i("REVISION"),u(ne),e("FORM")}},z=async $=>{if(confirm("Bu dura silmek istediinize emin misiniz?"))try{await nM($),await Y(),t==="VIEW"&&e("LIST")}catch{alert("Silme ilemi baarsz oldu.")}},V=async $=>{try{const ne=r.find(J=>J.id===$.id);if(ne){let J=ne.history;if(n==="REVISION"){const te=iM(ne,$);J=[...ne.history,...te]}const de={...$,history:J};await rv(de)}else await rv($);await Y(),e("LIST")}catch(ne){console.error(ne),alert("Kayt ilemi baarsz oldu. Hata detaylar konsolda.")}},we=($,ne=null)=>{h($),y(ne)},ot=r.filter($=>{var ne,J;return $.name.toLowerCase().includes(v.toLowerCase())||$.district.toLowerCase().includes(v.toLowerCase())||((ne=$.neighborhood)==null?void 0:ne.toLowerCase().includes(v.toLowerCase()))||((J=$.ukomeDecisionNo)==null?void 0:J.toLowerCase().includes(v.toLowerCase()))});return S.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[S.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>e("LIST"),children:[S.jsx("div",{className:"bg-yellow-400 p-2 rounded-lg text-slate-900",children:S.jsx(ov,{size:24})}),S.jsx("h1",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"TaksiYnetim"})]}),S.jsx("div",{className:"text-sm text-slate-500 hidden sm:block",children:"Durak Kayt Sistemi v1.1"})]})}),S.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[U&&S.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-start gap-3 shadow-sm animate-in fade-in slide-in-from-top-2",children:[S.jsx(sM,{className:"shrink-0 mt-0.5",size:20}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"font-bold",children:"Balant Hatas"}),S.jsx("p",{className:"text-sm mt-1",children:U})]})]}),(t==="LIST"||t==="MAP")&&S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[S.jsxs("div",{className:"relative w-full sm:w-96",children:[S.jsx(_M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),S.jsx("input",{type:"text",placeholder:"Durak ara (sim, le, UKOME No)...",value:v,onChange:$=>C($.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),S.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[S.jsxs("div",{className:"bg-white border border-slate-300 rounded-lg p-1 flex",children:[S.jsxs("button",{onClick:()=>e("LIST"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${t==="LIST"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[S.jsx(fM,{size:18}),"Liste"]}),S.jsxs("button",{onClick:()=>e("MAP"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${t==="MAP"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[S.jsx(pM,{size:18}),"Harita"]})]}),S.jsxs("button",{onClick:k,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm font-medium",children:[S.jsx(qS,{size:20}),"Yeni Durak Ekle"]})]})]}),S.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[500px]",children:b?S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[S.jsx(cd,{size:32,className:"animate-spin mb-2 text-blue-600"}),S.jsx("p",{children:"Veriler Ykleniyor..."})]}):S.jsx(S.Fragment,{children:t==="LIST"?S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-left border-collapse",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[S.jsx("th",{className:"p-4",children:"Durak Ad"}),S.jsx("th",{className:"p-4",children:"le / Mahalle"}),S.jsx("th",{className:"p-4",children:"DURAKTA ALIAN ARA SAYISI"}),S.jsx("th",{className:"p-4",children:"Son UKOME Karar"}),S.jsx("th",{className:"p-4",children:"Durum"}),S.jsx("th",{className:"p-4 text-right",children:"lemler"})]})}),S.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:ot.length>0?ot.map($=>{var ne;return S.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[S.jsx("td",{className:"p-4 font-medium text-slate-900",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600",children:S.jsx(ov,{size:16})}),$.name]})}),S.jsxs("td",{className:"p-4",children:[S.jsx("div",{className:"font-medium text-slate-700",children:$.district}),$.neighborhood&&S.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[$.neighborhood," Mah."]})]}),S.jsx("td",{className:"p-4",children:S.jsxs("div",{className:"flex flex-col gap-1",children:[S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("span",{className:"text-lg font-bold text-slate-700",children:((ne=$.plates)==null?void 0:ne.length)||0}),S.jsx("span",{className:"text-xs text-slate-500",children:"Ara"})]}),S.jsxs("span",{className:"text-xs text-slate-400",children:["(Kapasite: ",$.capacity,")"]})]})}),S.jsx("td",{className:"p-4 text-slate-600",children:$.ukomeDecisionNo?S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{className:"font-medium text-slate-700",children:$.ukomeDecisionNo}),S.jsx("span",{className:"text-xs text-slate-400",children:new Date($.ukomeDate).toLocaleDateString("tr-TR")})]}):"-"}),S.jsx("td",{className:"p-4",children:S.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${$.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":$.status==="Pasif"?"bg-red-50 text-red-700 border-red-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:$.status})}),S.jsx("td",{className:"p-4 text-right",children:S.jsxs("div",{className:"flex items-center justify-end gap-2",children:[S.jsx("button",{onClick:()=>P($),className:"p-2 bg-white border border-slate-200 text-slate-600 hover:text-blue-600 hover:border-blue-200 rounded-lg transition-all shadow-sm",title:"Detayl Grntle",children:S.jsx(dM,{size:18})}),S.jsx("button",{onClick:()=>N($),className:"p-2 bg-orange-50 border border-orange-100 text-orange-600 hover:bg-orange-100 hover:border-orange-200 rounded-lg transition-all shadow-sm",title:"Dzenle (Hatal Giri Dzeltme)",children:S.jsx(mM,{size:18})}),S.jsxs("button",{onClick:()=>F($),className:"px-3 py-2 bg-blue-50 border border-blue-100 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-medium flex items-center gap-1 transition-all",title:"UKOME Karar ile Revize Et",children:[S.jsx(vo,{size:16}),"Revize"]}),S.jsx("button",{onClick:()=>z($.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg ml-1",title:"Sil",children:S.jsx(TM,{size:18})})]})})]},$.id)}):S.jsx("tr",{children:S.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:U?S.jsxs("div",{className:"flex flex-col items-center gap-2",children:[S.jsx("span",{className:"font-semibold text-red-500",children:"Balant Sorunu"}),S.jsx("span",{className:"text-xs",children:"Yukardaki hata mesajn kontrol edin."})]}):"Kayt bulunamad."})})})]})}):S.jsx("div",{className:"h-[600px] w-full",children:S.jsx($U,{stands:ot})})})})]}),t==="VIEW"&&a&&S.jsx(GU,{stand:a,onBack:()=>e("LIST"),onRevise:F,onViewHistory:$=>we(a,$)}),t==="FORM"&&S.jsx(zU,{initialData:a,onSave:V,onCancel:()=>e("LIST")})]}),d&&S.jsx(qU,{stand:d,initialUkomeNo:g,onClose:()=>{h(void 0),y(null)}}),R&&S.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4",children:[S.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>M(!1)}),S.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md relative z-10 p-6 animate-in fade-in zoom-in duration-200",children:[S.jsxs("div",{className:"mb-5",children:[S.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[S.jsx(vo,{className:"text-blue-600"}),"UKOME Revizyon Karar"]}),S.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Dura revize etmeden nce ilgili UKOME karar numarasn giriniz."})]}),S.jsxs("form",{onSubmit:O,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Numaras"}),S.jsx("input",{required:!0,type:"text",placeholder:"rn: 2025/12-05",value:G.decisionNo,onChange:$=>Z({...G,decisionNo:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Tarihi"}),S.jsx("input",{required:!0,type:"date",value:G.date,onChange:$=>Z({...G,date:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar zeti (Opsiyonel)"}),S.jsx("textarea",{rows:2,placeholder:"Deiiklik sebebi...",value:G.summary,onChange:$=>Z({...G,summary:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),S.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[S.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg",children:"ptal"}),S.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Devam Et & Revize Et"})]})]})]})]})]})},FC=document.getElementById("root");if(!FC)throw new Error("Could not find root element to mount to");const KU=Qh.createRoot(FC);KU.render(S.jsx(NI.StrictMode,{children:S.jsx(WU,{})}));
