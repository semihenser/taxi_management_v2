(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W0={exports:{}},Ed={},K0={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),wC=Symbol.for("react.portal"),xC=Symbol.for("react.fragment"),SC=Symbol.for("react.strict_mode"),CC=Symbol.for("react.profiler"),IC=Symbol.for("react.provider"),AC=Symbol.for("react.context"),PC=Symbol.for("react.forward_ref"),RC=Symbol.for("react.suspense"),NC=Symbol.for("react.memo"),kC=Symbol.for("react.lazy"),$g=Symbol.iterator;function MC(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var J0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z0=Object.assign,Y0={};function Ys(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||J0}Ys.prototype.isReactComponent={};Ys.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ys.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Q0(){}Q0.prototype=Ys.prototype;function Bp(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||J0}var zp=Bp.prototype=new Q0;zp.constructor=Bp;Z0(zp,Ys.prototype);zp.isPureReactComponent=!0;var Wg=Array.isArray,X0=Object.prototype.hasOwnProperty,Gp={current:null},j0={key:!0,ref:!0,__self:!0,__source:!0};function eT(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)X0.call(e,i)&&!j0.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Hl,type:t,key:o,ref:a,props:r,_owner:Gp.current}}function LC(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function DC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kg=/\/+/g;function yh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DC(""+t.key):e.toString(36)}function lc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Hl:case wC:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+yh(a,0):i,Wg(r)?(n="",t!=null&&(n=t.replace(Kg,"$&/")+"/"),lc(r,e,n,"",function(h){return h})):r!=null&&(Hp(r)&&(r=LC(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Kg,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Wg(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+yh(o,u);a+=lc(o,e,n,d,r)}else if(d=MC(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+yh(o,u++),a+=lc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Du(t,e,n){if(t==null)return t;var i=[],r=0;return lc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function bC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},uc={transition:null},VC={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:uc,ReactCurrentOwner:Gp};function tT(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Du,forEach:function(t,e,n){Du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Du(t,function(){e++}),e},toArray:function(t){return Du(t,function(e){return e})||[]},only:function(t){if(!Hp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Ys;Ie.Fragment=xC;Ie.Profiler=CC;Ie.PureComponent=Bp;Ie.StrictMode=SC;Ie.Suspense=RC;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VC;Ie.act=tT;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Z0({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Gp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)X0.call(e,d)&&!j0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:Hl,type:t.type,key:r,ref:o,props:i,_owner:a}};Ie.createContext=function(t){return t={$$typeof:AC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IC,_context:t},t.Consumer=t};Ie.createElement=eT;Ie.createFactory=function(t){var e=eT.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:PC,render:t}};Ie.isValidElement=Hp;Ie.lazy=function(t){return{$$typeof:kC,_payload:{_status:-1,_result:t},_init:bC}};Ie.memo=function(t,e){return{$$typeof:NC,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=uc.transition;uc.transition={};try{t()}finally{uc.transition=e}};Ie.unstable_act=tT;Ie.useCallback=function(t,e){return Yt.current.useCallback(t,e)};Ie.useContext=function(t){return Yt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Yt.current.useEffect(t,e)};Ie.useId=function(){return Yt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Yt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Yt.current.useRef(t)};Ie.useState=function(t){return Yt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Yt.current.useTransition()};Ie.version="18.3.1";K0.exports=Ie;var me=K0.exports;const FC=$0(me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=me,OC=Symbol.for("react.element"),BC=Symbol.for("react.fragment"),zC=Object.prototype.hasOwnProperty,GC=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HC={key:!0,ref:!0,__self:!0,__source:!0};function nT(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)zC.call(e,i)&&!HC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:OC,type:t,key:o,ref:a,props:r,_owner:GC.current}}Ed.Fragment=BC;Ed.jsx=nT;Ed.jsxs=nT;W0.exports=Ed;var w=W0.exports,nf={},iT={exports:{}},_n={},rT={exports:{}},oT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ie){var q=H.length;H.push(ie);e:for(;0<q;){var ee=q-1>>>1,he=H[ee];if(0<r(he,ie))H[ee]=ie,H[q]=he,q=ee;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ie=H[0],q=H.pop();if(q!==ie){H[0]=q;e:for(var ee=0,he=H.length,$e=he>>>1;ee<$e;){var Ae=2*(ee+1)-1,we=H[Ae],fe=Ae+1,je=H[fe];if(0>r(we,q))fe<he&&0>r(je,we)?(H[ee]=je,H[fe]=q,ee=fe):(H[ee]=we,H[Ae]=q,ee=Ae);else if(fe<he&&0>r(je,q))H[ee]=je,H[fe]=q,ee=fe;else break e}}return ie}function r(H,ie){var q=H.sortIndex-ie.sortIndex;return q!==0?q:H.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],h=[],g=1,y=null,v=3,S=!1,b=!1,M=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var ie=n(h);ie!==null;){if(ie.callback===null)i(h);else if(ie.startTime<=H)i(h),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=n(h)}}function z(H){if(M=!1,I(H),!b)if(n(d)!==null)b=!0,qe(K);else{var ie=n(h);ie!==null&&He(z,ie.startTime-H)}}function K(H,ie){b=!1,M&&(M=!1,N(A),A=-1),S=!0;var q=v;try{for(I(ie),y=n(d);y!==null&&(!(y.expirationTime>ie)||H&&!U());){var ee=y.callback;if(typeof ee=="function"){y.callback=null,v=y.priorityLevel;var he=ee(y.expirationTime<=ie);ie=t.unstable_now(),typeof he=="function"?y.callback=he:y===n(d)&&i(d),I(ie)}else i(d);y=n(d)}if(y!==null)var $e=!0;else{var Ae=n(h);Ae!==null&&He(z,Ae.startTime-ie),$e=!1}return $e}finally{y=null,v=q,S=!1}}var Y=!1,D=null,A=-1,k=5,V=-1;function U(){return!(t.unstable_now()-V<k)}function G(){if(D!==null){var H=t.unstable_now();V=H;var ie=!0;try{ie=D(!0,H)}finally{ie?F():(Y=!1,D=null)}}else Y=!1}var F;if(typeof R=="function")F=function(){R(G)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,pt=xe.port2;xe.port1.onmessage=G,F=function(){pt.postMessage(null)}}else F=function(){O(G,0)};function qe(H){D=H,Y||(Y=!0,F())}function He(H,ie){A=O(function(){H(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){b||S||(b=!0,qe(K))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var q=v;v=ie;try{return H()}finally{v=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ie){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=v;v=H;try{return ie()}finally{v=q}},t.unstable_scheduleCallback=function(H,ie,q){var ee=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ee+q:ee):q=ee,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=q+he,H={id:g++,callback:ie,priorityLevel:H,startTime:q,expirationTime:he,sortIndex:-1},q>ee?(H.sortIndex=q,e(h,H),n(d)===null&&H===n(h)&&(M?(N(A),A=-1):M=!0,He(z,q-ee))):(H.sortIndex=he,e(d,H),b||S||(b=!0,qe(K))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var ie=v;return function(){var q=v;v=ie;try{return H.apply(this,arguments)}finally{v=q}}}})(oT);rT.exports=oT;var qC=rT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=me,gn=qC;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sT=new Set,ml={};function To(t,e){Vs(t,e),Vs(t+"Capture",e)}function Vs(t,e){for(ml[t]=e,t=0;t<e.length;t++)sT.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rf=Object.prototype.hasOwnProperty,WC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jg={},Zg={};function KC(t){return rf.call(Zg,t)?!0:rf.call(Jg,t)?!1:WC.test(t)?Zg[t]=!0:(Jg[t]=!0,!1)}function JC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZC(t,e,n,i){if(e===null||typeof e>"u"||JC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var qp=/[\-:]([a-z])/g;function $p(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qp,$p);Mt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qp,$p);Mt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qp,$p);Mt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wp(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZC(e,n,r,i)&&(n=null),i||r===null?KC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $i=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),ls=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),aT=Symbol.for("react.provider"),lT=Symbol.for("react.context"),Jp=Symbol.for("react.forward_ref"),sf=Symbol.for("react.suspense"),af=Symbol.for("react.suspense_list"),Zp=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),uT=Symbol.for("react.offscreen"),Yg=Symbol.iterator;function Va(t){return t===null||typeof t!="object"?null:(t=Yg&&t[Yg]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,vh;function Ka(t){if(vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vh=e&&e[1]||""}return`
`+vh+t}var Th=!1;function Eh(t,e){if(!t||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ka(t):""}function YC(t){switch(t.tag){case 5:return Ka(t.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 2:case 15:return t=Eh(t.type,!1),t;case 11:return t=Eh(t.type.render,!1),t;case 1:return t=Eh(t.type,!0),t;default:return""}}function lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case us:return"Fragment";case ls:return"Portal";case of:return"Profiler";case Kp:return"StrictMode";case sf:return"Suspense";case af:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lT:return(t.displayName||"Context")+".Consumer";case aT:return(t._context.displayName||"Context")+".Provider";case Jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zp:return e=t.displayName||null,e!==null?e:lf(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return lf(t(e))}catch{}}return null}function QC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lf(e);case 8:return e===Kp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XC(t){var e=cT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vu(t){t._valueTracker||(t._valueTracker=XC(t))}function dT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=cT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Pc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uf(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hT(t,e){e=e.checked,e!=null&&Wp(t,"checked",e,!1)}function cf(t,e){hT(t,e);var n=Ar(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?df(t,e.type,n):e.hasOwnProperty("defaultValue")&&df(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function df(t,e,n){(e!=="number"||Pc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ja=Array.isArray;function ws(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function hf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Ja(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function fT(t,e){var n=Ar(e.value),i=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function e_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ff(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fu,mT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fu=Fu||document.createElement("div"),Fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jC=["Webkit","ms","Moz","O"];Object.keys(tl).forEach(function(t){jC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tl[e]=tl[t]})});function gT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tl.hasOwnProperty(t)&&tl[t]?(""+e).trim():e+"px"}function _T(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=gT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var eI=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pf(t,e){if(e){if(eI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function mf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gf=null;function Yp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _f=null,xs=null,Ss=null;function t_(t){if(t=Wl(t)){if(typeof _f!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Id(e),_f(t.stateNode,t.type,e))}}function yT(t){xs?Ss?Ss.push(t):Ss=[t]:xs=t}function vT(){if(xs){var t=xs,e=Ss;if(Ss=xs=null,t_(t),e)for(t=0;t<e.length;t++)t_(e[t])}}function TT(t,e){return t(e)}function ET(){}var wh=!1;function wT(t,e,n){if(wh)return t(e,n);wh=!0;try{return TT(t,e,n)}finally{wh=!1,(xs!==null||Ss!==null)&&(ET(),vT())}}function _l(t,e){var n=t.stateNode;if(n===null)return null;var i=Id(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var yf=!1;if(Fi)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){yf=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{yf=!1}function tI(t,e,n,i,r,o,a,u,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(g){this.onError(g)}}var nl=!1,Rc=null,Nc=!1,vf=null,nI={onError:function(t){nl=!0,Rc=t}};function iI(t,e,n,i,r,o,a,u,d){nl=!1,Rc=null,tI.apply(nI,arguments)}function rI(t,e,n,i,r,o,a,u,d){if(iI.apply(this,arguments),nl){if(nl){var h=Rc;nl=!1,Rc=null}else throw Error(te(198));Nc||(Nc=!0,vf=h)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function n_(t){if(Eo(t)!==t)throw Error(te(188))}function oI(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return n_(r),t;if(o===i)return n_(r),e;o=o.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function ST(t){return t=oI(t),t!==null?CT(t):null}function CT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CT(t);if(e!==null)return e;t=t.sibling}return null}var IT=gn.unstable_scheduleCallback,i_=gn.unstable_cancelCallback,sI=gn.unstable_shouldYield,aI=gn.unstable_requestPaint,lt=gn.unstable_now,lI=gn.unstable_getCurrentPriorityLevel,Qp=gn.unstable_ImmediatePriority,AT=gn.unstable_UserBlockingPriority,kc=gn.unstable_NormalPriority,uI=gn.unstable_LowPriority,PT=gn.unstable_IdlePriority,wd=null,hi=null;function cI(t){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(wd,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:fI,dI=Math.log,hI=Math.LN2;function fI(t){return t>>>=0,t===0?32:31-(dI(t)/hI|0)|0}var Uu=64,Ou=4194304;function Za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Za(u):(o&=a,o!==0&&(i=Za(o)))}else a=n&~r,a!==0?i=Za(a):o!==0&&(i=Za(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Wn(e),r=1<<n,i|=t[n],e&=~r;return i}function pI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Wn(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=pI(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function Tf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RT(){var t=Uu;return Uu<<=1,!(Uu&4194240)&&(Uu=64),t}function xh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function gI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Wn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Xp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Wn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ge=0;function NT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kT,jp,MT,LT,DT,Ef=!1,Bu=[],pr=null,mr=null,gr=null,yl=new Map,vl=new Map,lr=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r_(t,e){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":yl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(e.pointerId)}}function Ua(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Wl(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function yI(t,e,n,i,r){switch(e){case"focusin":return pr=Ua(pr,t,e,n,i,r),!0;case"dragenter":return mr=Ua(mr,t,e,n,i,r),!0;case"mouseover":return gr=Ua(gr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return yl.set(o,Ua(yl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,vl.set(o,Ua(vl.get(o)||null,t,e,n,i,r)),!0}return!1}function bT(t){var e=oo(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=xT(n),e!==null){t.blockedOn=e,DT(t.priority,function(){MT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);gf=i,n.target.dispatchEvent(i),gf=null}else return e=Wl(n),e!==null&&jp(e),t.blockedOn=n,!1;e.shift()}return!0}function o_(t,e,n){cc(t)&&n.delete(e)}function vI(){Ef=!1,pr!==null&&cc(pr)&&(pr=null),mr!==null&&cc(mr)&&(mr=null),gr!==null&&cc(gr)&&(gr=null),yl.forEach(o_),vl.forEach(o_)}function Oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Ef||(Ef=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,vI)))}function Tl(t){function e(r){return Oa(r,t)}if(0<Bu.length){Oa(Bu[0],t);for(var n=1;n<Bu.length;n++){var i=Bu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(pr!==null&&Oa(pr,t),mr!==null&&Oa(mr,t),gr!==null&&Oa(gr,t),yl.forEach(e),vl.forEach(e),n=0;n<lr.length;n++)i=lr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)bT(n),n.blockedOn===null&&lr.shift()}var Cs=$i.ReactCurrentBatchConfig,Lc=!0;function TI(t,e,n,i){var r=Ge,o=Cs.transition;Cs.transition=null;try{Ge=1,em(t,e,n,i)}finally{Ge=r,Cs.transition=o}}function EI(t,e,n,i){var r=Ge,o=Cs.transition;Cs.transition=null;try{Ge=4,em(t,e,n,i)}finally{Ge=r,Cs.transition=o}}function em(t,e,n,i){if(Lc){var r=wf(t,e,n,i);if(r===null)Lh(t,e,i,Dc,n),r_(t,i);else if(yI(r,t,e,n,i))i.stopPropagation();else if(r_(t,i),e&4&&-1<_I.indexOf(t)){for(;r!==null;){var o=Wl(r);if(o!==null&&kT(o),o=wf(t,e,n,i),o===null&&Lh(t,e,i,Dc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Lh(t,e,i,null,n)}}var Dc=null;function wf(t,e,n,i){if(Dc=null,t=Yp(i),t=oo(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dc=t,null}function VT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lI()){case Qp:return 1;case AT:return 4;case kc:case uI:return 16;case PT:return 536870912;default:return 16}default:return 16}}var cr=null,tm=null,dc=null;function FT(){if(dc)return dc;var t,e=tm,n=e.length,i,r="value"in cr?cr.value:cr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return dc=r.slice(t,1<i?1-i:void 0)}function hc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zu(){return!0}function s_(){return!1}function yn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zu:s_,this.isPropagationStopped=s_,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),e}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nm=yn(Qs),$l=nt({},Qs,{view:0,detail:0}),wI=yn($l),Sh,Ch,Ba,xd=nt({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ba&&(Ba&&t.type==="mousemove"?(Sh=t.screenX-Ba.screenX,Ch=t.screenY-Ba.screenY):Ch=Sh=0,Ba=t),Sh)},movementY:function(t){return"movementY"in t?t.movementY:Ch}}),a_=yn(xd),xI=nt({},xd,{dataTransfer:0}),SI=yn(xI),CI=nt({},$l,{relatedTarget:0}),Ih=yn(CI),II=nt({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=yn(II),PI=nt({},Qs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RI=yn(PI),NI=nt({},Qs,{data:0}),l_=yn(NI),kI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LI[t])?!!e[t]:!1}function im(){return DI}var bI=nt({},$l,{key:function(t){if(t.key){var e=kI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(t){return t.type==="keypress"?hc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VI=yn(bI),FI=nt({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u_=yn(FI),UI=nt({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),OI=yn(UI),BI=nt({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),zI=yn(BI),GI=nt({},xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HI=yn(GI),qI=[9,13,27,32],rm=Fi&&"CompositionEvent"in window,il=null;Fi&&"documentMode"in document&&(il=document.documentMode);var $I=Fi&&"TextEvent"in window&&!il,UT=Fi&&(!rm||il&&8<il&&11>=il),c_=" ",d_=!1;function OT(t,e){switch(t){case"keyup":return qI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function WI(t,e){switch(t){case"compositionend":return BT(e);case"keypress":return e.which!==32?null:(d_=!0,c_);case"textInput":return t=e.data,t===c_&&d_?null:t;default:return null}}function KI(t,e){if(cs)return t==="compositionend"||!rm&&OT(t,e)?(t=FT(),dc=tm=cr=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UT&&e.locale!=="ko"?null:e.data;default:return null}}var JI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JI[t.type]:e==="textarea"}function zT(t,e,n,i){yT(i),e=bc(e,"onChange"),0<e.length&&(n=new nm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var rl=null,El=null;function ZI(t){XT(t,0)}function Sd(t){var e=fs(t);if(dT(e))return t}function YI(t,e){if(t==="change")return e}var GT=!1;if(Fi){var Ah;if(Fi){var Ph="oninput"in document;if(!Ph){var f_=document.createElement("div");f_.setAttribute("oninput","return;"),Ph=typeof f_.oninput=="function"}Ah=Ph}else Ah=!1;GT=Ah&&(!document.documentMode||9<document.documentMode)}function p_(){rl&&(rl.detachEvent("onpropertychange",HT),El=rl=null)}function HT(t){if(t.propertyName==="value"&&Sd(El)){var e=[];zT(e,El,t,Yp(t)),wT(ZI,e)}}function QI(t,e,n){t==="focusin"?(p_(),rl=e,El=n,rl.attachEvent("onpropertychange",HT)):t==="focusout"&&p_()}function XI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sd(El)}function jI(t,e){if(t==="click")return Sd(e)}function eA(t,e){if(t==="input"||t==="change")return Sd(e)}function tA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:tA;function wl(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!rf.call(e,r)||!Qn(t[r],e[r]))return!1}return!0}function m_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g_(t,e){var n=m_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=m_(n)}}function qT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $T(){for(var t=window,e=Pc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pc(t.document)}return e}function om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nA(t){var e=$T(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qT(n.ownerDocument.documentElement,n)){if(i!==null&&om(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=g_(n,o);var a=g_(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iA=Fi&&"documentMode"in document&&11>=document.documentMode,ds=null,xf=null,ol=null,Sf=!1;function __(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sf||ds==null||ds!==Pc(i)||(i=ds,"selectionStart"in i&&om(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ol&&wl(ol,i)||(ol=i,i=bc(xf,"onSelect"),0<i.length&&(e=new nm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ds)))}function Gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hs={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},Rh={},WT={};Fi&&(WT=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Cd(t){if(Rh[t])return Rh[t];if(!hs[t])return t;var e=hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WT)return Rh[t]=e[n];return t}var KT=Cd("animationend"),JT=Cd("animationiteration"),ZT=Cd("animationstart"),YT=Cd("transitionend"),QT=new Map,y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(t,e){QT.set(t,e),To(e,[t])}for(var Nh=0;Nh<y_.length;Nh++){var kh=y_[Nh],rA=kh.toLowerCase(),oA=kh[0].toUpperCase()+kh.slice(1);br(rA,"on"+oA)}br(KT,"onAnimationEnd");br(JT,"onAnimationIteration");br(ZT,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(YT,"onTransitionEnd");Vs("onMouseEnter",["mouseout","mouseover"]);Vs("onMouseLeave",["mouseout","mouseover"]);Vs("onPointerEnter",["pointerout","pointerover"]);Vs("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function v_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,rI(i,e,void 0,t),t.currentTarget=null}function XT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;v_(r,u,h),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,h=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;v_(r,u,h),o=d}}}if(Nc)throw t=vf,Nc=!1,vf=null,t}function Je(t,e){var n=e[Rf];n===void 0&&(n=e[Rf]=new Set);var i=t+"__bubble";n.has(i)||(jT(e,t,2,!1),n.add(i))}function Mh(t,e,n){var i=0;e&&(i|=4),jT(n,t,i,e)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function xl(t){if(!t[Hu]){t[Hu]=!0,sT.forEach(function(n){n!=="selectionchange"&&(sA.has(n)||Mh(n,!1,t),Mh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hu]||(e[Hu]=!0,Mh("selectionchange",!1,e))}}function jT(t,e,n,i){switch(VT(e)){case 1:var r=TI;break;case 4:r=EI;break;default:r=em}n=r.bind(null,e,n,t),r=void 0,!yf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Lh(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=oo(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}wT(function(){var h=o,g=Yp(n),y=[];e:{var v=QT.get(t);if(v!==void 0){var S=nm,b=t;switch(t){case"keypress":if(hc(n)===0)break e;case"keydown":case"keyup":S=VI;break;case"focusin":b="focus",S=Ih;break;case"focusout":b="blur",S=Ih;break;case"beforeblur":case"afterblur":S=Ih;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=SI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=OI;break;case KT:case JT:case ZT:S=AI;break;case YT:S=zI;break;case"scroll":S=wI;break;case"wheel":S=HI;break;case"copy":case"cut":case"paste":S=RI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=u_}var M=(e&4)!==0,O=!M&&t==="scroll",N=M?v!==null?v+"Capture":null:v;M=[];for(var R=h,I;R!==null;){I=R;var z=I.stateNode;if(I.tag===5&&z!==null&&(I=z,N!==null&&(z=_l(R,N),z!=null&&M.push(Sl(R,z,I)))),O)break;R=R.return}0<M.length&&(v=new S(v,b,null,n,g),y.push({event:v,listeners:M}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==gf&&(b=n.relatedTarget||n.fromElement)&&(oo(b)||b[Ui]))break e;if((S||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,S?(b=n.relatedTarget||n.toElement,S=h,b=b?oo(b):null,b!==null&&(O=Eo(b),b!==O||b.tag!==5&&b.tag!==6)&&(b=null)):(S=null,b=h),S!==b)){if(M=a_,z="onMouseLeave",N="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(M=u_,z="onPointerLeave",N="onPointerEnter",R="pointer"),O=S==null?v:fs(S),I=b==null?v:fs(b),v=new M(z,R+"leave",S,n,g),v.target=O,v.relatedTarget=I,z=null,oo(g)===h&&(M=new M(N,R+"enter",b,n,g),M.target=I,M.relatedTarget=O,z=M),O=z,S&&b)t:{for(M=S,N=b,R=0,I=M;I;I=ts(I))R++;for(I=0,z=N;z;z=ts(z))I++;for(;0<R-I;)M=ts(M),R--;for(;0<I-R;)N=ts(N),I--;for(;R--;){if(M===N||N!==null&&M===N.alternate)break t;M=ts(M),N=ts(N)}M=null}else M=null;S!==null&&T_(y,v,S,M,!1),b!==null&&O!==null&&T_(y,O,b,M,!0)}}e:{if(v=h?fs(h):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var K=YI;else if(h_(v))if(GT)K=eA;else{K=XI;var Y=QI}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(K=jI);if(K&&(K=K(t,h))){zT(y,K,n,g);break e}Y&&Y(t,v,h),t==="focusout"&&(Y=v._wrapperState)&&Y.controlled&&v.type==="number"&&df(v,"number",v.value)}switch(Y=h?fs(h):window,t){case"focusin":(h_(Y)||Y.contentEditable==="true")&&(ds=Y,xf=h,ol=null);break;case"focusout":ol=xf=ds=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,__(y,n,g);break;case"selectionchange":if(iA)break;case"keydown":case"keyup":__(y,n,g)}var D;if(rm)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else cs?OT(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(UT&&n.locale!=="ko"&&(cs||A!=="onCompositionStart"?A==="onCompositionEnd"&&cs&&(D=FT()):(cr=g,tm="value"in cr?cr.value:cr.textContent,cs=!0)),Y=bc(h,A),0<Y.length&&(A=new l_(A,t,null,n,g),y.push({event:A,listeners:Y}),D?A.data=D:(D=BT(n),D!==null&&(A.data=D)))),(D=$I?WI(t,n):KI(t,n))&&(h=bc(h,"onBeforeInput"),0<h.length&&(g=new l_("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:h}),g.data=D))}XT(y,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=_l(t,n),o!=null&&i.unshift(Sl(t,o,r)),o=_l(t,e),o!=null&&i.push(Sl(t,o,r))),t=t.return}return i}function ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function T_(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,h=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&h!==null&&(u=h,r?(d=_l(n,o),d!=null&&a.unshift(Sl(n,d,u))):r||(d=_l(n,o),d!=null&&a.push(Sl(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var aA=/\r\n?/g,lA=/\u0000|\uFFFD/g;function E_(t){return(typeof t=="string"?t:""+t).replace(aA,`
`).replace(lA,"")}function qu(t,e,n){if(e=E_(e),E_(t)!==e&&n)throw Error(te(425))}function Vc(){}var Cf=null,If=null;function Af(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pf=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(dA)}:Pf;function dA(t){setTimeout(function(){throw t})}function Dh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Tl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Tl(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),di="__reactFiber$"+Xs,Cl="__reactProps$"+Xs,Ui="__reactContainer$"+Xs,Rf="__reactEvents$"+Xs,hA="__reactListeners$"+Xs,fA="__reactHandles$"+Xs;function oo(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ui]||n[di]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x_(t);t!==null;){if(n=t[di])return n;t=x_(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[di]||t[Ui],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Id(t){return t[Cl]||null}var Nf=[],ps=-1;function Vr(t){return{current:t}}function Qe(t){0>ps||(t.current=Nf[ps],Nf[ps]=null,ps--)}function Ke(t,e){ps++,Nf[ps]=t.current,t.current=e}var Pr={},Gt=Vr(Pr),ln=Vr(!1),ho=Pr;function Fs(t,e){var n=t.type.contextTypes;if(!n)return Pr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function un(t){return t=t.childContextTypes,t!=null}function Fc(){Qe(ln),Qe(Gt)}function S_(t,e,n){if(Gt.current!==Pr)throw Error(te(168));Ke(Gt,e),Ke(ln,n)}function eE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(te(108,QC(t)||"Unknown",r));return nt({},n,i)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,ho=Gt.current,Ke(Gt,t),Ke(ln,ln.current),!0}function C_(t,e,n){var i=t.stateNode;if(!i)throw Error(te(169));n?(t=eE(t,e,ho),i.__reactInternalMemoizedMergedChildContext=t,Qe(ln),Qe(Gt),Ke(Gt,t)):Qe(ln),Ke(ln,n)}var Li=null,Ad=!1,bh=!1;function tE(t){Li===null?Li=[t]:Li.push(t)}function pA(t){Ad=!0,tE(t)}function Fr(){if(!bh&&Li!==null){bh=!0;var t=0,e=Ge;try{var n=Li;for(Ge=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Li=null,Ad=!1}catch(r){throw Li!==null&&(Li=Li.slice(t+1)),IT(Qp,Fr),r}finally{Ge=e,bh=!1}}return null}var ms=[],gs=0,Oc=null,Bc=0,In=[],An=0,fo=null,Di=1,bi="";function to(t,e){ms[gs++]=Bc,ms[gs++]=Oc,Oc=t,Bc=e}function nE(t,e,n){In[An++]=Di,In[An++]=bi,In[An++]=fo,fo=t;var i=Di;t=bi;var r=32-Wn(i)-1;i&=~(1<<r),n+=1;var o=32-Wn(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Di=1<<32-Wn(e)+r|n<<r|i,bi=o+t}else Di=1<<o|n<<r|i,bi=t}function sm(t){t.return!==null&&(to(t,1),nE(t,1,0))}function am(t){for(;t===Oc;)Oc=ms[--gs],ms[gs]=null,Bc=ms[--gs],ms[gs]=null;for(;t===fo;)fo=In[--An],In[An]=null,bi=In[--An],In[An]=null,Di=In[--An],In[An]=null}var mn=null,pn=null,Xe=!1,qn=null;function iE(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function I_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,pn=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fo!==null?{id:Di,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,pn=null,!0):!1;default:return!1}}function kf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mf(t){if(Xe){var e=pn;if(e){var n=e;if(!I_(t,e)){if(kf(t))throw Error(te(418));e=_r(n.nextSibling);var i=mn;e&&I_(t,e)?iE(i,n):(t.flags=t.flags&-4097|2,Xe=!1,mn=t)}}else{if(kf(t))throw Error(te(418));t.flags=t.flags&-4097|2,Xe=!1,mn=t}}}function A_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function $u(t){if(t!==mn)return!1;if(!Xe)return A_(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Af(t.type,t.memoizedProps)),e&&(e=pn)){if(kf(t))throw rE(),Error(te(418));for(;e;)iE(t,e),e=_r(e.nextSibling)}if(A_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=mn?_r(t.stateNode.nextSibling):null;return!0}function rE(){for(var t=pn;t;)t=_r(t.nextSibling)}function Us(){pn=mn=null,Xe=!1}function lm(t){qn===null?qn=[t]:qn.push(t)}var mA=$i.ReactCurrentBatchConfig;function za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var i=n.stateNode}if(!i)throw Error(te(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function P_(t){var e=t._init;return e(t._payload)}function oE(t){function e(N,R){if(t){var I=N.deletions;I===null?(N.deletions=[R],N.flags|=16):I.push(R)}}function n(N,R){if(!t)return null;for(;R!==null;)e(N,R),R=R.sibling;return null}function i(N,R){for(N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function r(N,R){return N=Er(N,R),N.index=0,N.sibling=null,N}function o(N,R,I){return N.index=I,t?(I=N.alternate,I!==null?(I=I.index,I<R?(N.flags|=2,R):I):(N.flags|=2,R)):(N.flags|=1048576,R)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function u(N,R,I,z){return R===null||R.tag!==6?(R=Gh(I,N.mode,z),R.return=N,R):(R=r(R,I),R.return=N,R)}function d(N,R,I,z){var K=I.type;return K===us?g(N,R,I.props.children,z,I.key):R!==null&&(R.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sr&&P_(K)===R.type)?(z=r(R,I.props),z.ref=za(N,R,I),z.return=N,z):(z=vc(I.type,I.key,I.props,null,N.mode,z),z.ref=za(N,R,I),z.return=N,z)}function h(N,R,I,z){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=Hh(I,N.mode,z),R.return=N,R):(R=r(R,I.children||[]),R.return=N,R)}function g(N,R,I,z,K){return R===null||R.tag!==7?(R=co(I,N.mode,z,K),R.return=N,R):(R=r(R,I),R.return=N,R)}function y(N,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Gh(""+R,N.mode,I),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case bu:return I=vc(R.type,R.key,R.props,null,N.mode,I),I.ref=za(N,null,R),I.return=N,I;case ls:return R=Hh(R,N.mode,I),R.return=N,R;case sr:var z=R._init;return y(N,z(R._payload),I)}if(Ja(R)||Va(R))return R=co(R,N.mode,I,null),R.return=N,R;Wu(N,R)}return null}function v(N,R,I,z){var K=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return K!==null?null:u(N,R,""+I,z);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case bu:return I.key===K?d(N,R,I,z):null;case ls:return I.key===K?h(N,R,I,z):null;case sr:return K=I._init,v(N,R,K(I._payload),z)}if(Ja(I)||Va(I))return K!==null?null:g(N,R,I,z,null);Wu(N,I)}return null}function S(N,R,I,z,K){if(typeof z=="string"&&z!==""||typeof z=="number")return N=N.get(I)||null,u(R,N,""+z,K);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case bu:return N=N.get(z.key===null?I:z.key)||null,d(R,N,z,K);case ls:return N=N.get(z.key===null?I:z.key)||null,h(R,N,z,K);case sr:var Y=z._init;return S(N,R,I,Y(z._payload),K)}if(Ja(z)||Va(z))return N=N.get(I)||null,g(R,N,z,K,null);Wu(R,z)}return null}function b(N,R,I,z){for(var K=null,Y=null,D=R,A=R=0,k=null;D!==null&&A<I.length;A++){D.index>A?(k=D,D=null):k=D.sibling;var V=v(N,D,I[A],z);if(V===null){D===null&&(D=k);break}t&&D&&V.alternate===null&&e(N,D),R=o(V,R,A),Y===null?K=V:Y.sibling=V,Y=V,D=k}if(A===I.length)return n(N,D),Xe&&to(N,A),K;if(D===null){for(;A<I.length;A++)D=y(N,I[A],z),D!==null&&(R=o(D,R,A),Y===null?K=D:Y.sibling=D,Y=D);return Xe&&to(N,A),K}for(D=i(N,D);A<I.length;A++)k=S(D,N,A,I[A],z),k!==null&&(t&&k.alternate!==null&&D.delete(k.key===null?A:k.key),R=o(k,R,A),Y===null?K=k:Y.sibling=k,Y=k);return t&&D.forEach(function(U){return e(N,U)}),Xe&&to(N,A),K}function M(N,R,I,z){var K=Va(I);if(typeof K!="function")throw Error(te(150));if(I=K.call(I),I==null)throw Error(te(151));for(var Y=K=null,D=R,A=R=0,k=null,V=I.next();D!==null&&!V.done;A++,V=I.next()){D.index>A?(k=D,D=null):k=D.sibling;var U=v(N,D,V.value,z);if(U===null){D===null&&(D=k);break}t&&D&&U.alternate===null&&e(N,D),R=o(U,R,A),Y===null?K=U:Y.sibling=U,Y=U,D=k}if(V.done)return n(N,D),Xe&&to(N,A),K;if(D===null){for(;!V.done;A++,V=I.next())V=y(N,V.value,z),V!==null&&(R=o(V,R,A),Y===null?K=V:Y.sibling=V,Y=V);return Xe&&to(N,A),K}for(D=i(N,D);!V.done;A++,V=I.next())V=S(D,N,A,V.value,z),V!==null&&(t&&V.alternate!==null&&D.delete(V.key===null?A:V.key),R=o(V,R,A),Y===null?K=V:Y.sibling=V,Y=V);return t&&D.forEach(function(G){return e(N,G)}),Xe&&to(N,A),K}function O(N,R,I,z){if(typeof I=="object"&&I!==null&&I.type===us&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case bu:e:{for(var K=I.key,Y=R;Y!==null;){if(Y.key===K){if(K=I.type,K===us){if(Y.tag===7){n(N,Y.sibling),R=r(Y,I.props.children),R.return=N,N=R;break e}}else if(Y.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sr&&P_(K)===Y.type){n(N,Y.sibling),R=r(Y,I.props),R.ref=za(N,Y,I),R.return=N,N=R;break e}n(N,Y);break}else e(N,Y);Y=Y.sibling}I.type===us?(R=co(I.props.children,N.mode,z,I.key),R.return=N,N=R):(z=vc(I.type,I.key,I.props,null,N.mode,z),z.ref=za(N,R,I),z.return=N,N=z)}return a(N);case ls:e:{for(Y=I.key;R!==null;){if(R.key===Y)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){n(N,R.sibling),R=r(R,I.children||[]),R.return=N,N=R;break e}else{n(N,R);break}else e(N,R);R=R.sibling}R=Hh(I,N.mode,z),R.return=N,N=R}return a(N);case sr:return Y=I._init,O(N,R,Y(I._payload),z)}if(Ja(I))return b(N,R,I,z);if(Va(I))return M(N,R,I,z);Wu(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,R!==null&&R.tag===6?(n(N,R.sibling),R=r(R,I),R.return=N,N=R):(n(N,R),R=Gh(I,N.mode,z),R.return=N,N=R),a(N)):n(N,R)}return O}var Os=oE(!0),sE=oE(!1),zc=Vr(null),Gc=null,_s=null,um=null;function cm(){um=_s=Gc=null}function dm(t){var e=zc.current;Qe(zc),t._currentValue=e}function Lf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){Gc=t,um=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(um!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(Gc===null)throw Error(te(308));_s=t,Gc.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var so=null;function hm(t){so===null?so=[t]:so.push(t)}function aE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,hm(e)):(n.next=r.next,r.next=n),e.interleaved=n,Oi(t,i)}function Oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Oi(t,n)}return r=i.interleaved,r===null?(e.next=e,hm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Oi(t,n)}function fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xp(t,n)}}function R_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hc(t,e,n,i){var r=t.updateQueue;ar=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,h=d.next;d.next=null,a===null?o=h:a.next=h,a=d;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=h:u.next=h,g.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;a=0,g=h=d=null,u=o;do{var v=u.lane,S=u.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,M=u;switch(v=e,S=n,M.tag){case 1:if(b=M.payload,typeof b=="function"){y=b.call(S,y,v);break e}y=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=M.payload,v=typeof b=="function"?b.call(S,y,v):b,v==null)break e;y=nt({},y,v);break e;case 2:ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(h=g=S,d=y):g=g.next=S,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(g===null&&(d=y),r.baseState=d,r.firstBaseUpdate=h,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);mo|=a,t.lanes=a,t.memoizedState=y}}function N_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(te(191,r));r.call(i)}}}var Kl={},fi=Vr(Kl),Il=Vr(Kl),Al=Vr(Kl);function ao(t){if(t===Kl)throw Error(te(174));return t}function pm(t,e){switch(Ke(Al,e),Ke(Il,t),Ke(fi,Kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ff(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ff(e,t)}Qe(fi),Ke(fi,e)}function Bs(){Qe(fi),Qe(Il),Qe(Al)}function uE(t){ao(Al.current);var e=ao(fi.current),n=ff(e,t.type);e!==n&&(Ke(Il,t),Ke(fi,n))}function mm(t){Il.current===t&&(Qe(fi),Qe(Il))}var et=Vr(0);function qc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vh=[];function gm(){for(var t=0;t<Vh.length;t++)Vh[t]._workInProgressVersionPrimary=null;Vh.length=0}var pc=$i.ReactCurrentDispatcher,Fh=$i.ReactCurrentBatchConfig,po=0,tt=null,mt=null,St=null,$c=!1,sl=!1,Pl=0,gA=0;function bt(){throw Error(te(321))}function _m(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function ym(t,e,n,i,r,o){if(po=o,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pc.current=t===null||t.memoizedState===null?TA:EA,t=n(i,r),sl){o=0;do{if(sl=!1,Pl=0,25<=o)throw Error(te(301));o+=1,St=mt=null,e.updateQueue=null,pc.current=wA,t=n(i,r)}while(sl)}if(pc.current=Wc,e=mt!==null&&mt.next!==null,po=0,St=mt=tt=null,$c=!1,e)throw Error(te(300));return t}function vm(){var t=Pl!==0;return Pl=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?tt.memoizedState=St=t:St=St.next=t,St}function Dn(){if(mt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=St===null?tt.memoizedState:St.next;if(e!==null)St=e,mt=t;else{if(t===null)throw Error(te(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},St===null?tt.memoizedState=St=t:St=St.next=t}return St}function Rl(t,e){return typeof e=="function"?e(t):e}function Uh(t){var e=Dn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var i=mt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,h=o;do{var g=h.lane;if((po&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var y={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=y,a=i):d=d.next=y,tt.lanes|=g,mo|=g}h=h.next}while(h!==null&&h!==o);d===null?a=i:d.next=u,Qn(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,tt.lanes|=o,mo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oh(t){var e=Dn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Qn(o,e.memoizedState)||(an=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function cE(){}function dE(t,e){var n=tt,i=Dn(),r=e(),o=!Qn(i.memoizedState,r);if(o&&(i.memoizedState=r,an=!0),i=i.queue,Tm(pE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Nl(9,fE.bind(null,n,i,r,e),void 0,null),It===null)throw Error(te(349));po&30||hE(n,e,r)}return r}function hE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fE(t,e,n,i){e.value=n,e.getSnapshot=i,mE(e)&&gE(t)}function pE(t,e,n){return n(function(){mE(e)&&gE(t)})}function mE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function gE(t){var e=Oi(t,1);e!==null&&Kn(e,t,1,-1)}function k_(t){var e=li();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:t},e.queue=t,t=t.dispatch=vA.bind(null,tt,t),[e.memoizedState,t]}function Nl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function _E(){return Dn().memoizedState}function mc(t,e,n,i){var r=li();tt.flags|=t,r.memoizedState=Nl(1|e,n,void 0,i===void 0?null:i)}function Pd(t,e,n,i){var r=Dn();i=i===void 0?null:i;var o=void 0;if(mt!==null){var a=mt.memoizedState;if(o=a.destroy,i!==null&&_m(i,a.deps)){r.memoizedState=Nl(e,n,o,i);return}}tt.flags|=t,r.memoizedState=Nl(1|e,n,o,i)}function M_(t,e){return mc(8390656,8,t,e)}function Tm(t,e){return Pd(2048,8,t,e)}function yE(t,e){return Pd(4,2,t,e)}function vE(t,e){return Pd(4,4,t,e)}function TE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function EE(t,e,n){return n=n!=null?n.concat([t]):null,Pd(4,4,TE.bind(null,e,t),n)}function Em(){}function wE(t,e){var n=Dn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_m(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function xE(t,e){var n=Dn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_m(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function SE(t,e,n){return po&21?(Qn(n,e)||(n=RT(),tt.lanes|=n,mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function _A(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var i=Fh.transition;Fh.transition={};try{t(!1),e()}finally{Ge=n,Fh.transition=i}}function CE(){return Dn().memoizedState}function yA(t,e,n){var i=Tr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},IE(t))AE(e,n);else if(n=aE(t,e,n,i),n!==null){var r=Jt();Kn(n,t,i,r),PE(n,e,i)}}function vA(t,e,n){var i=Tr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(IE(t))AE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Qn(u,a)){var d=e.interleaved;d===null?(r.next=r,hm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=aE(t,e,r,i),n!==null&&(r=Jt(),Kn(n,t,i,r),PE(n,e,i))}}function IE(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function AE(t,e){sl=$c=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xp(t,n)}}var Wc={readContext:Ln,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},TA={readContext:Ln,useCallback:function(t,e){return li().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:M_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mc(4194308,4,TE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mc(4194308,4,t,e)},useInsertionEffect:function(t,e){return mc(4,2,t,e)},useMemo:function(t,e){var n=li();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=li();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=yA.bind(null,tt,t),[i.memoizedState,t]},useRef:function(t){var e=li();return t={current:t},e.memoizedState=t},useState:k_,useDebugValue:Em,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=k_(!1),e=t[0];return t=_A.bind(null,t[1]),li().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=tt,r=li();if(Xe){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),It===null)throw Error(te(349));po&30||hE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,M_(pE.bind(null,i,o,t),[t]),i.flags|=2048,Nl(9,fE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=li(),e=It.identifierPrefix;if(Xe){var n=bi,i=Di;n=(i&~(1<<32-Wn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EA={readContext:Ln,useCallback:wE,useContext:Ln,useEffect:Tm,useImperativeHandle:EE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:xE,useReducer:Uh,useRef:_E,useState:function(){return Uh(Rl)},useDebugValue:Em,useDeferredValue:function(t){var e=Dn();return SE(e,mt.memoizedState,t)},useTransition:function(){var t=Uh(Rl)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:cE,useSyncExternalStore:dE,useId:CE,unstable_isNewReconciler:!1},wA={readContext:Ln,useCallback:wE,useContext:Ln,useEffect:Tm,useImperativeHandle:EE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:xE,useReducer:Oh,useRef:_E,useState:function(){return Oh(Rl)},useDebugValue:Em,useDeferredValue:function(t){var e=Dn();return mt===null?e.memoizedState=t:SE(e,mt.memoizedState,t)},useTransition:function(){var t=Oh(Rl)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:cE,useSyncExternalStore:dE,useId:CE,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Df(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rd={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Tr(t),o=Vi(i,r);o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,r),e!==null&&(Kn(e,t,r,i),fc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Tr(t),o=Vi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,r),e!==null&&(Kn(e,t,r,i),fc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=Tr(t),r=Vi(n,i);r.tag=2,e!=null&&(r.callback=e),e=yr(t,r,i),e!==null&&(Kn(e,t,i,n),fc(e,t,i))}};function L_(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!wl(n,i)||!wl(r,o):!0}function RE(t,e,n){var i=!1,r=Pr,o=e.contextType;return typeof o=="object"&&o!==null?o=Ln(o):(r=un(e)?ho:Gt.current,i=e.contextTypes,o=(i=i!=null)?Fs(t,r):Pr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function D_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Rd.enqueueReplaceState(e,e.state,null)}function bf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},fm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Ln(o):(o=un(e)?ho:Gt.current,r.context=Fs(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Df(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Rd.enqueueReplaceState(r,r.state,null),Hc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function zs(t,e){try{var n="",i=e;do n+=YC(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Bh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xA=typeof WeakMap=="function"?WeakMap:Map;function NE(t,e,n){n=Vi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Jc||(Jc=!0,Wf=i),Vf(t,e)},n}function kE(t,e,n){n=Vi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Vf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Vf(t,e),typeof i!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function b_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new xA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=FA.bind(null,t,e,n),e.then(t,t))}function V_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function F_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vi(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var SA=$i.ReactCurrentOwner,an=!1;function Kt(t,e,n,i){e.child=t===null?sE(e,null,n,i):Os(e,t.child,n,i)}function U_(t,e,n,i,r){n=n.render;var o=e.ref;return Is(e,r),i=ym(t,e,n,i,o,r),n=vm(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bi(t,e,r)):(Xe&&n&&sm(e),e.flags|=1,Kt(t,e,i,r),e.child)}function O_(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Rm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ME(t,e,o,i,r)):(t=vc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:wl,n(a,i)&&t.ref===e.ref)return Bi(t,e,r)}return e.flags|=1,t=Er(o,i),t.ref=e.ref,t.return=e,e.child=t}function ME(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(wl(o,i)&&t.ref===e.ref)if(an=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,Bi(t,e,r)}return Ff(t,e,n,i,r)}function LE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(vs,fn),fn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(vs,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ke(vs,fn),fn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ke(vs,fn),fn|=i;return Kt(t,e,r,n),e.child}function DE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ff(t,e,n,i,r){var o=un(n)?ho:Gt.current;return o=Fs(e,o),Is(e,r),n=ym(t,e,n,i,o,r),i=vm(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bi(t,e,r)):(Xe&&i&&sm(e),e.flags|=1,Kt(t,e,n,r),e.child)}function B_(t,e,n,i,r){if(un(n)){var o=!0;Uc(e)}else o=!1;if(Is(e,r),e.stateNode===null)gc(t,e),RE(e,n,i),bf(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ln(h):(h=un(n)?ho:Gt.current,h=Fs(e,h));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==h)&&D_(e,a,i,h),ar=!1;var v=e.memoizedState;a.state=v,Hc(e,i,a,r),d=e.memoizedState,u!==i||v!==d||ln.current||ar?(typeof g=="function"&&(Df(e,n,g,i),d=e.memoizedState),(u=ar||L_(e,n,u,i,v,d,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=h,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,lE(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Gn(e.type,u),a.props=h,y=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ln(d):(d=un(n)?ho:Gt.current,d=Fs(e,d));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||v!==d)&&D_(e,a,i,d),ar=!1,v=e.memoizedState,a.state=v,Hc(e,i,a,r);var b=e.memoizedState;u!==y||v!==b||ln.current||ar?(typeof S=="function"&&(Df(e,n,S,i),b=e.memoizedState),(h=ar||L_(e,n,h,i,v,b,d)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=d,i=h):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Uf(t,e,n,i,o,r)}function Uf(t,e,n,i,r,o){DE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&C_(e,n,!1),Bi(t,e,o);i=e.stateNode,SA.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Os(e,t.child,null,o),e.child=Os(e,null,u,o)):Kt(t,e,u,o),e.memoizedState=i.state,r&&C_(e,n,!0),e.child}function bE(t){var e=t.stateNode;e.pendingContext?S_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S_(t,e.context,!1),pm(t,e.containerInfo)}function z_(t,e,n,i,r){return Us(),lm(r),e.flags|=256,Kt(t,e,n,i),e.child}var Of={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function VE(t,e,n){var i=e.pendingProps,r=et.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ke(et,r&1),t===null)return Mf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Md(a,i,0,null),t=co(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Bf(n),e.memoizedState=Of,t):wm(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return CA(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Er(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Er(u,o):(o=co(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Bf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Of,i}return o=t.child,t=o.sibling,i=Er(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function wm(t,e){return e=Md({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ku(t,e,n,i){return i!==null&&lm(i),Os(e,t.child,null,n),t=wm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CA(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Bh(Error(te(422))),Ku(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Md({mode:"visible",children:i.children},r,0,null),o=co(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Os(e,t.child,null,a),e.child.memoizedState=Bf(a),e.memoizedState=Of,o);if(!(e.mode&1))return Ku(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(te(419)),i=Bh(o,i,void 0),Ku(t,e,a,i)}if(u=(a&t.childLanes)!==0,an||u){if(i=It,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Oi(t,r),Kn(i,t,r,-1))}return Pm(),i=Bh(Error(te(421))),Ku(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=UA.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,pn=_r(r.nextSibling),mn=e,Xe=!0,qn=null,t!==null&&(In[An++]=Di,In[An++]=bi,In[An++]=fo,Di=t.id,bi=t.overflow,fo=e),e=wm(e,i.children),e.flags|=4096,e)}function G_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Lf(t.return,e,n)}function zh(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function FE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Kt(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G_(t,n,e);else if(t.tag===19)G_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ke(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&qc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),zh(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&qc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}zh(e,!0,n,null,o);break;case"together":zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function IA(t,e,n){switch(e.tag){case 3:bE(e),Us();break;case 5:uE(e);break;case 1:un(e.type)&&Uc(e);break;case 4:pm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ke(zc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ke(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?VE(t,e,n):(Ke(et,et.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Ke(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return FE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ke(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,LE(t,e,n)}return Bi(t,e,n)}var UE,zf,OE,BE;UE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zf=function(){};OE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ao(fi.current);var o=null;switch(n){case"input":r=uf(t,r),i=uf(t,i),o=[];break;case"select":r=nt({},r,{value:void 0}),i=nt({},i,{value:void 0}),o=[];break;case"textarea":r=hf(t,r),i=hf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vc)}pf(n,i);var a;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var u=r[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ml.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var d=i[h];if(u=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ml.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Je("scroll",t),o||u===d||(o=[])):(o=o||[]).push(h,d))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};BE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ga(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function AA(t,e,n){var i=e.pendingProps;switch(am(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return un(e.type)&&Fc(),Vt(e),null;case 3:return i=e.stateNode,Bs(),Qe(ln),Qe(Gt),gm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Zf(qn),qn=null))),zf(t,e),Vt(e),null;case 5:mm(e);var r=ao(Al.current);if(n=e.type,t!==null&&e.stateNode!=null)OE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(te(166));return Vt(e),null}if(t=ao(fi.current),$u(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[di]=e,i[Cl]=o,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(r=0;r<Ya.length;r++)Je(Ya[r],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Qg(i,o),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Je("invalid",i);break;case"textarea":jg(i,o),Je("invalid",i)}pf(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&qu(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&qu(i.textContent,u,t),r=["children",""+u]):ml.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Je("scroll",i)}switch(n){case"input":Vu(i),Xg(i,o,!0);break;case"textarea":Vu(i),e_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Vc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[di]=e,t[Cl]=i,UE(t,e,!1,!1),e.stateNode=t;e:{switch(a=mf(n,i),n){case"dialog":Je("cancel",t),Je("close",t),r=i;break;case"iframe":case"object":case"embed":Je("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ya.length;r++)Je(Ya[r],t);r=i;break;case"source":Je("error",t),r=i;break;case"img":case"image":case"link":Je("error",t),Je("load",t),r=i;break;case"details":Je("toggle",t),r=i;break;case"input":Qg(t,i),r=uf(t,i),Je("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=nt({},i,{value:void 0}),Je("invalid",t);break;case"textarea":jg(t,i),r=hf(t,i),Je("invalid",t);break;default:r=i}pf(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?_T(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&mT(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&gl(t,d):typeof d=="number"&&gl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ml.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Je("scroll",t):d!=null&&Wp(t,o,d,a))}switch(n){case"input":Vu(t),Xg(t,i,!1);break;case"textarea":Vu(t),e_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ar(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ws(t,!!i.multiple,o,!1):i.defaultValue!=null&&ws(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Vc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)BE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(te(166));if(n=ao(Al.current),ao(fi.current),$u(e)){if(i=e.stateNode,n=e.memoizedProps,i[di]=e,(o=i.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:qu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[di]=e,e.stateNode=i}return Vt(e),null;case 13:if(Qe(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&pn!==null&&e.mode&1&&!(e.flags&128))rE(),Us(),e.flags|=98560,o=!1;else if(o=$u(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(te(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[di]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),o=!1}else qn!==null&&(Zf(qn),qn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?_t===0&&(_t=3):Pm())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Bs(),zf(t,e),t===null&&xl(e.stateNode.containerInfo),Vt(e),null;case 10:return dm(e.type._context),Vt(e),null;case 17:return un(e.type)&&Fc(),Vt(e),null;case 19:if(Qe(et),o=e.memoizedState,o===null)return Vt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Ga(o,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=qc(t),a!==null){for(e.flags|=128,Ga(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&lt()>Gs&&(e.flags|=128,i=!0,Ga(o,!1),e.lanes=4194304)}else{if(!i)if(t=qc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ga(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Vt(e),null}else 2*lt()-o.renderingStartTime>Gs&&n!==1073741824&&(e.flags|=128,i=!0,Ga(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=lt(),e.sibling=null,n=et.current,Ke(et,i?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Am(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?fn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function PA(t,e){switch(am(e),e.tag){case 1:return un(e.type)&&Fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bs(),Qe(ln),Qe(Gt),gm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mm(e),null;case 13:if(Qe(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(et),null;case 4:return Bs(),null;case 10:return dm(e.type._context),null;case 22:case 23:return Am(),null;case 24:return null;default:return null}}var Ju=!1,Ot=!1,RA=typeof WeakSet=="function"?WeakSet:Set,le=null;function ys(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ot(t,e,i)}else n.current=null}function Gf(t,e,n){try{n()}catch(i){ot(t,e,i)}}var H_=!1;function NA(t,e){if(Cf=Lc,t=$T(),om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,h=0,g=0,y=t,v=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(d=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===t)break t;if(v===n&&++h===r&&(u=a),v===o&&++g===i&&(d=a),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(If={focusedElem:t,selectionRange:n},Lc=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var M=b.memoizedProps,O=b.memoizedState,N=e.stateNode,R=N.getSnapshotBeforeUpdate(e.elementType===e.type?M:Gn(e.type,M),O);N.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(z){ot(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return b=H_,H_=!1,b}function al(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Gf(e,n,o)}r=r.next}while(r!==i)}}function Nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Hf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zE(t){var e=t.alternate;e!==null&&(t.alternate=null,zE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[di],delete e[Cl],delete e[Rf],delete e[hA],delete e[fA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GE(t){return t.tag===5||t.tag===3||t.tag===4}function q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vc));else if(i!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}function $f(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for($f(t,e,n),t=t.sibling;t!==null;)$f(t,e,n),t=t.sibling}var Pt=null,Hn=!1;function or(t,e,n){for(n=n.child;n!==null;)HE(t,e,n),n=n.sibling}function HE(t,e,n){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(wd,n)}catch{}switch(n.tag){case 5:Ot||ys(n,e);case 6:var i=Pt,r=Hn;Pt=null,or(t,e,n),Pt=i,Hn=r,Pt!==null&&(Hn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Hn?(t=Pt,n=n.stateNode,t.nodeType===8?Dh(t.parentNode,n):t.nodeType===1&&Dh(t,n),Tl(t)):Dh(Pt,n.stateNode));break;case 4:i=Pt,r=Hn,Pt=n.stateNode.containerInfo,Hn=!0,or(t,e,n),Pt=i,Hn=r;break;case 0:case 11:case 14:case 15:if(!Ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Gf(n,e,a),r=r.next}while(r!==i)}or(t,e,n);break;case 1:if(!Ot&&(ys(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ot(n,e,u)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(Ot=(i=Ot)||n.memoizedState!==null,or(t,e,n),Ot=i):or(t,e,n);break;default:or(t,e,n)}}function $_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RA),e.forEach(function(i){var r=OA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Pt=u.stateNode,Hn=!1;break e;case 3:Pt=u.stateNode.containerInfo,Hn=!0;break e;case 4:Pt=u.stateNode.containerInfo,Hn=!0;break e}u=u.return}if(Pt===null)throw Error(te(160));HE(o,a,r),Pt=null,Hn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(h){ot(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qE(e,t),e=e.sibling}function qE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),ai(t),i&4){try{al(3,t,t.return),Nd(3,t)}catch(M){ot(t,t.return,M)}try{al(5,t,t.return)}catch(M){ot(t,t.return,M)}}break;case 1:zn(e,t),ai(t),i&512&&n!==null&&ys(n,n.return);break;case 5:if(zn(e,t),ai(t),i&512&&n!==null&&ys(n,n.return),t.flags&32){var r=t.stateNode;try{gl(r,"")}catch(M){ot(t,t.return,M)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&hT(r,o),mf(u,a);var h=mf(u,o);for(a=0;a<d.length;a+=2){var g=d[a],y=d[a+1];g==="style"?_T(r,y):g==="dangerouslySetInnerHTML"?mT(r,y):g==="children"?gl(r,y):Wp(r,g,y,h)}switch(u){case"input":cf(r,o);break;case"textarea":fT(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?ws(r,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?ws(r,!!o.multiple,o.defaultValue,!0):ws(r,!!o.multiple,o.multiple?[]:"",!1))}r[Cl]=o}catch(M){ot(t,t.return,M)}}break;case 6:if(zn(e,t),ai(t),i&4){if(t.stateNode===null)throw Error(te(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(M){ot(t,t.return,M)}}break;case 3:if(zn(e,t),ai(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Tl(e.containerInfo)}catch(M){ot(t,t.return,M)}break;case 4:zn(e,t),ai(t);break;case 13:zn(e,t),ai(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Cm=lt())),i&4&&$_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(h=Ot)||g,zn(e,t),Ot=h):zn(e,t),ai(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(le=t,g=t.child;g!==null;){for(y=le=g;le!==null;){switch(v=le,S=v.child,v.tag){case 0:case 11:case 14:case 15:al(4,v,v.return);break;case 1:ys(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(M){ot(i,n,M)}}break;case 5:ys(v,v.return);break;case 22:if(v.memoizedState!==null){K_(y);continue}}S!==null?(S.return=v,le=S):K_(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{r=y.stateNode,h?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=gT("display",a))}catch(M){ot(t,t.return,M)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(M){ot(t,t.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:zn(e,t),ai(t),i&4&&$_(t);break;case 21:break;default:zn(e,t),ai(t)}}function ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GE(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(gl(r,""),i.flags&=-33);var o=q_(t);$f(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=q_(t);qf(t,u,a);break;default:throw Error(te(161))}}catch(d){ot(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kA(t,e,n){le=t,$E(t)}function $E(t,e,n){for(var i=(t.mode&1)!==0;le!==null;){var r=le,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Ju;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||Ot;u=Ju;var h=Ot;if(Ju=a,(Ot=d)&&!h)for(le=r;le!==null;)a=le,d=a.child,a.tag===22&&a.memoizedState!==null?J_(r):d!==null?(d.return=a,le=d):J_(r);for(;o!==null;)le=o,$E(o),o=o.sibling;le=r,Ju=u,Ot=h}W_(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,le=o):W_(t)}}function W_(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Nd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ot)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&N_(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N_(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&Tl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Ot||e.flags&512&&Hf(e)}catch(v){ot(e,e.return,v)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function K_(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function J_(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nd(4,e)}catch(d){ot(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){ot(e,r,d)}}var o=e.return;try{Hf(e)}catch(d){ot(e,o,d)}break;case 5:var a=e.return;try{Hf(e)}catch(d){ot(e,a,d)}}}catch(d){ot(e,e.return,d)}if(e===t){le=null;break}var u=e.sibling;if(u!==null){u.return=e.return,le=u;break}le=e.return}}var MA=Math.ceil,Kc=$i.ReactCurrentDispatcher,xm=$i.ReactCurrentOwner,kn=$i.ReactCurrentBatchConfig,Le=0,It=null,ht=null,kt=0,fn=0,vs=Vr(0),_t=0,kl=null,mo=0,kd=0,Sm=0,ll=null,sn=null,Cm=0,Gs=1/0,Mi=null,Jc=!1,Wf=null,vr=null,Zu=!1,dr=null,Zc=0,ul=0,Kf=null,_c=-1,yc=0;function Jt(){return Le&6?lt():_c!==-1?_c:_c=lt()}function Tr(t){return t.mode&1?Le&2&&kt!==0?kt&-kt:mA.transition!==null?(yc===0&&(yc=RT()),yc):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:VT(t.type)),t):1}function Kn(t,e,n,i){if(50<ul)throw ul=0,Kf=null,Error(te(185));ql(t,n,i),(!(Le&2)||t!==It)&&(t===It&&(!(Le&2)&&(kd|=n),_t===4&&ur(t,kt)),cn(t,i),n===1&&Le===0&&!(e.mode&1)&&(Gs=lt()+500,Ad&&Fr()))}function cn(t,e){var n=t.callbackNode;mI(t,e);var i=Mc(t,t===It?kt:0);if(i===0)n!==null&&i_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&i_(n),e===1)t.tag===0?pA(Z_.bind(null,t)):tE(Z_.bind(null,t)),cA(function(){!(Le&6)&&Fr()}),n=null;else{switch(NT(i)){case 1:n=Qp;break;case 4:n=AT;break;case 16:n=kc;break;case 536870912:n=PT;break;default:n=kc}n=jE(n,WE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WE(t,e){if(_c=-1,yc=0,Le&6)throw Error(te(327));var n=t.callbackNode;if(As()&&t.callbackNode!==n)return null;var i=Mc(t,t===It?kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Yc(t,i);else{e=i;var r=Le;Le|=2;var o=JE();(It!==t||kt!==e)&&(Mi=null,Gs=lt()+500,uo(t,e));do try{bA();break}catch(u){KE(t,u)}while(!0);cm(),Kc.current=o,Le=r,ht!==null?e=0:(It=null,kt=0,e=_t)}if(e!==0){if(e===2&&(r=Tf(t),r!==0&&(i=r,e=Jf(t,r))),e===1)throw n=kl,uo(t,0),ur(t,i),cn(t,lt()),n;if(e===6)ur(t,i);else{if(r=t.current.alternate,!(i&30)&&!LA(r)&&(e=Yc(t,i),e===2&&(o=Tf(t),o!==0&&(i=o,e=Jf(t,o))),e===1))throw n=kl,uo(t,0),ur(t,i),cn(t,lt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(te(345));case 2:no(t,sn,Mi);break;case 3:if(ur(t,i),(i&130023424)===i&&(e=Cm+500-lt(),10<e)){if(Mc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Pf(no.bind(null,t,sn,Mi),e);break}no(t,sn,Mi);break;case 4:if(ur(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Wn(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*MA(i/1960))-i,10<i){t.timeoutHandle=Pf(no.bind(null,t,sn,Mi),i);break}no(t,sn,Mi);break;case 5:no(t,sn,Mi);break;default:throw Error(te(329))}}}return cn(t,lt()),t.callbackNode===n?WE.bind(null,t):null}function Jf(t,e){var n=ll;return t.current.memoizedState.isDehydrated&&(uo(t,e).flags|=256),t=Yc(t,e),t!==2&&(e=sn,sn=n,e!==null&&Zf(e)),t}function Zf(t){sn===null?sn=t:sn.push.apply(sn,t)}function LA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Qn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Sm,e&=~kd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),i=1<<n;t[n]=-1,e&=~i}}function Z_(t){if(Le&6)throw Error(te(327));As();var e=Mc(t,0);if(!(e&1))return cn(t,lt()),null;var n=Yc(t,e);if(t.tag!==0&&n===2){var i=Tf(t);i!==0&&(e=i,n=Jf(t,i))}if(n===1)throw n=kl,uo(t,0),ur(t,e),cn(t,lt()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,no(t,sn,Mi),cn(t,lt()),null}function Im(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Gs=lt()+500,Ad&&Fr())}}function go(t){dr!==null&&dr.tag===0&&!(Le&6)&&As();var e=Le;Le|=1;var n=kn.transition,i=Ge;try{if(kn.transition=null,Ge=1,t)return t()}finally{Ge=i,kn.transition=n,Le=e,!(Le&6)&&Fr()}}function Am(){fn=vs.current,Qe(vs)}function uo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uA(n)),ht!==null)for(n=ht.return;n!==null;){var i=n;switch(am(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fc();break;case 3:Bs(),Qe(ln),Qe(Gt),gm();break;case 5:mm(i);break;case 4:Bs();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:dm(i.type._context);break;case 22:case 23:Am()}n=n.return}if(It=t,ht=t=Er(t.current,null),kt=fn=e,_t=0,kl=null,Sm=kd=mo=0,sn=ll=null,so!==null){for(e=0;e<so.length;e++)if(n=so[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}so=null}return t}function KE(t,e){do{var n=ht;try{if(cm(),pc.current=Wc,$c){for(var i=tt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}$c=!1}if(po=0,St=mt=tt=null,sl=!1,Pl=0,xm.current=null,n===null||n.return===null){_t=1,kl=e,ht=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=V_(a);if(S!==null){S.flags&=-257,F_(S,a,u,o,e),S.mode&1&&b_(o,h,e),e=S,d=h;var b=e.updateQueue;if(b===null){var M=new Set;M.add(d),e.updateQueue=M}else b.add(d);break e}else{if(!(e&1)){b_(o,h,e),Pm();break e}d=Error(te(426))}}else if(Xe&&u.mode&1){var O=V_(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),F_(O,a,u,o,e),lm(zs(d,u));break e}}o=d=zs(d,u),_t!==4&&(_t=2),ll===null?ll=[o]:ll.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var N=NE(o,d,e);R_(o,N);break e;case 1:u=d;var R=o.type,I=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vr===null||!vr.has(I)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=kE(o,u,e);R_(o,z);break e}}o=o.return}while(o!==null)}YE(n)}catch(K){e=K,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function JE(){var t=Kc.current;return Kc.current=Wc,t===null?Wc:t}function Pm(){(_t===0||_t===3||_t===2)&&(_t=4),It===null||!(mo&268435455)&&!(kd&268435455)||ur(It,kt)}function Yc(t,e){var n=Le;Le|=2;var i=JE();(It!==t||kt!==e)&&(Mi=null,uo(t,e));do try{DA();break}catch(r){KE(t,r)}while(!0);if(cm(),Le=n,Kc.current=i,ht!==null)throw Error(te(261));return It=null,kt=0,_t}function DA(){for(;ht!==null;)ZE(ht)}function bA(){for(;ht!==null&&!sI();)ZE(ht)}function ZE(t){var e=XE(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?YE(t):ht=e,xm.current=null}function YE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PA(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,ht=null;return}}else if(n=AA(n,e,fn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);_t===0&&(_t=5)}function no(t,e,n){var i=Ge,r=kn.transition;try{kn.transition=null,Ge=1,VA(t,e,n,i)}finally{kn.transition=r,Ge=i}return null}function VA(t,e,n,i){do As();while(dr!==null);if(Le&6)throw Error(te(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(gI(t,o),t===It&&(ht=It=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zu||(Zu=!0,jE(kc,function(){return As(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var a=Ge;Ge=1;var u=Le;Le|=4,xm.current=null,NA(t,n),qE(n,t),nA(If),Lc=!!Cf,If=Cf=null,t.current=n,kA(n),aI(),Le=u,Ge=a,kn.transition=o}else t.current=n;if(Zu&&(Zu=!1,dr=t,Zc=r),o=t.pendingLanes,o===0&&(vr=null),cI(n.stateNode),cn(t,lt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Jc)throw Jc=!1,t=Wf,Wf=null,t;return Zc&1&&t.tag!==0&&As(),o=t.pendingLanes,o&1?t===Kf?ul++:(ul=0,Kf=t):ul=0,Fr(),null}function As(){if(dr!==null){var t=NT(Zc),e=kn.transition,n=Ge;try{if(kn.transition=null,Ge=16>t?16:t,dr===null)var i=!1;else{if(t=dr,dr=null,Zc=0,Le&6)throw Error(te(331));var r=Le;for(Le|=4,le=t.current;le!==null;){var o=le,a=o.child;if(le.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(le=h;le!==null;){var g=le;switch(g.tag){case 0:case 11:case 15:al(8,g,o)}var y=g.child;if(y!==null)y.return=g,le=y;else for(;le!==null;){g=le;var v=g.sibling,S=g.return;if(zE(g),g===h){le=null;break}if(v!==null){v.return=S,le=v;break}le=S}}}var b=o.alternate;if(b!==null){var M=b.child;if(M!==null){b.child=null;do{var O=M.sibling;M.sibling=null,M=O}while(M!==null)}}le=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,le=a;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,le=N;break e}le=o.return}}var R=t.current;for(le=R;le!==null;){a=le;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,le=I;else e:for(a=R;le!==null;){if(u=le,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Nd(9,u)}}catch(K){ot(u,u.return,K)}if(u===a){le=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,le=z;break e}le=u.return}}if(Le=r,Fr(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(wd,t)}catch{}i=!0}return i}finally{Ge=n,kn.transition=e}}return!1}function Y_(t,e,n){e=zs(n,e),e=NE(t,e,1),t=yr(t,e,1),e=Jt(),t!==null&&(ql(t,1,e),cn(t,e))}function ot(t,e,n){if(t.tag===3)Y_(t,t,n);else for(;e!==null;){if(e.tag===3){Y_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vr===null||!vr.has(i))){t=zs(n,t),t=kE(e,t,1),e=yr(e,t,1),t=Jt(),e!==null&&(ql(e,1,t),cn(e,t));break}}e=e.return}}function FA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(kt&n)===n&&(_t===4||_t===3&&(kt&130023424)===kt&&500>lt()-Cm?uo(t,0):Sm|=n),cn(t,e)}function QE(t,e){e===0&&(t.mode&1?(e=Ou,Ou<<=1,!(Ou&130023424)&&(Ou=4194304)):e=1);var n=Jt();t=Oi(t,e),t!==null&&(ql(t,e,n),cn(t,n))}function UA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),QE(t,n)}function OA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(te(314))}i!==null&&i.delete(e),QE(t,n)}var XE;XE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,IA(t,e,n);an=!!(t.flags&131072)}else an=!1,Xe&&e.flags&1048576&&nE(e,Bc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;gc(t,e),t=e.pendingProps;var r=Fs(e,Gt.current);Is(e,n),r=ym(null,e,i,t,r,n);var o=vm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(i)?(o=!0,Uc(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fm(e),r.updater=Rd,e.stateNode=r,r._reactInternals=e,bf(e,i,t,n),e=Uf(null,e,i,!0,o,n)):(e.tag=0,Xe&&o&&sm(e),Kt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(gc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=zA(i),t=Gn(i,t),r){case 0:e=Ff(null,e,i,t,n);break e;case 1:e=B_(null,e,i,t,n);break e;case 11:e=U_(null,e,i,t,n);break e;case 14:e=O_(null,e,i,Gn(i.type,t),n);break e}throw Error(te(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),Ff(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),B_(t,e,i,r,n);case 3:e:{if(bE(e),t===null)throw Error(te(387));i=e.pendingProps,o=e.memoizedState,r=o.element,lE(t,e),Hc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=zs(Error(te(423)),e),e=z_(t,e,i,n,r);break e}else if(i!==r){r=zs(Error(te(424)),e),e=z_(t,e,i,n,r);break e}else for(pn=_r(e.stateNode.containerInfo.firstChild),mn=e,Xe=!0,qn=null,n=sE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),i===r){e=Bi(t,e,n);break e}Kt(t,e,i,n)}e=e.child}return e;case 5:return uE(e),t===null&&Mf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Af(i,r)?a=null:o!==null&&Af(i,o)&&(e.flags|=32),DE(t,e),Kt(t,e,a,n),e.child;case 6:return t===null&&Mf(e),null;case 13:return VE(t,e,n);case 4:return pm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Os(e,null,i,n):Kt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),U_(t,e,i,r,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Ke(zc,i._currentValue),i._currentValue=a,o!==null)if(Qn(o.value,a)){if(o.children===r.children&&!ln.current){e=Bi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Vi(-1,n&-n),d.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Lf(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(te(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Lf(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Kt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Is(e,n),r=Ln(r),i=i(r),e.flags|=1,Kt(t,e,i,n),e.child;case 14:return i=e.type,r=Gn(i,e.pendingProps),r=Gn(i.type,r),O_(t,e,i,r,n);case 15:return ME(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gn(i,r),gc(t,e),e.tag=1,un(i)?(t=!0,Uc(e)):t=!1,Is(e,n),RE(e,i,r),bf(e,i,r,n),Uf(null,e,i,!0,t,n);case 19:return FE(t,e,n);case 22:return LE(t,e,n)}throw Error(te(156,e.tag))};function jE(t,e){return IT(t,e)}function BA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,i){return new BA(t,e,n,i)}function Rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zA(t){if(typeof t=="function")return Rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jp)return 11;if(t===Zp)return 14}return 2}function Er(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Rm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case us:return co(n.children,r,o,e);case Kp:a=8,r|=8;break;case of:return t=Nn(12,n,e,r|2),t.elementType=of,t.lanes=o,t;case sf:return t=Nn(13,n,e,r),t.elementType=sf,t.lanes=o,t;case af:return t=Nn(19,n,e,r),t.elementType=af,t.lanes=o,t;case uT:return Md(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aT:a=10;break e;case lT:a=9;break e;case Jp:a=11;break e;case Zp:a=14;break e;case sr:a=16,i=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Nn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function co(t,e,n,i){return t=Nn(7,t,i,e),t.lanes=n,t}function Md(t,e,n,i){return t=Nn(22,t,i,e),t.elementType=uT,t.lanes=n,t.stateNode={isHidden:!1},t}function Gh(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function Hh(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xh(0),this.expirationTimes=xh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Nm(t,e,n,i,r,o,a,u,d){return t=new GA(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Nn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fm(o),t}function HA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ew(t){if(!t)return Pr;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(un(n))return eE(t,n,e)}return e}function tw(t,e,n,i,r,o,a,u,d){return t=Nm(n,i,!0,t,r,o,a,u,d),t.context=ew(null),n=t.current,i=Jt(),r=Tr(n),o=Vi(i,r),o.callback=e??null,yr(n,o,r),t.current.lanes=r,ql(t,r,i),cn(t,i),t}function Ld(t,e,n,i){var r=e.current,o=Jt(),a=Tr(r);return n=ew(n),e.context===null?e.context=n:e.pendingContext=n,e=Vi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=yr(r,e,a),t!==null&&(Kn(t,r,a,o),fc(t,r,a)),a}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Q_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function km(t,e){Q_(t,e),(t=t.alternate)&&Q_(t,e)}function qA(){return null}var nw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mm(t){this._internalRoot=t}Dd.prototype.render=Mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Ld(t,e,null,null)};Dd.prototype.unmount=Mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){Ld(null,t,null,null)}),e[Ui]=null}};function Dd(t){this._internalRoot=t}Dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=LT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&bT(t)}};function Lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X_(){}function $A(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var h=Qc(a);o.call(h)}}var a=tw(e,i,t,0,null,!1,!1,"",X_);return t._reactRootContainer=a,t[Ui]=a.current,xl(t.nodeType===8?t.parentNode:t),go(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var h=Qc(d);u.call(h)}}var d=Nm(t,0,!1,null,null,!1,!1,"",X_);return t._reactRootContainer=d,t[Ui]=d.current,xl(t.nodeType===8?t.parentNode:t),go(function(){Ld(e,d,n,i)}),d}function Vd(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=Qc(a);u.call(d)}}Ld(e,a,t,r)}else a=$A(n,e,t,r,i);return Qc(a)}kT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Za(e.pendingLanes);n!==0&&(Xp(e,n|1),cn(e,lt()),!(Le&6)&&(Gs=lt()+500,Fr()))}break;case 13:go(function(){var i=Oi(t,1);if(i!==null){var r=Jt();Kn(i,t,1,r)}}),km(t,1)}};jp=function(t){if(t.tag===13){var e=Oi(t,134217728);if(e!==null){var n=Jt();Kn(e,t,134217728,n)}km(t,134217728)}};MT=function(t){if(t.tag===13){var e=Tr(t),n=Oi(t,e);if(n!==null){var i=Jt();Kn(n,t,e,i)}km(t,e)}};LT=function(){return Ge};DT=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};_f=function(t,e,n){switch(e){case"input":if(cf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Id(i);if(!r)throw Error(te(90));dT(i),cf(i,r)}}}break;case"textarea":fT(t,n);break;case"select":e=n.value,e!=null&&ws(t,!!n.multiple,e,!1)}};TT=Im;ET=go;var WA={usingClientEntryPoint:!1,Events:[Wl,fs,Id,yT,vT,Im]},Ha={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ST(t),t===null?null:t.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||qA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{wd=Yu.inject(KA),hi=Yu}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WA;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lm(e))throw Error(te(200));return HA(t,e,null,n)};_n.createRoot=function(t,e){if(!Lm(t))throw Error(te(299));var n=!1,i="",r=nw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Nm(t,1,!1,null,null,n,!1,i,r),t[Ui]=e.current,xl(t.nodeType===8?t.parentNode:t),new Mm(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=ST(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return go(t)};_n.hydrate=function(t,e,n){if(!bd(e))throw Error(te(200));return Vd(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Lm(t))throw Error(te(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=nw;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=tw(e,null,t,1,n??null,r,!1,o,a),t[Ui]=e.current,xl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Dd(e)};_n.render=function(t,e,n){if(!bd(e))throw Error(te(200));return Vd(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!bd(t))throw Error(te(40));return t._reactRootContainer?(go(function(){Vd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ui]=null})}),!0):!1};_n.unstable_batchedUpdates=Im;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bd(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return Vd(t,e,n,!1,i)};_n.version="18.3.1-next-f1338f8080-20240426";function iw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iw)}catch(t){console.error(t)}}iw(),iT.exports=_n;var JA=iT.exports,j_=JA;nf.createRoot=j_.createRoot,nf.hydrateRoot=j_.hydrateRoot;const ZA=()=>{};var ey={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},YA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,h=d?t[r+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|h>>6,S=h&63;d||(S=64,a||(v=64)),i.push(n[g],n[y],n[v],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||h==null||y==null)throw new QA;const v=o<<2|u>>4;if(i.push(v),h!==64){const S=u<<4&240|h>>2;if(i.push(S),y!==64){const b=h<<6&192|y;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XA=function(t){const e=rw(t);return ow.encodeByteArray(e,!0)},Xc=function(t){return XA(t).replace(/\./g,"")},jA=function(t){try{return ow.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=()=>eP().__FIREBASE_DEFAULTS__,nP=()=>{if(typeof process>"u"||typeof ey>"u")return;const t=ey.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jA(t[1]);return e&&JSON.parse(e)},Dm=()=>{try{return ZA()||tP()||nP()||iP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rP=t=>{var e,n;return(n=(e=Dm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},oP=t=>{const e=rP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},sw=()=>{var t;return(t=Dm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aP(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xc(JSON.stringify(n)),Xc(JSON.stringify(a)),""].join(".")}const cl={};function uP(){const t={prod:[],emulator:[]};for(const e of Object.keys(cl))cl[e]?t.emulator.push(e):t.prod.push(e);return t}function cP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ty=!1;function dP(t,e){if(typeof window>"u"||typeof document>"u"||!bm(window.location.host)||cl[t]===e||cl[t]||ty)return;cl[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=uP().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,S){v.setAttribute("width","24"),v.setAttribute("id",S),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ty=!0,a()},v}function g(v,S){v.setAttribute("id",S),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=cP(i),S=n("text"),b=document.getElementById(S)||document.createElement("span"),M=n("learnmore"),O=document.getElementById(M)||document.createElement("a"),N=n("preprendIcon"),R=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const I=v.element;u(I),g(O,M);const z=h();d(R,N),I.append(R,b,O,z),document.body.appendChild(I)}o?(b.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fP(){var e;const t=(e=Dm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pP(){return!fP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mP(){try{return typeof indexedDB=="object"}catch{return!1}}function gP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="FirebaseError";class js extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=_P,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aw.prototype.create)}}class aw{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?yP(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new js(r,u,i)}}function yP(t,e){return t.replace(vP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const vP=/\{\$([^}]+)}/g;function jc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(ny(o)&&ny(a)){if(!jc(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ny(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return t&&t._delegate?t._delegate:t}class Ll{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wP(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:EP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EP(t){return t===io?void 0:t}function wP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const SP={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},CP=Me.INFO,IP={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},AP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=IP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lw{constructor(e){this.name=e,this._logLevel=CP,this._logHandler=AP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const PP=(t,e)=>e.some(n=>t instanceof n);let iy,ry;function RP(){return iy||(iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NP(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uw=new WeakMap,Yf=new WeakMap,cw=new WeakMap,qh=new WeakMap,Vm=new WeakMap;function kP(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(wr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uw.set(n,t)}).catch(()=>{}),Vm.set(e,t),e}function MP(t){if(Yf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Yf.set(t,e)}let Qf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LP(t){Qf=t(Qf)}function DP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($h(this),e,...n);return cw.set(i,e.sort?e.sort():[e]),wr(i)}:NP().includes(t)?function(...e){return t.apply($h(this),e),wr(uw.get(this))}:function(...e){return wr(t.apply($h(this),e))}}function bP(t){return typeof t=="function"?DP(t):(t instanceof IDBTransaction&&MP(t),PP(t,RP())?new Proxy(t,Qf):t)}function wr(t){if(t instanceof IDBRequest)return kP(t);if(qh.has(t))return qh.get(t);const e=bP(t);return e!==t&&(qh.set(t,e),Vm.set(e,t)),e}const $h=t=>Vm.get(t);function VP(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=wr(a);return i&&a.addEventListener("upgradeneeded",d=>{i(wr(a.result),d.oldVersion,d.newVersion,wr(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const FP=["get","getKey","getAll","getAllKeys","count"],UP=["put","add","delete","clear"],Wh=new Map;function oy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wh.get(e))return Wh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=UP.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||FP.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),r&&d.done]))[0]};return Wh.set(e,o),o}LP(t=>({...t,get:(e,n,i)=>oy(e,n)||t.get(e,n,i),has:(e,n)=>!!oy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BP(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function BP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xf="@firebase/app",sy="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new lw("@firebase/app"),zP="@firebase/app-compat",GP="@firebase/analytics-compat",HP="@firebase/analytics",qP="@firebase/app-check-compat",$P="@firebase/app-check",WP="@firebase/auth",KP="@firebase/auth-compat",JP="@firebase/database",ZP="@firebase/data-connect",YP="@firebase/database-compat",QP="@firebase/functions",XP="@firebase/functions-compat",jP="@firebase/installations",e1="@firebase/installations-compat",t1="@firebase/messaging",n1="@firebase/messaging-compat",i1="@firebase/performance",r1="@firebase/performance-compat",o1="@firebase/remote-config",s1="@firebase/remote-config-compat",a1="@firebase/storage",l1="@firebase/storage-compat",u1="@firebase/firestore",c1="@firebase/ai",d1="@firebase/firestore-compat",h1="firebase",f1="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="[DEFAULT]",p1={[Xf]:"fire-core",[zP]:"fire-core-compat",[HP]:"fire-analytics",[GP]:"fire-analytics-compat",[$P]:"fire-app-check",[qP]:"fire-app-check-compat",[WP]:"fire-auth",[KP]:"fire-auth-compat",[JP]:"fire-rtdb",[ZP]:"fire-data-connect",[YP]:"fire-rtdb-compat",[QP]:"fire-fn",[XP]:"fire-fn-compat",[jP]:"fire-iid",[e1]:"fire-iid-compat",[t1]:"fire-fcm",[n1]:"fire-fcm-compat",[i1]:"fire-perf",[r1]:"fire-perf-compat",[o1]:"fire-rc",[s1]:"fire-rc-compat",[a1]:"fire-gcs",[l1]:"fire-gcs-compat",[u1]:"fire-fst",[d1]:"fire-fst-compat",[c1]:"fire-vertex","fire-js":"fire-js",[h1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Map,m1=new Map,ep=new Map;function ay(t,e){try{t.container.addComponent(e)}catch(n){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ed(t){const e=t.name;if(ep.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,t);for(const n of Dl.values())ay(n,t);for(const n of m1.values())ay(n,t);return!0}function g1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _1(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new aw("app","Firebase",y1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=f1;function dw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:jf,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw xr.create("bad-app-name",{appName:String(r)});if(n||(n=sw()),!n)throw xr.create("no-options");const o=Dl.get(r);if(o){if(jc(n,o.options)&&jc(i,o.config))return o;throw xr.create("duplicate-app",{appName:r})}const a=new xP(r);for(const d of ep.values())a.addComponent(d);const u=new v1(n,i,a);return Dl.set(r,u),u}function E1(t=jf){const e=Dl.get(t);if(!e&&t===jf&&sw())return dw();if(!e)throw xr.create("no-app",{appName:t});return e}function w1(){return Array.from(Dl.values())}function Ps(t,e,n){let i=p1[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(a.join(" "));return}ed(new Ll(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebase-heartbeat-database",S1=1,bl="firebase-heartbeat-store";let Kh=null;function hw(){return Kh||(Kh=VP(x1,S1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),Kh}async function C1(t){try{const n=(await hw()).transaction(bl),i=await n.objectStore(bl).get(fw(t));return await n.done,i}catch(e){if(e instanceof js)zi.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zi.warn(n.message)}}}async function ly(t,e){try{const i=(await hw()).transaction(bl,"readwrite");await i.objectStore(bl).put(e,fw(t)),await i.done}catch(n){if(n instanceof js)zi.warn(n.message);else{const i=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zi.warn(i.message)}}}function fw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=1024,A1=30;class P1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=uy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>A1){const a=k1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){zi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uy(),{heartbeatsToSend:i,unsentEntries:r}=R1(this._heartbeatsCache.heartbeats),o=Xc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return zi.warn(n),""}}}function uy(){return new Date().toISOString().substring(0,10)}function R1(t,e=I1){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),cy(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),cy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class N1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mP()?gP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ly(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ly(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cy(t){return Xc(JSON.stringify({version:2,heartbeats:t})).length}function k1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t){ed(new Ll("platform-logger",e=>new OP(e),"PRIVATE")),ed(new Ll("heartbeat",e=>new P1(e),"PRIVATE")),Ps(Xf,sy,t),Ps(Xf,sy,"esm2020"),Ps("fire-js","")}M1("");var L1="firebase",D1="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ps(L1,D1,"app");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,pw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function k(){}k.prototype=A.prototype,D.F=A.prototype,D.prototype=new k,D.prototype.constructor=D,D.D=function(V,U,G){for(var F=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)F[xe-2]=arguments[xe];return A.prototype[U].apply(V,F)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,A,k){k||(k=0);const V=Array(16);if(typeof A=="string")for(var U=0;U<16;++U)V[U]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(U=0;U<16;++U)V[U]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=D.g[0],k=D.g[1],U=D.g[2];let G=D.g[3],F;F=A+(G^k&(U^G))+V[0]+3614090360&4294967295,A=k+(F<<7&4294967295|F>>>25),F=G+(U^A&(k^U))+V[1]+3905402710&4294967295,G=A+(F<<12&4294967295|F>>>20),F=U+(k^G&(A^k))+V[2]+606105819&4294967295,U=G+(F<<17&4294967295|F>>>15),F=k+(A^U&(G^A))+V[3]+3250441966&4294967295,k=U+(F<<22&4294967295|F>>>10),F=A+(G^k&(U^G))+V[4]+4118548399&4294967295,A=k+(F<<7&4294967295|F>>>25),F=G+(U^A&(k^U))+V[5]+1200080426&4294967295,G=A+(F<<12&4294967295|F>>>20),F=U+(k^G&(A^k))+V[6]+2821735955&4294967295,U=G+(F<<17&4294967295|F>>>15),F=k+(A^U&(G^A))+V[7]+4249261313&4294967295,k=U+(F<<22&4294967295|F>>>10),F=A+(G^k&(U^G))+V[8]+1770035416&4294967295,A=k+(F<<7&4294967295|F>>>25),F=G+(U^A&(k^U))+V[9]+2336552879&4294967295,G=A+(F<<12&4294967295|F>>>20),F=U+(k^G&(A^k))+V[10]+4294925233&4294967295,U=G+(F<<17&4294967295|F>>>15),F=k+(A^U&(G^A))+V[11]+2304563134&4294967295,k=U+(F<<22&4294967295|F>>>10),F=A+(G^k&(U^G))+V[12]+1804603682&4294967295,A=k+(F<<7&4294967295|F>>>25),F=G+(U^A&(k^U))+V[13]+4254626195&4294967295,G=A+(F<<12&4294967295|F>>>20),F=U+(k^G&(A^k))+V[14]+2792965006&4294967295,U=G+(F<<17&4294967295|F>>>15),F=k+(A^U&(G^A))+V[15]+1236535329&4294967295,k=U+(F<<22&4294967295|F>>>10),F=A+(U^G&(k^U))+V[1]+4129170786&4294967295,A=k+(F<<5&4294967295|F>>>27),F=G+(k^U&(A^k))+V[6]+3225465664&4294967295,G=A+(F<<9&4294967295|F>>>23),F=U+(A^k&(G^A))+V[11]+643717713&4294967295,U=G+(F<<14&4294967295|F>>>18),F=k+(G^A&(U^G))+V[0]+3921069994&4294967295,k=U+(F<<20&4294967295|F>>>12),F=A+(U^G&(k^U))+V[5]+3593408605&4294967295,A=k+(F<<5&4294967295|F>>>27),F=G+(k^U&(A^k))+V[10]+38016083&4294967295,G=A+(F<<9&4294967295|F>>>23),F=U+(A^k&(G^A))+V[15]+3634488961&4294967295,U=G+(F<<14&4294967295|F>>>18),F=k+(G^A&(U^G))+V[4]+3889429448&4294967295,k=U+(F<<20&4294967295|F>>>12),F=A+(U^G&(k^U))+V[9]+568446438&4294967295,A=k+(F<<5&4294967295|F>>>27),F=G+(k^U&(A^k))+V[14]+3275163606&4294967295,G=A+(F<<9&4294967295|F>>>23),F=U+(A^k&(G^A))+V[3]+4107603335&4294967295,U=G+(F<<14&4294967295|F>>>18),F=k+(G^A&(U^G))+V[8]+1163531501&4294967295,k=U+(F<<20&4294967295|F>>>12),F=A+(U^G&(k^U))+V[13]+2850285829&4294967295,A=k+(F<<5&4294967295|F>>>27),F=G+(k^U&(A^k))+V[2]+4243563512&4294967295,G=A+(F<<9&4294967295|F>>>23),F=U+(A^k&(G^A))+V[7]+1735328473&4294967295,U=G+(F<<14&4294967295|F>>>18),F=k+(G^A&(U^G))+V[12]+2368359562&4294967295,k=U+(F<<20&4294967295|F>>>12),F=A+(k^U^G)+V[5]+4294588738&4294967295,A=k+(F<<4&4294967295|F>>>28),F=G+(A^k^U)+V[8]+2272392833&4294967295,G=A+(F<<11&4294967295|F>>>21),F=U+(G^A^k)+V[11]+1839030562&4294967295,U=G+(F<<16&4294967295|F>>>16),F=k+(U^G^A)+V[14]+4259657740&4294967295,k=U+(F<<23&4294967295|F>>>9),F=A+(k^U^G)+V[1]+2763975236&4294967295,A=k+(F<<4&4294967295|F>>>28),F=G+(A^k^U)+V[4]+1272893353&4294967295,G=A+(F<<11&4294967295|F>>>21),F=U+(G^A^k)+V[7]+4139469664&4294967295,U=G+(F<<16&4294967295|F>>>16),F=k+(U^G^A)+V[10]+3200236656&4294967295,k=U+(F<<23&4294967295|F>>>9),F=A+(k^U^G)+V[13]+681279174&4294967295,A=k+(F<<4&4294967295|F>>>28),F=G+(A^k^U)+V[0]+3936430074&4294967295,G=A+(F<<11&4294967295|F>>>21),F=U+(G^A^k)+V[3]+3572445317&4294967295,U=G+(F<<16&4294967295|F>>>16),F=k+(U^G^A)+V[6]+76029189&4294967295,k=U+(F<<23&4294967295|F>>>9),F=A+(k^U^G)+V[9]+3654602809&4294967295,A=k+(F<<4&4294967295|F>>>28),F=G+(A^k^U)+V[12]+3873151461&4294967295,G=A+(F<<11&4294967295|F>>>21),F=U+(G^A^k)+V[15]+530742520&4294967295,U=G+(F<<16&4294967295|F>>>16),F=k+(U^G^A)+V[2]+3299628645&4294967295,k=U+(F<<23&4294967295|F>>>9),F=A+(U^(k|~G))+V[0]+4096336452&4294967295,A=k+(F<<6&4294967295|F>>>26),F=G+(k^(A|~U))+V[7]+1126891415&4294967295,G=A+(F<<10&4294967295|F>>>22),F=U+(A^(G|~k))+V[14]+2878612391&4294967295,U=G+(F<<15&4294967295|F>>>17),F=k+(G^(U|~A))+V[5]+4237533241&4294967295,k=U+(F<<21&4294967295|F>>>11),F=A+(U^(k|~G))+V[12]+1700485571&4294967295,A=k+(F<<6&4294967295|F>>>26),F=G+(k^(A|~U))+V[3]+2399980690&4294967295,G=A+(F<<10&4294967295|F>>>22),F=U+(A^(G|~k))+V[10]+4293915773&4294967295,U=G+(F<<15&4294967295|F>>>17),F=k+(G^(U|~A))+V[1]+2240044497&4294967295,k=U+(F<<21&4294967295|F>>>11),F=A+(U^(k|~G))+V[8]+1873313359&4294967295,A=k+(F<<6&4294967295|F>>>26),F=G+(k^(A|~U))+V[15]+4264355552&4294967295,G=A+(F<<10&4294967295|F>>>22),F=U+(A^(G|~k))+V[6]+2734768916&4294967295,U=G+(F<<15&4294967295|F>>>17),F=k+(G^(U|~A))+V[13]+1309151649&4294967295,k=U+(F<<21&4294967295|F>>>11),F=A+(U^(k|~G))+V[4]+4149444226&4294967295,A=k+(F<<6&4294967295|F>>>26),F=G+(k^(A|~U))+V[11]+3174756917&4294967295,G=A+(F<<10&4294967295|F>>>22),F=U+(A^(G|~k))+V[2]+718787259&4294967295,U=G+(F<<15&4294967295|F>>>17),F=k+(G^(U|~A))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(U+(F<<21&4294967295|F>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+G&4294967295}i.prototype.v=function(D,A){A===void 0&&(A=D.length);const k=A-this.blockSize,V=this.C;let U=this.h,G=0;for(;G<A;){if(U==0)for(;G<=k;)r(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<A;)if(V[U++]=D.charCodeAt(G++),U==this.blockSize){r(this,V),U=0;break}}else for(;G<A;)if(V[U++]=D[G++],U==this.blockSize){r(this,V),U=0;break}}this.h=U,this.o+=A},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var k=D.length-8;k<D.length;++k)D[k]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,k=0;k<4;++k)for(let V=0;V<32;V+=8)D[A++]=this.g[k]>>>V&255;return D};function o(D,A){var k=u;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=A(D)}function a(D,A){this.h=A;const k=[];let V=!0;for(let U=D.length-1;U>=0;U--){const G=D[U]|0;V&&G==A||(k[U]=G,V=!1)}this.g=k}var u={};function d(D){return-128<=D&&D<128?o(D,function(A){return new a([A|0],A<0?-1:0)}):new a([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return y;if(D<0)return O(h(-D));const A=[];let k=1;for(let V=0;D>=k;V++)A[V]=D/k|0,k*=4294967296;return new a(A,0)}function g(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return O(g(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(A,8));let V=y;for(let G=0;G<D.length;G+=8){var U=Math.min(8,D.length-G);const F=parseInt(D.substring(G,G+U),A);U<8?(U=h(Math.pow(A,U)),V=V.j(U).add(h(F))):(V=V.j(k),V=V.add(h(F)))}return V}var y=d(0),v=d(1),S=d(16777216);t=a.prototype,t.m=function(){if(M(this))return-O(this).m();let D=0,A=1;for(let k=0;k<this.g.length;k++){const V=this.i(k);D+=(V>=0?V:4294967296+V)*A,A*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(b(this))return"0";if(M(this))return"-"+O(this).toString(D);const A=h(Math.pow(D,6));var k=this;let V="";for(;;){const U=z(k,A).g;k=N(k,U.j(A));let G=((k.g.length>0?k.g[0]:k.h)>>>0).toString(D);if(k=U,b(k))return G+V;for(;G.length<6;)G="0"+G;V=G+V}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function b(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function M(D){return D.h==-1}t.l=function(D){return D=N(this,D),M(D)?-1:b(D)?0:1};function O(D){const A=D.g.length,k=[];for(let V=0;V<A;V++)k[V]=~D.g[V];return new a(k,~D.h).add(v)}t.abs=function(){return M(this)?O(this):this},t.add=function(D){const A=Math.max(this.g.length,D.g.length),k=[];let V=0;for(let U=0;U<=A;U++){let G=V+(this.i(U)&65535)+(D.i(U)&65535),F=(G>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);V=F>>>16,G&=65535,F&=65535,k[U]=F<<16|G}return new a(k,k[k.length-1]&-2147483648?-1:0)};function N(D,A){return D.add(O(A))}t.j=function(D){if(b(this)||b(D))return y;if(M(this))return M(D)?O(this).j(O(D)):O(O(this).j(D));if(M(D))return O(this.j(O(D)));if(this.l(S)<0&&D.l(S)<0)return h(this.m()*D.m());const A=this.g.length+D.g.length,k=[];for(var V=0;V<2*A;V++)k[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<D.g.length;U++){const G=this.i(V)>>>16,F=this.i(V)&65535,xe=D.i(U)>>>16,pt=D.i(U)&65535;k[2*V+2*U]+=F*pt,R(k,2*V+2*U),k[2*V+2*U+1]+=G*pt,R(k,2*V+2*U+1),k[2*V+2*U+1]+=F*xe,R(k,2*V+2*U+1),k[2*V+2*U+2]+=G*xe,R(k,2*V+2*U+2)}for(D=0;D<A;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=A;D<2*A;D++)k[D]=0;return new a(k,0)};function R(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function I(D,A){this.g=D,this.h=A}function z(D,A){if(b(A))throw Error("division by zero");if(b(D))return new I(y,y);if(M(D))return A=z(O(D),A),new I(O(A.g),O(A.h));if(M(A))return A=z(D,O(A)),new I(O(A.g),A.h);if(D.g.length>30){if(M(D)||M(A))throw Error("slowDivide_ only works with positive integers.");for(var k=v,V=A;V.l(D)<=0;)k=K(k),V=K(V);var U=Y(k,1),G=Y(V,1);for(V=Y(V,2),k=Y(k,2);!b(V);){var F=G.add(V);F.l(D)<=0&&(U=U.add(k),G=F),V=Y(V,1),k=Y(k,1)}return A=N(D,U.j(A)),new I(U,A)}for(U=y;D.l(A)>=0;){for(k=Math.max(1,Math.floor(D.m()/A.m())),V=Math.ceil(Math.log(k)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),G=h(k),F=G.j(A);M(F)||F.l(D)>0;)k-=V,G=h(k),F=G.j(A);b(G)&&(G=v),U=U.add(G),D=N(D,F)}return new I(U,D)}t.B=function(D){return z(this,D).h},t.and=function(D){const A=Math.max(this.g.length,D.g.length),k=[];for(let V=0;V<A;V++)k[V]=this.i(V)&D.i(V);return new a(k,this.h&D.h)},t.or=function(D){const A=Math.max(this.g.length,D.g.length),k=[];for(let V=0;V<A;V++)k[V]=this.i(V)|D.i(V);return new a(k,this.h|D.h)},t.xor=function(D){const A=Math.max(this.g.length,D.g.length),k=[];for(let V=0;V<A;V++)k[V]=this.i(V)^D.i(V);return new a(k,this.h^D.h)};function K(D){const A=D.g.length+1,k=[];for(let V=0;V<A;V++)k[V]=D.i(V)<<1|D.i(V-1)>>>31;return new a(k,D.h)}function Y(D,A){const k=A>>5;A%=32;const V=D.g.length-k,U=[];for(let G=0;G<V;G++)U[G]=A>0?D.i(G+k)>>>A|D.i(G+k+1)<<32-A:D.i(G+k);return new a(U,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,pw=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=g,Sr=a}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mw,Qa,gw,Tc,tp,_w,yw,vw;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qu=="object"&&Qu];for(var T=0;T<p.length;++T){var x=p[T];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(p,T){if(T)e:{var x=i;p=p.split(".");for(var P=0;P<p.length-1;P++){var $=p[P];if(!($ in x))break e;x=x[$]}p=p[p.length-1],P=x[p],T=T(P),T!=P&&T!=null&&e(x,p,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(T){var x=[],P;for(P in T)Object.prototype.hasOwnProperty.call(T,P)&&x.push([P,T[P]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function d(p,T,x){return p.call.apply(p.bind,arguments)}function h(p,T,x){return h=d,h.apply(null,arguments)}function g(p,T){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function y(p,T){function x(){}x.prototype=T.prototype,p.Z=T.prototype,p.prototype=new x,p.prototype.constructor=p,p.Ob=function(P,$,J){for(var ne=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)ne[ye-2]=arguments[ye];return T.prototype[$].apply(P,ne)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function S(p){const T=p.length;if(T>0){const x=Array(T);for(let P=0;P<T;P++)x[P]=p[P];return x}return[]}function b(p,T){for(let P=1;P<arguments.length;P++){const $=arguments[P];var x=typeof $;if(x=x!="object"?x:$?Array.isArray($)?"array":x:"null",x=="array"||x=="object"&&typeof $.length=="number"){x=p.length||0;const J=$.length||0;p.length=x+J;for(let ne=0;ne<J;ne++)p[x+ne]=$[ne]}else p.push($)}}class M{constructor(T,x){this.i=T,this.j=x,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function O(p){a.setTimeout(()=>{throw p},0)}function N(){var p=D;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class R{constructor(){this.h=this.g=null}add(T,x){const P=I.get();P.set(T,x),this.h?this.h.next=P:this.g=P,this.h=P}}var I=new M(()=>new z,p=>p.reset());class z{constructor(){this.next=this.g=this.h=null}set(T,x){this.h=T,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Y=!1,D=new R,A=()=>{const p=Promise.resolve(void 0);K=()=>{p.then(k)}};function k(){for(var p;p=N();){try{p.h.call(p.g)}catch(x){O(x)}var T=I;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}Y=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const x=()=>{};a.addEventListener("test",x,T),a.removeEventListener("test",x,T)}catch{}return p}();function F(p){return/^[\s\xa0]*$/.test(p)}function xe(p,T){U.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}y(xe,U),xe.prototype.init=function(p,T){const x=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(x=="mouseover"?T=p.fromElement:x=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),qe=0;function He(p,T,x,P,$){this.listener=p,this.proxy=null,this.src=T,this.type=x,this.capture=!!P,this.ha=$,this.key=++qe,this.da=this.fa=!1}function H(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ie(p,T,x){for(const P in p)T.call(x,p[P],P,p)}function q(p,T){for(const x in p)T.call(void 0,p[x],x,p)}function ee(p){const T={};for(const x in p)T[x]=p[x];return T}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(p,T){let x,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(x in P)p[x]=P[x];for(let J=0;J<he.length;J++)x=he[J],Object.prototype.hasOwnProperty.call(P,x)&&(p[x]=P[x])}}function Ae(p){this.src=p,this.g={},this.h=0}Ae.prototype.add=function(p,T,x,P,$){const J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);const ne=fe(p,T,P,$);return ne>-1?(T=p[ne],x||(T.fa=!1)):(T=new He(T,this.src,J,!!P,$),T.fa=x,p.push(T)),T};function we(p,T){const x=T.type;if(x in p.g){var P=p.g[x],$=Array.prototype.indexOf.call(P,T,void 0),J;(J=$>=0)&&Array.prototype.splice.call(P,$,1),J&&(H(T),p.g[x].length==0&&(delete p.g[x],p.h--))}}function fe(p,T,x,P){for(let $=0;$<p.length;++$){const J=p[$];if(!J.da&&J.listener==T&&J.capture==!!x&&J.ha==P)return $}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Xt={};function aa(p,T,x,P,$){if(Array.isArray(T)){for(let J=0;J<T.length;J++)aa(p,T[J],x,P,$);return null}return x=zr(x),p&&p[pt]?p.J(T,x,u(P)?!!P.capture:!1,$):la(p,T,x,!1,P,$)}function la(p,T,x,P,$,J){if(!T)throw Error("Invalid event type");const ne=u($)?!!$.capture:!!$;let ye=Ao(p);if(ye||(p[je]=ye=new Ae(p)),x=ye.add(T,x,P,ne,J),x.proxy)return x;if(P=ua(),x.proxy=P,P.src=p,P.listener=x,p.addEventListener)G||($=ne),$===void 0&&($=!1),p.addEventListener(T.toString(),P,$);else if(p.attachEvent)p.attachEvent(eu(T.toString()),P);else if(p.addListener&&p.removeListener)p.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ua(){function p(x){return T.call(p.src,p.listener,x)}const T=tu;return p}function Ji(p,T,x,P,$){if(Array.isArray(T))for(var J=0;J<T.length;J++)Ji(p,T[J],x,P,$);else P=u(P)?!!P.capture:!!P,x=zr(x),p&&p[pt]?(p=p.i,J=String(T).toString(),J in p.g&&(T=p.g[J],x=fe(T,x,P,$),x>-1&&(H(T[x]),Array.prototype.splice.call(T,x,1),T.length==0&&(delete p.g[J],p.h--)))):p&&(p=Ao(p))&&(T=p.g[T.toString()],p=-1,T&&(p=fe(T,x,P,$)),(x=p>-1?T[p]:null)&&Or(x))}function Or(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[pt])we(T.i,p);else{var x=p.type,P=p.proxy;T.removeEventListener?T.removeEventListener(x,P,p.capture):T.detachEvent?T.detachEvent(eu(x),P):T.addListener&&T.removeListener&&T.removeListener(P),(x=Ao(T))?(we(x,p),x.h==0&&(x.src=null,T[je]=null)):H(p)}}}function eu(p){return p in Xt?Xt[p]:Xt[p]="on"+p}function tu(p,T){if(p.da)p=!0;else{T=new xe(T,this);const x=p.listener,P=p.ha||p.src;p.fa&&Or(p),p=x.call(P,T)}return p}function Ao(p){return p=p[je],p instanceof Ae?p:null}var Br="__closure_events_fn_"+(Math.random()*1e9>>>0);function zr(p){return typeof p=="function"?p:(p[Br]||(p[Br]=function(T){return p.handleEvent(T)}),p[Br])}function vt(){V.call(this),this.i=new Ae(this),this.M=this,this.G=null}y(vt,V),vt.prototype[pt]=!0,vt.prototype.removeEventListener=function(p,T,x,P){Ji(this,p,T,x,P)};function Tt(p,T){var x,P=p.G;if(P)for(x=[];P;P=P.G)x.push(P);if(p=p.M,P=T.type||T,typeof T=="string")T=new U(T,p);else if(T instanceof U)T.target=T.target||p;else{var $=T;T=new U(P,p),$e(T,$)}$=!0;let J,ne;if(x)for(ne=x.length-1;ne>=0;ne--)J=T.g=x[ne],$=Zi(J,P,!0,T)&&$;if(J=T.g=p,$=Zi(J,P,!0,T)&&$,$=Zi(J,P,!1,T)&&$,x)for(ne=0;ne<x.length;ne++)J=T.g=x[ne],$=Zi(J,P,!1,T)&&$}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const x=p.g[T];for(let P=0;P<x.length;P++)H(x[P]);delete p.g[T],p.h--}}this.G=null},vt.prototype.J=function(p,T,x,P){return this.i.add(String(p),T,!1,x,P)},vt.prototype.K=function(p,T,x,P){return this.i.add(String(p),T,!0,x,P)};function Zi(p,T,x,P){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let $=!0;for(let J=0;J<T.length;++J){const ne=T[J];if(ne&&!ne.da&&ne.capture==x){const ye=ne.listener,be=ne.ha||ne.src;ne.fa&&we(p.i,ne),$=ye.call(be,P)!==!1&&$}}return $&&!P.defaultPrevented}function nu(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:a.setTimeout(p,T||0)}function ca(p){p.g=nu(()=>{p.g=null,p.i&&(p.i=!1,ca(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class oh extends V{constructor(T,x){super(),this.m=T,this.l=x,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ca(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(p){V.call(this),this.h=p,this.g={}}y(Gr,V);var Po=[];function da(p){ie(p.g,function(T,x){this.g.hasOwnProperty(x)&&Or(T)},p),p.g={}}Gr.prototype.N=function(){Gr.Z.N.call(this),da(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ro=a.JSON.stringify,sh=a.JSON.parse,iu=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function ha(){}function ru(){}var Yi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hr(){U.call(this,"d")}y(Hr,U);function No(){U.call(this,"c")}y(No,U);var Ti={},Qi=null;function ko(){return Qi=Qi||new vt}Ti.Ia="serverreachability";function ou(p){U.call(this,Ti.Ia,p)}y(ou,U);function Xi(p){const T=ko();Tt(T,new ou(T))}Ti.STAT_EVENT="statevent";function fa(p,T){U.call(this,Ti.STAT_EVENT,p),this.stat=T}y(fa,U);function Et(p){const T=ko();Tt(T,new fa(T,p))}Ti.Ja="timingevent";function su(p,T){U.call(this,Ti.Ja,p),this.size=T}y(su,U);function qr(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},T)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function ah(p,T,x,P,$,J){p.info(function(){if(p.g)if(J){var ne="",ye=J.split("&");for(let Oe=0;Oe<ye.length;Oe++){var be=ye[Oe].split("=");if(be.length>1){const st=be[0];be=be[1];const xn=st.split("_");ne=xn.length>=2&&xn[1]=="type"?ne+(st+"="+be+"&"):ne+(st+"=redacted&")}}}else ne=null;else ne=J;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+T+`
`+x+`
`+ne})}function lh(p,T,x,P,$,J,ne){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+T+`
`+x+`
`+J+" "+ne})}function ji(p,T,x,P){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+uh(p,x)+(P?" "+P:"")})}function pa(p,T){p.info(function(){return"TIMEOUT: "+T})}$r.prototype.info=function(){};function uh(p,T){if(!p.g)return T;if(!T)return null;try{const J=JSON.parse(T);if(J){for(p=0;p<J.length;p++)if(Array.isArray(J[p])){var x=J[p];if(!(x.length<2)){var P=x[1];if(Array.isArray(P)&&!(P.length<1)){var $=P[0];if($!="noop"&&$!="stop"&&$!="close")for(let ne=1;ne<P.length;ne++)P[ne]=""}}}}return Ro(J)}catch{return T}}var Mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},au={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lu;function jt(){}y(jt,ha),jt.prototype.g=function(){return new XMLHttpRequest},lu=new jt;function ue(p){return encodeURIComponent(String(p))}function uu(p){var T=1;p=p.split(":");const x=[];for(;T>0&&p.length;)x.push(p.shift()),T--;return p.length&&x.push(p.join(":")),x}function Vn(p,T,x,P){this.j=p,this.i=T,this.l=x,this.S=P||1,this.V=new Gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ma}function ma(){this.i=null,this.g="",this.h=!1}var ga={},Wr={};function Lo(p,T,x){p.M=1,p.A=We(Ht(T)),p.u=x,p.R=!0,Ei(p,null)}function Ei(p,T){p.F=Date.now(),Do(p),p.B=Ht(p.A);var x=p.B,P=p.S;Array.isArray(P)||(P=[String(P)]),Oo(x.i,"t",P),p.C=0,x=p.j.L,p.h=new ma,p.g=Na(p.j,x?T:null,!p.u),p.P>0&&(p.O=new oh(h(p.Y,p,p.g),p.P)),T=p.V,x=p.g,P=p.ba;var $="readystatechange";Array.isArray($)||($&&(Po[0]=$.toString()),$=Po);for(let J=0;J<$.length;J++){const ne=aa(x,$[J],P||T.handleEvent,!1,T.h||T);if(!ne)break;T.g[ne.key]=ne}T=p.J?ee(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),Xi(),ah(p.i,p.v,p.B,p.l,p.S,p.u)}Vn.prototype.ba=function(p){p=p.target;const T=this.O;T&&ni(p)==3?T.j():this.Y(p)},Vn.prototype.Y=function(p){try{if(p==this.g)e:{const ye=ni(this.g),be=this.g.ya(),Oe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||xa(this.g)))){this.K||ye!=4||be==7||(be==8||Oe<=0?Xi(3):Xi(2)),bo(this);var T=this.g.ca();this.X=T;var x=cu(this);if(this.o=T==200,lh(this.i,this.v,this.B,this.l,this.S,ye,T),this.o){if(this.U&&!this.L){t:{if(this.g){var P,$=this.g;if((P=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(P)){var J=P;break t}}J=null}if(p=J)ji(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_a(this,p);else{this.o=!1,this.m=3,Et(12),vn(this),Kr(this);break e}}if(this.R){p=!0;let st;for(;!this.K&&this.C<x.length;)if(st=ch(this,x),st==Wr){ye==4&&(this.m=4,Et(14),p=!1),ji(this.i,this.l,null,"[Incomplete Response]");break}else if(st==ga){this.m=4,Et(15),ji(this.i,this.l,x,"[Invalid Chunk]"),p=!1;break}else ji(this.i,this.l,st,null),_a(this,st);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||x.length!=0||this.h.h||(this.m=1,Et(16),p=!1),this.o=this.o&&p,!p)ji(this.i,this.l,x,"[Invalid Chunked Response]"),vn(this),Kr(this);else if(x.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Pa(ne),ne.P=!0,Et(11))}}else ji(this.i,this.l,x,null),_a(this,x);ye==4&&vn(this),this.o&&!this.K&&(ye==4?hn(this.j,this):(this.o=!1,Do(this)))}else Sa(this.g),T==400&&x.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),vn(this),Kr(this)}}}catch{}finally{}};function cu(p){if(!du(p))return p.g.la();const T=xa(p.g);if(T==="")return"";let x="";const P=T.length,$=ni(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return vn(p),Kr(p),"";p.h.i=new a.TextDecoder}for(let J=0;J<P;J++)p.h.h=!0,x+=p.h.i.decode(T[J],{stream:!($&&J==P-1)});return T.length=0,p.h.g+=x,p.C=0,p.h.g}function du(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function ch(p,T){var x=p.C,P=T.indexOf(`
`,x);return P==-1?Wr:(x=Number(T.substring(x,P)),isNaN(x)?ga:(P+=1,P+x>T.length?Wr:(T=T.slice(P,P+x),p.C=P+x,T)))}Vn.prototype.cancel=function(){this.K=!0,vn(this)};function Do(p){p.T=Date.now()+p.H,hu(p,p.H)}function hu(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=qr(h(p.aa,p),T)}function bo(p){p.D&&(a.clearTimeout(p.D),p.D=null)}Vn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(pa(this.i,this.B),this.M!=2&&(Xi(),Et(17)),vn(this),this.m=2,Kr(this)):hu(this,this.T-p)};function Kr(p){p.j.I==0||p.K||hn(p.j,p)}function vn(p){bo(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,da(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function _a(p,T){try{var x=p.j;if(x.I!=0&&(x.g==p||Jr(x.h,p))){if(!p.L&&Jr(x.h,p)&&x.I==3){try{var P=x.Ba.g.parse(T)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<p.F)qo(x),Go(x);else break e;Aa(x),Et(18)}}else x.xa=$[1],0<x.xa-x.K&&$[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=qr(h(x.Va,x),6e3));mu(x.h)<=1&&x.ta&&(x.ta=void 0)}else ri(x,11)}else if((p.L||x.g==p)&&qo(x),!F(T))for($=x.Ba.g.parse(T),T=0;T<$.length;T++){let Oe=$[T];const st=Oe[0];if(!(st<=x.K))if(x.K=st,Oe=Oe[1],x.I==2)if(Oe[0]=="c"){x.M=Oe[1],x.ba=Oe[2];const xn=Oe[3];xn!=null&&(x.ka=xn,x.j.info("VER="+x.ka));const On=Oe[4];On!=null&&(x.za=On,x.j.info("SVER="+x.za));const Sn=Oe[5];Sn!=null&&typeof Sn=="number"&&Sn>0&&(P=1.5*Sn,x.O=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const oi=p.g;if(oi){const Ko=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var J=P.h;J.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(wi(J,J.h),J.h=null))}if(P.G){const Jo=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(P.wa=Jo,ae(P.J,P.G,Jo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-p.F,x.j.info("Handshake RTT: "+x.T+"ms")),P=x;var ne=p;if(P.na=Ra(P,P.L?P.ba:null,P.W),ne.L){ya(P.h,ne);var ye=ne,be=P.O;be&&(ye.H=be),ye.D&&(bo(ye),Do(ye)),P.g=ne}else Ia(P);x.i.length>0&&ii(x)}else Oe[0]!="stop"&&Oe[0]!="close"||ri(x,7);else x.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?ri(x,7):Se(x):Oe[0]!="noop"&&x.l&&x.l.qa(Oe),x.A=0)}}Xi(4)}catch{}}var dh=class{constructor(p,T){this.g=p,this.map=T}};function fu(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pu(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mu(p){return p.h?1:p.g?p.g.size:0}function Jr(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function wi(p,T){p.g?p.g.add(T):p.h=T}function ya(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}fu.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function va(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const x of p.g.values())T=T.concat(x.G);return T}return S(p.i)}var er=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ne(p,T){if(p){p=p.split("&");for(let x=0;x<p.length;x++){const P=p[x].indexOf("=");let $,J=null;P>=0?($=p[x].substring(0,P),J=p[x].substring(P+1)):$=p[x],T($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function De(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof De?(this.l=p.l,Tn(this,p.j),this.o=p.o,this.g=p.g,En(this,p.u),this.h=p.h,Zr(this,Yr(p.i)),this.m=p.m):p&&(T=String(p).match(er))?(this.l=!1,Tn(this,T[1]||"",!0),this.o=xi(T[2]||""),this.g=xi(T[3]||"",!0),En(this,T[4]),this.h=xi(T[5]||"",!0),Zr(this,T[6]||"",!0),this.m=xi(T[7]||"")):(this.l=!1,this.i=new Fn(null,this.l))}De.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(jn(T,gu,!0),":");var x=this.g;return(x||T=="file")&&(p.push("//"),(T=this.o)&&p.push(jn(T,gu,!0),"@"),p.push(ue(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&p.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&p.push("/"),p.push(jn(x,x.charAt(0)=="/"?Si:Vo,!0))),(x=this.i.toString())&&p.push("?",x),(x=this.m)&&p.push("#",jn(x,Ci)),p.join("")},De.prototype.resolve=function(p){const T=Ht(this);let x=!!p.j;x?Tn(T,p.j):x=!!p.o,x?T.o=p.o:x=!!p.g,x?T.g=p.g:x=p.u!=null;var P=p.h;if(x)En(T,p.u);else if(x=!!p.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var $=T.h.lastIndexOf("/");$!=-1&&(P=T.h.slice(0,$+1)+P)}if($=P,$==".."||$==".")P="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){P=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let ne=0;ne<$.length;){const ye=$[ne++];ye=="."?P&&ne==$.length&&J.push(""):ye==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),P&&ne==$.length&&J.push("")):(J.push(ye),P=!0)}P=J.join("/")}else P=$}return x?T.h=P:x=p.i.toString()!=="",x?Zr(T,Yr(p.i)):x=!!p.m,x&&(T.m=p.m),T};function Ht(p){return new De(p)}function Tn(p,T,x){p.j=x?xi(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function En(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Zr(p,T,x){T instanceof Fn?(p.i=T,Ta(p.i,p.l)):(x||(T=jn(T,rt)),p.i=new Fn(T,p.l))}function ae(p,T,x){p.i.set(T,x)}function We(p){return ae(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function xi(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function jn(p,T,x){return typeof p=="string"?(p=encodeURI(p).replace(T,en),x&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function en(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var gu=/[#\/\?@]/g,Vo=/[#\?:]/g,Si=/[#\?]/g,rt=/[#\?@]/g,Ci=/#/g;function Fn(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function dn(p){p.g||(p.g=new Map,p.h=0,p.i&&Ne(p.i,function(T,x){p.add(decodeURIComponent(T.replace(/\+/g," ")),x)}))}t=Fn.prototype,t.add=function(p,T){dn(this),this.i=null,p=ei(this,p);let x=this.g.get(p);return x||this.g.set(p,x=[]),x.push(T),this.h+=1,this};function Fo(p,T){dn(p),T=ei(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function tr(p,T){return dn(p),T=ei(p,T),p.g.has(T)}t.forEach=function(p,T){dn(this),this.g.forEach(function(x,P){x.forEach(function($){p.call(T,$,P,this)},this)},this)};function Uo(p,T){dn(p);let x=[];if(typeof T=="string")tr(p,T)&&(x=x.concat(p.g.get(ei(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)x=x.concat(p[T]);return x}t.set=function(p,T){return dn(this),this.i=null,p=ei(this,p),tr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=Uo(this,p),p.length>0?String(p[0]):T):T};function Oo(p,T,x){Fo(p,T),x.length>0&&(p.i=null,p.g.set(ei(p,T),S(x)),p.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let P=0;P<T.length;P++){var x=T[P];const $=ue(x);x=Uo(this,x);for(let J=0;J<x.length;J++){let ne=$;x[J]!==""&&(ne+="="+ue(x[J])),p.push(ne)}}return this.i=p.join("&")};function Yr(p){const T=new Fn;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function ei(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function Ta(p,T){T&&!p.j&&(dn(p),p.i=null,p.g.forEach(function(x,P){const $=P.toLowerCase();P!=$&&(Fo(this,P),Oo(this,$,x))},p)),p.j=T}function Bo(p,T){const x=new $r;if(a.Image){const P=new Image;P.onload=g(wn,x,"TestLoadImage: loaded",!0,T,P),P.onerror=g(wn,x,"TestLoadImage: error",!1,T,P),P.onabort=g(wn,x,"TestLoadImage: abort",!1,T,P),P.ontimeout=g(wn,x,"TestLoadImage: timeout",!1,T,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else T(!1)}function _u(p,T){const x=new $r,P=new AbortController,$=setTimeout(()=>{P.abort(),wn(x,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:P.signal}).then(J=>{clearTimeout($),J.ok?wn(x,"TestPingServer: ok",!0,T):wn(x,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout($),wn(x,"TestPingServer: error",!1,T)})}function wn(p,T,x,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(x)}catch{}}function hh(){this.g=new iu}function _e(p){this.i=p.Sb||null,this.h=p.ab||!1}y(_e,ha),_e.prototype.g=function(){return new qt(this.i,this.h)};function qt(p,T){vt.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(qt,vt),t=qt.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,Ii(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||a).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ze(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function ze(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?nr(this):Ii(this),this.readyState==3&&ze(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,nr(this))},t.Na=function(p){this.g&&(this.response=p,nr(this))},t.ga=function(){this.g&&nr(this)};function nr(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Ii(p)}t.setRequestHeader=function(p,T){this.A.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var x=T.next();!x.done;)x=x.value,p.push(x[0]+": "+x[1]),x=T.next();return p.join(`\r
`)};function Ii(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(qt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function zo(p){let T="";return ie(p,function(x,P){T+=P,T+=":",T+=x,T+=`\r
`}),T}function Qr(p,T,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=zo(x),typeof p=="string"?x!=null&&ue(x):ae(p,T,x))}function Ue(p){vt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Ue,vt);var Ea=/^https?$/i,Xr=["POST","PUT"];t=Ue.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,T,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lu.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(J){ut(this,J);return}if(p=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)x.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const J of P.keys())x.set(J,P.get(J));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(J=>J.toLowerCase()=="content-type"),$=a.FormData&&p instanceof a.FormData,!(Array.prototype.indexOf.call(Xr,T,void 0)>=0)||P||$||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ne]of x)this.g.setRequestHeader(J,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(J){ut(this,J)}};function ut(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,ti(p),jr(p)}function ti(p){p.A||(p.A=!0,Tt(p,"complete"),Tt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Tt(this,"complete"),Tt(this,"abort"),jr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wa(this):this.Xa())},t.Xa=function(){wa(this)};function wa(p){if(p.h&&typeof o<"u"){if(p.v&&ni(p)==4)setTimeout(p.Ca.bind(p),0);else if(Tt(p,"readystatechange"),ni(p)==4){p.h=!1;try{const J=p.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var x;if(!(x=T)){var P;if(P=J===0){let ne=String(p.D).match(er)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),P=!Ea.test(ne?ne.toLowerCase():"")}x=P}if(x)Tt(p,"complete"),Tt(p,"success");else{p.o=6;try{var $=ni(p)>2?p.g.statusText:""}catch{$=""}p.l=$+" ["+p.ca()+"]",ti(p)}}finally{jr(p)}}}}function jr(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const x=p.g;p.g=null,T||Tt(p,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ni(p){return p.g?p.g.readyState:0}t.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),sh(T)}};function xa(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Sa(p){const T={};p=(p.g&&ni(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<p.length;P++){if(F(p[P]))continue;var x=uu(p[P]);const $=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const J=T[$]||[];T[$]=J,J.push(x)}q(T,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(p,T,x){return x&&x.internalChannelParams&&x.internalChannelParams[p]||T}function Ca(p){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=eo("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=eo("baseRetryDelayMs",5e3,p),this.Za=eo("retryDelaySeedMs",1e4,p),this.Ta=eo("forwardChannelMaxRetries",2,p),this.va=eo("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new fu(p&&p.concurrentRequestLimit),this.Ba=new hh,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ca.prototype,t.ka=8,t.I=1,t.connect=function(p,T,x,P){Et(0),this.W=p,this.H=T||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.J=Ra(this,null,this.W),ii(this)};function Se(p){if(tn(p),p.I==3){var T=p.V++,x=Ht(p.J);if(ae(x,"SID",p.M),ae(x,"RID",T),ae(x,"TYPE","terminate"),Ai(p,x),T=new Vn(p,p.j,T),T.M=2,T.A=We(Ht(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(T.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=T.A,x=!0),x||(T.g=Na(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Do(T)}Un(p)}function Go(p){p.g&&(Pa(p),p.g.cancel(),p.g=null)}function tn(p){Go(p),p.v&&(a.clearTimeout(p.v),p.v=null),qo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&a.clearTimeout(p.m),p.m=null)}function ii(p){if(!pu(p.h)&&!p.m){p.m=!0;var T=p.Ea;K||A(),Y||(K(),Y=!0),D.add(T,p),p.D=0}}function yu(p,T){return mu(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=qr(h(p.Ea,p,T),Eu(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const $=new Vn(this,this.j,p);let J=this.o;if(this.U&&(J?(J=ee(J),$e(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var T=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(T+=P,T>4096){T=x;break e}if(T===4096||x===this.i.length-1){T=x+1;break e}}T=1e3}else T=1e3;T=Tu(this,$,T),x=Ht(this.J),ae(x,"RID",p),ae(x,"CVER",22),this.G&&ae(x,"X-HTTP-Session-Id",this.G),Ai(this,x),J&&(this.R?T="headers="+ue(zo(J))+"&"+T:this.u&&Qr(x,this.u,J)),wi(this.h,$),this.Ra&&ae(x,"TYPE","init"),this.S?(ae(x,"$req",T),ae(x,"SID","null"),$.U=!0,Lo($,x,null)):Lo($,x,T),this.I=2}}else this.I==3&&(p?vu(this,p):this.i.length==0||pu(this.h)||vu(this))};function vu(p,T){var x;T?x=T.l:x=p.V++;const P=Ht(p.J);ae(P,"SID",p.M),ae(P,"RID",x),ae(P,"AID",p.K),Ai(p,P),p.u&&p.o&&Qr(P,p.u,p.o),x=new Vn(p,p.j,x,p.D+1),p.u===null&&(x.J=p.o),T&&(p.i=T.G.concat(p.i)),T=Tu(p,x,1e3),x.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),wi(p.h,x),Lo(x,P,T)}function Ai(p,T){p.H&&ie(p.H,function(x,P){ae(T,P,x)}),p.l&&ie({},function(x,P){ae(T,P,x)})}function Tu(p,T,x){x=Math.min(p.i.length,x);const P=p.l?h(p.l.Ka,p.l,p):null;e:{var $=p.i;let ye=-1;for(;;){const be=["count="+x];ye==-1?x>0?(ye=$[0].g,be.push("ofs="+ye)):ye=0:be.push("ofs="+ye);let Oe=!0;for(let st=0;st<x;st++){var J=$[st].g;const xn=$[st].map;if(J-=ye,J<0)ye=Math.max(0,$[st].g-100),Oe=!1;else try{J="req"+J+"_"||"";try{var ne=xn instanceof Map?xn:Object.entries(xn);for(const[On,Sn]of ne){let oi=Sn;u(Sn)&&(oi=Ro(Sn)),be.push(J+On+"="+encodeURIComponent(oi))}}catch(On){throw be.push(J+"type="+encodeURIComponent("_badmap")),On}}catch{P&&P(xn)}}if(Oe){ne=be.join("&");break e}}ne=void 0}return p=p.i.splice(0,x),T.G=p,ne}function Ia(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;K||A(),Y||(K(),Y=!0),D.add(T,p),p.A=0}}function Aa(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=qr(h(p.Da,p),Eu(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,Ho(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=qr(h(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Go(this),Ho(this))};function Pa(p){p.B!=null&&(a.clearTimeout(p.B),p.B=null)}function Ho(p){p.g=new Vn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=Ht(p.na);ae(T,"RID","rpc"),ae(T,"SID",p.M),ae(T,"AID",p.K),ae(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&ae(T,"TO",p.ia),ae(T,"TYPE","xmlhttp"),Ai(p,T),p.u&&p.o&&Qr(T,p.u,p.o),p.O&&(p.g.H=p.O);var x=p.g;p=p.ba,x.M=1,x.A=We(Ht(T)),x.u=null,x.R=!0,Ei(x,p)}t.Va=function(){this.C!=null&&(this.C=null,Go(this),Aa(this),Et(19))};function qo(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function hn(p,T){var x=null;if(p.g==T){qo(p),Pa(p),p.g=null;var P=2}else if(Jr(p.h,T))x=T.G,ya(p.h,T),P=1;else return;if(p.I!=0){if(T.o)if(P==1){x=T.u?T.u.length:0,T=Date.now()-T.F;var $=p.D;P=ko(),Tt(P,new su(P,x)),ii(p)}else Ia(p);else if($=T.m,$==3||$==0&&T.X>0||!(P==1&&yu(p,T)||P==2&&Aa(p)))switch(x&&x.length>0&&(T=p.h,T.i=T.i.concat(x)),$){case 1:ri(p,5);break;case 4:ri(p,10);break;case 3:ri(p,6);break;default:ri(p,2)}}}function Eu(p,T){let x=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(x*=2),x*T}function ri(p,T){if(p.j.info("Error code "+T),T==2){var x=h(p.bb,p),P=p.Ua;const $=!P;P=new De(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tn(P,"https"),We(P),$?Bo(P.toString(),x):_u(P.toString(),x)}else Et(2);p.I=0,p.l&&p.l.pa(T),Un(p),tn(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Un(p){if(p.I=0,p.ja=[],p.l){const T=va(p.h);(T.length!=0||p.i.length!=0)&&(b(p.ja,T),b(p.ja,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.oa()}}function Ra(p,T,x){var P=x instanceof De?Ht(x):new De(x);if(P.g!="")T&&(P.g=T+"."+P.g),En(P,P.u);else{var $=a.location;P=$.protocol,T=T?T+"."+$.hostname:$.hostname,$=+$.port;const J=new De(null);P&&Tn(J,P),T&&(J.g=T),$&&En(J,$),x&&(J.h=x),P=J}return x=p.G,T=p.wa,x&&T&&ae(P,x,T),ae(P,"VER",p.ka),Ai(p,P),P}function Na(p,T,x){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new Ue(new _e({ab:x})):new Ue(p.ma),T.Fa(p.L),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $o(){}t=$o.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wo(){}Wo.prototype.g=function(p,T){return new Dt(p,T)};function Dt(p,T){vt.call(this),this.g=new Ca(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!F(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!F(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new ir(this)}y(Dt,vt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Se(this.g)},Dt.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var x={};x.__data__=p,p=x}else this.v&&(x={},x.__data__=Ro(p),p=x);T.i.push(new dh(T.Ya++,p)),T.I==3&&ii(T)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Se(this.g),delete this.g,Dt.Z.N.call(this)};function ka(p){Hr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const x in T){p=x;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}y(ka,Hr);function wu(){No.call(this),this.status=1}y(wu,No);function ir(p){this.g=p}y(ir,$o),ir.prototype.ra=function(){Tt(this.g,"a")},ir.prototype.qa=function(p){Tt(this.g,new ka(p))},ir.prototype.pa=function(p){Tt(this.g,new wu)},ir.prototype.oa=function(){Tt(this.g,"b")},Wo.prototype.createWebChannel=Wo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,vw=function(){return new Wo},yw=function(){return ko()},_w=Ti,tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,Tc=Mo,au.COMPLETE="complete",gw=au,ru.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Qa=ru,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,mw=Ue}).apply(typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.8.0";function b1(t){ea=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new lw("@firebase/firestore");function is(){return _o.logLevel}function se(t,...e){if(_o.logLevel<=Me.DEBUG){const n=e.map(Fm);_o.debug(`Firestore (${ea}): ${t}`,...n)}}function Gi(t,...e){if(_o.logLevel<=Me.ERROR){const n=e.map(Fm);_o.error(`Firestore (${ea}): ${t}`,...n)}}function Hs(t,...e){if(_o.logLevel<=Me.WARN){const n=e.map(Fm);_o.warn(`Firestore (${ea}): ${t}`,...n)}}function Fm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Tw(t,i,n)}function Tw(t,e,n){let i=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Gi(i),new Error(i)}function Be(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||Tw(e,r,i)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class F1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U1{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new Ew(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class O1{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class B1{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new O1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Be(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=G1(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Pe(t,e){return t<e?-1:t>e?1:0}function np(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Jh(r)===Jh(o)?Pe(r,o):Jh(r)?1:-1}return Pe(t.length,e.length)}const H1=55296,q1=57343;function Jh(t){const e=t.charCodeAt(0);return e>=H1&&e<=q1}function qs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="__name__";class ui{constructor(e,n,i){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ge(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=ui.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Pe(e.length,n.length)}static compareSegments(e,n){const i=ui.isNumericId(e),r=ui.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ui.extractNumericId(e).compare(ui.extractNumericId(n)):np(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class Ze extends ui{construct(e,n,i){return new Ze(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const $1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ui{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return $1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fy}static keyField(){return new Nt([fy])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ce(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ce(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ce(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ce(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Ze.fromString(e))}static fromName(e){return new de(Ze.fromString(e).popFirst(5))}static empty(){return new de(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e,n){if(!n)throw new ce(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W1(t,e,n,i){if(e===!0&&i===!0)throw new ce(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function py(t){if(!de.isDocumentKey(t))throw new ce(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function my(t){if(de.isDocumentKey(t))throw new ce(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function $s(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Om(t);throw new ce(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jl(t,e){if(!xw(t))throw new ce(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ce(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=-62135596800,_y=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*_y);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gy)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jl(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:ft("string",Ye._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ye(0,0))}static max(){return new Te(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function K1(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new Rr(r,de.empty(),e)}function J1(t){return new Rr(t.readTime,t.key,Vl)}class Rr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Rr(Te.min(),de.empty(),Vl)}static max(){return new Rr(Te.max(),de.empty(),Vl)}}function Z1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Y1)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const h=d;n(e[h]).next(g=>{a[h]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function X1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function na(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function Ud(t){return t==null}function td(t){return t===0&&1/t==-1/0}function j1(t){return typeof t=="number"&&Number.isInteger(t)&&!td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="";function eR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yy(e)),e=tR(t.get(n),e);return yy(e)}function tR(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case Sw:n+="";break;default:n+=o}}return n}function yy(t){return t+Sw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=r??Rt.EMPTY,this.right=o??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Rt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new $n([])}unionWith(e){let n=new yt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Iw("Invalid base64 string: "+o):o}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const nR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(Be(!!t,39018),typeof t=="string"){let e=0;const n=nR.exec(t);if(Be(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="server_timestamp",Pw="__type__",Rw="__previous_value__",Nw="__local_write_time__";function zm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Pw])==null?void 0:i.stringValue)===Aw}function Od(t){const e=t.mapValue.fields[Rw];return zm(e)?Od(e):e}function Fl(t){const e=Nr(t.mapValue.fields[Nw].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,i,r,o,a,u,d,h,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=g,this.apiKey=y}}const nd="(default)";class Ul{constructor(e,n){this.projectId=e,this.database=n||nd}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===nd}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}function rR(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ce(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="__type__",oR="__max__",ju={mapValue:{}},Mw="__vector__",id="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zm(t)?4:aR(t)?9007199254740991:sR(t)?10:11:ge(28295,{value:t})}function yi(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fl(t).isEqual(Fl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=Nr(r.timestampValue),u=Nr(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return kr(r.bytesValue).isEqual(kr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return at(r.geoPointValue.latitude)===at(o.geoPointValue.latitude)&&at(r.geoPointValue.longitude)===at(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return at(r.integerValue)===at(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=at(r.doubleValue),u=at(o.doubleValue);return a===u?td(a)===td(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return qs(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(vy(a)!==vy(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!yi(a[d],u[d])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Ol(t,e){return(t.values||[]).find(n=>yi(n,e))!==void 0}function Ws(t,e){if(t===e)return 0;const n=Mr(t),i=Mr(e);if(n!==i)return Pe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=at(o.integerValue||o.doubleValue),d=at(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return Ey(t.timestampValue,e.timestampValue);case 4:return Ey(Fl(t),Fl(e));case 5:return np(t.stringValue,e.stringValue);case 6:return function(o,a){const u=kr(o),d=kr(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const g=Pe(u[h],d[h]);if(g!==0)return g}return Pe(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Pe(at(o.latitude),at(a.latitude));return u!==0?u:Pe(at(o.longitude),at(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wy(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,S,b,M;const u=o.fields||{},d=a.fields||{},h=(v=u[id])==null?void 0:v.arrayValue,g=(S=d[id])==null?void 0:S.arrayValue,y=Pe(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((M=g==null?void 0:g.values)==null?void 0:M.length)||0);return y!==0?y:wy(h,g)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===ju.mapValue&&a===ju.mapValue)return 0;if(o===ju.mapValue)return 1;if(a===ju.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),h=a.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=np(d[y],g[y]);if(v!==0)return v;const S=Ws(u[d[y]],h[g[y]]);if(S!==0)return S}return Pe(d.length,g.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function Ey(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Nr(t),i=Nr(e),r=Pe(n.seconds,i.seconds);return r!==0?r:Pe(n.nanos,i.nanos)}function wy(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ws(n[r],i[r]);if(o)return o}return Pe(n.length,i.length)}function Ks(t){return ip(t)}function ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Nr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=ip(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${ip(n.fields[a])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function Ec(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Od(t);return e?16+Ec(e):16;case 5:return 2*t.stringValue.length;case 6:return kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Ec(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return wo(i.fields,(o,a)=>{r+=o.length+Ec(a)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function rp(t){return!!t&&"integerValue"in t}function Gm(t){return!!t&&"arrayValue"in t}function xy(t){return!!t&&"nullValue"in t}function Sy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wc(t){return!!t&&"mapValue"in t}function sR(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kw])==null?void 0:i.stringValue)===Mw}function dl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=dl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return{...t}}function aR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=dl(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];wc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){wo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Pn(dl(this.value))}}function Lw(t){const e=[];return wo(t.fields,(n,i)=>{const r=new Nt([n]);if(wc(i)){const o=Lw(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Bt(e,0,Te.min(),Te.min(),Te.min(),Pn.empty(),0)}static newFoundDocument(e,n,i,r){return new Bt(e,1,n,Te.min(),i,r,0)}static newNoDocument(e,n){return new Bt(e,2,n,Te.min(),Te.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,Te.min(),Te.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.position=e,this.inclusive=n}}function Cy(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=de.comparator(de.fromName(a.referenceValue),n.key):i=Ws(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Iy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n="asc"){this.field=e,this.dir=n}}function lR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{}class gt extends Dw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new cR(e,n,i):n==="array-contains"?new fR(e,i):n==="in"?new pR(e,i):n==="not-in"?new mR(e,i):n==="array-contains-any"?new gR(e,i):new gt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new dR(e,i):new hR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ws(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(Ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends Dw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vi(e,n)}matches(e){return bw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bw(t){return t.op==="and"}function Vw(t){return uR(t)&&bw(t)}function uR(t){for(const e of t.filters)if(e instanceof vi)return!1;return!0}function op(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Ks(t.value);if(Vw(t))return t.filters.map(e=>op(e)).join(",");{const e=t.filters.map(n=>op(n)).join(",");return`${t.op}(${e})`}}function Fw(t,e){return t instanceof gt?function(i,r){return r instanceof gt&&i.op===r.op&&i.field.isEqual(r.field)&&yi(i.value,r.value)}(t,e):t instanceof vi?function(i,r){return r instanceof vi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&Fw(a,r.filters[u]),!0):!1}(t,e):void ge(19439)}function Uw(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ks(n.value)}`}(t):t instanceof vi?function(n){return n.op.toString()+" {"+n.getFilters().map(Uw).join(" ,")+"}"}(t):"Filter"}class cR extends gt{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class dR extends gt{constructor(e,n){super(e,"in",n),this.keys=Ow("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hR extends gt{constructor(e,n){super(e,"not-in",n),this.keys=Ow("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ow(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class fR extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gm(n)&&Ol(n.arrayValue,this.value)}}class pR extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class mR extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ol(this.value.arrayValue,n)}}class gR extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ol(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Ay(t,e=null,n=[],i=[],r=null,o=null,a=null){return new _R(t,e,n,i,r,o,a)}function Hm(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>op(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ud(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ks(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ks(i)).join(",")),e.Te=n}return e.Te}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iy(t.startAt,e.startAt)&&Iy(t.endAt,e.endAt)}function sp(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yR(t,e,n,i,r,o,a,u){return new Bd(t,e,n,i,r,o,a,u)}function Bw(t){return new Bd(t)}function Py(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vR(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function TR(t){return t.collectionGroup!==null}function hl(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new yt(Nt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new od(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new od(Nt.keyField(),i))}return e.Ie}function pi(t){const e=Ee(t);return e.Ee||(e.Ee=ER(e,hl(t))),e.Ee}function ER(t,e){if(t.limitType==="F")return Ay(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new od(r.field,o)});const n=t.endAt?new rd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new rd(t.startAt.position,t.startAt.inclusive):null;return Ay(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ap(t,e,n){return new Bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zd(t,e){return qm(pi(t),pi(e))&&t.limitType===e.limitType}function zw(t){return`${Hm(pi(t))}|lt:${t.limitType}`}function rs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Uw(r)).join(", ")}]`),Ud(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ks(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ks(r)).join(",")),`Target(${i})`}(pi(t))}; limitType=${t.limitType})`}function Gd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):de.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of hl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const h=Cy(a,u,d);return a.inclusive?h<=0:h<0}(i.startAt,hl(i),r)||i.endAt&&!function(a,u,d){const h=Cy(a,u,d);return a.inclusive?h>=0:h>0}(i.endAt,hl(i),r))}(t,e)}function wR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Gw(t){return(e,n)=>{let i=!1;for(const r of hl(t)){const o=xR(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function xR(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),h=u.data.field(o);return d!==null&&h!==null?Ws(d,h):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return Cw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new it(de.comparator);function Hi(){return SR}const Hw=new it(de.comparator);function Xa(...t){let e=Hw;for(const n of t)e=e.insert(n.key,n);return e}function qw(t){let e=Hw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function lo(){return fl()}function $w(){return fl()}function fl(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const CR=new it(de.comparator),IR=new yt(de.comparator);function Re(...t){let e=IR;for(const n of t)e=e.add(n);return e}const AR=new yt(Pe);function PR(){return AR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:td(e)?"-0":e}}function Ww(t){return{integerValue:""+t}}function RR(t,e){return j1(e)?Ww(e):$m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this._=void 0}}function NR(t,e,n){return t instanceof sd?function(r,o){const a={fields:{[Pw]:{stringValue:Aw},[Nw]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&zm(o)&&(o=Od(o)),o&&(a.fields[Rw]=o),{mapValue:a}}(n,e):t instanceof Bl?Jw(t,e):t instanceof zl?Zw(t,e):function(r,o){const a=Kw(r,o),u=Ry(a)+Ry(r.Ae);return rp(a)&&rp(r.Ae)?Ww(u):$m(r.serializer,u)}(t,e)}function kR(t,e,n){return t instanceof Bl?Jw(t,e):t instanceof zl?Zw(t,e):n}function Kw(t,e){return t instanceof ad?function(i){return rp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class sd extends Hd{}class Bl extends Hd{constructor(e){super(),this.elements=e}}function Jw(t,e){const n=Yw(e);for(const i of t.elements)n.some(r=>yi(r,i))||n.push(i);return{arrayValue:{values:n}}}class zl extends Hd{constructor(e){super(),this.elements=e}}function Zw(t,e){let n=Yw(e);for(const i of t.elements)n=n.filter(r=>!yi(r,i));return{arrayValue:{values:n}}}class ad extends Hd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ry(t){return at(t.integerValue||t.doubleValue)}function Yw(t){return Gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function MR(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Bl&&r instanceof Bl||i instanceof zl&&r instanceof zl?qs(i.elements,r.elements,yi):i instanceof ad&&r instanceof ad?yi(i.Ae,r.Ae):i instanceof sd&&r instanceof sd}(t.transform,e.transform)}class LR{constructor(e,n){this.version=e,this.transformResults=n}}class mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qd{}function Qw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wm(t.key,mi.none()):new Zl(t.key,t.data,mi.none());{const n=t.data,i=Pn.empty();let r=new yt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new So(t.key,i,new $n(r.toArray()),mi.none())}}function DR(t,e,n){t instanceof Zl?function(r,o,a){const u=r.value.clone(),d=ky(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof So?function(r,o,a){if(!xc(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=ky(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(Xw(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function pl(t,e,n,i){return t instanceof Zl?function(o,a,u,d){if(!xc(o.precondition,a))return u;const h=o.value.clone(),g=My(o.fieldTransforms,d,a);return h.setAll(g),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof So?function(o,a,u,d){if(!xc(o.precondition,a))return u;const h=My(o.fieldTransforms,d,a),g=a.data;return g.setAll(Xw(o)),g.setAll(h),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return xc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function bR(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=Kw(i.transform,r||null);o!=null&&(n===null&&(n=Pn.empty()),n.set(i.field,o))}return n||null}function Ny(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&qs(i,r,(o,a)=>MR(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zl extends qd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class So extends qd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Xw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ky(t,e,n){const i=new Map;Be(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,kR(a,u,n[r]))}return i}function My(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,NR(o,a,e))}return i}class Wm extends qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VR extends qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&DR(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=pl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=pl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=$w();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=Qw(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,(n,i)=>Ny(n,i))&&qs(this.baseMutations,e.baseMutations,(n,i)=>Ny(n,i))}}class Km{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return CR}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Km(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,ke;function BR(t){switch(t){case j.OK:return ge(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function jw(t){if(t===void 0)return Gi("GRPC error has no .code"),j.UNKNOWN;switch(t){case dt.OK:return j.OK;case dt.CANCELLED:return j.CANCELLED;case dt.UNKNOWN:return j.UNKNOWN;case dt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case dt.INTERNAL:return j.INTERNAL;case dt.UNAVAILABLE:return j.UNAVAILABLE;case dt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case dt.NOT_FOUND:return j.NOT_FOUND;case dt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case dt.ABORTED:return j.ABORTED;case dt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case dt.DATA_LOSS:return j.DATA_LOSS;default:return ge(39323,{code:t})}}(ke=dt||(dt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new Sr([4294967295,4294967295],0);function Ly(t){const e=zR().encode(t),n=new pw;return n.update(e),new Uint8Array(n.digest())}function Dy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sr([n,i],0),new Sr([r,o],0)]}class Jm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ja(`Invalid padding: ${n}`);if(i<0)throw new ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ja(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ja(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Sr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Sr.fromNumber(i)));return r.compare(GR)===1&&(r=new Sr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ly(e),[i,r]=Dy(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Jm(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Ly(e),[i,r]=Dy(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.be(a)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new $d(Te.min(),r,new it(Pe),Hi(),Re())}}class Yl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Yl(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=r}}class ex{constructor(e,n){this.targetId=e,this.Ce=n}}class tx{constructor(e,n,i=Lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class by{constructor(){this.ve=0,this.Fe=Vy(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),i=Re();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ge(38017,{changeType:o})}}),new Yl(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Vy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class HR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.He=ec(),this.Je=ec(),this.Ze=new it(Pe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(sp(o))if(i===0){const a=new de(o.path);this.et(n,a,Bt.newNoDocument(a,Te.min()))}else Be(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=kr(i).toUint8Array()}catch(d){if(d instanceof Iw)return Hs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Jm(a,r,o)}catch(d){return Hs(d instanceof ja?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&sp(u.target)){const d=new de(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Bt.newNoDocument(d,e))}o.Be&&(n.set(a,o.ke()),o.Ke())}});let i=Re();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new $d(e,n,this.Ze,this.je,i);return this.je=Hi(),this.He=ec(),this.Je=ec(),this.Ze=new it(Pe),r}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.qe(n,1):r.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new by,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new yt(Pe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new yt(Pe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new by),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ec(){return new it(de.comparator)}function Vy(){return new it(de.comparator)}const qR={asc:"ASCENDING",desc:"DESCENDING"},$R={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WR={and:"AND",or:"OR"};class KR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(t,e){return t.useProto3Json||Ud(e)?e:{value:e}}function ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JR(t,e){return ld(t,e.toTimestamp())}function gi(t){return Be(!!t,49232),Te.fromTimestamp(function(n){const i=Nr(n);return new Ye(i.seconds,i.nanos)}(t))}function Zm(t,e){return up(t,e).canonicalString()}function up(t,e){const n=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ix(t){const e=Ze.fromString(t);return Be(lx(e),10190,{key:e.toString()}),e}function cp(t,e){return Zm(t.databaseId,e.path)}function Zh(t,e){const n=ix(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(ox(n))}function rx(t,e){return Zm(t.databaseId,e)}function ZR(t){const e=ix(t);return e.length===4?Ze.emptyPath():ox(e)}function dp(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ox(t){return Be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fy(t,e,n){return{name:cp(t,e),fields:n.value.mapValue.fields}}function YR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ge(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Be(g===void 0||typeof g=="string",58123),Lt.fromBase64String(g||"")):(Be(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Lt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){const g=h.code===void 0?j.UNKNOWN:jw(h.code);return new ce(g,h.message||"")}(a);n=new tx(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zh(t,i.document.name),o=gi(i.document.updateTime),a=i.document.createTime?gi(i.document.createTime):Te.min(),u=new Pn({mapValue:{fields:i.document.fields}}),d=Bt.newFoundDocument(r,o,a,u),h=i.targetIds||[],g=i.removedTargetIds||[];n=new Sc(h,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zh(t,i.document),o=i.readTime?gi(i.readTime):Te.min(),a=Bt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Sc([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zh(t,i.document),o=i.removedTargetIds||[];n=new Sc([],o,r,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new OR(r,o),u=i.targetId;n=new ex(u,a)}}return n}function QR(t,e){let n;if(e instanceof Zl)n={update:Fy(t,e.key,e.value)};else if(e instanceof Wm)n={delete:cp(t,e.key)};else if(e instanceof So)n={update:Fy(t,e.key,e.data),updateMask:sN(e.fieldMask)};else{if(!(e instanceof VR))return ge(16599,{dt:e.type});n={verify:cp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof sd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Bl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof zl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ad)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw ge(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:JR(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)}(t,e.precondition)),n}function XR(t,e){return t&&t.length>0?(Be(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?gi(r.updateTime):gi(o);return a.isEqual(Te.min())&&(a=gi(o)),new LR(a,r.transformResults||[])}(n,e))):[]}function jR(t,e){return{documents:[rx(t,e.path)]}}function eN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rx(t,r);const o=function(h){if(h.length!==0)return ax(vi.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(h){if(h.length!==0)return h.map(g=>function(v){return{field:os(v.field),direction:iN(v.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=lp(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function tN(t){let e=ZR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Be(i===1,65062);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=sx(y);return v instanceof vi&&Vw(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(b){return new od(ss(b.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Ud(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(y){const v=!!y.before,S=y.values||[];return new rd(S,v)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const v=!y.before,S=y.values||[];return new rd(S,v)}(n.endAt)),yR(e,r,a,o,u,"F",d,h)}function nN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ss(n.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ss(n.unaryFilter.field);return gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ss(n.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ss(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(ss(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vi.create(n.compositeFilter.filters.map(i=>sx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function iN(t){return qR[t]}function rN(t){return $R[t]}function oN(t){return WR[t]}function os(t){return{fieldPath:t.canonicalString()}}function ss(t){return Nt.fromServerFormat(t.fieldPath)}function ax(t){return t instanceof gt?function(n){if(n.op==="=="){if(Sy(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NAN"}};if(xy(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sy(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NAN"}};if(xy(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(n.field),op:rN(n.op),value:n.value}}}(t):t instanceof vi?function(n){const i=n.getFilters().map(r=>ax(r));return i.length===1?i[0]:{compositeFilter:{op:oN(n.op),filters:i}}}(t):ge(54877,{filter:t})}function sN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function ux(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,i,r,o=Te.min(),a=Te.min(),u=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.yt=e}}function lN(t){const e=tN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.Sn=new cN}addToCollectionParentIndex(e,n){return this.Sn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Rr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class cN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new yt(Ze.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new yt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cx=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(cx,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Js(0)}static ar(){return new Js(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="LruGarbageCollector",dN=1048576;function By([t,e],[n,i]){const r=Pe(t,n);return r===0?Pe(e,i):r}class hN{constructor(e){this.Pr=e,this.buffer=new yt(By),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();By(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){se(Oy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){na(n)?se(Oy,"Ignoring IndexedDB error during garbage collection: ",n):await ta(n)}await this.Ar(3e5)})}}class pN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Fd.ce);const i=new hN(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.mr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Uy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,r,o,a,u,d,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,a=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,u=Date.now(),this.removeTargets(e,i,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(h=Date.now(),is()<=Me.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}}function mN(t,e){return new pN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.changes=new xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&pl(i.mutation,r,$n.empty(),Ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Re()){const r=lo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Xa();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=lo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Re()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Hi();const a=fl(),u=function(){return fl()}();return n.forEach((d,h)=>{const g=i.get(h.key);r.has(h.key)&&(g===void 0||g.mutation instanceof So)?o=o.insert(h.key,h):g!==void 0?(a.set(h.key,g.mutation.getFieldMask()),pl(g.mutation,h,g.mutation.getFieldMask(),Ye.now())):a.set(h.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((h,g)=>a.set(h,g)),n.forEach((h,g)=>u.set(h,new _N(g,a.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const i=fl();let r=new it((a,u)=>a-u),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const h=n.get(d);if(h===null)return;let g=i.get(d)||$n.empty();g=u.applyToLocalView(h,g),i.set(d,g);const y=(r.get(u.batchId)||Re()).add(d);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,g=d.value,y=$w();g.forEach(v=>{if(!o.has(v)){const S=Qw(n.get(v),i.get(v));S!==null&&y.set(v,S),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return Q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return vR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(lo());let u=Vl,d=o;return a.next(h=>Q.forEach(h,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Q.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{d=d.insert(g,v)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,d,h,Re())).next(g=>({batchId:u,changes:qw(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let r=Xa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Xa();return this.indexManager.getCollectionParents(e,o).next(u=>Q.forEach(u,d=>{const h=function(y,v){return new Bd(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(g=>{g.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,h)=>{const g=h.getKey();a.get(g)===null&&(a=a.insert(g,Bt.newInvalidDocument(g)))});let u=Xa();return a.forEach((d,h)=>{const g=o.get(d);g!==void 0&&pl(g.mutation,h,$n.empty(),Ye.now()),Gd(n,h)&&(u=u.insert(d,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Q.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:gi(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(r){return{name:r.name,query:lN(r.bundledQuery),readTime:gi(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.overlays=new it(de.comparator),this.Lr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=lo();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.bt(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=lo(),o=n.length+1,a=new de(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new it((h,g)=>h-g);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let g=o.get(h.largestBatchId);g===null&&(g=lo(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=lo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=r)););return Q.resolve(u)}bt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new UR(n,i));let o=this.Lr.get(n);o===void 0&&(o=Re(),this.Lr.set(n,o)),this.Lr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.kr=new yt(xt.Kr),this.qr=new yt(xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new xt(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new xt(e,n))}Qr(e,n){e.forEach(i=>this.removeReference(i,n))}Gr(e){const n=new de(new Ze([])),i=new xt(n,e),r=new xt(n,e+1),o=[];return this.qr.forEachInRange([i,r],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new de(new Ze([])),i=new xt(n,e),r=new xt(n,e+1);let o=Re();return this.qr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new xt(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return de.comparator(e.key,n.key)||Pe(e.Hr,n.Hr)}static Ur(e,n){return Pe(e.Hr,n.Hr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new yt(xt.Kr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new FR(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Jr=this.Jr.add(new xt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,n){return Q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Bm:this.Yn-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new xt(n,0),r=new xt(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,r],a=>{const u=this.Zr(a.Hr);o.push(u)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new yt(Pe);return n.forEach(r=>{const o=new xt(r,0),a=new xt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],u=>{i=i.add(u.Hr)})}),Q.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;de.isDocumentKey(o)||(o=o.child(""));const a=new xt(new de(o),0);let u=new yt(Pe);return this.Jr.forEachWhile(d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(u=u.add(d.Hr)),!0)},a),Q.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Be(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Q.forEach(n.mutations,r=>{const o=new xt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,n){const i=new xt(n,0),r=this.Jr.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.ti=e,this.docs=function(){return new it(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let i=Hi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Bt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Hi();const a=n.path,u=new de(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Z1(J1(g),i)<=0||(r.has(g.key)||Gd(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ge(9500)}ni(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new SN(this)}getSize(e){return Q.resolve(this.size)}}class SN extends gN{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.persistence=e,this.ri=new xo(n=>Hm(n),qm),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.ii=0,this.si=new Ym,this.targetCount=0,this.oi=Js._r()}forEachTarget(e,n){return this.ri.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Q.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.lr(n),Q.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ri.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n){this._i={},this.overlays={},this.ai=new Fd(0),this.ui=!1,this.ui=!0,this.ci=new EN,this.referenceDelegate=e(this),this.li=new CN(this),this.indexManager=new uN,this.remoteDocumentCache=function(r){return new xN(r)}(i=>this.referenceDelegate.hi(i)),this.serializer=new aN(n),this.Pi=new vN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new wN(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new IN(this.ai.next());return this.referenceDelegate.Ti(),i(r).next(o=>this.referenceDelegate.Ii(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,n){return Q.or(Object.values(this._i).map(i=>()=>i.containsKey(e,n)))}}class IN extends Q1{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new Ym,this.Ai=null}static Vi(e){return new Qm(e)}get di(){if(this.Ai)return this.Ai;throw ge(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(r=>this.di.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.di,i=>{const r=de.fromPath(i);return this.mi(e,r).next(o=>{o||n.removeEntry(r,Te.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ud{constructor(e,n){this.persistence=e,this.fi=new xo(i=>eR(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=mN(this,n)}static Vi(e,n){return new ud(e,n)}Ti(){}Ii(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}pr(e){let n=0;return this.mr(e,i=>{n++}).next(()=>n)}mr(e,n){return Q.forEach(this.fi,(i,r)=>this.wr(e,i,r).next(o=>o?Q.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ni(e,a=>this.wr(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Te.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Q.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ec(e.data.value)),n}wr(e,n,i){return Q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.fi.get(n);return Q.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=r}static Es(e,n){let i=Re(),r=Re();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Xm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return pP()?8:X1(hP())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.gs(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new AN;return this.ys(e,n,a).next(u=>{if(o.result=u,this.As)return this.ws(e,n,a,u.size)})}).next(()=>o.result)}ws(e,n,i,r){return i.documentReadCount<this.Vs?(is()<=Me.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(is()<=Me.DEBUG&&se("QueryEngine","Query:",rs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(is()<=Me.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(n))):Q.resolve())}gs(e,n){if(Py(n))return Q.resolve(null);let i=pi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ap(n,null,"F"),i=pi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Re(...o);return this.fs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const h=this.bs(n,u);return this.Ss(n,h,a,d.readTime)?this.gs(e,ap(n,null,"F")):this.Ds(e,h,n,d)}))})))}ps(e,n,i,r){return Py(n)||r.isEqual(Te.min())?Q.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(n,o);return this.Ss(n,a,i,r)?Q.resolve(null):(is()<=Me.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rs(n)),this.Ds(e,a,n,K1(r,Vl)).next(u=>u))})}bs(e,n){let i=new yt(Gw(e));return n.forEach((r,o)=>{Gd(e,o)&&(i=i.add(o))}),i}Ss(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ys(e,n,i){return is()<=Me.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",rs(n)),this.fs.getDocumentsMatchingQuery(e,n,Rr.min(),i)}Ds(e,n,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",RN=3e8;class NN{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.vs=new it(Pe),this.Fs=new xo(o=>Hm(o),qm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function kN(t,e,n,i){return new NN(t,e,n,i)}async function hx(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=Re();for(const h of r){a.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(h=>({Ns:h,removedBatchIds:a,addedBatchIds:u}))})})}function MN(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return function(u,d,h,g){const y=h.batch,v=y.keys();let S=Q.resolve();return v.forEach(b=>{S=S.next(()=>g.getEntry(d,b)).next(M=>{const O=h.docVersions.get(b);Be(O!==null,48541),M.version.compareTo(O)<0&&(y.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),g.addEntry(M)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=Re();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fx(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function LN(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});r=n.vs;const u=[];e.targetChanges.forEach((g,y)=>{const v=r.get(y);if(!v)return;u.push(n.li.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.li.addMatchingKeys(o,g.addedDocuments,y)));let S=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Lt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),r=r.insert(y,S),function(M,O,N){return M.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=RN?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(v,S,g)&&u.push(n.li.updateTargetData(o,S))});let d=Hi(),h=Re();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(DN(o,a,e.documentUpdates).next(g=>{d=g.Bs,h=g.Ls})),!i.isEqual(Te.min())){const g=n.li.getLastRemoteSnapshotVersion(o).next(y=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return Q.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,h)).next(()=>d)}).then(o=>(n.vs=r,o))}function DN(t,e,n){let i=Re(),r=Re();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Hi();return n.forEach((u,d)=>{const h=o.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Te.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):se(jm,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)}),{Bs:a,Ls:r}})}function bN(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function VN(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.li.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.li.allocateTargetId(i).next(a=>(r=new hr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i})}async function hp(t,e,n){const i=Ee(t),r=i.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!na(a))throw a;se(jm,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function zy(t,e,n){const i=Ee(t);let r=Te.min(),o=Re();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,h,g){const y=Ee(d),v=y.Fs.get(g);return v!==void 0?Q.resolve(y.vs.get(v)):y.li.getTargetData(h,g)}(i,a,pi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?r:Te.min(),n?o:Re())).next(u=>(FN(i,wR(e),u),{documents:u,ks:o})))}function FN(t,e,n){let i=t.Ms.get(e)||Te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Ms.set(e,i)}class Gy{constructor(){this.activeTargetIds=PR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UN{constructor(){this.vo=new Gy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Gy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="ConnectivityMonitor";class qy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){se(Hy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){se(Hy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc=null;function fp(){return tc===null?tc=function(){return 268435456+Math.round(2147483648*Math.random())}():tc++,"0x"+tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="RestConnection",BN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class zN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===nd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const a=fp(),u=this.Qo(e,n.toUriEncodedString());se(Yh,`Sending RPC '${e}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,r,o);const{host:h}=new URL(u),g=bm(h);return this.zo(e,u,d,i,g).then(y=>(se(Yh,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Hs(Yh,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",i),y})}jo(e,n,i,r,o,a){return this.Wo(e,n,i,r,o)}Go(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Qo(e,n){const i=BN[e];let r=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection",qa=(t,e,n)=>{t.listen(e,i=>{try{n(i)}catch(r){setTimeout(()=>{throw r},0)}})};class Rs extends zN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Rs.c_){const e=yw();qa(e,_w.STAT_EVENT,n=>{n.stat===tp.PROXY?se(Ft,"STAT_EVENT: detected buffering proxy"):n.stat===tp.NOPROXY&&se(Ft,"STAT_EVENT: detected no buffering proxy")}),Rs.c_=!0}}zo(e,n,i,r,o){const a=fp();return new Promise((u,d)=>{const h=new mw;h.setWithCredentials(!0),h.listenOnce(gw.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Tc.NO_ERROR:const y=h.getResponseJson();se(Ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case Tc.TIMEOUT:se(Ft,`RPC '${e}' ${a} timed out`),d(new ce(j.DEADLINE_EXCEEDED,"Request time out"));break;case Tc.HTTP_ERROR:const v=h.getStatus();if(se(Ft,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const b=S==null?void 0:S.error;if(b&&b.status&&b.message){const M=function(N){const R=N.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(R)>=0?R:j.UNKNOWN}(b.status);d(new ce(M,b.message))}else d(new ce(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new ce(j.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{se(Ft,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(r);se(Ft,`RPC '${e}' ${a} sending request:`,r),h.send(n,"POST",g,i,15)})}T_(e,n,i){const r=fp(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const h=o.join("");se(Ft,`Creating RPC '${e}' stream ${r}: ${h}`,u);const g=a.createWebChannel(h,u);this.I_(g);let y=!1,v=!1;const S=new GN({Ho:b=>{v?se(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(y||(se(Ft,`Opening RPC '${e}' stream ${r} transport.`),g.open(),y=!0),se(Ft,`RPC '${e}' stream ${r} sending:`,b),g.send(b))},Jo:()=>g.close()});return qa(g,Qa.EventType.OPEN,()=>{v||(se(Ft,`RPC '${e}' stream ${r} transport opened.`),S.i_())}),qa(g,Qa.EventType.CLOSE,()=>{v||(v=!0,se(Ft,`RPC '${e}' stream ${r} transport closed`),S.o_(),this.E_(g))}),qa(g,Qa.EventType.ERROR,b=>{v||(v=!0,Hs(Ft,`RPC '${e}' stream ${r} transport errored. Name:`,b.name,"Message:",b.message),S.o_(new ce(j.UNAVAILABLE,"The operation could not be completed")))}),qa(g,Qa.EventType.MESSAGE,b=>{var M;if(!v){const O=b.data[0];Be(!!O,16349);const N=O,R=(N==null?void 0:N.error)||((M=N[0])==null?void 0:M.error);if(R){se(Ft,`RPC '${e}' stream ${r} received error:`,R);const I=R.status;let z=function(D){const A=dt[D];if(A!==void 0)return jw(A)}(I),K=R.message;z===void 0&&(z=j.INTERNAL,K="Unknown error status: "+I+" with message "+R.message),v=!0,S.o_(new ce(z,K)),g.close()}else se(Ft,`RPC '${e}' stream ${r} received:`,O),S.__(O)}}),Rs.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return vw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){return new Rs(t)}function Qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){return new KR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs.c_=!1;class px{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=r,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="PersistentStream";class mx{constructor(e,n,i,r,o,a,u,d){this.Ci=e,this.b_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new px(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new ce(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.H_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se($y,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(se($y,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qN extends mx{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YR(this.serializer,e),i=function(o){if(!("targetChange"in o))return Te.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?gi(a.readTime):Te.min()}(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=dp(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=sp(d)?{documents:jR(o,d)}:{query:eN(o,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=nx(o,a.resumeToken);const h=lp(o,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Te.min())>0){u.readTime=ld(o,a.snapshotVersion.toTimestamp());const h=lp(o,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const i=nN(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=dp(this.serializer),n.removeTarget=e,this.K_(n)}}class $N extends mx{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XR(e.writeResults,e.commitTime),i=gi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=dp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>QR(this.serializer,i))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{}class KN extends WN{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,up(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(j.UNKNOWN,o.toString())})}jo(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.jo(e,up(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(j.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function JN(t,e,n,i){return new KN(t,e,n,i)}class ZN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gi(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class YN{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{Co(this)&&(se(yo,"Restarting streams for network reachability change."),await async function(d){const h=Ee(d);h.Ea.add(4),await Ql(h),h.Va.set("Unknown"),h.Ea.delete(4),await Kd(h)}(this))})}),this.Va=new ZN(i,r)}}async function Kd(t){if(Co(t))for(const e of t.Ra)await e(!0)}async function Ql(t){for(const e of t.Ra)await e(!1)}function gx(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ig(n)?ng(n):ia(n).O_()&&tg(n,e))}function eg(t,e){const n=Ee(t),i=ia(n);n.Ia.delete(e),i.O_()&&_x(n,e),n.Ia.size===0&&(i.O_()?i.L_():Co(n)&&n.Va.set("Unknown"))}function tg(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ia(t).Z_(e)}function _x(t,e){t.da.$e(e),ia(t).X_(e)}function ng(t){t.da=new HR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ia(t).start(),t.Va.ua()}function ig(t){return Co(t)&&!ia(t).x_()&&t.Ia.size>0}function Co(t){return Ee(t).Ea.size===0}function yx(t){t.da=void 0}async function QN(t){t.Va.set("Online")}async function XN(t){t.Ia.forEach((e,n)=>{tg(t,e)})}async function jN(t,e){yx(t),ig(t)?(t.Va.ha(e),ng(t)):t.Va.set("Unknown")}async function ek(t,e,n){if(t.Va.set("Online"),e instanceof tx&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.da.removeTarget(u))}(t,e)}catch(i){se(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cd(t,i)}else if(e instanceof Sc?t.da.Xe(e):e instanceof ex?t.da.st(e):t.da.tt(e),!n.isEqual(Te.min()))try{const i=await fx(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.da.Tt(a);return u.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(h);g&&o.Ia.set(h,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,h)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(Lt.EMPTY_BYTE_STRING,g.snapshotVersion)),_x(o,d);const y=new hr(g.target,d,h,g.sequenceNumber);tg(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se(yo,"Failed to raise snapshot:",i),await cd(t,i)}}async function cd(t,e,n){if(!na(e))throw e;t.Ea.add(1),await Ql(t),t.Va.set("Offline"),n||(n=()=>fx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(yo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Kd(t)})}function vx(t,e){return e().catch(n=>cd(t,n,e))}async function Jd(t){const e=Ee(t),n=Lr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bm;for(;tk(e);)try{const r=await bN(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,nk(e,r)}catch(r){await cd(e,r)}Tx(e)&&Ex(e)}function tk(t){return Co(t)&&t.Ta.length<10}function nk(t,e){t.Ta.push(e);const n=Lr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Tx(t){return Co(t)&&!Lr(t).x_()&&t.Ta.length>0}function Ex(t){Lr(t).start()}async function ik(t){Lr(t).ra()}async function rk(t){const e=Lr(t);for(const n of t.Ta)e.ea(n.mutations)}async function ok(t,e,n){const i=t.Ta.shift(),r=Km.from(i,e,n);await vx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Jd(t)}async function sk(t,e){e&&Lr(t).Y_&&await async function(i,r){if(function(a){return BR(a)&&a!==j.ABORTED}(r.code)){const o=i.Ta.shift();Lr(i).B_(),await vx(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Jd(i)}}(t,e),Tx(t)&&Ex(t)}async function Wy(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),se(yo,"RemoteStore received new credentials");const i=Co(n);n.Ea.add(3),await Ql(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Kd(n)}async function ak(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Kd(n)):e||(n.Ea.add(2),await Ql(n),n.Va.set("Unknown"))}function ia(t){return t.ma||(t.ma=function(n,i,r){const o=Ee(n);return o.sa(),new qN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Zo:QN.bind(null,t),Yo:XN.bind(null,t),t_:jN.bind(null,t),J_:ek.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),ig(t)?ng(t):t.Va.set("Unknown")):(await t.ma.stop(),yx(t))})),t.ma}function Lr(t){return t.fa||(t.fa=function(n,i,r){const o=Ee(n);return o.sa(),new $N(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:ik.bind(null,t),t_:sk.bind(null,t),ta:rk.bind(null,t),na:ok.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Jd(t)):(await t.fa.stop(),t.Ta.length>0&&(se(yo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new rg(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(t,e){if(Gi("AsyncQueue",`${e}: ${t}`),na(t))return new ce(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{static emptySet(e){return new Ns(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=Xa(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ns;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.ga=new it(de.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Zs{constructor(e,n,i,r,o,a,u,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Zs(e,n,Ns.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class uk{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ee(n),o=r.queries;r.queries=Jy(),o.forEach((a,u)=>{for(const d of u.ba)d.onError(i)})})(this,new ce(j.ABORTED,"Firestore shutting down"))}}function Jy(){return new xo(t=>zw(t),zd)}async function ck(t,e){const n=Ee(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.Da()&&(i=2):(o=new lk,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=og(a,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&sg(n)}async function dk(t,e){const n=Ee(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?r=e.Da()?0:1:!o.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function hk(t,e){const n=Ee(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.ba)u.Fa(r)&&(i=!0);a.wa=r}}i&&sg(n)}function fk(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const o of r.ba)o.onError(n);i.queries.delete(e)}function sg(t){t.Ca.forEach(e=>{e.next()})}var pp,Zy;(Zy=pp||(pp={})).Ma="default",Zy.Cache="cache";class pk{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Zs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.key=e}}class xx{constructor(e){this.key=e}}class mk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Re(),this.mutatedKeys=Re(),this.eu=Gw(e),this.tu=new Ns(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Ky,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,y)=>{const v=r.get(g),S=Gd(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;v&&S?v.data.isEqual(S.data)?b!==M&&(i.track({type:3,doc:S}),O=!0):this.su(v,S)||(i.track({type:2,doc:S}),O=!0,(d&&this.eu(S,d)>0||h&&this.eu(S,h)<0)&&(u=!0)):!v&&S?(i.track({type:0,doc:S}),O=!0):v&&!S&&(i.track({type:1,doc:v}),O=!0,(d||h)&&(u=!0)),O&&(S?(a=a.add(S),o=M?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:a,iu:i,Ss:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((g,y)=>function(S,b){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:O})}};return M(S)-M(b)}(g.type,y.type)||this.eu(g.doc,y.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],d=this.Ya.size===0&&this.current&&!r?1:0,h=d!==this.Xa;return this.Xa=d,a.length!==0||h?{snapshot:new Zs(this.query,e.tu,o,a,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ky,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Re(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new xx(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new wx(i))}),n}cu(e){this.Za=e.ks,this.Ya=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ag="SyncEngine";class gk{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class _k{constructor(e){this.key=e,this.hu=!1}}class yk{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xo(u=>zw(u),zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new it(de.comparator),this.Au=new Map,this.Vu=new Ym,this.du={},this.mu=new Map,this.fu=Js.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vk(t,e,n=!0){const i=Rx(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await Sx(i,e,n,!0),r}async function Tk(t,e){const n=Rx(t);await Sx(n,e,!0,!1)}async function Sx(t,e,n,i){const r=await VN(t.localStore,pi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await Ek(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&gx(t.remoteStore,r),u}async function Ek(t,e,n,i,r){t.pu=(y,v,S)=>async function(M,O,N,R){let I=O.view.ru(N);I.Ss&&(I=await zy(M.localStore,O.query,!1).then(({documents:D})=>O.view.ru(D,I)));const z=R&&R.targetChanges.get(O.targetId),K=R&&R.targetMismatches.get(O.targetId)!=null,Y=O.view.applyChanges(I,M.isPrimaryClient,z,K);return Qy(M,O.targetId,Y.au),Y.snapshot}(t,y,v,S);const o=await zy(t.localStore,e,!0),a=new mk(e,o.ks),u=a.ru(o.documents),d=Yl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(u,t.isPrimaryClient,d);Qy(t,n,h.au);const g=new gk(e,n,a);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function wk(t,e,n){const i=Ee(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!zd(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await hp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&eg(i.remoteStore,r.targetId),mp(i,r.targetId)}).catch(ta)):(mp(i,r.targetId),await hp(i.localStore,r.targetId,!0))}async function xk(t,e){const n=Ee(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),eg(n.remoteStore,i.targetId))}async function Sk(t,e,n){const i=kk(t);try{const r=await function(a,u){const d=Ee(a),h=Ye.now(),g=u.reduce((S,b)=>S.add(b.key),Re());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let b=Hi(),M=Re();return d.xs.getEntries(S,g).next(O=>{b=O,b.forEach((N,R)=>{R.isValidDocument()||(M=M.add(N))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,b)).next(O=>{y=O;const N=[];for(const R of u){const I=bR(R,y.get(R.key).overlayedDocument);I!=null&&N.push(new So(R.key,I,Lw(I.value.mapValue),mi.exists(!0)))}return d.mutationQueue.addMutationBatch(S,h,N,u)}).next(O=>{v=O;const N=O.applyToLocalDocumentSet(y,M);return d.documentOverlayCache.saveOverlays(S,O.batchId,N)})}).then(()=>({batchId:v.batchId,changes:qw(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let h=a.du[a.currentUser.toKey()];h||(h=new it(Pe)),h=h.insert(u,d),a.du[a.currentUser.toKey()]=h}(i,r.batchId,n),await Xl(i,r.changes),await Jd(i.remoteStore)}catch(r){const o=og(r,"Failed to persist write");n.reject(o)}}async function Cx(t,e){const n=Ee(t);try{const i=await LN(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Be(a.hu,14607):r.removedDocuments.size>0&&(Be(a.hu,42227),a.hu=!1))}),await Xl(n,i,e)}catch(i){await ta(i)}}function Yy(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ee(a);d.onlineState=u;let h=!1;d.queries.forEach((g,y)=>{for(const v of y.ba)v.va(u)&&(h=!0)}),h&&sg(d)}(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ck(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new it(de.comparator);a=a.insert(o,Bt.newNoDocument(o,Te.min()));const u=Re().add(o),d=new $d(Te.min(),new Map,new it(Pe),a,u);await Cx(i,d),i.Ru=i.Ru.remove(o),i.Au.delete(e),lg(i)}else await hp(i.localStore,e,!1).then(()=>mp(i,e,n)).catch(ta)}async function Ik(t,e){const n=Ee(t),i=e.batch.batchId;try{const r=await MN(n.localStore,e);Ax(n,i,null),Ix(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xl(n,r)}catch(r){await ta(r)}}async function Ak(t,e,n){const i=Ee(t);try{const r=await function(a,u){const d=Ee(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return d.mutationQueue.lookupMutationBatch(h,u).next(y=>(Be(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(h,y))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>d.localDocuments.getDocuments(h,g))})}(i.localStore,e);Ax(i,e,n),Ix(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xl(i,r)}catch(r){await ta(r)}}function Ix(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Ax(t,e,n){const i=Ee(t);let r=i.du[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(i=>{t.Vu.containsKey(i)||Px(t,i)})}function Px(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(eg(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),lg(t))}function Qy(t,e,n){for(const i of n)i instanceof wx?(t.Vu.addReference(i.key,e),Pk(t,i)):i instanceof xx?(se(ag,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||Px(t,i.key)):ge(19791,{wu:i})}function Pk(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(se(ag,"New document in limbo: "+n),t.Eu.add(i),lg(t))}function lg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(Ze.fromString(e)),i=t.fu.next();t.Au.set(i,new _k(n)),t.Ru=t.Ru.insert(n,i),gx(t.remoteStore,new hr(pi(Bw(n.path)),i,"TargetPurposeLimboResolution",Fd.ce))}}async function Xl(t,e,n){const i=Ee(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,d)=>{a.push(i.pu(d,e,n).then(h=>{var g;if((h||n)&&i.isPrimaryClient){const y=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(h){r.push(h);const y=Xm.Es(d.targetId,h);o.push(y)}}))}),await Promise.all(a),i.Pu.J_(r),await async function(d,h){const g=Ee(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(h,v=>Q.forEach(v.Ts,S=>g.persistence.referenceDelegate.addReference(y,v.targetId,S)).next(()=>Q.forEach(v.Is,S=>g.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))}catch(y){if(!na(y))throw y;se(jm,"Failed to update sequence numbers: "+y)}for(const y of h){const v=y.targetId;if(!y.fromCache){const S=g.vs.get(v),b=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(b);g.vs=g.vs.insert(v,M)}}}(i.localStore,o))}async function Rk(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){se(ag,"User change. New user:",e.toKey());const i=await hx(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(d=>{d.reject(new ce(j.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xl(n,i.Ns)}}function Nk(t,e){const n=Ee(t),i=n.Au.get(e);if(i&&i.hu)return Re().add(i.key);{let r=Re();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function Rx(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ck.bind(null,e),e.Pu.J_=hk.bind(null,e.eventManager),e.Pu.yu=fk.bind(null,e.eventManager),e}function kk(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ik.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ak.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kN(this.persistence,new PN,e.initialUser,this.serializer)}Cu(e){return new dx(Qm.Vi,this.serializer)}Du(e){return new UN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class Mk extends dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Be(this.persistence.referenceDelegate instanceof ud,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new fN(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new dx(i=>ud.Vi(i,n),this.serializer)}}class gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rk.bind(null,this.syncEngine),await ak(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uk}()}createDatastore(e){const n=Wd(e.databaseInfo.databaseId),i=HN(e.databaseInfo);return JN(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new YN(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Yy(this.syncEngine,n,0),function(){return qy.v()?new qy:new ON}())}createSyncEngine(e,n){return function(r,o,a,u,d,h,g){const y=new yk(r,o,a,u,d,h);return g&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ee(r);se(yo,"RemoteStore shutting down."),o.Ea.add(5),await Ql(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gp.provider={build:()=>new gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class Dk{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se(Dr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se(Dr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=og(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Xh(t,e){t.asyncQueue.verifyOperationInProgress(),se(Dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await hx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bk(t);se(Dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Wy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Wy(e.remoteStore,r)),t._onlineComponents=e}async function bk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Dr,"Using user provided OfflineComponentProvider");try{await Xh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Hs("Error using user provided cache. Falling back to memory cache: "+n),await Xh(t,new dd)}}else se(Dr,"Using default OfflineComponentProvider"),await Xh(t,new Mk(void 0));return t._offlineComponents}async function Nx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Dr,"Using user provided OnlineComponentProvider"),await Xy(t,t._uninitializedComponentsProvider._online)):(se(Dr,"Using default OnlineComponentProvider"),await Xy(t,new gp))),t._onlineComponents}function Vk(t){return Nx(t).then(e=>e.syncEngine)}async function Fk(t){const e=await Nx(t),n=e.eventManager;return n.onListen=vk.bind(null,e.syncEngine),n.onUnlisten=wk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Tk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xk.bind(null,e.syncEngine),n}function Uk(t,e,n={}){const i=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,d,h){const g=new Lk({next:v=>{g.Nu(),a.enqueueAndForget(()=>dk(o,y)),v.fromCache&&d.source==="server"?h.reject(new ce(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new pk(u,g,{includeMetadataChanges:!0,Ka:!0});return ck(o,y)}(await Fk(t),t.asyncQueue,e,n,i)),i.promise}function Ok(t,e){const n=new Cr;return t.asyncQueue.enqueueAndForget(async()=>Sk(await Vk(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="ComponentProvider",jy=new Map;function zk(t,e,n,i,r){return new iR(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,kx(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="firestore.googleapis.com",ev=!0;class tv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mx,this.ssl=ev}else this.host=e.host,this.ssl=e.ssl??ev;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dN)throw new ce(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kx(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new V1;switch(i.type){case"firstParty":return new B1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=jy.get(n);i&&(se(Bk,"Removing Datastore"),jy.delete(n),i.terminate())}(this),Promise.resolve()}}function Gk(t,e,n,i={}){var h;t=$s(t,Zd);const r=bm(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(aP(`https://${u}`),dP("Firestore",!0)),o.host!==Mx&&o.host!==u&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:r,emulatorOptions:i};if(!jc(d,a)&&(t._setSettings(d),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=Ut.MOCK_USER;else{g=lP(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ce(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ut(v)}t._authCredentials=new F1(new Ew(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yd(this.firestore,e,this._query)}}class Ct{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Jl(n,Ct._jsonSchema))return new Ct(e,i||null,new de(Ze.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:ft("string",Ct._jsonSchemaVersion),referencePath:ft("string")};class Ir extends Yd{constructor(e,n,i){super(e,n,Bw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new de(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function Hk(t,e,...n){if(t=Ml(t),ww("collection","path",e),t instanceof Zd){const i=Ze.fromString(e,...n);return my(i),new Ir(t,null,i)}{if(!(t instanceof Ct||t instanceof Ir))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ze.fromString(e,...n));return my(i),new Ir(t.firestore,null,i)}}function Lx(t,e,...n){if(t=Ml(t),arguments.length===1&&(e=Um.newId()),ww("doc","path",e),t instanceof Zd){const i=Ze.fromString(e,...n);return py(i),new Ct(t,null,new de(i))}{if(!(t instanceof Ct||t instanceof Ir))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ze.fromString(e,...n));return py(i),new Ct(t.firestore,t instanceof Ir?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="AsyncQueue";class iv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new px(this,"async_queue_retry"),this._c=()=>{const i=Qh();i&&se(nv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Qh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Cr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;se(nv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",rv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=rg.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&ge(47125,{Pc:rv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Qd extends Zd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new iv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iv(e),this._firestoreClient=void 0,await e}}}function qk(t,e){const n=typeof t=="object"?t:E1(),i=typeof t=="string"?t:nd,r=g1(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=oP("firestore");o&&Gk(r,...o)}return r}function Dx(t){if(t._terminated)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$k(t),t._firestoreClient}function $k(t){var i,r,o,a;const e=t._freezeSettings(),n=zk(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(r=t._app)==null?void 0:r.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Dk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Lt.fromBase64String(e))}catch(n){throw new ce(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jl(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:ft("string",Rn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(Jl(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:ft("string",_i._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jl(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jn(e.vectorValues);throw new ce(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:ft("string",Jn._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=/^__.*__$/;class Kk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(e,this.data,n,this.fieldTransforms)}}function Fx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{dataSource:t})}}class ug{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Fx(this.dataSource)&&Wk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Jk{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Wd(e)}createContext(e,n,i,r=!1){return new ug({dataSource:e,methodName:n,targetDoc:i,path:Nt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zk(t){const e=t._freezeSettings(),n=Wd(t._databaseId);return new Jk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yk(t,e,n,i,r,o={}){const a=t.createContext(o.merge||o.mergeFields?2:0,e,n,r);zx("Data must be an object, but it was:",a,i);const u=Ox(i,a);let d,h;if(o.merge)d=new $n(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=cg(e,y,n);if(!a.contains(v))throw new ce(j.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);jk(g,v)||g.push(v)}d=new $n(g),h=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,h=a.fieldTransforms;return new Kk(new Pn(u),d,h)}function Ux(t,e){if(Bx(t=Ml(t)))return zx("Unsupported field value:",e,t),Ox(t,e);if(t instanceof Vx)return function(i,r){if(!Fx(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=Ux(u,r.childContextForArray(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ml(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ye.fromDate(i);return{timestampValue:ld(r.serializer,o)}}if(i instanceof Ye){const o=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ld(r.serializer,o)}}if(i instanceof _i)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:nx(r.serializer,i._byteString)};if(i instanceof Ct){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Zm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Jn)return function(a,u){const d=a instanceof Jn?a.toArray():a;return{mapValue:{fields:{[kw]:{stringValue:Mw},[id]:{arrayValue:{values:d.map(g=>{if(typeof g!="number")throw u.createError("VectorValues must only contain numeric values.");return $m(u.serializer,g)})}}}}}}(i,r);if(ux(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Om(i)}`)}(t,e)}function Ox(t,e){const n={};return Cw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(i,r)=>{const o=Ux(r,e.childContextForField(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function Bx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof _i||t instanceof Rn||t instanceof Ct||t instanceof Vx||t instanceof Jn||ux(t))}function zx(t,e,n){if(!Bx(n)||!xw(n)){const i=Om(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function cg(t,e,n){if((e=Ml(e))instanceof bx)return e._internalPath;if(typeof e=="string")return Xk(t,e);throw hd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Qk=new RegExp("[~\\*/\\[\\]]");function Xk(t,e,n){if(e.search(Qk)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bx(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new ce(j.INVALID_ARGUMENT,u+t+d)}function jk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return wo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[id].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>at(a.doubleValue));return new Jn(n)}convertGeoPoint(e){return new _i(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Od(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ze.fromString(e);Be(lx(i),9688,{name:e});const r=new Ul(i.get(1),i.get(3)),o=new de(i.popFirst(5));return r.isEqual(n)||Gi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM extends eM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}const ov="@firebase/firestore",sv="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(cg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nM extends Gx{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function rM(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ks extends Gx{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(cg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ks._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",ks._jsonSchema={type:ft("string",ks._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class Cc extends ks{data(e={}){return super.data(e)}}class Ms{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new nc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Cc(this._firestore,this._userDataWriter,i.key,i,new nc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new Cc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new nc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new Cc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new nc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,g=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:oM(u.type),doc:d,oldIndex:h,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ms._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:ft("string",Ms._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};function sM(t){t=$s(t,Yd);const e=$s(t.firestore,Qd),n=Dx(e),i=new tM(e);return iM(t._query),Uk(n,t._query).then(r=>new Ms(e,i,t,r))}function aM(t,e,n){t=$s(t,Ct);const i=$s(t.firestore,Qd),r=rM(t.converter,e),o=Zk(i);return Hx(i,[Yk(o,"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,mi.none())])}function lM(t){return Hx($s(t.firestore,Qd),[new Wm(t._key,mi.none())])}function Hx(t,e){const n=Dx(t);return Ok(n,e)}(function(e,n=!0){b1(T1),ed(new Ll("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Qd(new U1(i.getProvider("auth-internal")),new z1(a,i.getProvider("app-check-internal")),rR(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ps(ov,sv,e),Ps(ov,sv,"esm2020")})();var ns={};const _p={apiKey:ns.VITE_FIREBASE_API_KEY||"AIzaSyCAdwbA5u0oLe0m6oKryKwHx1XBiDEWnrk",authDomain:ns.VITE_FIREBASE_AUTH_DOMAIN||"izbb-taxi-management.firebaseapp.com",projectId:ns.VITE_FIREBASE_PROJECT_ID||"izbb-taxi-management",storageBucket:ns.VITE_FIREBASE_STORAGE_BUCKET||"izbb-taxi-management.firebasestorage.app",messagingSenderId:ns.VITE_FIREBASE_MESSAGING_SENDER_ID||"956551883987",appId:ns.VITE_FIREBASE_APP_ID||"1:956551883987:web:3f6bc14aad0c026f357826"},qx=_p.apiKey&&_p.apiKey!=="BURAYA_API_KEY_GELECEK";let jh,$x;if(qx)try{const t=w1();t.length===0?jh=dw(_p):jh=t[0],$x=qk(jh),console.log("Firebase baaryla balatld.")}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn("Firebase yaplandrmas yaplmam.");const av=$x,dg="taxi_stands",hg=()=>{if(!qx)throw new Error("Ltfen 'services/firebaseConfig.ts' dosyasn ap Firebase ayarlarnz giriniz. (apiKey, projectId vb.)");if(!av)throw new Error("Firebase veritaban balants balatlamad. API anahtarlarnz ve internet balantnz kontrol edin.");return av},uM=async()=>{const t=hg();try{const e=await sM(Hk(t,dg)),n=[];return e.forEach(i=>{n.push(i.data())}),n}catch(e){throw console.error("getStands Error:",e),e}},fd=async t=>{const e=hg(),n=Lx(e,dg,t.id);await aM(n,t)},cM=async t=>{const e=hg();await lM(Lx(e,dg,t))},yp=(t,e)=>{var a,u,d,h;const n=[];if(["name","phone","city","district","neighborhood","street","address","capacity","ukomeDecisionNo","ukomeDate","ukomeSummary","status","officeType","responsibility","notes"].forEach(g=>{const y=String(t[g]||"").trim(),v=String(e[g]||"").trim();if(y!==v){if(!t[g]&&!e[g])return;n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:g,oldValue:y||"(Bo)",newValue:v||"(Bo)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}}),((a=t.location)==null?void 0:a.lat)!==((u=e.location)==null?void 0:u.lat)||((d=t.location)==null?void 0:d.lng)!==((h=e.location)==null?void 0:h.lng)){const g=t.location?`${t.location.lat}, ${t.location.lng}`:"(Konum Yok)",y=e.location?`${e.location.lat}, ${e.location.lng}`:"(Konum Yok)";g!==y&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"location",oldValue:g,newValue:y,changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate})}const r=(t.plates||[]).sort().join(", "),o=(e.plates||[]).sort().join(", ");return r!==o&&n.push({id:Date.now().toString()+Math.random().toString(),timestamp:new Date().toISOString(),fieldName:"plates",oldValue:r||"(Plaka Yok)",newValue:o||"(Plaka Yok)",changedBy:"Admin",relatedUkomeNo:e.ukomeDecisionNo,relatedUkomeDate:e.ukomeDate}),n};var vp=(t=>(t.ACTIVE="Aktif",t.PASSIVE="Pasif",t.PENDING="Onay Bekliyor",t))(vp||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Fe=(t,e)=>{const n=me.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:d,...h},g)=>me.createElement("svg",{ref:g,...dM,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${hM(t)}`,u].join(" "),...h},[...e.map(([y,v])=>me.createElement(y,v)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=Fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=Fe("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=Fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=Fe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Fe("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=Fe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=Fe("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=Fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Fe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=Fe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=Fe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=Fe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=Fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=Fe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=Fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=Fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=Fe("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var PM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RM,NM;function kM(){return{geminiUrl:RM,vertexUrl:NM}}function MM(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const a=kM();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(o=a.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wi{}function re(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let h=0;h<d.length;h++){const g=d[h];f(g,e.slice(o+1),n[h])}else for(const h of d)f(h,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];f(d[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(u=>c(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function LM(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),a=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&o.length>u)for(let d=u;d<o.length;d++){const h=o[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&a.add(h)}xp(t,r,o,0,a)}}function xp(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])xp(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(h=>!h.startsWith("_")&&!r.has(h)),d={};for(const h of u)d[h]=a[h];for(const[h,g]of Object.entries(d)){const y=[];for(const v of n.slice(i))v==="*"?y.push(h):y.push(v);f(a,y,g)}for(const h of u)delete a[h]}}else{const a=t;o in a&&xp(a[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DM(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function bM(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&f(e,["response"],FM(a)),e}function VM(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],UM(a)),e}function FM(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>OM(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function UM(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>BM(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function OM(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],WM(n)),e}function BM(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],KM(n)),e}function zM(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function GM(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function HM(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],qM(a)),e}function qM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function Xx(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],$M(a)),e}function $M(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function WM(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],fg(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function KM(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],fg(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dv||(dv={}));var hv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(hv||(hv={}));var fv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fv||(fv={}));var fr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(fr||(fr={}));var pv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pv||(pv={}));var mv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(mv||(mv={}));var gv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gv||(gv={}));var _v;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(_v||(_v={}));var yv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(yv||(yv={}));var vv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vv||(vv={}));var Tv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Tv||(Tv={}));var Ev;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Ev||(Ev={}));var wv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wv||(wv={}));var xv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(xv||(xv={}));var Sv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Sv||(Sv={}));var Cv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Cv||(Cv={}));var Iv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Iv||(Iv={}));var Av;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Av||(Av={}));var Pv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Pv||(Pv={}));var Rv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Rv||(Rv={}));var Nv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Nv||(Nv={}));var md;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(md||(md={}));var kv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kv||(kv={}));var Mv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Mv||(Mv={}));var Lv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Lv||(Lv={}));var Sp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Sp||(Sp={}));var Dv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Dv||(Dv={}));var bv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(bv||(bv={}));var Cp;(function(t){t.COLLECTION="COLLECTION"})(Cp||(Cp={}));var Vv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Vv||(Vv={}));var Fv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fv||(Fv={}));var Uv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Uv||(Uv={}));var Ov;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ov||(Ov={}));var Bv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Bv||(Bv={}));var zv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zv||(zv={}));var Gv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gv||(Gv={}));var Hv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Hv||(Hv={}));var qv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qv||(qv={}));var $v;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})($v||($v={}));var Wv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Wv||(Wv={}));var Kv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Kv||(Kv={}));var Jv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Jv||(Jv={}));var Zv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Zv||(Zv={}));var Yv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Yv||(Yv={}));var Qv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Qv||(Qv={}));var Xv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Xv||(Xv={}));var jv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(jv||(jv={}));var e0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(e0||(e0={}));var t0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(t0||(t0={}));var n0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(n0||(n0={}));var i0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(i0||(i0={}));var r0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(r0||(r0={}));var o0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(o0||(o0={}));var s0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(s0||(s0={}));var a0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(a0||(a0={}));var l0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(l0||(l0={}));var Ts;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ts||(Ts={}));class Ip{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class $a{get text(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const y=[];for(const v of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[S,b]of Object.entries(v))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(b!==null||b!==void 0)&&y.push(S);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;g=!0,h+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const y of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,S]of Object.entries(y))v!=="inlineData"&&(S!==null||S!==void 0)&&g.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(h+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,r,o,a,u,d,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,r,o,a,u,d,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.output}}class u0{}class c0{}class JM{}class ZM{}class YM{}class QM{}class d0{}class h0{}class f0{}class XM{}class gd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new gd;let r;const o=e;return n?r=VM(o):r=bM(o),Object.assign(i,r),i}}class p0{}class m0{}class g0{}class _0{}class jM{}class e2{}class t2{}class pg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new pg,o=HM(e);return Object.assign(i,o),i}}class n2{}class i2{}class r2{}class y0{}class o2{get text(){var e,n,i;let r="",o=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(u))d!=="text"&&d!=="thought"&&h!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&o.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class s2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class mg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new mg,o=Xx(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jx(t,e){const n=Ve(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function eS(t){return Array.isArray(t)?t.map(e=>_d(e)):[_d(t)]}function _d(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function tS(t){const e=_d(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nS(t){const e=_d(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function v0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function iS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>v0(e)):[v0(t)]}function Ap(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function T0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function E0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function zt(t){if(t==null)throw new Error("ContentUnion is required");return Ap(t)?t:{role:"user",parts:iS(t)}}function gg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=zt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=zt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>zt(n)):[zt(e)]}function Mn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(T0(t)||E0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zt(t)]}const e=[],n=[],i=Ap(t[0]);for(const r of t){const o=Ap(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(T0(r)||E0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:iS(n)}),e}function a2(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(fr).includes(n[0].toUpperCase())?n[0].toUpperCase():fr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(fr).includes(i.toUpperCase())?i.toUpperCase():fr.TYPE_UNSPECIFIED})}}function Ds(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&a2(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(fr).includes(u.toUpperCase())?u.toUpperCase():fr.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ds(u);else if(i.includes(a)){const d=[];for(const h of u){if(h.type=="null"){e.nullable=!0;continue}d.push(Ds(h))}e[a]=d}else if(r.includes(a)){const d={};for(const[h,g]of Object.entries(u))d[h]=Ds(g);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function _g(t){return Ds(t)}function yg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function vg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ra(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ds(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ds(e.response));return t}function oa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function l2(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ki(t,e){if(typeof e!="string")throw new Error("name must be a string");return l2(t,e,"cachedContents")}function rS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ur(t){return fg(t)}function u2(t){return t!=null&&typeof t=="object"&&"name"in t}function c2(t){return t!=null&&typeof t=="object"&&"video"in t}function d2(t){return t!=null&&typeof t=="object"&&"uri"in t}function oS(t){var e;let n;if(u2(t)&&(n=t.name),!(d2(t)&&(n=t.uri,n===void 0))&&!(c2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function sS(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function aS(t){for(const e of["models","tunedModels","publisherModels"])if(h2(t,e))return t[e];return[]}function h2(t,e){return t!==null&&typeof t=="object"&&e in t}function f2(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function p2(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const a=f2(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function lS(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function m2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function uS(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function sa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function cS(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Y2(a))),f(e,["inlinedResponses"],o)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["inlinedEmbedContentResponses"],o)}return e}function _2(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function y2(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ic(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&f(e,["state"],cS(r));const o=c(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const a=c(t,["metadata","endTime"]);a!=null&&f(e,["endTime"],a);const u=c(t,["metadata","updateTime"]);u!=null&&f(e,["updateTime"],u);const d=c(t,["metadata","model"]);d!=null&&f(e,["model"],d);const h=c(t,["metadata","output"]);return h!=null&&f(e,["dest"],g2(uS(h))),e}function Pp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["state"]);r!=null&&f(e,["state"],cS(r));const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&f(e,["startTime"],u);const d=c(t,["endTime"]);d!=null&&f(e,["endTime"],d);const h=c(t,["updateTime"]);h!=null&&f(e,["updateTime"],h);const g=c(t,["model"]);g!=null&&f(e,["model"],g);const y=c(t,["inputConfig"]);y!=null&&f(e,["src"],v2(y));const v=c(t,["outputConfig"]);v!=null&&f(e,["dest"],_2(uS(v)));const S=c(t,["completionStats"]);return S!=null&&f(e,["completionStats"],S),e}function v2(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function T2(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Z2(t,a))),f(n,["requests","requests"],o)}return n}function E2(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function w2(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function x2(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],sa(t,i)),n}function S2(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],sa(t,i)),n}function C2(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],I2(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&f(e,["index"],d);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&f(e,["urlContextMetadata"],y),e}function I2(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function dS(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>iL(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function A2(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function P2(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],y2(m2(r))),n}function w0(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],T2(t,lS(t,r)));const o=c(e,["config"]);return o!=null&&A2(o,n),n}function R2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Ve(t,i));const r=c(e,["src"]);r!=null&&f(n,["inputConfig"],E2(lS(t,r)));const o=c(e,["config"]);return o!=null&&P2(o,n),n}function N2(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function k2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],U2(t,r));const o=c(e,["config"]);return o!=null&&N2(o,n),n}function M2(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],sa(t,i)),n}function L2(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],sa(t,i)),n}function D2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function b2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function V2(t,e){const n={},i=c(e,["contents"]);if(i!=null){let o=gg(t,i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["requests[]","request","content"],o)}const r=c(e,["config"]);return r!=null&&(f(n,["_self"],F2(r,n)),LM(n,{"requests[].*":"requests[].request.*"})),n}function F2(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function U2(t,e){const n={},i=c(e,["fileName"]);i!=null&&f(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&f(n,["requests"],V2(t,r)),n}function O2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function B2(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function z2(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&f(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function G2(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],dS(zt(r)));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const h=c(e,["maxOutputTokens"]);h!=null&&f(i,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&f(i,["presencePenalty"],S);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const M=c(e,["seed"]);M!=null&&f(i,["seed"],M);const O=c(e,["responseMimeType"]);O!=null&&f(i,["responseMimeType"],O);const N=c(e,["responseSchema"]);N!=null&&f(i,["responseSchema"],_g(N));const R=c(e,["responseJsonSchema"]);if(R!=null&&f(i,["responseJsonSchema"],R),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=c(e,["safetySettings"]);if(n!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(xe=>rL(xe))),f(n,["safetySettings"],F)}const z=c(e,["tools"]);if(n!==void 0&&z!=null){let F=oa(z);Array.isArray(F)&&(F=F.map(xe=>sL(ra(xe)))),f(n,["tools"],F)}const K=c(e,["toolConfig"]);if(n!==void 0&&K!=null&&f(n,["toolConfig"],oL(K)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=c(e,["cachedContent"]);n!==void 0&&Y!=null&&f(n,["cachedContent"],Ki(t,Y));const D=c(e,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const A=c(e,["mediaResolution"]);A!=null&&f(i,["mediaResolution"],A);const k=c(e,["speechConfig"]);if(k!=null&&f(i,["speechConfig"],yg(k)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=c(e,["thinkingConfig"]);V!=null&&f(i,["thinkingConfig"],V);const U=c(e,["imageConfig"]);U!=null&&f(i,["imageConfig"],J2(U));const G=c(e,["enableEnhancedCivicAnswers"]);if(G!=null&&f(i,["enableEnhancedCivicAnswers"],G),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function H2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>C2(h))),f(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function q2(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],sa(t,i)),n}function $2(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],sa(t,i)),n}function W2(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function K2(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function J2(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Z2(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["request","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let u=Mn(r);Array.isArray(u)&&(u=u.map(d=>dS(d))),f(n,["request","contents"],u)}const o=c(e,["metadata"]);o!=null&&f(n,["metadata"],o);const a=c(e,["config"]);return a!=null&&f(n,["request","generationConfig"],G2(t,a,c(n,["request"],{}))),n}function Y2(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],H2(n));const i=c(t,["error"]);return i!=null&&f(e,["error"],i),e}function Q2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function X2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const o=c(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function j2(t){const e={},n=c(t,["config"]);return n!=null&&Q2(n,e),e}function eL(t){const e={},n=c(t,["config"]);return n!=null&&X2(n,e),e}function tL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Ic(a))),f(e,["batchJobs"],o)}return e}function nL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Pp(a))),f(e,["batchJobs"],o)}return e}function iL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],O2(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],B2(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],w2(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function rL(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function oL(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&f(e,["functionCallingConfig"],z2(i)),e}function sL(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],W2(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],K2(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(qi||(qi={}));class Io{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aL extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Io(qi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=w0(this.apiClient,e),i=n._url,r=re("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,d=u.requests,h=[];for(const g of d){const y=Object.assign({},g);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const S=y.request;S.systemInstruction=v,y.request=S}h.push(y)}return u.requests=h,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=R2(this.apiClient,e);return u=re("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Pp(g))}else{const h=w0(this.apiClient,e);return u=re("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Ic(g))}}async createEmbeddingsInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=k2(this.apiClient,e);return o=re("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Ic(d))}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=$2(this.apiClient,e);return u=re("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Pp(g))}else{const h=q2(this.apiClient,e);return u=re("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Ic(g))}}async cancel(e){var n,i,r,o;let a="",u={};if(this.apiClient.isVertexAI()){const d=S2(this.apiClient,e);a=re("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=x2(this.apiClient,e);a=re("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=eL(e);return u=re("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=nL(g),v=new y0;return Object.assign(v,y),v})}else{const h=j2(e);return u=re("batches",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=tL(g),v=new y0;return Object.assign(v,y),v})}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=L2(this.apiClient,e);return u=re("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>b2(g))}else{const h=M2(this.apiClient,e);return u=re("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>D2(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lL(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function x0(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>kL(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function uL(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let g=Mn(a);Array.isArray(g)&&(g=g.map(y=>x0(y))),f(e,["contents"],g)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],x0(zt(u)));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>LL(y))),f(e,["tools"],g)}const h=c(t,["toolConfig"]);if(e!==void 0&&h!=null&&f(e,["toolConfig"],ML(h)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function cL(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let y=Mn(a);Array.isArray(y)&&(y=y.map(v=>v)),f(e,["contents"],y)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],zt(u));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>DL(v))),f(e,["tools"],y)}const h=c(t,["toolConfig"]);e!==void 0&&h!=null&&f(e,["toolConfig"],h);const g=c(t,["kmsKeyName"]);return e!==void 0&&g!=null&&f(e,["encryption_spec","kmsKeyName"],g),n}function dL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],jx(t,i));const r=c(e,["config"]);return r!=null&&uL(r,n),n}function hL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],jx(t,i));const r=c(e,["config"]);return r!=null&&cL(r,n),n}function fL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function pL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function mL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function gL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function _L(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function yL(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vL(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&f(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function TL(t){const e={},n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function EL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function wL(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ki(t,i)),n}function xL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function SL(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function CL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function IL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function AL(t){const e={},n=c(t,["config"]);return n!=null&&CL(n,e),e}function PL(t){const e={},n=c(t,["config"]);return n!=null&&IL(n,e),e}function RL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["cachedContents"],o)}return e}function NL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["cachedContents"],o)}return e}function kL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],_L(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],yL(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],lL(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function ML(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&f(e,["functionCallingConfig"],vL(i)),e}function LL(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],xL(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],SL(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function DL(t){const e={},n=c(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&f(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>TL(v))),f(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],d);const h=c(t,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function bL(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function VL(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function FL(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ki(t,i));const r=c(e,["config"]);return r!=null&&bL(r,n),n}function UL(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ki(t,i));const r=c(e,["config"]);return r!=null&&VL(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OL extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Io(qi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=hL(this.apiClient,e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const h=dL(this.apiClient,e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=wL(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const h=EL(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=pL(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=gL(g),v=new g0;return Object.assign(v,y),v})}else{const h=fL(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=mL(g),v=new g0;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=UL(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const h=FL(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=PL(e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=NL(g),v=new _0;return Object.assign(v,y),v})}else{const h=AL(e);return u=re("cachedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=RL(g),v=new _0;return Object.assign(v,y),v})}}}function yd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function S0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function Zn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(S){return function(b){return Promise.resolve(b).then(S,y)}}function u(S,b){i[S]&&(r[S]=function(M){return new Promise(function(O,N){o.push([S,M,O,N])>1||d(S,M)})},b&&(r[S]=b(r[S])))}function d(S,b){try{h(i[S](b))}catch(M){v(o[0][3],M)}}function h(S){S.value instanceof ve?Promise.resolve(S.value.v).then(g,y):v(o[0][2],S)}function g(S){d("next",S)}function y(S){d("throw",S)}function v(S,b){S(b),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Yn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof S0=="function"?S0(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),r(u,d,a.done,a.value)})}}function r(o,a,u,d){Promise.resolve(d).then(function(h){o({value:h,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BL(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:hS(n)}function hS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zL(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function C0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!hS(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class GL{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new HL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class HL{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),zL(o)}async sendMessage(e){var n;await this.sendPromise;const i=zt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,u;const d=await r,h=(a=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,g=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];g!=null&&(v=(u=g.slice(y))!==null&&u!==void 0?u:[]);const S=h?[h]:[];this.recordHistory(i,S,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=zt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?C0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Zn(this,arguments,function*(){var r,o,a,u,d,h;const g=[];try{for(var y=!0,v=Yn(e),S;S=yield ve(v.next()),r=S.done,!r;y=!0){u=S.value,y=!1;const b=u;if(BL(b)){const M=(h=(d=b.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content;M!==void 0&&g.push(M)}yield yield ve(b)}}catch(b){o={error:b}}finally{try{!y&&!r&&(a=v.return)&&(yield ve(a.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...C0(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Gl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qL(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function $L(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function WL(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],oS(n)),e}function KL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function JL(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],oS(n)),e}function ZL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function YL(t){const e={},n=c(t,["config"]);return n!=null&&ZL(n,e),e}function QL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Io(qi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YL(e);return o=re("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=QL(d),g=new n2;return Object.assign(g,h),g})}}async createInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qL(e);return o=re("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=$L(d),g=new i2;return Object.assign(g,h),g})}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=JL(e);return o=re("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=WL(e);return o=re("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=KL(d),g=new r2;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ac(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function jL(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>mD(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function eD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function tD(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nD(t){const e={},n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function iD(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&f(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&f(e,["logprobs"],d);const h=c(t,["maxOutputTokens"]);h!=null&&f(e,["maxOutputTokens"],h);const g=c(t,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&f(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&f(e,["responseMimeType"],S);const b=c(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const M=c(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const O=c(t,["routingConfig"]);O!=null&&f(e,["routingConfig"],O);const N=c(t,["seed"]);N!=null&&f(e,["seed"],N);const R=c(t,["speechConfig"]);R!=null&&f(e,["speechConfig"],R);const I=c(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const z=c(t,["temperature"]);z!=null&&f(e,["temperature"],z);const K=c(t,["thinkingConfig"]);K!=null&&f(e,["thinkingConfig"],K);const Y=c(t,["topK"]);Y!=null&&f(e,["topK"],Y);const D=c(t,["topP"]);if(D!=null&&f(e,["topP"],D),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rD(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function oD(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function sD(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const h=c(t,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],vg(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],jL(zt(b)));const M=c(t,["tools"]);if(e!==void 0&&M!=null){let Y=oa(M);Array.isArray(Y)&&(Y=Y.map(D=>_D(ra(D)))),f(e,["setup","tools"],Y)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],gD(O));const N=c(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const z=c(t,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const K=c(t,["proactivity"]);if(e!==void 0&&K!=null&&f(e,["setup","proactivity"],K),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function aD(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],iD(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const h=c(t,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],vg(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],zt(b));const M=c(t,["tools"]);if(e!==void 0&&M!=null){let D=oa(M);Array.isArray(D)&&(D=D.map(A=>yD(ra(A)))),f(e,["setup","tools"],D)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],O);const N=c(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const z=c(t,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const K=c(t,["proactivity"]);e!==void 0&&K!=null&&f(e,["setup","proactivity"],K);const Y=c(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&f(e,["setup","explicitVadSignal"],Y),n}function lD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Ve(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],sD(r,n)),n}function uD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Ve(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],aD(r,n)),n}function cD(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function dD(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["weightedPrompts"],i)}return e}function hD(t){const e={},n=c(t,["media"]);if(n!=null){let h=eS(n);Array.isArray(h)&&(h=h.map(g=>Ac(g))),f(e,["mediaChunks"],h)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],Ac(nS(i)));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&f(e,["video"],Ac(tS(o)));const a=c(t,["text"]);a!=null&&f(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&f(e,["activityEnd"],d),e}function fD(t){const e={},n=c(t,["media"]);if(n!=null){let h=eS(n);Array.isArray(h)&&(h=h.map(g=>g)),f(e,["mediaChunks"],h)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],nS(i));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&f(e,["video"],tS(o));const a=c(t,["text"]);a!=null&&f(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&f(e,["activityEnd"],d),e}function pD(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&f(e,["toolCall"],r);const o=c(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const a=c(t,["usageMetadata"]);a!=null&&f(e,["usageMetadata"],vD(a));const u=c(t,["goAway"]);u!=null&&f(e,["goAway"],u);const d=c(t,["sessionResumptionUpdate"]);d!=null&&f(e,["sessionResumptionUpdate"],d);const h=c(t,["voiceActivityDetectionSignal"]);h!=null&&f(e,["voiceActivityDetectionSignal"],h);const g=c(t,["voiceActivity"]);return g!=null&&f(e,["voiceActivity"],TD(g)),e}function mD(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],eD(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],tD(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],Ac(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function gD(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _D(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],rD(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],oD(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function yD(t){const e={},n=c(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&f(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>nD(v))),f(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],d);const h=c(t,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function vD(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const o=c(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const a=c(t,["thoughtsTokenCount"]);a!=null&&f(e,["thoughtsTokenCount"],a);const u=c(t,["totalTokenCount"]);u!=null&&f(e,["totalTokenCount"],u);const d=c(t,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["promptTokensDetails"],S)}const h=c(t,["cacheTokensDetails"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["cacheTokensDetails"],S)}const g=c(t,["candidatesTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["responseTokensDetails"],S)}const y=c(t,["toolUsePromptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["toolUsePromptTokensDetails"],S)}const v=c(t,["trafficType"]);return v!=null&&f(e,["trafficType"],v),e}function TD(t){const e={},n=c(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ED(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function wD(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],xD(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&f(e,["index"],d);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&f(e,["urlContextMetadata"],y),e}function xD(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function SD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let o=Mn(r);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}return n}function CD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["tokensInfo"],r)}return e}function ID(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&f(e,["statistics"],AD(i)),e}function AD(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function jd(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Vb(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function PD(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function RD(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ND(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],zt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>gS(u))),f(e,["tools"],a)}const o=c(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],Eb(o)),n}function kD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>jd(u))),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&RD(o),n}function MD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&ND(o,n),n}function LD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function DD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function bD(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ve(t,i)),n}function VD(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ve(t,i)),n}function FD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function UD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function OD(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const h=c(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&f(e,["parameters","language"],S);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const M=c(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const O=c(t,["addWatermark"]);e!==void 0&&O!=null&&f(e,["parameters","addWatermark"],O);const N=c(t,["labels"]);e!==void 0&&N!=null&&f(e,["labels"],N);const R=c(t,["editMode"]);e!==void 0&&R!=null&&f(e,["parameters","editMode"],R);const I=c(t,["baseSteps"]);return e!==void 0&&I!=null&&f(e,["parameters","editConfig","baseSteps"],I),n}function BD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Gb(d))),f(n,["instances[0]","referenceImages"],u)}const a=c(e,["config"]);return a!=null&&OD(a,n),n}function zD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>eh(o))),f(e,["generatedImages"],r)}return e}function GD(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HD(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const o=c(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&f(e,["instances[]","mimeType"],a);const u=c(t,["autoTruncate"]);return e!==void 0&&u!=null&&f(e,["parameters","autoTruncate"],u),n}function qD(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let u=gg(t,r);Array.isArray(u)&&(u=u.map(d=>d)),f(n,["requests[]","content"],u)}const o=c(e,["config"]);o!=null&&GD(o,n);const a=c(e,["model"]);return a!==void 0&&f(n,["requests[]","model"],Ve(t,a)),n}function $D(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let a=gg(t,r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["instances[]","content"],a)}const o=c(e,["config"]);return o!=null&&HD(o,n),n}function WD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function KD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ID(a))),f(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function JD(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function ZD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function YD(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QD(t){const e={},n=c(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const i=c(t,["mode"]);if(i!=null&&f(e,["mode"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XD(t){const e={},n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function jD(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],jd(zt(r)));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const h=c(e,["maxOutputTokens"]);h!=null&&f(i,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&f(i,["presencePenalty"],S);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const M=c(e,["seed"]);M!=null&&f(i,["seed"],M);const O=c(e,["responseMimeType"]);O!=null&&f(i,["responseMimeType"],O);const N=c(e,["responseSchema"]);N!=null&&f(i,["responseSchema"],_g(N));const R=c(e,["responseJsonSchema"]);if(R!=null&&f(i,["responseJsonSchema"],R),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=c(e,["safetySettings"]);if(n!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(xe=>Hb(xe))),f(n,["safetySettings"],F)}const z=c(e,["tools"]);if(n!==void 0&&z!=null){let F=oa(z);Array.isArray(F)&&(F=F.map(xe=>Yb(ra(xe)))),f(n,["tools"],F)}const K=c(e,["toolConfig"]);if(n!==void 0&&K!=null&&f(n,["toolConfig"],Zb(K)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=c(e,["cachedContent"]);n!==void 0&&Y!=null&&f(n,["cachedContent"],Ki(t,Y));const D=c(e,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const A=c(e,["mediaResolution"]);A!=null&&f(i,["mediaResolution"],A);const k=c(e,["speechConfig"]);if(k!=null&&f(i,["speechConfig"],yg(k)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=c(e,["thinkingConfig"]);V!=null&&f(i,["thinkingConfig"],V);const U=c(e,["imageConfig"]);U!=null&&f(i,["imageConfig"],Ib(U));const G=c(e,["enableEnhancedCivicAnswers"]);if(G!=null&&f(i,["enableEnhancedCivicAnswers"],G),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function eb(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],zt(r));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const h=c(e,["maxOutputTokens"]);h!=null&&f(i,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&f(i,["presencePenalty"],S);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const M=c(e,["seed"]);M!=null&&f(i,["seed"],M);const O=c(e,["responseMimeType"]);O!=null&&f(i,["responseMimeType"],O);const N=c(e,["responseSchema"]);N!=null&&f(i,["responseSchema"],_g(N));const R=c(e,["responseJsonSchema"]);R!=null&&f(i,["responseJsonSchema"],R);const I=c(e,["routingConfig"]);I!=null&&f(i,["routingConfig"],I);const z=c(e,["modelSelectionConfig"]);z!=null&&f(i,["modelConfig"],z);const K=c(e,["safetySettings"]);if(n!==void 0&&K!=null){let He=K;Array.isArray(He)&&(He=He.map(H=>H)),f(n,["safetySettings"],He)}const Y=c(e,["tools"]);if(n!==void 0&&Y!=null){let He=oa(Y);Array.isArray(He)&&(He=He.map(H=>gS(ra(H)))),f(n,["tools"],He)}const D=c(e,["toolConfig"]);n!==void 0&&D!=null&&f(n,["toolConfig"],D);const A=c(e,["labels"]);n!==void 0&&A!=null&&f(n,["labels"],A);const k=c(e,["cachedContent"]);n!==void 0&&k!=null&&f(n,["cachedContent"],Ki(t,k));const V=c(e,["responseModalities"]);V!=null&&f(i,["responseModalities"],V);const U=c(e,["mediaResolution"]);U!=null&&f(i,["mediaResolution"],U);const G=c(e,["speechConfig"]);G!=null&&f(i,["speechConfig"],yg(G));const F=c(e,["audioTimestamp"]);F!=null&&f(i,["audioTimestamp"],F);const xe=c(e,["thinkingConfig"]);xe!=null&&f(i,["thinkingConfig"],xe);const pt=c(e,["imageConfig"]);if(pt!=null&&f(i,["imageConfig"],Ab(pt)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const qe=c(e,["modelArmorConfig"]);return n!==void 0&&qe!=null&&f(n,["modelArmorConfig"],qe),i}function I0(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>jd(u))),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],jD(t,o,n)),n}function A0(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["contents"]);if(r!=null){let a=Mn(r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],eb(t,o,n)),n}function P0(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>wD(h))),f(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function R0(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["candidates"],h)}const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&f(e,["responseId"],u);const d=c(t,["usageMetadata"]);return d!=null&&f(e,["usageMetadata"],d),e}function tb(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const o=c(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const u=c(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&f(e,["parameters","includeSafetyAttributes"],d);const h=c(t,["includeRaiReason"]);e!==void 0&&h!=null&&f(e,["parameters","includeRaiReason"],h);const g=c(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const v=c(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=c(t,["imageSize"]);if(e!==void 0&&S!=null&&f(e,["parameters","sampleImageSize"],S),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function nb(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const h=c(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&f(e,["parameters","language"],S);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const M=c(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const O=c(t,["addWatermark"]);e!==void 0&&O!=null&&f(e,["parameters","addWatermark"],O);const N=c(t,["labels"]);e!==void 0&&N!=null&&f(e,["labels"],N);const R=c(t,["imageSize"]);e!==void 0&&R!=null&&f(e,["parameters","sampleImageSize"],R);const I=c(t,["enhancePrompt"]);return e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I),n}function ib(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&tb(o,n),n}function rb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&nb(o,n),n}function ob(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_b(a))),f(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],pS(r)),e}function sb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>eh(a))),f(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],mS(r)),e}function ab(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["resolution"]);e!==void 0&&a!=null&&f(e,["parameters","resolution"],a);const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(t,["negativePrompt"]);e!==void 0&&d!=null&&f(e,["parameters","negativePrompt"],d);const h=c(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&f(e,["parameters","enhancePrompt"],h),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=c(t,["lastFrame"]);e!==void 0&&g!=null&&f(e,["instances[0]","lastFrame"],th(g));const y=c(t,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>uV(S))),f(e,["instances[0]","referenceImages"],v)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function lb(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const d=c(t,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const h=c(t,["resolution"]);e!==void 0&&h!=null&&f(e,["parameters","resolution"],h);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["pubsubTopic"]);e!==void 0&&y!=null&&f(e,["parameters","pubsubTopic"],y);const v=c(t,["negativePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","negativePrompt"],v);const S=c(t,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const b=c(t,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const M=c(t,["lastFrame"]);e!==void 0&&M!=null&&f(e,["instances[0]","lastFrame"],Xn(M));const O=c(t,["referenceImages"]);if(e!==void 0&&O!=null){let I=O;Array.isArray(I)&&(I=I.map(z=>cV(z))),f(e,["instances[0]","referenceImages"],I)}const N=c(t,["mask"]);e!==void 0&&N!=null&&f(e,["instances[0]","mask"],lV(N));const R=c(t,["compressionQuality"]);return e!==void 0&&R!=null&&f(e,["parameters","compressionQuality"],R),n}function ub(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&f(e,["response"],fb(a)),e}function cb(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],pb(a)),e}function db(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],th(o));const a=c(e,["video"]);a!=null&&f(n,["instances[0]","video"],_S(a));const u=c(e,["source"]);u!=null&&mb(u,n);const d=c(e,["config"]);return d!=null&&ab(d,n),n}function hb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],Xn(o));const a=c(e,["video"]);a!=null&&f(n,["instances[0]","video"],yS(a));const u=c(e,["source"]);u!=null&&gb(u,n);const d=c(e,["config"]);return d!=null&&lb(d,n),n}function fb(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>vb(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function pb(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Tb(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function mb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],th(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],_S(o)),n}function gb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Xn(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],yS(o)),n}function _b(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],Pb(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],pS(r)),e}function eh(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],fS(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&f(e,["safetyAttributes"],mS(r));const o=c(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function yb(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],fS(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["labels"],r)}return e}function vb(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],sV(n)),e}function Tb(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],aV(n)),e}function Eb(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&f(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&f(e,["logprobs"],d);const h=c(t,["maxOutputTokens"]);h!=null&&f(e,["maxOutputTokens"],h);const g=c(t,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&f(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&f(e,["responseMimeType"],S);const b=c(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const M=c(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const O=c(t,["routingConfig"]);O!=null&&f(e,["routingConfig"],O);const N=c(t,["seed"]);N!=null&&f(e,["seed"],N);const R=c(t,["speechConfig"]);R!=null&&f(e,["speechConfig"],R);const I=c(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const z=c(t,["temperature"]);z!=null&&f(e,["temperature"],z);const K=c(t,["thinkingConfig"]);K!=null&&f(e,["thinkingConfig"],K);const Y=c(t,["topK"]);Y!=null&&f(e,["topK"],Y);const D=c(t,["topP"]);if(D!=null&&f(e,["topP"],D),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wb(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ve(t,i)),n}function xb(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Ve(t,i)),n}function Sb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Cb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Ib(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ab(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);i!=null&&f(e,["imageSize"],i);const r=c(t,["personGeneration"]);r!=null&&f(e,["personGeneration"],r);const o=c(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const a=c(t,["outputCompressionQuality"]);return a!=null&&f(e,["imageOutputOptions","compressionQuality"],a),e}function Pb(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Ur(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function fS(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function th(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Ur(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Xn(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Rb(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&f(n,["_url","models_url"],sS(t,u)),i}function Nb(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&f(n,["_url","models_url"],sS(t,u)),i}function kb(t,e){const n={},i=c(e,["config"]);return i!=null&&Rb(t,i,n),n}function Mb(t,e){const n={},i=c(e,["config"]);return i!=null&&Nb(t,i,n),n}function Lb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=aS(r);Array.isArray(o)&&(o=o.map(a=>Rp(a))),f(e,["models"],o)}return e}function Db(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=aS(r);Array.isArray(o)&&(o=o.map(a=>Np(a))),f(e,["models"],o)}return e}function bb(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function Rp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const o=c(t,["version"]);o!=null&&f(e,["version"],o);const a=c(t,["_self"]);a!=null&&f(e,["tunedModelInfo"],Qb(a));const u=c(t,["inputTokenLimit"]);u!=null&&f(e,["inputTokenLimit"],u);const d=c(t,["outputTokenLimit"]);d!=null&&f(e,["outputTokenLimit"],d);const h=c(t,["supportedGenerationMethods"]);h!=null&&f(e,["supportedActions"],h);const g=c(t,["temperature"]);g!=null&&f(e,["temperature"],g);const y=c(t,["maxTemperature"]);y!=null&&f(e,["maxTemperature"],y);const v=c(t,["topP"]);v!=null&&f(e,["topP"],v);const S=c(t,["topK"]);S!=null&&f(e,["topK"],S);const b=c(t,["thinking"]);return b!=null&&f(e,["thinking"],b),e}function Np(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const o=c(t,["versionId"]);o!=null&&f(e,["version"],o);const a=c(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>JD(v))),f(e,["endpoints"],y)}const u=c(t,["labels"]);u!=null&&f(e,["labels"],u);const d=c(t,["_self"]);d!=null&&f(e,["tunedModelInfo"],Xb(d));const h=c(t,["defaultCheckpointId"]);h!=null&&f(e,["defaultCheckpointId"],h);const g=c(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["checkpoints"],y)}return e}function Vb(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],ZD(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],YD(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],ED(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function Fb(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],Xn(n)),e}function Ub(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","baseSteps"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);const h=c(t,["addWatermark"]);e!==void 0&&h!=null&&f(e,["parameters","addWatermark"],h);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","mimeType"],g);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const S=c(t,["labels"]);return e!==void 0&&S!=null&&f(e,["labels"],S),n}function Ob(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["source"]);r!=null&&zb(r,n);const o=c(e,["config"]);return o!=null&&Ub(o,n),n}function Bb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eh(r))),f(e,["generatedImages"],i)}return e}function zb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],Xn(r));const o=c(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Fb(u))),f(e,["instances[0]","productImages"],a)}return n}function Gb(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Xn(n));const i=c(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const o=c(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],bb(o));const a=c(t,["controlImageConfig"]);a!=null&&f(e,["controlImageConfig"],PD(a));const u=c(t,["styleImageConfig"]);u!=null&&f(e,["styleImageConfig"],u);const d=c(t,["subjectImageConfig"]);return d!=null&&f(e,["subjectImageConfig"],d),e}function pS(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function mS(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Hb(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function qb(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],Xn(n)),e}function $b(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);const o=c(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&f(e,["parameters","maskDilation"],a);const u=c(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&f(e,["parameters","binaryColorThreshold"],u);const d=c(t,["labels"]);return e!==void 0&&d!=null&&f(e,["labels"],d),n}function Wb(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["source"]);r!=null&&Jb(r,n);const o=c(e,["config"]);return o!=null&&$b(o,n),n}function Kb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>yb(r))),f(e,["generatedMasks"],i)}return e}function Jb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Xn(r));const o=c(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],qb(o)),n}function Zb(t){const e={},n=c(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const i=c(t,["functionCallingConfig"]);return i!=null&&f(e,["functionCallingConfig"],QD(i)),e}function Yb(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],Sb(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],Cb(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function gS(t){const e={},n=c(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const i=c(t,["computerUse"]);if(i!=null&&f(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>XD(v))),f(e,["functionDeclarations"],y)}const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],d);const h=c(t,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function Qb(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Xb(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function jb(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function eV(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function tV(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],Ve(t,i));const r=c(e,["config"]);return r!=null&&jb(r,n),n}function nV(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["config"]);return r!=null&&eV(r,n),n}function iV(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const o=c(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&f(e,["parameters","includeRaiReason"],a);const u=c(t,["outputMimeType"]);e!==void 0&&u!=null&&f(e,["parameters","outputOptions","mimeType"],u);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&f(e,["parameters","outputOptions","compressionQuality"],d);const h=c(t,["enhanceInputImage"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=c(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=c(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);const v=c(t,["numberOfImages"]);e!==void 0&&v!=null&&f(e,["parameters","sampleCount"],v);const S=c(t,["mode"]);return e!==void 0&&S!=null&&f(e,["parameters","mode"],S),n}function rV(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Ve(t,i));const r=c(e,["image"]);r!=null&&f(n,["instances[0]","image"],Xn(r));const o=c(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=c(e,["config"]);return a!=null&&iV(a,n),n}function oV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>eh(o))),f(e,["generatedImages"],r)}return e}function sV(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Ur(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function aV(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function lV(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],Xn(n));const i=c(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function uV(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],th(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function cV(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Xn(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function _S(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function yS(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ur(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dV(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),n}function hV(t){const e={},n=c(t,["config"]);return n!=null&&dV(n,e),e}function fV(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function pV(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&fV(i,e),e}function mV(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function gV(t,e){const n={},i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["customMetadata"],o)}const r=c(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function _V(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],vV(a)),e}function yV(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=c(t,["fileName"]);i!=null&&f(e,["fileName"],i);const r=c(t,["config"]);return r!=null&&gV(r,e),e}function vV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function TV(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function EV(t){const e={},n=c(t,["config"]);return n!=null&&TV(n,e),e}function wV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["fileSearchStores"],o)}return e}function vS(t,e){const n={},i=c(t,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);const r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),n}function xV(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=c(t,["config"]);return i!=null&&vS(i,e),e}function SV(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CV="Content-Type",IV="X-Server-Timeout",AV="User-Agent",kp="x-goog-api-client",PV="1.38.0",RV=`google-genai-sdk/${PV}`,NV="v1beta1",kV="v1beta";class MV{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:NV}else{if(!this.clientOptions.apiKey)throw new Gl({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:kV,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Cp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&LV(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await N0(r),new Ip(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await N0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Zn(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:g}=yield ve(r.read());if(h){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(g,{stream:!0});try{const b=JSON.parse(y);if("error"in b){const M=JSON.parse(JSON.stringify(b.error)),O=M.status,N=M.code,R=`got status: ${O}. ${JSON.stringify(b)}`;if(N>=400&&N<600)throw new Gl({message:R,status:N})}}catch(b){if(b.name==="ApiError")throw b}a+=y;let v=-1,S=0;for(;;){v=-1,S=0;for(const O of d){const N=a.indexOf(O);N!==-1&&(v===-1||N<v)&&(v=N,S=O.length)}if(v===-1)break;const b=a.substring(0,v);a=a.substring(v+S);const M=b.trim();if(M.startsWith(u)){const O=M.substring(u.length).trim();try{const N=new Response(O,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ve(new Ip(N))}catch(N){throw new Error(`exception parsing stream chunk ${O}. ${N}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=RV+" "+this.clientOptions.userAgentExtra;return e[AV]=n,e[kp]=n,e[CV]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(IV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},h=this.getFileName(e),g=re("upload/v1beta/files",d._url),y=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,h,d,n==null?void 0:n.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,a=await o.stat(n),u=String(a.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),y={};i!=null&&vS(i,y);const v=await this.fetchUploadUrl(h,u,d,g,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=h==null?void 0:h.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function N0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Gl({message:r,status:n}):new Error(r)}}function LV(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,a){const u=Object.assign({},o);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=a[d],g=u[d];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?u[d]=i(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),u[d]=h)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DV="mcp_used/unknown";let bV=!1;function TS(t){for(const e of t)if(VV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return bV}function ES(t){var e;const n=(e=t[kp])!==null&&e!==void 0?e:"";t[kp]=(n+` ${DV}`).trimStart()}function VV(t){return t!==null&&typeof t=="object"&&t instanceof Tg}function FV(t){return Zn(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const a=yield ve(n.listTools({cursor:r}));for(const u of a.tools)yield yield ve(u),o++;if(!a.nextCursor)break;r=a.nextCursor}})}class Tg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Tg(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},a=[];for(const g of this.mcpClients)try{for(var u=!0,d=(n=void 0,Yn(FV(g))),h;h=await d.next(),e=h.done,!e;u=!0){r=h.value,u=!1;const y=r;a.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=g}}catch(y){n={error:y}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),p2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UV(t,e,n){const i=new s2;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class OV{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=GV(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let h=()=>{};const g=new Promise(I=>{h=I}),y=e.callbacks,v=function(){h({})},S=this.apiClient,b={onopen:v,onmessage:I=>{UV(S,y.onmessage,I)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(I){}},M=this.webSocketFactory.create(d,zV(a),b);M.connect(),await g;const R={setup:{model:Ve(this.apiClient,e.model)}};return M.send(JSON.stringify(R)),new BV(M,this.apiClient)}}class BV{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=dD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=cD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ts.PLAY)}pause(){this.sendPlaybackControl(Ts.PAUSE)}stop(){this.sendPlaybackControl(Ts.STOP)}resetContext(){this.sendPlaybackControl(Ts.RESET_CONTEXT)}close(){this.conn.close()}}function zV(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function GV(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qV(t,e,n){const i=new o2;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const a=pD(o);Object.assign(i,a)}else Object.assign(i,o);e(i)}class $V{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new OV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&TS(e.config.tools)&&ES(y);const v=ZV(y);if(this.apiClient.isVertexAI()){const k=this.apiClient.getProject(),V=this.apiClient.getLocation(),U=this.apiClient.getApiKey(),G=!!k&&!!V||!!U;this.apiClient.getCustomBaseUrl()&&!G?g=d:(g=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,g))}else{const k=this.apiClient.getApiKey();let V="BidiGenerateContent",U="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",U="access_token"),g=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${U}=${k}`}let S=()=>{};const b=new Promise(k=>{S=k}),M=e.callbacks,O=function(){var k;(k=M==null?void 0:M.onopen)===null||k===void 0||k.call(M),S({})},N=this.apiClient,R={onopen:O,onmessage:k=>{qV(N,M.onmessage,k)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=M==null?void 0:M.onclose)!==null&&i!==void 0?i:function(k){}},I=this.webSocketFactory.create(g,JV(v),R);I.connect(),await b;let z=Ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const k=this.apiClient.getProject(),V=this.apiClient.getLocation();k&&V&&(z=`projects/${k}/locations/${V}/`+z)}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[md.AUDIO]}:e.config.responseModalities=[md.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],D=[];for(const k of Y)if(this.isCallableTool(k)){const V=k;D.push(await V.tool())}else D.push(k);D.length>0&&(e.config.tools=D);const A={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=uD(this.apiClient,A):K=lD(this.apiClient,A),delete K.config,I.send(JSON.stringify(K)),new KV(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const WV={turnComplete:!0};class KV{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Mn(n.turns),e.isVertexAI()||(i=i.map(r=>jd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(HV)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},WV),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fD(e)}:n={realtimeInput:hD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function JV(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function ZV(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k0=10;function M0(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(bs(a)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function bs(t){return"callTool"in t&&typeof t.callTool=="function"}function YV(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>bs(r)))!==null&&i!==void 0?i:!1}function L0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(bs(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function D0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QV extends Wi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!YV(n)||M0(n.config))return await this.generateContentInternal(d);const h=L0(n);if(h.length>0){const M=h.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let g,y;const v=Mn(d.contents),S=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:k0;let b=0;for(;b<S&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const M=g.candidates[0].content,O=[];for(const N of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(bs(N)){const I=await N.callTool(g.functionCalls);O.push(...I)}b++,y={role:"user",parts:O},d.contents=Mn(d.contents),d.contents.push(M),d.contents.push(y),D0(d.config)&&(v.push(M),v.push(y))}return D0(d.config)&&(g.automaticFunctionCallingHistory=v),g},this.generateContentStream=async n=>{var i,r,o,a,u;if(this.maybeMoveToResponseJsonSchem(n),M0(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const d=L0(n);if(d.length>0){const y=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,g=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(h&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const a=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:a.push(d);let u;return o?u={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Io(qi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async d=>bs(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&TS(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),ES(h),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(bs(a)){const u=a,d=await u.tool();for(const h of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(o.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);o.set(h.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:k0;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(h,g,y){return Zn(this,arguments,function*(){for(var v,S,b,M,O,N;u<o;){a&&(u++,a=!1);const K=yield ve(h.processParamsMaybeAddMcpUsage(y)),Y=yield ve(h.generateContentStreamInternal(K)),D=[],A=[];try{for(var R=!0,I=(S=void 0,Yn(Y)),z;z=yield ve(I.next()),v=z.done,!v;R=!0){M=z.value,R=!1;const k=M;if(yield yield ve(k),k.candidates&&(!((O=k.candidates[0])===null||O===void 0)&&O.content)){A.push(k.candidates[0].content);for(const V of(N=k.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(u<o&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(V.functionCall.name)){const U=yield ve(g.get(V.functionCall.name).callTool([V.functionCall]));D.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(k){S={error:k}}finally{try{!R&&!v&&(b=I.return)&&(yield ve(b.call(I)))}finally{if(S)throw S.error}}if(D.length>0){a=!0;const k=new $a;k.candidates=[{content:{role:"user",parts:D}}],yield yield ve(k);const V=[];V.push(...A),V.push({role:"user",parts:D});const U=Mn(y.contents).concat(V);y.contents=U}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=A0(this.apiClient,e);return u=re("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=R0(g),v=new $a;return Object.assign(v,y),v})}else{const h=I0(this.apiClient,e);return u=re("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=P0(g),v=new $a;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=A0(this.apiClient,e);return u=re("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(y){return Zn(this,arguments,function*(){var v,S,b,M;try{for(var O=!0,N=Yn(y),R;R=yield ve(N.next()),v=R.done,!v;O=!0){M=R.value,O=!1;const I=M,z=R0(yield ve(I.json()));z.sdkHttpResponse={headers:I.headers};const K=new $a;Object.assign(K,z),yield yield ve(K)}}catch(I){S={error:I}}finally{try{!O&&!v&&(b=N.return)&&(yield ve(b.call(N)))}finally{if(S)throw S.error}}})})}else{const h=I0(this.apiClient,e);return u=re("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(y){return Zn(this,arguments,function*(){var v,S,b,M;try{for(var O=!0,N=Yn(y),R;R=yield ve(N.next()),v=R.done,!v;O=!0){M=R.value,O=!1;const I=M,z=P0(yield ve(I.json()));z.sdkHttpResponse={headers:I.headers};const K=new $a;Object.assign(K,z),yield yield ve(K)}}catch(I){S={error:I}}finally{try{!O&&!v&&(b=N.return)&&(yield ve(b.call(N)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=$D(this.apiClient,e);return u=re("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=KD(g),v=new u0;return Object.assign(v,y),v})}else{const h=qD(this.apiClient,e);return u=re("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=WD(g),v=new u0;return Object.assign(v,y),v})}}async generateImagesInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=rb(this.apiClient,e);return u=re("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=sb(g),v=new c0;return Object.assign(v,y),v})}else{const h=ib(this.apiClient,e);return u=re("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=ob(g),v=new c0;return Object.assign(v,y),v})}}async editImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=BD(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=zD(d),g=new JM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=rV(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=oV(d),g=new ZM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=Ob(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=Bb(d),g=new YM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=Wb(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=Kb(d),g=new QM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=xb(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Np(g))}else{const h=wb(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Rp(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=Mb(this.apiClient,e);return u=re("{models_url}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Db(g),v=new d0;return Object.assign(v,y),v})}else{const h=kb(this.apiClient,e);return u=re("{models_url}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Lb(g),v=new d0;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=nV(this.apiClient,e);return u=re("{model}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Np(g))}else{const h=tV(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Rp(g))}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=VD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=UD(g),v=new h0;return Object.assign(v,y),v})}else{const h=bD(this.apiClient,e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=FD(g),v=new h0;return Object.assign(v,y),v})}}async countTokens(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=MD(this.apiClient,e);return u=re("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=DD(g),v=new f0;return Object.assign(v,y),v})}else{const h=kD(this.apiClient,e);return u=re("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=LD(g),v=new f0;return Object.assign(v,y),v})}}async computeTokens(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=SD(this.apiClient,e);return o=re("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const h=CD(d),g=new XM;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=hb(this.apiClient,e);return u=re("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>{const y=cb(g),v=new gd;return Object.assign(v,y),v})}else{const h=db(this.apiClient,e);return u=re("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const y=ub(g),v=new gd;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XV extends Wi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=GM(e);return u=re("{operationName}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a}else{const h=zM(e);return u=re("{operationName}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=DM(e);return o=re("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jV(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function eF(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>uF(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function tF(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const o=c(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const a=c(e,["uses"]);n!==void 0&&a!=null&&f(n,["uses"],a);const u=c(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&f(n,["bidiGenerateContentSetup"],lF(t,u));const d=c(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&f(n,["fieldMask"],d),i}function nF(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],tF(t,i,n)),n}function iF(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rF(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function oF(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function sF(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function aF(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const h=c(t,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],vg(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],eF(zt(b)));const M=c(t,["tools"]);if(e!==void 0&&M!=null){let Y=oa(M);Array.isArray(Y)&&(Y=Y.map(D=>dF(ra(D)))),f(e,["setup","tools"],Y)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&f(e,["setup","sessionResumption"],cF(O));const N=c(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const z=c(t,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const K=c(t,["proactivity"]);if(e!==void 0&&K!=null&&f(e,["setup","proactivity"],K),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function lF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Ve(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],aF(r,n)),n}function uF(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],iF(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],rF(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],jV(d));const h=c(t,["text"]);h!=null&&f(e,["text"],h);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function cF(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dF(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=c(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const i=c(t,["fileSearch"]);i!=null&&f(e,["fileSearch"],i);const r=c(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=c(t,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],oF(a));const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],sF(u));const d=c(t,["googleSearchRetrieval"]);d!=null&&f(e,["googleSearchRetrieval"],d);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function fF(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=hF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(h=>a.includes(h)?`generationConfig.${h}`:h));const d=[];o&&d.push(o),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class pF extends Wi{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=nF(this.apiClient,e);o=re("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=fF(u,e.config);return r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mF(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function gF(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&mF(i,e),e}function _F(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function yF(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function vF(t){const e={},n=c(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const i=c(t,["config"]);return i!=null&&yF(i,e),e}function TF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EF extends Wi{constructor(e){super(),this.apiClient=e,this.list=async n=>new Io(qi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_F(e);return o=re("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gF(e);r=re("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vF(e);return o=re("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=TF(d),g=new jM;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wF extends Wi{constructor(e,n=new EF(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Io(qi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hV(e);return o=re("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mV(e);return o=re("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pV(e);r=re("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=EV(e);return o=re("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=wV(d),g=new e2;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xV(e);return o=re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=SV(d),g=new t2;return Object.assign(g,h),g})}}async importFile(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yV(e);return o=re("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=_V(d),g=new pg;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return wS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const xF=()=>wS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Lp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bn extends Error{}class Zt extends bn{constructor(e,n,i,r){super(`${Zt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new nh({message:i,cause:Lp(n)});const o=n;return e===400?new SS(e,o,i,r):e===401?new CS(e,o,i,r):e===403?new IS(e,o,i,r):e===404?new AS(e,o,i,r):e===409?new PS(e,o,i,r):e===422?new RS(e,o,i,r):e===429?new NS(e,o,i,r):e>=500?new kS(e,o,i,r):new Zt(e,o,i,r)}}class Dp extends Zt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class nh extends Zt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xS extends nh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class SS extends Zt{}class CS extends Zt{}class IS extends Zt{}class AS extends Zt{}class PS extends Zt{}class RS extends Zt{}class NS extends Zt{}class kS extends Zt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SF=/^[a-z][a-z0-9+.-]*:/i,CF=t=>SF.test(t);let bp=t=>(bp=Array.isArray,bp(t));const IF=bp;let AF=IF;const b0=AF;function PF(t){if(!t)return!0;for(const e in t)return!1;return!0}function RF(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const NF=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bn(`${t} must be an integer`);if(e<0)throw new bn(`${t} must be a positive integer`);return e},kF=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MF=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const as="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const DF=()=>{var t,e,n,i,r;const o=LF();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":as,"X-Stainless-OS":F0(Deno.build.os),"X-Stainless-Arch":V0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":as,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":as,"X-Stainless-OS":F0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":V0((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=bF();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":as,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":as,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bF(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${o}.${a}`}}}return null}const V0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",F0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ic;const VF=()=>ic??(ic=DF());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function MS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function UF(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return MS({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function LS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OF(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ef(t,e,n){return DS(),new File(t,e??"unknown_file",n)}function zF(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const GF=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",HF=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&bS(t),qF=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function $F(t,e,n){if(DS(),t=await t,HF(t))return t instanceof File?t:ef([await t.arrayBuffer()],t.name);if(qF(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ef(await Vp(r),e,n)}const i=await Vp(t);if(e||(e=zF(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return ef(i,e,n)}async function Vp(t){var e,n,i,r,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(bS(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(GF(t))try{for(var u=!0,d=Yn(t),h;h=await d.next(),e=h.done,!e;u=!0){r=h.value,u=!1;const g=r;a.push(...await Vp(g))}}catch(g){n={error:g}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const g=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${WF(t)}`)}return a}function WF(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VS{constructor(e){this._client=e}}VS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const U0=Object.freeze(Object.create(null)),KF=(t=FS)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],a=n.reduce((g,y,v)=>{var S,b,M;/[?#]/.test(y)&&(r=!0);const O=i[v];let N=(r?encodeURIComponent:t)(""+O);return v!==i.length&&(O==null||typeof O=="object"&&O.toString===((M=Object.getPrototypeOf((b=Object.getPrototypeOf((S=O.hasOwnProperty)!==null&&S!==void 0?S:U0))!==null&&b!==void 0?b:U0))===null||M===void 0?void 0:M.toString))&&(N=O+"",o.push({start:g.length+y.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),g+y+(v===i.length?"":N)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=d.exec(u))!==null;)o.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(o.sort((g,y)=>g.start-y.start),o.length>0){let g=0;const y=o.reduce((v,S)=>{const b=" ".repeat(S.start-g),M="^".repeat(S.length);return g=S.start+S.length,v+b+M},"");throw new bn(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${a}
${y}`)}return a},rc=KF(FS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class US extends VS{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=yd(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(rc`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(rc`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(rc`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:a=this._client.apiVersion}=o,u=yd(o,["api_version"]);return this._client.get(rc`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}US._key=Object.freeze(["interactions"]);class OS extends US{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JF(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let oc;function Eg(t){let e;return(oc??(e=new globalThis.TextEncoder,oc=e.encode.bind(e)))(t)}let sc;function O0(t){let e;return(sc??(e=new globalThis.TextDecoder,sc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ih{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Eg(e):e;this.buffer=JF([this.buffer,n]);const i=[];let r;for(;(r=ZF(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(O0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=O0(this.buffer.subarray(0,o));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}ih.NEWLINE_CHARS=new Set([`
`,"\r"]);ih.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function ZF(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function YF(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vd={off:0,error:200,warn:300,info:400,debug:500},B0=(t,e,n)=>{if(t){if(RF(vd,t))return t;Wt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(vd))}`)}};function el(){}function ac(t,e,n){return!e||vd[t]>vd[n]?el:e[t].bind(e)}const QF={error:el,warn:el,info:el,debug:el};let z0=new WeakMap;function Wt(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return QF;const r=z0.get(n);if(r&&r[0]===i)return r[1];const o={error:ac("error",n,i),warn:ac("warn",n,i),info:ac("info",n,i),debug:ac("debug",n,i)};return z0.set(n,[i,o]),o}const ro=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Es{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Wt(i):console;function a(){return Zn(this,arguments,function*(){var d,h,g,y;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var S=!0,b=Yn(XF(e,n)),M;M=yield ve(b.next()),d=M.done,!d;S=!0){y=M.value,S=!1;const O=y;if(!v)if(O.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield ve(JSON.parse(O.data))}catch(N){throw o.error("Could not parse message into JSON:",O.data),o.error("From chunk:",O.raw),N}}}catch(O){h={error:O}}finally{try{!S&&!d&&(g=b.return)&&(yield ve(g.call(b)))}finally{if(h)throw h.error}}v=!0}catch(O){if(Mp(O))return yield ve(void 0);throw O}finally{v||n.abort()}})}return new Es(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Zn(this,arguments,function*(){var d,h,g,y;const v=new ih,S=LS(e);try{for(var b=!0,M=Yn(S),O;O=yield ve(M.next()),d=O.done,!d;b=!0){y=O.value,b=!1;const N=y;for(const R of v.decode(N))yield yield ve(R)}}catch(N){h={error:N}}finally{try{!b&&!d&&(g=M.return)&&(yield ve(g.call(M)))}finally{if(h)throw h.error}}for(const N of v.flush())yield yield ve(N)})}function a(){return Zn(this,arguments,function*(){var d,h,g,y;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var S=!0,b=Yn(o()),M;M=yield ve(b.next()),d=M.done,!d;S=!0){y=M.value,S=!1;const O=y;v||O&&(yield yield ve(JSON.parse(O)))}}catch(O){h={error:O}}finally{try{!S&&!d&&(g=b.return)&&(yield ve(g.call(b)))}finally{if(h)throw h.error}}v=!0}catch(O){if(Mp(O))return yield ve(void 0);throw O}finally{v||n.abort()}})}return new Es(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const a=i.next();e.push(a),n.push(a)}return o.shift()}});return[new Es(()=>r(e),this.controller,this.client),new Es(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return MS({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const a=Eg(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function XF(t,e){return Zn(this,arguments,function*(){var i,r,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bn("Attempted to iterate over a response with no body");const u=new e4,d=new ih,h=LS(t.body);try{for(var g=!0,y=Yn(jF(h)),v;v=yield ve(y.next()),i=v.done,!i;g=!0){a=v.value,g=!1;const S=a;for(const b of d.decode(S)){const M=u.decode(b);M&&(yield yield ve(M))}}}catch(S){r={error:S}}finally{try{!g&&!i&&(o=y.return)&&(yield ve(o.call(y)))}finally{if(r)throw r.error}}for(const S of d.flush()){const b=u.decode(S);b&&(yield yield ve(b))}})}function jF(t){return Zn(this,arguments,function*(){var n,i,r,o;let a=new Uint8Array;try{for(var u=!0,d=Yn(t),h;h=yield ve(d.next()),n=h.done,!n;u=!0){o=h.value,u=!1;const g=o;if(g==null)continue;const y=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Eg(g):g;let v=new Uint8Array(a.length+y.length);v.set(a),v.set(y,a.length),a=v;let S;for(;(S=YF(a))!==-1;)yield yield ve(a.slice(0,S)),a=a.slice(S)}}catch(g){i={error:g}}finally{try{!u&&!n&&(r=d.return)&&(yield ve(r.call(d)))}finally{if(i)throw i.error}}a.length>0&&(yield yield ve(a))})}class e4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=t4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function t4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function n4(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,a=await(async()=>{var u;if(e.options.stream)return Wt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Es.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),h=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return Wt(t).debug(`[${i}] response parsed`,ro({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wg extends Promise{constructor(e,n,i=n4){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new wg(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BS=Symbol("brand.privateNullableHeaders");function*i4(t){if(!t)return;if(BS in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():b0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=b0(i[1])?i[1]:[i[1]];let a=!1;for(const u of o)u!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,u])}}const Wa=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,a]of i4(i)){const u=o.toLowerCase();r.has(u)||(e.delete(o),r.add(u)),a===null?(e.delete(o),n.add(u)):(e.append(o,a),n.delete(u))}}return{[BS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tf=t=>{var e,n,i,r,o,a;if(typeof globalThis.process<"u")return(i=(n=(e=PM)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zS;class rh{constructor(e){var n,i,r,o,a,u,d,{baseURL:h=tf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(n=tf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:y="v1beta"}=e,v=yd(e,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:g,apiVersion:y},v),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(i=S.timeout)!==null&&i!==void 0?i:rh.DEFAULT_TIMEOUT,this.logger=(r=S.logger)!==null&&r!==void 0?r:console;const b="warn";this.logLevel=b,this.logLevel=(a=(o=B0(S.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:B0(tf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:b,this.fetchOptions=S.fetchOptions,this.maxRetries=(u=S.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=S.fetch)!==null&&d!==void 0?d:FF(),this.encoder=BF,this._options=S,this.apiKey=g,this.apiVersion=y,this.clientAdapter=S.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Wa([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Wa([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Wa([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new bn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${as}`}defaultIdempotencyKey(){return`stainless-node-retry-${xF()}`}makeStatusError(e,n,i,r){return Zt.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=CF(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return PF(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new wg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,a;const u=await e,d=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:h,url:g,timeout:y}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(h,{url:g,options:u});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=i===void 0?"":`, retryOf: ${i}`,b=Date.now();if(Wt(this).debug(`[${v}] sending request`,ro({retryOfRequestLogID:i,method:u.method,url:g,options:u,headers:h.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new Dp;const M=new AbortController,O=await this.fetchWithTimeout(g,h,y,M).catch(Lp),N=Date.now();if(O instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Dp;const z=Mp(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(n)return Wt(this).info(`[${v}] connection ${z?"timed out":"failed"} - ${I}`),Wt(this).debug(`[${v}] connection ${z?"timed out":"failed"} (${I})`,ro({retryOfRequestLogID:i,url:g,durationMs:N-b,message:O.message})),this.retryRequest(u,n,i??v);throw Wt(this).info(`[${v}] connection ${z?"timed out":"failed"} - error; no more retries left`),Wt(this).debug(`[${v}] connection ${z?"timed out":"failed"} (error; no more retries left)`,ro({retryOfRequestLogID:i,url:g,durationMs:N-b,message:O.message})),z?new xS:new nh({cause:O})}const R=`[${v}${S}] ${h.method} ${g} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${N-b}ms`;if(!O.ok){const I=await this.shouldRetry(O);if(n&&I){const k=`retrying, ${n} attempts remaining`;return await OF(O.body),Wt(this).info(`${R} - ${k}`),Wt(this).debug(`[${v}] response error (${k})`,ro({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,durationMs:N-b})),this.retryRequest(u,n,i??v,O.headers)}const z=I?"error; no more retries left":"error; not retryable";Wt(this).info(`${R} - ${z}`);const K=await O.text().catch(k=>Lp(k).message),Y=kF(K),D=Y?void 0:K;throw Wt(this).debug(`[${v}] response error (${z})`,ro({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,message:D,durationMs:Date.now()-b})),this.makeStatusError(O.status,Y,D,O.headers)}return Wt(this).info(R),Wt(this).debug(`[${v}] response start`,ro({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,durationMs:N-b})),{response:O,options:u,controller:M,requestLogID:v,retryOfRequestLogID:i,startTime:b}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:a,method:u}=o,d=yd(o,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),g=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},g?{duplex:"half"}:{}),{method:"GET"}),d);u&&(y.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const h=parseFloat(u);Number.isNaN(h)||(a=h)}const d=r==null?void 0:r.get("retry-after");if(d&&!a){const h=parseFloat(d);Number.isNaN(h)?a=Date.parse(d)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await MF(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const a=Object.assign({},e),{method:u,path:d,query:h,defaultBaseURL:g}=a,y=this.buildURL(d,h,g);"timeout"in a&&NF("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:v,body:S}=this.buildBody({options:a}),b=await this.buildHeaders({options:e,method:u,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:b},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=Wa([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),VF()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Wa([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:UF(e)}:this.encoder({body:e,headers:i})}}rh.DEFAULT_TIMEOUT=6e4;class At extends rh{constructor(){super(...arguments),this.interactions=new OS(this)}}zS=At;At.GeminiNextGenAPIClient=zS;At.GeminiNextGenAPIClientError=bn;At.APIError=Zt;At.APIConnectionError=nh;At.APIConnectionTimeoutError=xS;At.APIUserAbortError=Dp;At.NotFoundError=AS;At.ConflictError=PS;At.RateLimitError=NS;At.BadRequestError=SS;At.AuthenticationError=CS;At.InternalServerError=kS;At.PermissionDeniedError=IS;At.UnprocessableEntityError=RS;At.toFile=$F;At.Interactions=OS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r4(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function o4(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function s4(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function a4(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function l4(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);if(a!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","batchSize"],u);const d=c(t,["learningRate"]);if(e!==void 0&&d!=null&&f(e,["tuningTask","hyperparameters","learningRate"],d),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function u4(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec"],G0(S))}else if(r==="PREFERENCE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec"],G0(S))}const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const a=c(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(u==="PREFERENCE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="PREFERENCE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let h=c(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(h==="PREFERENCE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let g=c(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(g==="PREFERENCE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=c(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);const v=c(t,["beta"]);return e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function c4(t,e){const n={},i=c(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&E4(o);const a=c(t,["config"]);return a!=null&&l4(a,n),n}function d4(t,e){const n={},i=c(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&w4(o,n,e);const a=c(t,["config"]);return a!=null&&u4(a,n,e),n}function h4(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function f4(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function p4(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function m4(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function g4(t,e){const n={},i=c(t,["config"]);return i!=null&&p4(i,n),n}function _4(t,e){const n={},i=c(t,["config"]);return i!=null&&m4(i,n),n}function y4(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const o=c(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>GS(u))),f(n,["tuningJobs"],a)}return n}function v4(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const o=c(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Fp(u))),f(n,["tuningJobs"],a)}return n}function T4(t,e){const n={},i=c(t,["name"]);i!=null&&f(n,["model"],i);const r=c(t,["name"]);return r!=null&&f(n,["endpoint"],r),n}function E4(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(n,["examples","examples"],r)}return n}function w4(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function GS(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["state"]);o!=null&&f(n,["state"],rS(o));const a=c(t,["createTime"]);a!=null&&f(n,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&f(n,["startTime"],u);const d=c(t,["tuningTask","completeTime"]);d!=null&&f(n,["endTime"],d);const h=c(t,["updateTime"]);h!=null&&f(n,["updateTime"],h);const g=c(t,["description"]);g!=null&&f(n,["description"],g);const y=c(t,["baseModel"]);y!=null&&f(n,["baseModel"],y);const v=c(t,["_self"]);return v!=null&&f(n,["tunedModel"],T4(v)),n}function Fp(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["state"]);o!=null&&f(n,["state"],rS(o));const a=c(t,["createTime"]);a!=null&&f(n,["createTime"],a);const u=c(t,["startTime"]);u!=null&&f(n,["startTime"],u);const d=c(t,["endTime"]);d!=null&&f(n,["endTime"],d);const h=c(t,["updateTime"]);h!=null&&f(n,["updateTime"],h);const g=c(t,["error"]);g!=null&&f(n,["error"],g);const y=c(t,["description"]);y!=null&&f(n,["description"],y);const v=c(t,["baseModel"]);v!=null&&f(n,["baseModel"],v);const S=c(t,["tunedModel"]);S!=null&&f(n,["tunedModel"],S);const b=c(t,["preTunedModel"]);b!=null&&f(n,["preTunedModel"],b);const M=c(t,["supervisedTuningSpec"]);M!=null&&f(n,["supervisedTuningSpec"],M);const O=c(t,["preferenceOptimizationSpec"]);O!=null&&f(n,["preferenceOptimizationSpec"],O);const N=c(t,["tuningDataStats"]);N!=null&&f(n,["tuningDataStats"],N);const R=c(t,["encryptionSpec"]);R!=null&&f(n,["encryptionSpec"],R);const I=c(t,["partnerModelTuningSpec"]);I!=null&&f(n,["partnerModelTuningSpec"],I);const z=c(t,["customBaseModel"]);z!=null&&f(n,["customBaseModel"],z);const K=c(t,["experiment"]);K!=null&&f(n,["experiment"],K);const Y=c(t,["labels"]);Y!=null&&f(n,["labels"],Y);const D=c(t,["outputUri"]);D!=null&&f(n,["outputUri"],D);const A=c(t,["pipelineJob"]);A!=null&&f(n,["pipelineJob"],A);const k=c(t,["serviceAccount"]);k!=null&&f(n,["serviceAccount"],k);const V=c(t,["tunedModelDisplayName"]);V!=null&&f(n,["tunedModelDisplayName"],V);const U=c(t,["veoTuningSpec"]);return U!=null&&f(n,["veoTuningSpec"],U),n}function x4(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["metadata"]);o!=null&&f(n,["metadata"],o);const a=c(t,["done"]);a!=null&&f(n,["done"],a);const u=c(t,["error"]);return u!=null&&f(n,["error"],u),n}function G0(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&f(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S4 extends Wi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Io(qi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Sp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=f4(e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>Fp(g))}else{const h=h4(e);return u=re("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>GS(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=_4(e);return u=re("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=v4(g),v=new p0;return Object.assign(v,y),v})}else{const h=g4(e);return u=re("tunedModels",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=y4(g),v=new p0;return Object.assign(v,y),v})}}async cancel(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=o4(e);return u=re("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=a4(g),v=new m0;return Object.assign(v,y),v})}else{const h=r4(e);return u=re("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=s4(g),v=new m0;return Object.assign(v,y),v})}}async tuneInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=d4(e,e);return o=re("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>Fp(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=c4(e);return o=re("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>x4(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C4{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const I4=1024*1024*8,A4=3,P4=1e3,R4=2,Td="x-goog-upload-status";async function N4(t,e,n){var i;const r=await HS(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function k4(t,e,n){var i;const r=await HS(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=Xx(o),u=new mg;return Object.assign(u,a),u}async function HS(t,e,n){var i,r;let o=0,a=0,u=new Ip(new Response),d="upload";for(o=t.size;a<o;){const h=Math.min(I4,o-a),g=t.slice(a,a+h);a+h>=o&&(d+=", finalize");let y=0,v=P4;for(;y<A4&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[Td]));)y++,await L4(v),v=v*R4;if(a+=h,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[Td])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function M4(t){return{size:t.size,type:t.type}}function L4(t){return new Promise(e=>setTimeout(e,t))}class D4{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await N4(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k4(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await M4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b4{create(e,n,i){return new V4(e,n,i)}}class V4{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H0="x-goog-api-key";class F4{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(H0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(H0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U4="gl-node/";class O4{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new At({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=MM(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new F4(this.apiKey);this.apiClient=new MV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:U4+"web",uploader:new D4,downloader:new C4}),this.models=new QV(this.apiClient),this.live=new $V(this.apiClient,r,new b4),this.batches=new aL(this.apiClient),this.chats=new GL(this.models,this.apiClient),this.caches=new OL(this.apiClient),this.files=new XL(this.apiClient),this.operations=new XV(this.apiClient),this.authTokens=new pF(this.apiClient),this.tunings=new S4(this.apiClient),this.fileSearchStores=new wF(this.apiClient)}}var B4={};const q0=B4.API_KEY||"";let Up=null;q0&&(Up=new O4({apiKey:q0}));const z4=async(t,e,n)=>{var i;if(!Up)return"";try{const r=`${n} ilesindeki ${t} isimli, ${e} ara kapasiteli taksi dura iin ksa, resmi bir tantm/bilgi notu yaz. 1 cmleyi gemesin.`;return((i=(await Up.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text)==null?void 0:i.trim())||""}catch(r){return console.error("Gemini AI Error:",r),""}};var Op={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(EC,function(n){var i="1.9.4";function r(s){var l,m,_,E;for(m=1,_=arguments.length;m<_;m++){E=arguments[m];for(l in E)s[l]=E[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var _=m.call(arguments,2);return function(){return s.apply(l,_.length?_.concat(m.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function h(s,l,m){var _,E,C,B;return B=function(){_=!1,E&&(C.apply(m,E),E=!1)},C=function(){_?E=arguments:(s.apply(m,arguments),setTimeout(B,l),_=!0)},C}function g(s,l,m){var _=l[1],E=l[0],C=_-E;return s===_&&m?s:((s-E)%C+C)%C+E}function y(){return!1}function v(s,l){if(l===!1)return s;var m=Math.pow(10,l===void 0?6:l);return Math.round(s*m)/m}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return S(s).split(/\s+/)}function M(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var m in l)s.options[m]=l[m];return s.options}function O(s,l,m){var _=[];for(var E in s)_.push(encodeURIComponent(m?E.toUpperCase():E)+"="+encodeURIComponent(s[E]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function R(s,l){return s.replace(N,function(m,_){var E=l[_];if(E===void 0)throw new Error("No value provided for variable "+m);return typeof E=="function"&&(E=E(l)),E})}var I=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var m=0;m<s.length;m++)if(s[m]===l)return m;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var D=0;function A(s){var l=+new Date,m=Math.max(0,16-(l-D));return D=l+m,window.setTimeout(s,m)}var k=window.requestAnimationFrame||Y("RequestAnimationFrame")||A,V=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function U(s,l,m){if(m&&k===A)s.call(l);else return k.call(window,a(s,l))}function G(s){s&&V.call(window,s)}var F={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:h,wrapNum:g,falseFn:y,formatNum:v,trim:S,splitWords:b,setOptions:M,getParamString:O,template:R,isArray:I,indexOf:z,emptyImageUrl:K,requestFn:k,cancelFn:V,requestAnimFrame:U,cancelAnimFrame:G};function xe(){}xe.extend=function(s){var l=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,_=o(m);_.constructor=l,l.prototype=_;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return s.statics&&r(l,s.statics),s.includes&&(pt(s.includes),r.apply(null,[_].concat(s.includes))),r(_,s),delete _.statics,delete _.includes,_.options&&(_.options=m.options?o(m.options):{},r(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,B=_._initHooks.length;C<B;C++)_._initHooks[C].call(this)}},l},xe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},xe.mergeOptions=function(s){return r(this.prototype.options,s),this},xe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function pt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=I(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var qe={on:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l);else{s=b(s);for(var E=0,C=s.length;E<C;E++)this._on(s[E],l,m)}return this},off:function(s,l,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],l);else{s=b(s);for(var E=arguments.length===1,C=0,B=s.length;C<B;C++)E?this._off(s[C]):this._off(s[C],l,m)}return this},_on:function(s,l,m,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,m)===!1){m===this&&(m=void 0);var E={fn:l,ctx:m};_&&(E.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(E)}},_off:function(s,l,m){var _,E,C;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(E=0,C=_.length;E<C;E++)_[E].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var B=this._listens(s,l,m);if(B!==!1){var W=_[B];this._firingCount&&(W.fn=y,this._events[s]=_=_.slice()),_.splice(B,1)}}},fire:function(s,l,m){if(!this.listens(s,m))return this;var _=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[s];if(E){this._firingCount=this._firingCount+1||1;for(var C=0,B=E.length;C<B;C++){var W=E[C],Z=W.fn;W.once&&this.off(s,Z,W.ctx),Z.call(W.ctx||this,_)}this._firingCount--}}return m&&this._propagateEvent(_),this},listens:function(s,l,m,_){typeof s!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(_=!!l,E=void 0,m=void 0);var C=this._events&&this._events[s];if(C&&C.length&&this._listens(s,E,m)!==!1)return!0;if(_){for(var B in this._eventParents)if(this._eventParents[B].listens(s,l,m,_))return!0}return!1},_listens:function(s,l,m){if(!this._events)return!1;var _=this._events[s]||[];if(!l)return!!_.length;m===this&&(m=void 0);for(var E=0,C=_.length;E<C;E++)if(_[E].fn===l&&_[E].ctx===m)return E;return!1},once:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l,!0);else{s=b(s);for(var E=0,C=s.length;E<C;E++)this._on(s[E],l,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};qe.addEventListener=qe.on,qe.removeEventListener=qe.clearAllEventListeners=qe.off,qe.addOneTimeEventListener=qe.once,qe.fireEvent=qe.fire,qe.hasEventListeners=qe.listens;var He=xe.extend(qe);function H(s,l,m){this.x=m?Math.round(s):s,this.y=m?Math.round(l):l}var ie=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(s){return this.clone()._add(q(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(q(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new H(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new H(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ie(this.x),this.y=ie(this.y),this},distanceTo:function(s){s=q(s);var l=s.x-this.x,m=s.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(s){return s=q(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=q(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function q(s,l,m){return s instanceof H?s:I(s)?new H(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new H(s.x,s.y):new H(s,l,m)}function ee(s,l){if(s)for(var m=l?[s,l]:s,_=0,E=m.length;_<E;_++)this.extend(m[_])}ee.prototype={extend:function(s){var l,m;if(!s)return this;if(s instanceof H||typeof s[0]=="number"||"x"in s)l=m=q(s);else if(s=he(s),l=s.min,m=s.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,m;return typeof s[0]=="number"||s instanceof H?s=q(s):s=he(s),s instanceof ee?(l=s.min,m=s.max):l=m=s,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=he(s);var l=this.min,m=this.max,_=s.min,E=s.max,C=E.x>=l.x&&_.x<=m.x,B=E.y>=l.y&&_.y<=m.y;return C&&B},overlaps:function(s){s=he(s);var l=this.min,m=this.max,_=s.min,E=s.max,C=E.x>l.x&&_.x<m.x,B=E.y>l.y&&_.y<m.y;return C&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,m=this.max,_=Math.abs(l.x-m.x)*s,E=Math.abs(l.y-m.y)*s;return he(q(l.x-_,l.y-E),q(m.x+_,m.y+E))},equals:function(s){return s?(s=he(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function he(s,l){return!s||s instanceof ee?s:new ee(s,l)}function $e(s,l){if(s)for(var m=l?[s,l]:s,_=0,E=m.length;_<E;_++)this.extend(m[_])}$e.prototype={extend:function(s){var l=this._southWest,m=this._northEast,_,E;if(s instanceof we)_=s,E=s;else if(s instanceof $e){if(_=s._southWest,E=s._northEast,!_||!E)return this}else return s?this.extend(fe(s)||Ae(s)):this;return!l&&!m?(this._southWest=new we(_.lat,_.lng),this._northEast=new we(E.lat,E.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),m.lat=Math.max(E.lat,m.lat),m.lng=Math.max(E.lng,m.lng)),this},pad:function(s){var l=this._southWest,m=this._northEast,_=Math.abs(l.lat-m.lat)*s,E=Math.abs(l.lng-m.lng)*s;return new $e(new we(l.lat-_,l.lng-E),new we(m.lat+_,m.lng+E))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=fe(s):s=Ae(s);var l=this._southWest,m=this._northEast,_,E;return s instanceof $e?(_=s.getSouthWest(),E=s.getNorthEast()):_=E=s,_.lat>=l.lat&&E.lat<=m.lat&&_.lng>=l.lng&&E.lng<=m.lng},intersects:function(s){s=Ae(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),C=E.lat>=l.lat&&_.lat<=m.lat,B=E.lng>=l.lng&&_.lng<=m.lng;return C&&B},overlaps:function(s){s=Ae(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),C=E.lat>l.lat&&_.lat<m.lat,B=E.lng>l.lng&&_.lng<m.lng;return C&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Ae(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ae(s,l){return s instanceof $e?s:new $e(s,l)}function we(s,l,m){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,m!==void 0&&(this.alt=+m)}we.prototype={equals:function(s,l){if(!s)return!1;s=fe(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Xt.distance(this,fe(s))},wrap:function(){return Xt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,m=l/Math.cos(Math.PI/180*this.lat);return Ae([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function fe(s,l,m){return s instanceof we?s:I(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new we(s,l,m)}var je={latLngToPoint:function(s,l){var m=this.projection.project(s),_=this.scale(l);return this.transformation._transform(m,_)},pointToLatLng:function(s,l){var m=this.scale(l),_=this.transformation.untransform(s,m);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(s),_=this.transformation.transform(l.min,m),E=this.transformation.transform(l.max,m);return new ee(_,E)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new we(m,l,_)},wrapLatLngBounds:function(s){var l=s.getCenter(),m=this.wrapLatLng(l),_=l.lat-m.lat,E=l.lng-m.lng;if(_===0&&E===0)return s;var C=s.getSouthWest(),B=s.getNorthEast(),W=new we(C.lat-_,C.lng-E),Z=new we(B.lat-_,B.lng-E);return new $e(W,Z)}},Xt=r({},je,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var m=Math.PI/180,_=s.lat*m,E=l.lat*m,C=Math.sin((l.lat-s.lat)*m/2),B=Math.sin((l.lng-s.lng)*m/2),W=C*C+Math.cos(_)*Math.cos(E)*B*B,Z=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*Z}}),aa=6378137,la={R:aa,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,m=this.MAX_LATITUDE,_=Math.max(Math.min(m,s.lat),-m),E=Math.sin(_*l);return new H(this.R*s.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(s){var l=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=aa*Math.PI;return new ee([-s,-s],[s,s])}()};function ua(s,l,m,_){if(I(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=m,this._d=_}ua.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new H((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ji(s,l,m,_){return new ua(s,l,m,_)}var Or=r({},Xt,{code:"EPSG:3857",projection:la,transformation:function(){var s=.5/(Math.PI*la.R);return Ji(s,.5,-s,.5)}()}),eu=r({},Or,{code:"EPSG:900913"});function tu(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ao(s,l){var m="",_,E,C,B,W,Z;for(_=0,C=s.length;_<C;_++){for(W=s[_],E=0,B=W.length;E<B;E++)Z=W[E],m+=(E?"L":"M")+Z.x+" "+Z.y;m+=l?ue.svg?"z":"x":""}return m||"M0 0"}var Br=document.documentElement.style,zr="ActiveXObject"in window,vt=zr&&!document.addEventListener,Tt="msLaunchUri"in navigator&&!("documentMode"in document),Zi=jt("webkit"),nu=jt("android"),ca=jt("android 2")||jt("android 3"),oh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gr=nu&&jt("Google")&&oh<537&&!("AudioNode"in window),Po=!!window.opera,da=!Tt&&jt("chrome"),Ro=jt("gecko")&&!Zi&&!Po&&!zr,sh=!da&&jt("safari"),iu=jt("phantom"),ha="OTransition"in Br,ru=navigator.platform.indexOf("Win")===0,Yi=zr&&"transition"in Br,Hr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ca,No="MozPerspective"in Br,Ti=!window.L_DISABLE_3D&&(Yi||Hr||No)&&!ha&&!iu,Qi=typeof orientation<"u"||jt("mobile"),ko=Qi&&Zi,ou=Qi&&Hr,Xi=!window.PointerEvent&&window.MSPointerEvent,fa=!!(window.PointerEvent||Xi),Et="ontouchstart"in window||!!window.TouchEvent,su=!window.L_NO_TOUCH&&(Et||fa),qr=Qi&&Po,$r=Qi&&Ro,ah=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,lh=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),ji=function(){return!!document.createElement("canvas").getContext}(),pa=!!(document.createElementNS&&tu("svg").createSVGRect),uh=!!pa&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Mo=!pa&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),au=navigator.platform.indexOf("Mac")===0,lu=navigator.platform.indexOf("Linux")===0;function jt(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:zr,ielt9:vt,edge:Tt,webkit:Zi,android:nu,android23:ca,androidStock:Gr,opera:Po,chrome:da,gecko:Ro,safari:sh,phantom:iu,opera12:ha,win:ru,ie3d:Yi,webkit3d:Hr,gecko3d:No,any3d:Ti,mobile:Qi,mobileWebkit:ko,mobileWebkit3d:ou,msPointer:Xi,pointer:fa,touch:su,touchNative:Et,mobileOpera:qr,mobileGecko:$r,retina:ah,passiveEvents:lh,canvas:ji,svg:pa,vml:Mo,inlineSvg:uh,mac:au,linux:lu},uu=ue.msPointer?"MSPointerDown":"pointerdown",Vn=ue.msPointer?"MSPointerMove":"pointermove",ma=ue.msPointer?"MSPointerUp":"pointerup",ga=ue.msPointer?"MSPointerCancel":"pointercancel",Wr={touchstart:uu,touchmove:Vn,touchend:ma,touchcancel:ga},Lo={touchstart:_a,touchmove:vn,touchend:vn,touchcancel:vn},Ei={},cu=!1;function du(s,l,m){return l==="touchstart"&&Kr(),Lo[l]?(m=Lo[l].bind(this,m),s.addEventListener(Wr[l],m,!1),m):(console.warn("wrong event specified:",l),y)}function ch(s,l,m){if(!Wr[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Wr[l],m,!1)}function Do(s){Ei[s.pointerId]=s}function hu(s){Ei[s.pointerId]&&(Ei[s.pointerId]=s)}function bo(s){delete Ei[s.pointerId]}function Kr(){cu||(document.addEventListener(uu,Do,!0),document.addEventListener(Vn,hu,!0),document.addEventListener(ma,bo,!0),document.addEventListener(ga,bo,!0),cu=!0)}function vn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in Ei)l.touches.push(Ei[m]);l.changedTouches=[l],s(l)}}function _a(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ut(l),vn(s,l)}function dh(s){var l={},m,_;for(_ in s)m=s[_],l[_]=m&&m.bind?m.bind(s):m;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var fu=200;function pu(s,l){s.addEventListener("dblclick",l);var m=0,_;function E(C){if(C.detail!==1){_=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var B=wa(C);if(!(B.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!B.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var W=Date.now();W-m<=fu?(_++,_===2&&l(dh(C))):_=1,m=W}}}return s.addEventListener("click",E),{dblclick:l,simDblclick:E}}function mu(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Jr=Vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=Vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ya=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function va(s){return typeof s=="string"?document.getElementById(s):s}function er(s,l){var m=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);m=_?_[l]:null}return m==="auto"?null:m}function Ne(s,l,m){var _=document.createElement(s);return _.className=l||"",m&&m.appendChild(_),_}function De(s){var l=s.parentNode;l&&l.removeChild(s)}function Ht(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Tn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function En(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Zr(s,l){if(s.classList!==void 0)return s.classList.contains(l);var m=jn(s);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function ae(s,l){if(s.classList!==void 0)for(var m=b(l),_=0,E=m.length;_<E;_++)s.classList.add(m[_]);else if(!Zr(s,l)){var C=jn(s);xi(s,(C?C+" ":"")+l)}}function We(s,l){s.classList!==void 0?s.classList.remove(l):xi(s,S((" "+jn(s)+" ").replace(" "+l+" "," ")))}function xi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function jn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function en(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&gu(s,l)}function gu(s,l){var m=!1,_="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):s.style.filter+=" progid:"+_+"(opacity="+l+")"}function Vo(s){for(var l=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in l)return s[m];return!1}function Si(s,l,m){var _=l||new H(0,0);s.style[Jr]=(ue.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(m?" scale("+m+")":"")}function rt(s,l){s._leaflet_pos=l,ue.any3d?Si(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Ci(s){return s._leaflet_pos||new H(0,0)}var Fn,dn,Fo;if("onselectstart"in document)Fn=function(){_e(window,"selectstart",ut)},dn=function(){ze(window,"selectstart",ut)};else{var tr=Vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Fn=function(){if(tr){var s=document.documentElement.style;Fo=s[tr],s[tr]="none"}},dn=function(){tr&&(document.documentElement.style[tr]=Fo,Fo=void 0)}}function Uo(){_e(window,"dragstart",ut)}function Oo(){ze(window,"dragstart",ut)}var Yr,ei;function Ta(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Bo(),Yr=s,ei=s.style.outlineStyle,s.style.outlineStyle="none",_e(window,"keydown",Bo))}function Bo(){Yr&&(Yr.style.outlineStyle=ei,Yr=void 0,ei=void 0,ze(window,"keydown",Bo))}function _u(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function wn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var hh={__proto__:null,TRANSFORM:Jr,TRANSITION:wi,TRANSITION_END:ya,get:va,getStyle:er,create:Ne,remove:De,empty:Ht,toFront:Tn,toBack:En,hasClass:Zr,addClass:ae,removeClass:We,setClass:xi,getClass:jn,setOpacity:en,testProp:Vo,setTransform:Si,setPosition:rt,getPosition:Ci,get disableTextSelection(){return Fn},get enableTextSelection(){return dn},disableImageDrag:Uo,enableImageDrag:Oo,preventOutline:Ta,restoreOutline:Bo,getSizedParentNode:_u,getScale:wn};function _e(s,l,m,_){if(l&&typeof l=="object")for(var E in l)zo(s,E,l[E],m);else{l=b(l);for(var C=0,B=l.length;C<B;C++)zo(s,l[C],m,_)}return this}var qt="_leaflet_events";function ze(s,l,m,_){if(arguments.length===1)nr(s),delete s[qt];else if(l&&typeof l=="object")for(var E in l)Qr(s,E,l[E],m);else if(l=b(l),arguments.length===2)nr(s,function(W){return z(l,W)!==-1});else for(var C=0,B=l.length;C<B;C++)Qr(s,l[C],m,_);return this}function nr(s,l){for(var m in s[qt]){var _=m.split(/\d/)[0];(!l||l(_))&&Qr(s,_,null,null,m)}}var Ii={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zo(s,l,m,_){var E=l+d(m)+(_?"_"+d(_):"");if(s[qt]&&s[qt][E])return this;var C=function(W){return m.call(_||s,W||window.event)},B=C;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?C=du(s,l,C):ue.touch&&l==="dblclick"?C=pu(s,C):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Ii[l]||l,C,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(C=function(W){W=W||window.event,Sa(s,W)&&B(W)},s.addEventListener(Ii[l],C,!1)):s.addEventListener(l,B,!1):s.attachEvent("on"+l,C),s[qt]=s[qt]||{},s[qt][E]=C}function Qr(s,l,m,_,E){E=E||l+d(m)+(_?"_"+d(_):"");var C=s[qt]&&s[qt][E];if(!C)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?ch(s,l,C):ue.touch&&l==="dblclick"?mu(s,C):"removeEventListener"in s?s.removeEventListener(Ii[l]||l,C,!1):s.detachEvent("on"+l,C),s[qt][E]=null}function Ue(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ea(s){return zo(s,"wheel",Ue),this}function Xr(s){return _e(s,"mousedown touchstart dblclick contextmenu",Ue),s._leaflet_disable_click=!0,this}function ut(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ti(s){return ut(s),Ue(s),this}function wa(s){if(s.composedPath)return s.composedPath();for(var l=[],m=s.target;m;)l.push(m),m=m.parentNode;return l}function jr(s,l){if(!l)return new H(s.clientX,s.clientY);var m=wn(l),_=m.boundingClientRect;return new H((s.clientX-_.left)/m.x-l.clientLeft,(s.clientY-_.top)/m.y-l.clientTop)}var ni=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xa(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ni:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Sa(s,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var eo={__proto__:null,on:_e,off:ze,stopPropagation:Ue,disableScrollPropagation:Ea,disableClickPropagation:Xr,preventDefault:ut,stop:ti,getPropagationPath:wa,getMousePosition:jr,getWheelDelta:xa,isExternalTarget:Sa,addListener:_e,removeListener:ze},Ca=He.extend({run:function(s,l,m,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Ci(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var m=this._startPos.add(this._offset.multiplyBy(s));l&&m._round(),rt(this._el,m),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=He.extend({options:{crs:Or,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=M(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(fe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,ya,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(fe(s),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=r({animate:m.animate},m.zoom),m.pan=r({animate:m.animate,duration:m.duration},m.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,m.zoom):this._tryAnimatedPan(s,m.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,m){var _=this.getZoomScale(l),E=this.getSize().divideBy(2),C=s instanceof H?s:this.latLngToContainerPoint(s),B=C.subtract(E).multiplyBy(1-1/_),W=this.containerPointToLatLng(E.add(B));return this.setView(W,l,{zoom:m})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Ae(s);var m=q(l.paddingTopLeft||l.padding||[0,0]),_=q(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(s,!1,m.add(_));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:s.getCenter(),zoom:E};var C=_.subtract(m).divideBy(2),B=this.project(s.getSouthWest(),E),W=this.project(s.getNorthEast(),E),Z=this.unproject(B.add(W).divideBy(2).add(C),E);return{center:Z,zoom:E}},fitBounds:function(s,l){if(s=Ae(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=q(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ca,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ae(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,m){if(m=m||{},m.animate===!1||!ue.any3d)return this.setView(s,l,m);this._stop();var _=this.project(this.getCenter()),E=this.project(s),C=this.getSize(),B=this._zoom;s=fe(s),l=l===void 0?B:l;var W=Math.max(C.x,C.y),Z=W*this.getZoomScale(B,l),X=E.distanceTo(_)||1,oe=1.42,pe=oe*oe;function Ce(ct){var Lu=ct?-1:1,_C=ct?Z:W,yC=Z*Z-W*W+Lu*pe*pe*X*X,vC=2*_C*pe*X,_h=yC/vC,qg=Math.sqrt(_h*_h+1)-_h,TC=qg<1e-9?-18:Math.log(qg);return TC}function $t(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function wt(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function Cn(ct){return $t(ct)/wt(ct)}var nn=Ce(0);function es(ct){return W*(wt(nn)/wt(nn+oe*ct))}function fC(ct){return W*(wt(nn)*Cn(nn+oe*ct)-$t(nn))/pe}function pC(ct){return 1-Math.pow(1-ct,1.5)}var mC=Date.now(),Gg=(Ce(1)-nn)/oe,gC=m.duration?1e3*m.duration:1e3*Gg*.8;function Hg(){var ct=(Date.now()-mC)/gC,Lu=pC(ct)*Gg;ct<=1?(this._flyToFrame=U(Hg,this),this._move(this.unproject(_.add(E.subtract(_).multiplyBy(fC(Lu)/X)),B),this.getScaleZoom(W/es(Lu),B),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Hg.call(this),this},flyToBounds:function(s,l){var m=this._getBoundsCenterZoom(s,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(s){return s=Ae(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var m=this.getCenter(),_=this._limitCenter(m,this._zoom,Ae(s));return m.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var m=q(l.paddingTopLeft||l.padding||[0,0]),_=q(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),C=this.project(s),B=this.getPixelBounds(),W=he([B.min.add(m),B.max.subtract(_)]),Z=W.getSize();if(!W.contains(C)){this._enforcingBounds=!0;var X=C.subtract(W.getCenter()),oe=W.extend(C).getSize().subtract(Z);E.x+=X.x<0?-oe.x:oe.x,E.y+=X.y<0?-oe.y:oe.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),_=l.divideBy(2).round(),E=m.divideBy(2).round(),C=_.subtract(E);return!C.x&&!C.y?this:(s.animate&&s.pan?this.panBy(C):(s.pan&&this._rawPanBy(C),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),m=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,s):navigator.geolocation.getCurrentPosition(l,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,m=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,m=s.coords.longitude,_=new we(l,m),E=_.toBounds(s.coords.accuracy*2),C=this._locateOptions;if(C.setView){var B=this.getBoundsZoom(E);this.setView(_,C.maxZoom?Math.min(B,C.maxZoom):B)}var W={latlng:_,bounds:E,timestamp:s.timestamp};for(var Z in s.coords)typeof s.coords[Z]=="number"&&(W[Z]=s.coords[Z]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var m=this[s]=new l(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),De(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)De(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=Ne("div",m,l||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new $e(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,m){s=Ae(s),m=q(m||[0,0]);var _=this.getZoom()||0,E=this.getMinZoom(),C=this.getMaxZoom(),B=s.getNorthWest(),W=s.getSouthEast(),Z=this.getSize().subtract(m),X=he(this.project(W,_),this.project(B,_)).getSize(),oe=ue.any3d?this.options.zoomSnap:1,pe=Z.x/X.x,Ce=Z.y/X.y,$t=l?Math.max(pe,Ce):Math.min(pe,Ce);return _=this.getScaleZoom($t,_),oe&&(_=Math.round(_/(oe/100))*(oe/100),_=l?Math.ceil(_/oe)*oe:Math.floor(_/oe)*oe),Math.max(E,Math.min(C,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var m=this._getTopLeftPoint(s,l);return new ee(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(s)/m.scale(l)},getScaleZoom:function(s,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var _=m.zoom(s*m.scale(l));return isNaN(_)?1/0:_},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(fe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(q(s),l)},layerPointToLatLng:function(s){var l=q(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(fe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ae(s))},distance:function(s,l){return this.options.crs.distance(fe(s),fe(l))},containerPointToLayerPoint:function(s){return q(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return q(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(q(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(s)))},mouseEventToContainerPoint:function(s){return jr(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=va(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ae(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=er(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rt(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(s.markerPane,"leaflet-zoom-hide"),ae(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,m){rt(this._mapPane,new H(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,m)._move(s,l)._moveEnd(E),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,m,_){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?m&&m.pinch&&this.fire("zoom",m):((E||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){rt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?ze:_e;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var m=[],_,E=l==="mouseout"||l==="mouseover",C=s.target||s.srcElement,B=!1;C;){if(_=this._targets[d(C)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){B=!0;break}if(_&&_.listens(l,!0)&&(E&&!Sa(C,s)||(m.push(_),E))||C===this._container)break;C=C.parentNode}return!m.length&&!B&&!E&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var m=s.type;m==="mousedown"&&Ta(l),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,m){if(s.type==="click"){var _=r({},s);_.type="preclick",this._fireDOMEvent(_,_.type,m)}var E=this._findEventTargets(s,l);if(m){for(var C=[],B=0;B<m.length;B++)m[B].listens(l,!0)&&C.push(m[B]);E=C.concat(E)}if(E.length){l==="contextmenu"&&ut(s);var W=E[0],Z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var X=W.getLatLng&&(!W._radius||W._radius<=10);Z.containerPoint=X?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=X?W.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(B=0;B<E.length;B++)if(E[B].fire(l,Z,!0),Z.originalEvent._stopped||E[B].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Ci(this._mapPane)||new H(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var m=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var m=this.getSize()._divideBy(2);return this.project(s,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return this.project(s,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return he([this.project(s.getSouthWest(),l)._subtract(_),this.project(s.getNorthWest(),l)._subtract(_),this.project(s.getSouthEast(),l)._subtract(_),this.project(s.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,m){if(!m)return s;var _=this.project(s,l),E=this.getSize().divideBy(2),C=new ee(_.subtract(E),_.add(E)),B=this._getBoundsOffset(C,m,l);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?s:this.unproject(_.add(B),l)},_limitOffset:function(s,l){if(!l)return s;var m=this.getPixelBounds(),_=new ee(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(s,l,m){var _=he(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),E=_.min.subtract(s.min),C=_.max.subtract(s.max),B=this._rebound(E.x,-C.x),W=this._rebound(E.y,-C.y);return new H(B,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),m=this.getMaxZoom(),_=ue.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(l,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var m=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var m=Jr,_=this._proxy.style[m];Si(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){De(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Si(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),E=this._getCenterOffset(s)._divideBy(1-1/_);return m.animate!==!0&&!this.getSize().contains(E)?!1:(U(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,m,_){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Go(s,l){return new Se(s,l)}var tn=xe.extend({options:{position:"topright"},initialize:function(s){M(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),m=this.getPosition(),_=s._controlCorners[m];return ae(l,"leaflet-control"),m.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(De(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ii=function(s){return new tn(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",m=this._controlContainer=Ne("div",l+"control-container",this._container);function _(E,C){var B=l+E+" "+l+C;s[E+C]=Ne("div",B,m)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)De(this._controlCorners[s]);De(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var yu=tn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,m,_){return m<_?-1:_<m?1:0}},initialize:function(s,l,m){M(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return tn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ne("div",s),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Xr(l),Ea(l);var _=this._section=Ne("section",s+"-list");m&&(this._map.on("click",this.collapse,this),_e(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ne("a",s+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),_e(E,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){ut(C),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Ne("div",s+"-base",_),this._separator=Ne("div",s+"-separator",_),this._overlaysList=Ne("div",s+"-overlays",_),l.appendChild(_)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(a(function(_,E){return this.options.sortFunction(_.layer,E.layer,_.name,E.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ht(this._baseLayersList),Ht(this._overlaysList),this._layerControlInputs=[];var s,l,m,_,E=0;for(m=0;m<this._layers.length;m++)_=this._layers[m],this._addItem(_),l=l||_.overlay,s=s||!_.overlay,E+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&E>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),m=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(s,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=m,_.firstChild},_addItem:function(s){var l=document.createElement("label"),m=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=m):_=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(_),_.layerId=d(s.layer),_e(_,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+s.name;var C=document.createElement("span");l.appendChild(C),C.appendChild(_),C.appendChild(E);var B=s.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,m,_=[],E=[];this._handlingClick=!0;for(var C=s.length-1;C>=0;C--)l=s[C],m=this._getLayer(l.layerId).layer,l.checked?_.push(m):l.checked||E.push(m);for(C=0;C<E.length;C++)this._map.hasLayer(E[C])&&this._map.removeLayer(E[C]);for(C=0;C<_.length;C++)this._map.hasLayer(_[C])||this._map.addLayer(_[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,m,_=this._map.getZoom(),E=s.length-1;E>=0;E--)l=s[E],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&_<m.options.minZoom||m.options.maxZoom!==void 0&&_>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,_e(s,"click",ut),this.expand();var l=this;setTimeout(function(){ze(s,"click",ut),l._preventClick=!1})}}),vu=function(s,l,m){return new yu(s,l,m)},Ai=tn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",m=Ne("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,m,_,E){var C=Ne("a",m,_);return C.innerHTML=s,C.href="#",C.title=l,C.setAttribute("role","button"),C.setAttribute("aria-label",l),Xr(C),_e(C,"click",ti),_e(C,"click",E,this),_e(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";We(this._zoomInButton,l),We(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ae(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ae(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ai,this.addControl(this.zoomControl))});var Tu=function(s){return new Ai(s)},Ia=tn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",m=Ne("div",l),_=this.options;return this._addScales(_,l+"-line",m),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,m){s.metric&&(this._mScale=Ne("div",l,m)),s.imperial&&(this._iScale=Ne("div",l,m))},_update:function(){var s=this._map,l=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/s)},_updateImperial:function(s){var l=s*3.2808399,m,_,E;l>5280?(m=l/5280,_=this._getRoundNum(m),this._updateScale(this._iScale,_+" mi",_/m)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(s,l,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),m=s/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),Aa=function(s){return new Ia(s)},Pa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ho=tn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Pa+" ":"")+"Leaflet</a>"},initialize:function(s){M(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),Xr(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new Ho().addTo(this)});var qo=function(s){return new Ho(s)};tn.Layers=yu,tn.Zoom=Ai,tn.Scale=Ia,tn.Attribution=Ho,ii.layers=vu,ii.zoom=Tu,ii.scale=Aa,ii.attribution=qo;var hn=xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});hn.addTo=function(s,l){return s.addHandler(l,this),this};var Eu={Events:qe},ri=ue.touch?"touchstart mousedown":"mousedown",Un=He.extend({options:{clickTolerance:3},initialize:function(s,l,m,_){M(this,_),this._element=s,this._dragStartTarget=l||s,this._preventOutline=m},enable:function(){this._enabled||(_e(this._dragStartTarget,ri,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Un._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,ri,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Zr(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Un._dragging===this&&this.finishDrag();return}if(!(Un._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Un._dragging=this,this._preventOutline&&Ta(this._element),Uo(),Fn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,m=_u(this._element);this._startPoint=new H(l.clientX,l.clientY),this._startPos=Ci(this._element),this._parentScale=wn(m);var _=s.type==="mousedown";_e(document,_?"mousemove":"touchmove",this._onMove,this),_e(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,m=new H(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,ut(s),this._moved||(this.fire("dragstart"),this._moved=!0,ae(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),rt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),Oo(),dn();var l=this._moved&&this._moving;this._moving=!1,Un._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ra(s,l,m){var _,E=[1,4,2,8],C,B,W,Z,X,oe,pe,Ce;for(C=0,oe=s.length;C<oe;C++)s[C]._code=J(s[C],l);for(W=0;W<4;W++){for(pe=E[W],_=[],C=0,oe=s.length,B=oe-1;C<oe;B=C++)Z=s[C],X=s[B],Z._code&pe?X._code&pe||(Ce=$(X,Z,pe,l,m),Ce._code=J(Ce,l),_.push(Ce)):(X._code&pe&&(Ce=$(X,Z,pe,l,m),Ce._code=J(Ce,l),_.push(Ce)),_.push(Z));s=_}return s}function Na(s,l){var m,_,E,C,B,W,Z,X,oe;if(!s||s.length===0)throw new Error("latlngs not passed");be(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var pe=fe([0,0]),Ce=Ae(s),$t=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());$t<1700&&(pe=$o(s));var wt=s.length,Cn=[];for(m=0;m<wt;m++){var nn=fe(s[m]);Cn.push(l.project(fe([nn.lat-pe.lat,nn.lng-pe.lng])))}for(W=Z=X=0,m=0,_=wt-1;m<wt;_=m++)E=Cn[m],C=Cn[_],B=E.y*C.x-C.y*E.x,Z+=(E.x+C.x)*B,X+=(E.y+C.y)*B,W+=B*3;W===0?oe=Cn[0]:oe=[Z/W,X/W];var es=l.unproject(q(oe));return fe([es.lat+pe.lat,es.lng+pe.lng])}function $o(s){for(var l=0,m=0,_=0,E=0;E<s.length;E++){var C=fe(s[E]);l+=C.lat,m+=C.lng,_++}return fe([l/_,m/_])}var Wo={__proto__:null,clipPolygon:Ra,polygonCenter:Na,centroid:$o};function Dt(s,l){if(!l||!s.length)return s.slice();var m=l*l;return s=T(s,m),s=ir(s,m),s}function ka(s,l,m){return Math.sqrt(ye(s,l,m,!0))}function wu(s,l,m){return ye(s,l,m)}function ir(s,l){var m=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,E=new _(m);E[0]=E[m-1]=1,p(s,E,l,0,m-1);var C,B=[];for(C=0;C<m;C++)E[C]&&B.push(s[C]);return B}function p(s,l,m,_,E){var C=0,B,W,Z;for(W=_+1;W<=E-1;W++)Z=ye(s[W],s[_],s[E],!0),Z>C&&(B=W,C=Z);C>m&&(l[B]=1,p(s,l,m,_,B),p(s,l,m,B,E))}function T(s,l){for(var m=[s[0]],_=1,E=0,C=s.length;_<C;_++)ne(s[_],s[E])>l&&(m.push(s[_]),E=_);return E<C-1&&m.push(s[C-1]),m}var x;function P(s,l,m,_,E){var C=_?x:J(s,m),B=J(l,m),W,Z,X;for(x=B;;){if(!(C|B))return[s,l];if(C&B)return!1;W=C||B,Z=$(s,l,W,m,E),X=J(Z,m),W===C?(s=Z,C=X):(l=Z,B=X)}}function $(s,l,m,_,E){var C=l.x-s.x,B=l.y-s.y,W=_.min,Z=_.max,X,oe;return m&8?(X=s.x+C*(Z.y-s.y)/B,oe=Z.y):m&4?(X=s.x+C*(W.y-s.y)/B,oe=W.y):m&2?(X=Z.x,oe=s.y+B*(Z.x-s.x)/C):m&1&&(X=W.x,oe=s.y+B*(W.x-s.x)/C),new H(X,oe,E)}function J(s,l){var m=0;return s.x<l.min.x?m|=1:s.x>l.max.x&&(m|=2),s.y<l.min.y?m|=4:s.y>l.max.y&&(m|=8),m}function ne(s,l){var m=l.x-s.x,_=l.y-s.y;return m*m+_*_}function ye(s,l,m,_){var E=l.x,C=l.y,B=m.x-E,W=m.y-C,Z=B*B+W*W,X;return Z>0&&(X=((s.x-E)*B+(s.y-C)*W)/Z,X>1?(E=m.x,C=m.y):X>0&&(E+=B*X,C+=W*X)),B=s.x-E,W=s.y-C,_?B*B+W*W:new H(E,C)}function be(s){return!I(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Oe(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),be(s)}function st(s,l){var m,_,E,C,B,W,Z,X;if(!s||s.length===0)throw new Error("latlngs not passed");be(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var oe=fe([0,0]),pe=Ae(s),Ce=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Ce<1700&&(oe=$o(s));var $t=s.length,wt=[];for(m=0;m<$t;m++){var Cn=fe(s[m]);wt.push(l.project(fe([Cn.lat-oe.lat,Cn.lng-oe.lng])))}for(m=0,_=0;m<$t-1;m++)_+=wt[m].distanceTo(wt[m+1])/2;if(_===0)X=wt[0];else for(m=0,C=0;m<$t-1;m++)if(B=wt[m],W=wt[m+1],E=B.distanceTo(W),C+=E,C>_){Z=(C-_)/E,X=[W.x-Z*(W.x-B.x),W.y-Z*(W.y-B.y)];break}var nn=l.unproject(q(X));return fe([nn.lat+oe.lat,nn.lng+oe.lng])}var xn={__proto__:null,simplify:Dt,pointToSegmentDistance:ka,closestPointOnSegment:wu,clipSegment:P,_getEdgeIntersection:$,_getBitCode:J,_sqClosestPointOnSegment:ye,isFlat:be,_flat:Oe,polylineCenter:st},On={project:function(s){return new H(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new ee([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,m=this.R,_=s.lat*l,E=this.R_MINOR/m,C=Math.sqrt(1-E*E),B=C*Math.sin(_),W=Math.tan(Math.PI/4-_/2)/Math.pow((1-B)/(1+B),C/2);return _=-m*Math.log(Math.max(W,1e-10)),new H(s.lng*l*m,_)},unproject:function(s){for(var l=180/Math.PI,m=this.R,_=this.R_MINOR/m,E=Math.sqrt(1-_*_),C=Math.exp(-s.y/m),B=Math.PI/2-2*Math.atan(C),W=0,Z=.1,X;W<15&&Math.abs(Z)>1e-7;W++)X=E*Math.sin(B),X=Math.pow((1-X)/(1+X),E/2),Z=Math.PI/2-2*Math.atan(C*X)-B,B+=Z;return new we(B*l,s.x*l/m)}},oi={__proto__:null,LonLat:On,Mercator:Sn,SphericalMercator:la},Ko=r({},Xt,{code:"EPSG:3395",projection:Sn,transformation:function(){var s=.5/(Math.PI*Sn.R);return Ji(s,.5,-s,.5)}()}),Jo=r({},Xt,{code:"EPSG:4326",projection:On,transformation:Ji(1/180,1,-1/180,.5)}),$S=r({},je,{projection:On,transformation:Ji(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var m=l.lng-s.lng,_=l.lat-s.lat;return Math.sqrt(m*m+_*_)},infinite:!0});je.Earth=Xt,je.EPSG3395=Ko,je.EPSG3857=Or,je.EPSG900913=eu,je.EPSG4326=Jo,je.Simple=$S;var Bn=He.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},_addLayers:function(s){s=s?I(s)?s:[s]:[];for(var l=0,m=s.length;l<m;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,m=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var E=this._zoomBoundLayers[_].options;s=E.minZoom===void 0?s:Math.min(s,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zo=Bn.extend({initialize:function(s,l){M(this,l),this._layers={};var m,_;if(s)for(m=0,_=s.length;m<_;m++)this.addLayer(s[m])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),m,_;for(m in this._layers)_=this._layers[m],_[s]&&_[s].apply(_,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),WS=function(s,l){return new Zo(s,l)},Pi=Zo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Zo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Zo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new $e;for(var l in this._layers){var m=this._layers[l];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),KS=function(s,l){return new Pi(s,l)},Yo=xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){M(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,l){var m=this.options,_=m[l+"Size"];typeof _=="number"&&(_=[_,_]);var E=q(_),C=q(l==="shadow"&&m.shadowAnchor||m.iconAnchor||E&&E.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(m.className||""),C&&(s.style.marginLeft=-C.x+"px",s.style.marginTop=-C.y+"px"),E&&(s.style.width=E.x+"px",s.style.height=E.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function JS(s){return new Yo(s)}var Ma=Yo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ma.imagePath!="string"&&(Ma.imagePath=this._detectIconPath()),(this.options.imagePath||Ma.imagePath)+Yo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(m,_,E){var C=_.exec(m);return C&&C[E]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),l=er(s,"background-image")||er(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),xg=hn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Un(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,m=l._map,_=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,C=Ci(l._icon),B=m.getPixelBounds(),W=m.getPixelOrigin(),Z=he(B.min._subtract(W).add(E),B.max._subtract(W).subtract(E));if(!Z.contains(C)){var X=q((Math.max(Z.max.x,C.x)-Z.max.x)/(B.max.x-Z.max.x)-(Math.min(Z.min.x,C.x)-Z.min.x)/(B.min.x-Z.min.x),(Math.max(Z.max.y,C.y)-Z.max.y)/(B.max.y-Z.max.y)-(Math.min(Z.min.y,C.y)-Z.min.y)/(B.min.y-Z.min.y)).multiplyBy(_);m.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),rt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=U(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,m=l._shadow,_=Ci(l._icon),E=l._map.layerPointToLatLng(_);m&&rt(m,_),l._latlng=E,s.latlng=E,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),xu=Bn.extend({options:{icon:new Ma,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){M(this,l),this._latlng=fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),_=!1;m!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),ae(m,l),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(m,"focus",this._panOnFocus,this);var E=s.icon.createShadow(this._shadow),C=!1;E!==this._shadow&&(this._removeShadow(),C=!0),E&&(ae(E,l),E.alt=""),this._shadow=E,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&C&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),De(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&De(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&rt(this._icon,s),this._shadow&&rt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&en(this._icon,s),this._shadow&&en(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,m=l.iconSize?q(l.iconSize):q(0,0),_=l.iconAnchor?q(l.iconAnchor):q(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:m.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ZS(s,l){return new xu(s,l)}var rr=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return M(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Su=rr.extend({options:{fill:!0,radius:10},initialize:function(s,l){M(this,l),this._latlng=fe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return rr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,m=this._clickTolerance(),_=[s+m,l+m];this._pxBounds=new ee(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function YS(s,l){return new Su(s,l)}var fh=Su.extend({initialize:function(s,l,m){if(typeof l=="number"&&(l=r({},m,{radius:l})),M(this,l),this._latlng=fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:rr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,m=this._map,_=m.options.crs;if(_.distance===Xt.distance){var E=Math.PI/180,C=this._mRadius/Xt.R/E,B=m.project([l+C,s]),W=m.project([l-C,s]),Z=B.add(W).divideBy(2),X=m.unproject(Z).lat,oe=Math.acos((Math.cos(C*E)-Math.sin(l*E)*Math.sin(X*E))/(Math.cos(l*E)*Math.cos(X*E)))/E;(isNaN(oe)||oe===0)&&(oe=C/Math.cos(Math.PI/180*l)),this._point=Z.subtract(m.getPixelOrigin()),this._radius=isNaN(oe)?0:Z.x-m.project([X,s-oe]).x,this._radiusY=Z.y-B.y}else{var pe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(pe).x}this._updateBounds()}});function QS(s,l,m){return new fh(s,l,m)}var Ri=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){M(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,m=null,_=ye,E,C,B=0,W=this._parts.length;B<W;B++)for(var Z=this._parts[B],X=1,oe=Z.length;X<oe;X++){E=Z[X-1],C=Z[X];var pe=_(s,E,C,!0);pe<l&&(l=pe,m=_(s,E,C))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return st(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=fe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new $e,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return be(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],m=be(s),_=0,E=s.length;_<E;_++)m?(l[_]=fe(s[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(s[_]);return l},_project:function(){var s=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new H(s,s);this._rawPxBounds&&(this._pxBounds=new ee([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,m){var _=s[0]instanceof we,E=s.length,C,B;if(_){for(B=[],C=0;C<E;C++)B[C]=this._map.latLngToLayerPoint(s[C]),m.extend(B[C]);l.push(B)}else for(C=0;C<E;C++)this._projectLatlngs(s[C],l,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,_,E,C,B,W,Z;for(m=0,E=0,C=this._rings.length;m<C;m++)for(Z=this._rings[m],_=0,B=Z.length;_<B-1;_++)W=P(Z[_],Z[_+1],s,_,!0),W&&(l[E]=l[E]||[],l[E].push(W[0]),(W[1]!==Z[_+1]||_===B-2)&&(l[E].push(W[1]),E++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,m=0,_=s.length;m<_;m++)s[m]=Dt(s[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var m,_,E,C,B,W,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,C=this._parts.length;m<C;m++)for(W=this._parts[m],_=0,B=W.length,E=B-1;_<B;E=_++)if(!(!l&&_===0)&&ka(s,W[E],W[_])<=Z)return!0;return!1}});function XS(s,l){return new Ri(s,l)}Ri._flat=Oe;var Qo=Ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Na(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Ri.prototype._convertLatLngs.call(this,s),m=l.length;return m>=2&&l[0]instanceof we&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(s){Ri.prototype._setLatLngs.call(this,s),be(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return be(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,m=new H(l,l);if(s=new ee(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,E=this._rings.length,C;_<E;_++)C=Ra(this._rings[_],s,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,m,_,E,C,B,W,Z,X;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(C=0,Z=this._parts.length;C<Z;C++)for(m=this._parts[C],B=0,X=m.length,W=X-1;B<X;W=B++)_=m[B],E=m[W],_.y>s.y!=E.y>s.y&&s.x<(E.x-_.x)*(s.y-_.y)/(E.y-_.y)+_.x&&(l=!l);return l||Ri.prototype._containsPoint.call(this,s,!0)}});function jS(s,l){return new Qo(s,l)}var Ni=Pi.extend({initialize:function(s,l){M(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=I(s)?s:s.features,m,_,E;if(l){for(m=0,_=l.length;m<_;m++)E=l[m],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var C=this.options;if(C.filter&&!C.filter(s))return this;var B=Cu(s,C);return B?(B.feature=Pu(s),B.defaultOptions=B.options,this.resetStyle(B),C.onEachFeature&&C.onEachFeature(s,B),this.addLayer(B)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Cu(s,l){var m=s.type==="Feature"?s.geometry:s,_=m?m.coordinates:null,E=[],C=l&&l.pointToLayer,B=l&&l.coordsToLatLng||ph,W,Z,X,oe;if(!_&&!m)return null;switch(m.type){case"Point":return W=B(_),Sg(C,s,W,l);case"MultiPoint":for(X=0,oe=_.length;X<oe;X++)W=B(_[X]),E.push(Sg(C,s,W,l));return new Pi(E);case"LineString":case"MultiLineString":return Z=Iu(_,m.type==="LineString"?0:1,B),new Ri(Z,l);case"Polygon":case"MultiPolygon":return Z=Iu(_,m.type==="Polygon"?1:2,B),new Qo(Z,l);case"GeometryCollection":for(X=0,oe=m.geometries.length;X<oe;X++){var pe=Cu({geometry:m.geometries[X],type:"Feature",properties:s.properties},l);pe&&E.push(pe)}return new Pi(E);case"FeatureCollection":for(X=0,oe=m.features.length;X<oe;X++){var Ce=Cu(m.features[X],l);Ce&&E.push(Ce)}return new Pi(E);default:throw new Error("Invalid GeoJSON object.")}}function Sg(s,l,m,_){return s?s(l,m):new xu(m,_&&_.markersInheritOptions&&_)}function ph(s){return new we(s[1],s[0],s[2])}function Iu(s,l,m){for(var _=[],E=0,C=s.length,B;E<C;E++)B=l?Iu(s[E],l-1,m):(m||ph)(s[E]),_.push(B);return _}function mh(s,l){return s=fe(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Au(s,l,m,_){for(var E=[],C=0,B=s.length;C<B;C++)E.push(l?Au(s[C],be(s[C])?0:l-1,m,_):mh(s[C],_));return!l&&m&&E.length>0&&E.push(E[0].slice()),E}function Xo(s,l){return s.feature?r({},s.feature,{geometry:l}):Pu(l)}function Pu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var gh={toGeoJSON:function(s){return Xo(this,{type:"Point",coordinates:mh(this.getLatLng(),s)})}};xu.include(gh),fh.include(gh),Su.include(gh),Ri.include({toGeoJSON:function(s){var l=!be(this._latlngs),m=Au(this._latlngs,l?1:0,!1,s);return Xo(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Qo.include({toGeoJSON:function(s){var l=!be(this._latlngs),m=l&&!be(this._latlngs[0]),_=Au(this._latlngs,m?2:l?1:0,!0,s);return l||(_=[_]),Xo(this,{type:(m?"Multi":"")+"Polygon",coordinates:_})}}),Zo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(s).geometry.coordinates)}),Xo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var m=l==="GeometryCollection",_=[];return this.eachLayer(function(E){if(E.toGeoJSON){var C=E.toGeoJSON(s);if(m)_.push(C.geometry);else{var B=Pu(C);B.type==="FeatureCollection"?_.push.apply(_,B.features):_.push(B)}}}),m?Xo(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function Cg(s,l){return new Ni(s,l)}var eC=Cg,Ru=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,m){this._url=s,this._bounds=Ae(l),M(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){De(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Tn(this._image),this},bringToBack:function(){return this._map&&En(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ae(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ne("img");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Si(this._image,m,l)},_reset:function(){var s=this._image,l=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();rt(s,l.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),tC=function(s,l,m){return new Ru(s,l,m)},Ig=Ru.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ne("video");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var m=l.getElementsByTagName("source"),_=[],E=0;E<m.length;E++)_.push(m[E].src);this._url=m.length>0?_:[l.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var B=Ne("source");B.src=this._url[C],l.appendChild(B)}}});function nC(s,l,m){return new Ig(s,l,m)}var Ag=Ru.extend({_initImage:function(){var s=this._image=this._url;ae(s,"leaflet-image-layer"),this._zoomAnimated&&ae(s,"leaflet-zoom-animated"),this.options.className&&ae(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function iC(s,l,m){return new Ag(s,l,m)}var si=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof we||I(s))?(this._latlng=fe(s),M(this,l)):(M(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(a(De,void 0,this._container),200)):De(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Tn(this._container),this},bringToBack:function(){return this._map&&En(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Pi){l=null;var m=this._source._layers;for(var _ in m)if(m[_]._map){l=m[_];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=q(this.options.offset),m=this._getAnchor();this._zoomAnimated?rt(this._container,s.add(m)):l=l.add(s).add(m);var _=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,m,_){var E=l;return E instanceof s||(E=new s(_).setContent(l)),m&&E.setLatLng(m),E}}),Bn.include({_initOverlay:function(s,l,m,_){var E=m;return E instanceof s?(M(E,_),E._source=this):(E=l&&!_?l:new s(_,this),E.setContent(m)),E}});var Nu=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,si.prototype.openOn.call(this,s)},onAdd:function(s){si.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Ue))},onRemove:function(s){si.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Ue))},getEvents:function(){var s=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Ne("div",s+"-content-wrapper",l);if(this._contentNode=Ne("div",s+"-content",m),Xr(l),Ea(this._contentNode),_e(l,"contextmenu",Ue),this._tipContainer=Ne("div",s+"-tip-container",l),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Ne("a",s+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',_e(_,"click",function(E){ut(E),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var _=s.offsetHeight,E=this.options.maxHeight,C="leaflet-popup-scrolled";E&&_>E?(l.height=E+"px",ae(s,C)):We(s,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();rt(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(er(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,_=this._containerWidth,E=new H(this._containerLeft,-m-this._containerBottom);E._add(Ci(this._container));var C=s.layerPointToContainerPoint(E),B=q(this.options.autoPanPadding),W=q(this.options.autoPanPaddingTopLeft||B),Z=q(this.options.autoPanPaddingBottomRight||B),X=s.getSize(),oe=0,pe=0;C.x+_+Z.x>X.x&&(oe=C.x+_-X.x+Z.x),C.x-oe-W.x<0&&(oe=C.x-W.x),C.y+m+Z.y>X.y&&(pe=C.y+m-X.y+Z.y),C.y-pe-W.y<0&&(pe=C.y-W.y),(oe||pe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([oe,pe]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rC=function(s,l){return new Nu(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,m){return this._initOverlay(Nu,s,l,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Bn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Nu,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Pi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ti(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ku=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){si.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){si.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=si.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,m,_=this._map,E=this._container,C=_.latLngToContainerPoint(_.getCenter()),B=_.layerPointToContainerPoint(s),W=this.options.direction,Z=E.offsetWidth,X=E.offsetHeight,oe=q(this.options.offset),pe=this._getAnchor();W==="top"?(l=Z/2,m=X):W==="bottom"?(l=Z/2,m=0):W==="center"?(l=Z/2,m=X/2):W==="right"?(l=0,m=X/2):W==="left"?(l=Z,m=X/2):B.x<C.x?(W="right",l=0,m=X/2):(W="left",l=Z+(oe.x+pe.x)*2,m=X/2),s=s.subtract(q(l,m,!0)).add(oe).add(pe),We(E,"leaflet-tooltip-right"),We(E,"leaflet-tooltip-left"),We(E,"leaflet-tooltip-top"),We(E,"leaflet-tooltip-bottom"),ae(E,"leaflet-tooltip-"+W),rt(E,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&en(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),oC=function(s,l){return new ku(s,l)};Se.include({openTooltip:function(s,l,m){return this._initOverlay(ku,s,l,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Bn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ku,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Pi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(_e(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),_e(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,m,_;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var Pg=Yo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Ht(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var _=q(m.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function sC(s){return new Pg(s)}Yo.Default=Ma;var La=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){M(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),De(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Tn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(En(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof H?s:new H(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,m=-s(-1/0,1/0),_=0,E=l.length,C;_<E;_++)C=l[_].style.zIndex,l[_]!==this._container&&C&&(m=s(m,+C));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){en(this._container,this.options.opacity);var s=+new Date,l=!1,m=!1;for(var _ in this._tiles){var E=this._tiles[_];if(!(!E.current||!E.loaded)){var C=Math.min(1,(s-E.loaded)/200);en(E.el,C),C<1?l=!0:(E.active?m=!0:this._onOpaqueTile(E),E.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(G(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=l-Math.abs(s-m),this._onUpdateLevel(m)):(De(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var _=this._levels[s],E=this._map;return _||(_=this._levels[s]={},_.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=E.project(E.unproject(E.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,E.getCenter(),E.getZoom()),y(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)De(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,m,_){var E=Math.floor(s/2),C=Math.floor(l/2),B=m-1,W=new H(+E,+C);W.z=+B;var Z=this._tileCoordsToKey(W),X=this._tiles[Z];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),B>_?this._retainParent(E,C,B,_):!1)},_retainChildren:function(s,l,m,_){for(var E=2*s;E<2*s+2;E++)for(var C=2*l;C<2*l+2;C++){var B=new H(E,C);B.z=m+1;var W=this._tileCoordsToKey(B),Z=this._tiles[W];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);m+1<_&&this._retainChildren(E,C,m+1,_)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,m,_){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var C=this.options.updateWhenZooming&&E!==this._tileZoom;(!_||C)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,l)},_setZoomTransform:function(s,l,m){var _=this._map.getZoomScale(m,s.zoom),E=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,m)).round();ue.any3d?Si(s.el,E,_):rt(s.el,E)},_resetGrid:function(){var s=this._map,l=s.options.crs,m=this._tileSize=this.getTileSize(),_=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],_).x/m.x),Math.ceil(s.project([0,l.wrapLng[1]],_).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],_).y/m.x),Math.ceil(s.project([l.wrapLat[1],0],_).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(m,this._tileZoom),E=l.project(s,this._tileZoom).floor(),C=l.getSize().divideBy(_*2);return new ee(E.subtract(C),E.add(C))},_update:function(s){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),E=this._pxBoundsToTileRange(_),C=E.getCenter(),B=[],W=this.options.keepBuffer,Z=new ee(E.getBottomLeft().subtract([W,-W]),E.getTopRight().add([W,-W]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var oe=this._tiles[X].coords;(oe.z!==this._tileZoom||!Z.contains(new H(oe.x,oe.y)))&&(this._tiles[X].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var pe=E.min.y;pe<=E.max.y;pe++)for(var Ce=E.min.x;Ce<=E.max.x;Ce++){var $t=new H(Ce,pe);if($t.z=this._tileZoom,!!this._isValidTile($t)){var wt=this._tiles[this._tileCoordsToKey($t)];wt?wt.current=!0:B.push($t)}}if(B.sort(function(nn,es){return nn.distanceTo(C)-es.distanceTo(C)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cn=document.createDocumentFragment();for(Ce=0;Ce<B.length;Ce++)this._addTile(B[Ce],Cn);this._level.el.appendChild(Cn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!l.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return Ae(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,m=this.getTileSize(),_=s.scaleBy(m),E=_.add(m),C=l.unproject(_,s.z),B=l.unproject(E,s.z);return[C,B]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),m=new $e(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),m=new H(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(s){var l=this._tiles[s];l&&(De(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ae(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,ue.ielt9&&this.options.opacity<1&&en(s,this.options.opacity)},_addTile:function(s,l){var m=this._getTilePos(s),_=this._tileCoordsToKey(s),E=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(E),this.createTile.length<2&&U(a(this._tileReady,this,s,null,E)),rt(E,m),this._tiles[_]={el:E,coords:s,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:s})},_tileReady:function(s,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:s});var _=this._tileCoordsToKey(s);m=this._tiles[_],m&&(m.loaded=+new Date,this._map._fadeAnimated?(en(m.el,0),G(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(ae(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new H(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ee(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function aC(s){return new La(s)}var jo=La.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=M(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var m=document.createElement("img");return _e(m,"load",a(this._tileOnLoad,this,l,m)),_e(m,"error",a(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=m),l["-y"]=m}return R(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ue.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,m){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),s(m,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,_=this.options.zoomOffset;return m&&(s=l-s),s+_},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=K;var m=this._tiles[s].coords;De(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",K),La.prototype._removeTile.call(this,s)},_tileReady:function(s,l,m){if(!(!this._map||m&&m.getAttribute("src")===K))return La.prototype._tileReady.call(this,s,l,m)}});function Rg(s,l){return new jo(s,l)}var Ng=jo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var m=r({},this.defaultWmsParams);for(var _ in l)_ in this.options||(m[_]=l[_]);l=M(this,l);var E=l.detectRetina&&ue.retina?2:1,C=this.getTileSize();m.width=C.x*E,m.height=C.y*E,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,jo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),m=this._crs,_=he(m.project(l[0]),m.project(l[1])),E=_.min,C=_.max,B=(this._wmsVersion>=1.3&&this._crs===Jo?[E.y,E.x,C.y,C.x]:[E.x,E.y,C.x,C.y]).join(","),W=jo.prototype.getTileUrl.call(this,s);return W+O(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function lC(s,l){return new Ng(s,l)}jo.WMS=Ng,Rg.wms=lC;var ki=Bn.extend({options:{padding:.1},initialize:function(s){M(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var m=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),C=_.multiplyBy(-m).add(E).subtract(this._map._getNewPixelOrigin(s,l));ue.any3d?Si(this._container,C,m):rt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ee(m,m.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kg=ki.extend({options:{tolerance:0},getEvents:function(){var s=ki.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ki.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");_e(s,"mousemove",this._onMouseMove,this),_e(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,De(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var s=this._bounds,l=this._container,m=s.getSize(),_=ue.retina?2:1;rt(l,s.min),l.width=_*m.x,l.height=_*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ki.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,m=l.next,_=l.prev;m?m.prev=_:this._drawLast=_,_?_.next=m:this._drawFirst=m,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),m=[],_,E;for(E=0;E<l.length;E++){if(_=Number(l[E]),isNaN(_))return;m.push(_)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var m,_,E,C,B=s._parts,W=B.length,Z=this._ctx;if(W){for(Z.beginPath(),m=0;m<W;m++){for(_=0,E=B[m].length;_<E;_++)C=B[m][_],Z[_?"lineTo":"moveTo"](C.x,C.y);l&&Z.closePath()}this._fillStroke(Z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,m=this._ctx,_=Math.max(Math.round(s._radius),1),E=(Math.max(Math.round(s._radiusY),1)||_)/_;E!==1&&(m.save(),m.scale(1,E)),m.beginPath(),m.arc(l.x,l.y/E,_,0,Math.PI*2,!1),E!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,l){var m=l.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),m,_,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(_=m);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(We(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var m,_,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(l)&&(_=m);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(ae(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,m){this._map._fireDOMEvent(l,m||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(m)m.prev=_;else return;_?_.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(_)_.next=m;else return;m?m.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Mg(s){return ue.canvas?new kg(s):null}var Da=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),uC={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ki.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Da("shape");ae(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Da("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;De(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,m=s._fill,_=s.options,E=s._container;E.stroked=!!_.stroke,E.filled=!!_.fill,_.stroke?(l||(l=s._stroke=Da("stroke")),E.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=I(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(E.removeChild(l),s._stroke=null),_.fill?(m||(m=s._fill=Da("fill")),E.appendChild(m),m.color=_.fillColor||_.color,m.opacity=_.fillOpacity):m&&(E.removeChild(m),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),m=Math.round(s._radius),_=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+_+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Tn(s._container)},_bringToBack:function(s){En(s._container)}},Mu=ue.vml?Da:tu,ba=ki.extend({_initContainer:function(){this._container=Mu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Mu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){De(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var s=this._bounds,l=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),rt(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Mu("path");s.options.className&&ae(l,s.options.className),s.options.interactive&&ae(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){De(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,m=s.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ao(s._parts,l))},_updateCircle:function(s){var l=s._point,m=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||m,E="a"+m+","+_+" 0 1,0 ",C=s._empty()?"M0 0":"M"+(l.x-m)+","+l.y+E+m*2+",0 "+E+-m*2+",0 ";this._setPath(s,C)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Tn(s._path)},_bringToBack:function(s){En(s._path)}});ue.vml&&ba.include(uC);function Lg(s){return ue.svg||ue.vml?new ba(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Mg(s)||Lg(s)}});var Dg=Qo.extend({initialize:function(s,l){Qo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ae(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function cC(s,l){return new Dg(s,l)}ba.create=Mu,ba.pointsToPath=Ao,Ni.geometryToLayer=Cu,Ni.coordsToLatLng=ph,Ni.coordsToLatLngs=Iu,Ni.latLngToCoords=mh,Ni.latLngsToCoords=Au,Ni.getFeature=Xo,Ni.asFeature=Pu,Se.mergeOptions({boxZoom:!0});var bg=hn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){De(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Fn(),Uo(),this._startPoint=this._map.mouseEventToContainerPoint(s),_e(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ee(this._point,this._startPoint),m=l.getSize();rt(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(De(this._box),We(this._container,"leaflet-crosshair")),dn(),Oo(),ze(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",bg),Se.mergeOptions({doubleClickZoom:!0});var Vg=hn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,m=l.getZoom(),_=l.options.zoomDelta,E=s.originalEvent.shiftKey?m-_:m+_;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(s.containerPoint,E)}});Se.addInitHook("addHandler","doubleClickZoom",Vg),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fg=hn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Un(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ae(this._map.options.maxBounds);this._offsetLimit=he(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),m=this._initialWorldOffset,_=this._draggable._newPos.x,E=(_-l+m)%s+l-m,C=(_+l+m)%s-l-m,B=Math.abs(E+m)<Math.abs(C+m)?E:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(s){var l=this._map,m=l.options,_=!m.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),_)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,B=m.easeLinearity,W=E.multiplyBy(B/C),Z=W.distanceTo([0,0]),X=Math.min(m.inertiaMaxSpeed,Z),oe=W.multiplyBy(X/Z),pe=X/(m.inertiaDeceleration*B),Ce=oe.multiplyBy(-pe/2).round();!Ce.x&&!Ce.y?l.fire("moveend"):(Ce=l._limitOffset(Ce,l.options.maxBounds),U(function(){l.panBy(Ce,{duration:pe,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",Fg),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ug=hn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),_e(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,m=s.scrollTop||l.scrollTop,_=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},m=this.keyCodes,_,E;for(_=0,E=m.left.length;_<E;_++)l[m.left[_]]=[-1*s,0];for(_=0,E=m.right.length;_<E;_++)l[m.right[_]]=[s,0];for(_=0,E=m.down.length;_<E;_++)l[m.down[_]]=[0,s];for(_=0,E=m.up.length;_<E;_++)l[m.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},m=this.keyCodes,_,E;for(_=0,E=m.zoomIn.length;_<E;_++)l[m.zoomIn[_]]=s;for(_=0,E=m.zoomOut.length;_<E;_++)l[m.zoomOut[_]]=-s},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,m=this._map,_;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(_=this._panKeys[l],s.shiftKey&&(_=q(_).multiplyBy(3)),m.options.maxBounds&&(_=m._limitOffset(q(_),m.options.maxBounds)),m.options.worldCopyJump){var E=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(_)));m.panTo(E)}else m.panBy(_)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;ti(s)}}});Se.addInitHook("addHandler","keyboard",Ug),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Og=hn.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=xa(s),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),_),ti(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,C=m?Math.ceil(E/m)*m:E,B=s._limitZoom(l+(this._delta>0?C:-C))-l;this._delta=0,this._startTime=null,B&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+B):s.setZoomAround(this._lastMousePos,l+B))}});Se.addInitHook("addHandler","scrollWheelZoom",Og);var dC=600;Se.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Bg=hn.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new H(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",ut),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),dC),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ze(document,"touchend",ut),ze(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new H(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Se.addInitHook("addHandler","tapHold",Bg),Se.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var zg=hn.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(_)._divideBy(2))),this._startDist=m.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),ut(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]),E=m.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var C=m._add(_)._divideBy(2)._subtract(this._centerPoint);if(E===1&&C.x===0&&C.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var B=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(B,this,!0),ut(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",zg),Se.BoxZoom=bg,Se.DoubleClickZoom=Vg,Se.Drag=Fg,Se.Keyboard=Ug,Se.ScrollWheelZoom=Og,Se.TapHold=Bg,Se.TouchZoom=zg,n.Bounds=ee,n.Browser=ue,n.CRS=je,n.Canvas=kg,n.Circle=fh,n.CircleMarker=Su,n.Class=xe,n.Control=tn,n.DivIcon=Pg,n.DivOverlay=si,n.DomEvent=eo,n.DomUtil=hh,n.Draggable=Un,n.Evented=He,n.FeatureGroup=Pi,n.GeoJSON=Ni,n.GridLayer=La,n.Handler=hn,n.Icon=Yo,n.ImageOverlay=Ru,n.LatLng=we,n.LatLngBounds=$e,n.Layer=Bn,n.LayerGroup=Zo,n.LineUtil=xn,n.Map=Se,n.Marker=xu,n.Mixin=Eu,n.Path=rr,n.Point=H,n.PolyUtil=Wo,n.Polygon=Qo,n.Polyline=Ri,n.Popup=Nu,n.PosAnimation=Ca,n.Projection=oi,n.Rectangle=Dg,n.Renderer=ki,n.SVG=ba,n.SVGOverlay=Ag,n.TileLayer=jo,n.Tooltip=ku,n.Transformation=ua,n.Util=F,n.VideoOverlay=Ig,n.bind=a,n.bounds=he,n.canvas=Mg,n.circle=QS,n.circleMarker=YS,n.control=ii,n.divIcon=sC,n.extend=r,n.featureGroup=KS,n.geoJSON=Cg,n.geoJson=eC,n.gridLayer=aC,n.icon=JS,n.imageOverlay=tC,n.latLng=fe,n.latLngBounds=Ae,n.layerGroup=WS,n.map=Go,n.marker=ZS,n.point=q,n.polygon=jS,n.polyline=XS,n.popup=rC,n.rectangle=cC,n.setOptions=M,n.stamp=d,n.svg=Lg,n.svgOverlay=iC,n.tileLayer=Rg,n.tooltip=oC,n.transformation=Ji,n.version=i,n.videoOverlay=nC;var hC=window.L;n.noConflict=function(){return window.L=hC,this},window.L=n})})(Op,Op.exports);var G4=Op.exports;const ci=$0(G4),H4=({initialLat:t,initialLng:e,onLocationSelect:n,onAddressFound:i})=>{const r=me.useRef(null),o=me.useRef(null),a=me.useRef(null),[u,d]=me.useState(!1),h=38.4237,g=27.1428;me.useEffect(()=>{if(!r.current)return;if(o.current){o.current.invalidateSize();return}const M=ci.map(r.current).setView([t||h,e||g],t?16:12);return ci.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(M),t&&e&&S(t,e,M),M.on("click",O=>{v(O.latlng.lat,O.latlng.lng,M)}),o.current=M,()=>{o.current&&(o.current.remove(),o.current=null)}},[]),me.useEffect(()=>{var M;if(o.current&&t&&e){const O=(M=a.current)==null?void 0:M.getLatLng();(!O||O.lat!==t||O.lng!==e)&&(S(t,e,o.current),o.current.setView([t,e],16))}},[t,e]);const y=async(M,O)=>{if(i){d(!0);try{const N=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${O}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"tr-TR"}});if(!N.ok)throw new Error("Adres alnamad");const R=await N.json(),I=R.address;if(I){const z=I.town||I.county||I.city_district||"",K=I.suburb||I.neighbourhood||I.quarter||"",Y=I.road||"",D=I.province||I.city||"zmir";i({district:z,neighborhood:K,street:Y,city:D,fullAddress:R.display_name})}}catch(N){console.error("Adres zmleme hatas:",N)}finally{d(!1)}}},v=(M,O,N)=>{S(M,O,N),n(M,O),y(M,O)},S=(M,O,N)=>{a.current&&a.current.remove();const R=ci.divIcon({className:"custom-div-icon",html:`<div style="background-color: #2563eb; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; color: white;">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
             </div>`,iconSize:[30,30],iconAnchor:[15,30]});a.current=ci.marker([M,O],{icon:R}).addTo(N)},b=()=>{if(!navigator.geolocation){alert("Taraycnz konum servisini desteklemiyor.");return}d(!0),navigator.geolocation.getCurrentPosition(M=>{const{latitude:O,longitude:N}=M.coords;o.current&&(o.current.setView([O,N],16),v(O,N,o.current)),d(!1)},()=>{alert("Konum alnamad. Ltfen izinleri kontrol edin."),d(!1)})};return w.jsxs("div",{className:"relative w-full h-full group",children:[w.jsx("div",{ref:r,className:"w-full h-full rounded-lg z-0",style:{minHeight:"300px"}}),u&&w.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-blue-100 z-[400] flex items-center gap-2 text-xs font-semibold text-blue-600 animate-in fade-in slide-in-from-top-2",children:[w.jsx(pd,{size:14,className:"animate-spin"}),"Adres zmleniyor..."]}),w.jsx("button",{type:"button",onClick:b,className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md border border-slate-200 text-slate-700 hover:text-blue-600 hover:bg-slate-50 z-[400]",title:"Mevcut Konumumu Bul",children:w.jsx(_M,{size:24})}),w.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-md text-xs font-semibold text-slate-600 shadow-sm border border-slate-200 z-[400]",children:"Konum semek iin haritaya tklayn"})]})},rn={Konak:{Alsancak:["Kbrs ehitleri Cad.","Talatpaa Bulv.","1456. Sokak","Plevne Bulv."],Gztepe:["Mithatpaa Cad.","Susuzdede Park","100. Sokak","Mustafa Kemal Sahil Bulv."],Pasaport:["Cumhuriyet Bulv.","Akdeniz Cad.","1382. Sokak"],"Mimar Sinan":["air Eref Bulv.","Ziya Gkalp Bulv."],Kltr:["evket zelik Sok.","1390. Sokak"]},Karyaka:{Bostanl:["Cemal Grsel Cad.","ehitler Bulv.","2010. Sokak","Bostanl skelesi"],Maviehir:["Cahar Dudayev Bulv.","Aziz Nesin Bulv.","2040. Sokak"],ar:["Kemalpaa Cad.","Salah Birsel Sok.","1710. Sokak"],Bahelievler:["Zbeyde Hanm Cad.","1671. Sokak"]},Bornova:{zkanlar:["Mustafa Kemal Cad.","Sakarya Cad.","252. Sokak"],Kkpark:["Svari Cad.","Zafer Cad.","160. Sokak"],Kazmdirik:["Gediz Cad.","372. Sokak"]},Buca:{irinyer:["Menderes Cad.","Kouyolu Cad.","Forbes Cad."],Tnaztepe:["Dou Cad.","202. Sokak"]}},q4=["TP1","TP2","TP3","DER"],$4=["Bykehir","le","zel Mlkiyet","Kamu","Dier"],W4=({initialData:t,existingStands:e=[],onSave:n,onCancel:i})=>{var qe,He,H,ie;const[r,o]=me.useState({id:"",name:"",phone:"",city:"zmir",district:"",neighborhood:"",street:"",address:"",location:void 0,capacity:0,plates:[],ukomeDecisionNo:"",ukomeDate:"",ukomeSummary:"",status:vp.ACTIVE,officeType:"TP1",responsibility:"Bykehir",notes:"",history:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[a,u]=me.useState(""),[d,h]=me.useState(!1),[g,y]=me.useState(!1),[v,S]=me.useState(Object.keys(rn)),[b,M]=me.useState([]),[O,N]=me.useState([]),R=me.useMemo(()=>{const q=new Map;return e.forEach(ee=>{t&&ee.id===t.id||ee.plates&&ee.plates.forEach(he=>q.set(he,ee.name))}),q},[e,t]),I=me.useMemo(()=>Array.from(R.keys()).sort(),[R]);me.useEffect(()=>{t?(o({...t,plates:t.plates||[]}),t.district&&rn[t.district]&&(M(Object.keys(rn[t.district])),t.neighborhood&&rn[t.district][t.neighborhood]&&N(rn[t.district][t.neighborhood]))):o(q=>({...q,id:Date.now().toString()}))},[t]);const z=q=>{const{name:ee,value:he}=q.target;o($e=>({...$e,[ee]:he}))},K=q=>{const ee=q.target.value;Y(ee)},Y=q=>{o(ee=>({...ee,district:q,neighborhood:"",street:""})),M(q&&rn[q]?Object.keys(rn[q]):[]),N([])},D=q=>{const ee=q.target.value;A(ee,r.district)},A=(q,ee)=>{o(he=>({...he,neighborhood:q,street:""})),ee&&q&&rn[ee]&&rn[ee][q]?N(rn[ee][q]||[]):N([])},k=q=>{let ee="",he="",$e=[],Ae=[];if(q.district){const we=q.district.replace(/(lesi|le)$/i,"").trim(),fe=Object.keys(rn).find(je=>je.toLocaleLowerCase("tr-TR")===we.toLocaleLowerCase("tr-TR"));fe&&(ee=fe,$e=Object.keys(rn[ee]))}if(ee&&q.neighborhood){const we=q.neighborhood.replace(/(Mahallesi|Mah\.|Mah|Mh\.|Mh)$/i,"").trim(),fe=rn[ee];if(fe){const je=Object.keys(fe).find(Xt=>Xt.toLocaleLowerCase("tr-TR")===we.toLocaleLowerCase("tr-TR"));je&&(he=je,Ae=rn[ee][he]||[])}}ee&&(M($e),N(Ae),o(we=>({...we,district:ee,neighborhood:he,street:q.street||we.street})))},V=async()=>{if(!r.district||!r.name){alert("Ltfen nce le ve Durak Ad giriniz.");return}h(!0);const q=await z4(r.name,r.capacity,r.district);o(ee=>({...ee,notes:ee.notes?ee.notes+`
`+q:q})),h(!1)},U=()=>{if(!a.trim())return;const q=a.toUpperCase().trim();if(r.plates.includes(q)){alert("Bu plaka zaten bu durakta ekli.");return}o(ee=>({...ee,plates:[...ee.plates,q]})),u("")},G=q=>{o(ee=>({...ee,plates:ee.plates.filter(he=>he!==q)}))},F=q=>{q.key==="Enter"&&(q.preventDefault(),U())},xe=async q=>{if(q.preventDefault(),!g){y(!0);try{const ee=`${r.street||""} ${r.neighborhood||""} Mah. ${r.district||""}/ZMR`;await n({...r,address:ee,capacity:Number(r.capacity),updatedAt:new Date().toISOString()})}catch(ee){console.error("Kaydetme hatas:",ee),alert("Kayt srasnda bir hata olutu."),y(!1)}}},pt=a&&R.get(a.toUpperCase().trim());return w.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 animate-in fade-in zoom-in duration-300",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t&&t.createdAt?"Dura Revize Et":"Yeni Taksi Dura Kayd"}),(t==null?void 0:t.ukomeDecisionNo)&&w.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[w.jsx(vo,{size:14})," lem Yaplan Karar No: ",w.jsx("strong",{children:t.ukomeDecisionNo})]})]}),w.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700",children:w.jsx(wp,{size:24})})]}),w.jsxs("form",{onSubmit:xe,className:"space-y-6",children:[w.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl border border-blue-200 shadow-sm",children:[w.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[w.jsx(vo,{size:18})," GRLEN UKOME KARAR BLGLER"]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar No"}),w.jsx("input",{name:"ukomeDecisionNo",value:r.ukomeDecisionNo,onChange:z,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-bold text-slate-800",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar Tarihi"}),w.jsx("input",{type:"date",name:"ukomeDate",value:r.ukomeDate,onChange:z,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"block text-xs font-semibold text-blue-800 mb-1",children:"Karar zeti"}),w.jsx("textarea",{name:"ukomeSummary",rows:2,value:r.ukomeSummary,onChange:z,className:"w-full px-3 py-2 bg-white border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Ad"}),w.jsx("input",{required:!0,name:"name",value:r.name,onChange:z,placeholder:"rn: Alsancak Gar Taksi",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Telefonu"}),w.jsxs("div",{className:"relative",children:[w.jsx(Zx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),w.jsx("input",{name:"phone",value:r.phone,onChange:z,placeholder:"0232 123 45 67",className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ara Park Kapasitesi"}),w.jsx("input",{required:!0,type:"number",name:"capacity",value:r.capacity,onChange:z,min:"0",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yazhane Tipi"}),w.jsx("select",{name:"officeType",value:r.officeType,onChange:z,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:q4.map(q=>w.jsx("option",{value:q,children:q},q))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sorumluluk / Yetki Alan"}),w.jsx("select",{name:"responsibility",value:r.responsibility,onChange:z,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:$4.map(q=>w.jsx("option",{value:q,children:q},q))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durak Durumu"}),w.jsx("select",{name:"status",value:r.status,onChange:z,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:Object.values(vp).map(q=>w.jsx("option",{value:q,children:q},q))})]})]}),w.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[w.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[w.jsx(Xd,{size:16})," Konum Bilgileri"]}),w.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[w.jsxs("div",{className:"flex-1 space-y-4",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{className:"md:col-span-2",children:[w.jsxs("label",{className:"block text-xs font-medium text-slate-500 mb-1 flex justify-between",children:["le",r.location&&!r.district&&w.jsx("span",{className:"text-[10px] text-blue-500 animate-pulse",children:"Konumdan bekleniyor..."})]}),w.jsxs("select",{required:!0,name:"district",value:r.district,onChange:K,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[w.jsx("option",{value:"",children:"Seiniz"}),v.map(q=>w.jsx("option",{value:q,children:q},q))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Mahalle"}),w.jsxs("select",{required:!0,name:"neighborhood",value:r.neighborhood,onChange:D,disabled:!r.district,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",children:[w.jsx("option",{value:"",children:"Seiniz"}),b.map(q=>w.jsx("option",{value:q,children:q},q))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Sokak / Cadde"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{list:"streets-list",name:"street",value:r.street,onChange:z,disabled:!r.neighborhood,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100",placeholder:O.length>0?"Seiniz veya yaznz":"Yaznz"}),w.jsx("datalist",{id:"streets-list",children:O.map(q=>w.jsx("option",{value:q},q))})]})]})]}),w.jsxs("div",{className:"bg-white border border-slate-200 p-3 rounded-lg",children:[w.jsxs("div",{className:"text-xs font-semibold text-slate-400 mb-2 flex items-center justify-between",children:[w.jsx("span",{children:"SELEN KOORDNATLAR"}),w.jsxs("span",{className:"text-[10px] text-blue-500 flex items-center gap-1",children:[w.jsx(AM,{size:10})," Otomatik Adres Aktif"]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-slate-500",children:"Enlem:"})," ",w.jsx("span",{className:"font-mono text-slate-800",children:((qe=r.location)==null?void 0:qe.lat.toFixed(6))||"-"})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-slate-500",children:"Boylam:"})," ",w.jsx("span",{className:"font-mono text-slate-800",children:((He=r.location)==null?void 0:He.lng.toFixed(6))||"-"})]})]}),!r.location&&w.jsx("div",{className:"text-xs text-red-500 mt-1",children:"* Haritadan konum seiniz"})]}),w.jsxs("div",{className:"mt-3 text-xs text-slate-500 italic border-t border-slate-200 pt-2",children:["nizleme: ",r.street," ",r.neighborhood," ",r.district&&r.neighborhood?"Mah.":""," ",r.district," / ZMR"]})]}),w.jsx("div",{className:"flex-1 min-h-[300px] border border-slate-300 rounded-lg overflow-hidden shadow-inner relative",children:w.jsx(H4,{initialLat:(H=r.location)==null?void 0:H.lat,initialLng:(ie=r.location)==null?void 0:ie.lng,onLocationSelect:(q,ee)=>o(he=>({...he,location:{lat:q,lng:ee}})),onAddressFound:k})})]})]}),w.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[w.jsxs("h3",{className:"text-sm font-semibold text-yellow-900 mb-4 flex items-center gap-2",children:[w.jsx(jl,{size:16})," Durak Plaka Listesi",w.jsxs("span",{className:"ml-2 bg-yellow-200 text-yellow-800 text-xs px-2 py-0.5 rounded-full",children:["Toplam: ",r.plates.length]})]}),w.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{list:"known-plates",type:"text",value:a,onChange:q=>u(q.target.value),onKeyDown:F,placeholder:"Plaka Giriniz veya Seiniz (rn: 35 T 1234)",className:"flex-1 px-3 py-2 bg-white border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 outline-none uppercase font-mono"}),w.jsx("datalist",{id:"known-plates",children:I.map(q=>w.jsxs("option",{value:q,children:[R.get(q)||"Bilinmiyor"," duranda"]},q))}),w.jsxs("button",{type:"button",onClick:U,className:"px-4 py-2 bg-yellow-500 text-white font-medium rounded-lg hover:bg-yellow-600 transition-colors flex items-center gap-2",children:[w.jsx(Yx,{size:18})," Ekle"]})]}),pt&&w.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-orange-700 bg-orange-100 px-3 py-1.5 rounded-md border border-orange-200",children:[w.jsx(Wx,{size:12,className:"shrink-0"}),w.jsxs("span",{children:[w.jsx("strong",{children:"Dikkat:"})," Bu plaka u anda ",w.jsx("strong",{children:pt})," duranda kaytl grnyor."]})]})]}),r.plates.length>0?w.jsx("div",{className:"flex flex-wrap gap-2",children:r.plates.map((q,ee)=>w.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 pl-3 pr-2 py-1.5 rounded-md shadow-sm",children:[w.jsx("span",{className:"font-mono font-bold text-slate-800 text-sm",children:q}),w.jsx("button",{type:"button",onClick:()=>G(q),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 p-1 rounded transition-colors",children:w.jsx(wp,{size:14})})]},ee))}):w.jsx("p",{className:"text-xs text-yellow-700/60 italic",children:"Henz plaka eklenmemi."})]}),w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"flex justify-between items-end mb-1",children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Notlar"}),w.jsxs("button",{type:"button",onClick:V,disabled:d,className:"text-xs flex items-center gap-1 text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50",children:[d?w.jsx(pd,{size:14,className:"animate-spin"}):w.jsx(SM,{size:14}),"AI ile Tantm Yazs"]})]}),w.jsx("textarea",{name:"notes",rows:3,value:r.notes,onChange:z,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),w.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[w.jsx("button",{type:"button",onClick:i,disabled:g,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:"ptal"}),w.jsxs("button",{type:"submit",disabled:g||d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors shadow-sm disabled:opacity-70 disabled:cursor-not-allowed",children:[g?w.jsx(pd,{size:18,className:"animate-spin"}):w.jsx(wM,{size:18}),g?"Kaydediliyor...":"Kaydet"]})]})]})]})},K4=({stand:t,onBack:e,onRevise:n,onViewHistory:i})=>{var a;const r=[...t.history||[]].sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),o=u=>{switch(u){case"ukomeDecisionNo":return"UKOME Karar No";case"ukomeDate":return"UKOME Tarihi";case"ukomeSummary":return"UKOME Karar zeti";case"address":return"Ak Adres";case"district":return"le";case"neighborhood":return"Mahalle";case"street":return"Sokak / Cadde";case"capacity":return"Ara Park Kapasitesi";case"plates":return"Plaka Listesi";case"status":return"Durum";case"officeType":return"Yazhane Tipi";case"responsibility":return"Sorumluluk";case"name":return"Durak Ad";case"phone":return"Telefon";case"notes":return"Notlar";default:return u}};return w.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-300",children:[w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[w.jsxs("div",{children:[w.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-2 text-sm font-medium",children:[w.jsx(Ls,{size:16})," Listeye Dn"]}),w.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.name,w.jsx("span",{className:`text-sm px-3 py-1 rounded-full border ${t.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:t.status})]}),w.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-1 text-sm",children:[w.jsx(Xd,{size:14})," ",t.district," / ",t.city]})]}),w.jsxs("button",{onClick:()=>n(t),className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm flex items-center gap-2",children:[w.jsx(vo,{size:18}),"Revize Et (UKOME)"]})]}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[w.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[w.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[w.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:w.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[w.jsx(Jx,{size:18,className:"text-blue-500"})," Temel Bilgiler"]})}),w.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Durak Ad"}),w.jsx("div",{className:"text-slate-900 font-medium mt-1",children:t.name})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Telefon"}),w.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[w.jsx(Zx,{size:14,className:"text-slate-400"}),t.phone||"-"]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Yazhane Tipi"}),w.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[w.jsx(gM,{size:14,className:"text-slate-400"}),t.officeType]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Sorumluluk Alan"}),w.jsxs("div",{className:"text-slate-900 font-medium mt-1 flex items-center gap-2",children:[w.jsx(xM,{size:14,className:"text-slate-400"}),t.responsibility]})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Ak Adres"}),w.jsx("div",{className:"text-slate-900 mt-1 bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm",children:t.address})]}),t.notes&&w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase",children:"Notlar"}),w.jsx("div",{className:"text-slate-700 mt-1 text-sm",children:t.notes})]})]})]}),w.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[w.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[w.jsx(Ep,{size:18,className:"text-purple-500"})," Revize Gemii"]}),w.jsxs("button",{onClick:()=>i(),className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded-full hover:bg-purple-200 font-medium transition-colors flex items-center gap-1",children:[w.jsx(Tp,{size:12})," Zaman Makinesi / Detayl ncele"]})]}),w.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-md",children:[r.length," lem"]})]}),w.jsx("div",{className:"overflow-x-auto",children:r.length>0?w.jsxs("table",{className:"w-full text-left text-sm",children:[w.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-200",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"lem Tarihi"}),w.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"UKOME Karar/Tarih"}),w.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Deien zellik"}),w.jsx("th",{className:"px-6 py-3 font-semibold text-slate-600",children:"Deiiklik"})]})}),w.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(u=>w.jsxs("tr",{className:"hover:bg-slate-50",children:[w.jsx("td",{className:"px-6 py-3 text-slate-500",children:new Date(u.timestamp).toLocaleDateString("tr-TR")}),w.jsx("td",{className:"px-6 py-3",children:u.relatedUkomeNo?w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{onClick:()=>i(u.relatedUkomeNo),className:"font-mono text-xs font-medium bg-blue-50 text-blue-700 px-2 py-1 rounded w-fit cursor-pointer hover:bg-blue-100 hover:underline",title:"Gemi durumunu grmek iin tkla",children:u.relatedUkomeNo}),u.relatedUkomeDate&&w.jsx("span",{className:"text-[10px] text-slate-500 mt-1",children:new Date(u.relatedUkomeDate).toLocaleDateString("tr-TR")})]}):w.jsx("span",{className:"text-slate-400 text-xs",children:"-"})}),w.jsx("td",{className:"px-6 py-3 text-slate-900 font-medium",children:o(u.fieldName)}),w.jsx("td",{className:"px-6 py-3",children:w.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.jsx("span",{className:"text-red-500 line-through text-xs",children:u.oldValue}),w.jsx(mM,{size:14,className:"text-slate-400"}),w.jsx("span",{className:"text-green-600 font-medium",children:u.newValue})]})})]},u.id))})]}):w.jsx("div",{className:"p-8 text-center text-slate-400",children:"Bu durak iin henz bir deiiklik kayd bulunmuyor."})})]})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[w.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-b border-yellow-100",children:w.jsxs("h3",{className:"font-semibold text-yellow-800 flex items-center gap-2",children:[w.jsx(jl,{size:18})," Ara Plakalar"]})}),w.jsxs("div",{className:"p-6",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4 text-sm text-slate-500",children:[w.jsxs("span",{children:["Park Kapasitesi: ",w.jsx("strong",{className:"text-slate-900",children:t.capacity})]}),w.jsxs("span",{children:["Kaytl: ",w.jsx("strong",{className:"text-blue-600",children:((a=t.plates)==null?void 0:a.length)||0})]})]}),t.plates&&t.plates.length>0?w.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.plates.map((u,d)=>w.jsx("div",{className:"bg-slate-50 border border-slate-200 text-center py-2 rounded font-mono font-bold text-slate-800 text-sm",children:u},d))}):w.jsx("p",{className:"text-sm text-slate-400 italic text-center py-4",children:"Kaytl plaka yok."})]})]}),w.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-6",children:[w.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[w.jsx(vo,{size:18})," Son UKOME Durumu"]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Numaras"}),w.jsx("div",{className:"text-lg font-bold text-blue-900",children:t.ukomeDecisionNo||"-"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar Tarihi"}),w.jsx("div",{className:"text-sm font-medium text-blue-800",children:t.ukomeDate?new Date(t.ukomeDate).toLocaleDateString("tr-TR"):"-"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-xs text-blue-600/70 font-semibold uppercase mb-1",children:"Karar zeti"}),w.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.ukomeSummary||"zet bilgisi girilmemi."})]})]})]})]})]})]})},J4=(t,e)=>{if(!e)return t;const n=JSON.parse(JSON.stringify(t)),i=[...t.history||[]].sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),r=i.filter(u=>u.relatedUkomeNo===e);if(r.length===0)return t;const o=new Date(r[0].timestamp).getTime();return i.filter(u=>new Date(u.timestamp).getTime()>o).forEach(u=>{const d=u.fieldName;d==="capacity"?n[d]=Number(u.oldValue):d==="plates"?n[d]=u.oldValue==="(Plaka Yok)"?[]:u.oldValue.split(", ").filter(Boolean):n[d]=u.oldValue}),n},Z4=({stand:t,initialUkomeNo:e,onClose:n})=>{var h;const[i,r]=me.useState(e||null),o=me.useMemo(()=>{const g={};return t.history.forEach(y=>{const v=y.relatedUkomeNo||"Manuel Dzenleme";g[v]||(g[v]={no:v,date:y.relatedUkomeDate||"-",timestamp:y.timestamp,summary:"",logs:[],user:y.changedBy}),g[v].logs.push(y),new Date(y.timestamp)>new Date(g[v].timestamp)&&(g[v].timestamp=y.timestamp)}),Object.values(g).sort((y,v)=>new Date(v.timestamp).getTime()-new Date(y.timestamp).getTime())},[t.history]),a=me.useMemo(()=>J4(t,i),[t,i]),u=o.find(g=>g.no===i),d=g=>{switch(g){case"ukomeDecisionNo":return"Karar No";case"ukomeDate":return"Karar Tarihi";case"address":return"Ak Adres";case"district":return"le";case"capacity":return"Kapasite";case"plates":return"Plakalar";case"status":return"Durum";case"name":return"Durak Ad";case"notes":return"Notlar";default:return g}};return w.jsxs("div",{className:"fixed inset-0 z-[2000] flex justify-end",children:[w.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:n}),w.jsxs("div",{className:"relative w-full max-w-4xl bg-white h-full shadow-2xl flex flex-col md:flex-row animate-in slide-in-from-right duration-300",children:[w.jsxs("div",{className:`w-full md:w-1/3 bg-slate-50 border-r border-slate-200 flex flex-col h-full ${i?"hidden md:flex":"flex"}`,children:[w.jsxs("div",{className:"p-5 border-b border-slate-200 bg-white",children:[w.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[w.jsx(Tp,{className:"text-blue-600",size:20}),"Karar Gemii"]}),w.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Grntlemek iin bir ilem sein."})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[w.jsxs("div",{onClick:()=>r(null),className:`p-4 rounded-xl border cursor-pointer transition-all ${i===null?"bg-blue-600 text-white border-blue-600 shadow-md ring-2 ring-blue-100":"bg-white border-slate-200 hover:border-blue-300 text-slate-700"}`,children:[w.jsxs("div",{className:"flex justify-between items-start mb-1",children:[w.jsx("span",{className:"font-bold text-sm",children:"Mevcut Durum"}),w.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${i===null?"bg-blue-500 text-white":"bg-slate-100 text-slate-500"}`,children:"MD"})]}),w.jsx("div",{className:`text-xs ${i===null?"text-blue-100":"text-slate-500"}`,children:"Duran u anki gncel hali."})]}),o.map(g=>w.jsxs("div",{onClick:()=>r(g.no),className:`p-4 rounded-xl border cursor-pointer transition-all relative overflow-hidden group ${i===g.no?"bg-white border-blue-500 ring-2 ring-blue-100 shadow-md":"bg-white border-slate-200 hover:border-blue-300"}`,children:[w.jsx("div",{className:"flex justify-between items-start mb-2",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(vo,{size:16,className:i===g.no?"text-blue-600":"text-slate-400"}),w.jsx("span",{className:"font-bold text-slate-800 text-sm",children:g.no==="Manuel Dzenleme"?"Dzenleme":g.no})]})}),w.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[w.jsx(Kx,{size:12}),new Date(g.date!=="-"?g.date:g.timestamp).toLocaleDateString("tr-TR")]}),w.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[w.jsx(IM,{size:12})," ",g.user," tarafndan"]}),w.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:[g.logs.length," Deiiklik"]})]},g.no))]})]}),w.jsxs("div",{className:`w-full md:w-2/3 bg-white flex flex-col h-full ${i?"flex":"hidden md:flex"}`,children:[w.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-full",children:w.jsx(Ls,{size:20})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:i?`${i} Karar Sonras`:"Gncel Durum"}),w.jsx("p",{className:"text-xs text-slate-500",children:i?"Duran bu karar uygulandktan sonraki grnm.":"Duran sistemdeki en son hali."})]})]}),w.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:w.jsx(wp,{size:24})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/30",children:[w.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-6",children:[w.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white px-6 py-3 border-b border-slate-200 flex justify-between items-center",children:[w.jsxs("div",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[w.jsx(Jx,{size:18,className:"text-blue-500"}),"Durak Bilgileri (",i?"Ariv":"Gncel",")"]}),i&&w.jsx("span",{className:"text-[10px] uppercase font-bold text-white bg-orange-400 px-2 py-1 rounded",children:"Gemi Kayt"})]}),w.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durak Ad"}),w.jsx("div",{className:"text-lg font-bold text-slate-800 mt-1",children:a.name})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Durum"}),w.jsx("div",{className:"mt-1",children:w.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-bold rounded border ${a.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:a.status})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"le / Mahalle"}),w.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[a.district," / ",a.neighborhood]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Kapasite"}),w.jsxs("div",{className:"text-slate-700 mt-1 font-medium",children:[a.capacity," Ara"]})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1",children:[w.jsx(Xd,{size:12})," Adres"]}),w.jsx("div",{className:"text-slate-600 mt-1 text-sm bg-slate-50 p-2 rounded border border-slate-100",children:a.address})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1 mb-2",children:[w.jsx(jl,{size:12})," Kaytl Plakalar (",((h=a.plates)==null?void 0:h.length)||0,")"]}),w.jsx("div",{className:"flex flex-wrap gap-2",children:a.plates&&a.plates.length>0?a.plates.map((g,y)=>w.jsx("span",{className:"text-xs font-mono font-bold bg-yellow-50 text-slate-800 border border-yellow-200 px-2 py-1 rounded",children:g},y)):w.jsx("span",{className:"text-xs text-slate-400 italic",children:"Plaka kayd yok"})})]})]})]}),u&&w.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[w.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:w.jsx("h4",{className:"font-semibold text-slate-700 text-sm",children:"Bu Kararda Yaplan Deiiklikler"})}),w.jsxs("table",{className:"w-full text-left text-sm",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b border-slate-100 text-xs text-slate-500",children:[w.jsx("th",{className:"px-6 py-2 font-medium",children:"Alan"}),w.jsx("th",{className:"px-6 py-2 font-medium",children:"Eski Deer"}),w.jsx("th",{className:"px-6 py-2 font-medium",children:"Yeni Deer"})]})}),w.jsx("tbody",{className:"divide-y divide-slate-50",children:u.logs.map(g=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:d(g.fieldName)}),w.jsx("td",{className:"px-6 py-3 text-red-500 text-xs line-through opacity-70",children:g.oldValue}),w.jsx("td",{className:"px-6 py-3 text-green-600 font-bold text-xs",children:g.newValue})]},g.id))})]})]}),i===null&&w.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 text-slate-400",children:[w.jsx(Tp,{size:48,className:"mb-4 text-slate-200"}),w.jsxs("p",{children:["Gemite duran nasl grndn incelemek iin",w.jsx("br",{}),"sol menden bir UKOME karar sein."]})]})]})]})]})]})},Y4=({stands:t})=>{const e=me.useRef(null),n=me.useRef(null),i=38.4237,r=27.1428;return me.useEffect(()=>{if(!e.current)return;if(!n.current){const d=ci.map(e.current).setView([i,r],11);ci.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(d),n.current=d}const o=n.current;o.eachLayer(d=>{d instanceof ci.Marker&&o.removeLayer(d)});const a=t.filter(d=>d.location&&d.location.lat&&d.location.lng),u=ci.latLngBounds([]);a.forEach(d=>{var y;if(!d.location)return;const h=ci.divIcon({className:"custom-stand-icon",html:`<div style="
                    background-color: ${d.status==="Aktif"?"#facc15":"#ef4444"}; 
                    width: 36px; height: 36px; 
                    border-radius: 50%; 
                    border: 3px solid white; 
                    box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
                    display: flex; align-items: center; justify-content: center; 
                    color: ${d.status==="Aktif"?"#854d0e":"white"};
                    font-size: 10px; font-weight: bold;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>
                   </div>`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});ci.marker([d.location.lat,d.location.lng],{icon:h}).bindPopup(`
                <div style="font-family: 'Inter', sans-serif;">
                    <h3 style="font-weight: bold; margin-bottom: 4px; font-size: 14px;">${d.name}</h3>
                    <p style="margin: 0; color: #64748b; font-size: 12px;">${d.district} / ${d.neighborhood}</p>
                    <div style="margin-top: 8px; display: flex; gap: 8px;">
                        <span style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${((y=d.plates)==null?void 0:y.length)||0} Ara</span>
                        <span style="background: ${d.status==="Aktif"?"#f0fdf4":"#fef2f2"}; color: ${d.status==="Aktif"?"#166534":"#991b1b"}; padding: 2px 6px; border-radius: 4px; font-size: 11px;">${d.status}</span>
                    </div>
                </div>
            `).addTo(o),u.extend([d.location.lat,d.location.lng])}),a.length>0&&o.fitBounds(u,{padding:[50,50]})},[t]),w.jsxs("div",{className:"w-full h-full bg-slate-100 rounded-xl overflow-hidden shadow-inner border border-slate-200 relative",children:[w.jsx("div",{ref:e,className:"w-full h-full z-0"}),w.jsxs("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-lg z-[400] border border-slate-200 text-xs",children:[w.jsx("h4",{className:"font-bold mb-2 text-slate-700",children:"Durak Durumlar"}),w.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 border border-yellow-600"}),w.jsx("span",{children:"Aktif Durak"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-red-700"}),w.jsx("span",{children:"Pasif Durak"})]})]})]})},Q4=({stands:t,onRefresh:e,onBack:n})=>{const[i,r]=me.useState(""),[o,a]=me.useState(null),[u,d]=me.useState(""),[h,g]=me.useState(!1),[y,v]=me.useState(null),S=o?o.trim().toUpperCase():"",b=me.useMemo(()=>{const I=new Set;return t.forEach(z=>{z.plates&&z.plates.forEach(K=>I.add(K))}),Array.from(I).sort()},[t]),M=me.useMemo(()=>S?t.find(I=>I.plates.includes(S)):null,[t,S]),O=me.useMemo(()=>{if(!S)return[];const I=[];return t.forEach(z=>{z.history.forEach(K=>{if(K.fieldName==="plates"){const Y=K.oldValue==="(Plaka Yok)"?[]:K.oldValue.split(", ").map(V=>V.trim()),D=K.newValue==="(Plaka Yok)"?[]:K.newValue.split(", ").map(V=>V.trim()),A=Y.includes(S),k=D.includes(S);!A&&k?I.push({id:K.id,date:K.timestamp,standName:z.name,action:"GR",details:`Duraa eklendi. Ref: ${K.relatedUkomeNo||"Manuel lem"}`,user:K.changedBy}):A&&!k&&I.push({id:K.id,date:K.timestamp,standName:z.name,action:"IKI",details:`Duraktan ayrld. Ref: ${K.relatedUkomeNo||"Manuel lem"}`,user:K.changedBy})}})}),I.sort((z,K)=>new Date(K.date).getTime()-new Date(z.date).getTime())},[t,S]),N=I=>{if(I.preventDefault(),i.trim()){const z=i.trim().toUpperCase();a(z),v(null),d("")}},R=async()=>{if(!(!o||!u)){if(M&&M.id===u){alert("Plaka zaten bu durakta.");return}if(confirm(`${o} plakasn ${M?M.name+" durandan alp ":""} seilen duraa transfer etmek istiyor musunuz?`)){g(!0);try{const I=t.find(A=>A.id===u);if(!I)throw new Error("Hedef durak bulunamad.");const z=new Date().toISOString(),K=`TRANSFER-${new Date().toLocaleDateString("tr-TR").replace(/\./g,"")}`;if(M){const A={...M,plates:M.plates.filter(V=>V!==o),updatedAt:z},k=yp(M,A);k.forEach(V=>{V.relatedUkomeNo=K,V.changedBy="PlakaYnetim"}),A.history=[...M.history,...k],await fd(A)}const Y={...I,plates:[...I.plates,o].sort(),updatedAt:z},D=yp(I,Y);D.forEach(A=>{A.relatedUkomeNo=K,A.changedBy="PlakaYnetim"}),Y.history=[...I.history,...D],await fd(Y),await e(),v(`${o} baaryla ${I.name} durana tand.`),d("")}catch(I){console.error(I),alert("Transfer srasnda hata olutu.")}finally{g(!1)}}}};return w.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[w.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",children:w.jsx(Ls,{size:20})}),w.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[w.jsx(jl,{className:"text-purple-600"}),"Plaka Ynetim Paneli"]})]})})}),w.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 py-8",children:[w.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:w.jsxs("form",{onSubmit:N,className:"flex gap-4 items-end",children:[w.jsxs("div",{className:"flex-1 max-w-md",children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Plaka Sorgula"}),w.jsxs("div",{className:"relative",children:[w.jsx(Qx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),w.jsx("input",{type:"text",list:"plate-search-suggestions",value:i,onChange:I=>r(I.target.value),placeholder:"rn: 35 T 1234",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-lg font-mono uppercase",autoFocus:!0}),w.jsx("datalist",{id:"plate-search-suggestions",children:b.map(I=>w.jsx("option",{value:I},I))})]})]}),w.jsx("button",{type:"submit",className:"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:"Sorgula"})]})}),o&&w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[w.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[w.jsx("h3",{className:"font-semibold text-slate-800",children:"Mevcut Durum"}),w.jsx("span",{className:"font-mono font-bold text-lg bg-slate-200 px-3 py-1 rounded text-slate-800",children:o})]}),w.jsx("div",{className:"p-8 text-center",children:M?w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4",children:w.jsx(Xd,{size:32})}),w.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:M.name}),w.jsxs("p",{className:"text-slate-500",children:[M.district," / ",M.neighborhood]}),w.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-50 text-green-700 text-sm font-medium border border-green-200",children:[w.jsx(uv,{size:14})," Aktif Olarak alyor"]})]}):w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4",children:w.jsx(fM,{size:32})}),w.jsx("h2",{className:"text-xl font-bold text-slate-700 mb-2",children:"Bota / Kaytsz"}),w.jsx("p",{className:"text-slate-500",children:"Bu plaka u anda hibir duraa kaytl grnmyor."})]})})]}),w.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[w.jsx("div",{className:"bg-purple-50 px-6 py-4 border-b border-purple-100",children:w.jsxs("h3",{className:"font-semibold text-purple-900 flex items-center gap-2",children:[w.jsx(pM,{size:18})," Durak Deitir / Transfer Et"]})}),w.jsxs("div",{className:"p-6",children:[y&&w.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center gap-2",children:[w.jsx(uv,{size:18}),y]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yeni Durak Sein"}),w.jsxs("select",{value:u,onChange:I=>d(I.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[w.jsx("option",{value:"",children:"Durak Seiniz..."}),t.sort((I,z)=>I.name.localeCompare(z.name)).map(I=>w.jsxs("option",{value:I.id,disabled:(M==null?void 0:M.id)===I.id,children:[I.name," (",I.district,") ",(M==null?void 0:M.id)===I.id?"(Mevcut)":""]},I.id))]})]}),w.jsx("button",{onClick:R,disabled:!u||h,className:"w-full py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2",children:h?"leniyor...":"Transferi Tamamla"})]})]})]})]}),w.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[600px]",children:[w.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[w.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[w.jsx(Ep,{size:18,className:"text-blue-500"})," alma Gemii"]}),w.jsxs("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded text-slate-600",children:[O.length," Kayt"]})]}),w.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:O.length>0?w.jsx("div",{className:"divide-y divide-slate-100",children:O.map(I=>w.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[w.jsxs("div",{className:"flex justify-between items-start mb-1",children:[w.jsx("div",{className:"font-bold text-slate-800",children:I.standName}),w.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${I.action==="GR"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:I.action})]}),w.jsx("div",{className:"text-sm text-slate-500 mb-2",children:I.details}),w.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(Kx,{size:12}),new Date(I.date).toLocaleDateString("tr-TR")," ",new Date(I.date).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]}),w.jsxs("div",{children:["lem: ",I.user]})]})]},I.id))}):w.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-8 text-center",children:[w.jsx(Ep,{size:48,className:"mb-4 opacity-20"}),w.jsx("p",{children:"Bu plaka iin gemi kayd bulunamad."})]})})]})]})]})]})},X4=()=>{const[t,e]=me.useState("LANDING"),[n,i]=me.useState("LIST"),[r,o]=me.useState("CREATE"),[a,u]=me.useState([]),[d,h]=me.useState(void 0),[g,y]=me.useState(void 0),[v,S]=me.useState(null),[b,M]=me.useState(""),[O,N]=me.useState(!0),[R,I]=me.useState(null),[z,K]=me.useState(!1),[Y,D]=me.useState({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""});me.useEffect(()=>{A()},[]);const A=async()=>{N(!0),I(null);try{const H=await uM();u(H)}catch(H){console.error("Firebase Error:",H);let ie="Veritabanna balanlamad.";H.message&&H.message.includes("services/firebaseConfig.ts")?ie=H.message:H.code==="permission-denied"?ie="Yetki Hatas: Firestore veritaban kurallar okuma/yazmay engelliyor. (Test modunu an: allow read, write: if true;)":H.code==="unavailable"?ie="Sunucuya ulalamyor. nternet balantnz kontrol edin.":H.message&&H.message.includes("project")?ie="Proje Bulunamad: Firebase Console'da 'Firestore Database' oluturduunuzdan emin olun. Sadece proje amak yetmez, veritabann da 'Create Database' diyerek oluturmalsnz.":ie=`Veritaban Hatas (${H.code||"Bilinmeyen"}): ${H.message}`,I(ie)}finally{N(!1)}},k=()=>{o("CREATE"),h(void 0),i("FORM")},V=H=>{h(H),i("VIEW")},U=H=>{o("EDIT"),h(H),i("FORM")},G=H=>{h(H),D({decisionNo:"",date:new Date().toISOString().split("T")[0],summary:""}),K(!0)},F=H=>{if(H.preventDefault(),K(!1),d){const ie={...d,ukomeDecisionNo:Y.decisionNo,ukomeDate:Y.date,ukomeSummary:Y.summary};o("REVISION"),h(ie),i("FORM")}},xe=async H=>{if(confirm("Bu dura silmek istediinize emin misiniz?"))try{await cM(H),await A(),n==="VIEW"&&i("LIST")}catch{alert("Silme ilemi baarsz oldu.")}},pt=async H=>{try{const ie=a.find(q=>q.id===H.id);if(ie){let q=ie.history;if(r==="REVISION"){const he=yp(ie,H);q=[...ie.history,...he]}const ee={...H,history:q};await fd(ee)}else await fd(H);await A(),i("LIST")}catch(ie){console.error(ie),alert("Kayt ilemi baarsz oldu. Hata detaylar konsolda.")}},qe=(H,ie=null)=>{y(H),S(ie)},He=a.filter(H=>{var ie,q;return H.name.toLowerCase().includes(b.toLowerCase())||H.district.toLowerCase().includes(b.toLowerCase())||((ie=H.neighborhood)==null?void 0:ie.toLowerCase().includes(b.toLowerCase()))||((q=H.ukomeDecisionNo)==null?void 0:q.toLowerCase().includes(b.toLowerCase()))});return t==="LANDING"?w.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:w.jsxs("div",{className:"max-w-4xl w-full",children:[w.jsxs("div",{className:"text-center mb-10",children:[w.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-400 rounded-2xl text-slate-900 mb-6 shadow-lg rotate-3",children:w.jsx(lv,{size:48})}),w.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 tracking-tight mb-2",children:"TaksiYnetim"}),w.jsx("p",{className:"text-slate-500 text-lg",children:"zmir Taksi Duraklar ve Plaka Ynetim Sistemi"})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("button",{onClick:()=>e("STANDS"),className:"group relative bg-white hover:bg-blue-600 border border-slate-200 hover:border-blue-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[w.jsx("div",{className:"bg-blue-50 group-hover:bg-blue-500 p-4 rounded-xl mb-6 transition-colors",children:w.jsx(cv,{size:32,className:"text-blue-600 group-hover:text-white transition-colors"})}),w.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Durak Ynetim Paneli"}),w.jsx("p",{className:"text-slate-500 group-hover:text-blue-100",children:"Taksi duraklarn harita zerinde grntleyin, kapasite bilgilerini ynetin, UKOME kararlarn ileyin."}),w.jsxs("div",{className:"mt-auto pt-6 flex items-center text-blue-600 group-hover:text-white font-medium",children:["Paneli A ",w.jsx(Ls,{className:"rotate-180 ml-2"})]})]}),w.jsxs("button",{onClick:()=>e("PLATES"),className:"group relative bg-white hover:bg-purple-600 border border-slate-200 hover:border-purple-600 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 text-left flex flex-col items-start",children:[w.jsx("div",{className:"bg-purple-50 group-hover:bg-purple-500 p-4 rounded-xl mb-6 transition-colors",children:w.jsx(jl,{size:32,className:"text-purple-600 group-hover:text-white transition-colors"})}),w.jsx("h2",{className:"text-2xl font-bold text-slate-800 group-hover:text-white mb-2",children:"Plaka Ynetim Paneli"}),w.jsx("p",{className:"text-slate-500 group-hover:text-purple-100",children:"Plaka sorgulayn, aralarn hangi durakta altn grn ve durak transfer ilemlerini gerekletirin."}),w.jsxs("div",{className:"mt-auto pt-6 flex items-center text-purple-600 group-hover:text-white font-medium",children:["Paneli A ",w.jsx(Ls,{className:"rotate-180 ml-2"})]})]})]})]})}):t==="PLATES"?w.jsx(Q4,{stands:a,onRefresh:A,onBack:()=>e("LANDING")}):w.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col animate-in fade-in duration-300",children:[w.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:()=>e("LANDING"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",title:"Ana Menye Dn",children:w.jsx(Ls,{size:20})}),w.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>i("LIST"),children:[w.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:w.jsx(cv,{size:20})}),w.jsx("h1",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"Durak Ynetim Paneli"})]})]}),w.jsx("div",{className:"text-sm text-slate-500 hidden sm:block",children:"Durak Kayt Sistemi v1.2"})]})}),w.jsxs("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[R&&w.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-start gap-3 shadow-sm animate-in fade-in slide-in-from-top-2",children:[w.jsx(Wx,{className:"shrink-0 mt-0.5",size:20}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"font-bold",children:"Balant Hatas"}),w.jsx("p",{className:"text-sm mt-1",children:R})]})]}),(n==="LIST"||n==="MAP")&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[w.jsxs("div",{className:"relative w-full sm:w-96",children:[w.jsx(Qx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),w.jsx("input",{type:"text",placeholder:"Durak ara (sim, le, UKOME No)...",value:b,onChange:H=>M(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),w.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[w.jsxs("div",{className:"bg-white border border-slate-300 rounded-lg p-1 flex",children:[w.jsxs("button",{onClick:()=>i("LIST"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="LIST"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[w.jsx(vM,{size:18}),"Liste"]}),w.jsxs("button",{onClick:()=>i("MAP"),className:`p-1.5 rounded-md flex items-center gap-2 text-sm font-medium transition-colors ${n==="MAP"?"bg-slate-100 text-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:[w.jsx(TM,{size:18}),"Harita"]})]}),w.jsxs("button",{onClick:k,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm font-medium",children:[w.jsx(Yx,{size:20}),"Yeni Durak Ekle"]})]})]}),w.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[500px]",children:O?w.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[w.jsx(pd,{size:32,className:"animate-spin mb-2 text-blue-600"}),w.jsx("p",{children:"Veriler Ykleniyor..."})]}):w.jsx(w.Fragment,{children:n==="LIST"?w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-left border-collapse",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[w.jsx("th",{className:"p-4",children:"Durak Ad"}),w.jsx("th",{className:"p-4",children:"le / Mahalle"}),w.jsx("th",{className:"p-4",children:"DURAKTA ALIAN ARA SAYISI"}),w.jsx("th",{className:"p-4",children:"Son UKOME Karar"}),w.jsx("th",{className:"p-4",children:"Durum"}),w.jsx("th",{className:"p-4 text-right",children:"lemler"})]})}),w.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:He.length>0?He.map(H=>{var ie;return w.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[w.jsx("td",{className:"p-4 font-medium text-slate-900",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600",children:w.jsx(lv,{size:16})}),H.name]})}),w.jsxs("td",{className:"p-4",children:[w.jsx("div",{className:"font-medium text-slate-700",children:H.district}),H.neighborhood&&w.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[H.neighborhood," Mah."]})]}),w.jsx("td",{className:"p-4",children:w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("div",{className:"flex items-baseline gap-2",children:[w.jsx("span",{className:"text-lg font-bold text-slate-700",children:((ie=H.plates)==null?void 0:ie.length)||0}),w.jsx("span",{className:"text-xs text-slate-500",children:"Ara"})]}),w.jsxs("span",{className:"text-xs text-slate-400",children:["(Kapasite: ",H.capacity,")"]})]})}),w.jsx("td",{className:"p-4 text-slate-600",children:H.ukomeDecisionNo?w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"font-medium text-slate-700",children:H.ukomeDecisionNo}),w.jsx("span",{className:"text-xs text-slate-400",children:new Date(H.ukomeDate).toLocaleDateString("tr-TR")})]}):"-"}),w.jsx("td",{className:"p-4",children:w.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${H.status==="Aktif"?"bg-green-50 text-green-700 border-green-200":H.status==="Pasif"?"bg-red-50 text-red-700 border-red-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:H.status})}),w.jsx("td",{className:"p-4 text-right",children:w.jsxs("div",{className:"flex items-center justify-end gap-2",children:[w.jsx("button",{onClick:()=>V(H),className:"p-2 bg-white border border-slate-200 text-slate-600 hover:text-blue-600 hover:border-blue-200 rounded-lg transition-all shadow-sm",title:"Detayl Grntle",children:w.jsx(yM,{size:18})}),w.jsx("button",{onClick:()=>U(H),className:"p-2 bg-orange-50 border border-orange-100 text-orange-600 hover:bg-orange-100 hover:border-orange-200 rounded-lg transition-all shadow-sm",title:"Dzenle (Hatal Giri Dzeltme)",children:w.jsx(EM,{size:18})}),w.jsxs("button",{onClick:()=>G(H),className:"px-3 py-2 bg-blue-50 border border-blue-100 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-medium flex items-center gap-1 transition-all",title:"UKOME Karar ile Revize Et",children:[w.jsx(vo,{size:16}),"Revize"]}),w.jsx("button",{onClick:()=>xe(H.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg ml-1",title:"Sil",children:w.jsx(CM,{size:18})})]})})]},H.id)}):w.jsx("tr",{children:w.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:R?w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsx("span",{className:"font-semibold text-red-500",children:"Balant Sorunu"}),w.jsx("span",{className:"text-xs",children:"Yukardaki hata mesajn kontrol edin."})]}):"Kayt bulunamad."})})})]})}):w.jsx("div",{className:"h-[600px] w-full",children:w.jsx(Y4,{stands:He})})})})]}),n==="VIEW"&&d&&w.jsx(K4,{stand:d,onBack:()=>i("LIST"),onRevise:G,onViewHistory:H=>qe(d,H)}),n==="FORM"&&w.jsx(W4,{initialData:d,existingStands:a,onSave:pt,onCancel:()=>i("LIST")})]}),g&&w.jsx(Z4,{stand:g,initialUkomeNo:v,onClose:()=>{y(void 0),S(null)}}),z&&w.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>K(!1)}),w.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md relative z-10 p-6 animate-in fade-in zoom-in duration-200",children:[w.jsxs("div",{className:"mb-5",children:[w.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[w.jsx(vo,{className:"text-blue-600"}),"UKOME Revizyon Karar"]}),w.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Dura revize etmeden nce ilgili UKOME karar numarasn giriniz."})]}),w.jsxs("form",{onSubmit:F,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Numaras"}),w.jsx("input",{required:!0,type:"text",placeholder:"rn: 2025/12-05",value:Y.decisionNo,onChange:H=>D({...Y,decisionNo:H.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar Tarihi"}),w.jsx("input",{required:!0,type:"date",value:Y.date,onChange:H=>D({...Y,date:H.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Karar zeti (Opsiyonel)"}),w.jsx("textarea",{rows:2,placeholder:"Deiiklik sebebi...",value:Y.summary,onChange:H=>D({...Y,summary:H.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),w.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[w.jsx("button",{type:"button",onClick:()=>K(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg",children:"ptal"}),w.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Devam Et & Revize Et"})]})]})]})]})]})},qS=document.getElementById("root");if(!qS)throw new Error("Could not find root element to mount to");const j4=nf.createRoot(qS);j4.render(w.jsx(FC.StrictMode,{children:w.jsx(X4,{})}));
